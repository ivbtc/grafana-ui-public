"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkgrafana"] = self["webpackChunkgrafana"] || []).push([["heatmapPanel"],{

/***/ "./public/app/core/components/ColorScale/ColorScale.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ColorScale: () => (/* binding */ ColorScale)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n\n\n\n\nconst GRADIENT_STOPS = 10;\nconst ColorScale = ({ colorPalette, min, max, display, hoverValue, useStopsPercentage }) => {\n  const [colors, setColors] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  const [scaleHover, setScaleHover] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({ isShown: false, value: 0 });\n  const [percent, setPercent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const theme = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useTheme2)();\n  const styles = getStyles(theme, colors);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    setColors(getGradientStops({ colorArray: colorPalette, stops: GRADIENT_STOPS, useStopsPercentage }));\n  }, [colorPalette, useStopsPercentage]);\n  const onScaleMouseMove = (event) => {\n    const divOffset = event.nativeEvent.offsetX;\n    const offsetWidth = event.currentTarget.offsetWidth;\n    const normPercentage = Math.floor(divOffset * 100 / offsetWidth + 1);\n    const scaleValue = Math.floor((max - min) * normPercentage / 100 + min);\n    setScaleHover({ isShown: true, value: scaleValue });\n    setPercent(normPercentage);\n  };\n  const onScaleMouseLeave = () => {\n    setScaleHover({ isShown: false, value: 0 });\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    setPercent(hoverValue == null ? null : clampPercent100((hoverValue - min) / (max - min)));\n  }, [hoverValue, min, max]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.scaleWrapper, onMouseMove: onScaleMouseMove, onMouseLeave: onScaleMouseLeave }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.scaleGradient }, display && (scaleHover.isShown || hoverValue !== void 0) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.followerContainer }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.follower, style: { left: `${percent}%` } }))), display && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.followerContainer }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.legendValues }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", null, display(min)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", null, display(max))), percent != null && (scaleHover.isShown || hoverValue !== void 0) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { className: styles.hoverValue, style: { left: `${percent}%` } }, display(hoverValue ?? scaleHover.value))));\n};\nconst getGradientStops = ({\n  colorArray,\n  stops,\n  useStopsPercentage = true\n}) => {\n  const colorCount = colorArray.length;\n  if (useStopsPercentage && colorCount <= 20) {\n    const incr = 1 / colorCount * 100;\n    let per = 0;\n    const stops2 = [];\n    for (const color of colorArray) {\n      if (per > 0) {\n        stops2.push(`${color} ${per}%`);\n      } else {\n        stops2.push(color);\n      }\n      per += incr;\n      stops2.push(`${color} ${per}%`);\n    }\n    return stops2;\n  }\n  const gradientEnd = colorArray[colorCount - 1];\n  const skip = Math.ceil(colorCount / stops);\n  const gradientStops = /* @__PURE__ */ new Set();\n  for (let i = 0; i < colorCount; i += skip) {\n    gradientStops.add(colorArray[i]);\n  }\n  gradientStops.add(gradientEnd);\n  return [...gradientStops];\n};\nfunction clampPercent100(v) {\n  if (v > 1) {\n    return 100;\n  }\n  if (v < 0) {\n    return 0;\n  }\n  return v * 100;\n}\nconst getStyles = (theme, colors) => ({\n  scaleWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    width: 100%;\n    font-size: 11px;\n    opacity: 1;\n  `,\n  scaleGradient: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    background: linear-gradient(90deg, ${colors.join()});\n    height: 10px;\n    pointer-events: none;\n  `,\n  legendValues: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: flex;\n    justify-content: space-between;\n    pointer-events: none;\n  `,\n  hoverValue: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    position: absolute;\n    margin-top: -14px;\n    padding: 3px 15px;\n    background: ${theme.colors.background.primary};\n    transform: translateX(-50%);\n  `,\n  followerContainer: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    position: relative;\n    pointer-events: none;\n    white-space: nowrap;\n  `,\n  follower: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    position: absolute;\n    height: 14px;\n    width: 14px;\n    border-radius: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    border: 2px solid ${theme.colors.text.primary};\n    margin-top: 5px;\n  `\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2NvcmUvY29tcG9uZW50cy9Db2xvclNjYWxlL0NvbG9yU2NhbGUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvQjtBQUN1QjtBQUdqQjtBQWtCMUIsTUFBTSxpQkFBaUI7QUFFaEIsTUFBTSxhQUFhLENBQUMsRUFBRSxjQUFjLEtBQUssS0FBSyxTQUFTLFlBQVksbUJBQW1CLE1BQWE7QUFDeEcsUUFBTSxDQUFDLFFBQVEsU0FBUyxJQUFJLCtDQUFRLENBQVcsQ0FBQyxDQUFDO0FBQ2pELFFBQU0sQ0FBQyxZQUFZLGFBQWEsSUFBSSwrQ0FBUSxDQUFhLEVBQUUsU0FBUyxPQUFPLE9BQU8sRUFBRSxDQUFDO0FBQ3JGLFFBQU0sQ0FBQyxTQUFTLFVBQVUsSUFBSSwrQ0FBUSxDQUFnQixJQUFJO0FBRTFELFFBQU0sUUFBUSxzREFBUyxDQUFDO0FBQ3hCLFFBQU0sU0FBUyxVQUFVLE9BQU8sTUFBTTtBQUV0QyxrREFBUyxDQUFDLE1BQU07QUFDZCxjQUFVLGlCQUFpQixFQUFFLFlBQVksY0FBYyxPQUFPLGdCQUFnQixtQkFBbUIsQ0FBQyxDQUFDO0FBQUEsRUFDckcsR0FBRyxDQUFDLGNBQWMsa0JBQWtCLENBQUM7QUFFckMsUUFBTSxtQkFBbUIsQ0FBQyxVQUE0QztBQUNwRSxVQUFNLFlBQVksTUFBTSxZQUFZO0FBQ3BDLFVBQU0sY0FBYyxNQUFNLGNBQWM7QUFDeEMsVUFBTSxpQkFBaUIsS0FBSyxNQUFPLFlBQVksTUFBTyxjQUFjLENBQUM7QUFDckUsVUFBTSxhQUFhLEtBQUssT0FBUSxNQUFNLE9BQU8saUJBQWtCLE1BQU0sR0FBRztBQUV4RSxrQkFBYyxFQUFFLFNBQVMsTUFBTSxPQUFPLFdBQVcsQ0FBQztBQUNsRCxlQUFXLGNBQWM7QUFBQSxFQUMzQjtBQUVBLFFBQU0sb0JBQW9CLE1BQU07QUFDOUIsa0JBQWMsRUFBRSxTQUFTLE9BQU8sT0FBTyxFQUFFLENBQUM7QUFBQSxFQUM1QztBQUVBLGtEQUFTLENBQUMsTUFBTTtBQUNkLGVBQVcsY0FBYyxPQUFPLE9BQU8saUJBQWlCLGFBQWEsUUFBUSxNQUFNLElBQUksQ0FBQztBQUFBLEVBQzFGLEdBQUcsQ0FBQyxZQUFZLEtBQUssR0FBRyxDQUFDO0FBRXpCLFNBQ0UsMkVBQUMsU0FBSSxXQUFXLE9BQU8sY0FBYyxhQUFhLGtCQUFrQixjQUFjLHFCQUNoRiwyRUFBQyxTQUFJLFdBQVcsT0FBTyxpQkFDcEIsWUFBWSxXQUFXLFdBQVcsZUFBZSxXQUNoRCwyRUFBQyxTQUFJLFdBQVcsT0FBTyxxQkFDckIsMkVBQUMsU0FBSSxXQUFXLE9BQU8sVUFBVSxPQUFPLEVBQUUsTUFBTSxHQUFHLFdBQVcsR0FBRyxDQUNuRSxDQUVKLEdBQ0MsV0FDQywyRUFBQyxTQUFJLFdBQVcsT0FBTyxxQkFDckIsMkVBQUMsU0FBSSxXQUFXLE9BQU8sZ0JBQ3JCLDJFQUFDLGNBQU0sUUFBUSxHQUFHLENBQUUsR0FDcEIsMkVBQUMsY0FBTSxRQUFRLEdBQUcsQ0FBRSxDQUN0QixHQUNDLFdBQVcsU0FBUyxXQUFXLFdBQVcsZUFBZSxXQUN4RCwyRUFBQyxVQUFLLFdBQVcsT0FBTyxZQUFZLE9BQU8sRUFBRSxNQUFNLEdBQUcsV0FBVyxLQUM5RCxRQUFRLGNBQWMsV0FBVyxLQUFLLENBQ3pDLENBRUosQ0FFSjtBQUVKO0FBRUEsTUFBTSxtQkFBbUIsQ0FBQztBQUFBLEVBQ3hCO0FBQUEsRUFDQTtBQUFBLEVBQ0EscUJBQXFCO0FBQ3ZCLE1BSWdCO0FBQ2QsUUFBTSxhQUFhLFdBQVc7QUFDOUIsTUFBSSxzQkFBc0IsY0FBYyxJQUFJO0FBQzFDLFVBQU0sT0FBUSxJQUFJLGFBQWM7QUFDaEMsUUFBSSxNQUFNO0FBQ1YsVUFBTUEsU0FBa0IsQ0FBQztBQUN6QixlQUFXLFNBQVMsWUFBWTtBQUM5QixVQUFJLE1BQU0sR0FBRztBQUNYLFFBQUFBLE9BQU0sS0FBSyxHQUFHLFNBQVMsTUFBTTtBQUFBLE1BQy9CLE9BQU87QUFDTCxRQUFBQSxPQUFNLEtBQUssS0FBSztBQUFBLE1BQ2xCO0FBQ0EsYUFBTztBQUNQLE1BQUFBLE9BQU0sS0FBSyxHQUFHLFNBQVMsTUFBTTtBQUFBLElBQy9CO0FBQ0EsV0FBT0E7QUFBQSxFQUNUO0FBRUEsUUFBTSxjQUFjLFdBQVcsYUFBYSxDQUFDO0FBQzdDLFFBQU0sT0FBTyxLQUFLLEtBQUssYUFBYSxLQUFLO0FBQ3pDLFFBQU0sZ0JBQWdCLG9CQUFJLElBQVk7QUFFdEMsV0FBUyxJQUFJLEdBQUcsSUFBSSxZQUFZLEtBQUssTUFBTTtBQUN6QyxrQkFBYyxJQUFJLFdBQVcsQ0FBQyxDQUFDO0FBQUEsRUFDakM7QUFFQSxnQkFBYyxJQUFJLFdBQVc7QUFFN0IsU0FBTyxDQUFDLEdBQUcsYUFBYTtBQUMxQjtBQUVBLFNBQVMsZ0JBQWdCLEdBQVc7QUFDbEMsTUFBSSxJQUFJLEdBQUc7QUFDVCxXQUFPO0FBQUEsRUFDVDtBQUNBLE1BQUksSUFBSSxHQUFHO0FBQ1QsV0FBTztBQUFBLEVBQ1Q7QUFDQSxTQUFPLElBQUk7QUFDYjtBQUVBLE1BQU0sWUFBWSxDQUFDLE9BQXNCLFlBQXNCO0FBQUEsRUFDN0QsY0FBYyxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLZCxlQUFlLGlEQUFHO0FBQUgseUNBQ3dCLE9BQU8sS0FBSztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSW5ELGNBQWMsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS2QsWUFBWSxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBLGtCQUlJLE1BQU0sT0FBTyxXQUFXO0FBQUE7QUFBQTtBQUFBLEVBR3hDLG1CQUFtQixpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLbkIsVUFBVSxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx3QkFNWSxNQUFNLE9BQU8sS0FBSztBQUFBO0FBQUE7QUFHMUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9jb3JlL2NvbXBvbmVudHMvQ29sb3JTY2FsZS9Db2xvclNjYWxlLnRzeD8wZDExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgdXNlVGhlbWUyIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG50eXBlIFByb3BzID0ge1xuICBjb2xvclBhbGV0dGU6IHN0cmluZ1tdO1xuICBtaW46IG51bWJlcjtcbiAgbWF4OiBudW1iZXI7XG5cbiAgLy8gU2hvdyBhIHZhbHVlIGFzIHN0cmluZyAtLSB3aGVuIG5vdCBkZWZpbmVkLCB0aGUgcmF3IHZhbHVlcyB3aWxsIG5vdCBiZSBzaG93blxuICBkaXNwbGF5PzogKHY6IG51bWJlcikgPT4gc3RyaW5nO1xuICBob3ZlclZhbHVlPzogbnVtYmVyO1xuICB1c2VTdG9wc1BlcmNlbnRhZ2U/OiBib29sZWFuO1xufTtcblxudHlwZSBIb3ZlclN0YXRlID0ge1xuICBpc1Nob3duOiBib29sZWFuO1xuICB2YWx1ZTogbnVtYmVyO1xufTtcblxuY29uc3QgR1JBRElFTlRfU1RPUFMgPSAxMDtcblxuZXhwb3J0IGNvbnN0IENvbG9yU2NhbGUgPSAoeyBjb2xvclBhbGV0dGUsIG1pbiwgbWF4LCBkaXNwbGF5LCBob3ZlclZhbHVlLCB1c2VTdG9wc1BlcmNlbnRhZ2UgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgW2NvbG9ycywgc2V0Q29sb3JzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFtzY2FsZUhvdmVyLCBzZXRTY2FsZUhvdmVyXSA9IHVzZVN0YXRlPEhvdmVyU3RhdGU+KHsgaXNTaG93bjogZmFsc2UsIHZhbHVlOiAwIH0pO1xuICBjb25zdCBbcGVyY2VudCwgc2V0UGVyY2VudF0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTsgLy8gMC0xMDAgZm9yIENTUyBwZXJjZW50YWdlXG5cbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZTIoKTtcbiAgY29uc3Qgc3R5bGVzID0gZ2V0U3R5bGVzKHRoZW1lLCBjb2xvcnMpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0Q29sb3JzKGdldEdyYWRpZW50U3RvcHMoeyBjb2xvckFycmF5OiBjb2xvclBhbGV0dGUsIHN0b3BzOiBHUkFESUVOVF9TVE9QUywgdXNlU3RvcHNQZXJjZW50YWdlIH0pKTtcbiAgfSwgW2NvbG9yUGFsZXR0ZSwgdXNlU3RvcHNQZXJjZW50YWdlXSk7XG5cbiAgY29uc3Qgb25TY2FsZU1vdXNlTW92ZSA9IChldmVudDogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBkaXZPZmZzZXQgPSBldmVudC5uYXRpdmVFdmVudC5vZmZzZXRYO1xuICAgIGNvbnN0IG9mZnNldFdpZHRoID0gZXZlbnQuY3VycmVudFRhcmdldC5vZmZzZXRXaWR0aDtcbiAgICBjb25zdCBub3JtUGVyY2VudGFnZSA9IE1hdGguZmxvb3IoKGRpdk9mZnNldCAqIDEwMCkgLyBvZmZzZXRXaWR0aCArIDEpO1xuICAgIGNvbnN0IHNjYWxlVmFsdWUgPSBNYXRoLmZsb29yKCgobWF4IC0gbWluKSAqIG5vcm1QZXJjZW50YWdlKSAvIDEwMCArIG1pbik7XG5cbiAgICBzZXRTY2FsZUhvdmVyKHsgaXNTaG93bjogdHJ1ZSwgdmFsdWU6IHNjYWxlVmFsdWUgfSk7XG4gICAgc2V0UGVyY2VudChub3JtUGVyY2VudGFnZSk7XG4gIH07XG5cbiAgY29uc3Qgb25TY2FsZU1vdXNlTGVhdmUgPSAoKSA9PiB7XG4gICAgc2V0U2NhbGVIb3Zlcih7IGlzU2hvd246IGZhbHNlLCB2YWx1ZTogMCB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFBlcmNlbnQoaG92ZXJWYWx1ZSA9PSBudWxsID8gbnVsbCA6IGNsYW1wUGVyY2VudDEwMCgoaG92ZXJWYWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKSkpO1xuICB9LCBbaG92ZXJWYWx1ZSwgbWluLCBtYXhdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc2NhbGVXcmFwcGVyfSBvbk1vdXNlTW92ZT17b25TY2FsZU1vdXNlTW92ZX0gb25Nb3VzZUxlYXZlPXtvblNjYWxlTW91c2VMZWF2ZX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnNjYWxlR3JhZGllbnR9PlxuICAgICAgICB7ZGlzcGxheSAmJiAoc2NhbGVIb3Zlci5pc1Nob3duIHx8IGhvdmVyVmFsdWUgIT09IHVuZGVmaW5lZCkgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZm9sbG93ZXJDb250YWluZXJ9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5mb2xsb3dlcn0gc3R5bGU9e3sgbGVmdDogYCR7cGVyY2VudH0lYCB9fSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7ZGlzcGxheSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZm9sbG93ZXJDb250YWluZXJ9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubGVnZW5kVmFsdWVzfT5cbiAgICAgICAgICAgIDxzcGFuPntkaXNwbGF5KG1pbil9PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4+e2Rpc3BsYXkobWF4KX08L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3BlcmNlbnQgIT0gbnVsbCAmJiAoc2NhbGVIb3Zlci5pc1Nob3duIHx8IGhvdmVyVmFsdWUgIT09IHVuZGVmaW5lZCkgJiYgKFxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMuaG92ZXJWYWx1ZX0gc3R5bGU9e3sgbGVmdDogYCR7cGVyY2VudH0lYCB9fT5cbiAgICAgICAgICAgICAge2Rpc3BsYXkoaG92ZXJWYWx1ZSA/PyBzY2FsZUhvdmVyLnZhbHVlKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5jb25zdCBnZXRHcmFkaWVudFN0b3BzID0gKHtcbiAgY29sb3JBcnJheSxcbiAgc3RvcHMsXG4gIHVzZVN0b3BzUGVyY2VudGFnZSA9IHRydWUsXG59OiB7XG4gIGNvbG9yQXJyYXk6IHN0cmluZ1tdO1xuICBzdG9wczogbnVtYmVyO1xuICB1c2VTdG9wc1BlcmNlbnRhZ2U/OiBib29sZWFuO1xufSk6IHN0cmluZ1tdID0+IHtcbiAgY29uc3QgY29sb3JDb3VudCA9IGNvbG9yQXJyYXkubGVuZ3RoO1xuICBpZiAodXNlU3RvcHNQZXJjZW50YWdlICYmIGNvbG9yQ291bnQgPD0gMjApIHtcbiAgICBjb25zdCBpbmNyID0gKDEgLyBjb2xvckNvdW50KSAqIDEwMDtcbiAgICBsZXQgcGVyID0gMDtcbiAgICBjb25zdCBzdG9wczogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGNvbG9yIG9mIGNvbG9yQXJyYXkpIHtcbiAgICAgIGlmIChwZXIgPiAwKSB7XG4gICAgICAgIHN0b3BzLnB1c2goYCR7Y29sb3J9ICR7cGVyfSVgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3BzLnB1c2goY29sb3IpO1xuICAgICAgfVxuICAgICAgcGVyICs9IGluY3I7XG4gICAgICBzdG9wcy5wdXNoKGAke2NvbG9yfSAke3Blcn0lYCk7XG4gICAgfVxuICAgIHJldHVybiBzdG9wcztcbiAgfVxuXG4gIGNvbnN0IGdyYWRpZW50RW5kID0gY29sb3JBcnJheVtjb2xvckNvdW50IC0gMV07XG4gIGNvbnN0IHNraXAgPSBNYXRoLmNlaWwoY29sb3JDb3VudCAvIHN0b3BzKTtcbiAgY29uc3QgZ3JhZGllbnRTdG9wcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3JDb3VudDsgaSArPSBza2lwKSB7XG4gICAgZ3JhZGllbnRTdG9wcy5hZGQoY29sb3JBcnJheVtpXSk7XG4gIH1cblxuICBncmFkaWVudFN0b3BzLmFkZChncmFkaWVudEVuZCk7XG5cbiAgcmV0dXJuIFsuLi5ncmFkaWVudFN0b3BzXTtcbn07XG5cbmZ1bmN0aW9uIGNsYW1wUGVyY2VudDEwMCh2OiBudW1iZXIpIHtcbiAgaWYgKHYgPiAxKSB7XG4gICAgcmV0dXJuIDEwMDtcbiAgfVxuICBpZiAodiA8IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gdiAqIDEwMDtcbn1cblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyLCBjb2xvcnM6IHN0cmluZ1tdKSA9PiAoe1xuICBzY2FsZVdyYXBwZXI6IGNzc2BcbiAgICB3aWR0aDogMTAwJTtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgb3BhY2l0eTogMTtcbiAgYCxcbiAgc2NhbGVHcmFkaWVudDogY3NzYFxuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgJHtjb2xvcnMuam9pbigpfSk7XG4gICAgaGVpZ2h0OiAxMHB4O1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBgLFxuICBsZWdlbmRWYWx1ZXM6IGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgYCxcbiAgaG92ZXJWYWx1ZTogY3NzYFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBtYXJnaW4tdG9wOiAtMTRweDtcbiAgICBwYWRkaW5nOiAzcHggMTVweDtcbiAgICBiYWNrZ3JvdW5kOiAke3RoZW1lLmNvbG9ycy5iYWNrZ3JvdW5kLnByaW1hcnl9O1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgYCxcbiAgZm9sbG93ZXJDb250YWluZXI6IGNzc2BcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgYCxcbiAgZm9sbG93ZXI6IGNzc2BcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgaGVpZ2h0OiAxNHB4O1xuICAgIHdpZHRoOiAxNHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgtNTAlKTtcbiAgICBib3JkZXI6IDJweCBzb2xpZCAke3RoZW1lLmNvbG9ycy50ZXh0LnByaW1hcnl9O1xuICAgIG1hcmdpbi10b3A6IDVweDtcbiAgYCxcbn0pO1xuIl0sIm5hbWVzIjpbInN0b3BzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/core/components/ColorScale/ColorScale.tsx\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/HeatmapHoverView.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HeatmapHoverView: () => (/* binding */ HeatmapHoverView)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/valueFormats/valueFormats.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldOverrides.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrameTypes.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldState.ts\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Layout/Layout.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var app_features_dashboard_services_DashboardSrv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/features/dashboard/services/DashboardSrv.ts\");\n/* harmony import */ var app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/transformers/calculateHeatmap/heatmap.ts\");\n/* harmony import */ var app_features_visualization_data_hover_DataHoverView__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/visualization/data-hover/DataHoverView.tsx\");\n\n\n\n\n\n\n\n\nconst HeatmapHoverView = (props) => {\n  if (props.hover.seriesIdx === 2) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_features_visualization_data_hover_DataHoverView__WEBPACK_IMPORTED_MODULE_3__.DataHoverView, { data: props.data.exemplars, rowIndex: props.hover.dataIdx, header: \"Exemplar\" });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(HeatmapHoverCell, { ...props });\n};\nconst HeatmapHoverCell = ({ data, hover, showHistogram, scopedVars, replaceVars }) => {\n  const index = hover.dataIdx;\n  const xField = data.heatmap?.fields[0];\n  const yField = data.heatmap?.fields[1];\n  const countField = data.heatmap?.fields[2];\n  const xDisp = (v) => {\n    if (xField?.display) {\n      return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_4__.formattedValueToString)(xField.display(v));\n    }\n    if (xField?.type === _grafana_data__WEBPACK_IMPORTED_MODULE_5__.FieldType.time) {\n      const tooltipTimeFormat = \"YYYY-MM-DD HH:mm:ss\";\n      const dashboard = (0,app_features_dashboard_services_DashboardSrv__WEBPACK_IMPORTED_MODULE_1__.getDashboardSrv)().getCurrent();\n      return dashboard?.formatDate(v, tooltipTimeFormat);\n    }\n    return `${v}`;\n  };\n  const xVals = xField?.values;\n  const yVals = yField?.values;\n  const countVals = countField?.values;\n  const meta = (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_2__.readHeatmapRowsCustomMeta)(data.heatmap);\n  const yDisp = yField?.display ? (v) => (0,_grafana_data__WEBPACK_IMPORTED_MODULE_4__.formattedValueToString)(yField.display(v)) : (v) => `${v}`;\n  const yValueIdx = index % data.yBucketCount;\n  let yBucketMin;\n  let yBucketMax;\n  let nonNumericOrdinalDisplay = void 0;\n  if (meta.yOrdinalDisplay) {\n    const yMinIdx = data.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le ? yValueIdx - 1 : yValueIdx;\n    const yMaxIdx = data.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le ? yValueIdx : yValueIdx + 1;\n    yBucketMin = yMinIdx < 0 ? meta.yMinDisplay : `${meta.yOrdinalDisplay[yMinIdx]}`;\n    yBucketMax = `${meta.yOrdinalDisplay[yMaxIdx]}`;\n    if (!meta.yOrdinalLabel || Number.isNaN(+meta.yOrdinalLabel[0])) {\n      nonNumericOrdinalDisplay = data.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le ? yBucketMax : yBucketMin;\n    }\n  } else {\n    const value = yVals?.[yValueIdx];\n    if (data.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le) {\n      yBucketMax = `${value}`;\n      if (data.yLog) {\n        let logFn = data.yLog === 2 ? Math.log2 : Math.log10;\n        let exp = logFn(value) - 1 / data.yLogSplit;\n        yBucketMin = `${data.yLog ** exp}`;\n      } else {\n        yBucketMin = `${value - data.yBucketSize}`;\n      }\n    } else {\n      yBucketMin = `${value}`;\n      if (data.yLog) {\n        let logFn = data.yLog === 2 ? Math.log2 : Math.log10;\n        let exp = logFn(value) + 1 / data.yLogSplit;\n        yBucketMax = `${data.yLog ** exp}`;\n      } else {\n        yBucketMax = `${value + data.yBucketSize}`;\n      }\n    }\n  }\n  let xBucketMin;\n  let xBucketMax;\n  if (data.xLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le) {\n    xBucketMax = xVals?.[index];\n    xBucketMin = xBucketMax - data.xBucketSize;\n  } else {\n    xBucketMin = xVals?.[index];\n    xBucketMax = xBucketMin + data.xBucketSize;\n  }\n  const count = countVals?.[index];\n  const visibleFields = data.heatmap?.fields.filter((f) => !Boolean(f.config.custom?.hideFrom?.tooltip));\n  const links = [];\n  const linkLookup = /* @__PURE__ */ new Set();\n  for (const field of visibleFields ?? []) {\n    const hasLinks = field.config.links && field.config.links.length > 0;\n    if (hasLinks && data.heatmap) {\n      const appropriateScopedVars = scopedVars.find(\n        (scopedVar) => scopedVar && scopedVar.__dataContext && scopedVar.__dataContext.value.field.name === nonNumericOrdinalDisplay\n      );\n      field.getLinks = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.getLinksSupplier)(data.heatmap, field, appropriateScopedVars || {}, replaceVars);\n    }\n    if (field.getLinks) {\n      const value = field.values[index];\n      const display = field.display ? field.display(value) : { text: `${value}`, numeric: +value };\n      field.getLinks({ calculatedValue: display, valueRowIndex: index }).forEach((link) => {\n        const key = `${link.title}/${link.href}`;\n        if (!linkLookup.has(key)) {\n          links.push(link);\n          linkLookup.add(key);\n        }\n      });\n    }\n  }\n  let can = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  let histCssWidth = 150;\n  let histCssHeight = 50;\n  let histCanWidth = Math.round(histCssWidth * devicePixelRatio);\n  let histCanHeight = Math.round(histCssHeight * devicePixelRatio);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(\n    () => {\n      if (showHistogram) {\n        let histCtx = can.current?.getContext(\"2d\");\n        if (histCtx && xVals && yVals && countVals) {\n          let fromIdx = index;\n          while (xVals[fromIdx--] === xVals[index]) {\n          }\n          fromIdx++;\n          let toIdx = fromIdx + data.yBucketCount;\n          let maxCount = 0;\n          let i = fromIdx;\n          while (i < toIdx) {\n            let c = countVals[i];\n            maxCount = Math.max(maxCount, c);\n            i++;\n          }\n          let pHov = new Path2D();\n          let pRest = new Path2D();\n          i = fromIdx;\n          let j = 0;\n          while (i < toIdx) {\n            let c = countVals[i];\n            if (c > 0) {\n              let pctY = c / maxCount;\n              let pctX = j / (data.yBucketCount + 1);\n              let p = i === index ? pHov : pRest;\n              p.rect(\n                Math.round(histCanWidth * pctX),\n                Math.round(histCanHeight * (1 - pctY)),\n                Math.round(histCanWidth / data.yBucketCount),\n                Math.round(histCanHeight * pctY)\n              );\n            }\n            i++;\n            j++;\n          }\n          histCtx.clearRect(0, 0, histCanWidth, histCanHeight);\n          histCtx.fillStyle = \"#ffffff80\";\n          histCtx.fill(pRest);\n          histCtx.fillStyle = \"#ff000080\";\n          histCtx.fill(pHov);\n        }\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [index]\n  );\n  const [isSparse] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    () => data.heatmap?.meta?.type === _grafana_data__WEBPACK_IMPORTED_MODULE_8__.DataFrameType.HeatmapCells && !(0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_2__.isHeatmapCellsDense)(data.heatmap)\n  );\n  if (isSparse) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_features_visualization_data_hover_DataHoverView__WEBPACK_IMPORTED_MODULE_3__.DataHoverView, { data: data.heatmap, rowIndex: index }));\n  }\n  const renderYBucket = () => {\n    if (nonNumericOrdinalDisplay) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, \"Name: \", nonNumericOrdinalDisplay);\n    }\n    switch (data.yLayout) {\n      case _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.unknown:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, yDisp(yBucketMin));\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, \"Bucket: \", yDisp(yBucketMin), \" - \", yDisp(yBucketMax));\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, xDisp(xBucketMin)), data.xLayout !== _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.unknown && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, xDisp(xBucketMax))), showHistogram && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"canvas\",\n    {\n      width: histCanWidth,\n      height: histCanHeight,\n      ref: can,\n      style: { width: histCanWidth + \"px\", height: histCanHeight + \"px\" }\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, renderYBucket(), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.getFieldDisplayName)(countField, data.heatmap), \": \", data.display(count))), links.length > 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.VerticalGroup, null, links.map((link, i) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.LinkButton,\n    {\n      key: i,\n      icon: \"external-link-alt\",\n      target: link.target,\n      href: link.href,\n      onClick: link.onClick,\n      fill: \"text\",\n      style: { width: \"100%\" }\n    },\n    link.title\n  ))));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC9IZWF0bWFwSG92ZXJWaWV3LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUQ7QUFhNUM7QUFDMkI7QUFDUTtBQUNWO0FBQytCO0FBQ2pDO0FBY3ZCLE1BQU0sbUJBQW1CLENBQUMsVUFBaUI7QUFDaEQsTUFBSSxNQUFNLE1BQU0sY0FBYyxHQUFHO0FBQy9CLFdBQU8sMkVBQUMsOEZBQWEsSUFBQyxNQUFNLE1BQU0sS0FBSyxXQUFXLFVBQVUsTUFBTSxNQUFNLFNBQVMsUUFBUSxZQUFZO0FBQUEsRUFDdkc7QUFDQSxTQUFPLDJFQUFDLG9CQUFrQixHQUFHLE9BQU87QUFDdEM7QUFFQSxNQUFNLG1CQUFtQixDQUFDLEVBQUUsTUFBTSxPQUFPLGVBQWUsWUFBWSxZQUFZLE1BQWE7QUFDM0YsUUFBTSxRQUFRLE1BQU07QUFDcEIsUUFBTSxTQUFTLEtBQUssU0FBUyxPQUFPLENBQUM7QUFDckMsUUFBTSxTQUFTLEtBQUssU0FBUyxPQUFPLENBQUM7QUFDckMsUUFBTSxhQUFhLEtBQUssU0FBUyxPQUFPLENBQUM7QUFFekMsUUFBTSxRQUFRLENBQUMsTUFBYztBQUMzQixRQUFJLFFBQVEsU0FBUztBQUNuQixhQUFPLHFFQUFzQixDQUFDLE9BQU8sUUFBUSxDQUFDLENBQUM7QUFBQSxJQUNqRDtBQUNBLFFBQUksUUFBUSxTQUFTLG9EQUFTLENBQUMsTUFBTTtBQUNuQyxZQUFNLG9CQUFvQjtBQUMxQixZQUFNLFlBQVksNkZBQWUsQ0FBQyxFQUFFLFdBQVc7QUFDL0MsYUFBTyxXQUFXLFdBQVcsR0FBRyxpQkFBaUI7QUFBQSxJQUNuRDtBQUNBLFdBQU8sR0FBRztBQUFBLEVBQ1o7QUFFQSxRQUFNLFFBQVEsUUFBUTtBQUN0QixRQUFNLFFBQVEsUUFBUTtBQUN0QixRQUFNLFlBQVksWUFBWTtBQUc5QixRQUFNLE9BQU8sNkdBQXlCLENBQUMsS0FBSyxPQUFPO0FBQ25ELFFBQU0sUUFBUSxR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QWlCLENBQUMsV0FBVywyRUFBQyxhQUFLLE1BQU0sVUFBVSxDQUFFLENBQ3pFLEdBQ0MsaUJBQ0M7QUFBQSxJQUFDO0FBQUE7QUFBQSxNQUNDLE9BQU87QUFBQSxNQUNQLFFBQVE7QUFBQSxNQUNSLEtBQUs7QUFBQSxNQUNMLE9BQU8sRUFBRSxPQUFPLGVBQWUsTUFBTSxRQUFRLGdCQUFnQixLQUFLO0FBQUE7QUFBQSxFQUNwRSxHQUVGLDJFQUFDLGFBQ0UsY0FBYyxHQUNmLDJFQUFDLGFBQ0Usa0VBQW1CLENBQUMsWUFBYSxLQUFLLE9BQU8sR0FBRSxNQUFHLEtBQUssUUFBUyxLQUFLLENBQ3hFLENBQ0YsR0FDQyxNQUFNLFNBQVMsS0FDZCwyRUFBQyx1REFBYSxRQUNYLE1BQU0sSUFBSSxDQUFDLE1BQU0sTUFDaEI7QUFBQSxJQUFDLG9EQUFVO0FBQVY7QUFBQSxNQUNDLEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLFFBQVEsS0FBSztBQUFBLE1BQ2IsTUFBTSxLQUFLO0FBQUEsTUFDWCxTQUFTLEtBQUs7QUFBQSxNQUNkLE1BQUs7QUFBQSxNQUNMLE9BQU8sRUFBRSxPQUFPLE9BQU87QUFBQTtBQUFBLElBRXRCLEtBQUs7QUFBQSxFQUNSLENBQ0QsQ0FDSCxDQUVKO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL2hlYXRtYXAvSGVhdG1hcEhvdmVyVmlldy50c3g/ZWZkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICBEYXRhRnJhbWVUeXBlLFxuICBGaWVsZCxcbiAgRmllbGRUeXBlLFxuICBmb3JtYXR0ZWRWYWx1ZVRvU3RyaW5nLFxuICBnZXRGaWVsZERpc3BsYXlOYW1lLFxuICBMaW5rTW9kZWwsXG4gIFRpbWVSYW5nZSxcbiAgZ2V0TGlua3NTdXBwbGllcixcbiAgSW50ZXJwb2xhdGVGdW5jdGlvbixcbiAgU2NvcGVkVmFycyxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBIZWF0bWFwQ2VsbExheW91dCB9IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5pbXBvcnQgeyBMaW5rQnV0dG9uLCBWZXJ0aWNhbEdyb3VwIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgZ2V0RGFzaGJvYXJkU3J2IH0gZnJvbSAnYXBwL2ZlYXR1cmVzL2Rhc2hib2FyZC9zZXJ2aWNlcy9EYXNoYm9hcmRTcnYnO1xuaW1wb3J0IHsgaXNIZWF0bWFwQ2VsbHNEZW5zZSwgcmVhZEhlYXRtYXBSb3dzQ3VzdG9tTWV0YSB9IGZyb20gJ2FwcC9mZWF0dXJlcy90cmFuc2Zvcm1lcnMvY2FsY3VsYXRlSGVhdG1hcC9oZWF0bWFwJztcbmltcG9ydCB7IERhdGFIb3ZlclZpZXcgfSBmcm9tICdhcHAvZmVhdHVyZXMvdmlzdWFsaXphdGlvbi9kYXRhLWhvdmVyL0RhdGFIb3ZlclZpZXcnO1xuXG5pbXBvcnQgeyBIZWF0bWFwRGF0YSB9IGZyb20gJy4vZmllbGRzJztcbmltcG9ydCB7IEhlYXRtYXBIb3ZlckV2ZW50IH0gZnJvbSAnLi91dGlscyc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGRhdGE6IEhlYXRtYXBEYXRhO1xuICBob3ZlcjogSGVhdG1hcEhvdmVyRXZlbnQ7XG4gIHNob3dIaXN0b2dyYW0/OiBib29sZWFuO1xuICB0aW1lUmFuZ2U6IFRpbWVSYW5nZTtcbiAgcmVwbGFjZVZhcnM6IEludGVycG9sYXRlRnVuY3Rpb247XG4gIHNjb3BlZFZhcnM6IFNjb3BlZFZhcnNbXTtcbn07XG5cbmV4cG9ydCBjb25zdCBIZWF0bWFwSG92ZXJWaWV3ID0gKHByb3BzOiBQcm9wcykgPT4ge1xuICBpZiAocHJvcHMuaG92ZXIuc2VyaWVzSWR4ID09PSAyKSB7XG4gICAgcmV0dXJuIDxEYXRhSG92ZXJWaWV3IGRhdGE9e3Byb3BzLmRhdGEuZXhlbXBsYXJzfSByb3dJbmRleD17cHJvcHMuaG92ZXIuZGF0YUlkeH0gaGVhZGVyPXsnRXhlbXBsYXInfSAvPjtcbiAgfVxuICByZXR1cm4gPEhlYXRtYXBIb3ZlckNlbGwgey4uLnByb3BzfSAvPjtcbn07XG5cbmNvbnN0IEhlYXRtYXBIb3ZlckNlbGwgPSAoeyBkYXRhLCBob3Zlciwgc2hvd0hpc3RvZ3JhbSwgc2NvcGVkVmFycywgcmVwbGFjZVZhcnMgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgaW5kZXggPSBob3Zlci5kYXRhSWR4O1xuICBjb25zdCB4RmllbGQgPSBkYXRhLmhlYXRtYXA/LmZpZWxkc1swXTtcbiAgY29uc3QgeUZpZWxkID0gZGF0YS5oZWF0bWFwPy5maWVsZHNbMV07XG4gIGNvbnN0IGNvdW50RmllbGQgPSBkYXRhLmhlYXRtYXA/LmZpZWxkc1syXTtcblxuICBjb25zdCB4RGlzcCA9ICh2OiBudW1iZXIpID0+IHtcbiAgICBpZiAoeEZpZWxkPy5kaXNwbGF5KSB7XG4gICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWVUb1N0cmluZyh4RmllbGQuZGlzcGxheSh2KSk7XG4gICAgfVxuICAgIGlmICh4RmllbGQ/LnR5cGUgPT09IEZpZWxkVHlwZS50aW1lKSB7XG4gICAgICBjb25zdCB0b29sdGlwVGltZUZvcm1hdCA9ICdZWVlZLU1NLUREIEhIOm1tOnNzJztcbiAgICAgIGNvbnN0IGRhc2hib2FyZCA9IGdldERhc2hib2FyZFNydigpLmdldEN1cnJlbnQoKTtcbiAgICAgIHJldHVybiBkYXNoYm9hcmQ/LmZvcm1hdERhdGUodiwgdG9vbHRpcFRpbWVGb3JtYXQpO1xuICAgIH1cbiAgICByZXR1cm4gYCR7dn1gO1xuICB9O1xuXG4gIGNvbnN0IHhWYWxzID0geEZpZWxkPy52YWx1ZXM7XG4gIGNvbnN0IHlWYWxzID0geUZpZWxkPy52YWx1ZXM7XG4gIGNvbnN0IGNvdW50VmFscyA9IGNvdW50RmllbGQ/LnZhbHVlcztcblxuICAvLyBsYWJlbGVkIGJ1Y2tldHNcbiAgY29uc3QgbWV0YSA9IHJlYWRIZWF0bWFwUm93c0N1c3RvbU1ldGEoZGF0YS5oZWF0bWFwKTtcbiAgY29uc3QgeURpc3AgPSB5RmllbGQ/LmRpc3BsYXkgPyAodjogc3RyaW5nKSA9PiBmb3JtYXR0ZWRWYWx1ZVRvU3RyaW5nKHlGaWVsZC5kaXNwbGF5ISh2KSkgOiAodjogc3RyaW5nKSA9PiBgJHt2fWA7XG5cbiAgY29uc3QgeVZhbHVlSWR4ID0gaW5kZXggJSBkYXRhLnlCdWNrZXRDb3VudCEgPz8gMDtcblxuICBsZXQgeUJ1Y2tldE1pbjogc3RyaW5nO1xuICBsZXQgeUJ1Y2tldE1heDogc3RyaW5nO1xuXG4gIGxldCBub25OdW1lcmljT3JkaW5hbERpc3BsYXk6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICBpZiAobWV0YS55T3JkaW5hbERpc3BsYXkpIHtcbiAgICBjb25zdCB5TWluSWR4ID0gZGF0YS55TGF5b3V0ID09PSBIZWF0bWFwQ2VsbExheW91dC5sZSA/IHlWYWx1ZUlkeCAtIDEgOiB5VmFsdWVJZHg7XG4gICAgY29uc3QgeU1heElkeCA9IGRhdGEueUxheW91dCA9PT0gSGVhdG1hcENlbGxMYXlvdXQubGUgPyB5VmFsdWVJZHggOiB5VmFsdWVJZHggKyAxO1xuICAgIHlCdWNrZXRNaW4gPSB5TWluSWR4IDwgMCA/IG1ldGEueU1pbkRpc3BsYXkhIDogYCR7bWV0YS55T3JkaW5hbERpc3BsYXlbeU1pbklkeF19YDtcbiAgICB5QnVja2V0TWF4ID0gYCR7bWV0YS55T3JkaW5hbERpc3BsYXlbeU1heElkeF19YDtcblxuICAgIC8vIGUuZy4gXCJwb2QteHl6MTIzXCJcbiAgICBpZiAoIW1ldGEueU9yZGluYWxMYWJlbCB8fCBOdW1iZXIuaXNOYU4oK21ldGEueU9yZGluYWxMYWJlbFswXSkpIHtcbiAgICAgIG5vbk51bWVyaWNPcmRpbmFsRGlzcGxheSA9IGRhdGEueUxheW91dCA9PT0gSGVhdG1hcENlbGxMYXlvdXQubGUgPyB5QnVja2V0TWF4IDogeUJ1Y2tldE1pbjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdmFsdWUgPSB5VmFscz8uW3lWYWx1ZUlkeF07XG5cbiAgICBpZiAoZGF0YS55TGF5b3V0ID09PSBIZWF0bWFwQ2VsbExheW91dC5sZSkge1xuICAgICAgeUJ1Y2tldE1heCA9IGAke3ZhbHVlfWA7XG5cbiAgICAgIGlmIChkYXRhLnlMb2cpIHtcbiAgICAgICAgbGV0IGxvZ0ZuID0gZGF0YS55TG9nID09PSAyID8gTWF0aC5sb2cyIDogTWF0aC5sb2cxMDtcbiAgICAgICAgbGV0IGV4cCA9IGxvZ0ZuKHZhbHVlKSAtIDEgLyBkYXRhLnlMb2dTcGxpdCE7XG4gICAgICAgIHlCdWNrZXRNaW4gPSBgJHtkYXRhLnlMb2cgKiogZXhwfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5QnVja2V0TWluID0gYCR7dmFsdWUgLSBkYXRhLnlCdWNrZXRTaXplIX1gO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB5QnVja2V0TWluID0gYCR7dmFsdWV9YDtcblxuICAgICAgaWYgKGRhdGEueUxvZykge1xuICAgICAgICBsZXQgbG9nRm4gPSBkYXRhLnlMb2cgPT09IDIgPyBNYXRoLmxvZzIgOiBNYXRoLmxvZzEwO1xuICAgICAgICBsZXQgZXhwID0gbG9nRm4odmFsdWUpICsgMSAvIGRhdGEueUxvZ1NwbGl0ITtcbiAgICAgICAgeUJ1Y2tldE1heCA9IGAke2RhdGEueUxvZyAqKiBleHB9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHlCdWNrZXRNYXggPSBgJHt2YWx1ZSArIGRhdGEueUJ1Y2tldFNpemUhfWA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbGV0IHhCdWNrZXRNaW46IG51bWJlcjtcbiAgbGV0IHhCdWNrZXRNYXg6IG51bWJlcjtcblxuICBpZiAoZGF0YS54TGF5b3V0ID09PSBIZWF0bWFwQ2VsbExheW91dC5sZSkge1xuICAgIHhCdWNrZXRNYXggPSB4VmFscz8uW2luZGV4XTtcbiAgICB4QnVja2V0TWluID0geEJ1Y2tldE1heCAtIGRhdGEueEJ1Y2tldFNpemUhO1xuICB9IGVsc2Uge1xuICAgIHhCdWNrZXRNaW4gPSB4VmFscz8uW2luZGV4XTtcbiAgICB4QnVja2V0TWF4ID0geEJ1Y2tldE1pbiArIGRhdGEueEJ1Y2tldFNpemUhO1xuICB9XG5cbiAgY29uc3QgY291bnQgPSBjb3VudFZhbHM/LltpbmRleF07XG5cbiAgY29uc3QgdmlzaWJsZUZpZWxkcyA9IGRhdGEuaGVhdG1hcD8uZmllbGRzLmZpbHRlcigoZikgPT4gIUJvb2xlYW4oZi5jb25maWcuY3VzdG9tPy5oaWRlRnJvbT8udG9vbHRpcCkpO1xuICBjb25zdCBsaW5rczogQXJyYXk8TGlua01vZGVsPEZpZWxkPj4gPSBbXTtcbiAgY29uc3QgbGlua0xvb2t1cCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZvciAoY29uc3QgZmllbGQgb2YgdmlzaWJsZUZpZWxkcyA/PyBbXSkge1xuICAgIGNvbnN0IGhhc0xpbmtzID0gZmllbGQuY29uZmlnLmxpbmtzICYmIGZpZWxkLmNvbmZpZy5saW5rcy5sZW5ndGggPiAwO1xuXG4gICAgaWYgKGhhc0xpbmtzICYmIGRhdGEuaGVhdG1hcCkge1xuICAgICAgY29uc3QgYXBwcm9wcmlhdGVTY29wZWRWYXJzID0gc2NvcGVkVmFycy5maW5kKFxuICAgICAgICAoc2NvcGVkVmFyKSA9PlxuICAgICAgICAgIHNjb3BlZFZhciAmJiBzY29wZWRWYXIuX19kYXRhQ29udGV4dCAmJiBzY29wZWRWYXIuX19kYXRhQ29udGV4dC52YWx1ZS5maWVsZC5uYW1lID09PSBub25OdW1lcmljT3JkaW5hbERpc3BsYXlcbiAgICAgICk7XG5cbiAgICAgIGZpZWxkLmdldExpbmtzID0gZ2V0TGlua3NTdXBwbGllcihkYXRhLmhlYXRtYXAsIGZpZWxkLCBhcHByb3ByaWF0ZVNjb3BlZFZhcnMgfHwge30sIHJlcGxhY2VWYXJzKTtcbiAgICB9XG5cbiAgICBpZiAoZmllbGQuZ2V0TGlua3MpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQudmFsdWVzW2luZGV4XTtcbiAgICAgIGNvbnN0IGRpc3BsYXkgPSBmaWVsZC5kaXNwbGF5ID8gZmllbGQuZGlzcGxheSh2YWx1ZSkgOiB7IHRleHQ6IGAke3ZhbHVlfWAsIG51bWVyaWM6ICt2YWx1ZSB9O1xuXG4gICAgICBmaWVsZC5nZXRMaW5rcyh7IGNhbGN1bGF0ZWRWYWx1ZTogZGlzcGxheSwgdmFsdWVSb3dJbmRleDogaW5kZXggfSkuZm9yRWFjaCgobGluaykgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBgJHtsaW5rLnRpdGxlfS8ke2xpbmsuaHJlZn1gO1xuICAgICAgICBpZiAoIWxpbmtMb29rdXAuaGFzKGtleSkpIHtcbiAgICAgICAgICBsaW5rcy5wdXNoKGxpbmspO1xuICAgICAgICAgIGxpbmtMb29rdXAuYWRkKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGxldCBjYW4gPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpO1xuXG4gIGxldCBoaXN0Q3NzV2lkdGggPSAxNTA7XG4gIGxldCBoaXN0Q3NzSGVpZ2h0ID0gNTA7XG4gIGxldCBoaXN0Q2FuV2lkdGggPSBNYXRoLnJvdW5kKGhpc3RDc3NXaWR0aCAqIGRldmljZVBpeGVsUmF0aW8pO1xuICBsZXQgaGlzdENhbkhlaWdodCA9IE1hdGgucm91bmQoaGlzdENzc0hlaWdodCAqIGRldmljZVBpeGVsUmF0aW8pO1xuXG4gIHVzZUVmZmVjdChcbiAgICAoKSA9PiB7XG4gICAgICBpZiAoc2hvd0hpc3RvZ3JhbSkge1xuICAgICAgICBsZXQgaGlzdEN0eCA9IGNhbi5jdXJyZW50Py5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIGlmIChoaXN0Q3R4ICYmIHhWYWxzICYmIHlWYWxzICYmIGNvdW50VmFscykge1xuICAgICAgICAgIGxldCBmcm9tSWR4ID0gaW5kZXg7XG5cbiAgICAgICAgICB3aGlsZSAoeFZhbHNbZnJvbUlkeC0tXSA9PT0geFZhbHNbaW5kZXhdKSB7fVxuXG4gICAgICAgICAgZnJvbUlkeCsrO1xuXG4gICAgICAgICAgbGV0IHRvSWR4ID0gZnJvbUlkeCArIGRhdGEueUJ1Y2tldENvdW50ITtcblxuICAgICAgICAgIGxldCBtYXhDb3VudCA9IDA7XG5cbiAgICAgICAgICBsZXQgaSA9IGZyb21JZHg7XG4gICAgICAgICAgd2hpbGUgKGkgPCB0b0lkeCkge1xuICAgICAgICAgICAgbGV0IGMgPSBjb3VudFZhbHNbaV07XG4gICAgICAgICAgICBtYXhDb3VudCA9IE1hdGgubWF4KG1heENvdW50LCBjKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgcEhvdiA9IG5ldyBQYXRoMkQoKTtcbiAgICAgICAgICBsZXQgcFJlc3QgPSBuZXcgUGF0aDJEKCk7XG5cbiAgICAgICAgICBpID0gZnJvbUlkeDtcbiAgICAgICAgICBsZXQgaiA9IDA7XG4gICAgICAgICAgd2hpbGUgKGkgPCB0b0lkeCkge1xuICAgICAgICAgICAgbGV0IGMgPSBjb3VudFZhbHNbaV07XG5cbiAgICAgICAgICAgIGlmIChjID4gMCkge1xuICAgICAgICAgICAgICBsZXQgcGN0WSA9IGMgLyBtYXhDb3VudDtcbiAgICAgICAgICAgICAgbGV0IHBjdFggPSBqIC8gKGRhdGEueUJ1Y2tldENvdW50ISArIDEpO1xuXG4gICAgICAgICAgICAgIGxldCBwID0gaSA9PT0gaW5kZXggPyBwSG92IDogcFJlc3Q7XG5cbiAgICAgICAgICAgICAgcC5yZWN0KFxuICAgICAgICAgICAgICAgIE1hdGgucm91bmQoaGlzdENhbldpZHRoICogcGN0WCksXG4gICAgICAgICAgICAgICAgTWF0aC5yb3VuZChoaXN0Q2FuSGVpZ2h0ICogKDEgLSBwY3RZKSksXG4gICAgICAgICAgICAgICAgTWF0aC5yb3VuZChoaXN0Q2FuV2lkdGggLyBkYXRhLnlCdWNrZXRDb3VudCEpLFxuICAgICAgICAgICAgICAgIE1hdGgucm91bmQoaGlzdENhbkhlaWdodCAqIHBjdFkpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBoaXN0Q3R4LmNsZWFyUmVjdCgwLCAwLCBoaXN0Q2FuV2lkdGgsIGhpc3RDYW5IZWlnaHQpO1xuXG4gICAgICAgICAgaGlzdEN0eC5maWxsU3R5bGUgPSAnI2ZmZmZmZjgwJztcbiAgICAgICAgICBoaXN0Q3R4LmZpbGwocFJlc3QpO1xuXG4gICAgICAgICAgaGlzdEN0eC5maWxsU3R5bGUgPSAnI2ZmMDAwMDgwJztcbiAgICAgICAgICBoaXN0Q3R4LmZpbGwocEhvdik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBbaW5kZXhdXG4gICk7XG5cbiAgY29uc3QgW2lzU3BhcnNlXSA9IHVzZVN0YXRlKFxuICAgICgpID0+IGRhdGEuaGVhdG1hcD8ubWV0YT8udHlwZSA9PT0gRGF0YUZyYW1lVHlwZS5IZWF0bWFwQ2VsbHMgJiYgIWlzSGVhdG1hcENlbGxzRGVuc2UoZGF0YS5oZWF0bWFwKVxuICApO1xuXG4gIGlmIChpc1NwYXJzZSkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8RGF0YUhvdmVyVmlldyBkYXRhPXtkYXRhLmhlYXRtYXB9IHJvd0luZGV4PXtpbmRleH0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBjb25zdCByZW5kZXJZQnVja2V0ID0gKCkgPT4ge1xuICAgIGlmIChub25OdW1lcmljT3JkaW5hbERpc3BsYXkpIHtcbiAgICAgIHJldHVybiA8ZGl2Pk5hbWU6IHtub25OdW1lcmljT3JkaW5hbERpc3BsYXl9PC9kaXY+O1xuICAgIH1cblxuICAgIHN3aXRjaCAoZGF0YS55TGF5b3V0KSB7XG4gICAgICBjYXNlIEhlYXRtYXBDZWxsTGF5b3V0LnVua25vd246XG4gICAgICAgIHJldHVybiA8ZGl2Pnt5RGlzcCh5QnVja2V0TWluKX08L2Rpdj47XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICBCdWNrZXQ6IHt5RGlzcCh5QnVja2V0TWluKX0gLSB7eURpc3AoeUJ1Y2tldE1heCl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxkaXY+e3hEaXNwKHhCdWNrZXRNaW4pfTwvZGl2PlxuICAgICAgICB7ZGF0YS54TGF5b3V0ICE9PSBIZWF0bWFwQ2VsbExheW91dC51bmtub3duICYmIDxkaXY+e3hEaXNwKHhCdWNrZXRNYXgpfTwvZGl2Pn1cbiAgICAgIDwvZGl2PlxuICAgICAge3Nob3dIaXN0b2dyYW0gJiYgKFxuICAgICAgICA8Y2FudmFzXG4gICAgICAgICAgd2lkdGg9e2hpc3RDYW5XaWR0aH1cbiAgICAgICAgICBoZWlnaHQ9e2hpc3RDYW5IZWlnaHR9XG4gICAgICAgICAgcmVmPXtjYW59XG4gICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGhpc3RDYW5XaWR0aCArICdweCcsIGhlaWdodDogaGlzdENhbkhlaWdodCArICdweCcgfX1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICA8ZGl2PlxuICAgICAgICB7cmVuZGVyWUJ1Y2tldCgpfVxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHtnZXRGaWVsZERpc3BsYXlOYW1lKGNvdW50RmllbGQhLCBkYXRhLmhlYXRtYXApfToge2RhdGEuZGlzcGxheSEoY291bnQpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAge2xpbmtzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8VmVydGljYWxHcm91cD5cbiAgICAgICAgICB7bGlua3MubWFwKChsaW5rLCBpKSA9PiAoXG4gICAgICAgICAgICA8TGlua0J1dHRvblxuICAgICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICAgIGljb249eydleHRlcm5hbC1saW5rLWFsdCd9XG4gICAgICAgICAgICAgIHRhcmdldD17bGluay50YXJnZXR9XG4gICAgICAgICAgICAgIGhyZWY9e2xpbmsuaHJlZn1cbiAgICAgICAgICAgICAgb25DbGljaz17bGluay5vbkNsaWNrfVxuICAgICAgICAgICAgICBmaWxsPVwidGV4dFwiXG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2xpbmsudGl0bGV9XG4gICAgICAgICAgICA8L0xpbmtCdXR0b24+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvVmVydGljYWxHcm91cD5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/HeatmapHoverView.tsx\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/HeatmapPanel.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HeatmapPanel: () => (/* binding */ HeatmapPanel)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldOverrides.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrameTypes.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/components/PanelDataErrorView.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/PanelChrome/PanelContext.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/VizLayout/VizLayout.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/uPlot/Plot.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Portal/Portal.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/VizTooltip/VizTooltipContainer.tsx\");\n/* harmony import */ var app_core_components_ColorScale_ColorScale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/components/ColorScale/ColorScale.tsx\");\n/* harmony import */ var app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/transformers/calculateHeatmap/heatmap.ts\");\n/* harmony import */ var _ExemplarModalHeader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/ExemplarModalHeader.tsx\");\n/* harmony import */ var _HeatmapHoverView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/HeatmapHoverView.tsx\");\n/* harmony import */ var _fields__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/fields.ts\");\n/* harmony import */ var _palettes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/palettes.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/utils.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst HeatmapPanel = ({\n  data,\n  id,\n  timeRange,\n  timeZone,\n  width,\n  height,\n  options,\n  fieldConfig,\n  eventBus,\n  onChangeTimeRange,\n  replaceVariables\n}) => {\n  const theme = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_9__.useTheme2)();\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_9__.useStyles2)(getStyles);\n  const { sync } = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.usePanelContext)();\n  let scopedVarsFromRawData = [];\n  for (const series of data.series) {\n    for (const field of series.fields) {\n      if (field.state?.scopedVars) {\n        scopedVarsFromRawData.push(field.state.scopedVars);\n      }\n    }\n  }\n  let timeRangeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(timeRange);\n  timeRangeRef.current = timeRange;\n  const getFieldLinksSupplier = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (exemplars, field) => {\n      return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_11__.getLinksSupplier)(exemplars, field, field.state?.scopedVars ?? {}, replaceVariables);\n    },\n    [replaceVariables]\n  );\n  const palette = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (0,_palettes__WEBPACK_IMPORTED_MODULE_7__.quantizeScheme)(options.color, theme), [options.color, theme]);\n  const info = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    try {\n      return (0,_fields__WEBPACK_IMPORTED_MODULE_6__.prepareHeatmapData)(data.series, data.annotations, options, palette, theme, getFieldLinksSupplier);\n    } catch (ex) {\n      return { warning: `${ex}` };\n    }\n  }, [data.series, data.annotations, options, palette, theme, getFieldLinksSupplier]);\n  const facets = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    let exemplarsXFacet = [];\n    let exemplarsyFacet = [];\n    const meta = (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_3__.readHeatmapRowsCustomMeta)(info.heatmap);\n    if (info.exemplars?.length && meta.yMatchWithLabel) {\n      exemplarsXFacet = info.exemplars?.fields[0].values;\n      const hasLabeledY = meta.yOrdinalDisplay != null;\n      if (hasLabeledY) {\n        let matchExemplarsBy = info.exemplars?.fields.find((field) => field.name === meta.yMatchWithLabel).values;\n        exemplarsyFacet = matchExemplarsBy.map((label) => meta.yOrdinalLabel?.indexOf(label));\n      } else {\n        exemplarsyFacet = info.exemplars?.fields[1].values;\n      }\n    }\n    return [null, info.heatmap?.fields.map((f) => f.values), [exemplarsXFacet, exemplarsyFacet]];\n  }, [info.heatmap, info.exemplars]);\n  const [hover, setHover] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0);\n  const [shouldDisplayCloseButton, setShouldDisplayCloseButton] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const isToolTipOpen = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n  const onCloseToolTip = () => {\n    isToolTipOpen.current = false;\n    setShouldDisplayCloseButton(false);\n    onhover(null);\n  };\n  const onclick = () => {\n    isToolTipOpen.current = !isToolTipOpen.current;\n    setShouldDisplayCloseButton(isToolTipOpen.current);\n  };\n  const onhover = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (evt) => {\n      setHover(evt ?? void 0);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [options, data.structureRev]\n  );\n  const dataRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(info);\n  dataRef.current = info;\n  const builder = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    const scaleConfig = dataRef.current?.heatmap?.fields[1].config?.custom?.scaleDistribution;\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_8__.prepConfig)({\n      dataRef,\n      theme,\n      eventBus,\n      onhover,\n      onclick: options.tooltip.show ? onclick : null,\n      onzoom: (evt) => {\n        const delta = evt.xMax - evt.xMin;\n        if (delta > 1) {\n          onChangeTimeRange({ from: evt.xMin, to: evt.xMax });\n        }\n      },\n      isToolTipOpen,\n      timeZone,\n      getTimeRange: () => timeRangeRef.current,\n      sync,\n      cellGap: options.cellGap,\n      hideLE: options.filterValues?.le,\n      hideGE: options.filterValues?.ge,\n      exemplarColor: options.exemplars?.color ?? \"rgba(255,0,255,0.7)\",\n      yAxisConfig: options.yAxis,\n      ySizeDivisor: scaleConfig?.type === _grafana_ui__WEBPACK_IMPORTED_MODULE_12__.ScaleDistribution.Log ? +(options.calculation?.yBuckets?.value || 1) : 1\n    });\n  }, [options, timeZone, data.structureRev]);\n  const renderLegend = () => {\n    if (!info.heatmap || !options.legend.show) {\n      return null;\n    }\n    let heatmapType = dataRef.current?.heatmap?.meta?.type;\n    let isSparseHeatmap = heatmapType === _grafana_data__WEBPACK_IMPORTED_MODULE_13__.DataFrameType.HeatmapCells && !(0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_3__.isHeatmapCellsDense)(dataRef.current?.heatmap);\n    let countFieldIdx = !isSparseHeatmap ? 2 : 3;\n    const countField = info.heatmap.fields[countFieldIdx];\n    let hoverValue = void 0;\n    if (hover && info.heatmap.fields && hover.seriesIdx === 1) {\n      hoverValue = countField.values[hover.dataIdx];\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.VizLayout.Legend, { placement: \"bottom\", maxHeight: \"20%\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.colorScaleWrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      app_core_components_ColorScale_ColorScale__WEBPACK_IMPORTED_MODULE_2__.ColorScale,\n      {\n        hoverValue,\n        colorPalette: palette,\n        min: dataRef.current.heatmapColors?.minValue,\n        max: dataRef.current.heatmapColors?.maxValue,\n        display: info.display\n      }\n    )));\n  };\n  if (info.warning || !info.heatmap) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_runtime__WEBPACK_IMPORTED_MODULE_15__.PanelDataErrorView,\n      {\n        panelId: id,\n        fieldConfig,\n        data,\n        needsNumberField: true,\n        message: info.warning\n      }\n    );\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.VizLayout, { width, height, legend: renderLegend() }, (vizWidth, vizHeight) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.UPlotChart, { config: builder, data: facets, width: vizWidth, height: vizHeight })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_17__.Portal, null, hover && options.tooltip.show && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_18__.VizTooltipContainer,\n    {\n      position: { x: hover.pageX, y: hover.pageY },\n      offset: { x: 10, y: 10 },\n      allowPointerEvents: isToolTipOpen.current\n    },\n    shouldDisplayCloseButton && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_ExemplarModalHeader__WEBPACK_IMPORTED_MODULE_4__.ExemplarModalHeader, { onClick: onCloseToolTip }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _HeatmapHoverView__WEBPACK_IMPORTED_MODULE_5__.HeatmapHoverView,\n      {\n        timeRange,\n        data: info,\n        hover,\n        showHistogram: options.tooltip.yHistogram,\n        replaceVars: replaceVariables,\n        scopedVars: scopedVarsFromRawData\n      }\n    )\n  )));\n};\nconst getStyles = (theme) => ({\n  colorScaleWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-left: 25px;\n    padding: 10px 0;\n    max-width: 300px;\n  `\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC9IZWF0bWFwUGFuZWwudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDMEM7QUFFMEM7QUFDckU7QUFXNUI7QUFDb0I7QUFDb0M7QUFFM0I7QUFDSDtBQUNFO0FBQ0o7QUFFZTtBQUl2QyxNQUFNLGVBQWUsQ0FBQztBQUFBLEVBQzNCO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGLE1BQXlCO0FBQ3ZCLFFBQU0sUUFBUSxzREFBUyxDQUFDO0FBQ3hCLFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFDbkMsUUFBTSxFQUFFLEtBQUssSUFBSSw2REFBZSxDQUFDO0FBR2pDLE1BQUksd0JBQXdCLENBQUM7QUFDN0IsYUFBVyxVQUFVLEtBQUssUUFBUTtBQUNoQyxlQUFXLFNBQVMsT0FBTyxRQUFRO0FBQ2pDLFVBQUksTUFBTSxPQUFPLFlBQVk7QUFDM0IsOEJBQXNCLEtBQUssTUFBTSxNQUFNLFVBQVU7QUFBQSxNQUNuRDtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBR0EsTUFBSSxlQUFlLDZDQUFNLENBQVksU0FBUztBQUM5QyxlQUFhLFVBQVU7QUFFdkIsUUFBTSx3QkFBd0Isa0RBQVc7QUFBWCxJQUM1QixDQUFDLFdBQXNCLFVBQWlCO0FBQ3RDLGFBQU8sZ0VBQWdCLENBQUMsV0FBVyxPQUFPLE1BQU0sT0FBTyxjQUFjLENBQUMsR0FBRyxnQkFBZ0I7QUFBQSxJQUMzRjtBQUFBLElBQ0EsQ0FBQyxnQkFBZ0I7QUFBQSxFQUNuQjtBQUVBLFFBQU0sVUFBVSw4Q0FBTyxDQUFDLE1BQU0seURBQWMsQ0FBQyxRQUFRLE9BQU8sS0FBSyxHQUFHLENBQUMsUUFBUSxPQUFPLEtBQUssQ0FBQztBQUUxRixRQUFNLE9BQU8sOENBQU8s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RUEsU0FDRSwwSUFDRSwyRUFBQyxtREFBUyxJQUFDLE9BQWMsUUFBZ0IsUUFBUSxhQUFhLEtBQzNELENBQUMsVUFBa0IsY0FDbEIsMkVBQUMsb0RBQVUsSUFBQyxRQUFRLFNBQVMsTUFBTSxRQUFlLE9BQU8sVUFBVSxRQUFRLFdBRTNFLENBRUosR0FDQSwyRUFBQyxnREFBTSxRQUNKLFNBQVMsUUFBUSxRQUFRLFFBQ3hCO0FBQUEsSUFBQyw2REFBbUI7QUFBbkI7QUFBQSxNQUNDLFVBQVUsRUFBRSxHQUFHLE1BQU0sT0FBTyxHQUFHLE1BQU0sTUFBTTtBQUFBLE1BQzNDLFFBQVEsRUFBRSxHQUFHLElBQUksR0FBRyxHQUFHO0FBQUEsTUFDdkIsb0JBQW9CLGNBQWM7QUFBQTtBQUFBLElBRWpDLDRCQUE0QiwyRUFBQyxxRUFBbUIsSUFBQyxTQUFTLGdCQUFnQjtBQUFBLElBQzNFO0FBQUEsTUFBQywrREFBZ0I7QUFBaEI7QUFBQSxRQUNDO0FBQUEsUUFDQSxNQUFNO0FBQUEsUUFDTjtBQUFBLFFBQ0EsZUFBZSxRQUFRLFFBQVE7QUFBQSxRQUMvQixhQUFhO0FBQUEsUUFDYixZQUFZO0FBQUE7QUFBQSxJQUNkO0FBQUEsRUFDRixDQUVKLENBQ0Y7QUFFSjtBQUVBLE1BQU0sWUFBWSxDQUFDLFdBQTBCO0FBQUEsRUFDM0MsbUJBQW1CLGlEQUFHO0FBQUg7QUFBQTtBQUFBO0FBQUE7QUFLckIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL2hlYXRtYXAvSGVhdG1hcFBhbmVsLnRzeD83N2JmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IERhdGFGcmFtZSwgRGF0YUZyYW1lVHlwZSwgRmllbGQsIGdldExpbmtzU3VwcGxpZXIsIEdyYWZhbmFUaGVtZTIsIFBhbmVsUHJvcHMsIFRpbWVSYW5nZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgUGFuZWxEYXRhRXJyb3JWaWV3IH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyBTY2FsZURpc3RyaWJ1dGlvbkNvbmZpZyB9IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5pbXBvcnQge1xuICBQb3J0YWwsXG4gIFNjYWxlRGlzdHJpYnV0aW9uLFxuICBVUGxvdENoYXJ0LFxuICB1c2VQYW5lbENvbnRleHQsXG4gIHVzZVN0eWxlczIsXG4gIHVzZVRoZW1lMixcbiAgVml6TGF5b3V0LFxuICBWaXpUb29sdGlwQ29udGFpbmVyLFxufSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBDb2xvclNjYWxlIH0gZnJvbSAnYXBwL2NvcmUvY29tcG9uZW50cy9Db2xvclNjYWxlL0NvbG9yU2NhbGUnO1xuaW1wb3J0IHsgaXNIZWF0bWFwQ2VsbHNEZW5zZSwgcmVhZEhlYXRtYXBSb3dzQ3VzdG9tTWV0YSB9IGZyb20gJ2FwcC9mZWF0dXJlcy90cmFuc2Zvcm1lcnMvY2FsY3VsYXRlSGVhdG1hcC9oZWF0bWFwJztcblxuaW1wb3J0IHsgRXhlbXBsYXJNb2RhbEhlYWRlciB9IGZyb20gJy4vRXhlbXBsYXJNb2RhbEhlYWRlcic7XG5pbXBvcnQgeyBIZWF0bWFwSG92ZXJWaWV3IH0gZnJvbSAnLi9IZWF0bWFwSG92ZXJWaWV3JztcbmltcG9ydCB7IHByZXBhcmVIZWF0bWFwRGF0YSB9IGZyb20gJy4vZmllbGRzJztcbmltcG9ydCB7IHF1YW50aXplU2NoZW1lIH0gZnJvbSAnLi9wYWxldHRlcyc7XG5pbXBvcnQgeyBPcHRpb25zIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBIZWF0bWFwSG92ZXJFdmVudCwgcHJlcENvbmZpZyB9IGZyb20gJy4vdXRpbHMnO1xuXG5pbnRlcmZhY2UgSGVhdG1hcFBhbmVsUHJvcHMgZXh0ZW5kcyBQYW5lbFByb3BzPE9wdGlvbnM+IHt9XG5cbmV4cG9ydCBjb25zdCBIZWF0bWFwUGFuZWwgPSAoe1xuICBkYXRhLFxuICBpZCxcbiAgdGltZVJhbmdlLFxuICB0aW1lWm9uZSxcbiAgd2lkdGgsXG4gIGhlaWdodCxcbiAgb3B0aW9ucyxcbiAgZmllbGRDb25maWcsXG4gIGV2ZW50QnVzLFxuICBvbkNoYW5nZVRpbWVSYW5nZSxcbiAgcmVwbGFjZVZhcmlhYmxlcyxcbn06IEhlYXRtYXBQYW5lbFByb3BzKSA9PiB7XG4gIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUyKCk7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcbiAgY29uc3QgeyBzeW5jIH0gPSB1c2VQYW5lbENvbnRleHQoKTtcblxuICAvLyAgbmVjZXNzYXJ5IGZvciBlbmFibGluZyBkYXRhbGlua3MgaW4gaG92ZXIgdmlld1xuICBsZXQgc2NvcGVkVmFyc0Zyb21SYXdEYXRhID0gW107XG4gIGZvciAoY29uc3Qgc2VyaWVzIG9mIGRhdGEuc2VyaWVzKSB7XG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBzZXJpZXMuZmllbGRzKSB7XG4gICAgICBpZiAoZmllbGQuc3RhdGU/LnNjb3BlZFZhcnMpIHtcbiAgICAgICAgc2NvcGVkVmFyc0Zyb21SYXdEYXRhLnB1c2goZmllbGQuc3RhdGUuc2NvcGVkVmFycyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gdWdoXG4gIGxldCB0aW1lUmFuZ2VSZWYgPSB1c2VSZWY8VGltZVJhbmdlPih0aW1lUmFuZ2UpO1xuICB0aW1lUmFuZ2VSZWYuY3VycmVudCA9IHRpbWVSYW5nZTtcblxuICBjb25zdCBnZXRGaWVsZExpbmtzU3VwcGxpZXIgPSB1c2VDYWxsYmFjayhcbiAgICAoZXhlbXBsYXJzOiBEYXRhRnJhbWUsIGZpZWxkOiBGaWVsZCkgPT4ge1xuICAgICAgcmV0dXJuIGdldExpbmtzU3VwcGxpZXIoZXhlbXBsYXJzLCBmaWVsZCwgZmllbGQuc3RhdGU/LnNjb3BlZFZhcnMgPz8ge30sIHJlcGxhY2VWYXJpYWJsZXMpO1xuICAgIH0sXG4gICAgW3JlcGxhY2VWYXJpYWJsZXNdXG4gICk7XG5cbiAgY29uc3QgcGFsZXR0ZSA9IHVzZU1lbW8oKCkgPT4gcXVhbnRpemVTY2hlbWUob3B0aW9ucy5jb2xvciwgdGhlbWUpLCBbb3B0aW9ucy5jb2xvciwgdGhlbWVdKTtcblxuICBjb25zdCBpbmZvID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBwcmVwYXJlSGVhdG1hcERhdGEoZGF0YS5zZXJpZXMsIGRhdGEuYW5ub3RhdGlvbnMsIG9wdGlvbnMsIHBhbGV0dGUsIHRoZW1lLCBnZXRGaWVsZExpbmtzU3VwcGxpZXIpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICByZXR1cm4geyB3YXJuaW5nOiBgJHtleH1gIH07XG4gICAgfVxuICB9LCBbZGF0YS5zZXJpZXMsIGRhdGEuYW5ub3RhdGlvbnMsIG9wdGlvbnMsIHBhbGV0dGUsIHRoZW1lLCBnZXRGaWVsZExpbmtzU3VwcGxpZXJdKTtcblxuICBjb25zdCBmYWNldHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgZXhlbXBsYXJzWEZhY2V0OiBudW1iZXJbXSA9IFtdOyAvLyBcIlRpbWVcIiBmaWVsZFxuICAgIGxldCBleGVtcGxhcnN5RmFjZXQ6IG51bWJlcltdID0gW107XG5cbiAgICBjb25zdCBtZXRhID0gcmVhZEhlYXRtYXBSb3dzQ3VzdG9tTWV0YShpbmZvLmhlYXRtYXApO1xuICAgIGlmIChpbmZvLmV4ZW1wbGFycz8ubGVuZ3RoICYmIG1ldGEueU1hdGNoV2l0aExhYmVsKSB7XG4gICAgICBleGVtcGxhcnNYRmFjZXQgPSBpbmZvLmV4ZW1wbGFycz8uZmllbGRzWzBdLnZhbHVlcztcblxuICAgICAgLy8gb3JkaW5hbC9sYWJlbGVkIGhlYXRtYXAtYnVja2V0cz9cbiAgICAgIGNvbnN0IGhhc0xhYmVsZWRZID0gbWV0YS55T3JkaW5hbERpc3BsYXkgIT0gbnVsbDtcblxuICAgICAgaWYgKGhhc0xhYmVsZWRZKSB7XG4gICAgICAgIGxldCBtYXRjaEV4ZW1wbGFyc0J5ID0gaW5mby5leGVtcGxhcnM/LmZpZWxkcy5maW5kKChmaWVsZCkgPT4gZmllbGQubmFtZSA9PT0gbWV0YS55TWF0Y2hXaXRoTGFiZWwpIS52YWx1ZXM7XG4gICAgICAgIGV4ZW1wbGFyc3lGYWNldCA9IG1hdGNoRXhlbXBsYXJzQnkubWFwKChsYWJlbCkgPT4gbWV0YS55T3JkaW5hbExhYmVsPy5pbmRleE9mKGxhYmVsKSkgYXMgbnVtYmVyW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleGVtcGxhcnN5RmFjZXQgPSBpbmZvLmV4ZW1wbGFycz8uZmllbGRzWzFdLnZhbHVlcyBhcyBudW1iZXJbXTsgLy8gXCJWYWx1ZVwiIGZpZWxkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtudWxsLCBpbmZvLmhlYXRtYXA/LmZpZWxkcy5tYXAoKGYpID0+IGYudmFsdWVzKSwgW2V4ZW1wbGFyc1hGYWNldCwgZXhlbXBsYXJzeUZhY2V0XV07XG4gIH0sIFtpbmZvLmhlYXRtYXAsIGluZm8uZXhlbXBsYXJzXSk7XG5cbiAgY29uc3QgW2hvdmVyLCBzZXRIb3Zlcl0gPSB1c2VTdGF0ZTxIZWF0bWFwSG92ZXJFdmVudCB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcbiAgY29uc3QgW3Nob3VsZERpc3BsYXlDbG9zZUJ1dHRvbiwgc2V0U2hvdWxkRGlzcGxheUNsb3NlQnV0dG9uXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgaXNUb29sVGlwT3BlbiA9IHVzZVJlZjxib29sZWFuPihmYWxzZSk7XG5cbiAgY29uc3Qgb25DbG9zZVRvb2xUaXAgPSAoKSA9PiB7XG4gICAgaXNUb29sVGlwT3Blbi5jdXJyZW50ID0gZmFsc2U7XG4gICAgc2V0U2hvdWxkRGlzcGxheUNsb3NlQnV0dG9uKGZhbHNlKTtcbiAgICBvbmhvdmVyKG51bGwpO1xuICB9O1xuXG4gIGNvbnN0IG9uY2xpY2sgPSAoKSA9PiB7XG4gICAgaXNUb29sVGlwT3Blbi5jdXJyZW50ID0gIWlzVG9vbFRpcE9wZW4uY3VycmVudDtcblxuICAgIC8vIExpbmtpbmcgaW50byB1c2VTdGF0ZSByZXF1aXJlZCB0byByZS1yZW5kZXIgdG9vbHRpcFxuICAgIHNldFNob3VsZERpc3BsYXlDbG9zZUJ1dHRvbihpc1Rvb2xUaXBPcGVuLmN1cnJlbnQpO1xuICB9O1xuXG4gIGNvbnN0IG9uaG92ZXIgPSB1c2VDYWxsYmFjayhcbiAgICAoZXZ0PzogSGVhdG1hcEhvdmVyRXZlbnQgfCBudWxsKSA9PiB7XG4gICAgICBzZXRIb3ZlcihldnQgPz8gdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBbb3B0aW9ucywgZGF0YS5zdHJ1Y3R1cmVSZXZdXG4gICk7XG5cbiAgLy8gdWdoXG4gIGNvbnN0IGRhdGFSZWYgPSB1c2VSZWYoaW5mbyk7XG4gIGRhdGFSZWYuY3VycmVudCA9IGluZm87XG5cbiAgY29uc3QgYnVpbGRlciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNjYWxlQ29uZmlnID0gZGF0YVJlZi5jdXJyZW50Py5oZWF0bWFwPy5maWVsZHNbMV0uY29uZmlnPy5jdXN0b21cbiAgICAgID8uc2NhbGVEaXN0cmlidXRpb24gYXMgU2NhbGVEaXN0cmlidXRpb25Db25maWc7XG5cbiAgICByZXR1cm4gcHJlcENvbmZpZyh7XG4gICAgICBkYXRhUmVmLFxuICAgICAgdGhlbWUsXG4gICAgICBldmVudEJ1cyxcbiAgICAgIG9uaG92ZXI6IG9uaG92ZXIsXG4gICAgICBvbmNsaWNrOiBvcHRpb25zLnRvb2x0aXAuc2hvdyA/IG9uY2xpY2sgOiBudWxsLFxuICAgICAgb256b29tOiAoZXZ0KSA9PiB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gZXZ0LnhNYXggLSBldnQueE1pbjtcbiAgICAgICAgaWYgKGRlbHRhID4gMSkge1xuICAgICAgICAgIG9uQ2hhbmdlVGltZVJhbmdlKHsgZnJvbTogZXZ0LnhNaW4sIHRvOiBldnQueE1heCB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGlzVG9vbFRpcE9wZW4sXG4gICAgICB0aW1lWm9uZSxcbiAgICAgIGdldFRpbWVSYW5nZTogKCkgPT4gdGltZVJhbmdlUmVmLmN1cnJlbnQsXG4gICAgICBzeW5jLFxuICAgICAgY2VsbEdhcDogb3B0aW9ucy5jZWxsR2FwLFxuICAgICAgaGlkZUxFOiBvcHRpb25zLmZpbHRlclZhbHVlcz8ubGUsXG4gICAgICBoaWRlR0U6IG9wdGlvbnMuZmlsdGVyVmFsdWVzPy5nZSxcbiAgICAgIGV4ZW1wbGFyQ29sb3I6IG9wdGlvbnMuZXhlbXBsYXJzPy5jb2xvciA/PyAncmdiYSgyNTUsMCwyNTUsMC43KScsXG4gICAgICB5QXhpc0NvbmZpZzogb3B0aW9ucy55QXhpcyxcbiAgICAgIHlTaXplRGl2aXNvcjogc2NhbGVDb25maWc/LnR5cGUgPT09IFNjYWxlRGlzdHJpYnV0aW9uLkxvZyA/ICsob3B0aW9ucy5jYWxjdWxhdGlvbj8ueUJ1Y2tldHM/LnZhbHVlIHx8IDEpIDogMSxcbiAgICB9KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtvcHRpb25zLCB0aW1lWm9uZSwgZGF0YS5zdHJ1Y3R1cmVSZXZdKTtcblxuICBjb25zdCByZW5kZXJMZWdlbmQgPSAoKSA9PiB7XG4gICAgaWYgKCFpbmZvLmhlYXRtYXAgfHwgIW9wdGlvbnMubGVnZW5kLnNob3cpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBoZWF0bWFwVHlwZSA9IGRhdGFSZWYuY3VycmVudD8uaGVhdG1hcD8ubWV0YT8udHlwZTtcbiAgICBsZXQgaXNTcGFyc2VIZWF0bWFwID0gaGVhdG1hcFR5cGUgPT09IERhdGFGcmFtZVR5cGUuSGVhdG1hcENlbGxzICYmICFpc0hlYXRtYXBDZWxsc0RlbnNlKGRhdGFSZWYuY3VycmVudD8uaGVhdG1hcCEpO1xuICAgIGxldCBjb3VudEZpZWxkSWR4ID0gIWlzU3BhcnNlSGVhdG1hcCA/IDIgOiAzO1xuICAgIGNvbnN0IGNvdW50RmllbGQgPSBpbmZvLmhlYXRtYXAuZmllbGRzW2NvdW50RmllbGRJZHhdO1xuXG4gICAgbGV0IGhvdmVyVmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAvLyBzZXJpZXNJZHg6IDEgaXMgaGVhdG1hcCBsYXllcjsgMiBpcyBleGVtcGxhciBsYXllclxuICAgIGlmIChob3ZlciAmJiBpbmZvLmhlYXRtYXAuZmllbGRzICYmIGhvdmVyLnNlcmllc0lkeCA9PT0gMSkge1xuICAgICAgaG92ZXJWYWx1ZSA9IGNvdW50RmllbGQudmFsdWVzW2hvdmVyLmRhdGFJZHhdO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8Vml6TGF5b3V0LkxlZ2VuZCBwbGFjZW1lbnQ9XCJib3R0b21cIiBtYXhIZWlnaHQ9XCIyMCVcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jb2xvclNjYWxlV3JhcHBlcn0+XG4gICAgICAgICAgPENvbG9yU2NhbGVcbiAgICAgICAgICAgIGhvdmVyVmFsdWU9e2hvdmVyVmFsdWV9XG4gICAgICAgICAgICBjb2xvclBhbGV0dGU9e3BhbGV0dGV9XG4gICAgICAgICAgICBtaW49e2RhdGFSZWYuY3VycmVudC5oZWF0bWFwQ29sb3JzPy5taW5WYWx1ZSF9XG4gICAgICAgICAgICBtYXg9e2RhdGFSZWYuY3VycmVudC5oZWF0bWFwQ29sb3JzPy5tYXhWYWx1ZSF9XG4gICAgICAgICAgICBkaXNwbGF5PXtpbmZvLmRpc3BsYXl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1ZpekxheW91dC5MZWdlbmQ+XG4gICAgKTtcbiAgfTtcblxuICBpZiAoaW5mby53YXJuaW5nIHx8ICFpbmZvLmhlYXRtYXApIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFBhbmVsRGF0YUVycm9yVmlld1xuICAgICAgICBwYW5lbElkPXtpZH1cbiAgICAgICAgZmllbGRDb25maWc9e2ZpZWxkQ29uZmlnfVxuICAgICAgICBkYXRhPXtkYXRhfVxuICAgICAgICBuZWVkc051bWJlckZpZWxkPXt0cnVlfVxuICAgICAgICBtZXNzYWdlPXtpbmZvLndhcm5pbmd9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8Vml6TGF5b3V0IHdpZHRoPXt3aWR0aH0gaGVpZ2h0PXtoZWlnaHR9IGxlZ2VuZD17cmVuZGVyTGVnZW5kKCl9PlxuICAgICAgICB7KHZpeldpZHRoOiBudW1iZXIsIHZpekhlaWdodDogbnVtYmVyKSA9PiAoXG4gICAgICAgICAgPFVQbG90Q2hhcnQgY29uZmlnPXtidWlsZGVyfSBkYXRhPXtmYWNldHMgYXMgYW55fSB3aWR0aD17dml6V2lkdGh9IGhlaWdodD17dml6SGVpZ2h0fT5cbiAgICAgICAgICAgIHsvKmNoaWxkcmVuID8gY2hpbGRyZW4oY29uZmlnLCBhbGlnbmVkRnJhbWUpIDogbnVsbCovfVxuICAgICAgICAgIDwvVVBsb3RDaGFydD5cbiAgICAgICAgKX1cbiAgICAgIDwvVml6TGF5b3V0PlxuICAgICAgPFBvcnRhbD5cbiAgICAgICAge2hvdmVyICYmIG9wdGlvbnMudG9vbHRpcC5zaG93ICYmIChcbiAgICAgICAgICA8Vml6VG9vbHRpcENvbnRhaW5lclxuICAgICAgICAgICAgcG9zaXRpb249e3sgeDogaG92ZXIucGFnZVgsIHk6IGhvdmVyLnBhZ2VZIH19XG4gICAgICAgICAgICBvZmZzZXQ9e3sgeDogMTAsIHk6IDEwIH19XG4gICAgICAgICAgICBhbGxvd1BvaW50ZXJFdmVudHM9e2lzVG9vbFRpcE9wZW4uY3VycmVudH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c2hvdWxkRGlzcGxheUNsb3NlQnV0dG9uICYmIDxFeGVtcGxhck1vZGFsSGVhZGVyIG9uQ2xpY2s9e29uQ2xvc2VUb29sVGlwfSAvPn1cbiAgICAgICAgICAgIDxIZWF0bWFwSG92ZXJWaWV3XG4gICAgICAgICAgICAgIHRpbWVSYW5nZT17dGltZVJhbmdlfVxuICAgICAgICAgICAgICBkYXRhPXtpbmZvfVxuICAgICAgICAgICAgICBob3Zlcj17aG92ZXJ9XG4gICAgICAgICAgICAgIHNob3dIaXN0b2dyYW09e29wdGlvbnMudG9vbHRpcC55SGlzdG9ncmFtfVxuICAgICAgICAgICAgICByZXBsYWNlVmFycz17cmVwbGFjZVZhcmlhYmxlc31cbiAgICAgICAgICAgICAgc2NvcGVkVmFycz17c2NvcGVkVmFyc0Zyb21SYXdEYXRhfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L1ZpelRvb2x0aXBDb250YWluZXI+XG4gICAgICAgICl9XG4gICAgICA8L1BvcnRhbD5cbiAgICA8Lz5cbiAgKTtcbn07XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4gKHtcbiAgY29sb3JTY2FsZVdyYXBwZXI6IGNzc2BcbiAgICBtYXJnaW4tbGVmdDogMjVweDtcbiAgICBwYWRkaW5nOiAxMHB4IDA7XG4gICAgbWF4LXdpZHRoOiAzMDBweDtcbiAgYCxcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/HeatmapPanel.tsx\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/fields.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prepareHeatmapData: () => (/* binding */ prepareHeatmapData)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldState.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrameTypes.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/transformers/joinDataFrames.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/valueFormats/valueFormats.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/displayProcessor.ts\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n/* harmony import */ var app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/features/transformers/calculateHeatmap/heatmap.ts\");\n/* harmony import */ var app_plugins_datasource_prometheus_result_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/result_transformer.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/utils.ts\");\n\n\n\n\n\n\nfunction prepareHeatmapData(frames, annotations, options, palette, theme, getFieldLinks) {\n  if (!frames?.length) {\n    return {};\n  }\n  (0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.cacheFieldDisplayNames)(frames);\n  const exemplars = annotations?.find((f) => f.name === \"exemplar\");\n  if (getFieldLinks) {\n    exemplars?.fields.forEach((field, index) => {\n      exemplars.fields[index].getLinks = getFieldLinks(exemplars, field);\n    });\n  }\n  if (options.calculate) {\n    return getDenseHeatmapData(\n      (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_0__.calculateHeatmapFromData)(frames, options.calculation ?? {}),\n      exemplars,\n      options,\n      palette,\n      theme\n    );\n  }\n  let rowsHeatmap = void 0;\n  for (const frame of frames) {\n    switch (frame.meta?.type) {\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_4__.DataFrameType.HeatmapCells:\n        return (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_0__.isHeatmapCellsDense)(frame) ? getDenseHeatmapData(frame, exemplars, options, palette, theme) : getSparseHeatmapData(frame, exemplars, options, palette, theme);\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_4__.DataFrameType.HeatmapRows:\n        rowsHeatmap = frame;\n    }\n  }\n  if (!rowsHeatmap) {\n    if (frames.length > 1) {\n      let allNamesNumeric = frames.every(\n        (frame) => !Number.isNaN((0,app_plugins_datasource_prometheus_result_transformer__WEBPACK_IMPORTED_MODULE_1__.parseSampleValue)(frame.fields[1].state?.displayName))\n      );\n      if (allNamesNumeric) {\n        frames.sort(app_plugins_datasource_prometheus_result_transformer__WEBPACK_IMPORTED_MODULE_1__.sortSeriesByLabel);\n      }\n      rowsHeatmap = [\n        (0,_grafana_data__WEBPACK_IMPORTED_MODULE_5__.joinDataFrames)({\n          frames\n        })\n      ][0];\n    } else {\n      let frame = frames[0];\n      let numberFields = frame.fields.filter((field) => field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_6__.FieldType.number);\n      let allNamesNumeric = numberFields.every((field) => !Number.isNaN((0,app_plugins_datasource_prometheus_result_transformer__WEBPACK_IMPORTED_MODULE_1__.parseSampleValue)(field.state?.displayName)));\n      if (allNamesNumeric) {\n        numberFields.sort((a, b) => (0,app_plugins_datasource_prometheus_result_transformer__WEBPACK_IMPORTED_MODULE_1__.parseSampleValue)(a.state?.displayName) - (0,app_plugins_datasource_prometheus_result_transformer__WEBPACK_IMPORTED_MODULE_1__.parseSampleValue)(b.state?.displayName));\n        rowsHeatmap = {\n          ...frame,\n          fields: [frame.fields.find((f) => f.type === _grafana_data__WEBPACK_IMPORTED_MODULE_6__.FieldType.time), ...numberFields]\n        };\n      } else {\n        rowsHeatmap = frame;\n      }\n    }\n  }\n  return getDenseHeatmapData(\n    (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_0__.rowsToCellsHeatmap)({\n      unit: options.yAxis?.unit,\n      // used to format the ordinal lookup values\n      decimals: options.yAxis?.decimals,\n      ...options.rowsFrame,\n      frame: rowsHeatmap\n    }),\n    exemplars,\n    options,\n    palette,\n    theme\n  );\n}\nconst getSparseHeatmapData = (frame, exemplars, options, palette, theme) => {\n  if (frame.meta?.type !== _grafana_data__WEBPACK_IMPORTED_MODULE_4__.DataFrameType.HeatmapCells || (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_0__.isHeatmapCellsDense)(frame)) {\n    return {\n      warning: \"Expected sparse heatmap format\",\n      heatmap: frame\n    };\n  }\n  updateFieldDisplay(frame.fields[1], options.yAxis, theme);\n  const valueField = frame.fields[3];\n  const disp = updateFieldDisplay(valueField, options.cellValues, theme);\n  let [minValue, maxValue] = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.boundedMinMax)(\n    valueField.values,\n    options.color.min,\n    options.color.max,\n    options.filterValues?.le,\n    options.filterValues?.ge\n  );\n  return {\n    heatmap: frame,\n    heatmapColors: {\n      palette,\n      values: (0,_utils__WEBPACK_IMPORTED_MODULE_2__.valuesToFills)(valueField.values, palette, minValue, maxValue),\n      minValue,\n      maxValue\n    },\n    exemplars,\n    display: (v) => (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.formattedValueToString)(disp(v))\n  };\n};\nconst getDenseHeatmapData = (frame, exemplars, options, palette, theme) => {\n  if (frame.meta?.type !== _grafana_data__WEBPACK_IMPORTED_MODULE_4__.DataFrameType.HeatmapCells) {\n    return {\n      warning: \"Expected heatmap scanlines format\",\n      heatmap: frame\n    };\n  }\n  if (frame.fields.length < 2 || frame.length < 2) {\n    return { heatmap: frame };\n  }\n  const meta = (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_0__.readHeatmapRowsCustomMeta)(frame);\n  let xName = void 0;\n  let yName = void 0;\n  let valueField = void 0;\n  for (const field of frame.fields) {\n    switch (field.name) {\n      case \"y\":\n        yName = field.name;\n      case \"yMin\":\n      case \"yMax\": {\n        if (!yName) {\n          yName = field.name;\n        }\n        if (meta.yOrdinalDisplay == null) {\n          updateFieldDisplay(field, options.yAxis, theme);\n        }\n        break;\n      }\n      case \"x\":\n      case \"xMin\":\n      case \"xMax\":\n        xName = field.name;\n        break;\n      default: {\n        if (field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_6__.FieldType.number && !valueField) {\n          valueField = field;\n        }\n      }\n    }\n  }\n  if (!yName) {\n    return { warning: \"Missing Y field\", heatmap: frame };\n  }\n  if (!yName) {\n    return { warning: \"Missing X field\", heatmap: frame };\n  }\n  if (!valueField) {\n    return { warning: \"Missing value field\", heatmap: frame };\n  }\n  const disp = updateFieldDisplay(valueField, options.cellValues, theme);\n  const xs = frame.fields[0].values;\n  const ys = frame.fields[1].values;\n  const dlen = xs.length;\n  let yBinQty = dlen - ys.lastIndexOf(ys[0]);\n  let xBinQty = dlen / yBinQty;\n  let yBinIncr = ys[1] - ys[0];\n  let xBinIncr = xs[yBinQty] - xs[0];\n  let [minValue, maxValue] = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.boundedMinMax)(\n    valueField.values,\n    options.color.min,\n    options.color.max,\n    options.filterValues?.le,\n    options.filterValues?.ge\n  );\n  let calcX = options.calculation?.xBuckets;\n  let calcY = options.calculation?.yBuckets;\n  const data = {\n    heatmap: frame,\n    heatmapColors: {\n      palette,\n      values: (0,_utils__WEBPACK_IMPORTED_MODULE_2__.valuesToFills)(valueField.values, palette, minValue, maxValue),\n      minValue,\n      maxValue\n    },\n    exemplars: exemplars?.length ? exemplars : void 0,\n    xBucketSize: xBinIncr,\n    yBucketSize: yBinIncr,\n    xBucketCount: xBinQty,\n    yBucketCount: yBinQty,\n    yLog: calcY?.scale?.log ?? 0,\n    xLog: calcX?.scale?.log ?? 0,\n    xLogSplit: calcX?.scale?.log ? +(calcX?.value ?? \"1\") : 1,\n    yLogSplit: calcY?.scale?.log ? +(calcY?.value ?? \"1\") : 1,\n    // TODO: improve heuristic\n    xLayout: xName === \"xMax\" ? _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.HeatmapCellLayout.le : xName === \"xMin\" ? _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.HeatmapCellLayout.ge : _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.HeatmapCellLayout.unknown,\n    yLayout: yName === \"yMax\" ? _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.HeatmapCellLayout.le : yName === \"yMin\" ? _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.HeatmapCellLayout.ge : _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.HeatmapCellLayout.unknown,\n    display: (v) => (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.formattedValueToString)(disp(v))\n  };\n  return data;\n};\nfunction updateFieldDisplay(field, opts, theme) {\n  if (opts?.unit?.length || opts?.decimals != null) {\n    const { unit, decimals } = opts;\n    field.display = void 0;\n    field.config = { ...field.config };\n    if (unit?.length) {\n      field.config.unit = unit;\n    }\n    if (decimals != null) {\n      field.config.decimals = decimals;\n    }\n  }\n  if (!field.display) {\n    field.display = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.getDisplayProcessor)({ field, theme });\n  }\n  return field.display;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC9maWVsZHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBYU87QUFDMkI7QUFNM0I7QUFDNkM7QUFHUDtBQXdDdEMsU0FBUyxtQkFDZCxRQUNBLGFBQ0EsU0FDQSxTQUNBLE9BQ0EsZUFDYTtBQUNiLE1BQUksQ0FBQyxRQUFRLFFBQVE7QUFDbkIsV0FBTyxDQUFDO0FBQUEsRUFDVjtBQUVBLHVFQUFzQixDQUFDLE1BQU07QUFFN0IsUUFBTSxZQUFZLGFBQWEsS0FBSyxDQUFDLE1BQU0sRUFBRSxTQUFTLFVBQVU7QUFFaEUsTUFBSSxlQUFlO0FBQ2pCLGVBQVcsT0FBTyxRQUFRLENBQUMsT0FBTyxVQUFVO0FBQzFDLGdCQUFVLE9BQU8sS0FBSyxFQUFFLFdBQVcsY0FBYyxXQUFXLEtBQUs7QUFBQSxJQUNuRSxDQUFDO0FBQUEsRUFDSDtBQUVBLE1BQUksUUFBUSxXQUFXO0FBQ3JCLFdBQU87QUFBQSxNQUNMLDRHQUF3QixDQUFDLFFBQVEsUUFBUSxlQUFlLENBQUMsQ0FBQztBQUFBLE1BQzFEO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFHQSxNQUFJLGNBQXFDO0FBQ3pDLGFBQVcsU0FBUyxRQUFRO0FBQzFCLFlBQVEsTUFBTSxNQUFNLE1BQU07QUFBQSxNQUN4QixLQUFLLHdEQUFhLENBQUM7QUFDakIsZUFBTyx1R0FBbUIsQ0FBQyxLQUFLLElBQzVCLG9CQUFvQixPQUFPLFdBQVcsU0FBUyxTQUFTLEtBQUssSUFDN0QscUJBQXFCLE9BQU8sV0FBVyxTQUFTLFNBQVMsS0FBSztBQUFBLE1BRXBFLEtBQUssd0RBQWEsQ0FBQztBQUNqQixzQkFBYztBQUFBLElBQ2xCO0FBQUEsRUFDRjtBQUdBLE1BQUksQ0FBQyxhQUFhO0FBQ2hCLFFBQUksT0FBTyxTQUFTLEdBQUc7QUFDckIsVUFBSSxrQkFBa0IsT0FBTztBQUFBLFFBQzNCLENBQUMsVUFB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QUVBLFNBQU87QUFDVDtBQUVBLFNBQVMsbUJBQW1CLE9BQWMsTUFBOEIsT0FBc0M7QUFDNUcsTUFBSSxNQUFNLE1BQU0sVUFBVSxNQUFNLFlBQVksTUFBTTtBQUNoRCxVQUFNLEVBQUUsTUFBTSxTQUFTLElBQUk7QUFDM0IsVUFBTSxVQUFVO0FBQ2hCLFVBQU0sU0FBUyxFQUFFLEdBQUcsTUFBTSxPQUFPO0FBQ2pDLFFBQUksTUFBTSxRQUFRO0FBQ2hCLFlBQU0sT0FBTyxPQUFPO0FBQUEsSUFDdEI7QUFDQSxRQUFJLFlBQVksTUFBTTtBQUNwQixZQUFNLE9BQU8sV0FBVztBQUFBLElBQzFCO0FBQUEsRUFDRjtBQUNBLE1BQUksQ0FBQyxNQUFNLFNBQVM7QUFDbEIsVUFBTSxVQUFVLGtFQUFtQixDQUFDLEVBQUUsT0FBTyxNQUFNLENBQUM7QUFBQSxFQUN0RDtBQUNBLFNBQU8sTUFBTTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9wYW5lbC9oZWF0bWFwL2ZpZWxkcy50cz8zOTIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNhY2hlRmllbGREaXNwbGF5TmFtZXMsXG4gIERhdGFGcmFtZSxcbiAgRGF0YUZyYW1lVHlwZSxcbiAgRmllbGQsXG4gIEZpZWxkVHlwZSxcbiAgZm9ybWF0dGVkVmFsdWVUb1N0cmluZyxcbiAgZ2V0RGlzcGxheVByb2Nlc3NvcixcbiAgR3JhZmFuYVRoZW1lMixcbiAgTGlua01vZGVsLFxuICBvdXRlckpvaW5EYXRhRnJhbWVzLFxuICBWYWx1ZUZvcm1hdHRlcixcbiAgVmFsdWVMaW5rQ29uZmlnLFxufSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEhlYXRtYXBDZWxsTGF5b3V0IH0gZnJvbSAnQGdyYWZhbmEvc2NoZW1hJztcbmltcG9ydCB7XG4gIGNhbGN1bGF0ZUhlYXRtYXBGcm9tRGF0YSxcbiAgaXNIZWF0bWFwQ2VsbHNEZW5zZSxcbiAgcmVhZEhlYXRtYXBSb3dzQ3VzdG9tTWV0YSxcbiAgcm93c1RvQ2VsbHNIZWF0bWFwLFxufSBmcm9tICdhcHAvZmVhdHVyZXMvdHJhbnNmb3JtZXJzL2NhbGN1bGF0ZUhlYXRtYXAvaGVhdG1hcCc7XG5pbXBvcnQgeyBwYXJzZVNhbXBsZVZhbHVlLCBzb3J0U2VyaWVzQnlMYWJlbCB9IGZyb20gJ2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9yZXN1bHRfdHJhbnNmb3JtZXInO1xuXG5pbXBvcnQgeyBDZWxsVmFsdWVzLCBPcHRpb25zIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBib3VuZGVkTWluTWF4LCB2YWx1ZXNUb0ZpbGxzIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhdG1hcERhdGEge1xuICBoZWF0bWFwPzogRGF0YUZyYW1lOyAvLyBkYXRhIHdlIHdpbGwgcmVuZGVyXG4gIGhlYXRtYXBDb2xvcnM/OiB7XG4gICAgLy8gcXVhbnRpemVkIHBhbGV0dGVcbiAgICBwYWxldHRlOiBzdHJpbmdbXTtcbiAgICAvLyBpbmRpY2VzIGludG8gcGFsZXR0ZVxuICAgIHZhbHVlczogbnVtYmVyW107XG5cbiAgICAvLyBjb2xvciBzY2FsZSByYW5nZVxuICAgIG1pblZhbHVlOiBudW1iZXI7XG4gICAgbWF4VmFsdWU6IG51bWJlcjtcbiAgfTtcblxuICBleGVtcGxhcnM/OiBEYXRhRnJhbWU7IC8vIG9wdGlvbmFsbHkgbGlua2VkIGV4ZW1wbGFyc1xuICBleGVtcGxhckNvbG9yPzogc3RyaW5nO1xuXG4gIHhCdWNrZXRTaXplPzogbnVtYmVyO1xuICB5QnVja2V0U2l6ZT86IG51bWJlcjtcblxuICB4QnVja2V0Q291bnQ/OiBudW1iZXI7XG4gIHlCdWNrZXRDb3VudD86IG51bWJlcjtcblxuICB4TGF5b3V0PzogSGVhdG1hcENlbGxMYXlvdXQ7XG4gIHlMYXlvdXQ/OiBIZWF0bWFwQ2VsbExheW91dDtcblxuICB4TG9nPzogbnVtYmVyO1xuICB5TG9nPzogbnVtYmVyO1xuXG4gIHhMb2dTcGxpdD86IG51bWJlcjtcbiAgeUxvZ1NwbGl0PzogbnVtYmVyO1xuXG4gIC8vIFByaW50IGEgaGVhdG1hcCBjZWxsIHZhbHVlXG4gIGRpc3BsYXk/OiAodjogbnVtYmVyKSA9PiBzdHJpbmc7XG5cbiAgLy8gRXJyb3JzXG4gIHdhcm5pbmc/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlSGVhdG1hcERhdGEoXG4gIGZyYW1lczogRGF0YUZyYW1lW10sXG4gIGFubm90YXRpb25zOiBEYXRhRnJhbWVbXSB8IHVuZGVmaW5lZCxcbiAgb3B0aW9uczogT3B0aW9ucyxcbiAgcGFsZXR0ZTogc3RyaW5nW10sXG4gIHRoZW1lOiBHcmFmYW5hVGhlbWUyLFxuICBnZXRGaWVsZExpbmtzPzogKGV4ZW1wbGFyczogRGF0YUZyYW1lLCBmaWVsZDogRmllbGQpID0+IChjb25maWc6IFZhbHVlTGlua0NvbmZpZykgPT4gQXJyYXk8TGlua01vZGVsPEZpZWxkPj5cbik6IEhlYXRtYXBEYXRhIHtcbiAgaWYgKCFmcmFtZXM/Lmxlbmd0aCkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIGNhY2hlRmllbGREaXNwbGF5TmFtZXMoZnJhbWVzKTtcblxuICBjb25zdCBleGVtcGxhcnMgPSBhbm5vdGF0aW9ucz8uZmluZCgoZikgPT4gZi5uYW1lID09PSAnZXhlbXBsYXInKTtcblxuICBpZiAoZ2V0RmllbGRMaW5rcykge1xuICAgIGV4ZW1wbGFycz8uZmllbGRzLmZvckVhY2goKGZpZWxkLCBpbmRleCkgPT4ge1xuICAgICAgZXhlbXBsYXJzLmZpZWxkc1tpbmRleF0uZ2V0TGlua3MgPSBnZXRGaWVsZExpbmtzKGV4ZW1wbGFycywgZmllbGQpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuY2FsY3VsYXRlKSB7XG4gICAgcmV0dXJuIGdldERlbnNlSGVhdG1hcERhdGEoXG4gICAgICBjYWxjdWxhdGVIZWF0bWFwRnJvbURhdGEoZnJhbWVzLCBvcHRpb25zLmNhbGN1bGF0aW9uID8/IHt9KSxcbiAgICAgIGV4ZW1wbGFycyxcbiAgICAgIG9wdGlvbnMsXG4gICAgICBwYWxldHRlLFxuICAgICAgdGhlbWVcbiAgICApO1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGtub3duIGhlYXRtYXAgdHlwZXNcbiAgbGV0IHJvd3NIZWF0bWFwOiBEYXRhRnJhbWUgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIGZvciAoY29uc3QgZnJhbWUgb2YgZnJhbWVzKSB7XG4gICAgc3dpdGNoIChmcmFtZS5tZXRhPy50eXBlKSB7XG4gICAgICBjYXNlIERhdGFGcmFtZVR5cGUuSGVhdG1hcENlbGxzOlxuICAgICAgICByZXR1cm4gaXNIZWF0bWFwQ2VsbHNEZW5zZShmcmFtZSlcbiAgICAgICAgICA/IGdldERlbnNlSGVhdG1hcERhdGEoZnJhbWUsIGV4ZW1wbGFycywgb3B0aW9ucywgcGFsZXR0ZSwgdGhlbWUpXG4gICAgICAgICAgOiBnZXRTcGFyc2VIZWF0bWFwRGF0YShmcmFtZSwgZXhlbXBsYXJzLCBvcHRpb25zLCBwYWxldHRlLCB0aGVtZSk7XG5cbiAgICAgIGNhc2UgRGF0YUZyYW1lVHlwZS5IZWF0bWFwUm93czpcbiAgICAgICAgcm93c0hlYXRtYXAgPSBmcmFtZTsgLy8gdGhlIGRlZmF1bHQgZm9ybWF0XG4gICAgfVxuICB9XG5cbiAgLy8gRXZlcnl0aGluZyBwYXN0IGhlcmUgYXNzdW1lcyBhIGZpZWxkIGZvciBlYWNoIHJvdyBpbiB0aGUgaGVhdG1hcCAoYnVja2V0cylcbiAgaWYgKCFyb3dzSGVhdG1hcCkge1xuICAgIGlmIChmcmFtZXMubGVuZ3RoID4gMSkge1xuICAgICAgbGV0IGFsbE5hbWVzTnVtZXJpYyA9IGZyYW1lcy5ldmVyeShcbiAgICAgICAgKGZyYW1lKSA9PiAhTnVtYmVyLmlzTmFOKHBhcnNlU2FtcGxlVmFsdWUoZnJhbWUuZmllbGRzWzFdLnN0YXRlPy5kaXNwbGF5TmFtZSEpKVxuICAgICAgKTtcblxuICAgICAgaWYgKGFsbE5hbWVzTnVtZXJpYykge1xuICAgICAgICBmcmFtZXMuc29ydChzb3J0U2VyaWVzQnlMYWJlbCk7XG4gICAgICB9XG5cbiAgICAgIHJvd3NIZWF0bWFwID0gW1xuICAgICAgICBvdXRlckpvaW5EYXRhRnJhbWVzKHtcbiAgICAgICAgICBmcmFtZXMsXG4gICAgICAgIH0pISxcbiAgICAgIF1bMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBmcmFtZSA9IGZyYW1lc1swXTtcbiAgICAgIGxldCBudW1iZXJGaWVsZHMgPSBmcmFtZS5maWVsZHMuZmlsdGVyKChmaWVsZCkgPT4gZmllbGQudHlwZSA9PT0gRmllbGRUeXBlLm51bWJlcik7XG4gICAgICBsZXQgYWxsTmFtZXNOdW1lcmljID0gbnVtYmVyRmllbGRzLmV2ZXJ5KChmaWVsZCkgPT4gIU51bWJlci5pc05hTihwYXJzZVNhbXBsZVZhbHVlKGZpZWxkLnN0YXRlPy5kaXNwbGF5TmFtZSEpKSk7XG5cbiAgICAgIGlmIChhbGxOYW1lc051bWVyaWMpIHtcbiAgICAgICAgbnVtYmVyRmllbGRzLnNvcnQoKGEsIGIpID0+IHBhcnNlU2FtcGxlVmFsdWUoYS5zdGF0ZT8uZGlzcGxheU5hbWUhKSAtIHBhcnNlU2FtcGxlVmFsdWUoYi5zdGF0ZT8uZGlzcGxheU5hbWUhKSk7XG5cbiAgICAgICAgcm93c0hlYXRtYXAgPSB7XG4gICAgICAgICAgLi4uZnJhbWUsXG4gICAgICAgICAgZmllbGRzOiBbZnJhbWUuZmllbGRzLmZpbmQoKGYpID0+IGYudHlwZSA9PT0gRmllbGRUeXBlLnRpbWUpISwgLi4ubnVtYmVyRmllbGRzXSxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvd3NIZWF0bWFwID0gZnJhbWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldERlbnNlSGVhdG1hcERhdGEoXG4gICAgcm93c1RvQ2VsbHNIZWF0bWFwKHtcbiAgICAgIHVuaXQ6IG9wdGlvbnMueUF4aXM/LnVuaXQsIC8vIHVzZWQgdG8gZm9ybWF0IHRoZSBvcmRpbmFsIGxvb2t1cCB2YWx1ZXNcbiAgICAgIGRlY2ltYWxzOiBvcHRpb25zLnlBeGlzPy5kZWNpbWFscyxcbiAgICAgIC4uLm9wdGlvbnMucm93c0ZyYW1lLFxuICAgICAgZnJhbWU6IHJvd3NIZWF0bWFwLFxuICAgIH0pLFxuICAgIGV4ZW1wbGFycyxcbiAgICBvcHRpb25zLFxuICAgIHBhbGV0dGUsXG4gICAgdGhlbWVcbiAgKTtcbn1cblxuY29uc3QgZ2V0U3BhcnNlSGVhdG1hcERhdGEgPSAoXG4gIGZyYW1lOiBEYXRhRnJhbWUsXG4gIGV4ZW1wbGFyczogRGF0YUZyYW1lIHwgdW5kZWZpbmVkLFxuICBvcHRpb25zOiBPcHRpb25zLFxuICBwYWxldHRlOiBzdHJpbmdbXSxcbiAgdGhlbWU6IEdyYWZhbmFUaGVtZTJcbik6IEhlYXRtYXBEYXRhID0+IHtcbiAgaWYgKGZyYW1lLm1ldGE/LnR5cGUgIT09IERhdGFGcmFtZVR5cGUuSGVhdG1hcENlbGxzIHx8IGlzSGVhdG1hcENlbGxzRGVuc2UoZnJhbWUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdhcm5pbmc6ICdFeHBlY3RlZCBzcGFyc2UgaGVhdG1hcCBmb3JtYXQnLFxuICAgICAgaGVhdG1hcDogZnJhbWUsXG4gICAgfTtcbiAgfVxuXG4gIC8vIHkgYXhpcyB0aWNrIGxhYmVsIGRpc3BsYXlcbiAgdXBkYXRlRmllbGREaXNwbGF5KGZyYW1lLmZpZWxkc1sxXSwgb3B0aW9ucy55QXhpcywgdGhlbWUpO1xuXG4gIGNvbnN0IHZhbHVlRmllbGQgPSBmcmFtZS5maWVsZHNbM107XG5cbiAgLy8gY2VsbCB2YWx1ZSBkaXNwbGF5XG4gIGNvbnN0IGRpc3AgPSB1cGRhdGVGaWVsZERpc3BsYXkodmFsdWVGaWVsZCwgb3B0aW9ucy5jZWxsVmFsdWVzLCB0aGVtZSk7XG5cbiAgbGV0IFttaW5WYWx1ZSwgbWF4VmFsdWVdID0gYm91bmRlZE1pbk1heChcbiAgICB2YWx1ZUZpZWxkLnZhbHVlcyxcbiAgICBvcHRpb25zLmNvbG9yLm1pbixcbiAgICBvcHRpb25zLmNvbG9yLm1heCxcbiAgICBvcHRpb25zLmZpbHRlclZhbHVlcz8ubGUsXG4gICAgb3B0aW9ucy5maWx0ZXJWYWx1ZXM/LmdlXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBoZWF0bWFwOiBmcmFtZSxcbiAgICBoZWF0bWFwQ29sb3JzOiB7XG4gICAgICBwYWxldHRlLFxuICAgICAgdmFsdWVzOiB2YWx1ZXNUb0ZpbGxzKHZhbHVlRmllbGQudmFsdWVzLCBwYWxldHRlLCBtaW5WYWx1ZSwgbWF4VmFsdWUpLFxuICAgICAgbWluVmFsdWUsXG4gICAgICBtYXhWYWx1ZSxcbiAgICB9LFxuICAgIGV4ZW1wbGFycyxcbiAgICBkaXNwbGF5OiAodikgPT4gZm9ybWF0dGVkVmFsdWVUb1N0cmluZyhkaXNwKHYpKSxcbiAgfTtcbn07XG5cbmNvbnN0IGdldERlbnNlSGVhdG1hcERhdGEgPSAoXG4gIGZyYW1lOiBEYXRhRnJhbWUsXG4gIGV4ZW1wbGFyczogRGF0YUZyYW1lIHwgdW5kZWZpbmVkLFxuICBvcHRpb25zOiBPcHRpb25zLFxuICBwYWxldHRlOiBzdHJpbmdbXSxcbiAgdGhlbWU6IEdyYWZhbmFUaGVtZTJcbik6IEhlYXRtYXBEYXRhID0+IHtcbiAgaWYgKGZyYW1lLm1ldGE/LnR5cGUgIT09IERhdGFGcmFtZVR5cGUuSGVhdG1hcENlbGxzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdhcm5pbmc6ICdFeHBlY3RlZCBoZWF0bWFwIHNjYW5saW5lcyBmb3JtYXQnLFxuICAgICAgaGVhdG1hcDogZnJhbWUsXG4gICAgfTtcbiAgfVxuXG4gIGlmIChmcmFtZS5maWVsZHMubGVuZ3RoIDwgMiB8fCBmcmFtZS5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIHsgaGVhdG1hcDogZnJhbWUgfTtcbiAgfVxuXG4gIGNvbnN0IG1ldGEgPSByZWFkSGVhdG1hcFJvd3NDdXN0b21NZXRhKGZyYW1lKTtcbiAgbGV0IHhOYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIGxldCB5TmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBsZXQgdmFsdWVGaWVsZDogRmllbGQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgLy8gdmFsaWRhdGUgZmllbGQgZGlzcGxheSBwcm9wZXJ0aWVzXG4gIGZvciAoY29uc3QgZmllbGQgb2YgZnJhbWUuZmllbGRzKSB7XG4gICAgc3dpdGNoIChmaWVsZC5uYW1lKSB7XG4gICAgICBjYXNlICd5JzpcbiAgICAgICAgeU5hbWUgPSBmaWVsZC5uYW1lO1xuXG4gICAgICBjYXNlICd5TWluJzpcbiAgICAgIGNhc2UgJ3lNYXgnOiB7XG4gICAgICAgIGlmICgheU5hbWUpIHtcbiAgICAgICAgICB5TmFtZSA9IGZpZWxkLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGEueU9yZGluYWxEaXNwbGF5ID09IG51bGwpIHtcbiAgICAgICAgICB1cGRhdGVGaWVsZERpc3BsYXkoZmllbGQsIG9wdGlvbnMueUF4aXMsIHRoZW1lKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSAneCc6XG4gICAgICBjYXNlICd4TWluJzpcbiAgICAgIGNhc2UgJ3hNYXgnOlxuICAgICAgICB4TmFtZSA9IGZpZWxkLm5hbWU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGlmIChmaWVsZC50eXBlID09PSBGaWVsZFR5cGUubnVtYmVyICYmICF2YWx1ZUZpZWxkKSB7XG4gICAgICAgICAgdmFsdWVGaWVsZCA9IGZpZWxkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKCF5TmFtZSkge1xuICAgIHJldHVybiB7IHdhcm5pbmc6ICdNaXNzaW5nIFkgZmllbGQnLCBoZWF0bWFwOiBmcmFtZSB9O1xuICB9XG4gIGlmICgheU5hbWUpIHtcbiAgICByZXR1cm4geyB3YXJuaW5nOiAnTWlzc2luZyBYIGZpZWxkJywgaGVhdG1hcDogZnJhbWUgfTtcbiAgfVxuICBpZiAoIXZhbHVlRmllbGQpIHtcbiAgICByZXR1cm4geyB3YXJuaW5nOiAnTWlzc2luZyB2YWx1ZSBmaWVsZCcsIGhlYXRtYXA6IGZyYW1lIH07XG4gIH1cblxuICBjb25zdCBkaXNwID0gdXBkYXRlRmllbGREaXNwbGF5KHZhbHVlRmllbGQsIG9wdGlvbnMuY2VsbFZhbHVlcywgdGhlbWUpO1xuXG4gIC8vIGluZmVyIGJ1Y2tldCBzaXplcyBmcm9tIGRhdGEgKGZvciBub3cpXG4gIC8vIHRoZSAnaGVhdG1hcC1zY2FubGluZXMnIGRlbnNlIGZyYW1lIGZvcm1hdCBsb29rcyBsaWtlOlxuICAvLyB4OiAgICAgIDEsMSwxLDEsMiwyLDIsMlxuICAvLyB5OiAgICAgIDMsNCw1LDYsMyw0LDUsNlxuICAvLyBjb3VudDogIDAsMCwwLDcsMCwzLDAsMVxuXG4gIGNvbnN0IHhzID0gZnJhbWUuZmllbGRzWzBdLnZhbHVlcztcbiAgY29uc3QgeXMgPSBmcmFtZS5maWVsZHNbMV0udmFsdWVzO1xuICBjb25zdCBkbGVuID0geHMubGVuZ3RoO1xuXG4gIC8vIGJlbG93IGlzIGxpdGVyYWxseSBjb3B5L3Bhc3RlIGZyb20gdGhlIHBhdGhCdWlsZGVyIGNvZGUgaW4gdXRpbHMudHNcbiAgLy8gZGV0ZWN0IHggYW5kIHkgYmluIHF0eXMgYnkgZGV0ZWN0aW5nIGxheW91dCByZXBldGl0aW9uIGluIHggJiB5IGRhdGFcbiAgbGV0IHlCaW5RdHkgPSBkbGVuIC0geXMubGFzdEluZGV4T2YoeXNbMF0pO1xuICBsZXQgeEJpblF0eSA9IGRsZW4gLyB5QmluUXR5O1xuICBsZXQgeUJpbkluY3IgPSB5c1sxXSAtIHlzWzBdO1xuICBsZXQgeEJpbkluY3IgPSB4c1t5QmluUXR5XSAtIHhzWzBdO1xuXG4gIGxldCBbbWluVmFsdWUsIG1heFZhbHVlXSA9IGJvdW5kZWRNaW5NYXgoXG4gICAgdmFsdWVGaWVsZC52YWx1ZXMsXG4gICAgb3B0aW9ucy5jb2xvci5taW4sXG4gICAgb3B0aW9ucy5jb2xvci5tYXgsXG4gICAgb3B0aW9ucy5maWx0ZXJWYWx1ZXM/LmxlLFxuICAgIG9wdGlvbnMuZmlsdGVyVmFsdWVzPy5nZVxuICApO1xuXG4gIGxldCBjYWxjWCA9IG9wdGlvbnMuY2FsY3VsYXRpb24/LnhCdWNrZXRzO1xuICBsZXQgY2FsY1kgPSBvcHRpb25zLmNhbGN1bGF0aW9uPy55QnVja2V0cztcblxuICBjb25zdCBkYXRhOiBIZWF0bWFwRGF0YSA9IHtcbiAgICBoZWF0bWFwOiBmcmFtZSxcbiAgICBoZWF0bWFwQ29sb3JzOiB7XG4gICAgICBwYWxldHRlLFxuICAgICAgdmFsdWVzOiB2YWx1ZXNUb0ZpbGxzKHZhbHVlRmllbGQudmFsdWVzLCBwYWxldHRlLCBtaW5WYWx1ZSwgbWF4VmFsdWUpLFxuICAgICAgbWluVmFsdWUsXG4gICAgICBtYXhWYWx1ZSxcbiAgICB9LFxuXG4gICAgZXhlbXBsYXJzOiBleGVtcGxhcnM/Lmxlbmd0aCA/IGV4ZW1wbGFycyA6IHVuZGVmaW5lZCxcbiAgICB4QnVja2V0U2l6ZTogeEJpbkluY3IsXG4gICAgeUJ1Y2tldFNpemU6IHlCaW5JbmNyLFxuICAgIHhCdWNrZXRDb3VudDogeEJpblF0eSxcbiAgICB5QnVja2V0Q291bnQ6IHlCaW5RdHksXG5cbiAgICB5TG9nOiBjYWxjWT8uc2NhbGU/LmxvZyA/PyAwLFxuICAgIHhMb2c6IGNhbGNYPy5zY2FsZT8ubG9nID8/IDAsXG5cbiAgICB4TG9nU3BsaXQ6IGNhbGNYPy5zY2FsZT8ubG9nID8gKyhjYWxjWD8udmFsdWUgPz8gJzEnKSA6IDEsXG4gICAgeUxvZ1NwbGl0OiBjYWxjWT8uc2NhbGU/LmxvZyA/ICsoY2FsY1k/LnZhbHVlID8/ICcxJykgOiAxLFxuXG4gICAgLy8gVE9ETzogaW1wcm92ZSBoZXVyaXN0aWNcbiAgICB4TGF5b3V0OlxuICAgICAgeE5hbWUgPT09ICd4TWF4JyA/IEhlYXRtYXBDZWxsTGF5b3V0LmxlIDogeE5hbWUgPT09ICd4TWluJyA/IEhlYXRtYXBDZWxsTGF5b3V0LmdlIDogSGVhdG1hcENlbGxMYXlvdXQudW5rbm93bixcbiAgICB5TGF5b3V0OlxuICAgICAgeU5hbWUgPT09ICd5TWF4JyA/IEhlYXRtYXBDZWxsTGF5b3V0LmxlIDogeU5hbWUgPT09ICd5TWluJyA/IEhlYXRtYXBDZWxsTGF5b3V0LmdlIDogSGVhdG1hcENlbGxMYXlvdXQudW5rbm93bixcblxuICAgIGRpc3BsYXk6ICh2KSA9PiBmb3JtYXR0ZWRWYWx1ZVRvU3RyaW5nKGRpc3AodikpLFxuICB9O1xuXG4gIHJldHVybiBkYXRhO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlRmllbGREaXNwbGF5KGZpZWxkOiBGaWVsZCwgb3B0czogQ2VsbFZhbHVlcyB8IHVuZGVmaW5lZCwgdGhlbWU6IEdyYWZhbmFUaGVtZTIpOiBWYWx1ZUZvcm1hdHRlciB7XG4gIGlmIChvcHRzPy51bml0Py5sZW5ndGggfHwgb3B0cz8uZGVjaW1hbHMgIT0gbnVsbCkge1xuICAgIGNvbnN0IHsgdW5pdCwgZGVjaW1hbHMgfSA9IG9wdHM7XG4gICAgZmllbGQuZGlzcGxheSA9IHVuZGVmaW5lZDtcbiAgICBmaWVsZC5jb25maWcgPSB7IC4uLmZpZWxkLmNvbmZpZyB9O1xuICAgIGlmICh1bml0Py5sZW5ndGgpIHtcbiAgICAgIGZpZWxkLmNvbmZpZy51bml0ID0gdW5pdDtcbiAgICB9XG4gICAgaWYgKGRlY2ltYWxzICE9IG51bGwpIHtcbiAgICAgIGZpZWxkLmNvbmZpZy5kZWNpbWFscyA9IGRlY2ltYWxzO1xuICAgIH1cbiAgfVxuICBpZiAoIWZpZWxkLmRpc3BsYXkpIHtcbiAgICBmaWVsZC5kaXNwbGF5ID0gZ2V0RGlzcGxheVByb2Nlc3Nvcih7IGZpZWxkLCB0aGVtZSB9KTtcbiAgfVxuICByZXR1cm4gZmllbGQuZGlzcGxheTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/fields.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/migrations.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   angularToReactHeatmap: () => (/* binding */ angularToReactHeatmap),\n/* harmony export */   heatmapChangedHandler: () => (/* binding */ heatmapChangedHandler),\n/* harmony export */   heatmapMigrationHandler: () => (/* binding */ heatmapMigrationHandler)\n/* harmony export */ });\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n/* harmony import */ var _palettes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/palettes.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/types.ts\");\n\n\n\n\nconst heatmapMigrationHandler = (panel) => {\n  if (Object.keys(panel.options).length === 0) {\n    return heatmapChangedHandler(panel, \"heatmap\", { angular: panel }, panel.fieldConfig);\n  }\n  return panel.options;\n};\nconst heatmapChangedHandler = (panel, prevPluginId, prevOptions, prevFieldConfig) => {\n  if (prevPluginId === \"heatmap\" && prevOptions.angular) {\n    const { fieldConfig, options } = angularToReactHeatmap({\n      ...prevOptions.angular,\n      fieldConfig: prevFieldConfig\n    });\n    panel.fieldConfig = fieldConfig;\n    return options;\n  }\n  if (prevPluginId === \"heatmap-new\") {\n    const { bucketFrame, ...options } = panel.options;\n    if (bucketFrame) {\n      return { ...options, rowsFrame: bucketFrame };\n    }\n    return panel.options;\n  }\n  return {};\n};\nfunction angularToReactHeatmap(angular) {\n  const fieldConfig = {\n    defaults: {},\n    overrides: []\n  };\n  const calculate = angular.dataFormat === \"tsbuckets\" ? false : true;\n  const calculation = {\n    ..._types__WEBPACK_IMPORTED_MODULE_1__.defaultOptions.calculation\n  };\n  const oldYAxis = { logBase: 1, ...angular.yAxis };\n  if (calculate) {\n    if (angular.xBucketSize) {\n      calculation.xBuckets = { mode: _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCalculationMode.Size, value: `${angular.xBucketSize}` };\n    } else if (angular.xBucketNumber) {\n      calculation.xBuckets = { mode: _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCalculationMode.Count, value: `${angular.xBucketNumber}` };\n    }\n    if (angular.yBucketSize) {\n      calculation.yBuckets = { mode: _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCalculationMode.Size, value: `${angular.yBucketSize}` };\n    } else if (angular.xBucketNumber) {\n      calculation.yBuckets = { mode: _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCalculationMode.Count, value: `${angular.yBucketNumber}` };\n    }\n    if (oldYAxis.logBase > 1) {\n      calculation.yBuckets = {\n        mode: _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCalculationMode.Count,\n        value: +oldYAxis.splitFactor > 0 ? `${oldYAxis.splitFactor}` : void 0,\n        scale: {\n          type: _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.ScaleDistribution.Log,\n          log: oldYAxis.logBase\n        }\n      };\n    }\n  }\n  const cellGap = asNumber(angular.cards?.cardPadding, 2);\n  const options = {\n    calculate,\n    calculation,\n    color: {\n      ..._types__WEBPACK_IMPORTED_MODULE_1__.defaultOptions.color,\n      steps: 128\n      // best match with existing colors\n    },\n    cellGap: cellGap ? cellGap : 1,\n    // default to size 1\n    cellRadius: asNumber(angular.cards?.cardRound),\n    // just to keep it\n    yAxis: {\n      axisPlacement: oldYAxis.show === false ? _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.AxisPlacement.Hidden : _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.AxisPlacement.Left,\n      reverse: Boolean(angular.reverseYBuckets),\n      axisWidth: asNumber(oldYAxis.width),\n      min: oldYAxis.min,\n      max: oldYAxis.max,\n      unit: oldYAxis.format,\n      decimals: oldYAxis.decimals\n    },\n    cellValues: {\n      decimals: asNumber(angular.tooltipDecimals)\n    },\n    rowsFrame: {\n      layout: getHeatmapCellLayout(angular.yBucketBound)\n    },\n    legend: {\n      show: Boolean(angular.legend?.show)\n    },\n    showValue: _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.VisibilityMode.Never,\n    tooltip: {\n      show: Boolean(angular.tooltip?.show),\n      yHistogram: Boolean(angular.tooltip?.showHistogram)\n    },\n    exemplars: {\n      ..._types__WEBPACK_IMPORTED_MODULE_1__.defaultOptions.exemplars\n    }\n  };\n  if (angular.hideZeroBuckets) {\n    options.filterValues = { ..._types__WEBPACK_IMPORTED_MODULE_1__.defaultOptions.filterValues };\n  }\n  const color = angular.color ?? {};\n  switch (color?.mode) {\n    case \"spectrum\": {\n      options.color.mode = _types__WEBPACK_IMPORTED_MODULE_1__.HeatmapColorMode.Scheme;\n      const current = color.colorScheme;\n      let scheme = _palettes__WEBPACK_IMPORTED_MODULE_0__.colorSchemes.find((v) => v.name === current);\n      if (!scheme) {\n        scheme = _palettes__WEBPACK_IMPORTED_MODULE_0__.colorSchemes.find((v) => current.indexOf(v.name) >= 0);\n      }\n      options.color.scheme = scheme ? scheme.name : _types__WEBPACK_IMPORTED_MODULE_1__.defaultOptions.color.scheme;\n      break;\n    }\n    case \"opacity\": {\n      options.color.mode = _types__WEBPACK_IMPORTED_MODULE_1__.HeatmapColorMode.Opacity;\n      options.color.scale = color.scale;\n      break;\n    }\n  }\n  options.color.fill = color.cardColor;\n  options.color.min = color.min;\n  options.color.max = color.max;\n  if (typeof color.min === \"number\" && typeof color.max === \"number\" && color.min > color.max) {\n    options.color.min = color.max;\n    options.color.max = color.min;\n    options.color.reverse = true;\n  }\n  return { fieldConfig, options };\n}\nfunction getHeatmapCellLayout(v) {\n  switch (v) {\n    case \"upper\":\n      return _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCellLayout.ge;\n    case \"lower\":\n      return _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCellLayout.le;\n    case \"middle\":\n      return _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCellLayout.unknown;\n  }\n  return _grafana_schema__WEBPACK_IMPORTED_MODULE_2__.HeatmapCellLayout.auto;\n}\nfunction asNumber(v, defaultValue) {\n  if (v == null || v === \"\") {\n    return defaultValue;\n  }\n  const num = +v;\n  return isNaN(num) ? defaultValue : num;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC9taWdyYXRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFRTztBQUVzQjtBQUM2QjtBQUduRCxNQUFNLDBCQUEwQixDQUFDLFVBQXdDO0FBRTlFLE1BQUksT0FBTyxLQUFLLE1BQU0sT0FBTyxFQUFFLFdBQVcsR0FBRztBQUMzQyxXQUFPLHNCQUFzQixPQUFPLFdBQVcsRUFBRSxTQUFTLE1BQU0sR0FBRyxNQUFNLFdBQVc7QUFBQSxFQUN0RjtBQUNBLFNBQU8sTUFBTTtBQUNmO0FBS08sTUFBTSx3QkFBaUQsQ0FBQyxPQUFPLGNBQWMsYUFBYSxvQkFBb0I7QUFDbkgsTUFBSSxpQkFBaUIsYUFBYSxZQUFZLFNBQVM7QUFDckQsVUFBTSxFQUFFLGFBQWEsUUFBUSxJQUFJLHNCQUFzQjtBQUFBLE1BQ3JELEdBQUcsWUFBWTtBQUFBLE1BQ2YsYUFBYTtBQUFBLElBQ2YsQ0FBQztBQUNELFVBQU0sY0FBYztBQUNwQixXQUFPO0FBQUEsRUFDVDtBQUVBLE1BQUksaUJBQWlCLGVBQWU7QUFDbEMsVUFBTSxFQUFFLGFBQWEsR0FBRyxRQUFRLElBQUksTUFBTTtBQUMxQyxRQUFJLGFBQWE7QUFDZixhQUFPLEVBQUUsR0FBRyxTQUFTLFdBQVcsWUFBWTtBQUFBLElBQzlDO0FBQ0EsV0FBTyxNQUFNO0FBQUEsRUFDZjtBQUNBLFNBQU8sQ0FBQztBQUNWO0FBRU8sU0FBUyxzQkFBc0IsU0FBb0U7QUFDeEcsUUFBTSxjQUFpQztBQUFBLElBQ3JDLFVBQVUsQ0FBQztBQUFBLElBQ1gsV0FBVyxDQUFDO0FBQUEsRUFDZDtBQUVBLFFBQU0sWUFBWSxRQUFRLGVBQWUsY0FBYyxRQUFRO0FBQy9ELFFBQU0sY0FBeUM7QUFBQSxJQUM3QyxHQUFHLGtEQUFjLENBQUM7QUFBQSxFQUNwQjtBQUVBLFFBQU0sV0FBVyxFQUFFLFNBQVMsR0FBRyxHQUFHLFFBQVEsTUFBTTtBQUVoRCxNQUFJLFdBQVc7QUFDYixRQUFJLFFBQVEsYUFBYTtBQUN2QixrQkFBWSxXQUFXLEVBQUUsTUFBTSxtRUFBc0IsQ0FBQyxNQUFNLE9BQU8sR0FBRyxRQUFRLGNBQWM7QUFBQSxJQUM5RixXQUFXLFFBQVEsZUFBZTtBQUNoQyxrQkFBWSxXQUFXLEVBQUUsTUFBTSxtRUFBc0IsQ0FBQyxPQUFPLE9BQU8sR0FBRyxRQUFRLGdCQUFnQjtBQUFBLElBQ2pHO0FBRUEsUUFBSSxRQUFRLGFBQWE7QUFDdkIsa0JBQVksV0FBVyxFQUFFLE1BQU0sbUVBQXNCLENBQUMsTUFBTSxPQUFPLEdBQUcsUUFBUSxjQUFjO0FBQUEsSUFDOUYsV0FBVyxRQUFRLGVBQWU7QUFDaEMsa0JBQVksV0FBVyxFQUFFLE1BQU0sbUVBQXNCLENBQUMsT0FBTyxPQUFPLEdBQUcsUUFBUSxnQkFBZ0I7QUFBQSxJQUNqRztBQUVBLFFBQUksU0FBUyxVQUFVLEdBQUc7QUFDeEIsa0JBQVksV0FBVztBQUFBLFFBQ3JCLE1BQU0sbUVBQXNCLENBQUM7QUFBQSxRQUM3QixPQUFPLENBQUMsU0FBUyxjQUFjLElBQUksR0FBRyxTQUFTLGdCQUFnQjtBQUFBLFFBQy9ELE9BQU87QUFBQSxVQUNMLE1BQU0sOERBQWlCLENBQUM7QUFBQSxVQUN4QixLQUFLLFNBQVM7QUFBQSxRQUNoQjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUVBLFFBQU0sVUFBVSxTQUFTLFFBQVEsT0FBTyxhQUFhLENBQUM7QUFDdEQsUUFBTSxVQUFtQjtBQUFBLElBQ3ZCO0FBQUEsSUFDQTtBQUFBLElBQ0EsT0FBTztBQUFBLE1BQ0wsR0FBRyxrREFBYyxDQUFDO0FBQUEsTUFDbEIsT0FBTztBQUFBO0FBQUEsSUFDVDtBQUFBLElBQ0EsU0FBUyxVQUFVLFVBQVU7QUFBQTtBQUFBLElBQzdCLFlBQVksU0FBUyxRQUFRLE9BQU8sU0FBUztBQUFBO0FBQUEsSUFDN0MsT0FBTztBQUFBLE1BQ0wsZUFBZSxTQUFTLFNBQVMsUUFBUSwwREFBYSxDQUFDLFNBQVMsMERBQWEsQ0FBQztBQUFBLE1BQzlFLFNBQVMsUUFBUSxRQUFRLGVBQWU7QUFBQSxNQUN4QyxXQUFXLFNBQVMsU0FBUyxLQUFLO0FBQUEsTUFDbEMsS0FBSyxTQUFTO0FBQUEsTUFDZCxLQUFLLFNBQVM7QUFBQSxNQUNkLE1BQU0sU0FBUztBQUFBLE1BQ2YsVUFBVSxTQUFTO0FBQUEsSUFDckI7QUFBQSxJQUNBLFlBQVk7QUFBQSxNQUNWLFVBQVUsU0FBUyxRQUFRLGVBQWU7QUFBQSxJQUM1QztBQUFBLElBQ0EsV0FBVztBQUFBLE1BQ1QsUUFBUSxxQkFBcUIsUUFBUSxZQUFZO0FBQUEsSUFDbkQ7QUFBQSxJQUNBLFFBQVE7QUFBQSxNQUNOLE1BQU0sUUFBUSxRQUFRLFFBQVEsSUFBSTtBQUFBLElBQ3BDO0FBQUEsSUFDQSxXQUFXLDJEQUFjLENBQUM7QUFBQSxJQUMxQixTQUFTO0FBQUEsTUFDUCxNQUFNLFFBQVEsUUFBUSxTQUFTLElBQUk7QUFBQSxNQUNuQyxZQUFZLFFBQVEsUUFBUSxTQUFTLGFBQWE7QUFBQSxJQUNwRDtBQUFBLElBQ0EsV0FBVztBQUFBLE1BQ1QsR0FBRyxrREFBYyxDQUFDO0FBQUEsSUFDcEI7QUFBQSxFQUNGO0FBRUEsTUFBSSxRQUFRLGlCQUFpQjtBQUMzQixZQUFRLGVBQWUsRUFBRSxHQUFHLGtEQUFjLENBQUMsYUFBYTtBQUFBLEVBQzFEO0FBR0EsUUFBTSxRQUFRLFFBQVEsU0FBUyxDQUFDO0FBQ2hDLFVBQVEsT0FBTyxNQUFNO0FBQUEsSUFDbkIsS0FBSyxZQUFZO0FBQ2YsY0FBUSxNQUFNLE9BQU8sb0RBQWdCLENBQUM7QUFFdEMsWUFBTSxVQUFVLE1BQU07QUFDdEIsVUFBSSxTQUFTLG1EQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxTQUFTLE9BQU87QUFDeEQsVUFBSSxDQUFDLFFBQVE7QUFDWCxpQkFBUyxtREFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLFFBQVEsUUFBUSxFQUFFLElBQUksS0FBSyxDQUFDO0FBQUEsTUFDaEU7QUFDQSxjQUFRLE1BQU0sU0FBUyxTQUFTLE9BQU8sT0FBTyxrREFBYyxDQUFDLE1BQU07QUFDbkU7QUFBQSxJQUNGO0FBQUEsSUFDQSxLQUFLLFdBQVc7QUFDZCxjQUFRLE1BQU0sT0FBTyxvREFBZ0IsQ0FBQztBQUN0QyxjQUFRLE1BQU0sUUFBUSxNQUFNO0FBQzVCO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFDQSxVQUFRLE1BQU0sT0FBTyxNQUFNO0FBQzNCLFVBQVEsTUFBTSxNQUFNLE1BQU07QUFDMUIsVUFBUSxNQUFNLE1BQU0sTUFBTTtBQUUxQixNQUFJLE9BQU8sTUFBTSxRQUFRLFlBQVksT0FBTyxNQUFNLFFBQVEsWUFBWSxNQUFNLE1BQU0sTUFBTSxLQUFLO0FBQzNGLFlBQVEsTUFBTSxNQUFNLE1BQU07QUFDMUIsWUFBUSxNQUFNLE1BQU0sTUFBTTtBQUMxQixZQUFRLE1BQU0sVUFBVTtBQUFBLEVBQzFCO0FBRUEsU0FBTyxFQUFFLGFBQWEsUUFBUTtBQUNoQztBQUVBLFNBQVMscUJBQXFCLEdBQStCO0FBQzNELFVBQVEsR0FBRztBQUFBLElBQ1QsS0FBSztBQUNILGFBQU8sOERBQWlCLENBQUM7QUFBQSxJQUMzQixLQUFLO0FBQ0gsYUFBTyw4REFBaUIsQ0FBQztBQUFBLElBQzNCLEtBQUs7QUFDSCxhQUFPLDhEQUFpQixDQUFDO0FBQUEsRUFDN0I7QUFDQSxTQUFPLDhEQUFpQixDQUFDO0FBQzNCO0FBRUEsU0FBUyxTQUFTLEdBQVEsY0FBMkM7QUFDbkUsTUFBSSxLQUFLLFFBQVEsTUFBTSxJQUFJO0FBQ3pCLFdBQU87QUFBQSxFQUNUO0FBQ0EsUUFBTSxNQUFNLENBQUM7QUFDYixTQUFPLE1BQU0sR0FBRyxJQUFJLGVBQWU7QUFDckMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL2hlYXRtYXAvbWlncmF0aW9ucy50cz9jMzE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZpZWxkQ29uZmlnU291cmNlLCBQYW5lbE1vZGVsLCBQYW5lbFR5cGVDaGFuZ2VkSGFuZGxlciB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHtcbiAgQXhpc1BsYWNlbWVudCxcbiAgU2NhbGVEaXN0cmlidXRpb24sXG4gIFZpc2liaWxpdHlNb2RlLFxuICBIZWF0bWFwQ2VsbExheW91dCxcbiAgSGVhdG1hcENhbGN1bGF0aW9uTW9kZSxcbiAgSGVhdG1hcENhbGN1bGF0aW9uT3B0aW9ucyxcbn0gZnJvbSAnQGdyYWZhbmEvc2NoZW1hJztcblxuaW1wb3J0IHsgY29sb3JTY2hlbWVzIH0gZnJvbSAnLi9wYWxldHRlcyc7XG5pbXBvcnQgeyBPcHRpb25zLCBkZWZhdWx0T3B0aW9ucywgSGVhdG1hcENvbG9yTW9kZSB9IGZyb20gJy4vdHlwZXMnO1xuXG4vKiogQ2FsbGVkIHdoZW4gdGhlIHZlcnNpb24gbnVtYmVyIGNoYW5nZXMgKi9cbmV4cG9ydCBjb25zdCBoZWF0bWFwTWlncmF0aW9uSGFuZGxlciA9IChwYW5lbDogUGFuZWxNb2RlbCk6IFBhcnRpYWw8T3B0aW9ucz4gPT4ge1xuICAvLyBNaWdyYXRpbmcgZnJvbSBhbmd1bGFyXG4gIGlmIChPYmplY3Qua2V5cyhwYW5lbC5vcHRpb25zKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gaGVhdG1hcENoYW5nZWRIYW5kbGVyKHBhbmVsLCAnaGVhdG1hcCcsIHsgYW5ndWxhcjogcGFuZWwgfSwgcGFuZWwuZmllbGRDb25maWcpO1xuICB9XG4gIHJldHVybiBwYW5lbC5vcHRpb25zO1xufTtcblxuLyoqXG4gKiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBwYW5lbCBjaGFuZ2VzIGZyb20gYW5vdGhlciBwYW5lbFxuICovXG5leHBvcnQgY29uc3QgaGVhdG1hcENoYW5nZWRIYW5kbGVyOiBQYW5lbFR5cGVDaGFuZ2VkSGFuZGxlciA9IChwYW5lbCwgcHJldlBsdWdpbklkLCBwcmV2T3B0aW9ucywgcHJldkZpZWxkQ29uZmlnKSA9PiB7XG4gIGlmIChwcmV2UGx1Z2luSWQgPT09ICdoZWF0bWFwJyAmJiBwcmV2T3B0aW9ucy5hbmd1bGFyKSB7XG4gICAgY29uc3QgeyBmaWVsZENvbmZpZywgb3B0aW9ucyB9ID0gYW5ndWxhclRvUmVhY3RIZWF0bWFwKHtcbiAgICAgIC4uLnByZXZPcHRpb25zLmFuZ3VsYXIsXG4gICAgICBmaWVsZENvbmZpZzogcHJldkZpZWxkQ29uZmlnLFxuICAgIH0pO1xuICAgIHBhbmVsLmZpZWxkQ29uZmlnID0gZmllbGRDb25maWc7IC8vIE11dGF0ZXMgdGhlIGluY29taW5nIHBhbmVsXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cbiAgLy8gYWxwaGEgZm9yIDguNSssIHRoZW4gYmV0YSBhdCA5LjAuMVxuICBpZiAocHJldlBsdWdpbklkID09PSAnaGVhdG1hcC1uZXcnKSB7XG4gICAgY29uc3QgeyBidWNrZXRGcmFtZSwgLi4ub3B0aW9ucyB9ID0gcGFuZWwub3B0aW9ucztcbiAgICBpZiAoYnVja2V0RnJhbWUpIHtcbiAgICAgIHJldHVybiB7IC4uLm9wdGlvbnMsIHJvd3NGcmFtZTogYnVja2V0RnJhbWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhbmVsLm9wdGlvbnM7XG4gIH1cbiAgcmV0dXJuIHt9O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFuZ3VsYXJUb1JlYWN0SGVhdG1hcChhbmd1bGFyOiBhbnkpOiB7IGZpZWxkQ29uZmlnOiBGaWVsZENvbmZpZ1NvdXJjZTsgb3B0aW9uczogT3B0aW9ucyB9IHtcbiAgY29uc3QgZmllbGRDb25maWc6IEZpZWxkQ29uZmlnU291cmNlID0ge1xuICAgIGRlZmF1bHRzOiB7fSxcbiAgICBvdmVycmlkZXM6IFtdLFxuICB9O1xuXG4gIGNvbnN0IGNhbGN1bGF0ZSA9IGFuZ3VsYXIuZGF0YUZvcm1hdCA9PT0gJ3RzYnVja2V0cycgPyBmYWxzZSA6IHRydWU7XG4gIGNvbnN0IGNhbGN1bGF0aW9uOiBIZWF0bWFwQ2FsY3VsYXRpb25PcHRpb25zID0ge1xuICAgIC4uLmRlZmF1bHRPcHRpb25zLmNhbGN1bGF0aW9uLFxuICB9O1xuXG4gIGNvbnN0IG9sZFlBeGlzID0geyBsb2dCYXNlOiAxLCAuLi5hbmd1bGFyLnlBeGlzIH07XG5cbiAgaWYgKGNhbGN1bGF0ZSkge1xuICAgIGlmIChhbmd1bGFyLnhCdWNrZXRTaXplKSB7XG4gICAgICBjYWxjdWxhdGlvbi54QnVja2V0cyA9IHsgbW9kZTogSGVhdG1hcENhbGN1bGF0aW9uTW9kZS5TaXplLCB2YWx1ZTogYCR7YW5ndWxhci54QnVja2V0U2l6ZX1gIH07XG4gICAgfSBlbHNlIGlmIChhbmd1bGFyLnhCdWNrZXROdW1iZXIpIHtcbiAgICAgIGNhbGN1bGF0aW9uLnhCdWNrZXRzID0geyBtb2RlOiBIZWF0bWFwQ2FsY3VsYXRpb25Nb2RlLkNvdW50LCB2YWx1ZTogYCR7YW5ndWxhci54QnVja2V0TnVtYmVyfWAgfTtcbiAgICB9XG5cbiAgICBpZiAoYW5ndWxhci55QnVja2V0U2l6ZSkge1xuICAgICAgY2FsY3VsYXRpb24ueUJ1Y2tldHMgPSB7IG1vZGU6IEhlYXRtYXBDYWxjdWxhdGlvbk1vZGUuU2l6ZSwgdmFsdWU6IGAke2FuZ3VsYXIueUJ1Y2tldFNpemV9YCB9O1xuICAgIH0gZWxzZSBpZiAoYW5ndWxhci54QnVja2V0TnVtYmVyKSB7XG4gICAgICBjYWxjdWxhdGlvbi55QnVja2V0cyA9IHsgbW9kZTogSGVhdG1hcENhbGN1bGF0aW9uTW9kZS5Db3VudCwgdmFsdWU6IGAke2FuZ3VsYXIueUJ1Y2tldE51bWJlcn1gIH07XG4gICAgfVxuXG4gICAgaWYgKG9sZFlBeGlzLmxvZ0Jhc2UgPiAxKSB7XG4gICAgICBjYWxjdWxhdGlvbi55QnVja2V0cyA9IHtcbiAgICAgICAgbW9kZTogSGVhdG1hcENhbGN1bGF0aW9uTW9kZS5Db3VudCxcbiAgICAgICAgdmFsdWU6ICtvbGRZQXhpcy5zcGxpdEZhY3RvciA+IDAgPyBgJHtvbGRZQXhpcy5zcGxpdEZhY3Rvcn1gIDogdW5kZWZpbmVkLFxuICAgICAgICBzY2FsZToge1xuICAgICAgICAgIHR5cGU6IFNjYWxlRGlzdHJpYnV0aW9uLkxvZyxcbiAgICAgICAgICBsb2c6IG9sZFlBeGlzLmxvZ0Jhc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNlbGxHYXAgPSBhc051bWJlcihhbmd1bGFyLmNhcmRzPy5jYXJkUGFkZGluZywgMik7XG4gIGNvbnN0IG9wdGlvbnM6IE9wdGlvbnMgPSB7XG4gICAgY2FsY3VsYXRlLFxuICAgIGNhbGN1bGF0aW9uLFxuICAgIGNvbG9yOiB7XG4gICAgICAuLi5kZWZhdWx0T3B0aW9ucy5jb2xvcixcbiAgICAgIHN0ZXBzOiAxMjgsIC8vIGJlc3QgbWF0Y2ggd2l0aCBleGlzdGluZyBjb2xvcnNcbiAgICB9LFxuICAgIGNlbGxHYXA6IGNlbGxHYXAgPyBjZWxsR2FwIDogMSwgLy8gZGVmYXVsdCB0byBzaXplIDFcbiAgICBjZWxsUmFkaXVzOiBhc051bWJlcihhbmd1bGFyLmNhcmRzPy5jYXJkUm91bmQpLCAvLyBqdXN0IHRvIGtlZXAgaXRcbiAgICB5QXhpczoge1xuICAgICAgYXhpc1BsYWNlbWVudDogb2xkWUF4aXMuc2hvdyA9PT0gZmFsc2UgPyBBeGlzUGxhY2VtZW50LkhpZGRlbiA6IEF4aXNQbGFjZW1lbnQuTGVmdCxcbiAgICAgIHJldmVyc2U6IEJvb2xlYW4oYW5ndWxhci5yZXZlcnNlWUJ1Y2tldHMpLFxuICAgICAgYXhpc1dpZHRoOiBhc051bWJlcihvbGRZQXhpcy53aWR0aCksXG4gICAgICBtaW46IG9sZFlBeGlzLm1pbixcbiAgICAgIG1heDogb2xkWUF4aXMubWF4LFxuICAgICAgdW5pdDogb2xkWUF4aXMuZm9ybWF0LFxuICAgICAgZGVjaW1hbHM6IG9sZFlBeGlzLmRlY2ltYWxzLFxuICAgIH0sXG4gICAgY2VsbFZhbHVlczoge1xuICAgICAgZGVjaW1hbHM6IGFzTnVtYmVyKGFuZ3VsYXIudG9vbHRpcERlY2ltYWxzKSxcbiAgICB9LFxuICAgIHJvd3NGcmFtZToge1xuICAgICAgbGF5b3V0OiBnZXRIZWF0bWFwQ2VsbExheW91dChhbmd1bGFyLnlCdWNrZXRCb3VuZCksXG4gICAgfSxcbiAgICBsZWdlbmQ6IHtcbiAgICAgIHNob3c6IEJvb2xlYW4oYW5ndWxhci5sZWdlbmQ/LnNob3cpLFxuICAgIH0sXG4gICAgc2hvd1ZhbHVlOiBWaXNpYmlsaXR5TW9kZS5OZXZlcixcbiAgICB0b29sdGlwOiB7XG4gICAgICBzaG93OiBCb29sZWFuKGFuZ3VsYXIudG9vbHRpcD8uc2hvdyksXG4gICAgICB5SGlzdG9ncmFtOiBCb29sZWFuKGFuZ3VsYXIudG9vbHRpcD8uc2hvd0hpc3RvZ3JhbSksXG4gICAgfSxcbiAgICBleGVtcGxhcnM6IHtcbiAgICAgIC4uLmRlZmF1bHRPcHRpb25zLmV4ZW1wbGFycyxcbiAgICB9LFxuICB9O1xuXG4gIGlmIChhbmd1bGFyLmhpZGVaZXJvQnVja2V0cykge1xuICAgIG9wdGlvbnMuZmlsdGVyVmFsdWVzID0geyAuLi5kZWZhdWx0T3B0aW9ucy5maWx0ZXJWYWx1ZXMgfTsgLy8gbWluOiAxZS05XG4gIH1cblxuICAvLyBNaWdyYXRlIGNvbG9yIG9wdGlvbnNcbiAgY29uc3QgY29sb3IgPSBhbmd1bGFyLmNvbG9yID8/IHt9O1xuICBzd2l0Y2ggKGNvbG9yPy5tb2RlKSB7XG4gICAgY2FzZSAnc3BlY3RydW0nOiB7XG4gICAgICBvcHRpb25zLmNvbG9yLm1vZGUgPSBIZWF0bWFwQ29sb3JNb2RlLlNjaGVtZTtcblxuICAgICAgY29uc3QgY3VycmVudCA9IGNvbG9yLmNvbG9yU2NoZW1lIGFzIHN0cmluZztcbiAgICAgIGxldCBzY2hlbWUgPSBjb2xvclNjaGVtZXMuZmluZCgodikgPT4gdi5uYW1lID09PSBjdXJyZW50KTtcbiAgICAgIGlmICghc2NoZW1lKSB7XG4gICAgICAgIHNjaGVtZSA9IGNvbG9yU2NoZW1lcy5maW5kKCh2KSA9PiBjdXJyZW50LmluZGV4T2Yodi5uYW1lKSA+PSAwKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuY29sb3Iuc2NoZW1lID0gc2NoZW1lID8gc2NoZW1lLm5hbWUgOiBkZWZhdWx0T3B0aW9ucy5jb2xvci5zY2hlbWU7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnb3BhY2l0eSc6IHtcbiAgICAgIG9wdGlvbnMuY29sb3IubW9kZSA9IEhlYXRtYXBDb2xvck1vZGUuT3BhY2l0eTtcbiAgICAgIG9wdGlvbnMuY29sb3Iuc2NhbGUgPSBjb2xvci5zY2FsZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBvcHRpb25zLmNvbG9yLmZpbGwgPSBjb2xvci5jYXJkQ29sb3I7XG4gIG9wdGlvbnMuY29sb3IubWluID0gY29sb3IubWluO1xuICBvcHRpb25zLmNvbG9yLm1heCA9IGNvbG9yLm1heDtcblxuICBpZiAodHlwZW9mIGNvbG9yLm1pbiA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGNvbG9yLm1heCA9PT0gJ251bWJlcicgJiYgY29sb3IubWluID4gY29sb3IubWF4KSB7XG4gICAgb3B0aW9ucy5jb2xvci5taW4gPSBjb2xvci5tYXg7XG4gICAgb3B0aW9ucy5jb2xvci5tYXggPSBjb2xvci5taW47XG4gICAgb3B0aW9ucy5jb2xvci5yZXZlcnNlID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB7IGZpZWxkQ29uZmlnLCBvcHRpb25zIH07XG59XG5cbmZ1bmN0aW9uIGdldEhlYXRtYXBDZWxsTGF5b3V0KHY/OiBzdHJpbmcpOiBIZWF0bWFwQ2VsbExheW91dCB7XG4gIHN3aXRjaCAodikge1xuICAgIGNhc2UgJ3VwcGVyJzpcbiAgICAgIHJldHVybiBIZWF0bWFwQ2VsbExheW91dC5nZTtcbiAgICBjYXNlICdsb3dlcic6XG4gICAgICByZXR1cm4gSGVhdG1hcENlbGxMYXlvdXQubGU7XG4gICAgY2FzZSAnbWlkZGxlJzpcbiAgICAgIHJldHVybiBIZWF0bWFwQ2VsbExheW91dC51bmtub3duO1xuICB9XG4gIHJldHVybiBIZWF0bWFwQ2VsbExheW91dC5hdXRvO1xufVxuXG5mdW5jdGlvbiBhc051bWJlcih2OiBhbnksIGRlZmF1bHRWYWx1ZT86IG51bWJlcik6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gIGlmICh2ID09IG51bGwgfHwgdiA9PT0gJycpIHtcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICB9XG4gIGNvbnN0IG51bSA9ICt2O1xuICByZXR1cm4gaXNOYU4obnVtKSA/IGRlZmF1bHRWYWx1ZSA6IG51bTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/migrations.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/module.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   plugin: () => (/* binding */ plugin)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/panel/PanelPlugin.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/fieldOverrides.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/overrides/processors.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n/* harmony import */ var _grafana_ui_src_options_builder__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/options/builder/axis.tsx\");\n/* harmony import */ var _grafana_ui_src_options_builder__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/options/builder/hideSeries.tsx\");\n/* harmony import */ var app_core_components_ColorScale_ColorScale__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/components/ColorScale/ColorScale.tsx\");\n/* harmony import */ var app_features_transformers_calculateHeatmap_editor_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/transformers/calculateHeatmap/editor/helper.ts\");\n/* harmony import */ var app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/transformers/calculateHeatmap/heatmap.ts\");\n/* harmony import */ var _HeatmapPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/HeatmapPanel.tsx\");\n/* harmony import */ var _fields__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/fields.ts\");\n/* harmony import */ var _migrations__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/migrations.ts\");\n/* harmony import */ var _palettes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/palettes.ts\");\n/* harmony import */ var _suggestions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/suggestions.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/types.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst plugin = new _grafana_data__WEBPACK_IMPORTED_MODULE_10__.PanelPlugin(_HeatmapPanel__WEBPACK_IMPORTED_MODULE_4__.HeatmapPanel).useFieldConfig({\n  disableStandardOptions: Object.values(_grafana_data__WEBPACK_IMPORTED_MODULE_11__.FieldConfigProperty).filter((v) => v !== _grafana_data__WEBPACK_IMPORTED_MODULE_11__.FieldConfigProperty.Links),\n  useCustomConfig: (builder) => {\n    builder.addCustomEditor({\n      id: \"scaleDistribution\",\n      path: \"scaleDistribution\",\n      name: \"Y axis scale\",\n      category: [\"Heatmap\"],\n      editor: _grafana_ui_src_options_builder__WEBPACK_IMPORTED_MODULE_12__.ScaleDistributionEditor,\n      override: _grafana_ui_src_options_builder__WEBPACK_IMPORTED_MODULE_12__.ScaleDistributionEditor,\n      defaultValue: { type: _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.ScaleDistribution.Linear },\n      shouldApply: (f) => f.type === _grafana_data__WEBPACK_IMPORTED_MODULE_14__.FieldType.number,\n      process: _grafana_data__WEBPACK_IMPORTED_MODULE_15__.identityOverrideProcessor,\n      hideFromDefaults: true\n    });\n    (0,_grafana_ui_src_options_builder__WEBPACK_IMPORTED_MODULE_16__.addHideFrom)(builder);\n  }\n}).setPanelChangeHandler(_migrations__WEBPACK_IMPORTED_MODULE_6__.heatmapChangedHandler).setMigrationHandler(_migrations__WEBPACK_IMPORTED_MODULE_6__.heatmapMigrationHandler).setPanelOptions((builder, context) => {\n  const opts = context.options ?? _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions;\n  let isOrdinalY = false;\n  if (context.data.length > 0) {\n    try {\n      const palette = (0,_palettes__WEBPACK_IMPORTED_MODULE_7__.quantizeScheme)(opts.color, _grafana_runtime__WEBPACK_IMPORTED_MODULE_17__.config.theme2);\n      const v = (0,_fields__WEBPACK_IMPORTED_MODULE_5__.prepareHeatmapData)(context.data, void 0, opts, palette, _grafana_runtime__WEBPACK_IMPORTED_MODULE_17__.config.theme2);\n      isOrdinalY = (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_3__.readHeatmapRowsCustomMeta)(v.heatmap).yOrdinalDisplay != null;\n    } catch {\n    }\n  }\n  let category = [\"Heatmap\"];\n  builder.addRadio({\n    path: \"calculate\",\n    name: \"Calculate from data\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.calculate,\n    category,\n    settings: {\n      options: [\n        { label: \"Yes\", value: true },\n        { label: \"No\", value: false }\n      ]\n    }\n  });\n  if (opts.calculate) {\n    (0,app_features_transformers_calculateHeatmap_editor_helper__WEBPACK_IMPORTED_MODULE_2__.addHeatmapCalculationOptions)(\"calculation.\", builder, opts.calculation, category);\n  }\n  category = [\"Y Axis\"];\n  builder.addRadio({\n    path: \"yAxis.axisPlacement\",\n    name: \"Placement\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.yAxis.axisPlacement ?? _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.AxisPlacement.Left,\n    category,\n    settings: {\n      options: [\n        { label: \"Left\", value: _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.AxisPlacement.Left },\n        { label: \"Right\", value: _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.AxisPlacement.Right },\n        { label: \"Hidden\", value: _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.AxisPlacement.Hidden }\n      ]\n    }\n  }).addUnitPicker({\n    category,\n    path: \"yAxis.unit\",\n    name: \"Unit\",\n    defaultValue: void 0,\n    settings: {\n      isClearable: true\n    }\n  }).addNumberInput({\n    category,\n    path: \"yAxis.decimals\",\n    name: \"Decimals\",\n    settings: {\n      placeholder: \"Auto\"\n    }\n  });\n  if (!isOrdinalY) {\n    builder.addNumberInput({\n      path: \"yAxis.min\",\n      name: \"Min value\",\n      settings: {\n        placeholder: \"Auto\"\n      },\n      category\n    }).addTextInput({\n      path: \"yAxis.max\",\n      name: \"Max value\",\n      settings: {\n        placeholder: \"Auto\"\n      },\n      category\n    });\n  }\n  builder.addNumberInput({\n    path: \"yAxis.axisWidth\",\n    name: \"Axis width\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.yAxis.axisWidth,\n    settings: {\n      placeholder: \"Auto\",\n      min: 5\n      // smaller should just be hidden\n    },\n    category\n  }).addTextInput({\n    path: \"yAxis.axisLabel\",\n    name: \"Axis label\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.yAxis.axisLabel,\n    settings: {\n      placeholder: \"Auto\"\n    },\n    category\n  });\n  if (!opts.calculate) {\n    builder.addRadio({\n      path: \"rowsFrame.layout\",\n      name: \"Tick alignment\",\n      defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.rowsFrame?.layout ?? _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.HeatmapCellLayout.auto,\n      category,\n      settings: {\n        options: [\n          { label: \"Auto\", value: _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.HeatmapCellLayout.auto },\n          { label: \"Top (LE)\", value: _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.HeatmapCellLayout.le },\n          { label: \"Middle\", value: _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.HeatmapCellLayout.unknown },\n          { label: \"Bottom (GE)\", value: _grafana_schema__WEBPACK_IMPORTED_MODULE_13__.HeatmapCellLayout.ge }\n        ]\n      }\n    });\n  }\n  builder.addBooleanSwitch({\n    path: \"yAxis.reverse\",\n    name: \"Reverse\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.yAxis.reverse === true,\n    category\n  });\n  category = [\"Colors\"];\n  builder.addRadio({\n    path: `color.mode`,\n    name: \"Mode\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.mode,\n    category,\n    settings: {\n      options: [\n        { label: \"Scheme\", value: _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorMode.Scheme },\n        { label: \"Opacity\", value: _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorMode.Opacity }\n      ]\n    }\n  });\n  builder.addColorPicker({\n    path: `color.fill`,\n    name: \"Color\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.fill,\n    category,\n    showIf: (opts2) => opts2.color.mode === _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorMode.Opacity\n  });\n  builder.addRadio({\n    path: `color.scale`,\n    name: \"Scale\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.scale,\n    category,\n    settings: {\n      options: [\n        { label: \"Exponential\", value: _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorScale.Exponential },\n        { label: \"Linear\", value: _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorScale.Linear }\n      ]\n    },\n    showIf: (opts2) => opts2.color.mode === _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorMode.Opacity\n  });\n  builder.addSliderInput({\n    path: \"color.exponent\",\n    name: \"Exponent\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.exponent,\n    category,\n    settings: {\n      min: 0.1,\n      // 1 for on/off?\n      max: 2,\n      step: 0.1\n    },\n    showIf: (opts2) => opts2.color.mode === _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorMode.Opacity && opts2.color.scale === _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorScale.Exponential\n  });\n  builder.addSelect({\n    path: `color.scheme`,\n    name: \"Scheme\",\n    description: \"\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.scheme,\n    category,\n    settings: {\n      options: _palettes__WEBPACK_IMPORTED_MODULE_7__.colorSchemes.map((scheme) => ({\n        value: scheme.name,\n        label: scheme.name\n        //description: 'Set a geometry field based on the results of other fields',\n      }))\n    },\n    showIf: (opts2) => opts2.color.mode !== _types__WEBPACK_IMPORTED_MODULE_9__.HeatmapColorMode.Opacity\n  });\n  builder.addSliderInput({\n    path: \"color.steps\",\n    name: \"Steps\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.steps,\n    category,\n    settings: {\n      min: 2,\n      max: 128,\n      step: 1\n    }\n  }).addBooleanSwitch({\n    path: \"color.reverse\",\n    name: \"Reverse\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.reverse,\n    category\n  }).addCustomEditor({\n    id: \"__scale__\",\n    path: `__scale__`,\n    name: \"\",\n    category,\n    editor: () => {\n      const palette = (0,_palettes__WEBPACK_IMPORTED_MODULE_7__.quantizeScheme)(opts.color, _grafana_runtime__WEBPACK_IMPORTED_MODULE_17__.config.theme2);\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_ColorScale_ColorScale__WEBPACK_IMPORTED_MODULE_1__.ColorScale, { colorPalette: palette, min: 1, max: 100 }));\n    }\n  });\n  builder.addNumberInput({\n    path: \"color.min\",\n    name: \"Start color scale from value\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.min,\n    settings: {\n      placeholder: \"Auto (min)\"\n    },\n    category\n  }).addNumberInput({\n    path: \"color.max\",\n    name: \"End color scale at value\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.color.max,\n    settings: {\n      placeholder: \"Auto (max)\"\n    },\n    category\n  });\n  category = [\"Cell display\"];\n  if (!opts.calculate) {\n    builder.addTextInput({\n      path: \"rowsFrame.value\",\n      name: \"Value name\",\n      defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.rowsFrame?.value,\n      settings: {\n        placeholder: \"Value\"\n      },\n      category\n    });\n  }\n  builder.addUnitPicker({\n    category,\n    path: \"cellValues.unit\",\n    name: \"Unit\",\n    defaultValue: void 0,\n    settings: {\n      isClearable: true\n    }\n  }).addNumberInput({\n    category,\n    path: \"cellValues.decimals\",\n    name: \"Decimals\",\n    settings: {\n      placeholder: \"Auto\"\n    }\n  });\n  builder.addSliderInput({\n    name: \"Cell gap\",\n    path: \"cellGap\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.cellGap,\n    category,\n    settings: {\n      min: 0,\n      max: 25\n    }\n  }).addNumberInput({\n    path: \"filterValues.le\",\n    name: \"Hide cells with values <=\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.filterValues?.le,\n    settings: {\n      placeholder: \"None\"\n    },\n    category\n  }).addNumberInput({\n    path: \"filterValues.ge\",\n    name: \"Hide cells with values >=\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.filterValues?.ge,\n    settings: {\n      placeholder: \"None\"\n    },\n    category\n  });\n  category = [\"Tooltip\"];\n  builder.addBooleanSwitch({\n    path: \"tooltip.show\",\n    name: \"Show tooltip\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.tooltip.show,\n    category\n  });\n  builder.addBooleanSwitch({\n    path: \"tooltip.yHistogram\",\n    name: \"Show histogram (Y axis)\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.tooltip.yHistogram,\n    category,\n    showIf: (opts2) => opts2.tooltip.show\n  });\n  category = [\"Legend\"];\n  builder.addBooleanSwitch({\n    path: \"legend.show\",\n    name: \"Show legend\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.legend.show,\n    category\n  });\n  category = [\"Exemplars\"];\n  builder.addColorPicker({\n    path: \"exemplars.color\",\n    name: \"Color\",\n    defaultValue: _types__WEBPACK_IMPORTED_MODULE_9__.defaultOptions.exemplars.color,\n    category\n  });\n}).setSuggestionsSupplier(new _suggestions__WEBPACK_IMPORTED_MODULE_8__.HeatmapSuggestionsSupplier());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC9tb2R1bGUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrQjtBQUVxRTtBQUNoRTtBQU9oQjtBQUM4QztBQUMxQjtBQUNrQjtBQUNIO0FBRWI7QUFDTTtBQUM0QjtBQUNsQjtBQUNGO0FBQ2tDO0FBRXRFLE1BQU0sU0FBUyxJQUFJLHVEQUFXLENBQTRCLHVEQUFZLEVBQzFFLGVBQWU7QUFBQSxFQUNkLHdCQUF3QixPQUFPLE9BQU8sK0RBQW1CLEVBQUUsT0FBTyxDQUFDLE1BQU0sTUFBTSwrREFBbUIsQ0FBQyxLQUFLO0FBQUEsRUFDeEcsaUJBQWlCLENBQUMsWUFBWTtBQUM1QixZQUFRLGdCQUErQztBQUFBLE1BQ3JELElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxNQUNOLFVBQVUsQ0FBQyxTQUFTO0FBQUEsTUFDcEIsUUFBUSxxRkFBdUI7QUFBdkIsTUFDUixVQUFVLHFGQUF1QjtBQUF2QixNQUNWLGNBQWMsRUFBRSxNQUFNLCtEQUFpQixDQUFDLE9BQU87QUFBQSxNQUMvQyxhQUFhLENBQUMsTUFBTSxFQUFFLFNBQVMscURBQVMsQ0FBQztBQUFBLE1BQ3pDLFNBQVMscUVBQXlCO0FBQXpCLE1BQ1Qsa0JBQWtCO0FBQUEsSUFDcEIsQ0FBQztBQUNELGlGQUFXLENBQUMsT0FBTztBQUFBLEVBQ3JCO0FBQ0YsQ0FBQyxFQUNBLHNCQUFzQiw4REFBcUIsRUFDM0Msb0JBQW9CLGdFQUF1QixFQUMzQyxnQkFBZ0IsQ0FBQyxTQUFTLFlBQVk7QUFDckMsUUFBTSxPQUFPLFFBQVEsV0FBVyxrREFBYztBQUU5QyxNQUFJLGFBQWE7QUFFakIsTUFBSSxRQUFRLEtBQUssU0FBUyxHQUFHO0FBQzNCLFFBQUk7QUFHRixZQUFNLFVBQVUseURBQWMsQ0FBQyxLQUFLLE9BQU8scURBQU0sQ0FBQyxNQUFNO0FBQ3hELFlBQU0sSUFBSSwyREFBa0IsQ0FBQyxRQUFRLE1BQU0sUUFBVyxNQUFNLFNBQVMscURBQU0sQ0FBQyxNQUFNO0FBQ2xGLG1CQUFhLDZHQUF5QixDQUFDLEVBQUUsT0FBTyxFQUFFLG1CQUFtQjtBQUFBLElBQ3ZFLFFBQUU7QUFBQSxJQUFPO0FBQUEsRUFDWDtBQUVBLE1BQUksV0FBVyxDQUFDLFNBQVM7QUFFekIsVUFBUSxTQUFTO0FBQUEsSUFDZixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixjQUFjLGtEQUFjLENBQUM7QUFBQSxJQUM3QjtBQUFBLElBQ0EsVUFBVTtBQUFBLE1BQ1IsU0FBUztBQUFBLFFBQ1AsRUFBRSxPQUFPLE9BQU8sT0FBTyxLQUFLO0FBQUEsUUFDNUIsRUFBRSxPQUFPLE1BQU0sT0FBTyxNQUFNO0FBQUEsTUFDOUI7QUFBQSxJQUNGO0FBQUEsRUFDRixDQUFDO0FBRUQsTUFBSSxLQUFLLFdBQVc7QUFDbEIsMEhBQTRCLENBQUMsZ0JBQWdCLFNBQVMsS0FBSyxhQUFhLFFBQVE7QUFBQSxFQUNsRjtBQUVBLGFBQVcsQ0FBQyxRQUFRO0FBRXBCLFVBQ0csU0FBUztBQUFBLElBQ1IsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDLE1BQU0saUJBQWlCLDJEQUFhLENBQUM7QUFBQSxJQUNsRTtBQUFBLElBQ0EsVUFBVTtBQUFBLE1BQ1IsU0FBUztBQUFBLFFBQ1AsRUFBRSxPQUFPLFFBQVEsT0FBTywyREFBYSxDQUFDLEtBQUs7QUFBQSxRQUMzQyxFQUFFLE9BQU8sU0FBUyxPQUFPLDJEQUFhLENBQUMsTUFBTTtBQUFBLFFBQzdDLEVBQUUsT0FBTyxVQUFVLE9BQU8sMkRBQWEsQ0FBQyxPQUFPO0FBQUEsTUFDakQ7QUFBQSxJQUNGO0FBQUEsRUFDRixDQUFDLEVBQ0EsY0FBYztBQUFBLElBQ2I7QUFBQSxJQUNBLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLGNBQWM7QUFBQSxJQUNkLFVBQVU7QUFBQSxNQUNSLGFBQWE7QUFBQSxJQUNmO0FBQUEsRUFDRixDQUFDLEVBQ0EsZUFBZTtBQUFBLElBQ2Q7QUFBQSxJQUNBLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLFVBQVU7QUFBQSxNQUNSLGFBQWE7QUFBQSxJQUNmO0FBQUEsRUFDRixDQUFDO0FBRUgsTUFBSSxDQUFDLFlBQVk7QUFFZixZQUNHLGVBQWU7QUFBQSxNQUNkLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxNQUNOLFVBQVU7QUFBQSxRQUNSLGFBQWE7QUFBQSxNQUNmO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQyxFQUNBLGFBQWE7QUFBQSxNQUNaLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxNQUNOLFVBQVU7QUFBQSxRQUNSLGFBQWE7QUFBQSxNQUNmO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0w7QUFFQSxVQUNHLGVBQWU7QUFBQSxJQUNkLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLGNBQWMsa0RBQWMsQ0FBQyxNQUFNO0FBQUEsSUFDbkMsVUFBVTtBQUFBLE1BQ1IsYUFBYTtBQUFBLE1BQ2IsS0FBSztBQUFBO0FBQUEsSUFDUDtBQUFBLElBQ0E7QUFBQSxFQUNGLENBQUMsRUFDQSxhQUFhO0FBQUEsSUFDWixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixjQUFjLGtEQUFjLENBQUMsTUFBTTtBQUFBLElBQ25DLFVBQVU7QUFBQSxNQUNSLGFBQWE7QUFBQSxJQUNmO0FBQUEsSUFDQTtBQUFBLEVBQ0YsQ0FBQztBQUVILE1BQUksQ0FBQyxLQUFLLFdBQVc7QUFDbkIsWUFBUSxTQUFTO0FBQUEsTUFDZixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixjQUFjLGtEQUFjLENBQUMsV0FBVyxVQUFVLCtEQUFpQixDQUFDO0FBQUEsTUFDcEU7QUFBQSxNQUNBLFVBQVU7QUFBQSxRQUNSLFNBQVM7QUFBQSxVQUNQLEVBQUUsT0FBTyxRQUFRLE9BQU8sK0RBQWlCLENBQUMsS0FBSztBQUFBLFVBQy9DLEVBQUUsT0FBTyxZQUFZLE9BQU8sK0RBQWlCLENBQUMsR0FBRztBQUFBLFVBQ2pELEVBQUUsT0FBTyxVQUFVLE9BQU8sK0RBQWlCLENBQUMsUUFBUTtBQUFBLFVBQ3BELEVBQUUsT0FBTyxlQUFlLE9BQU8sK0RBQWlCLENBQUMsR0FBRztBQUFBLFFBQ3REO0FBQUEsTUFDRjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFDQSxVQUFRLGlCQUFpQjtBQUFBLElBQ3ZCLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLGNBQWMsa0RBQWMsQ0FBQyxNQUFNLFlBQVk7QUFBQSxJQUMvQztBQUFBLEVBQ0YsQ0FBQztBQUVELGFBQVcsQ0FBQyxRQUFRO0FBRXBCLFVBQVEsU0FBUztBQUFBLElBQ2YsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDLE1BQU07QUFBQSxJQUNuQztBQUFBLElBQ0EsVUFBVTtBQUFBLE1BQ1IsU0FBUztBQUFBLFFBQ1AsRUFBRSxPQUFPLFVBQVUsT0FBTyxvREFBZ0IsQ0FBQyxPQUFPO0FBQUEsUUFDbEQsRUFBRSxPQUFPLFdBQVcsT0FBTyxvREFBZ0IsQ0FBQyxRQUFRO0FBQUEsTUFDdEQ7QUFBQSxJQUNGO0FBQUEsRUFDRixDQUFDO0FBRUQsVUFBUSxlQUFlO0FBQUEsSUFDckIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDLE1BQU07QUFBQSxJQUNuQztBQUFBLElBQ0EsUUFBUSxDQUFDQSxVQUFTQSxNQUFLLE1BQU0sU0FBUyxvREFBZ0IsQ0FBQztBQUFBLEVBQ3pELENBQUM7QUFFRCxVQUFRLFNBQVM7QUFBQSxJQUNmLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLGNBQWMsa0RBQWMsQ0FBQyxNQUFNO0FBQUEsSUFDbkM7QUFBQSxJQUNBLFVBQVU7QUFBQSxNQUNSLFNBQVM7QUFBQSxRQUNQLEVBQUUsT0FBTyxlQUFlLE9BQU8scURBQWlCLENBQUMsWUFBWTtBQUFBLFFBQzdELEVBQUUsT0FBTyxVQUFVLE9BQU8scURBQWlCLENBQUMsT0FBTztBQUFBLE1BQ3JEO0FBQUEsSUFDRjtBQUFBLElBQ0EsUUFBUSxDQUFDQSxVQUFTQSxNQUFLLE1BQU0sU0FBUyxvREFBZ0IsQ0FBQztBQUFBLEVBQ3pELENBQUM7QUFFRCxVQUFRLGVBQWU7QUFBQSxJQUNyQixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixjQUFjLGtEQUFjLENBQUMsTUFBTTtBQUFBLElBQ25DO0FBQUEsSUFDQSxVQUFVO0FBQUEsTUFDUixLQUFLO0FBQUE7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxJQUNSO0FBQUEsSUFDQSxRQUFRLENBQUNBLFVBQ1BBLE1BQUssTUFBTSxTQUFTLG9EQUFnQixDQUFDLFdBQVdBLE1BQUssTUFBTSxVQUFVLHFEQUFpQixDQUFDO0FBQUEsRUFDM0YsQ0FBQztBQUVELFVBQVEsVUFBVTtBQUFBLElBQ2hCLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLGFBQWE7QUFBQSxJQUNiLGNBQWMsa0RBQWMsQ0FBQyxNQUFNO0FBQUEsSUFDbkM7QUFBQSxJQUNBLFVBQVU7QUFBQSxNQUNSLFNBQVMsbURBQVksQ0FBQyxJQUFJLENBQUMsWUFBWTtBQUFBLFFBQ3JDLE9BQU8sT0FBTztBQUFBLFFBQ2QsT0FBTyxPQUFPO0FBQUE7QUFBQSxNQUVoQixFQUFFO0FBQUEsSUFDSjtBQUFBLElBQ0EsUUFBUSxDQUFDQSxVQUFTQSxNQUFLLE1BQU0sU0FBUyxvREFBZ0IsQ0FBQztBQUFBLEVBQ3pELENBQUM7QUFFRCxVQUNHLGVBQWU7QUFBQSxJQUNkLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLGNBQWMsa0RBQWMsQ0FBQyxNQUFNO0FBQUEsSUFDbkM7QUFBQSxJQUNBLFVBQVU7QUFBQSxNQUNSLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxJQUNSO0FBQUEsRUFDRixDQUFDLEVBQ0EsaUJBQWlCO0FBQUEsSUFDaEIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDLE1BQU07QUFBQSxJQUNuQztBQUFBLEVBQ0YsQ0FBQyxFQUNBLGdCQUFnQjtBQUFBLElBQ2YsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ047QUFBQSxJQUNBLFFBQVEsTUFBTTtBQUNaLFlBQU0sVUFBVSx5REFBYyxDQUFDLEtBQUssT0FBTyxxREFBTSxDQUFDLE1BQU07QUFDeEQsYUFDRSwyRUFBQyxhQUNDLDJFQUFDLGlGQUFVLElBQUMsY0FBYyxTQUFTLEtBQUssR0FBRyxLQUFLLEtBQUssQ0FDdkQ7QUFBQSxJQUVKO0FBQUEsRUFDRixDQUFDO0FBRUgsVUFDRyxlQUFlO0FBQUEsSUFDZCxNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixjQUFjLGtEQUFjLENBQUMsTUFBTTtBQUFBLElBQ25DLFVBQVU7QUFBQSxNQUNSLGFBQWE7QUFBQSxJQUNmO0FBQUEsSUFDQTtBQUFBLEVBQ0YsQ0FBQyxFQUNBLGVBQWU7QUFBQSxJQUNkLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLGNBQWMsa0RBQWMsQ0FBQyxNQUFNO0FBQUEsSUFDbkMsVUFBVTtBQUFBLE1BQ1IsYUFBYTtBQUFBLElBQ2Y7QUFBQSxJQUNBO0FBQUEsRUFDRixDQUFDO0FBRUgsYUFBVyxDQUFDLGNBQWM7QUFFMUIsTUFBSSxDQUFDLEtBQUssV0FBVztBQUNuQixZQUFRLGFBQWE7QUFBQSxNQUNuQixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixjQUFjLGtEQUFjLENBQUMsV0FBVztBQUFBLE1BQ3hDLFVBQVU7QUFBQSxRQUNSLGFBQWE7QUFBQSxNQUNmO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFFQSxVQUNHLGNBQWM7QUFBQSxJQUNiO0FBQUEsSUFDQSxNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixjQUFjO0FBQUEsSUFDZCxVQUFVO0FBQUEsTUFDUixhQUFhO0FBQUEsSUFDZjtBQUFBLEVBQ0YsQ0FBQyxFQUNBLGVBQWU7QUFBQSxJQUNkO0FBQUEsSUFDQSxNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixVQUFVO0FBQUEsTUFDUixhQUFhO0FBQUEsSUFDZjtBQUFBLEVBQ0YsQ0FBQztBQUVILFVBY0csZUFBZTtBQUFBLElBQ2QsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDO0FBQUEsSUFDN0I7QUFBQSxJQUNBLFVBQVU7QUFBQSxNQUNSLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxJQUNQO0FBQUEsRUFDRixDQUFDLEVBQ0EsZUFBZTtBQUFBLElBQ2QsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDLGNBQWM7QUFBQSxJQUMzQyxVQUFVO0FBQUEsTUFDUixhQUFhO0FBQUEsSUFDZjtBQUFBLElBQ0E7QUFBQSxFQUNGLENBQUMsRUFDQSxlQUFlO0FBQUEsSUFDZCxNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixjQUFjLGtEQUFjLENBQUMsY0FBYztBQUFBLElBQzNDLFVBQVU7QUFBQSxNQUNSLGFBQWE7QUFBQSxJQUNmO0FBQUEsSUFDQTtBQUFBLEVBQ0YsQ0FBQztBQVlILGFBQVcsQ0FBQyxTQUFTO0FBRXJCLFVBQVEsaUJBQWlCO0FBQUEsSUFDdkIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDLFFBQVE7QUFBQSxJQUNyQztBQUFBLEVBQ0YsQ0FBQztBQUVELFVBQVEsaUJBQWlCO0FBQUEsSUFDdkIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDLFFBQVE7QUFBQSxJQUNyQztBQUFBLElBQ0EsUUFBUSxDQUFDQSxVQUFTQSxNQUFLLFFBQVE7QUFBQSxFQUNqQyxDQUFDO0FBRUQsYUFBVyxDQUFDLFFBQVE7QUFDcEIsVUFBUSxpQkFBaUI7QUFBQSxJQUN2QixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixjQUFjLGtEQUFjLENBQUMsT0FBTztBQUFBLElBQ3BDO0FBQUEsRUFDRixDQUFDO0FBRUQsYUFBVyxDQUFDLFdBQVc7QUFDdkIsVUFBUSxlQUFlO0FBQUEsSUFDckIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sY0FBYyxrREFBYyxDQUFDLFVBQVU7QUFBQSxJQUN2QztBQUFBLEVBQ0YsQ0FBQztBQUNILENBQUMsRUFDQSx1QkFBdUIsSUFBSSxvRUFBMEIsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9wYW5lbC9oZWF0bWFwL21vZHVsZS50c3g/ZWU4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBGaWVsZENvbmZpZ1Byb3BlcnR5LCBGaWVsZFR5cGUsIGlkZW50aXR5T3ZlcnJpZGVQcm9jZXNzb3IsIFBhbmVsUGx1Z2luIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcbmltcG9ydCB7XG4gIEF4aXNQbGFjZW1lbnQsXG4gIEdyYXBoRmllbGRDb25maWcsXG4gIFNjYWxlRGlzdHJpYnV0aW9uLFxuICBTY2FsZURpc3RyaWJ1dGlvbkNvbmZpZyxcbiAgSGVhdG1hcENlbGxMYXlvdXQsXG59IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5pbXBvcnQgeyBhZGRIaWRlRnJvbSwgU2NhbGVEaXN0cmlidXRpb25FZGl0b3IgfSBmcm9tICdAZ3JhZmFuYS91aS9zcmMvb3B0aW9ucy9idWlsZGVyJztcbmltcG9ydCB7IENvbG9yU2NhbGUgfSBmcm9tICdhcHAvY29yZS9jb21wb25lbnRzL0NvbG9yU2NhbGUvQ29sb3JTY2FsZSc7XG5pbXBvcnQgeyBhZGRIZWF0bWFwQ2FsY3VsYXRpb25PcHRpb25zIH0gZnJvbSAnYXBwL2ZlYXR1cmVzL3RyYW5zZm9ybWVycy9jYWxjdWxhdGVIZWF0bWFwL2VkaXRvci9oZWxwZXInO1xuaW1wb3J0IHsgcmVhZEhlYXRtYXBSb3dzQ3VzdG9tTWV0YSB9IGZyb20gJ2FwcC9mZWF0dXJlcy90cmFuc2Zvcm1lcnMvY2FsY3VsYXRlSGVhdG1hcC9oZWF0bWFwJztcblxuaW1wb3J0IHsgSGVhdG1hcFBhbmVsIH0gZnJvbSAnLi9IZWF0bWFwUGFuZWwnO1xuaW1wb3J0IHsgcHJlcGFyZUhlYXRtYXBEYXRhIH0gZnJvbSAnLi9maWVsZHMnO1xuaW1wb3J0IHsgaGVhdG1hcENoYW5nZWRIYW5kbGVyLCBoZWF0bWFwTWlncmF0aW9uSGFuZGxlciB9IGZyb20gJy4vbWlncmF0aW9ucyc7XG5pbXBvcnQgeyBjb2xvclNjaGVtZXMsIHF1YW50aXplU2NoZW1lIH0gZnJvbSAnLi9wYWxldHRlcyc7XG5pbXBvcnQgeyBIZWF0bWFwU3VnZ2VzdGlvbnNTdXBwbGllciB9IGZyb20gJy4vc3VnZ2VzdGlvbnMnO1xuaW1wb3J0IHsgT3B0aW9ucywgZGVmYXVsdE9wdGlvbnMsIEhlYXRtYXBDb2xvck1vZGUsIEhlYXRtYXBDb2xvclNjYWxlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBwbHVnaW4gPSBuZXcgUGFuZWxQbHVnaW48T3B0aW9ucywgR3JhcGhGaWVsZENvbmZpZz4oSGVhdG1hcFBhbmVsKVxuICAudXNlRmllbGRDb25maWcoe1xuICAgIGRpc2FibGVTdGFuZGFyZE9wdGlvbnM6IE9iamVjdC52YWx1ZXMoRmllbGRDb25maWdQcm9wZXJ0eSkuZmlsdGVyKCh2KSA9PiB2ICE9PSBGaWVsZENvbmZpZ1Byb3BlcnR5LkxpbmtzKSxcbiAgICB1c2VDdXN0b21Db25maWc6IChidWlsZGVyKSA9PiB7XG4gICAgICBidWlsZGVyLmFkZEN1c3RvbUVkaXRvcjx2b2lkLCBTY2FsZURpc3RyaWJ1dGlvbkNvbmZpZz4oe1xuICAgICAgICBpZDogJ3NjYWxlRGlzdHJpYnV0aW9uJyxcbiAgICAgICAgcGF0aDogJ3NjYWxlRGlzdHJpYnV0aW9uJyxcbiAgICAgICAgbmFtZTogJ1kgYXhpcyBzY2FsZScsXG4gICAgICAgIGNhdGVnb3J5OiBbJ0hlYXRtYXAnXSxcbiAgICAgICAgZWRpdG9yOiBTY2FsZURpc3RyaWJ1dGlvbkVkaXRvciBhcyBhbnksXG4gICAgICAgIG92ZXJyaWRlOiBTY2FsZURpc3RyaWJ1dGlvbkVkaXRvciBhcyBhbnksXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogeyB0eXBlOiBTY2FsZURpc3RyaWJ1dGlvbi5MaW5lYXIgfSxcbiAgICAgICAgc2hvdWxkQXBwbHk6IChmKSA9PiBmLnR5cGUgPT09IEZpZWxkVHlwZS5udW1iZXIsXG4gICAgICAgIHByb2Nlc3M6IGlkZW50aXR5T3ZlcnJpZGVQcm9jZXNzb3IsXG4gICAgICAgIGhpZGVGcm9tRGVmYXVsdHM6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIGFkZEhpZGVGcm9tKGJ1aWxkZXIpOyAvLyBmb3IgdG9vbHRpcCBldGNcbiAgICB9LFxuICB9KVxuICAuc2V0UGFuZWxDaGFuZ2VIYW5kbGVyKGhlYXRtYXBDaGFuZ2VkSGFuZGxlcilcbiAgLnNldE1pZ3JhdGlvbkhhbmRsZXIoaGVhdG1hcE1pZ3JhdGlvbkhhbmRsZXIpXG4gIC5zZXRQYW5lbE9wdGlvbnMoKGJ1aWxkZXIsIGNvbnRleHQpID0+IHtcbiAgICBjb25zdCBvcHRzID0gY29udGV4dC5vcHRpb25zID8/IGRlZmF1bHRPcHRpb25zO1xuXG4gICAgbGV0IGlzT3JkaW5hbFkgPSBmYWxzZTtcblxuICAgIGlmIChjb250ZXh0LmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTk9URTogdGhpcyBmZWVscyBsaWtlIG92ZXJraWxsL2V4cGVuc2l2ZSBqdXN0IHRvIGFzc2VydCBpZiB3ZSBoYXZlIGFuIG9yZGluYWwgeVxuICAgICAgICAvLyBjYW4gcHJvYmFibHkgc2ltcGxpZnkgd2l0aG91dCBkb2luZyBmdWxsIGRhdGFwcmVwXG4gICAgICAgIGNvbnN0IHBhbGV0dGUgPSBxdWFudGl6ZVNjaGVtZShvcHRzLmNvbG9yLCBjb25maWcudGhlbWUyKTtcbiAgICAgICAgY29uc3QgdiA9IHByZXBhcmVIZWF0bWFwRGF0YShjb250ZXh0LmRhdGEsIHVuZGVmaW5lZCwgb3B0cywgcGFsZXR0ZSwgY29uZmlnLnRoZW1lMik7XG4gICAgICAgIGlzT3JkaW5hbFkgPSByZWFkSGVhdG1hcFJvd3NDdXN0b21NZXRhKHYuaGVhdG1hcCkueU9yZGluYWxEaXNwbGF5ICE9IG51bGw7XG4gICAgICB9IGNhdGNoIHt9XG4gICAgfVxuXG4gICAgbGV0IGNhdGVnb3J5ID0gWydIZWF0bWFwJ107XG5cbiAgICBidWlsZGVyLmFkZFJhZGlvKHtcbiAgICAgIHBhdGg6ICdjYWxjdWxhdGUnLFxuICAgICAgbmFtZTogJ0NhbGN1bGF0ZSBmcm9tIGRhdGEnLFxuICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0T3B0aW9ucy5jYWxjdWxhdGUsXG4gICAgICBjYXRlZ29yeSxcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICB7IGxhYmVsOiAnWWVzJywgdmFsdWU6IHRydWUgfSxcbiAgICAgICAgICB7IGxhYmVsOiAnTm8nLCB2YWx1ZTogZmFsc2UgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAob3B0cy5jYWxjdWxhdGUpIHtcbiAgICAgIGFkZEhlYXRtYXBDYWxjdWxhdGlvbk9wdGlvbnMoJ2NhbGN1bGF0aW9uLicsIGJ1aWxkZXIsIG9wdHMuY2FsY3VsYXRpb24sIGNhdGVnb3J5KTtcbiAgICB9XG5cbiAgICBjYXRlZ29yeSA9IFsnWSBBeGlzJ107XG5cbiAgICBidWlsZGVyXG4gICAgICAuYWRkUmFkaW8oe1xuICAgICAgICBwYXRoOiAneUF4aXMuYXhpc1BsYWNlbWVudCcsXG4gICAgICAgIG5hbWU6ICdQbGFjZW1lbnQnLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLnlBeGlzLmF4aXNQbGFjZW1lbnQgPz8gQXhpc1BsYWNlbWVudC5MZWZ0LFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICB7IGxhYmVsOiAnTGVmdCcsIHZhbHVlOiBBeGlzUGxhY2VtZW50LkxlZnQgfSxcbiAgICAgICAgICAgIHsgbGFiZWw6ICdSaWdodCcsIHZhbHVlOiBBeGlzUGxhY2VtZW50LlJpZ2h0IH0sXG4gICAgICAgICAgICB7IGxhYmVsOiAnSGlkZGVuJywgdmFsdWU6IEF4aXNQbGFjZW1lbnQuSGlkZGVuIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuYWRkVW5pdFBpY2tlcih7XG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICBwYXRoOiAneUF4aXMudW5pdCcsXG4gICAgICAgIG5hbWU6ICdVbml0JyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgaXNDbGVhcmFibGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLmFkZE51bWJlcklucHV0KHtcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHBhdGg6ICd5QXhpcy5kZWNpbWFscycsXG4gICAgICAgIG5hbWU6ICdEZWNpbWFscycsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgcGxhY2Vob2xkZXI6ICdBdXRvJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgaWYgKCFpc09yZGluYWxZKSB7XG4gICAgICAvLyBpZiB1bmRlZmluZWQsIHRoZW4gc2hvdyB0aGUgbWluK21heFxuICAgICAgYnVpbGRlclxuICAgICAgICAuYWRkTnVtYmVySW5wdXQoe1xuICAgICAgICAgIHBhdGg6ICd5QXhpcy5taW4nLFxuICAgICAgICAgIG5hbWU6ICdNaW4gdmFsdWUnLFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0F1dG8nLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIH0pXG4gICAgICAgIC5hZGRUZXh0SW5wdXQoe1xuICAgICAgICAgIHBhdGg6ICd5QXhpcy5tYXgnLFxuICAgICAgICAgIG5hbWU6ICdNYXggdmFsdWUnLFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0F1dG8nLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGJ1aWxkZXJcbiAgICAgIC5hZGROdW1iZXJJbnB1dCh7XG4gICAgICAgIHBhdGg6ICd5QXhpcy5heGlzV2lkdGgnLFxuICAgICAgICBuYW1lOiAnQXhpcyB3aWR0aCcsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMueUF4aXMuYXhpc1dpZHRoLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQXV0bycsXG4gICAgICAgICAgbWluOiA1LCAvLyBzbWFsbGVyIHNob3VsZCBqdXN0IGJlIGhpZGRlblxuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgIH0pXG4gICAgICAuYWRkVGV4dElucHV0KHtcbiAgICAgICAgcGF0aDogJ3lBeGlzLmF4aXNMYWJlbCcsXG4gICAgICAgIG5hbWU6ICdBeGlzIGxhYmVsJyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0T3B0aW9ucy55QXhpcy5heGlzTGFiZWwsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgcGxhY2Vob2xkZXI6ICdBdXRvJyxcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICB9KTtcblxuICAgIGlmICghb3B0cy5jYWxjdWxhdGUpIHtcbiAgICAgIGJ1aWxkZXIuYWRkUmFkaW8oe1xuICAgICAgICBwYXRoOiAncm93c0ZyYW1lLmxheW91dCcsXG4gICAgICAgIG5hbWU6ICdUaWNrIGFsaWdubWVudCcsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMucm93c0ZyYW1lPy5sYXlvdXQgPz8gSGVhdG1hcENlbGxMYXlvdXQuYXV0byxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgeyBsYWJlbDogJ0F1dG8nLCB2YWx1ZTogSGVhdG1hcENlbGxMYXlvdXQuYXV0byB9LFxuICAgICAgICAgICAgeyBsYWJlbDogJ1RvcCAoTEUpJywgdmFsdWU6IEhlYXRtYXBDZWxsTGF5b3V0LmxlIH0sXG4gICAgICAgICAgICB7IGxhYmVsOiAnTWlkZGxlJywgdmFsdWU6IEhlYXRtYXBDZWxsTGF5b3V0LnVua25vd24gfSxcbiAgICAgICAgICAgIHsgbGFiZWw6ICdCb3R0b20gKEdFKScsIHZhbHVlOiBIZWF0bWFwQ2VsbExheW91dC5nZSB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgYnVpbGRlci5hZGRCb29sZWFuU3dpdGNoKHtcbiAgICAgIHBhdGg6ICd5QXhpcy5yZXZlcnNlJyxcbiAgICAgIG5hbWU6ICdSZXZlcnNlJyxcbiAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMueUF4aXMucmV2ZXJzZSA9PT0gdHJ1ZSxcbiAgICAgIGNhdGVnb3J5LFxuICAgIH0pO1xuXG4gICAgY2F0ZWdvcnkgPSBbJ0NvbG9ycyddO1xuXG4gICAgYnVpbGRlci5hZGRSYWRpbyh7XG4gICAgICBwYXRoOiBgY29sb3IubW9kZWAsXG4gICAgICBuYW1lOiAnTW9kZScsXG4gICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLmNvbG9yLm1vZGUsXG4gICAgICBjYXRlZ29yeSxcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICB7IGxhYmVsOiAnU2NoZW1lJywgdmFsdWU6IEhlYXRtYXBDb2xvck1vZGUuU2NoZW1lIH0sXG4gICAgICAgICAgeyBsYWJlbDogJ09wYWNpdHknLCB2YWx1ZTogSGVhdG1hcENvbG9yTW9kZS5PcGFjaXR5IH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYnVpbGRlci5hZGRDb2xvclBpY2tlcih7XG4gICAgICBwYXRoOiBgY29sb3IuZmlsbGAsXG4gICAgICBuYW1lOiAnQ29sb3InLFxuICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0T3B0aW9ucy5jb2xvci5maWxsLFxuICAgICAgY2F0ZWdvcnksXG4gICAgICBzaG93SWY6IChvcHRzKSA9PiBvcHRzLmNvbG9yLm1vZGUgPT09IEhlYXRtYXBDb2xvck1vZGUuT3BhY2l0eSxcbiAgICB9KTtcblxuICAgIGJ1aWxkZXIuYWRkUmFkaW8oe1xuICAgICAgcGF0aDogYGNvbG9yLnNjYWxlYCxcbiAgICAgIG5hbWU6ICdTY2FsZScsXG4gICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLmNvbG9yLnNjYWxlLFxuICAgICAgY2F0ZWdvcnksXG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgeyBsYWJlbDogJ0V4cG9uZW50aWFsJywgdmFsdWU6IEhlYXRtYXBDb2xvclNjYWxlLkV4cG9uZW50aWFsIH0sXG4gICAgICAgICAgeyBsYWJlbDogJ0xpbmVhcicsIHZhbHVlOiBIZWF0bWFwQ29sb3JTY2FsZS5MaW5lYXIgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICBzaG93SWY6IChvcHRzKSA9PiBvcHRzLmNvbG9yLm1vZGUgPT09IEhlYXRtYXBDb2xvck1vZGUuT3BhY2l0eSxcbiAgICB9KTtcblxuICAgIGJ1aWxkZXIuYWRkU2xpZGVySW5wdXQoe1xuICAgICAgcGF0aDogJ2NvbG9yLmV4cG9uZW50JyxcbiAgICAgIG5hbWU6ICdFeHBvbmVudCcsXG4gICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLmNvbG9yLmV4cG9uZW50LFxuICAgICAgY2F0ZWdvcnksXG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICBtaW46IDAuMSwgLy8gMSBmb3Igb24vb2ZmP1xuICAgICAgICBtYXg6IDIsXG4gICAgICAgIHN0ZXA6IDAuMSxcbiAgICAgIH0sXG4gICAgICBzaG93SWY6IChvcHRzKSA9PlxuICAgICAgICBvcHRzLmNvbG9yLm1vZGUgPT09IEhlYXRtYXBDb2xvck1vZGUuT3BhY2l0eSAmJiBvcHRzLmNvbG9yLnNjYWxlID09PSBIZWF0bWFwQ29sb3JTY2FsZS5FeHBvbmVudGlhbCxcbiAgICB9KTtcblxuICAgIGJ1aWxkZXIuYWRkU2VsZWN0KHtcbiAgICAgIHBhdGg6IGBjb2xvci5zY2hlbWVgLFxuICAgICAgbmFtZTogJ1NjaGVtZScsXG4gICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLmNvbG9yLnNjaGVtZSxcbiAgICAgIGNhdGVnb3J5LFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgb3B0aW9uczogY29sb3JTY2hlbWVzLm1hcCgoc2NoZW1lKSA9PiAoe1xuICAgICAgICAgIHZhbHVlOiBzY2hlbWUubmFtZSxcbiAgICAgICAgICBsYWJlbDogc2NoZW1lLm5hbWUsXG4gICAgICAgICAgLy9kZXNjcmlwdGlvbjogJ1NldCBhIGdlb21ldHJ5IGZpZWxkIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIG90aGVyIGZpZWxkcycsXG4gICAgICAgIH0pKSxcbiAgICAgIH0sXG4gICAgICBzaG93SWY6IChvcHRzKSA9PiBvcHRzLmNvbG9yLm1vZGUgIT09IEhlYXRtYXBDb2xvck1vZGUuT3BhY2l0eSxcbiAgICB9KTtcblxuICAgIGJ1aWxkZXJcbiAgICAgIC5hZGRTbGlkZXJJbnB1dCh7XG4gICAgICAgIHBhdGg6ICdjb2xvci5zdGVwcycsXG4gICAgICAgIG5hbWU6ICdTdGVwcycsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMuY29sb3Iuc3RlcHMsXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIG1pbjogMixcbiAgICAgICAgICBtYXg6IDEyOCxcbiAgICAgICAgICBzdGVwOiAxLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5hZGRCb29sZWFuU3dpdGNoKHtcbiAgICAgICAgcGF0aDogJ2NvbG9yLnJldmVyc2UnLFxuICAgICAgICBuYW1lOiAnUmV2ZXJzZScsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMuY29sb3IucmV2ZXJzZSxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICB9KVxuICAgICAgLmFkZEN1c3RvbUVkaXRvcih7XG4gICAgICAgIGlkOiAnX19zY2FsZV9fJyxcbiAgICAgICAgcGF0aDogYF9fc2NhbGVfX2AsXG4gICAgICAgIG5hbWU6ICcnLFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgZWRpdG9yOiAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcGFsZXR0ZSA9IHF1YW50aXplU2NoZW1lKG9wdHMuY29sb3IsIGNvbmZpZy50aGVtZTIpO1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8Q29sb3JTY2FsZSBjb2xvclBhbGV0dGU9e3BhbGV0dGV9IG1pbj17MX0gbWF4PXsxMDB9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICBidWlsZGVyXG4gICAgICAuYWRkTnVtYmVySW5wdXQoe1xuICAgICAgICBwYXRoOiAnY29sb3IubWluJyxcbiAgICAgICAgbmFtZTogJ1N0YXJ0IGNvbG9yIHNjYWxlIGZyb20gdmFsdWUnLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLmNvbG9yLm1pbixcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ0F1dG8gKG1pbiknLFxuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgIH0pXG4gICAgICAuYWRkTnVtYmVySW5wdXQoe1xuICAgICAgICBwYXRoOiAnY29sb3IubWF4JyxcbiAgICAgICAgbmFtZTogJ0VuZCBjb2xvciBzY2FsZSBhdCB2YWx1ZScsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMuY29sb3IubWF4LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQXV0byAobWF4KScsXG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgfSk7XG5cbiAgICBjYXRlZ29yeSA9IFsnQ2VsbCBkaXNwbGF5J107XG5cbiAgICBpZiAoIW9wdHMuY2FsY3VsYXRlKSB7XG4gICAgICBidWlsZGVyLmFkZFRleHRJbnB1dCh7XG4gICAgICAgIHBhdGg6ICdyb3dzRnJhbWUudmFsdWUnLFxuICAgICAgICBuYW1lOiAnVmFsdWUgbmFtZScsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMucm93c0ZyYW1lPy52YWx1ZSxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ1ZhbHVlJyxcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBidWlsZGVyXG4gICAgICAuYWRkVW5pdFBpY2tlcih7XG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICBwYXRoOiAnY2VsbFZhbHVlcy51bml0JyxcbiAgICAgICAgbmFtZTogJ1VuaXQnLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBpc0NsZWFyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAuYWRkTnVtYmVySW5wdXQoe1xuICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgcGF0aDogJ2NlbGxWYWx1ZXMuZGVjaW1hbHMnLFxuICAgICAgICBuYW1lOiAnRGVjaW1hbHMnLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQXV0bycsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgIGJ1aWxkZXJcbiAgICAgIC8vIC5hZGRSYWRpbyh7XG4gICAgICAvLyAgIHBhdGg6ICdzaG93VmFsdWUnLFxuICAgICAgLy8gICBuYW1lOiAnU2hvdyB2YWx1ZXMnLFxuICAgICAgLy8gICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLnNob3dWYWx1ZSxcbiAgICAgIC8vICAgY2F0ZWdvcnksXG4gICAgICAvLyAgIHNldHRpbmdzOiB7XG4gICAgICAvLyAgICAgb3B0aW9uczogW1xuICAgICAgLy8gICAgICAgeyB2YWx1ZTogVmlzaWJpbGl0eU1vZGUuQXV0bywgbGFiZWw6ICdBdXRvJyB9LFxuICAgICAgLy8gICAgICAgeyB2YWx1ZTogVmlzaWJpbGl0eU1vZGUuQWx3YXlzLCBsYWJlbDogJ0Fsd2F5cycgfSxcbiAgICAgIC8vICAgICAgIHsgdmFsdWU6IFZpc2liaWxpdHlNb2RlLk5ldmVyLCBsYWJlbDogJ05ldmVyJyB9LFxuICAgICAgLy8gICAgIF0sXG4gICAgICAvLyAgIH0sXG4gICAgICAvLyB9KVxuICAgICAgLmFkZFNsaWRlcklucHV0KHtcbiAgICAgICAgbmFtZTogJ0NlbGwgZ2FwJyxcbiAgICAgICAgcGF0aDogJ2NlbGxHYXAnLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLmNlbGxHYXAsXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICBtYXg6IDI1LFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC5hZGROdW1iZXJJbnB1dCh7XG4gICAgICAgIHBhdGg6ICdmaWx0ZXJWYWx1ZXMubGUnLFxuICAgICAgICBuYW1lOiAnSGlkZSBjZWxscyB3aXRoIHZhbHVlcyA8PScsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMuZmlsdGVyVmFsdWVzPy5sZSxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ05vbmUnLFxuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgIH0pXG4gICAgICAuYWRkTnVtYmVySW5wdXQoe1xuICAgICAgICBwYXRoOiAnZmlsdGVyVmFsdWVzLmdlJyxcbiAgICAgICAgbmFtZTogJ0hpZGUgY2VsbHMgd2l0aCB2YWx1ZXMgPj0nLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcHRpb25zLmZpbHRlclZhbHVlcz8uZ2UsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgcGxhY2Vob2xkZXI6ICdOb25lJyxcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICB9KTtcbiAgICAvLyAuYWRkU2xpZGVySW5wdXQoe1xuICAgIC8vICAgbmFtZTogJ0NlbGwgcmFkaXVzJyxcbiAgICAvLyAgIHBhdGg6ICdjZWxsUmFkaXVzJyxcbiAgICAvLyAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMuY2VsbFJhZGl1cyxcbiAgICAvLyAgIGNhdGVnb3J5LFxuICAgIC8vICAgc2V0dGluZ3M6IHtcbiAgICAvLyAgICAgbWluOiAwLFxuICAgIC8vICAgICBtYXg6IDEwMCxcbiAgICAvLyAgIH0sXG4gICAgLy8gfSlcblxuICAgIGNhdGVnb3J5ID0gWydUb29sdGlwJ107XG5cbiAgICBidWlsZGVyLmFkZEJvb2xlYW5Td2l0Y2goe1xuICAgICAgcGF0aDogJ3Rvb2x0aXAuc2hvdycsXG4gICAgICBuYW1lOiAnU2hvdyB0b29sdGlwJyxcbiAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMudG9vbHRpcC5zaG93LFxuICAgICAgY2F0ZWdvcnksXG4gICAgfSk7XG5cbiAgICBidWlsZGVyLmFkZEJvb2xlYW5Td2l0Y2goe1xuICAgICAgcGF0aDogJ3Rvb2x0aXAueUhpc3RvZ3JhbScsXG4gICAgICBuYW1lOiAnU2hvdyBoaXN0b2dyYW0gKFkgYXhpcyknLFxuICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0T3B0aW9ucy50b29sdGlwLnlIaXN0b2dyYW0sXG4gICAgICBjYXRlZ29yeSxcbiAgICAgIHNob3dJZjogKG9wdHMpID0+IG9wdHMudG9vbHRpcC5zaG93LFxuICAgIH0pO1xuXG4gICAgY2F0ZWdvcnkgPSBbJ0xlZ2VuZCddO1xuICAgIGJ1aWxkZXIuYWRkQm9vbGVhblN3aXRjaCh7XG4gICAgICBwYXRoOiAnbGVnZW5kLnNob3cnLFxuICAgICAgbmFtZTogJ1Nob3cgbGVnZW5kJyxcbiAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMubGVnZW5kLnNob3csXG4gICAgICBjYXRlZ29yeSxcbiAgICB9KTtcblxuICAgIGNhdGVnb3J5ID0gWydFeGVtcGxhcnMnXTtcbiAgICBidWlsZGVyLmFkZENvbG9yUGlja2VyKHtcbiAgICAgIHBhdGg6ICdleGVtcGxhcnMuY29sb3InLFxuICAgICAgbmFtZTogJ0NvbG9yJyxcbiAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdE9wdGlvbnMuZXhlbXBsYXJzLmNvbG9yLFxuICAgICAgY2F0ZWdvcnksXG4gICAgfSk7XG4gIH0pXG4gIC5zZXRTdWdnZXN0aW9uc1N1cHBsaWVyKG5ldyBIZWF0bWFwU3VnZ2VzdGlvbnNTdXBwbGllcigpKTtcbiJdLCJuYW1lcyI6WyJvcHRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/module.tsx\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/palettes.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   colorSchemes: () => (/* binding */ colorSchemes),\n/* harmony export */   quantizeScheme: () => (/* binding */ quantizeScheme)\n/* harmony export */ });\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/d3-npm-7.8.5-5db20a5616-e407e79731.zip/node_modules/d3/src/index.js\");\n/* harmony import */ var d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/cache/d3-scale-chromatic-npm-3.0.0-ca3b48a3cb-a8ce4cb026.zip/node_modules/d3-scale-chromatic/src/index.js\");\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/tinycolor2-npm-1.6.0-8df41252c6-6df4d07fce.zip/node_modules/tinycolor2/esm/tinycolor.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/types.ts\");\n\n\n\n\n\nconst colorSchemes = [\n  // Diverging\n  { name: \"BrBG\", invert: \"always\" },\n  { name: \"PiYG\", invert: \"always\" },\n  { name: \"PRGn\", invert: \"always\" },\n  { name: \"PuOr\", invert: \"always\" },\n  { name: \"RdBu\", invert: \"always\" },\n  { name: \"RdGy\", invert: \"always\" },\n  { name: \"RdYlBu\", invert: \"always\" },\n  { name: \"RdYlGn\", invert: \"always\" },\n  { name: \"Spectral\", invert: \"always\" },\n  // Sequential (Single Hue)\n  { name: \"Blues\", invert: \"dark\" },\n  { name: \"Greens\", invert: \"dark\" },\n  { name: \"Greys\", invert: \"dark\" },\n  { name: \"Oranges\", invert: \"dark\" },\n  { name: \"Purples\", invert: \"dark\" },\n  { name: \"Reds\", invert: \"dark\" },\n  // Sequential (Multi-Hue)\n  { name: \"Turbo\", invert: \"light\" },\n  { name: \"Cividis\", invert: \"light\" },\n  { name: \"Viridis\", invert: \"light\" },\n  { name: \"Magma\", invert: \"light\" },\n  { name: \"Inferno\", invert: \"light\" },\n  { name: \"Plasma\", invert: \"light\" },\n  { name: \"Warm\", invert: \"light\" },\n  { name: \"Cool\", invert: \"light\" },\n  { name: \"Cubehelix\", invert: \"light\", name2: \"CubehelixDefault\" },\n  { name: \"BuGn\", invert: \"dark\" },\n  { name: \"BuPu\", invert: \"dark\" },\n  { name: \"GnBu\", invert: \"dark\" },\n  { name: \"OrRd\", invert: \"dark\" },\n  { name: \"PuBuGn\", invert: \"dark\" },\n  { name: \"PuBu\", invert: \"dark\" },\n  { name: \"PuRd\", invert: \"dark\" },\n  { name: \"RdPu\", invert: \"dark\" },\n  { name: \"YlGnBu\", invert: \"dark\" },\n  { name: \"YlGn\", invert: \"dark\" },\n  { name: \"YlOrBr\", invert: \"dark\" },\n  { name: \"YlOrRd\", invert: \"dark\" },\n  // Cyclical\n  { name: \"Rainbow\", invert: \"always\" },\n  { name: \"Sinebow\", invert: \"always\" }\n];\nconst DEFAULT_SCHEME = colorSchemes.find((scheme) => scheme.name === \"Spectral\");\nfunction quantizeScheme(opts, theme) {\n  const options = { ..._types__WEBPACK_IMPORTED_MODULE_2__.defaultOptions.color, ...opts };\n  const palette = [];\n  const steps = (options.steps ?? 128) - 1;\n  if (opts.mode === _types__WEBPACK_IMPORTED_MODULE_2__.HeatmapColorMode.Opacity) {\n    const fill = (0,tinycolor2__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(theme.visualization.getColorByName(opts.fill)).toPercentageRgb();\n    const scale = options.scale === _types__WEBPACK_IMPORTED_MODULE_2__.HeatmapColorScale.Exponential ? d3__WEBPACK_IMPORTED_MODULE_0__.scalePow().exponent(options.exponent).domain([0, 1]).range([0, 1]) : d3__WEBPACK_IMPORTED_MODULE_0__.scaleLinear().domain([0, 1]).range([0, 1]);\n    for (let i = 0; i <= steps; i++) {\n      fill.a = scale(i / steps);\n      palette.push((0,tinycolor2__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(fill).toString(\"hex8\"));\n    }\n  } else {\n    const scheme = colorSchemes.find((scheme2) => scheme2.name === options.scheme) ?? DEFAULT_SCHEME;\n    let fnName = \"interpolate\" + (scheme.name2 ?? scheme.name);\n    const interpolate = d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_3__[fnName];\n    for (let i = 0; i <= steps; i++) {\n      let rgbStr = interpolate(i / steps);\n      let rgb = rgbStr.indexOf(\"rgb\") === 0 ? \"#\" + [...rgbStr.matchAll(/\\d+/g)].map((v) => (+v[0]).toString(16).padStart(2, \"0\")).join(\"\") : rgbStr;\n      palette.push(rgb);\n    }\n    if (scheme.invert === \"always\" || scheme.invert === \"dark\" && theme.isDark || scheme.invert === \"light\" && theme.isLight) {\n      palette.reverse();\n    }\n    if (opts.reverse) {\n      palette.reverse();\n    }\n  }\n  return palette;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC9wYWxldHRlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW9CO0FBQ2M7QUFDWjtBQUltRTtBQVNsRixNQUFNLGVBQWU7QUFBQTtBQUFBLEVBRTFCLEVBQUUsTUFBTSxRQUFRLFFBQVEsU0FBUztBQUFBLEVBQ2pDLEVBQUUsTUFBTSxRQUFRLFFBQVEsU0FBUztBQUFBLEVBQ2pDLEVBQUUsTUFBTSxRQUFRLFFBQVEsU0FBUztBQUFBLEVBQ2pDLEVBQUUsTUFBTSxRQUFRLFFBQVEsU0FBUztBQUFBLEVBQ2pDLEVBQUUsTUFBTSxRQUFRLFFBQVEsU0FBUztBQUFBLEVBQ2pDLEVBQUUsTUFBTSxRQUFRLFFBQVEsU0FBUztBQUFBLEVBQ2pDLEVBQUUsTUFBTSxVQUFVLFFBQVEsU0FBUztBQUFBLEVBQ25DLEVBQUUsTUFBTSxVQUFVLFFBQVEsU0FBUztBQUFBLEVBQ25DLEVBQUUsTUFBTSxZQUFZLFFBQVEsU0FBUztBQUFBO0FBQUEsRUFHckMsRUFBRSxNQUFNLFNBQVMsUUFBUSxPQUFPO0FBQUEsRUFDaEMsRUFBRSxNQUFNLFVBQVUsUUFBUSxPQUFPO0FBQUEsRUFDakMsRUFBRSxNQUFNLFNBQVMsUUFBUSxPQUFPO0FBQUEsRUFDaEMsRUFBRSxNQUFNLFdBQVcsUUFBUSxPQUFPO0FBQUEsRUFDbEMsRUFBRSxNQUFNLFdBQVcsUUFBUSxPQUFPO0FBQUEsRUFDbEMsRUFBRSxNQUFNLFFBQVEsUUFBUSxPQUFPO0FBQUE7QUFBQSxFQUcvQixFQUFFLE1BQU0sU0FBUyxRQUFRLFFBQVE7QUFBQSxFQUNqQyxFQUFFLE1BQU0sV0FBVyxRQUFRLFFBQVE7QUFBQSxFQUNuQyxFQUFFLE1BQU0sV0FBVyxRQUFRLFFBQVE7QUFBQSxFQUNuQyxFQUFFLE1BQU0sU0FBUyxRQUFRLFFBQVE7QUFBQSxFQUNqQyxFQUFFLE1BQU0sV0FBVyxRQUFRLFFBQVE7QUFBQSxFQUNuQyxFQUFFLE1BQU0sVUFBVSxRQUFRLFFBQVE7QUFBQSxFQUNsQyxFQUFFLE1BQU0sUUFBUSxRQUFRLFFBQVE7QUFBQSxFQUNoQyxFQUFFLE1BQU0sUUFBUSxRQUFRLFFBQVE7QUFBQSxFQUNoQyxFQUFFLE1BQU0sYUFBYSxRQUFRLFNBQVMsT0FBTyxtQkFBbUI7QUFBQSxFQUNoRSxFQUFFLE1BQU0sUUFBUSxRQUFRLE9BQU87QUFBQSxFQUMvQixFQUFFLE1BQU0sUUFBUSxRQUFRLE9BQU87QUFBQSxFQUMvQixFQUFFLE1BQU0sUUFBUSxRQUFRLE9BQU87QUFBQSxFQUMvQixFQUFFLE1BQU0sUUFBUSxRQUFRLE9BQU87QUFBQSxFQUMvQixFQUFFLE1BQU0sVUFBVSxRQUFRLE9BQU87QUFBQSxFQUNqQyxFQUFFLE1BQU0sUUFBUSxRQUFRLE9BQU87QUFBQSxFQUMvQixFQUFFLE1BQU0sUUFBUSxRQUFRLE9BQU87QUFBQSxFQUMvQixFQUFFLE1BQU0sUUFBUSxRQUFRLE9BQU87QUFBQSxFQUMvQixFQUFFLE1BQU0sVUFBVSxRQUFRLE9BQU87QUFBQSxFQUNqQyxFQUFFLE1BQU0sUUFBUSxRQUFRLE9BQU87QUFBQSxFQUMvQixFQUFFLE1BQU0sVUFBVSxRQUFRLE9BQU87QUFBQSxFQUNqQyxFQUFFLE1BQU0sVUFBVSxRQUFRLE9BQU87QUFBQTtBQUFBLEVBR2pDLEVBQUUsTUFBTSxXQUFXLFFBQVEsU0FBUztBQUFBLEVBQ3BDLEVBQUUsTUFBTSxXQUFXLFFBQVEsU0FBUztBQUN0QztBQUlBLE1BQU0saUJBQWlCLGFBQWEsS0FBSyxDQUFDLFdBQVcsT0FBTyxTQUFTLFVBQVU7QUFFeEUsU0FBUyxlQUFlLE1BQTJCLE9BQWdDO0FBQ3hGLFFBQU0sVUFBVSxFQUFFLEdBQUcsa0RBQWMsQ0FBQyxPQUFPLEdBQUcsS0FBSztBQUNuRCxRQUFNLFVBQVUsQ0FBQztBQUNqQixRQUFNLFNBQVMsUUFBUSxTQUFTLE9BQU87QUFFdkMsTUFBSSxLQUFLLFNBQVMsb0RBQWdCLENBQUMsU0FBUztBQUMxQyxVQUFNLE9BQU8sc0RBQVMsQ0FBQyxNQUFNLGNBQWMsZUFBZSxLQUFLLElBQUksQ0FBQyxFQUFFLGdCQUFnQjtBQUV0RixVQUFNLFFBQ0osUUFBUSxVQUFVLHFEQUFpQixDQUFDLGNBQ2hDLHdDQUFXLENBQUMsRUFBRSxTQUFTLFFBQVEsUUFBUSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUNwRSwyQ0FBYyxDQUFDLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRWxELGFBQVMsSUFBSSxHQUFHLEtBQUssT0FBTyxLQUFLO0FBQy9CLFdBQUssSUFBSSxNQUFNLElBQUksS0FBSztBQUN4QixjQUFRLEtBQUssc0RBQVMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxNQUFNLENBQUM7QUFBQSxJQUMvQztBQUFBLEVBQ0YsT0FBTztBQUNMLFVBQU0sU0FBUyxhQUFhLEtBQUssQ0FBQ0EsWUFBV0EsUUFBTyxTQUFTLFFBQVEsTUFBTSxLQUFLO0FBQ2hGLFFBQUksU0FBUyxpQkFBaUIsT0FBTyxTQUFTLE9BQU87QUFDckQsVUFBTSxjQUE2QiwrQ0FBZ0IsQ0FBUyxNQUFNO0FBRWxFLGFBQVMsSUFBSSxHQUFHLEtBQUssT0FBTyxLQUFLO0FBQy9CLFVBQUksU0FBUyxZQUFZLElBQUksS0FBSztBQUNsQyxVQUFJLE1BQ0YsT0FBTyxRQUFRLEtBQUssTUFBTSxJQUN0QixNQUFNLENBQUMsR0FBRyxPQUFPLFNBQVMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLEVBQUUsRUFBRSxTQUFTLEdBQUcsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQzVGO0FBQ04sY0FBUSxLQUFLLEdBQUc7QUFBQSxJQUNsQjtBQUVBLFFBQ0UsT0FBTyxXQUFXLFlBQ2pCLE9BQU8sV0FBVyxVQUFVLE1BQU0sVUFDbEMsT0FBTyxXQUFXLFdBQVcsTUFBTSxTQUNwQztBQUNBLGNBQVEsUUFBUTtBQUFBLElBQ2xCO0FBRUEsUUFBSSxLQUFLLFNBQVM7QUFDaEIsY0FBUSxRQUFRO0FBQUEsSUFDbEI7QUFBQSxFQUNGO0FBRUEsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9wYW5lbC9oZWF0bWFwL3BhbGV0dGVzLnRzPzM3MmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0ICogYXMgZDNTY2FsZUNocm9tYXRpYyBmcm9tICdkMy1zY2FsZS1jaHJvbWF0aWMnO1xuaW1wb3J0IHRpbnljb2xvciBmcm9tICd0aW55Y29sb3IyJztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuXG5pbXBvcnQgeyBIZWF0bWFwQ29sb3JPcHRpb25zLCBkZWZhdWx0T3B0aW9ucywgSGVhdG1hcENvbG9yTW9kZSwgSGVhdG1hcENvbG9yU2NhbGUgfSBmcm9tICcuL3R5cGVzJztcblxuLy8gaHR0cHM6Ly9vYnNlcnZhYmxlaHEuY29tL0BkMy9jb2xvci1zY2hlbWVzP2NvbGxlY3Rpb249QGQzL2QzLXNjYWxlLWNocm9tYXRpY1xuXG4vLyB0aGUgcHJldmlvdXMgaGVhdG1hcCBwYW5lbCB1c2VkIGQzIGRlcHMgYW5kIHNvbWUgY29kZSB0byBpbnRlcnBvbGF0ZSB0byBzdGF0aWMgOS1jb2xvciBwYWxldHRlcy4gaGVyZSB3ZSBqdXN0IGhhcmQtY29kZSB0aGVtIGZvciBjbGFyaXR5LlxuLy8gaWYgdGhlIG5lZWQgYXJpc2VzIGZvciBjb25maWd1cmFibGUtc2l6ZWQgcGFsZXR0ZXMsIHdlIGNhbiBicmluZyBiYWNrIHRoZSBkZXBzICYgdmFyaWFibGUgaW50ZXJwb2xhdGlvbiAoc2VlIHNpbXBsaWZpZWQgY29kZSBhdCBlbmQpXG5cbi8vIFNjaGVtZXMgZnJvbSBkMy1zY2FsZS1jaHJvbWF0aWNcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kMy9kMy1zY2FsZS1jaHJvbWF0aWNcbmV4cG9ydCBjb25zdCBjb2xvclNjaGVtZXMgPSBbXG4gIC8vIERpdmVyZ2luZ1xuICB7IG5hbWU6ICdCckJHJywgaW52ZXJ0OiAnYWx3YXlzJyB9LFxuICB7IG5hbWU6ICdQaVlHJywgaW52ZXJ0OiAnYWx3YXlzJyB9LFxuICB7IG5hbWU6ICdQUkduJywgaW52ZXJ0OiAnYWx3YXlzJyB9LFxuICB7IG5hbWU6ICdQdU9yJywgaW52ZXJ0OiAnYWx3YXlzJyB9LFxuICB7IG5hbWU6ICdSZEJ1JywgaW52ZXJ0OiAnYWx3YXlzJyB9LFxuICB7IG5hbWU6ICdSZEd5JywgaW52ZXJ0OiAnYWx3YXlzJyB9LFxuICB7IG5hbWU6ICdSZFlsQnUnLCBpbnZlcnQ6ICdhbHdheXMnIH0sXG4gIHsgbmFtZTogJ1JkWWxHbicsIGludmVydDogJ2Fsd2F5cycgfSxcbiAgeyBuYW1lOiAnU3BlY3RyYWwnLCBpbnZlcnQ6ICdhbHdheXMnIH0sXG5cbiAgLy8gU2VxdWVudGlhbCAoU2luZ2xlIEh1ZSlcbiAgeyBuYW1lOiAnQmx1ZXMnLCBpbnZlcnQ6ICdkYXJrJyB9LFxuICB7IG5hbWU6ICdHcmVlbnMnLCBpbnZlcnQ6ICdkYXJrJyB9LFxuICB7IG5hbWU6ICdHcmV5cycsIGludmVydDogJ2RhcmsnIH0sXG4gIHsgbmFtZTogJ09yYW5nZXMnLCBpbnZlcnQ6ICdkYXJrJyB9LFxuICB7IG5hbWU6ICdQdXJwbGVzJywgaW52ZXJ0OiAnZGFyaycgfSxcbiAgeyBuYW1lOiAnUmVkcycsIGludmVydDogJ2RhcmsnIH0sXG5cbiAgLy8gU2VxdWVudGlhbCAoTXVsdGktSHVlKVxuICB7IG5hbWU6ICdUdXJibycsIGludmVydDogJ2xpZ2h0JyB9LFxuICB7IG5hbWU6ICdDaXZpZGlzJywgaW52ZXJ0OiAnbGlnaHQnIH0sXG4gIHsgbmFtZTogJ1ZpcmlkaXMnLCBpbnZlcnQ6ICdsaWdodCcgfSxcbiAgeyBuYW1lOiAnTWFnbWEnLCBpbnZlcnQ6ICdsaWdodCcgfSxcbiAgeyBuYW1lOiAnSW5mZXJubycsIGludmVydDogJ2xpZ2h0JyB9LFxuICB7IG5hbWU6ICdQbGFzbWEnLCBpbnZlcnQ6ICdsaWdodCcgfSxcbiAgeyBuYW1lOiAnV2FybScsIGludmVydDogJ2xpZ2h0JyB9LFxuICB7IG5hbWU6ICdDb29sJywgaW52ZXJ0OiAnbGlnaHQnIH0sXG4gIHsgbmFtZTogJ0N1YmVoZWxpeCcsIGludmVydDogJ2xpZ2h0JywgbmFtZTI6ICdDdWJlaGVsaXhEZWZhdWx0JyB9LFxuICB7IG5hbWU6ICdCdUduJywgaW52ZXJ0OiAnZGFyaycgfSxcbiAgeyBuYW1lOiAnQnVQdScsIGludmVydDogJ2RhcmsnIH0sXG4gIHsgbmFtZTogJ0duQnUnLCBpbnZlcnQ6ICdkYXJrJyB9LFxuICB7IG5hbWU6ICdPclJkJywgaW52ZXJ0OiAnZGFyaycgfSxcbiAgeyBuYW1lOiAnUHVCdUduJywgaW52ZXJ0OiAnZGFyaycgfSxcbiAgeyBuYW1lOiAnUHVCdScsIGludmVydDogJ2RhcmsnIH0sXG4gIHsgbmFtZTogJ1B1UmQnLCBpbnZlcnQ6ICdkYXJrJyB9LFxuICB7IG5hbWU6ICdSZFB1JywgaW52ZXJ0OiAnZGFyaycgfSxcbiAgeyBuYW1lOiAnWWxHbkJ1JywgaW52ZXJ0OiAnZGFyaycgfSxcbiAgeyBuYW1lOiAnWWxHbicsIGludmVydDogJ2RhcmsnIH0sXG4gIHsgbmFtZTogJ1lsT3JCcicsIGludmVydDogJ2RhcmsnIH0sXG4gIHsgbmFtZTogJ1lsT3JSZCcsIGludmVydDogJ2RhcmsnIH0sXG5cbiAgLy8gQ3ljbGljYWxcbiAgeyBuYW1lOiAnUmFpbmJvdycsIGludmVydDogJ2Fsd2F5cycgfSxcbiAgeyBuYW1lOiAnU2luZWJvdycsIGludmVydDogJ2Fsd2F5cycgfSxcbl07XG5cbnR5cGUgSW50ZXJwb2xhdG9yID0gKHQ6IG51bWJlcikgPT4gc3RyaW5nO1xuXG5jb25zdCBERUZBVUxUX1NDSEVNRSA9IGNvbG9yU2NoZW1lcy5maW5kKChzY2hlbWUpID0+IHNjaGVtZS5uYW1lID09PSAnU3BlY3RyYWwnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplU2NoZW1lKG9wdHM6IEhlYXRtYXBDb2xvck9wdGlvbnMsIHRoZW1lOiBHcmFmYW5hVGhlbWUyKTogc3RyaW5nW10ge1xuICBjb25zdCBvcHRpb25zID0geyAuLi5kZWZhdWx0T3B0aW9ucy5jb2xvciwgLi4ub3B0cyB9O1xuICBjb25zdCBwYWxldHRlID0gW107XG4gIGNvbnN0IHN0ZXBzID0gKG9wdGlvbnMuc3RlcHMgPz8gMTI4KSAtIDE7XG5cbiAgaWYgKG9wdHMubW9kZSA9PT0gSGVhdG1hcENvbG9yTW9kZS5PcGFjaXR5KSB7XG4gICAgY29uc3QgZmlsbCA9IHRpbnljb2xvcih0aGVtZS52aXN1YWxpemF0aW9uLmdldENvbG9yQnlOYW1lKG9wdHMuZmlsbCkpLnRvUGVyY2VudGFnZVJnYigpO1xuXG4gICAgY29uc3Qgc2NhbGUgPVxuICAgICAgb3B0aW9ucy5zY2FsZSA9PT0gSGVhdG1hcENvbG9yU2NhbGUuRXhwb25lbnRpYWxcbiAgICAgICAgPyBkMy5zY2FsZVBvdygpLmV4cG9uZW50KG9wdGlvbnMuZXhwb25lbnQpLmRvbWFpbihbMCwgMV0pLnJhbmdlKFswLCAxXSlcbiAgICAgICAgOiBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMV0pLnJhbmdlKFswLCAxXSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzdGVwczsgaSsrKSB7XG4gICAgICBmaWxsLmEgPSBzY2FsZShpIC8gc3RlcHMpO1xuICAgICAgcGFsZXR0ZS5wdXNoKHRpbnljb2xvcihmaWxsKS50b1N0cmluZygnaGV4OCcpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc2NoZW1lID0gY29sb3JTY2hlbWVzLmZpbmQoKHNjaGVtZSkgPT4gc2NoZW1lLm5hbWUgPT09IG9wdGlvbnMuc2NoZW1lKSA/PyBERUZBVUxUX1NDSEVNRSE7XG4gICAgbGV0IGZuTmFtZSA9ICdpbnRlcnBvbGF0ZScgKyAoc2NoZW1lLm5hbWUyID8/IHNjaGVtZS5uYW1lKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZTogSW50ZXJwb2xhdG9yID0gKGQzU2NhbGVDaHJvbWF0aWMgYXMgYW55KVtmbk5hbWVdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc3RlcHM7IGkrKykge1xuICAgICAgbGV0IHJnYlN0ciA9IGludGVycG9sYXRlKGkgLyBzdGVwcyk7XG4gICAgICBsZXQgcmdiID1cbiAgICAgICAgcmdiU3RyLmluZGV4T2YoJ3JnYicpID09PSAwXG4gICAgICAgICAgPyAnIycgKyBbLi4ucmdiU3RyLm1hdGNoQWxsKC9cXGQrL2cpXS5tYXAoKHYpID0+ICgrdlswXSkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpXG4gICAgICAgICAgOiByZ2JTdHI7XG4gICAgICBwYWxldHRlLnB1c2gocmdiKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBzY2hlbWUuaW52ZXJ0ID09PSAnYWx3YXlzJyB8fFxuICAgICAgKHNjaGVtZS5pbnZlcnQgPT09ICdkYXJrJyAmJiB0aGVtZS5pc0RhcmspIHx8XG4gICAgICAoc2NoZW1lLmludmVydCA9PT0gJ2xpZ2h0JyAmJiB0aGVtZS5pc0xpZ2h0KVxuICAgICkge1xuICAgICAgcGFsZXR0ZS5yZXZlcnNlKCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMucmV2ZXJzZSkge1xuICAgICAgcGFsZXR0ZS5yZXZlcnNlKCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhbGV0dGU7XG59XG4iXSwibmFtZXMiOlsic2NoZW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/palettes.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/panelcfg.gen.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HeatmapColorMode: () => (/* binding */ HeatmapColorMode),\n/* harmony export */   HeatmapColorScale: () => (/* binding */ HeatmapColorScale),\n/* harmony export */   defaultOptions: () => (/* binding */ defaultOptions)\n/* harmony export */ });\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n\n\nvar HeatmapColorMode = /* @__PURE__ */ ((HeatmapColorMode2) => {\n  HeatmapColorMode2[\"Opacity\"] = \"opacity\";\n  HeatmapColorMode2[\"Scheme\"] = \"scheme\";\n  return HeatmapColorMode2;\n})(HeatmapColorMode || {});\nvar HeatmapColorScale = /* @__PURE__ */ ((HeatmapColorScale2) => {\n  HeatmapColorScale2[\"Exponential\"] = \"exponential\";\n  HeatmapColorScale2[\"Linear\"] = \"linear\";\n  return HeatmapColorScale2;\n})(HeatmapColorScale || {});\nconst defaultOptions = {\n  calculate: false,\n  cellGap: 1,\n  cellValues: {},\n  color: {\n    /**\n     * mode:     HeatmapColorMode // TODO: fix after remove when https://github.com/grafana/cuetsy/issues/74 is fixed\n     */\n    scheme: \"Oranges\",\n    fill: \"dark-orange\",\n    /**\n     * scale:    HeatmapColorScale // TODO: fix after remove when https://github.com/grafana/cuetsy/issues/74 is fixed\n     */\n    reverse: false,\n    exponent: 0.5,\n    steps: 64\n  },\n  exemplars: {\n    color: \"rgba(255,0,255,0.7)\"\n  },\n  filterValues: {\n    le: 1e-9\n  },\n  legend: {\n    show: true\n  },\n  showValue: _grafana_schema__WEBPACK_IMPORTED_MODULE_0__.VisibilityMode.Auto,\n  tooltip: {\n    show: true,\n    yHistogram: false\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC9wYW5lbGNmZy5nZW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFVb0I7QUFLYixJQUFLLG1CQUFMLGtCQUFLQSxzQkFBTDtBQUNMLEVBQUFBLGtCQUFBLGFBQVU7QUFDVixFQUFBQSxrQkFBQSxZQUFTO0FBRkMsU0FBQUE7QUFBQTtBQVFMLElBQUssb0JBQUwsa0JBQUtDLHVCQUFMO0FBQ0wsRUFBQUEsbUJBQUEsaUJBQWM7QUFDZCxFQUFBQSxtQkFBQSxZQUFTO0FBRkMsU0FBQUE7QUFBQTtBQWtOTCxNQUFNLGlCQUFtQztBQUFBLEVBQzlDLFdBQVc7QUFBQSxFQUNYLFNBQVM7QUFBQSxFQUNULFlBQVksQ0FBQztBQUFBLEVBQ2IsT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBLElBSUwsUUFBUTtBQUFBLElBQ1IsTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBSU4sU0FBUztBQUFBLElBQ1QsVUFBVTtBQUFBLElBQ1YsT0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUNBLFdBQVc7QUFBQSxJQUNULE9BQU87QUFBQSxFQUNUO0FBQUEsRUFDQSxjQUFjO0FBQUEsSUFDWixJQUFJO0FBQUEsRUFDTjtBQUFBLEVBQ0EsUUFBUTtBQUFBLElBQ04sTUFBTTtBQUFBLEVBQ1I7QUFBQSxFQUNBLFdBQVcsMkRBQWlCLENBQUM7QUFBQSxFQUM3QixTQUFTO0FBQUEsSUFDUCxNQUFNO0FBQUEsSUFDTixZQUFZO0FBQUEsRUFDZDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9wYW5lbC9oZWF0bWFwL3BhbmVsY2ZnLmdlbi50cz81N2ZiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvZGUgZ2VuZXJhdGVkIC0gRURJVElORyBJUyBGVVRJTEUuIERPIE5PVCBFRElULlxuLy9cbi8vIEdlbmVyYXRlZCBieTpcbi8vICAgICBwdWJsaWMvYXBwL3BsdWdpbnMvZ2VuLmdvXG4vLyBVc2luZyBqZW5uaWVzOlxuLy8gICAgIFRTVHlwZXNKZW5ueVxuLy8gICAgIFBsdWdpblRTVHlwZXNKZW5ueVxuLy9cbi8vIFJ1biAnbWFrZSBnZW4tY3VlJyBmcm9tIHJlcG9zaXRvcnkgcm9vdCB0byByZWdlbmVyYXRlLlxuXG5pbXBvcnQgKiBhcyB1aSBmcm9tICdAZ3JhZmFuYS9zY2hlbWEnO1xuXG4vKipcbiAqIENvbnRyb2xzIHRoZSBjb2xvciBtb2RlIG9mIHRoZSBoZWF0bWFwXG4gKi9cbmV4cG9ydCBlbnVtIEhlYXRtYXBDb2xvck1vZGUge1xuICBPcGFjaXR5ID0gJ29wYWNpdHknLFxuICBTY2hlbWUgPSAnc2NoZW1lJyxcbn1cblxuLyoqXG4gKiBDb250cm9scyB0aGUgY29sb3Igc2NhbGUgb2YgdGhlIGhlYXRtYXBcbiAqL1xuZXhwb3J0IGVudW0gSGVhdG1hcENvbG9yU2NhbGUge1xuICBFeHBvbmVudGlhbCA9ICdleHBvbmVudGlhbCcsXG4gIExpbmVhciA9ICdsaW5lYXInLFxufVxuXG4vKipcbiAqIENvbnRyb2xzIHZhcmlvdXMgY29sb3Igb3B0aW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEhlYXRtYXBDb2xvck9wdGlvbnMge1xuICAvKipcbiAgICogQ29udHJvbHMgdGhlIGV4cG9uZW50IHdoZW4gc2NhbGUgaXMgc2V0IHRvIGV4cG9uZW50aWFsXG4gICAqL1xuICBleHBvbmVudDogbnVtYmVyO1xuICAvKipcbiAgICogQ29udHJvbHMgdGhlIGNvbG9yIGZpbGwgd2hlbiBpbiBvcGFjaXR5IG1vZGVcbiAgICovXG4gIGZpbGw6IHN0cmluZztcbiAgLyoqXG4gICAqIFNldHMgdGhlIG1heGltdW0gdmFsdWUgZm9yIHRoZSBjb2xvciBzY2FsZVxuICAgKi9cbiAgbWF4PzogbnVtYmVyO1xuICAvKipcbiAgICogU2V0cyB0aGUgbWluaW11bSB2YWx1ZSBmb3IgdGhlIGNvbG9yIHNjYWxlXG4gICAqL1xuICBtaW4/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb2xvciBtb2RlXG4gICAqL1xuICBtb2RlPzogSGVhdG1hcENvbG9yTW9kZTtcbiAgLyoqXG4gICAqIFJldmVyc2VzIHRoZSBjb2xvciBzY2hlbWVcbiAgICovXG4gIHJldmVyc2U6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBDb250cm9scyB0aGUgY29sb3Igc2NhbGVcbiAgICovXG4gIHNjYWxlPzogSGVhdG1hcENvbG9yU2NhbGU7XG4gIC8qKlxuICAgKiBDb250cm9scyB0aGUgY29sb3Igc2NoZW1lIHVzZWRcbiAgICovXG4gIHNjaGVtZTogc3RyaW5nO1xuICAvKipcbiAgICogQ29udHJvbHMgdGhlIG51bWJlciBvZiBjb2xvciBzdGVwc1xuICAgKi9cbiAgc3RlcHM6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSB5QXhpc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFlBeGlzQ29uZmlnIGV4dGVuZHMgdWkuQXhpc0NvbmZpZyB7XG4gIC8qKlxuICAgKiBDb250cm9scyB0aGUgbnVtYmVyIG9mIGRlY2ltYWxzIGZvciB5QXhpcyB2YWx1ZXNcbiAgICovXG4gIGRlY2ltYWxzPzogbnVtYmVyO1xuICAvKipcbiAgICogU2V0cyB0aGUgbWF4aW11bSB2YWx1ZSBmb3IgdGhlIHlBeGlzXG4gICAqL1xuICBtYXg/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtaW5pbXVtIHZhbHVlIGZvciB0aGUgeUF4aXNcbiAgICovXG4gIG1pbj86IG51bWJlcjtcbiAgLyoqXG4gICAqIFJldmVyc2VzIHRoZSB5QXhpc1xuICAgKi9cbiAgcmV2ZXJzZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBTZXRzIHRoZSB5QXhpcyB1bml0XG4gICAqL1xuICB1bml0Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqIENvbnRyb2xzIGNlbGwgdmFsdWUgb3B0aW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENlbGxWYWx1ZXMge1xuICAvKipcbiAgICogQ29udHJvbHMgdGhlIG51bWJlciBvZiBkZWNpbWFscyBmb3IgY2VsbCB2YWx1ZXNcbiAgICovXG4gIGRlY2ltYWxzPzogbnVtYmVyO1xuICAvKipcbiAgICogQ29udHJvbHMgdGhlIGNlbGwgdmFsdWUgdW5pdFxuICAgKi9cbiAgdW5pdD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBDb250cm9scyB0aGUgdmFsdWUgZmlsdGVyIHJhbmdlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyVmFsdWVSYW5nZSB7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBmaWx0ZXIgcmFuZ2UgdG8gdmFsdWVzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gdmFsdWVcbiAgICovXG4gIGdlPzogbnVtYmVyO1xuICAvKipcbiAgICogU2V0cyB0aGUgZmlsdGVyIHJhbmdlIHRvIHZhbHVlcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIHZhbHVlXG4gICAqL1xuICBsZT86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBDb250cm9scyB0b29sdGlwIG9wdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBIZWF0bWFwVG9vbHRpcCB7XG4gIC8qKlxuICAgKiBDb250cm9scyBpZiB0aGUgdG9vbHRpcCBpcyBzaG93blxuICAgKi9cbiAgc2hvdzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIENvbnRyb2xzIGlmIHRoZSB0b29sdGlwIHNob3dzIGEgaGlzdG9ncmFtIG9mIHRoZSB5LWF4aXMgdmFsdWVzXG4gICAqL1xuICB5SGlzdG9ncmFtPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBDb250cm9scyBsZWdlbmQgb3B0aW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEhlYXRtYXBMZWdlbmQge1xuICAvKipcbiAgICogQ29udHJvbHMgaWYgdGhlIGxlZ2VuZCBpcyBzaG93blxuICAgKi9cbiAgc2hvdzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBDb250cm9scyBleGVtcGxhciBvcHRpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXhlbXBsYXJDb25maWcge1xuICAvKipcbiAgICogU2V0cyB0aGUgY29sb3Igb2YgdGhlIGV4ZW1wbGFyIG1hcmtlcnNcbiAgICovXG4gIGNvbG9yOiBzdHJpbmc7XG59XG5cbi8qKlxuICogQ29udHJvbHMgZnJhbWUgcm93cyBvcHRpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUm93c0hlYXRtYXBPcHRpb25zIHtcbiAgLyoqXG4gICAqIENvbnRyb2xzIHRpY2sgYWxpZ25tZW50IHdoZW4gbm90IGNhbGN1bGF0aW5nIGZyb20gZGF0YVxuICAgKi9cbiAgbGF5b3V0PzogdWkuSGVhdG1hcENlbGxMYXlvdXQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBuYW1lIG9mIHRoZSBjZWxsIHdoZW4gbm90IGNhbGN1bGF0aW5nIGZyb20gZGF0YVxuICAgKi9cbiAgdmFsdWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBDb250cm9scyBpZiB0aGUgaGVhdG1hcCBzaG91bGQgYmUgY2FsY3VsYXRlZCBmcm9tIGRhdGFcbiAgICovXG4gIGNhbGN1bGF0ZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBDYWxjdWxhdGlvbiBvcHRpb25zIGZvciB0aGUgaGVhdG1hcFxuICAgKi9cbiAgY2FsY3VsYXRpb24/OiB1aS5IZWF0bWFwQ2FsY3VsYXRpb25PcHRpb25zO1xuICAvKipcbiAgICogQ29udHJvbHMgZ2FwIGJldHdlZW4gY2VsbHNcbiAgICovXG4gIGNlbGxHYXA/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBDb250cm9scyBjZWxsIHJhZGl1c1xuICAgKi9cbiAgY2VsbFJhZGl1cz86IG51bWJlcjtcbiAgLyoqXG4gICAqIENvbnRyb2xzIGNlbGwgdmFsdWUgdW5pdFxuICAgKi9cbiAgY2VsbFZhbHVlcz86IENlbGxWYWx1ZXM7XG4gIC8qKlxuICAgKiBDb250cm9scyB0aGUgY29sb3Igb3B0aW9uc1xuICAgKi9cbiAgY29sb3I6IEhlYXRtYXBDb2xvck9wdGlvbnM7XG4gIC8qKlxuICAgKiBDb250cm9scyBleGVtcGxhciBvcHRpb25zXG4gICAqL1xuICBleGVtcGxhcnM6IEV4ZW1wbGFyQ29uZmlnO1xuICAvKipcbiAgICogRmlsdGVycyB2YWx1ZXMgYmV0d2VlbiBhIGdpdmVuIHJhbmdlXG4gICAqL1xuICBmaWx0ZXJWYWx1ZXM/OiBGaWx0ZXJWYWx1ZVJhbmdlO1xuICAvKipcbiAgICogfCAqe1xuICAgKiBcdGF4aXNQbGFjZW1lbnQ6IHVpLkF4aXNQbGFjZW1lbnQgJiBcImxlZnRcIiAvLyBUT0RPOiBmaXggYWZ0ZXIgcmVtb3ZlIHdoZW4gaHR0cHM6Ly9naXRodWIuY29tL2dyYWZhbmEvY3VldHN5L2lzc3Vlcy83NCBpcyBmaXhlZFxuICAgKiB9XG4gICAqIENvbnRyb2xzIGxlZ2VuZCBvcHRpb25zXG4gICAqL1xuICBsZWdlbmQ6IEhlYXRtYXBMZWdlbmQ7XG4gIC8qKlxuICAgKiBDb250cm9scyB0aWNrIGFsaWdubWVudCBhbmQgdmFsdWUgbmFtZSB3aGVuIG5vdCBjYWxjdWxhdGluZyBmcm9tIGRhdGFcbiAgICovXG4gIHJvd3NGcmFtZT86IFJvd3NIZWF0bWFwT3B0aW9ucztcbiAgLyoqXG4gICAqIHwgKntcbiAgICogXHRsYXlvdXQ6IHVpLkhlYXRtYXBDZWxsTGF5b3V0ICYgXCJhdXRvXCIgLy8gVE9ETzogZml4IGFmdGVyIHJlbW92ZSB3aGVuIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFmYW5hL2N1ZXRzeS9pc3N1ZXMvNzQgaXMgZml4ZWRcbiAgICogfVxuICAgKiBDb250cm9scyB0aGUgZGlzcGxheSBvZiB0aGUgdmFsdWUgaW4gdGhlIGNlbGxcbiAgICovXG4gIHNob3dWYWx1ZTogdWkuVmlzaWJpbGl0eU1vZGU7XG4gIC8qKlxuICAgKiBDb250cm9scyB0b29sdGlwIG9wdGlvbnNcbiAgICovXG4gIHRvb2x0aXA6IEhlYXRtYXBUb29sdGlwO1xuICAvKipcbiAgICogQ29udHJvbHMgeUF4aXMgcGxhY2VtZW50XG4gICAqL1xuICB5QXhpczogWUF4aXNDb25maWc7XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0T3B0aW9uczogUGFydGlhbDxPcHRpb25zPiA9IHtcbiAgY2FsY3VsYXRlOiBmYWxzZSxcbiAgY2VsbEdhcDogMSxcbiAgY2VsbFZhbHVlczoge30sXG4gIGNvbG9yOiB7XG4gICAgLyoqXG4gICAgICogbW9kZTogICAgIEhlYXRtYXBDb2xvck1vZGUgLy8gVE9ETzogZml4IGFmdGVyIHJlbW92ZSB3aGVuIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFmYW5hL2N1ZXRzeS9pc3N1ZXMvNzQgaXMgZml4ZWRcbiAgICAgKi9cbiAgICBzY2hlbWU6ICdPcmFuZ2VzJyxcbiAgICBmaWxsOiAnZGFyay1vcmFuZ2UnLFxuICAgIC8qKlxuICAgICAqIHNjYWxlOiAgICBIZWF0bWFwQ29sb3JTY2FsZSAvLyBUT0RPOiBmaXggYWZ0ZXIgcmVtb3ZlIHdoZW4gaHR0cHM6Ly9naXRodWIuY29tL2dyYWZhbmEvY3VldHN5L2lzc3Vlcy83NCBpcyBmaXhlZFxuICAgICAqL1xuICAgIHJldmVyc2U6IGZhbHNlLFxuICAgIGV4cG9uZW50OiAwLjUsXG4gICAgc3RlcHM6IDY0LFxuICB9LFxuICBleGVtcGxhcnM6IHtcbiAgICBjb2xvcjogJ3JnYmEoMjU1LDAsMjU1LDAuNyknLFxuICB9LFxuICBmaWx0ZXJWYWx1ZXM6IHtcbiAgICBsZTogMWUtMDksXG4gIH0sXG4gIGxlZ2VuZDoge1xuICAgIHNob3c6IHRydWUsXG4gIH0sXG4gIHNob3dWYWx1ZTogdWkuVmlzaWJpbGl0eU1vZGUuQXV0byxcbiAgdG9vbHRpcDoge1xuICAgIHNob3c6IHRydWUsXG4gICAgeUhpc3RvZ3JhbTogZmFsc2UsXG4gIH0sXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkQ29uZmlnIGV4dGVuZHMgdWkuSGlkZWFibGVGaWVsZENvbmZpZyB7XG4gIHNjYWxlRGlzdHJpYnV0aW9uPzogdWkuU2NhbGVEaXN0cmlidXRpb25Db25maWc7XG59XG4iXSwibmFtZXMiOlsiSGVhdG1hcENvbG9yTW9kZSIsIkhlYXRtYXBDb2xvclNjYWxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/panelcfg.gen.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/suggestions.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HeatmapSuggestionsSupplier: () => (/* binding */ HeatmapSuggestionsSupplier)\n/* harmony export */ });\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _fields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/fields.ts\");\n/* harmony import */ var _palettes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/palettes.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/types.ts\");\n\n\n\n\n\nclass HeatmapSuggestionsSupplier {\n  getSuggestionsForData(builder) {\n    const { dataSummary } = builder;\n    if (!builder.data?.series || !dataSummary.hasData || dataSummary.timeFieldCount < 1 || dataSummary.numberFieldCount < 2 || dataSummary.numberFieldCount > 10) {\n      return;\n    }\n    const palette = (0,_palettes__WEBPACK_IMPORTED_MODULE_1__.quantizeScheme)(_types__WEBPACK_IMPORTED_MODULE_2__.defaultOptions.color, _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__.config.theme2);\n    const info = (0,_fields__WEBPACK_IMPORTED_MODULE_0__.prepareHeatmapData)(builder.data.series, void 0, _types__WEBPACK_IMPORTED_MODULE_2__.defaultOptions, palette, _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__.config.theme2);\n    if (!info || info.warning) {\n      return;\n    }\n    builder.getListAppender({\n      name: \"\",\n      pluginId: \"heatmap\",\n      options: {},\n      fieldConfig: {\n        defaults: {\n          custom: {}\n        },\n        overrides: []\n      }\n    });\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC9zdWdnZXN0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDdUI7QUFFWTtBQUNKO0FBQ1M7QUFFakMsTUFBTSwyQkFBMkI7QUFBQSxFQUN0QyxzQkFBc0IsU0FBMEM7QUFDOUQsVUFBTSxFQUFFLFlBQVksSUFBSTtBQUV4QixRQUNFLENBQUMsUUFBUSxNQUFNLFVBQ2YsQ0FBQyxZQUFZLFdBQ2IsWUFBWSxpQkFBaUIsS0FDN0IsWUFBWSxtQkFBbUIsS0FDL0IsWUFBWSxtQkFBbUIsSUFDL0I7QUFDQTtBQUFBLElBQ0Y7QUFFQSxVQUFNLFVBQVUseURBQWMsQ0FBQyxrREFBYyxDQUFDLE9BQU8sb0RBQU0sQ0FBQyxNQUFNO0FBQ2xFLFVBQU0sT0FBTywyREFBa0IsQ0FBQyxRQUFRLEtBQUssUUFBUSxRQUFXLGtEQUFjLEVBQUUsU0FBUyxvREFBTSxDQUFDLE1BQU07QUFDdEcsUUFBSSxDQUFDLFFBQVEsS0FBSyxTQUFTO0FBQ3pCO0FBQUEsSUFDRjtBQUVBLFlBQVEsZ0JBQTZCO0FBQUEsTUFDbkMsTUFBTTtBQUFBLE1BQ04sVUFBVTtBQUFBLE1BQ1YsU0FBUyxDQUFDO0FBQUEsTUFDVixhQUFhO0FBQUEsUUFDWCxVQUFVO0FBQUEsVUFDUixRQUFRLENBQUM7QUFBQSxRQUNYO0FBQUEsUUFDQSxXQUFXLENBQUM7QUFBQSxNQUNkO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9wYW5lbC9oZWF0bWFwL3N1Z2dlc3Rpb25zLnRzPzNkNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmlzdWFsaXphdGlvblN1Z2dlc3Rpb25zQnVpbGRlciB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5cbmltcG9ydCB7IHByZXBhcmVIZWF0bWFwRGF0YSB9IGZyb20gJy4vZmllbGRzJztcbmltcG9ydCB7IHF1YW50aXplU2NoZW1lIH0gZnJvbSAnLi9wYWxldHRlcyc7XG5pbXBvcnQgeyBPcHRpb25zLCBkZWZhdWx0T3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgSGVhdG1hcFN1Z2dlc3Rpb25zU3VwcGxpZXIge1xuICBnZXRTdWdnZXN0aW9uc0ZvckRhdGEoYnVpbGRlcjogVmlzdWFsaXphdGlvblN1Z2dlc3Rpb25zQnVpbGRlcikge1xuICAgIGNvbnN0IHsgZGF0YVN1bW1hcnkgfSA9IGJ1aWxkZXI7XG5cbiAgICBpZiAoXG4gICAgICAhYnVpbGRlci5kYXRhPy5zZXJpZXMgfHxcbiAgICAgICFkYXRhU3VtbWFyeS5oYXNEYXRhIHx8XG4gICAgICBkYXRhU3VtbWFyeS50aW1lRmllbGRDb3VudCA8IDEgfHxcbiAgICAgIGRhdGFTdW1tYXJ5Lm51bWJlckZpZWxkQ291bnQgPCAyIHx8XG4gICAgICBkYXRhU3VtbWFyeS5udW1iZXJGaWVsZENvdW50ID4gMTBcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYWxldHRlID0gcXVhbnRpemVTY2hlbWUoZGVmYXVsdE9wdGlvbnMuY29sb3IsIGNvbmZpZy50aGVtZTIpO1xuICAgIGNvbnN0IGluZm8gPSBwcmVwYXJlSGVhdG1hcERhdGEoYnVpbGRlci5kYXRhLnNlcmllcywgdW5kZWZpbmVkLCBkZWZhdWx0T3B0aW9ucywgcGFsZXR0ZSwgY29uZmlnLnRoZW1lMik7XG4gICAgaWYgKCFpbmZvIHx8IGluZm8ud2FybmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGJ1aWxkZXIuZ2V0TGlzdEFwcGVuZGVyPE9wdGlvbnMsIHt9Pih7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIHBsdWdpbklkOiAnaGVhdG1hcCcsXG4gICAgICBvcHRpb25zOiB7fSxcbiAgICAgIGZpZWxkQ29uZmlnOiB7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgY3VzdG9tOiB7fSxcbiAgICAgICAgfSxcbiAgICAgICAgb3ZlcnJpZGVzOiBbXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/suggestions.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/types.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HeatmapColorMode: () => (/* reexport safe */ _panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__.HeatmapColorMode),\n/* harmony export */   HeatmapColorScale: () => (/* reexport safe */ _panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__.HeatmapColorScale),\n/* harmony export */   defaultOptions: () => (/* binding */ defaultOptions)\n/* harmony export */ });\n/* harmony import */ var _panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/panel/heatmap/panelcfg.gen.ts\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n\n\n\n\nconst defaultOptions = {\n  ..._panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__.defaultOptions,\n  color: { ..._panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__.defaultOptions.color, mode: _panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__.HeatmapColorMode.Scheme, scale: _panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__.HeatmapColorScale.Exponential },\n  yAxis: { ..._panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__.defaultOptions.yAxis, axisPlacement: _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.AxisPlacement.Left },\n  rowsFrame: { ..._panelcfg_gen__WEBPACK_IMPORTED_MODULE_0__.defaultOptions.rowsFrame, layout: _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.HeatmapCellLayout.auto }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYztBQUVtQztBQUVpRDtBQUUzRixNQUFNLGlCQUFpQjtBQUFBLEVBQzVCLEdBQUcseURBQWlCO0FBQWpCLEVBQ0gsT0FBTyxFQUFFLEdBQUcseURBQWlCLENBQUMsT0FBTyxNQUFNLDJEQUFnQixDQUFDLFFBQVEsT0FBTyw0REFBaUIsQ0FBQyxZQUFZO0FBQUEsRUFDekcsT0FBTyxFQUFFLEdBQUcseURBQWlCLENBQUMsT0FBTyxlQUFlLDBEQUFhLENBQUMsS0FBSztBQUFBLEVBQ3ZFLFdBQVcsRUFBRSxHQUFHLHlEQUFpQixDQUFDLFdBQVcsUUFBUSw4REFBaUIsQ0FBQyxLQUFLO0FBQzlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9wYW5lbC9oZWF0bWFwL3R5cGVzLnRzPzk0MGUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9wYW5lbGNmZy5nZW4nO1xuXG5pbXBvcnQgeyBBeGlzUGxhY2VtZW50LCBIZWF0bWFwQ2VsbExheW91dCB9IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5cbmltcG9ydCB7IGRlZmF1bHRPcHRpb25zIGFzIGRlZmF1bHRPcHRpb25zR2VuLCBIZWF0bWFwQ29sb3JNb2RlLCBIZWF0bWFwQ29sb3JTY2FsZSwgT3B0aW9ucyB9IGZyb20gJy4vcGFuZWxjZmcuZ2VuJztcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAuLi5kZWZhdWx0T3B0aW9uc0dlbixcbiAgY29sb3I6IHsgLi4uZGVmYXVsdE9wdGlvbnNHZW4uY29sb3IsIG1vZGU6IEhlYXRtYXBDb2xvck1vZGUuU2NoZW1lLCBzY2FsZTogSGVhdG1hcENvbG9yU2NhbGUuRXhwb25lbnRpYWwgfSxcbiAgeUF4aXM6IHsgLi4uZGVmYXVsdE9wdGlvbnNHZW4ueUF4aXMsIGF4aXNQbGFjZW1lbnQ6IEF4aXNQbGFjZW1lbnQuTGVmdCB9LFxuICByb3dzRnJhbWU6IHsgLi4uZGVmYXVsdE9wdGlvbnNHZW4ucm93c0ZyYW1lLCBsYXlvdXQ6IEhlYXRtYXBDZWxsTGF5b3V0LmF1dG8gfSxcbn0gYXMgT3B0aW9ucztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/types.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/heatmap/utils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   boundedMinMax: () => (/* binding */ boundedMinMax),\n/* harmony export */   heatmapPathsDense: () => (/* binding */ heatmapPathsDense),\n/* harmony export */   heatmapPathsPoints: () => (/* binding */ heatmapPathsPoints),\n/* harmony export */   heatmapPathsSparse: () => (/* binding */ heatmapPathsSparse),\n/* harmony export */   prepConfig: () => (/* binding */ prepConfig),\n/* harmony export */   valuesToFills: () => (/* binding */ valuesToFills)\n/* harmony export */ });\n/* harmony import */ var uplot__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/uplot-npm-1.6.24-51171f5ab7-253e389dc6.zip/node_modules/uplot/dist/uPlot.esm.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/common.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrameTypes.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/transformers/histogram.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/valueFormats/valueFormats.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dashboard.ts\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/uPlot/config/UPlotConfigBuilder.ts\");\n/* harmony import */ var app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/features/transformers/calculateHeatmap/heatmap.ts\");\n/* harmony import */ var _barchart_quadtree__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/panel/barchart/quadtree.ts\");\n\n\n\n\n\n\n\nfunction prepConfig(opts) {\n  const {\n    dataRef,\n    theme,\n    eventBus,\n    onhover,\n    onclick,\n    onzoom,\n    isToolTipOpen,\n    timeZone,\n    getTimeRange,\n    cellGap,\n    hideLE,\n    hideGE,\n    yAxisConfig,\n    ySizeDivisor,\n    sync,\n    eventsScope = \"__global_\"\n  } = opts;\n  const xScaleKey = \"x\";\n  let xScaleUnit = \"time\";\n  let isTime = true;\n  if (dataRef.current?.heatmap?.fields[0].type !== _grafana_data__WEBPACK_IMPORTED_MODULE_3__.FieldType.time) {\n    xScaleUnit = dataRef.current?.heatmap?.fields[0].config?.unit ?? \"x\";\n    isTime = false;\n  }\n  const pxRatio = devicePixelRatio;\n  let heatmapType = dataRef.current?.heatmap?.meta?.type;\n  const exemplarFillColor = theme.visualization.getColorByName(opts.exemplarColor);\n  let qt;\n  let hRect;\n  let builder = new _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.UPlotConfigBuilder(timeZone);\n  let rect;\n  builder.addHook(\"init\", (u) => {\n    u.root.querySelectorAll(\".u-cursor-pt\").forEach((el) => {\n      Object.assign(el.style, {\n        borderRadius: \"0\",\n        border: \"1px solid white\",\n        background: \"transparent\"\n      });\n    });\n    onclick && u.over.addEventListener(\n      \"mouseup\",\n      (e) => {\n        let isDragging = u.cursor.drag._x || u.cursor.drag._y;\n        if (!isDragging) {\n          onclick(e);\n        }\n      },\n      true\n    );\n  });\n  onzoom && builder.addHook(\"setSelect\", (u) => {\n    onzoom({\n      xMin: u.posToVal(u.select.left, xScaleKey),\n      xMax: u.posToVal(u.select.left + u.select.width, xScaleKey)\n    });\n    u.setSelect({ left: 0, top: 0, width: 0, height: 0 }, false);\n  });\n  if (isTime) {\n    builder.addHook(\"setData\", (u) => {\n      let { min: xMin, max: xMax } = u.scales.x;\n      let min = getTimeRange().from.valueOf();\n      let max = getTimeRange().to.valueOf();\n      if (xMin !== min || xMax !== max) {\n        queueMicrotask(() => {\n          u.setScale(xScaleKey, { min, max });\n        });\n      }\n    });\n  }\n  builder.addHook(\"syncRect\", (u, r) => {\n    rect = r;\n  });\n  const payload = {\n    point: {\n      [xScaleUnit]: null\n    },\n    data: dataRef.current?.heatmap\n  };\n  const hoverEvent = new _grafana_data__WEBPACK_IMPORTED_MODULE_5__.DataHoverEvent(payload);\n  let pendingOnleave;\n  onhover && builder.addHook(\"setLegend\", (u) => {\n    if (u.cursor.idxs != null) {\n      for (let i = 0; i < u.cursor.idxs.length; i++) {\n        const sel = u.cursor.idxs[i];\n        if (sel != null) {\n          const { left, top } = u.cursor;\n          payload.rowIndex = sel;\n          payload.point[xScaleUnit] = u.posToVal(left, xScaleKey);\n          eventBus.publish(hoverEvent);\n          if (!isToolTipOpen.current) {\n            if (pendingOnleave) {\n              clearTimeout(pendingOnleave);\n              pendingOnleave = 0;\n            }\n            onhover({\n              seriesIdx: i,\n              dataIdx: sel,\n              pageX: rect.left + left,\n              pageY: rect.top + top\n            });\n          }\n          return;\n        }\n      }\n    }\n    if (!isToolTipOpen.current) {\n      if (!pendingOnleave) {\n        pendingOnleave = setTimeout(() => {\n          onhover(null);\n          payload.rowIndex = void 0;\n          payload.point[xScaleUnit] = null;\n          eventBus.publish(hoverEvent);\n        }, 100);\n      }\n    }\n  });\n  builder.addHook(\"drawClear\", (u) => {\n    qt = qt || new _barchart_quadtree__WEBPACK_IMPORTED_MODULE_2__.Quadtree(0, 0, u.bbox.width, u.bbox.height);\n    qt.clear();\n    u.series.forEach((s, i) => {\n      if (i > 0) {\n        s._paths = null;\n      }\n    });\n  });\n  builder.setMode(2);\n  builder.addScale({\n    scaleKey: xScaleKey,\n    isTime,\n    orientation: _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleOrientation.Horizontal,\n    direction: _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleDirection.Right,\n    // TODO: expand by x bucket size and layout\n    range: (u, dataMin, dataMax) => {\n      if (isTime) {\n        return [getTimeRange().from.valueOf(), getTimeRange().to.valueOf()];\n      } else {\n        if (dataRef.current?.xLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le) {\n          return [dataMin - dataRef.current?.xBucketSize, dataMax];\n        } else if (dataRef.current?.xLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.ge) {\n          return [dataMin, dataMax + dataRef.current?.xBucketSize];\n        } else {\n          let offset = dataRef.current?.xBucketSize / 2;\n          return [dataMin - offset, dataMax + offset];\n        }\n      }\n    }\n  });\n  let incrs;\n  if (!isTime) {\n    incrs = [];\n    for (let i = 0; i < 10; i++) {\n      incrs.push(i * dataRef.current?.xBucketSize);\n    }\n  }\n  builder.addAxis({\n    scaleKey: xScaleKey,\n    placement: _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.AxisPlacement.Bottom,\n    incrs,\n    isTime,\n    theme,\n    timeZone\n  });\n  const yField = dataRef.current?.heatmap?.fields[1];\n  if (!yField) {\n    return builder;\n  }\n  const yFieldConfig = yField.config?.custom;\n  const yScale = yFieldConfig?.scaleDistribution ?? { type: _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleDistribution.Linear };\n  const yAxisReverse = Boolean(yAxisConfig.reverse);\n  const isSparseHeatmap = heatmapType === _grafana_data__WEBPACK_IMPORTED_MODULE_7__.DataFrameType.HeatmapCells && !(0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_1__.isHeatmapCellsDense)(dataRef.current?.heatmap);\n  const shouldUseLogScale = yScale.type !== _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleDistribution.Linear || isSparseHeatmap;\n  const isOrdinalY = (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_1__.readHeatmapRowsCustomMeta)(dataRef.current?.heatmap).yOrdinalDisplay != null;\n  const yScaleKey = \"y_\" + (Math.random() + 1).toString(36).substring(7);\n  builder.addScale({\n    scaleKey: yScaleKey,\n    isTime: false,\n    // distribution: ScaleDistribution.Ordinal, // does not work with facets/scatter yet\n    orientation: _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleOrientation.Vertical,\n    direction: yAxisReverse ? _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleDirection.Down : _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleDirection.Up,\n    // should be tweakable manually\n    distribution: shouldUseLogScale ? _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleDistribution.Log : _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.ScaleDistribution.Linear,\n    log: yScale.log ?? 2,\n    range: (\n      // sparse already accounts for le/ge by explicit yMin & yMax cell bounds, so no need to expand y range\n      isSparseHeatmap ? (u, dataMin, dataMax) => {\n        let scaleMin, scaleMax;\n        [scaleMin, scaleMax] = shouldUseLogScale ? uplot__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rangeLog(dataMin, dataMax, yScale.log ?? 2, true) : [dataMin, dataMax];\n        if (shouldUseLogScale && !isOrdinalY) {\n          let yExp = u.scales[yScaleKey].log;\n          let log = yExp === 2 ? Math.log2 : Math.log10;\n          let { min: explicitMin, max: explicitMax } = yAxisConfig;\n          if (explicitMin != null && explicitMin > 0) {\n            let minLog = log(explicitMin);\n            scaleMin = yExp ** (0,_grafana_data__WEBPACK_IMPORTED_MODULE_8__.incrRoundDn)(minLog, 1);\n          }\n          if (explicitMax != null && explicitMax > 0) {\n            let maxLog = log(explicitMax);\n            scaleMax = yExp ** (0,_grafana_data__WEBPACK_IMPORTED_MODULE_8__.incrRoundUp)(maxLog, 1);\n          }\n        }\n        return [scaleMin, scaleMax];\n      } : (\n        // dense and ordinal only have one of yMin|yMax|y, so expand range by one cell in the direction of le/ge/unknown\n        (u, dataMin, dataMax) => {\n          let scaleMin = dataMin, scaleMax = dataMax;\n          let { min: explicitMin, max: explicitMax } = yAxisConfig;\n          if (shouldUseLogScale) {\n            let yExp = u.scales[yScaleKey].log;\n            let minExpanded = false;\n            let maxExpanded = false;\n            let log = yExp === 2 ? Math.log2 : Math.log10;\n            if (ySizeDivisor !== 1) {\n              let minLog = log(dataMin);\n              let maxLog = log(dataMax);\n              if (!Number.isInteger(minLog)) {\n                scaleMin = yExp ** (0,_grafana_data__WEBPACK_IMPORTED_MODULE_8__.incrRoundDn)(minLog, 1);\n                minExpanded = true;\n              }\n              if (!Number.isInteger(maxLog)) {\n                scaleMax = yExp ** (0,_grafana_data__WEBPACK_IMPORTED_MODULE_8__.incrRoundUp)(maxLog, 1);\n                maxExpanded = true;\n              }\n            }\n            if (dataRef.current?.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le) {\n              if (!minExpanded) {\n                scaleMin /= yExp;\n              }\n            } else if (dataRef.current?.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.ge) {\n              if (!maxExpanded) {\n                scaleMax *= yExp;\n              }\n            } else {\n              scaleMin /= yExp / 2;\n              scaleMax *= yExp / 2;\n            }\n            if (!isOrdinalY) {\n              if (explicitMin != null && explicitMin > 0) {\n                let minLog = log(explicitMin);\n                scaleMin = yExp ** (0,_grafana_data__WEBPACK_IMPORTED_MODULE_8__.incrRoundDn)(minLog, 1);\n              }\n              if (explicitMax != null && explicitMax > 0) {\n                let maxLog = log(explicitMax);\n                scaleMax = yExp ** (0,_grafana_data__WEBPACK_IMPORTED_MODULE_8__.incrRoundUp)(maxLog, 1);\n              }\n            }\n          } else {\n            let bucketSize = dataRef.current?.yBucketSize;\n            if (bucketSize === 0) {\n              bucketSize = 1;\n            }\n            if (bucketSize) {\n              if (dataRef.current?.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le) {\n                scaleMin -= bucketSize;\n              } else if (dataRef.current?.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.ge) {\n                scaleMax += bucketSize;\n              } else {\n                scaleMin -= bucketSize / 2;\n                scaleMax += bucketSize / 2;\n              }\n            } else {\n            }\n            if (!isOrdinalY) {\n              scaleMin = explicitMin ?? scaleMin;\n              scaleMax = explicitMax ?? scaleMax;\n            }\n          }\n          return [scaleMin, scaleMax];\n        }\n      )\n    )\n  });\n  const dispY = yField.display ?? (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.getValueFormat)(\"short\");\n  builder.addAxis({\n    scaleKey: yScaleKey,\n    show: yAxisConfig.axisPlacement !== _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.AxisPlacement.Hidden,\n    placement: yAxisConfig.axisPlacement || _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.AxisPlacement.Left,\n    size: yAxisConfig.axisWidth || null,\n    label: yAxisConfig.axisLabel,\n    theme,\n    formatValue: (v, decimals) => (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.formattedValueToString)(dispY(v, decimals)),\n    splits: isOrdinalY ? (self) => {\n      const meta = (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_1__.readHeatmapRowsCustomMeta)(dataRef.current?.heatmap);\n      if (!meta.yOrdinalDisplay) {\n        return [0, 1];\n      }\n      let splits = meta.yOrdinalDisplay.map((v, idx) => idx);\n      switch (dataRef.current?.yLayout) {\n        case _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le:\n          splits.unshift(-1);\n          break;\n        case _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.ge:\n          splits.push(splits.length);\n          break;\n      }\n      if (self.height < 60) {\n        splits = [splits[0], splits[splits.length - 1]];\n      } else {\n        while (splits.length > 3 && (self.height - 15) / splits.length < 10) {\n          splits = splits.filter((v, idx) => idx % 2 === 0);\n        }\n      }\n      return splits;\n    } : void 0,\n    values: isOrdinalY ? (self, splits) => {\n      const meta = (0,app_features_transformers_calculateHeatmap_heatmap__WEBPACK_IMPORTED_MODULE_1__.readHeatmapRowsCustomMeta)(dataRef.current?.heatmap);\n      if (meta.yOrdinalDisplay) {\n        return splits.map(\n          (v) => v < 0 ? meta.yMinDisplay ?? \"\" : meta.yOrdinalDisplay[v] ?? \"\"\n        );\n      }\n      return splits;\n    } : void 0\n  });\n  const pathBuilder = isSparseHeatmap ? heatmapPathsSparse : heatmapPathsDense;\n  builder.addSeries({\n    facets: [\n      {\n        scale: xScaleKey,\n        auto: true,\n        sorted: 1\n      },\n      {\n        scale: yScaleKey,\n        auto: true\n      }\n    ],\n    pathBuilder: pathBuilder({\n      each: (u, seriesIdx, dataIdx, x, y, xSize, ySize) => {\n        qt.add({\n          x: x - u.bbox.left,\n          y: y - u.bbox.top,\n          w: xSize,\n          h: ySize,\n          sidx: seriesIdx,\n          didx: dataIdx\n        });\n      },\n      gap: cellGap,\n      hideLE,\n      hideGE,\n      xAlign: dataRef.current?.xLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le ? -1 : dataRef.current?.xLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.ge ? 1 : 0,\n      yAlign: (dataRef.current?.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.le ? -1 : dataRef.current?.yLayout === _grafana_schema__WEBPACK_IMPORTED_MODULE_6__.HeatmapCellLayout.ge ? 1 : 0) * (yAxisReverse ? -1 : 1),\n      ySizeDivisor,\n      disp: {\n        fill: {\n          values: (u, seriesIdx) => dataRef.current?.heatmapColors?.values,\n          index: dataRef.current?.heatmapColors?.palette\n        }\n      }\n    }),\n    theme,\n    scaleKey: \"\"\n    // facets' scales used (above)\n  });\n  builder.addSeries({\n    facets: [\n      {\n        scale: xScaleKey,\n        auto: true,\n        sorted: 1\n      },\n      {\n        scale: yScaleKey,\n        auto: true\n      }\n    ],\n    pathBuilder: heatmapPathsPoints(\n      {\n        each: (u, seriesIdx, dataIdx, x, y, xSize, ySize) => {\n          qt.add({\n            x: x - u.bbox.left,\n            y: y - u.bbox.top,\n            w: xSize,\n            h: ySize,\n            sidx: seriesIdx,\n            didx: dataIdx\n          });\n        }\n      },\n      exemplarFillColor\n    ),\n    theme,\n    scaleKey: \"\"\n    // facets' scales used (above)\n  });\n  const cursor = {\n    drag: {\n      x: true,\n      y: false,\n      setScale: false\n    },\n    dataIdx: (u, seriesIdx) => {\n      if (seriesIdx === 1) {\n        hRect = null;\n        let cx = u.cursor.left * pxRatio;\n        let cy = u.cursor.top * pxRatio;\n        qt.get(cx, cy, 1, 1, (o) => {\n          if ((0,_barchart_quadtree__WEBPACK_IMPORTED_MODULE_2__.pointWithin)(cx, cy, o.x, o.y, o.x + o.w, o.y + o.h)) {\n            hRect = o;\n          }\n        });\n      }\n      return hRect && seriesIdx === hRect.sidx ? hRect.didx : null;\n    },\n    points: {\n      fill: \"rgba(255,255,255, 0.3)\",\n      bbox: (u, seriesIdx) => {\n        let isHovered = hRect && seriesIdx === hRect.sidx;\n        return {\n          left: isHovered ? hRect.x / pxRatio : -10,\n          top: isHovered ? hRect.y / pxRatio : -10,\n          width: isHovered ? hRect.w / pxRatio : 0,\n          height: isHovered ? hRect.h / pxRatio : 0\n        };\n      }\n    }\n  };\n  if (sync && sync() !== _grafana_data__WEBPACK_IMPORTED_MODULE_10__.DashboardCursorSync.Off) {\n    cursor.sync = {\n      key: eventsScope,\n      scales: [xScaleKey, yScaleKey],\n      filters: {\n        pub: (type, src, x, y, w, h, dataIdx) => {\n          if (x < 0) {\n            payload.point[xScaleUnit] = null;\n            eventBus.publish(new _grafana_data__WEBPACK_IMPORTED_MODULE_5__.DataHoverClearEvent());\n          } else {\n            payload.point[xScaleUnit] = src.posToVal(x, xScaleKey);\n            eventBus.publish(hoverEvent);\n          }\n          return true;\n        }\n      }\n    };\n    builder.setSync();\n  }\n  builder.setCursor(cursor);\n  return builder;\n}\nconst CRISP_EDGES_GAP_MIN = 4;\nfunction heatmapPathsDense(opts) {\n  const { disp, each, gap = 1, hideLE = -Infinity, hideGE = Infinity, xAlign = 1, yAlign = 1, ySizeDivisor = 1 } = opts;\n  const pxRatio = devicePixelRatio;\n  const round = gap >= CRISP_EDGES_GAP_MIN ? Math.round : (v) => v;\n  const cellGap = Math.round(gap * pxRatio);\n  return (u, seriesIdx) => {\n    uplot__WEBPACK_IMPORTED_MODULE_0__[\"default\"].orient(\n      u,\n      seriesIdx,\n      (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim, moveTo, lineTo, rect, arc) => {\n        let d = u.data[seriesIdx];\n        const xs = d[0];\n        const ys = d[1];\n        const counts = d[2];\n        const dlen = xs.length;\n        let fills = disp.fill.values(u, seriesIdx);\n        let fillPalette = disp.fill.index ?? [...new Set(fills)];\n        let fillPaths = fillPalette.map((color) => new Path2D());\n        let yBinQty = dlen - ys.lastIndexOf(ys[0]);\n        let xBinQty = dlen / yBinQty;\n        let yBinIncr = ys[1] - ys[0] || scaleY.max - scaleY.min;\n        let xBinIncr = xs[yBinQty] - xs[0];\n        let xSize;\n        let ySize;\n        if (scaleX.distr === 3) {\n          xSize = Math.abs(valToPosX(xs[0] * scaleX.log, scaleX, xDim, xOff) - valToPosX(xs[0], scaleX, xDim, xOff));\n        } else {\n          xSize = Math.abs(valToPosX(xBinIncr, scaleX, xDim, xOff) - valToPosX(0, scaleX, xDim, xOff));\n        }\n        if (scaleY.distr === 3) {\n          ySize = Math.abs(valToPosY(ys[0] * scaleY.log, scaleY, yDim, yOff) - valToPosY(ys[0], scaleY, yDim, yOff)) / ySizeDivisor;\n        } else {\n          ySize = Math.abs(valToPosY(yBinIncr, scaleY, yDim, yOff) - valToPosY(0, scaleY, yDim, yOff)) / ySizeDivisor;\n        }\n        xSize = Math.max(1, round(xSize - cellGap));\n        ySize = Math.max(1, round(ySize - cellGap));\n        let xOffset = xAlign === -1 ? -xSize : xAlign === 0 ? -xSize / 2 : 0;\n        let yOffset = yAlign === 1 ? -ySize : yAlign === 0 ? -ySize / 2 : 0;\n        let cys = ys.slice(0, yBinQty).map((y) => round(valToPosY(y, scaleY, yDim, yOff) + yOffset));\n        let cxs = Array.from(\n          { length: xBinQty },\n          (v, i) => round(valToPosX(xs[i * yBinQty], scaleX, xDim, xOff) + xOffset)\n        );\n        for (let i = 0; i < dlen; i++) {\n          if (counts[i] > hideLE && counts[i] < hideGE) {\n            let cx = cxs[~~(i / yBinQty)];\n            let cy = cys[i % yBinQty];\n            let fillPath = fillPaths[fills[i]];\n            rect(fillPath, cx, cy, xSize, ySize);\n            each(u, 1, i, cx, cy, xSize, ySize);\n          }\n        }\n        u.ctx.save();\n        u.ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n        u.ctx.clip();\n        fillPaths.forEach((p, i) => {\n          u.ctx.fillStyle = fillPalette[i];\n          u.ctx.fill(p);\n        });\n        u.ctx.restore();\n        return null;\n      }\n    );\n    return null;\n  };\n}\nfunction heatmapPathsPoints(opts, exemplarColor) {\n  return (u, seriesIdx) => {\n    uplot__WEBPACK_IMPORTED_MODULE_0__[\"default\"].orient(\n      u,\n      seriesIdx,\n      (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim, moveTo, lineTo, rect, arc) => {\n        let points = new Path2D();\n        let fillPaths = [points];\n        let fillPalette = [exemplarColor ?? \"rgba(255,0,255,0.7)\"];\n        for (let i = 0; i < dataX.length; i++) {\n          let yVal = dataY[i];\n          yVal -= 0.5;\n          let randSign = Math.round(Math.random()) * 2 - 1;\n          yVal += randSign * 0.5 * Math.random();\n          let x = valToPosX(dataX[i], scaleX, xDim, xOff);\n          let y = valToPosY(yVal, scaleY, yDim, yOff);\n          let w = 8;\n          let h = 8;\n          rect(points, x - w / 2, y - h / 2, w, h);\n          opts.each(u, seriesIdx, i, x - w / 2, y - h / 2, w, h);\n        }\n        u.ctx.save();\n        u.ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n        u.ctx.clip();\n        fillPaths.forEach((p, i) => {\n          u.ctx.fillStyle = fillPalette[i];\n          u.ctx.fill(p);\n        });\n        u.ctx.restore();\n      }\n    );\n    return null;\n  };\n}\nfunction heatmapPathsSparse(opts) {\n  const { disp, each, gap = 1, hideLE = -Infinity, hideGE = Infinity } = opts;\n  const pxRatio = devicePixelRatio;\n  const round = gap >= CRISP_EDGES_GAP_MIN ? Math.round : (v) => v;\n  const cellGap = Math.round(gap * pxRatio);\n  return (u, seriesIdx) => {\n    uplot__WEBPACK_IMPORTED_MODULE_0__[\"default\"].orient(\n      u,\n      seriesIdx,\n      (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim, moveTo, lineTo, rect, arc) => {\n        let d = u.data[seriesIdx];\n        const xMaxs = d[0];\n        const yMins = d[1];\n        const yMaxs = d[2];\n        const counts = d[3];\n        const dlen = xMaxs.length;\n        let fills = disp.fill.values(u, seriesIdx);\n        let fillPalette = disp.fill.index ?? [...new Set(fills)];\n        let fillPaths = fillPalette.map((color) => new Path2D());\n        let xOffs = /* @__PURE__ */ new Map();\n        let yOffs = /* @__PURE__ */ new Map();\n        for (let i = 0; i < xMaxs.length; i++) {\n          let xMax = xMaxs[i];\n          let yMin = yMins[i];\n          let yMax = yMaxs[i];\n          if (!xOffs.has(xMax)) {\n            xOffs.set(xMax, round(valToPosX(xMax, scaleX, xDim, xOff)));\n          }\n          if (!yOffs.has(yMin)) {\n            yOffs.set(yMin, round(valToPosY(yMin, scaleY, yDim, yOff)));\n          }\n          if (!yOffs.has(yMax)) {\n            yOffs.set(yMax, round(valToPosY(yMax, scaleY, yDim, yOff)));\n          }\n        }\n        let xSizeUniform = xOffs.get(xMaxs.find((v) => v !== xMaxs[0])) - xOffs.get(xMaxs[0]);\n        for (let i = 0; i < dlen; i++) {\n          if (counts[i] <= hideLE || counts[i] >= hideGE) {\n            continue;\n          }\n          let xMax = xMaxs[i];\n          let yMin = yMins[i];\n          let yMax = yMaxs[i];\n          let xMaxPx = xOffs.get(xMax);\n          let yMinPx = yOffs.get(yMin);\n          let yMaxPx = yOffs.get(yMax);\n          let xSize = xSizeUniform;\n          let ySize = yMinPx - yMaxPx;\n          xSize = Math.max(1, xSize - cellGap);\n          ySize = Math.max(1, ySize - cellGap);\n          let x = xMaxPx;\n          let y = yMinPx;\n          let fillPath = fillPaths[fills[i]];\n          rect(fillPath, x, y, xSize, ySize);\n          each(u, 1, i, x, y, xSize, ySize);\n        }\n        u.ctx.save();\n        u.ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n        u.ctx.clip();\n        fillPaths.forEach((p, i) => {\n          u.ctx.fillStyle = fillPalette[i];\n          u.ctx.fill(p);\n        });\n        u.ctx.restore();\n      }\n    );\n    return null;\n  };\n}\nconst boundedMinMax = (values, minValue, maxValue, hideLE = -Infinity, hideGE = Infinity) => {\n  if (minValue == null) {\n    minValue = Infinity;\n    for (let i = 0; i < values.length; i++) {\n      if (values[i] > hideLE && values[i] < hideGE) {\n        minValue = Math.min(minValue, values[i]);\n      }\n    }\n  }\n  if (maxValue == null) {\n    maxValue = -Infinity;\n    for (let i = 0; i < values.length; i++) {\n      if (values[i] > hideLE && values[i] < hideGE) {\n        maxValue = Math.max(maxValue, values[i]);\n      }\n    }\n  }\n  return [minValue, maxValue];\n};\nconst valuesToFills = (values, palette, minValue, maxValue) => {\n  let range = maxValue - minValue || 1;\n  let paletteSize = palette.length;\n  let indexedFills = Array(values.length);\n  for (let i = 0; i < values.length; i++) {\n    indexedFills[i] = values[i] < minValue ? 0 : values[i] > maxValue ? paletteSize - 1 : Math.min(paletteSize - 1, Math.floor(paletteSize * (values[i] - minValue) / range));\n  }\n  return indexedFills;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvaGVhdG1hcC91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDOEI7QUFnQnZCO0FBQytGO0FBQ25FO0FBQzRCO0FBRW5CO0FBMERyQyxTQUFTLFdBQVcsTUFBc0I7QUFDL0MsUUFBTTtBQUFBLElBQ0o7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0EsY0FBYztBQUFBLEVBQ2hCLElBQUk7QUFFSixRQUFNLFlBQVk7QUFDbEIsTUFBSSxhQUFhO0FBQ2pCLE1BQUksU0FBUztBQUViLE1BQUksUUFBUSxTQUFTLFNBQVMsT0FBTyxDQUFDLEVBQUUsU0FBUyxvREFBUyxDQUFDLE1BQU07QUFDL0QsaUJBQWEsUUFBUSxTQUFTLFNBQVMsT0FBTyxDQUFDLEVBQUUsUUFBUSxRQUFRO0FBQ2pFLGFBQVM7QUFBQSxFQUNYO0FBRUEsUUFBTSxVQUFVO0FBRWhCLE1BQUksY0FBYyxRQUFRLFNBQVMsU0FBUyxNQUFNO0FBQ2xELFFBQU0sb0JBQW9CLE1BQU0sY0FBYyxlQUFlLEtBQUssYUFBYTtBQUUvRSxNQUFJO0FBQ0osTUFBSTtBQUVKLE1BQUksVUFBVSxJQUFJLDJEQUFrQixDQUFDLFFBQVE7QUFFN0MsTUFBSTtBQUVKLFVBQVEsUUFBUSxRQUFRLENBQUMsTUFBTTtBQUM3QixNQUFFLEtBQUssaUJBQThCLGNBQWMsRUFBRSxRQUFRLENBQUMsT0FBTztBQUNuRSxhQUFPLE9BQU8sR0FBRyxPQUFPO0FBQUEsUUFDdEIsY0FBYztBQUFBLFFBQ2QsUUFBUTtBQUFBLFFBQ1IsWUFBWTtBQUFBLE1BQ2QsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVELGVBQ0UsRUFBRSxLQUFLO0FBQUEs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cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9wYW5lbC9oZWF0bWFwL3V0aWxzLnRzPzY2NjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTXV0YWJsZVJlZk9iamVjdCwgUmVmT2JqZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVQbG90LCB7IEN1cnNvciB9IGZyb20gJ3VwbG90JztcblxuaW1wb3J0IHtcbiAgRGFzaGJvYXJkQ3Vyc29yU3luYyxcbiAgRGF0YUZyYW1lVHlwZSxcbiAgRGF0YUhvdmVyQ2xlYXJFdmVudCxcbiAgRGF0YUhvdmVyRXZlbnQsXG4gIERhdGFIb3ZlclBheWxvYWQsXG4gIEV2ZW50QnVzLFxuICBmb3JtYXR0ZWRWYWx1ZVRvU3RyaW5nLFxuICBnZXRWYWx1ZUZvcm1hdCxcbiAgR3JhZmFuYVRoZW1lMixcbiAgaW5jclJvdW5kRG4sXG4gIGluY3JSb3VuZFVwLFxuICBUaW1lUmFuZ2UsXG4gIEZpZWxkVHlwZSxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBBeGlzUGxhY2VtZW50LCBTY2FsZURpcmVjdGlvbiwgU2NhbGVEaXN0cmlidXRpb24sIFNjYWxlT3JpZW50YXRpb24sIEhlYXRtYXBDZWxsTGF5b3V0IH0gZnJvbSAnQGdyYWZhbmEvc2NoZW1hJztcbmltcG9ydCB7IFVQbG90Q29uZmlnQnVpbGRlciB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IGlzSGVhdG1hcENlbGxzRGVuc2UsIHJlYWRIZWF0bWFwUm93c0N1c3RvbU1ldGEgfSBmcm9tICdhcHAvZmVhdHVyZXMvdHJhbnNmb3JtZXJzL2NhbGN1bGF0ZUhlYXRtYXAvaGVhdG1hcCc7XG5cbmltcG9ydCB7IHBvaW50V2l0aGluLCBRdWFkdHJlZSwgUmVjdCB9IGZyb20gJy4uL2JhcmNoYXJ0L3F1YWR0cmVlJztcblxuaW1wb3J0IHsgSGVhdG1hcERhdGEgfSBmcm9tICcuL2ZpZWxkcyc7XG5pbXBvcnQgeyBGaWVsZENvbmZpZywgWUF4aXNDb25maWcgfSBmcm9tICcuL3R5cGVzJztcblxuaW50ZXJmYWNlIFBhdGhidWlsZGVyT3B0cyB7XG4gIGVhY2g6ICh1OiB1UGxvdCwgc2VyaWVzSWR4OiBudW1iZXIsIGRhdGFJZHg6IG51bWJlciwgbGZ0OiBudW1iZXIsIHRvcDogbnVtYmVyLCB3aWQ6IG51bWJlciwgaGd0OiBudW1iZXIpID0+IHZvaWQ7XG4gIGdhcD86IG51bWJlciB8IG51bGw7XG4gIGhpZGVMRT86IG51bWJlcjtcbiAgaGlkZUdFPzogbnVtYmVyO1xuICB4QWxpZ24/OiAtMSB8IDAgfCAxO1xuICB5QWxpZ24/OiAtMSB8IDAgfCAxO1xuICB5U2l6ZURpdmlzb3I/OiBudW1iZXI7XG4gIGRpc3A6IHtcbiAgICBmaWxsOiB7XG4gICAgICB2YWx1ZXM6ICh1OiB1UGxvdCwgc2VyaWVzSW5kZXg6IG51bWJlcikgPT4gbnVtYmVyW107XG4gICAgICBpbmRleDogQXJyYXk8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEWydmaWxsU3R5bGUnXT47XG4gICAgfTtcbiAgfTtcbn1cblxuaW50ZXJmYWNlIFBvaW50c0J1aWxkZXJPcHRzIHtcbiAgZWFjaDogKHU6IHVQbG90LCBzZXJpZXNJZHg6IG51bWJlciwgZGF0YUlkeDogbnVtYmVyLCBsZnQ6IG51bWJlciwgdG9wOiBudW1iZXIsIHdpZDogbnVtYmVyLCBoZ3Q6IG51bWJlcikgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZWF0bWFwSG92ZXJFdmVudCB7XG4gIHNlcmllc0lkeDogbnVtYmVyO1xuICBkYXRhSWR4OiBudW1iZXI7XG4gIHBhZ2VYOiBudW1iZXI7XG4gIHBhZ2VZOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhdG1hcFpvb21FdmVudCB7XG4gIHhNaW46IG51bWJlcjtcbiAgeE1heDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgUHJlcENvbmZpZ09wdHMge1xuICBkYXRhUmVmOiBSZWZPYmplY3Q8SGVhdG1hcERhdGE+O1xuICB0aGVtZTogR3JhZmFuYVRoZW1lMjtcbiAgZXZlbnRCdXM6IEV2ZW50QnVzO1xuICBvbmhvdmVyPzogbnVsbCB8ICgoZXZ0PzogSGVhdG1hcEhvdmVyRXZlbnQgfCBudWxsKSA9PiB2b2lkKTtcbiAgb25jbGljaz86IG51bGwgfCAoKGV2dD86IE9iamVjdCkgPT4gdm9pZCk7XG4gIG9uem9vbT86IG51bGwgfCAoKGV2dDogSGVhdG1hcFpvb21FdmVudCkgPT4gdm9pZCk7XG4gIGlzVG9vbFRpcE9wZW46IE11dGFibGVSZWZPYmplY3Q8Ym9vbGVhbj47XG4gIHRpbWVab25lOiBzdHJpbmc7XG4gIGdldFRpbWVSYW5nZTogKCkgPT4gVGltZVJhbmdlO1xuICBleGVtcGxhckNvbG9yOiBzdHJpbmc7XG4gIGNlbGxHYXA/OiBudW1iZXIgfCBudWxsOyAvLyBpbiBjc3MgcGl4ZWxzXG4gIGhpZGVMRT86IG51bWJlcjtcbiAgaGlkZUdFPzogbnVtYmVyO1xuICB5QXhpc0NvbmZpZzogWUF4aXNDb25maWc7XG4gIHlTaXplRGl2aXNvcj86IG51bWJlcjtcbiAgc3luYz86ICgpID0+IERhc2hib2FyZEN1cnNvclN5bmM7XG4gIC8vIElkZW50aWZpZXMgdGhlIHNoYXJlZCBrZXkgZm9yIHVQbG90IGN1cnNvciBzeW5jXG4gIGV2ZW50c1Njb3BlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJlcENvbmZpZyhvcHRzOiBQcmVwQ29uZmlnT3B0cykge1xuICBjb25zdCB7XG4gICAgZGF0YVJlZixcbiAgICB0aGVtZSxcbiAgICBldmVudEJ1cyxcbiAgICBvbmhvdmVyLFxuICAgIG9uY2xpY2ssXG4gICAgb256b29tLFxuICAgIGlzVG9vbFRpcE9wZW4sXG4gICAgdGltZVpvbmUsXG4gICAgZ2V0VGltZVJhbmdlLFxuICAgIGNlbGxHYXAsXG4gICAgaGlkZUxFLFxuICAgIGhpZGVHRSxcbiAgICB5QXhpc0NvbmZpZyxcbiAgICB5U2l6ZURpdmlzb3IsXG4gICAgc3luYyxcbiAgICBldmVudHNTY29wZSA9ICdfX2dsb2JhbF8nLFxuICB9ID0gb3B0cztcblxuICBjb25zdCB4U2NhbGVLZXkgPSAneCc7XG4gIGxldCB4U2NhbGVVbml0ID0gJ3RpbWUnO1xuICBsZXQgaXNUaW1lID0gdHJ1ZTtcblxuICBpZiAoZGF0YVJlZi5jdXJyZW50Py5oZWF0bWFwPy5maWVsZHNbMF0udHlwZSAhPT0gRmllbGRUeXBlLnRpbWUpIHtcbiAgICB4U2NhbGVVbml0ID0gZGF0YVJlZi5jdXJyZW50Py5oZWF0bWFwPy5maWVsZHNbMF0uY29uZmlnPy51bml0ID8/ICd4JztcbiAgICBpc1RpbWUgPSBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IHB4UmF0aW8gPSBkZXZpY2VQaXhlbFJhdGlvO1xuXG4gIGxldCBoZWF0bWFwVHlwZSA9IGRhdGFSZWYuY3VycmVudD8uaGVhdG1hcD8ubWV0YT8udHlwZTtcbiAgY29uc3QgZXhlbXBsYXJGaWxsQ29sb3IgPSB0aGVtZS52aXN1YWxpemF0aW9uLmdldENvbG9yQnlOYW1lKG9wdHMuZXhlbXBsYXJDb2xvcik7XG5cbiAgbGV0IHF0OiBRdWFkdHJlZTtcbiAgbGV0IGhSZWN0OiBSZWN0IHwgbnVsbDtcblxuICBsZXQgYnVpbGRlciA9IG5ldyBVUGxvdENvbmZpZ0J1aWxkZXIodGltZVpvbmUpO1xuXG4gIGxldCByZWN0OiBET01SZWN0O1xuXG4gIGJ1aWxkZXIuYWRkSG9vaygnaW5pdCcsICh1KSA9PiB7XG4gICAgdS5yb290LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCcudS1jdXJzb3ItcHQnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgT2JqZWN0LmFzc2lnbihlbC5zdHlsZSwge1xuICAgICAgICBib3JkZXJSYWRpdXM6ICcwJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHdoaXRlJyxcbiAgICAgICAgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgb25jbGljayAmJlxuICAgICAgdS5vdmVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICdtb3VzZXVwJyxcbiAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgbGV0IGlzRHJhZ2dpbmc6IGJvb2xlYW4gPSB1LmN1cnNvci5kcmFnLl94IHx8IHUuY3Vyc29yLmRyYWcuX3k7XG5cbiAgICAgICAgICBpZiAoIWlzRHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIG9uY2xpY2soZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICB9KTtcblxuICBvbnpvb20gJiZcbiAgICBidWlsZGVyLmFkZEhvb2soJ3NldFNlbGVjdCcsICh1KSA9PiB7XG4gICAgICBvbnpvb20oe1xuICAgICAgICB4TWluOiB1LnBvc1RvVmFsKHUuc2VsZWN0LmxlZnQsIHhTY2FsZUtleSksXG4gICAgICAgIHhNYXg6IHUucG9zVG9WYWwodS5zZWxlY3QubGVmdCArIHUuc2VsZWN0LndpZHRoLCB4U2NhbGVLZXkpLFxuICAgICAgfSk7XG4gICAgICB1LnNldFNlbGVjdCh7IGxlZnQ6IDAsIHRvcDogMCwgd2lkdGg6IDAsIGhlaWdodDogMCB9LCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgaWYgKGlzVGltZSkge1xuICAgIC8vIHRoaXMgaXMgYSB0bXAgaGFjayBiZWNhdXNlIGluIG1vZGU6IDIsIHVwbG90IGRvZXMgbm90IGN1cnJlbnRseSBjYWxsIHNjYWxlcy54LnJhbmdlKCkgZm9yIHNldERhdGEoKSBjYWxsc1xuICAgIC8vIHNjYWxlcy54LnJhbmdlKCkgdHlwaWNhbGx5IHJlYWRzIGJhY2sgZnJvbSBkcmlsbGVkLWRvd24gcGFuZWxQcm9wcy50aW1lUmFuZ2UgdmlhIGdldFRpbWVSYW5nZSgpXG4gICAgYnVpbGRlci5hZGRIb29rKCdzZXREYXRhJywgKHUpID0+IHtcbiAgICAgIC8vbGV0IFttaW4sIG1heF0gPSAodS5zY2FsZXMhLnghLnJhbmdlISBhcyB1UGxvdC5SYW5nZS5GdW5jdGlvbikodSwgMCwgMTAwLCB4U2NhbGVLZXkpO1xuXG4gICAgICBsZXQgeyBtaW46IHhNaW4sIG1heDogeE1heCB9ID0gdS5zY2FsZXMhLng7XG5cbiAgICAgIGxldCBtaW4gPSBnZXRUaW1lUmFuZ2UoKS5mcm9tLnZhbHVlT2YoKTtcbiAgICAgIGxldCBtYXggPSBnZXRUaW1lUmFuZ2UoKS50by52YWx1ZU9mKCk7XG5cbiAgICAgIGlmICh4TWluICE9PSBtaW4gfHwgeE1heCAhPT0gbWF4KSB7XG4gICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgICB1LnNldFNjYWxlKHhTY2FsZUtleSwgeyBtaW4sIG1heCB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyByZWN0IG9mIC51LW92ZXIgKGdyaWQgYXJlYSlcbiAgYnVpbGRlci5hZGRIb29rKCdzeW5jUmVjdCcsICh1LCByKSA9PiB7XG4gICAgcmVjdCA9IHI7XG4gIH0pO1xuXG4gIGNvbnN0IHBheWxvYWQ6IERhdGFIb3ZlclBheWxvYWQgPSB7XG4gICAgcG9pbnQ6IHtcbiAgICAgIFt4U2NhbGVVbml0XTogbnVsbCxcbiAgICB9LFxuICAgIGRhdGE6IGRhdGFSZWYuY3VycmVudD8uaGVhdG1hcCxcbiAgfTtcbiAgY29uc3QgaG92ZXJFdmVudCA9IG5ldyBEYXRhSG92ZXJFdmVudChwYXlsb2FkKTtcblxuICBsZXQgcGVuZGluZ09ubGVhdmU6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgMDtcblxuICBvbmhvdmVyICYmXG4gICAgYnVpbGRlci5hZGRIb29rKCdzZXRMZWdlbmQnLCAodSkgPT4ge1xuICAgICAgaWYgKHUuY3Vyc29yLmlkeHMgIT0gbnVsbCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHUuY3Vyc29yLmlkeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBzZWwgPSB1LmN1cnNvci5pZHhzW2ldO1xuICAgICAgICAgIGlmIChzZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AgfSA9IHUuY3Vyc29yO1xuICAgICAgICAgICAgcGF5bG9hZC5yb3dJbmRleCA9IHNlbDtcbiAgICAgICAgICAgIHBheWxvYWQucG9pbnRbeFNjYWxlVW5pdF0gPSB1LnBvc1RvVmFsKGxlZnQhLCB4U2NhbGVLZXkpO1xuICAgICAgICAgICAgZXZlbnRCdXMucHVibGlzaChob3ZlckV2ZW50KTtcblxuICAgICAgICAgICAgaWYgKCFpc1Rvb2xUaXBPcGVuLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgaWYgKHBlbmRpbmdPbmxlYXZlKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHBlbmRpbmdPbmxlYXZlKTtcbiAgICAgICAgICAgICAgICBwZW5kaW5nT25sZWF2ZSA9IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgb25ob3Zlcih7XG4gICAgICAgICAgICAgICAgc2VyaWVzSWR4OiBpLFxuICAgICAgICAgICAgICAgIGRhdGFJZHg6IHNlbCxcbiAgICAgICAgICAgICAgICBwYWdlWDogcmVjdC5sZWZ0ICsgbGVmdCEsXG4gICAgICAgICAgICAgICAgcGFnZVk6IHJlY3QudG9wICsgdG9wISxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNUb29sVGlwT3Blbi5jdXJyZW50KSB7XG4gICAgICAgIC8vIGlmIHRpbGVzIGhhdmUgZ2FwcywgcmVkdWNlIGZsYXNoaW5nIC8gcmUtcmVuZGVyIChkZWJvdW5jZSBvbmxlYXZlIGJ5IDEwMG1zKVxuICAgICAgICBpZiAoIXBlbmRpbmdPbmxlYXZlKSB7XG4gICAgICAgICAgcGVuZGluZ09ubGVhdmUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG9uaG92ZXIobnVsbCk7XG4gICAgICAgICAgICBwYXlsb2FkLnJvd0luZGV4ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcGF5bG9hZC5wb2ludFt4U2NhbGVVbml0XSA9IG51bGw7XG4gICAgICAgICAgICBldmVudEJ1cy5wdWJsaXNoKGhvdmVyRXZlbnQpO1xuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICBidWlsZGVyLmFkZEhvb2soJ2RyYXdDbGVhcicsICh1KSA9PiB7XG4gICAgcXQgPSBxdCB8fCBuZXcgUXVhZHRyZWUoMCwgMCwgdS5iYm94LndpZHRoLCB1LmJib3guaGVpZ2h0KTtcblxuICAgIHF0LmNsZWFyKCk7XG5cbiAgICAvLyBmb3JjZS1jbGVhciB0aGUgcGF0aCBjYWNoZSB0byBjYXVzZSBkcmF3QmFycygpIHRvIHJlYnVpbGQgbmV3IHF1YWR0cmVlXG4gICAgdS5zZXJpZXMuZm9yRWFjaCgocywgaSkgPT4ge1xuICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcy5fcGF0aHMgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBidWlsZGVyLnNldE1vZGUoMik7XG5cbiAgYnVpbGRlci5hZGRTY2FsZSh7XG4gICAgc2NhbGVLZXk6IHhTY2FsZUtleSxcbiAgICBpc1RpbWUsXG4gICAgb3JpZW50YXRpb246IFNjYWxlT3JpZW50YXRpb24uSG9yaXpvbnRhbCxcbiAgICBkaXJlY3Rpb246IFNjYWxlRGlyZWN0aW9uLlJpZ2h0LFxuICAgIC8vIFRPRE86IGV4cGFuZCBieSB4IGJ1Y2tldCBzaXplIGFuZCBsYXlvdXRcbiAgICByYW5nZTogKHUsIGRhdGFNaW4sIGRhdGFNYXgpID0+IHtcbiAgICAgIGlmIChpc1RpbWUpIHtcbiAgICAgICAgcmV0dXJuIFtnZXRUaW1lUmFuZ2UoKS5mcm9tLnZhbHVlT2YoKSwgZ2V0VGltZVJhbmdlKCkudG8udmFsdWVPZigpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkYXRhUmVmLmN1cnJlbnQ/LnhMYXlvdXQgPT09IEhlYXRtYXBDZWxsTGF5b3V0LmxlKSB7XG4gICAgICAgICAgcmV0dXJuIFtkYXRhTWluIC0gZGF0YVJlZi5jdXJyZW50Py54QnVja2V0U2l6ZSEsIGRhdGFNYXhdO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGFSZWYuY3VycmVudD8ueExheW91dCA9PT0gSGVhdG1hcENlbGxMYXlvdXQuZ2UpIHtcbiAgICAgICAgICByZXR1cm4gW2RhdGFNaW4sIGRhdGFNYXggKyBkYXRhUmVmLmN1cnJlbnQ/LnhCdWNrZXRTaXplIV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IG9mZnNldCA9IGRhdGFSZWYuY3VycmVudD8ueEJ1Y2tldFNpemUhIC8gMjtcblxuICAgICAgICAgIHJldHVybiBbZGF0YU1pbiAtIG9mZnNldCwgZGF0YU1heCArIG9mZnNldF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9KTtcblxuICBsZXQgaW5jcnM7XG5cbiAgaWYgKCFpc1RpbWUpIHtcbiAgICBpbmNycyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBpbmNycy5wdXNoKGkgKiBkYXRhUmVmLmN1cnJlbnQ/LnhCdWNrZXRTaXplISk7XG4gICAgfVxuICB9XG5cbiAgYnVpbGRlci5hZGRBeGlzKHtcbiAgICBzY2FsZUtleTogeFNjYWxlS2V5LFxuICAgIHBsYWNlbWVudDogQXhpc1BsYWNlbWVudC5Cb3R0b20sXG4gICAgaW5jcnMsXG4gICAgaXNUaW1lLFxuICAgIHRoZW1lOiB0aGVtZSxcbiAgICB0aW1lWm9uZSxcbiAgfSk7XG5cbiAgY29uc3QgeUZpZWxkID0gZGF0YVJlZi5jdXJyZW50Py5oZWF0bWFwPy5maWVsZHNbMV0hO1xuICBpZiAoIXlGaWVsZCkge1xuICAgIHJldHVybiBidWlsZGVyOyAvLyBlYXJseSBhYm9ydCAoYXZvaWRzIGVycm9yKVxuICB9XG5cbiAgY29uc3QgeUZpZWxkQ29uZmlnOiBGaWVsZENvbmZpZyB8IHVuZGVmaW5lZCA9IHlGaWVsZC5jb25maWc/LmN1c3RvbTtcbiAgY29uc3QgeVNjYWxlID0geUZpZWxkQ29uZmlnPy5zY2FsZURpc3RyaWJ1dGlvbiA/PyB7IHR5cGU6IFNjYWxlRGlzdHJpYnV0aW9uLkxpbmVhciB9O1xuICBjb25zdCB5QXhpc1JldmVyc2UgPSBCb29sZWFuKHlBeGlzQ29uZmlnLnJldmVyc2UpO1xuICBjb25zdCBpc1NwYXJzZUhlYXRtYXAgPSBoZWF0bWFwVHlwZSA9PT0gRGF0YUZyYW1lVHlwZS5IZWF0bWFwQ2VsbHMgJiYgIWlzSGVhdG1hcENlbGxzRGVuc2UoZGF0YVJlZi5jdXJyZW50Py5oZWF0bWFwISk7XG4gIGNvbnN0IHNob3VsZFVzZUxvZ1NjYWxlID0geVNjYWxlLnR5cGUgIT09IFNjYWxlRGlzdHJpYnV0aW9uLkxpbmVhciB8fCBpc1NwYXJzZUhlYXRtYXA7XG4gIGNvbnN0IGlzT3JkaW5hbFkgPSByZWFkSGVhdG1hcFJvd3NDdXN0b21NZXRhKGRhdGFSZWYuY3VycmVudD8uaGVhdG1hcCkueU9yZGluYWxEaXNwbGF5ICE9IG51bGw7XG5cbiAgLy8gcmFuZG9tIHRvIHByZXZlbnQgc3luY2luZyB5IGluIG90aGVyIGhlYXRtYXBzXG4gIC8vIFRPRE86IHRyeSB0byBtYXRjaCBUaW1lU2VyaWVzIHkga2V5Z2VuIGFsZ28gdG8gc3luYyB3aXRoIFRpbWVTZXJpZXMgcGFuZWxzICh3aGVuIG5vdCBpc09yZGluYWxZKVxuICBjb25zdCB5U2NhbGVLZXkgPSAneV8nICsgKE1hdGgucmFuZG9tKCkgKyAxKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpO1xuXG4gIGJ1aWxkZXIuYWRkU2NhbGUoe1xuICAgIHNjYWxlS2V5OiB5U2NhbGVLZXksXG4gICAgaXNUaW1lOiBmYWxzZSxcbiAgICAvLyBkaXN0cmlidXRpb246IFNjYWxlRGlzdHJpYnV0aW9uLk9yZGluYWwsIC8vIGRvZXMgbm90IHdvcmsgd2l0aCBmYWNldHMvc2NhdHRlciB5ZXRcbiAgICBvcmllbnRhdGlvbjogU2NhbGVPcmllbnRhdGlvbi5WZXJ0aWNhbCxcbiAgICBkaXJlY3Rpb246IHlBeGlzUmV2ZXJzZSA/IFNjYWxlRGlyZWN0aW9uLkRvd24gOiBTY2FsZURpcmVjdGlvbi5VcCxcbiAgICAvLyBzaG91bGQgYmUgdHdlYWthYmxlIG1hbnVhbGx5XG4gICAgZGlzdHJpYnV0aW9uOiBzaG91bGRVc2VMb2dTY2FsZSA/IFNjYWxlRGlzdHJpYnV0aW9uLkxvZyA6IFNjYWxlRGlzdHJpYnV0aW9uLkxpbmVhcixcbiAgICBsb2c6IHlTY2FsZS5sb2cgPz8gMixcbiAgICByYW5nZTpcbiAgICAgIC8vIHNwYXJzZSBhbHJlYWR5IGFjY291bnRzIGZvciBsZS9nZSBieSBleHBsaWNpdCB5TWluICYgeU1heCBjZWxsIGJvdW5kcywgc28gbm8gbmVlZCB0byBleHBhbmQgeSByYW5nZVxuICAgICAgaXNTcGFyc2VIZWF0bWFwXG4gICAgICAgID8gKHUsIGRhdGFNaW4sIGRhdGFNYXgpID0+IHtcbiAgICAgICAgICAgIGxldCBzY2FsZU1pbjogbnVtYmVyIHwgbnVsbCwgc2NhbGVNYXg6IG51bWJlciB8IG51bGw7XG5cbiAgICAgICAgICAgIFtzY2FsZU1pbiwgc2NhbGVNYXhdID0gc2hvdWxkVXNlTG9nU2NhbGVcbiAgICAgICAgICAgICAgPyB1UGxvdC5yYW5nZUxvZyhkYXRhTWluLCBkYXRhTWF4LCAoeVNjYWxlLmxvZyA/PyAyKSBhcyB1bmtub3duIGFzIHVQbG90LlNjYWxlLkxvZ0Jhc2UsIHRydWUpXG4gICAgICAgICAgICAgIDogW2RhdGFNaW4sIGRhdGFNYXhdO1xuXG4gICAgICAgICAgICBpZiAoc2hvdWxkVXNlTG9nU2NhbGUgJiYgIWlzT3JkaW5hbFkpIHtcbiAgICAgICAgICAgICAgbGV0IHlFeHAgPSB1LnNjYWxlc1t5U2NhbGVLZXldLmxvZyE7XG4gICAgICAgICAgICAgIGxldCBsb2cgPSB5RXhwID09PSAyID8gTWF0aC5sb2cyIDogTWF0aC5sb2cxMDtcblxuICAgICAgICAgICAgICBsZXQgeyBtaW46IGV4cGxpY2l0TWluLCBtYXg6IGV4cGxpY2l0TWF4IH0gPSB5QXhpc0NvbmZpZztcblxuICAgICAgICAgICAgICAvLyBndWFyZCBhZ2FpbnN0IDw9IDBcbiAgICAgICAgICAgICAgaWYgKGV4cGxpY2l0TWluICE9IG51bGwgJiYgZXhwbGljaXRNaW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gc25hcCB0byBtYWduaXR1ZGVcbiAgICAgICAgICAgICAgICBsZXQgbWluTG9nID0gbG9nKGV4cGxpY2l0TWluKTtcbiAgICAgICAgICAgICAgICBzY2FsZU1pbiA9IHlFeHAgKiogaW5jclJvdW5kRG4obWluTG9nLCAxKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChleHBsaWNpdE1heCAhPSBudWxsICYmIGV4cGxpY2l0TWF4ID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCBtYXhMb2cgPSBsb2coZXhwbGljaXRNYXgpO1xuICAgICAgICAgICAgICAgIHNjYWxlTWF4ID0geUV4cCAqKiBpbmNyUm91bmRVcChtYXhMb2csIDEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBbc2NhbGVNaW4sIHNjYWxlTWF4XTtcbiAgICAgICAgICB9XG4gICAgICAgIDogLy8gZGVuc2UgYW5kIG9yZGluYWwgb25seSBoYXZlIG9uZSBvZiB5TWlufHlNYXh8eSwgc28gZXhwYW5kIHJhbmdlIGJ5IG9uZSBjZWxsIGluIHRoZSBkaXJlY3Rpb24gb2YgbGUvZ2UvdW5rbm93blxuICAgICAgICAgICh1LCBkYXRhTWluLCBkYXRhTWF4KSA9PiB7XG4gICAgICAgICAgICBsZXQgc2NhbGVNaW4gPSBkYXRhTWluLFxuICAgICAgICAgICAgICBzY2FsZU1heCA9IGRhdGFNYXg7XG5cbiAgICAgICAgICAgIGxldCB7IG1pbjogZXhwbGljaXRNaW4sIG1heDogZXhwbGljaXRNYXggfSA9IHlBeGlzQ29uZmlnO1xuXG4gICAgICAgICAgICAvLyBsb2dhcml0aG1pYyBleHBhbnNpb25cbiAgICAgICAgICAgIGlmIChzaG91bGRVc2VMb2dTY2FsZSkge1xuICAgICAgICAgICAgICBsZXQgeUV4cCA9IHUuc2NhbGVzW3lTY2FsZUtleV0ubG9nITtcblxuICAgICAgICAgICAgICBsZXQgbWluRXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgbGV0IG1heEV4cGFuZGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgbGV0IGxvZyA9IHlFeHAgPT09IDIgPyBNYXRoLmxvZzIgOiBNYXRoLmxvZzEwO1xuXG4gICAgICAgICAgICAgIGlmICh5U2l6ZURpdmlzb3IgIT09IDEpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWluTG9nID0gbG9nKGRhdGFNaW4pO1xuICAgICAgICAgICAgICAgIGxldCBtYXhMb2cgPSBsb2coZGF0YU1heCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIobWluTG9nKSkge1xuICAgICAgICAgICAgICAgICAgc2NhbGVNaW4gPSB5RXhwICoqIGluY3JSb3VuZERuKG1pbkxvZywgMSk7XG4gICAgICAgICAgICAgICAgICBtaW5FeHBhbmRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG1heExvZykpIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlTWF4ID0geUV4cCAqKiBpbmNyUm91bmRVcChtYXhMb2csIDEpO1xuICAgICAgICAgICAgICAgICAgbWF4RXhwYW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChkYXRhUmVmLmN1cnJlbnQ/LnlMYXlvdXQgPT09IEhlYXRtYXBDZWxsTGF5b3V0LmxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtaW5FeHBhbmRlZCkge1xuICAgICAgICAgICAgICAgICAgc2NhbGVNaW4gLz0geUV4cDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVJlZi5jdXJyZW50Py55TGF5b3V0ID09PSBIZWF0bWFwQ2VsbExheW91dC5nZSkge1xuICAgICAgICAgICAgICAgIGlmICghbWF4RXhwYW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlTWF4ICo9IHlFeHA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNjYWxlTWluIC89IHlFeHAgLyAyO1xuICAgICAgICAgICAgICAgIHNjYWxlTWF4ICo9IHlFeHAgLyAyO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCFpc09yZGluYWxZKSB7XG4gICAgICAgICAgICAgICAgLy8gZ3VhcmQgYWdhaW5zdCA8PSAwXG4gICAgICAgICAgICAgICAgaWYgKGV4cGxpY2l0TWluICE9IG51bGwgJiYgZXhwbGljaXRNaW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAvLyBzbmFwIGRvd24gdG8gbWFnbml0dWRlXG4gICAgICAgICAgICAgICAgICBsZXQgbWluTG9nID0gbG9nKGV4cGxpY2l0TWluKTtcbiAgICAgICAgICAgICAgICAgIHNjYWxlTWluID0geUV4cCAqKiBpbmNyUm91bmREbihtaW5Mb2csIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChleHBsaWNpdE1heCAhPSBudWxsICYmIGV4cGxpY2l0TWF4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgbGV0IG1heExvZyA9IGxvZyhleHBsaWNpdE1heCk7XG4gICAgICAgICAgICAgICAgICBzY2FsZU1heCA9IHlFeHAgKiogaW5jclJvdW5kVXAobWF4TG9nLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGxpbmVhciBleHBhbnNpb25cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBsZXQgYnVja2V0U2l6ZSA9IGRhdGFSZWYuY3VycmVudD8ueUJ1Y2tldFNpemU7XG5cbiAgICAgICAgICAgICAgaWYgKGJ1Y2tldFNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBidWNrZXRTaXplID0gMTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChidWNrZXRTaXplKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFSZWYuY3VycmVudD8ueUxheW91dCA9PT0gSGVhdG1hcENlbGxMYXlvdXQubGUpIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlTWluIC09IGJ1Y2tldFNpemUhO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVJlZi5jdXJyZW50Py55TGF5b3V0ID09PSBIZWF0bWFwQ2VsbExheW91dC5nZSkge1xuICAgICAgICAgICAgICAgICAgc2NhbGVNYXggKz0gYnVja2V0U2l6ZSE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlTWluIC09IGJ1Y2tldFNpemUhIC8gMjtcbiAgICAgICAgICAgICAgICAgIHNjYWxlTWF4ICs9IGJ1Y2tldFNpemUhIC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaG93IHRvIGV4cGFuZCBzY2FsZSByYW5nZSBpZiBpbmZlcnJlZCBub24tcmVndWxhciBvciBsb2cgYnVja2V0cz9cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghaXNPcmRpbmFsWSkge1xuICAgICAgICAgICAgICAgIHNjYWxlTWluID0gZXhwbGljaXRNaW4gPz8gc2NhbGVNaW47XG4gICAgICAgICAgICAgICAgc2NhbGVNYXggPSBleHBsaWNpdE1heCA/PyBzY2FsZU1heDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gW3NjYWxlTWluLCBzY2FsZU1heF07XG4gICAgICAgICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgZGlzcFkgPSB5RmllbGQuZGlzcGxheSA/PyBnZXRWYWx1ZUZvcm1hdCgnc2hvcnQnKTtcblxuICBidWlsZGVyLmFkZEF4aXMoe1xuICAgIHNjYWxlS2V5OiB5U2NhbGVLZXksXG4gICAgc2hvdzogeUF4aXNDb25maWcuYXhpc1BsYWNlbWVudCAhPT0gQXhpc1BsYWNlbWVudC5IaWRkZW4sXG4gICAgcGxhY2VtZW50OiB5QXhpc0NvbmZpZy5heGlzUGxhY2VtZW50IHx8IEF4aXNQbGFjZW1lbnQuTGVmdCxcbiAgICBzaXplOiB5QXhpc0NvbmZpZy5heGlzV2lkdGggfHwgbnVsbCxcbiAgICBsYWJlbDogeUF4aXNDb25maWcuYXhpc0xhYmVsLFxuICAgIHRoZW1lOiB0aGVtZSxcbiAgICBmb3JtYXRWYWx1ZTogKHYsIGRlY2ltYWxzKSA9PiBmb3JtYXR0ZWRWYWx1ZVRvU3RyaW5nKGRpc3BZKHYsIGRlY2ltYWxzKSksXG4gICAgc3BsaXRzOiBpc09yZGluYWxZXG4gICAgICA/IChzZWxmOiB1UGxvdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG1ldGEgPSByZWFkSGVhdG1hcFJvd3NDdXN0b21NZXRhKGRhdGFSZWYuY3VycmVudD8uaGVhdG1hcCk7XG4gICAgICAgICAgaWYgKCFtZXRhLnlPcmRpbmFsRGlzcGxheSkge1xuICAgICAgICAgICAgcmV0dXJuIFswLCAxXTsgLy8/XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBzcGxpdHMgPSBtZXRhLnlPcmRpbmFsRGlzcGxheS5tYXAoKHYsIGlkeCkgPT4gaWR4KTtcblxuICAgICAgICAgIHN3aXRjaCAoZGF0YVJlZi5jdXJyZW50Py55TGF5b3V0KSB7XG4gICAgICAgICAgICBjYXNlIEhlYXRtYXBDZWxsTGF5b3V0LmxlOlxuICAgICAgICAgICAgICBzcGxpdHMudW5zaGlmdCgtMSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBIZWF0bWFwQ2VsbExheW91dC5nZTpcbiAgICAgICAgICAgICAgc3BsaXRzLnB1c2goc3BsaXRzLmxlbmd0aCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNraXAgbGFiZWxzIHdoZW4gdGhlIGhlaWdodCBpcyB0b28gc21hbGxcbiAgICAgICAgICBpZiAoc2VsZi5oZWlnaHQgPCA2MCkge1xuICAgICAgICAgICAgc3BsaXRzID0gW3NwbGl0c1swXSwgc3BsaXRzW3NwbGl0cy5sZW5ndGggLSAxXV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdoaWxlIChzcGxpdHMubGVuZ3RoID4gMyAmJiAoc2VsZi5oZWlnaHQgLSAxNSkgLyBzcGxpdHMubGVuZ3RoIDwgMTApIHtcbiAgICAgICAgICAgICAgc3BsaXRzID0gc3BsaXRzLmZpbHRlcigodiwgaWR4KSA9PiBpZHggJSAyID09PSAwKTsgLy8gcmVtb3ZlIGhhbGYgdGhlIGl0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzcGxpdHM7XG4gICAgICAgIH1cbiAgICAgIDogdW5kZWZpbmVkLFxuICAgIHZhbHVlczogaXNPcmRpbmFsWVxuICAgICAgPyAoc2VsZjogdVBsb3QsIHNwbGl0cykgPT4ge1xuICAgICAgICAgIGNvbnN0IG1ldGEgPSByZWFkSGVhdG1hcFJvd3NDdXN0b21NZXRhKGRhdGFSZWYuY3VycmVudD8uaGVhdG1hcCk7XG4gICAgICAgICAgaWYgKG1ldGEueU9yZGluYWxEaXNwbGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gc3BsaXRzLm1hcCgodikgPT5cbiAgICAgICAgICAgICAgdiA8IDBcbiAgICAgICAgICAgICAgICA/IG1ldGEueU1pbkRpc3BsYXkgPz8gJycgLy8gQ2hlY2sgcHJvbWV0aGV1cyBzdHlsZSBsYWJlbHNcbiAgICAgICAgICAgICAgICA6IG1ldGEueU9yZGluYWxEaXNwbGF5W3ZdID8/ICcnXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3BsaXRzO1xuICAgICAgICB9XG4gICAgICA6IHVuZGVmaW5lZCxcbiAgfSk7XG5cbiAgY29uc3QgcGF0aEJ1aWxkZXIgPSBpc1NwYXJzZUhlYXRtYXAgPyBoZWF0bWFwUGF0aHNTcGFyc2UgOiBoZWF0bWFwUGF0aHNEZW5zZTtcblxuICAvLyBoZWF0bWFwIGxheWVyXG4gIGJ1aWxkZXIuYWRkU2VyaWVzKHtcbiAgICBmYWNldHM6IFtcbiAgICAgIHtcbiAgICAgICAgc2NhbGU6IHhTY2FsZUtleSxcbiAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgICAgc29ydGVkOiAxLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc2NhbGU6IHlTY2FsZUtleSxcbiAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBwYXRoQnVpbGRlcjogcGF0aEJ1aWxkZXIoe1xuICAgICAgZWFjaDogKHUsIHNlcmllc0lkeCwgZGF0YUlkeCwgeCwgeSwgeFNpemUsIHlTaXplKSA9PiB7XG4gICAgICAgIHF0LmFkZCh7XG4gICAgICAgICAgeDogeCAtIHUuYmJveC5sZWZ0LFxuICAgICAgICAgIHk6IHkgLSB1LmJib3gudG9wLFxuICAgICAgICAgIHc6IHhTaXplLFxuICAgICAgICAgIGg6IHlTaXplLFxuICAgICAgICAgIHNpZHg6IHNlcmllc0lkeCxcbiAgICAgICAgICBkaWR4OiBkYXRhSWR4LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnYXA6IGNlbGxHYXAsXG4gICAgICBoaWRlTEUsXG4gICAgICBoaWRlR0UsXG4gICAgICB4QWxpZ246XG4gICAgICAgIGRhdGFSZWYuY3VycmVudD8ueExheW91dCA9PT0gSGVhdG1hcENlbGxMYXlvdXQubGVcbiAgICAgICAgICA/IC0xXG4gICAgICAgICAgOiBkYXRhUmVmLmN1cnJlbnQ/LnhMYXlvdXQgPT09IEhlYXRtYXBDZWxsTGF5b3V0LmdlXG4gICAgICAgICAgPyAxXG4gICAgICAgICAgOiAwLFxuICAgICAgeUFsaWduOiAoKGRhdGFSZWYuY3VycmVudD8ueUxheW91dCA9PT0gSGVhdG1hcENlbGxMYXlvdXQubGVcbiAgICAgICAgPyAtMVxuICAgICAgICA6IGRhdGFSZWYuY3VycmVudD8ueUxheW91dCA9PT0gSGVhdG1hcENlbGxMYXlvdXQuZ2VcbiAgICAgICAgPyAxXG4gICAgICAgIDogMCkgKiAoeUF4aXNSZXZlcnNlID8gLTEgOiAxKSkgYXMgLTEgfCAwIHwgMSxcbiAgICAgIHlTaXplRGl2aXNvcixcbiAgICAgIGRpc3A6IHtcbiAgICAgICAgZmlsbDoge1xuICAgICAgICAgIHZhbHVlczogKHUsIHNlcmllc0lkeCkgPT4gZGF0YVJlZi5jdXJyZW50Py5oZWF0bWFwQ29sb3JzPy52YWx1ZXMhLFxuICAgICAgICAgIGluZGV4OiBkYXRhUmVmLmN1cnJlbnQ/LmhlYXRtYXBDb2xvcnM/LnBhbGV0dGUhLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KSxcbiAgICB0aGVtZSxcbiAgICBzY2FsZUtleTogJycsIC8vIGZhY2V0cycgc2NhbGVzIHVzZWQgKGFib3ZlKVxuICB9KTtcblxuICAvLyBleGVtcGxhcnMgbGF5ZXJcbiAgYnVpbGRlci5hZGRTZXJpZXMoe1xuICAgIGZhY2V0czogW1xuICAgICAge1xuICAgICAgICBzY2FsZTogeFNjYWxlS2V5LFxuICAgICAgICBhdXRvOiB0cnVlLFxuICAgICAgICBzb3J0ZWQ6IDEsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBzY2FsZTogeVNjYWxlS2V5LFxuICAgICAgICBhdXRvOiB0cnVlLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHBhdGhCdWlsZGVyOiBoZWF0bWFwUGF0aHNQb2ludHMoXG4gICAgICB7XG4gICAgICAgIGVhY2g6ICh1LCBzZXJpZXNJZHgsIGRhdGFJZHgsIHgsIHksIHhTaXplLCB5U2l6ZSkgPT4ge1xuICAgICAgICAgIHF0LmFkZCh7XG4gICAgICAgICAgICB4OiB4IC0gdS5iYm94LmxlZnQsXG4gICAgICAgICAgICB5OiB5IC0gdS5iYm94LnRvcCxcbiAgICAgICAgICAgIHc6IHhTaXplLFxuICAgICAgICAgICAgaDogeVNpemUsXG4gICAgICAgICAgICBzaWR4OiBzZXJpZXNJZHgsXG4gICAgICAgICAgICBkaWR4OiBkYXRhSWR4LFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGV4ZW1wbGFyRmlsbENvbG9yXG4gICAgKSxcbiAgICB0aGVtZSxcbiAgICBzY2FsZUtleTogJycsIC8vIGZhY2V0cycgc2NhbGVzIHVzZWQgKGFib3ZlKVxuICB9KTtcblxuICBjb25zdCBjdXJzb3I6IEN1cnNvciA9IHtcbiAgICBkcmFnOiB7XG4gICAgICB4OiB0cnVlLFxuICAgICAgeTogZmFsc2UsXG4gICAgICBzZXRTY2FsZTogZmFsc2UsXG4gICAgfSxcbiAgICBkYXRhSWR4OiAodSwgc2VyaWVzSWR4KSA9PiB7XG4gICAgICBpZiAoc2VyaWVzSWR4ID09PSAxKSB7XG4gICAgICAgIGhSZWN0ID0gbnVsbDtcblxuICAgICAgICBsZXQgY3ggPSB1LmN1cnNvci5sZWZ0ISAqIHB4UmF0aW87XG4gICAgICAgIGxldCBjeSA9IHUuY3Vyc29yLnRvcCEgKiBweFJhdGlvO1xuXG4gICAgICAgIHF0LmdldChjeCwgY3ksIDEsIDEsIChvKSA9PiB7XG4gICAgICAgICAgaWYgKHBvaW50V2l0aGluKGN4LCBjeSwgby54LCBvLnksIG8ueCArIG8udywgby55ICsgby5oKSkge1xuICAgICAgICAgICAgaFJlY3QgPSBvO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoUmVjdCAmJiBzZXJpZXNJZHggPT09IGhSZWN0LnNpZHggPyBoUmVjdC5kaWR4IDogbnVsbDtcbiAgICB9LFxuICAgIHBvaW50czoge1xuICAgICAgZmlsbDogJ3JnYmEoMjU1LDI1NSwyNTUsIDAuMyknLFxuICAgICAgYmJveDogKHUsIHNlcmllc0lkeCkgPT4ge1xuICAgICAgICBsZXQgaXNIb3ZlcmVkID0gaFJlY3QgJiYgc2VyaWVzSWR4ID09PSBoUmVjdC5zaWR4O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGVmdDogaXNIb3ZlcmVkID8gaFJlY3QhLnggLyBweFJhdGlvIDogLTEwLFxuICAgICAgICAgIHRvcDogaXNIb3ZlcmVkID8gaFJlY3QhLnkgLyBweFJhdGlvIDogLTEwLFxuICAgICAgICAgIHdpZHRoOiBpc0hvdmVyZWQgPyBoUmVjdCEudyAvIHB4UmF0aW8gOiAwLFxuICAgICAgICAgIGhlaWdodDogaXNIb3ZlcmVkID8gaFJlY3QhLmggLyBweFJhdGlvIDogMCxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICBpZiAoc3luYyAmJiBzeW5jKCkgIT09IERhc2hib2FyZEN1cnNvclN5bmMuT2ZmKSB7XG4gICAgY3Vyc29yLnN5bmMgPSB7XG4gICAgICBrZXk6IGV2ZW50c1Njb3BlLFxuICAgICAgc2NhbGVzOiBbeFNjYWxlS2V5LCB5U2NhbGVLZXldLFxuICAgICAgZmlsdGVyczoge1xuICAgICAgICBwdWI6ICh0eXBlOiBzdHJpbmcsIHNyYzogdVBsb3QsIHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciwgZGF0YUlkeDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgaWYgKHggPCAwKSB7XG4gICAgICAgICAgICBwYXlsb2FkLnBvaW50W3hTY2FsZVVuaXRdID0gbnVsbDtcbiAgICAgICAgICAgIGV2ZW50QnVzLnB1Ymxpc2gobmV3IERhdGFIb3ZlckNsZWFyRXZlbnQoKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBheWxvYWQucG9pbnRbeFNjYWxlVW5pdF0gPSBzcmMucG9zVG9WYWwoeCwgeFNjYWxlS2V5KTtcbiAgICAgICAgICAgIGV2ZW50QnVzLnB1Ymxpc2goaG92ZXJFdmVudCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICBidWlsZGVyLnNldFN5bmMoKTtcbiAgfVxuXG4gIGJ1aWxkZXIuc2V0Q3Vyc29yKGN1cnNvcik7XG5cbiAgcmV0dXJuIGJ1aWxkZXI7XG59XG5cbmNvbnN0IENSSVNQX0VER0VTX0dBUF9NSU4gPSA0O1xuXG5leHBvcnQgZnVuY3Rpb24gaGVhdG1hcFBhdGhzRGVuc2Uob3B0czogUGF0aGJ1aWxkZXJPcHRzKSB7XG4gIGNvbnN0IHsgZGlzcCwgZWFjaCwgZ2FwID0gMSwgaGlkZUxFID0gLUluZmluaXR5LCBoaWRlR0UgPSBJbmZpbml0eSwgeEFsaWduID0gMSwgeUFsaWduID0gMSwgeVNpemVEaXZpc29yID0gMSB9ID0gb3B0cztcblxuICBjb25zdCBweFJhdGlvID0gZGV2aWNlUGl4ZWxSYXRpbztcblxuICBjb25zdCByb3VuZCA9IGdhcCEgPj0gQ1JJU1BfRURHRVNfR0FQX01JTiA/IE1hdGgucm91bmQgOiAodjogbnVtYmVyKSA9PiB2O1xuXG4gIGNvbnN0IGNlbGxHYXAgPSBNYXRoLnJvdW5kKGdhcCEgKiBweFJhdGlvKTtcblxuICByZXR1cm4gKHU6IHVQbG90LCBzZXJpZXNJZHg6IG51bWJlcikgPT4ge1xuICAgIHVQbG90Lm9yaWVudChcbiAgICAgIHUsXG4gICAgICBzZXJpZXNJZHgsXG4gICAgICAoXG4gICAgICAgIHNlcmllcyxcbiAgICAgICAgZGF0YVgsXG4gICAgICAgIGRhdGFZLFxuICAgICAgICBzY2FsZVgsXG4gICAgICAgIHNjYWxlWSxcbiAgICAgICAgdmFsVG9Qb3NYLFxuICAgICAgICB2YWxUb1Bvc1ksXG4gICAgICAgIHhPZmYsXG4gICAgICAgIHlPZmYsXG4gICAgICAgIHhEaW0sXG4gICAgICAgIHlEaW0sXG4gICAgICAgIG1vdmVUbyxcbiAgICAgICAgbGluZVRvLFxuICAgICAgICByZWN0LFxuICAgICAgICBhcmNcbiAgICAgICkgPT4ge1xuICAgICAgICBsZXQgZCA9IHUuZGF0YVtzZXJpZXNJZHhdO1xuICAgICAgICBjb25zdCB4cyA9IGRbMF0gYXMgdW5rbm93biBhcyBudW1iZXJbXTtcbiAgICAgICAgY29uc3QgeXMgPSBkWzFdIGFzIHVua25vd24gYXMgbnVtYmVyW107XG4gICAgICAgIGNvbnN0IGNvdW50cyA9IGRbMl0gYXMgdW5rbm93biBhcyBudW1iZXJbXTtcbiAgICAgICAgY29uc3QgZGxlbiA9IHhzLmxlbmd0aDtcblxuICAgICAgICAvLyBmaWxsIGNvbG9ycyBhcmUgbWFwcGVkIGZyb20gaW50ZXJwb2xhdGluZyBkZW5zaXRpZXMgLyBjb3VudHMgYWxvbmcgc29tZSBncmFkaWVudFxuICAgICAgICAvLyAoc2hvdWxkIGJlIHF1YW50aXplZCB0byA2NCBjb2xvcnMvbGV2ZWxzIG1heC4gZS5nLiAxNilcbiAgICAgICAgbGV0IGZpbGxzID0gZGlzcC5maWxsLnZhbHVlcyh1LCBzZXJpZXNJZHgpO1xuICAgICAgICBsZXQgZmlsbFBhbGV0dGUgPSBkaXNwLmZpbGwuaW5kZXggPz8gWy4uLm5ldyBTZXQoZmlsbHMpXTtcblxuICAgICAgICBsZXQgZmlsbFBhdGhzID0gZmlsbFBhbGV0dGUubWFwKChjb2xvcikgPT4gbmV3IFBhdGgyRCgpKTtcblxuICAgICAgICAvLyBkZXRlY3QgeCBhbmQgeSBiaW4gcXR5cyBieSBkZXRlY3RpbmcgbGF5b3V0IHJlcGV0aXRpb24gaW4geCAmIHkgZGF0YVxuICAgICAgICBsZXQgeUJpblF0eSA9IGRsZW4gLSB5cy5sYXN0SW5kZXhPZih5c1swXSk7XG4gICAgICAgIGxldCB4QmluUXR5ID0gZGxlbiAvIHlCaW5RdHk7XG4gICAgICAgIGxldCB5QmluSW5jciA9IHlzWzFdIC0geXNbMF0gfHwgc2NhbGVZLm1heCEgLSBzY2FsZVkubWluITtcbiAgICAgICAgbGV0IHhCaW5JbmNyID0geHNbeUJpblF0eV0gLSB4c1swXTtcblxuICAgICAgICAvLyB1bmlmb3JtIHRpbGUgc2l6ZXMgYmFzZWQgb24gem9vbSBsZXZlbFxuICAgICAgICBsZXQgeFNpemU6IG51bWJlcjtcbiAgICAgICAgbGV0IHlTaXplOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKHNjYWxlWC5kaXN0ciA9PT0gMykge1xuICAgICAgICAgIHhTaXplID0gTWF0aC5hYnModmFsVG9Qb3NYKHhzWzBdICogc2NhbGVYLmxvZyEsIHNjYWxlWCwgeERpbSwgeE9mZikgLSB2YWxUb1Bvc1goeHNbMF0sIHNjYWxlWCwgeERpbSwgeE9mZikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHhTaXplID0gTWF0aC5hYnModmFsVG9Qb3NYKHhCaW5JbmNyLCBzY2FsZVgsIHhEaW0sIHhPZmYpIC0gdmFsVG9Qb3NYKDAsIHNjYWxlWCwgeERpbSwgeE9mZikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNjYWxlWS5kaXN0ciA9PT0gMykge1xuICAgICAgICAgIHlTaXplID1cbiAgICAgICAgICAgIE1hdGguYWJzKHZhbFRvUG9zWSh5c1swXSAqIHNjYWxlWS5sb2chLCBzY2FsZVksIHlEaW0sIHlPZmYpIC0gdmFsVG9Qb3NZKHlzWzBdLCBzY2FsZVksIHlEaW0sIHlPZmYpKSAvXG4gICAgICAgICAgICB5U2l6ZURpdmlzb3I7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeVNpemUgPSBNYXRoLmFicyh2YWxUb1Bvc1koeUJpbkluY3IsIHNjYWxlWSwgeURpbSwgeU9mZikgLSB2YWxUb1Bvc1koMCwgc2NhbGVZLCB5RGltLCB5T2ZmKSkgLyB5U2l6ZURpdmlzb3I7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGFtcCBtaW4gdGlsZSBzaXplIHRvIDFweFxuICAgICAgICB4U2l6ZSA9IE1hdGgubWF4KDEsIHJvdW5kKHhTaXplIC0gY2VsbEdhcCkpO1xuICAgICAgICB5U2l6ZSA9IE1hdGgubWF4KDEsIHJvdW5kKHlTaXplIC0gY2VsbEdhcCkpO1xuXG4gICAgICAgIC8vIGJ1Y2tldCBhZ2cgZGlyZWN0aW9uXG4gICAgICAgIC8vIGxldCB4Q2VpbCA9IGZhbHNlO1xuICAgICAgICAvLyBsZXQgeUNlaWwgPSBmYWxzZTtcblxuICAgICAgICBsZXQgeE9mZnNldCA9IHhBbGlnbiA9PT0gLTEgPyAteFNpemUgOiB4QWxpZ24gPT09IDAgPyAteFNpemUgLyAyIDogMDtcbiAgICAgICAgbGV0IHlPZmZzZXQgPSB5QWxpZ24gPT09IDEgPyAteVNpemUgOiB5QWxpZ24gPT09IDAgPyAteVNpemUgLyAyIDogMDtcblxuICAgICAgICAvLyBwcmUtY29tcHV0ZSB4IGFuZCB5IG9mZnNldHNcbiAgICAgICAgbGV0IGN5cyA9IHlzLnNsaWNlKDAsIHlCaW5RdHkpLm1hcCgoeSkgPT4gcm91bmQodmFsVG9Qb3NZKHksIHNjYWxlWSwgeURpbSwgeU9mZikgKyB5T2Zmc2V0KSk7XG4gICAgICAgIGxldCBjeHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiB4QmluUXR5IH0sICh2LCBpKSA9PlxuICAgICAgICAgIHJvdW5kKHZhbFRvUG9zWCh4c1tpICogeUJpblF0eV0sIHNjYWxlWCwgeERpbSwgeE9mZikgKyB4T2Zmc2V0KVxuICAgICAgICApO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGxlbjsgaSsrKSB7XG4gICAgICAgICAgaWYgKGNvdW50c1tpXSA+IGhpZGVMRSAmJiBjb3VudHNbaV0gPCBoaWRlR0UpIHtcbiAgICAgICAgICAgIGxldCBjeCA9IGN4c1t+fihpIC8geUJpblF0eSldO1xuICAgICAgICAgICAgbGV0IGN5ID0gY3lzW2kgJSB5QmluUXR5XTtcblxuICAgICAgICAgICAgbGV0IGZpbGxQYXRoID0gZmlsbFBhdGhzW2ZpbGxzW2ldXTtcblxuICAgICAgICAgICAgcmVjdChmaWxsUGF0aCwgY3gsIGN5LCB4U2l6ZSwgeVNpemUpO1xuXG4gICAgICAgICAgICBlYWNoKHUsIDEsIGksIGN4LCBjeSwgeFNpemUsIHlTaXplKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB1LmN0eC5zYXZlKCk7XG4gICAgICAgIC8vXHR1LmN0eC5nbG9iYWxBbHBoYSA9IDAuODtcbiAgICAgICAgdS5jdHgucmVjdCh1LmJib3gubGVmdCwgdS5iYm94LnRvcCwgdS5iYm94LndpZHRoLCB1LmJib3guaGVpZ2h0KTtcbiAgICAgICAgdS5jdHguY2xpcCgpO1xuICAgICAgICBmaWxsUGF0aHMuZm9yRWFjaCgocCwgaSkgPT4ge1xuICAgICAgICAgIHUuY3R4LmZpbGxTdHlsZSA9IGZpbGxQYWxldHRlW2ldO1xuICAgICAgICAgIHUuY3R4LmZpbGwocCk7XG4gICAgICAgIH0pO1xuICAgICAgICB1LmN0eC5yZXN0b3JlKCk7XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiBudWxsO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGVhdG1hcFBhdGhzUG9pbnRzKG9wdHM6IFBvaW50c0J1aWxkZXJPcHRzLCBleGVtcGxhckNvbG9yOiBzdHJpbmcpIHtcbiAgcmV0dXJuICh1OiB1UGxvdCwgc2VyaWVzSWR4OiBudW1iZXIpID0+IHtcbiAgICB1UGxvdC5vcmllbnQoXG4gICAgICB1LFxuICAgICAgc2VyaWVzSWR4LFxuICAgICAgKFxuICAgICAgICBzZXJpZXMsXG4gICAgICAgIGRhdGFYLFxuICAgICAgICBkYXRhWSxcbiAgICAgICAgc2NhbGVYLFxuICAgICAgICBzY2FsZVksXG4gICAgICAgIHZhbFRvUG9zWCxcbiAgICAgICAgdmFsVG9Qb3NZLFxuICAgICAgICB4T2ZmLFxuICAgICAgICB5T2ZmLFxuICAgICAgICB4RGltLFxuICAgICAgICB5RGltLFxuICAgICAgICBtb3ZlVG8sXG4gICAgICAgIGxpbmVUbyxcbiAgICAgICAgcmVjdCxcbiAgICAgICAgYXJjXG4gICAgICApID0+IHtcbiAgICAgICAgLy9jb25zb2xlLnRpbWUoJ2hlYXRtYXBQYXRoc1NwYXJzZScpO1xuXG4gICAgICAgIGxldCBwb2ludHMgPSBuZXcgUGF0aDJEKCk7XG4gICAgICAgIGxldCBmaWxsUGF0aHMgPSBbcG9pbnRzXTtcbiAgICAgICAgbGV0IGZpbGxQYWxldHRlID0gW2V4ZW1wbGFyQ29sb3IgPz8gJ3JnYmEoMjU1LDAsMjU1LDAuNyknXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFYLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IHlWYWwgPSBkYXRhWVtpXSE7XG4gICAgICAgICAgeVZhbCAtPSAwLjU7IC8vIGNlbnRlciB2ZXJ0aWNhbGx5IGluIGJ1Y2tldCAod2hlbiB0aWxlcyBhcmUgbGUpXG4gICAgICAgICAgLy8geS1yYW5kb21pemUgdmVydGljYWxseSB0byBkaXN0cmlidXRlIGV4ZW1wbGFycyBpbiBzYW1lIGJ1Y2tldCBhdCBzYW1lIHRpbWVcbiAgICAgICAgICBsZXQgcmFuZFNpZ24gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpICogMiAtIDE7XG4gICAgICAgICAgeVZhbCArPSByYW5kU2lnbiAqIDAuNSAqIE1hdGgucmFuZG9tKCk7XG5cbiAgICAgICAgICBsZXQgeCA9IHZhbFRvUG9zWChkYXRhWFtpXSwgc2NhbGVYLCB4RGltLCB4T2ZmKTtcbiAgICAgICAgICBsZXQgeSA9IHZhbFRvUG9zWSh5VmFsLCBzY2FsZVksIHlEaW0sIHlPZmYpO1xuICAgICAgICAgIGxldCB3ID0gODtcbiAgICAgICAgICBsZXQgaCA9IDg7XG5cbiAgICAgICAgICByZWN0KHBvaW50cywgeCAtIHcgLyAyLCB5IC0gaCAvIDIsIHcsIGgpO1xuXG4gICAgICAgICAgb3B0cy5lYWNoKHUsIHNlcmllc0lkeCwgaSwgeCAtIHcgLyAyLCB5IC0gaCAvIDIsIHcsIGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdS5jdHguc2F2ZSgpO1xuICAgICAgICB1LmN0eC5yZWN0KHUuYmJveC5sZWZ0LCB1LmJib3gudG9wLCB1LmJib3gud2lkdGgsIHUuYmJveC5oZWlnaHQpO1xuICAgICAgICB1LmN0eC5jbGlwKCk7XG4gICAgICAgIGZpbGxQYXRocy5mb3JFYWNoKChwLCBpKSA9PiB7XG4gICAgICAgICAgdS5jdHguZmlsbFN0eWxlID0gZmlsbFBhbGV0dGVbaV07XG4gICAgICAgICAgdS5jdHguZmlsbChwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHUuY3R4LnJlc3RvcmUoKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG59XG4vLyBhY2NlcHRzIHhNYXgsIHlNaW4sIHlNYXgsIGNvdW50XG4vLyB4Ymluc2l6ZT8geCB0aWxlIHNpemVzIGFyZSB1bmlmb3JtP1xuZXhwb3J0IGZ1bmN0aW9uIGhlYXRtYXBQYXRoc1NwYXJzZShvcHRzOiBQYXRoYnVpbGRlck9wdHMpIHtcbiAgY29uc3QgeyBkaXNwLCBlYWNoLCBnYXAgPSAxLCBoaWRlTEUgPSAtSW5maW5pdHksIGhpZGVHRSA9IEluZmluaXR5IH0gPSBvcHRzO1xuXG4gIGNvbnN0IHB4UmF0aW8gPSBkZXZpY2VQaXhlbFJhdGlvO1xuXG4gIGNvbnN0IHJvdW5kID0gZ2FwISA+PSBDUklTUF9FREdFU19HQVBfTUlOID8gTWF0aC5yb3VuZCA6ICh2OiBudW1iZXIpID0+IHY7XG5cbiAgY29uc3QgY2VsbEdhcCA9IE1hdGgucm91bmQoZ2FwISAqIHB4UmF0aW8pO1xuXG4gIHJldHVybiAodTogdVBsb3QsIHNlcmllc0lkeDogbnVtYmVyKSA9PiB7XG4gICAgdVBsb3Qub3JpZW50KFxuICAgICAgdSxcbiAgICAgIHNlcmllc0lkeCxcbiAgICAgIChcbiAgICAgICAgc2VyaWVzLFxuICAgICAgICBkYXRhWCxcbiAgICAgICAgZGF0YVksXG4gICAgICAgIHNjYWxlWCxcbiAgICAgICAgc2NhbGVZLFxuICAgICAgICB2YWxUb1Bvc1gsXG4gICAgICAgIHZhbFRvUG9zWSxcbiAgICAgICAgeE9mZixcbiAgICAgICAgeU9mZixcbiAgICAgICAgeERpbSxcbiAgICAgICAgeURpbSxcbiAgICAgICAgbW92ZVRvLFxuICAgICAgICBsaW5lVG8sXG4gICAgICAgIHJlY3QsXG4gICAgICAgIGFyY1xuICAgICAgKSA9PiB7XG4gICAgICAgIC8vY29uc29sZS50aW1lKCdoZWF0bWFwUGF0aHNTcGFyc2UnKTtcblxuICAgICAgICBsZXQgZCA9IHUuZGF0YVtzZXJpZXNJZHhdO1xuICAgICAgICBjb25zdCB4TWF4cyA9IGRbMF0gYXMgdW5rbm93biBhcyBudW1iZXJbXTsgLy8geE1heCwgZG8gd2UgZ2V0IGludGVydmFsP1xuICAgICAgICBjb25zdCB5TWlucyA9IGRbMV0gYXMgdW5rbm93biBhcyBudW1iZXJbXTtcbiAgICAgICAgY29uc3QgeU1heHMgPSBkWzJdIGFzIHVua25vd24gYXMgbnVtYmVyW107XG4gICAgICAgIGNvbnN0IGNvdW50cyA9IGRbM10gYXMgdW5rbm93biBhcyBudW1iZXJbXTtcbiAgICAgICAgY29uc3QgZGxlbiA9IHhNYXhzLmxlbmd0aDtcblxuICAgICAgICAvLyBmaWxsIGNvbG9ycyBhcmUgbWFwcGVkIGZyb20gaW50ZXJwb2xhdGluZyBkZW5zaXRpZXMgLyBjb3VudHMgYWxvbmcgc29tZSBncmFkaWVudFxuICAgICAgICAvLyAoc2hvdWxkIGJlIHF1YW50aXplZCB0byA2NCBjb2xvcnMvbGV2ZWxzIG1heC4gZS5nLiAxNilcbiAgICAgICAgbGV0IGZpbGxzID0gZGlzcC5maWxsLnZhbHVlcyh1LCBzZXJpZXNJZHgpO1xuICAgICAgICBsZXQgZmlsbFBhbGV0dGUgPSBkaXNwLmZpbGwuaW5kZXggPz8gWy4uLm5ldyBTZXQoZmlsbHMpXTtcblxuICAgICAgICBsZXQgZmlsbFBhdGhzID0gZmlsbFBhbGV0dGUubWFwKChjb2xvcikgPT4gbmV3IFBhdGgyRCgpKTtcblxuICAgICAgICAvLyBjYWNoZSBhbGwgdGlsZSBib3VuZHNcbiAgICAgICAgbGV0IHhPZmZzID0gbmV3IE1hcCgpO1xuICAgICAgICBsZXQgeU9mZnMgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB4TWF4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxldCB4TWF4ID0geE1heHNbaV07XG4gICAgICAgICAgbGV0IHlNaW4gPSB5TWluc1tpXTtcbiAgICAgICAgICBsZXQgeU1heCA9IHlNYXhzW2ldO1xuXG4gICAgICAgICAgaWYgKCF4T2Zmcy5oYXMoeE1heCkpIHtcbiAgICAgICAgICAgIHhPZmZzLnNldCh4TWF4LCByb3VuZCh2YWxUb1Bvc1goeE1heCwgc2NhbGVYLCB4RGltLCB4T2ZmKSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICgheU9mZnMuaGFzKHlNaW4pKSB7XG4gICAgICAgICAgICB5T2Zmcy5zZXQoeU1pbiwgcm91bmQodmFsVG9Qb3NZKHlNaW4sIHNjYWxlWSwgeURpbSwgeU9mZikpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXlPZmZzLmhhcyh5TWF4KSkge1xuICAgICAgICAgICAgeU9mZnMuc2V0KHlNYXgsIHJvdW5kKHZhbFRvUG9zWSh5TWF4LCBzY2FsZVksIHlEaW0sIHlPZmYpKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdW5pZm9ybSB4IHNpemUgKGludGVydmFsLCBzdGVwKVxuICAgICAgICBsZXQgeFNpemVVbmlmb3JtID0geE9mZnMuZ2V0KHhNYXhzLmZpbmQoKHYpID0+IHYgIT09IHhNYXhzWzBdKSkgLSB4T2Zmcy5nZXQoeE1heHNbMF0pO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGxlbjsgaSsrKSB7XG4gICAgICAgICAgaWYgKGNvdW50c1tpXSA8PSBoaWRlTEUgfHwgY291bnRzW2ldID49IGhpZGVHRSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IHhNYXggPSB4TWF4c1tpXTtcbiAgICAgICAgICBsZXQgeU1pbiA9IHlNaW5zW2ldO1xuICAgICAgICAgIGxldCB5TWF4ID0geU1heHNbaV07XG5cbiAgICAgICAgICBsZXQgeE1heFB4ID0geE9mZnMuZ2V0KHhNYXgpOyAvLyB4U2l6ZSBpcyBmcm9tIGludGVydmFsLCBvciBpbmZlcnJlZCBkZWx0YT9cbiAgICAgICAgICBsZXQgeU1pblB4ID0geU9mZnMuZ2V0KHlNaW4pO1xuICAgICAgICAgIGxldCB5TWF4UHggPSB5T2Zmcy5nZXQoeU1heCk7XG5cbiAgICAgICAgICBsZXQgeFNpemUgPSB4U2l6ZVVuaWZvcm07XG4gICAgICAgICAgbGV0IHlTaXplID0geU1pblB4IC0geU1heFB4O1xuXG4gICAgICAgICAgLy8gY2xhbXAgbWluIHRpbGUgc2l6ZSB0byAxcHhcbiAgICAgICAgICB4U2l6ZSA9IE1hdGgubWF4KDEsIHhTaXplIC0gY2VsbEdhcCk7XG4gICAgICAgICAgeVNpemUgPSBNYXRoLm1heCgxLCB5U2l6ZSAtIGNlbGxHYXApO1xuXG4gICAgICAgICAgbGV0IHggPSB4TWF4UHg7XG4gICAgICAgICAgbGV0IHkgPSB5TWluUHg7XG5cbiAgICAgICAgICBsZXQgZmlsbFBhdGggPSBmaWxsUGF0aHNbZmlsbHNbaV1dO1xuXG4gICAgICAgICAgcmVjdChmaWxsUGF0aCwgeCwgeSwgeFNpemUsIHlTaXplKTtcblxuICAgICAgICAgIGVhY2godSwgMSwgaSwgeCwgeSwgeFNpemUsIHlTaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHUuY3R4LnNhdmUoKTtcbiAgICAgICAgLy9cdHUuY3R4Lmdsb2JhbEFscGhhID0gMC44O1xuICAgICAgICB1LmN0eC5yZWN0KHUuYmJveC5sZWZ0LCB1LmJib3gudG9wLCB1LmJib3gud2lkdGgsIHUuYmJveC5oZWlnaHQpO1xuICAgICAgICB1LmN0eC5jbGlwKCk7XG4gICAgICAgIGZpbGxQYXRocy5mb3JFYWNoKChwLCBpKSA9PiB7XG4gICAgICAgICAgdS5jdHguZmlsbFN0eWxlID0gZmlsbFBhbGV0dGVbaV07XG4gICAgICAgICAgdS5jdHguZmlsbChwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHUuY3R4LnJlc3RvcmUoKTtcblxuICAgICAgICAvL2NvbnNvbGUudGltZUVuZCgnaGVhdG1hcFBhdGhzU3BhcnNlJyk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiBudWxsO1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgYm91bmRlZE1pbk1heCA9IChcbiAgdmFsdWVzOiBudW1iZXJbXSxcbiAgbWluVmFsdWU/OiBudW1iZXIsXG4gIG1heFZhbHVlPzogbnVtYmVyLFxuICBoaWRlTEUgPSAtSW5maW5pdHksXG4gIGhpZGVHRSA9IEluZmluaXR5XG4pID0+IHtcbiAgaWYgKG1pblZhbHVlID09IG51bGwpIHtcbiAgICBtaW5WYWx1ZSA9IEluZmluaXR5O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh2YWx1ZXNbaV0gPiBoaWRlTEUgJiYgdmFsdWVzW2ldIDwgaGlkZUdFKSB7XG4gICAgICAgIG1pblZhbHVlID0gTWF0aC5taW4obWluVmFsdWUsIHZhbHVlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKG1heFZhbHVlID09IG51bGwpIHtcbiAgICBtYXhWYWx1ZSA9IC1JbmZpbml0eTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodmFsdWVzW2ldID4gaGlkZUxFICYmIHZhbHVlc1tpXSA8IGhpZGVHRSkge1xuICAgICAgICBtYXhWYWx1ZSA9IE1hdGgubWF4KG1heFZhbHVlLCB2YWx1ZXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbbWluVmFsdWUsIG1heFZhbHVlXTtcbn07XG5cbmV4cG9ydCBjb25zdCB2YWx1ZXNUb0ZpbGxzID0gKHZhbHVlczogbnVtYmVyW10sIHBhbGV0dGU6IHN0cmluZ1tdLCBtaW5WYWx1ZTogbnVtYmVyLCBtYXhWYWx1ZTogbnVtYmVyKTogbnVtYmVyW10gPT4ge1xuICBsZXQgcmFuZ2UgPSBtYXhWYWx1ZSAtIG1pblZhbHVlIHx8IDE7XG5cbiAgbGV0IHBhbGV0dGVTaXplID0gcGFsZXR0ZS5sZW5ndGg7XG5cbiAgbGV0IGluZGV4ZWRGaWxscyA9IEFycmF5KHZhbHVlcy5sZW5ndGgpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaW5kZXhlZEZpbGxzW2ldID1cbiAgICAgIHZhbHVlc1tpXSA8IG1pblZhbHVlXG4gICAgICAgID8gMFxuICAgICAgICA6IHZhbHVlc1tpXSA+IG1heFZhbHVlXG4gICAgICAgID8gcGFsZXR0ZVNpemUgLSAxXG4gICAgICAgIDogTWF0aC5taW4ocGFsZXR0ZVNpemUgLSAxLCBNYXRoLmZsb29yKChwYWxldHRlU2l6ZSAqICh2YWx1ZXNbaV0gLSBtaW5WYWx1ZSkpIC8gcmFuZ2UpKTtcbiAgfVxuXG4gIHJldHVybiBpbmRleGVkRmlsbHM7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/heatmap/utils.ts\n");

/***/ })

}]);