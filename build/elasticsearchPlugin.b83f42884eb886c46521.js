"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkgrafana"] = self["webpackChunkgrafana"] || []).push([["elasticsearchPlugin"],{

/***/ "./public/app/core/components/Divider.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Divider: () => (/* binding */ Divider)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n\n\n\n\nconst Divider = ({ hideLine = false }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useStyles2)(getStyles);\n  if (hideLine) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"hr\", { className: styles.dividerHideLine });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"hr\", { className: styles.divider });\n};\nconst getStyles = (theme) => ({\n  divider: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin: ${theme.spacing(4, 0)};\n  `,\n  dividerHideLine: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    border: none;\n    margin: ${theme.spacing(3, 0)};\n  `\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2NvcmUvY29tcG9uZW50cy9EaXZpZGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBb0I7QUFDRjtBQUdTO0FBRXBCLE1BQU0sVUFBVSxDQUFDLEVBQUUsV0FBVyxNQUFNLE1BQU07QUFDL0MsUUFBTSxTQUFTLHVEQUFVLENBQUMsU0FBUztBQUVuQyxNQUFJLFVBQVU7QUFDWixXQUFPLDJFQUFDLFFBQUcsV0FBVyxPQUFPLGlCQUFpQjtBQUFBLEVBQ2hEO0FBRUEsU0FBTywyRUFBQyxRQUFHLFdBQVcsT0FBTyxTQUFTO0FBQ3hDO0FBRUEsTUFBTSxZQUFZLENBQUMsV0FBMEI7QUFBQSxFQUMzQyxTQUFTLGlEQUFHO0FBQUgsY0FDRyxNQUFNLFFBQVEsR0FBRyxDQUFDO0FBQUE7QUFBQSxFQUU5QixpQkFBaUIsaURBQUc7QUFBSDtBQUFBLGNBRUwsTUFBTSxRQUFRLEdBQUcsQ0FBQztBQUFBO0FBRWhDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvY29yZS9jb21wb25lbnRzL0RpdmlkZXIudHN4Pzc1NGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEdyYWZhbmFUaGVtZTIgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmV4cG9ydCBjb25zdCBEaXZpZGVyID0gKHsgaGlkZUxpbmUgPSBmYWxzZSB9KSA9PiB7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcblxuICBpZiAoaGlkZUxpbmUpIHtcbiAgICByZXR1cm4gPGhyIGNsYXNzTmFtZT17c3R5bGVzLmRpdmlkZXJIaWRlTGluZX0gLz47XG4gIH1cblxuICByZXR1cm4gPGhyIGNsYXNzTmFtZT17c3R5bGVzLmRpdmlkZXJ9IC8+O1xufTtcblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICBkaXZpZGVyOiBjc3NgXG4gICAgbWFyZ2luOiAke3RoZW1lLnNwYWNpbmcoNCwgMCl9O1xuICBgLFxuICBkaXZpZGVySGlkZUxpbmU6IGNzc2BcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgbWFyZ2luOiAke3RoZW1lLnNwYWNpbmcoMywgMCl9O1xuICBgLFxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/core/components/Divider.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/ElasticResponse.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElasticResponse: () => (/* binding */ ElasticResponse)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/MutableDataFrame.ts\");\n/* harmony import */ var _grafana_data_src_transformations_transformers_convertFieldType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/transformers/convertFieldType.ts\");\n/* harmony import */ var app_core_TableModel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/TableModel.ts\");\n/* harmony import */ var app_core_utils_flatten__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/utils/flatten.ts\");\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n/* harmony import */ var _queryDef__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/queryDef.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n\n\n\n\n\n\n\n\n\n\nconst HIGHLIGHT_TAGS_EXP = `${_queryDef__WEBPACK_IMPORTED_MODULE_5__.highlightTags.pre}([^@]+)${_queryDef__WEBPACK_IMPORTED_MODULE_5__.highlightTags.post}`;\nclass ElasticResponse {\n  constructor(targets, response) {\n    this.targets = targets;\n    this.response = response;\n    this.processResponseToSeries = () => {\n      const seriesList = [];\n      for (let i = 0; i < this.response.responses.length; i++) {\n        const response = this.response.responses[i];\n        const target = this.targets[i];\n        if (response.error) {\n          throw this.getErrorFromElasticResponse(this.response, response.error);\n        }\n        if (response.hits && response.hits.hits.length > 0) {\n          this.processHits(response.hits, seriesList, target);\n        }\n        if (response.aggregations) {\n          const aggregations = response.aggregations;\n          const target2 = this.targets[i];\n          const tmpSeriesList = [];\n          const table = new app_core_TableModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n          table.refId = target2.refId;\n          this.processBuckets(aggregations, target2, tmpSeriesList, table, {}, 0);\n          this.trimDatapoints(tmpSeriesList, target2);\n          this.nameSeries(tmpSeriesList, target2);\n          for (let y = 0; y < tmpSeriesList.length; y++) {\n            seriesList.push(tmpSeriesList[y]);\n          }\n          if (table.rows.length > 0) {\n            seriesList.push(table);\n          }\n        }\n      }\n      return { data: seriesList };\n    };\n    this.targets = targets;\n    this.response = response;\n  }\n  processMetrics(esAgg, target, seriesList, props) {\n    let newSeries;\n    for (let y = 0; y < target.metrics.length; y++) {\n      const metric = target.metrics[y];\n      if (metric.hide) {\n        continue;\n      }\n      switch (metric.type) {\n        case \"count\": {\n          newSeries = { datapoints: [], metric: \"count\", props, refId: target.refId };\n          for (let i = 0; i < esAgg.buckets.length; i++) {\n            const bucket = esAgg.buckets[i];\n            const value = bucket.doc_count;\n            newSeries.datapoints.push([value, bucket.key]);\n          }\n          seriesList.push(newSeries);\n          break;\n        }\n        case \"percentiles\": {\n          if (esAgg.buckets.length === 0) {\n            break;\n          }\n          const firstBucket = esAgg.buckets[0];\n          const percentiles = firstBucket[metric.id].values;\n          for (const percentileName in percentiles) {\n            newSeries = {\n              datapoints: [],\n              metric: \"p\" + percentileName,\n              props,\n              field: metric.field,\n              refId: target.refId\n            };\n            for (let i = 0; i < esAgg.buckets.length; i++) {\n              const bucket = esAgg.buckets[i];\n              const values = bucket[metric.id].values;\n              newSeries.datapoints.push([values[percentileName], bucket.key]);\n            }\n            seriesList.push(newSeries);\n          }\n          break;\n        }\n        case \"extended_stats\": {\n          for (const statName in metric.meta) {\n            if (!metric.meta[statName]) {\n              continue;\n            }\n            newSeries = {\n              datapoints: [],\n              metric: statName,\n              props,\n              field: metric.field,\n              refId: target.refId\n            };\n            for (let i = 0; i < esAgg.buckets.length; i++) {\n              const bucket = esAgg.buckets[i];\n              const stats = bucket[metric.id];\n              stats.std_deviation_bounds_upper = stats.std_deviation_bounds.upper;\n              stats.std_deviation_bounds_lower = stats.std_deviation_bounds.lower;\n              newSeries.datapoints.push([stats[statName], bucket.key]);\n            }\n            seriesList.push(newSeries);\n          }\n          break;\n        }\n        case \"top_metrics\": {\n          if (metric.settings?.metrics?.length) {\n            for (const metricField of metric.settings?.metrics) {\n              newSeries = {\n                datapoints: [],\n                metric: metric.type,\n                props,\n                refId: target.refId,\n                field: metricField\n              };\n              for (let i = 0; i < esAgg.buckets.length; i++) {\n                const bucket = esAgg.buckets[i];\n                const stats = bucket[metric.id];\n                const values = stats.top.map((hit) => {\n                  if (hit.metrics[metricField]) {\n                    return hit.metrics[metricField];\n                  }\n                  return null;\n                });\n                const point = [values[values.length - 1], bucket.key];\n                newSeries.datapoints.push(point);\n              }\n              seriesList.push(newSeries);\n            }\n          }\n          break;\n        }\n        default: {\n          newSeries = {\n            datapoints: [],\n            metric: metric.type,\n            metricId: metric.id,\n            props,\n            refId: target.refId\n          };\n          if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_3__.isMetricAggregationWithField)(metric)) {\n            newSeries.field = metric.field;\n          }\n          for (let i = 0; i < esAgg.buckets.length; i++) {\n            const bucket = esAgg.buckets[i];\n            const value = bucket[metric.id];\n            if (value !== void 0) {\n              if (value.normalized_value) {\n                newSeries.datapoints.push([value.normalized_value, bucket.key]);\n              } else {\n                newSeries.datapoints.push([value.value, bucket.key]);\n              }\n            }\n          }\n          seriesList.push(newSeries);\n          break;\n        }\n      }\n    }\n  }\n  processAggregationDocs(esAgg, aggDef, target, table, props) {\n    if (table.columns.length === 0) {\n      for (const propKey of (0,lodash__WEBPACK_IMPORTED_MODULE_0__.keys)(props)) {\n        table.addColumn({ text: propKey, filterable: true });\n      }\n      table.addColumn({ text: aggDef.field, filterable: true });\n    }\n    const addMetricValue = (values, metricName, value) => {\n      table.addColumn({ text: metricName });\n      values.push(value);\n    };\n    const buckets = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.isArray)(esAgg.buckets) ? esAgg.buckets : [esAgg.buckets];\n    for (const bucket of buckets) {\n      const values = [];\n      for (const propValues of (0,lodash__WEBPACK_IMPORTED_MODULE_0__.values)(props)) {\n        values.push(propValues);\n      }\n      values.push(bucket.key);\n      for (const metric of target.metrics || []) {\n        switch (metric.type) {\n          case \"count\": {\n            addMetricValue(values, this.getMetricName(metric.type), bucket.doc_count);\n            break;\n          }\n          case \"extended_stats\": {\n            for (const statName in metric.meta) {\n              if (!metric.meta[statName]) {\n                continue;\n              }\n              const stats = bucket[metric.id];\n              stats.std_deviation_bounds_upper = stats.std_deviation_bounds.upper;\n              stats.std_deviation_bounds_lower = stats.std_deviation_bounds.lower;\n              addMetricValue(values, this.getMetricName(statName), stats[statName]);\n            }\n            break;\n          }\n          case \"percentiles\": {\n            const percentiles = bucket[metric.id].values;\n            for (const percentileName in percentiles) {\n              addMetricValue(values, `p${percentileName} ${metric.field}`, percentiles[percentileName]);\n            }\n            break;\n          }\n          case \"top_metrics\": {\n            const baseName = this.getMetricName(metric.type);\n            if (metric.settings?.metrics) {\n              for (const metricField of metric.settings.metrics) {\n                const metricName = metric.settings.metrics.length > 1 ? `${baseName} ${metricField}` : baseName;\n                const stats = bucket[metric.id];\n                addMetricValue(values, metricName, stats.top[0].metrics[metricField]);\n              }\n            }\n            break;\n          }\n          default: {\n            let metricName = this.getMetricName(metric.type);\n            const otherMetrics = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.filter)(target.metrics, { type: metric.type });\n            if (otherMetrics.length > 1) {\n              if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_3__.isMetricAggregationWithField)(metric)) {\n                metricName += \" \" + metric.field;\n              }\n              if (metric.type === \"bucket_script\") {\n                metricName = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.getScriptValue)(metric);\n              }\n            }\n            addMetricValue(values, metricName, bucket[metric.id].value);\n            break;\n          }\n        }\n      }\n      table.rows.push(values);\n    }\n  }\n  // This is quite complex\n  // need to recurse down the nested buckets to build series\n  processBuckets(aggs, target, seriesList, table, props, depth) {\n    let bucket, aggDef, esAgg, aggId;\n    const maxDepth = target.bucketAggs.length - 1;\n    for (aggId in aggs) {\n      aggDef = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.find)(target.bucketAggs, { id: aggId });\n      esAgg = aggs[aggId];\n      if (!aggDef) {\n        continue;\n      }\n      if (aggDef.type === \"nested\") {\n        this.processBuckets(esAgg, target, seriesList, table, props, depth + 1);\n        continue;\n      }\n      if (depth === maxDepth) {\n        if (aggDef.type === \"date_histogram\") {\n          this.processMetrics(esAgg, target, seriesList, props);\n        } else {\n          this.processAggregationDocs(esAgg, aggDef, target, table, props);\n        }\n      } else {\n        for (const nameIndex in esAgg.buckets) {\n          bucket = esAgg.buckets[nameIndex];\n          props = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.clone)(props);\n          if (bucket.key !== void 0) {\n            props[aggDef.field] = bucket.key;\n          } else {\n            props[\"filter\"] = nameIndex;\n          }\n          if (bucket.key_as_string) {\n            props[aggDef.field] = bucket.key_as_string;\n          }\n          this.processBuckets(bucket, target, seriesList, table, props, depth + 1);\n        }\n      }\n    }\n  }\n  getMetricName(metric) {\n    const metricDef = Object.entries(_components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_4__.metricAggregationConfig).filter(([key]) => key === metric).map(([_, value]) => value)[0];\n    if (metricDef) {\n      return metricDef.label;\n    }\n    const extendedStat = _queryDef__WEBPACK_IMPORTED_MODULE_5__.extendedStats.find((e) => e.value === metric);\n    if (extendedStat) {\n      return extendedStat.label;\n    }\n    return metric;\n  }\n  getSeriesName(series, target, dedup) {\n    let metricName = this.getMetricName(series.metric);\n    if (target.alias) {\n      const regex = /\\{\\{([\\s\\S]+?)\\}\\}/g;\n      return target.alias.replace(regex, (match, g1, g2) => {\n        const group = g1 || g2;\n        if (group.indexOf(\"term \") === 0) {\n          return series.props[group.substring(5)];\n        }\n        if (series.props[group] !== void 0) {\n          return series.props[group];\n        }\n        if (group === \"metric\") {\n          return metricName;\n        }\n        if (group === \"field\") {\n          return series.field || \"\";\n        }\n        return match;\n      });\n    }\n    if (_queryDef__WEBPACK_IMPORTED_MODULE_5__.isPipelineAgg(series.metric)) {\n      if (series.metric && _queryDef__WEBPACK_IMPORTED_MODULE_5__.isPipelineAggWithMultipleBucketPaths(series.metric)) {\n        const agg = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.find)(target.metrics, { id: series.metricId });\n        if (agg && agg.settings.script) {\n          metricName = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.getScriptValue)(agg);\n          for (const pv of agg.pipelineVariables) {\n            const appliedAgg = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.find)(target.metrics, { id: pv.pipelineAgg });\n            if (appliedAgg) {\n              metricName = metricName.replace(\"params.\" + pv.name, (0,_utils__WEBPACK_IMPORTED_MODULE_6__.describeMetric)(appliedAgg));\n            }\n          }\n        } else {\n          metricName = \"Unset\";\n        }\n      } else {\n        const appliedAgg = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.find)(target.metrics, { id: series.field });\n        if (appliedAgg) {\n          metricName += \" \" + (0,_utils__WEBPACK_IMPORTED_MODULE_6__.describeMetric)(appliedAgg);\n        } else {\n          metricName = \"Unset\";\n        }\n      }\n    } else if (series.field) {\n      metricName += \" \" + series.field;\n    }\n    const propKeys = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.keys)(series.props);\n    if (propKeys.length === 0) {\n      return metricName;\n    }\n    let name = \"\";\n    for (const propName in series.props) {\n      name += series.props[propName] + \" \";\n    }\n    if (dedup) {\n      return name.trim() + \" \" + metricName;\n    }\n    return name.trim();\n  }\n  nameSeries(seriesList, target) {\n    const metricTypeCount = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniq)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.map)(seriesList, \"metric\")).length;\n    const hasTopMetricWithMultipleMetrics = (target.metrics?.filter((m) => m.type === \"top_metrics\")).some((m) => (m?.settings?.metrics?.length || 0) > 1);\n    for (let i = 0; i < seriesList.length; i++) {\n      const series = seriesList[i];\n      series.target = this.getSeriesName(series, target, metricTypeCount > 1 || hasTopMetricWithMultipleMetrics);\n    }\n  }\n  processHits(hits, seriesList, target) {\n    const hitsTotal = typeof hits.total === \"number\" ? hits.total : hits.total.value;\n    const series = {\n      target: target.refId,\n      type: \"docs\",\n      refId: target.refId,\n      datapoints: [],\n      total: hitsTotal,\n      filterable: true\n    };\n    let propName, hit, doc, i;\n    for (i = 0; i < hits.hits.length; i++) {\n      hit = hits.hits[i];\n      doc = {\n        _id: hit._id,\n        _type: hit._type,\n        _index: hit._index,\n        sort: hit.sort,\n        highlight: hit.highlight\n      };\n      if (hit._source) {\n        for (propName in hit._source) {\n          doc[propName] = hit._source[propName];\n        }\n      }\n      for (propName in hit.fields) {\n        doc[propName] = hit.fields[propName];\n      }\n      series.datapoints.push(doc);\n    }\n    seriesList.push(series);\n  }\n  trimDatapoints(aggregations, target) {\n    const histogram = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.find)(target.bucketAggs, { type: \"date_histogram\" });\n    const shouldDropFirstAndLast = histogram && histogram.settings && histogram.settings.trimEdges;\n    if (shouldDropFirstAndLast) {\n      const trim = histogram.settings.trimEdges;\n      for (const prop in aggregations) {\n        const points = aggregations[prop];\n        if (points.datapoints.length > trim * 2) {\n          points.datapoints = points.datapoints.slice(trim, points.datapoints.length - trim);\n        }\n      }\n    }\n  }\n  getErrorFromElasticResponse(response, err) {\n    const result = {};\n    result.data = JSON.stringify(err, null, 4);\n    if (err.root_cause && err.root_cause.length > 0 && err.root_cause[0].reason) {\n      result.message = err.root_cause[0].reason;\n    } else {\n      result.message = err.reason || \"Unknown elastic error response\";\n    }\n    if (response.$$config) {\n      result.config = response.$$config;\n    }\n    return result;\n  }\n  getTimeSeries() {\n    if (this.targets.some((target) => _queryDef__WEBPACK_IMPORTED_MODULE_5__.hasMetricOfType(target, \"raw_data\"))) {\n      return this.processResponseToDataFrames(false);\n    }\n    const result = this.processResponseToSeries();\n    return {\n      ...result,\n      data: result.data.map((item) => (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.toDataFrame)(item))\n    };\n  }\n  getLogs(logMessageField, logLevelField) {\n    return this.processResponseToDataFrames(true, logMessageField, logLevelField);\n  }\n  processResponseToDataFrames(isLogsRequest, logMessageField, logLevelField) {\n    const dataFrame = [];\n    for (let n = 0; n < this.response.responses.length; n++) {\n      const response = this.response.responses[n];\n      if (response.error) {\n        throw this.getErrorFromElasticResponse(this.response, response.error);\n      }\n      if (response.hits) {\n        const { propNames, docs } = flattenHits(response.hits.hits);\n        const series = docs.length ? createEmptyDataFrame(\n          propNames.map(toNameTypePair(docs)),\n          isLogsRequest,\n          this.targets[0].timeField,\n          logMessageField,\n          logLevelField\n        ) : createEmptyDataFrame([], isLogsRequest);\n        if (isLogsRequest) {\n          addPreferredVisualisationType(series, \"logs\");\n        }\n        for (const doc of docs) {\n          if (logLevelField) {\n            doc[\"level\"] = doc[logLevelField];\n          }\n          if (doc.highlight) {\n            const globalHighlightWordRegex = new RegExp(HIGHLIGHT_TAGS_EXP, \"g\");\n            const highlightWordRegex = new RegExp(HIGHLIGHT_TAGS_EXP);\n            const newSearchWords = Object.keys(doc.highlight).flatMap((key) => {\n              return doc.highlight[key].flatMap((line) => {\n                const matchedPhrases = line.match(globalHighlightWordRegex);\n                if (!matchedPhrases) {\n                  return [];\n                }\n                return matchedPhrases.map((part) => {\n                  const matches = part.match(highlightWordRegex);\n                  return matches && matches[1] || null;\n                });\n              });\n            }).filter(lodash__WEBPACK_IMPORTED_MODULE_0__.identity);\n            const searchWords = series.meta?.searchWords ? (0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniq)([...series.meta.searchWords, ...newSearchWords]) : [...newSearchWords];\n            series.meta = series.meta ? { ...series.meta, searchWords } : { searchWords };\n          }\n          series.add(doc);\n        }\n        const target = this.targets[n];\n        series.refId = target.refId;\n        dataFrame.push(series);\n      }\n      if (response.aggregations) {\n        const aggregations = response.aggregations;\n        const target = this.targets[n];\n        const tmpSeriesList = [];\n        const table = new app_core_TableModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        this.processBuckets(aggregations, target, tmpSeriesList, table, {}, 0);\n        this.trimDatapoints(tmpSeriesList, target);\n        this.nameSeries(tmpSeriesList, target);\n        if (table.rows.length > 0) {\n          const series = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.toDataFrame)(table);\n          series.refId = target.refId;\n          dataFrame.push(series);\n        }\n        for (let y = 0; y < tmpSeriesList.length; y++) {\n          let series = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.toDataFrame)(tmpSeriesList[y]);\n          if (isLogsRequest) {\n            addPreferredVisualisationType(series, \"graph\");\n          }\n          series.refId = target.refId;\n          dataFrame.push(series);\n        }\n      }\n    }\n    for (let frame of dataFrame) {\n      for (let field of frame.fields) {\n        if (field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_8__.FieldType.time && typeof field.values[0] !== \"number\") {\n          field.values = (0,_grafana_data_src_transformations_transformers_convertFieldType__WEBPACK_IMPORTED_MODULE_9__.convertFieldType)(field, { destinationType: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.FieldType.time }).values;\n        }\n      }\n    }\n    return { data: dataFrame };\n  }\n}\nconst flattenHits = (hits) => {\n  const docs = [];\n  let propNames = [];\n  for (const hit of hits) {\n    const flattened = hit._source ? (0,app_core_utils_flatten__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(hit._source) : {};\n    const doc = {\n      _id: hit._id,\n      _type: hit._type,\n      _index: hit._index,\n      sort: hit.sort,\n      highlight: hit.highlight,\n      _source: { ...flattened },\n      ...flattened\n    };\n    for (const propName of Object.keys(doc)) {\n      if (propNames.indexOf(propName) === -1) {\n        propNames.push(propName);\n      }\n    }\n    docs.push(doc);\n  }\n  propNames.sort();\n  return { docs, propNames };\n};\nconst createEmptyDataFrame = (props, isLogsRequest, timeField, logMessageField, logLevelField) => {\n  const series = new _grafana_data__WEBPACK_IMPORTED_MODULE_10__.MutableDataFrame({ fields: [] });\n  if (timeField) {\n    series.addField({\n      config: {\n        filterable: true\n      },\n      name: timeField,\n      type: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.FieldType.time\n    });\n  }\n  if (logMessageField) {\n    const f = series.addField({\n      name: logMessageField,\n      type: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.FieldType.string\n    });\n    series.setParser(f, (v) => {\n      return v || \"\";\n    });\n  }\n  if (logLevelField) {\n    const f = series.addField({\n      name: \"level\",\n      type: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.FieldType.string\n    });\n    series.setParser(f, (v) => {\n      return v || \"\";\n    });\n  }\n  const fieldNames = series.fields.map((field) => field.name);\n  for (const [name, type] of props) {\n    if (fieldNames.includes(name)) {\n      continue;\n    }\n    if (!isLogsRequest && name === \"_source\") {\n      continue;\n    }\n    const f = series.addField({\n      config: {\n        filterable: true\n      },\n      name,\n      type\n    });\n    series.setParser(f, (v) => {\n      return v || \"\";\n    });\n  }\n  return series;\n};\nconst addPreferredVisualisationType = (series, type) => {\n  let s = series;\n  s.meta ? s.meta.preferredVisualisationType = type : s.meta = {\n    preferredVisualisationType: type\n  };\n};\nconst toNameTypePair = (docs) => (propName) => [\n  propName,\n  guessType(docs.find((doc) => doc[propName] !== void 0)?.[propName])\n];\nconst guessType = (value) => {\n  switch (typeof value) {\n    case \"number\":\n      return _grafana_data__WEBPACK_IMPORTED_MODULE_8__.FieldType.number;\n    case \"string\":\n      return _grafana_data__WEBPACK_IMPORTED_MODULE_8__.FieldType.string;\n    default:\n      return _grafana_data__WEBPACK_IMPORTED_MODULE_8__.FieldType.other;\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL0VsYXN0aWNSZXNwb25zZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUEyRjtBQVNwRjtBQUMwQjtBQUNWO0FBQ0g7QUFFeUI7QUFDTDtBQUNkO0FBRXFCO0FBRS9DLE1BQU0scUJBQXFCLEdBQUcsb0RBQXNCLENBQUMsYUFBYSxvREFBc0IsQ0FBQztBQVFsRixNQUFNLGdCQUFnQjtBQUFBLEVBQzNCLFlBQ1UsU0FDQSxVQUNSO0FBRlE7QUFDQTtBQTJrQlYsbUNBQTBCLE1BQU07QUFDOUIsWUFBTSxhQUFhLENBQUM7QUFFcEIsZUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFNBQVMsVUFBVSxRQUFRLEtBQUs7QUFDdkQsY0FBTSxXQUFXLEtBQUssU0FBUyxVQUFVLENBQUM7QUFDMUMsY0FBTSxTQUFTLEtBQUssUUFBUSxDQUFDO0FBRTdCLFlBQUksU0FBUyxPQUFPO0FBQ2xCLGdCQUFNLEtBQUssNEJBQTRCLEtBQUssVUFBVSxTQUFTLEtBQUs7QUFBQSxRQUN0RTtBQUVBLFlBQUksU0FBUyxRQUFRLFNBQVMsS0FBSyxLQUFLLFNBQVMsR0FBRztBQUNsRCxlQUFLLFlBQVksU0FBUyxNQUFNLFlBQVksTUFBTTtBQUFBLFFBQ3BEO0FBRUEsWUFBSSxTQUFTLGNBQWM7QUFDekIsZ0JBQU0sZUFBZSxTQUFTO0FBQzlCLGdCQUFNQSxVQUFTLEtBQUssUUFBUSxDQUFDO0FBQzdCLGdCQUFNLGdCQUF1QixDQUFDO0FBQzlCLGdCQUFNLFFBQVEsSUFBSSwyREFBVSxDQUFDO0FBQzdCLGdCQUFNLFFBQVFBLFFBQU87QUFFckIsZUFBSyxlQUFlLGNBQWNBLFNBQVEsZUFBZSxPQUFPLENBQUMsR0FBRyxDQUFDO0FBQ3JFLGVBQUssZUFBZSxlQUFlQSxPQUFNO0FBQ3pDLGVBQUssV0FBVyxlQUFlQSxPQUFNO0FBRXJDLG1CQUFTLElBQUksR0FBRyxJQUFJLGNBQWMsUUFBUSxLQUFL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QSxRQUFJLENBQUMsaUJBQWlCLFNBQVMsV0FBVztBQUN4QztBQUFBLElBQ0Y7QUFFQSxVQUFNLElBQUksT0FBTyxTQUFTO0FBQUEsTUFDeEIsUUFBUTtBQUFBLFFBQ04sWUFBWTtBQUFBLE1BQ2Q7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQztBQUNELFdBQU8sVUFBVSxHQUFHLENBQUMsTUFBVztBQUM5QixhQUFPLEtBQUs7QUFBQSxJQUNkLENBQUM7QUFBQSxFQUNIO0FBRUEsU0FBTztBQUNUO0FBRUEsTUFBTSxnQ0FBZ0MsQ0FBQyxRQUFhLFNBQXFDO0FBQ3ZGLE1BQUksSUFBSTtBQUNSLElBQUUsT0FDRyxFQUFFLEtBQUssNkJBQTZCLE9BQ3BDLEVBQUUsT0FBTztBQUFBLElBQ1IsNEJBQTRCO0FBQUEsRUFDOUI7QUFDTjtBQUVBLE1BQU0saUJBQ0osQ0FBQyxTQUNELENBQUMsYUFBMEM7QUFBQSxFQUN6QztBQUFBLEVBQ0EsVUFBVSxLQUFLLEtBQUssQ0FBQyxRQUFRLElBQUksUUFBUSxNQUFNLE1BQVMsSUFBSSxRQUFRLENBQUM7QUFDdkU7QUFNRixNQUFNLFlBQVksQ0FBQyxVQUE4QjtBQUMvQyxVQUFRLE9BQU8sT0FBTztBQUFBLElBQ3BCLEtBQUs7QUFDSCxhQUFPLG9EQUFTLENBQUM7QUFBQSxJQUNuQixLQUFLO0FBQ0gsYUFBTyxvREFBUyxDQUFDO0FBQUEsSUFDbkI7QUFDRSxhQUFPLG9EQUFTLENBQUM7QUFBQSxFQUNyQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvRWxhc3RpY1Jlc3BvbnNlLnRzP2E5YjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xvbmUsIGZpbHRlciwgZmluZCwgaWRlbnRpdHksIGlzQXJyYXksIGtleXMsIG1hcCwgdW5pcSwgdmFsdWVzIGFzIF92YWx1ZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICBEYXRhUXVlcnlSZXNwb25zZSxcbiAgRGF0YUZyYW1lLFxuICB0b0RhdGFGcmFtZSxcbiAgRmllbGRUeXBlLFxuICBNdXRhYmxlRGF0YUZyYW1lLFxuICBQcmVmZXJyZWRWaXN1YWxpc2F0aW9uVHlwZSxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBjb252ZXJ0RmllbGRUeXBlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YS9zcmMvdHJhbnNmb3JtYXRpb25zL3RyYW5zZm9ybWVycy9jb252ZXJ0RmllbGRUeXBlJztcbmltcG9ydCBUYWJsZU1vZGVsIGZyb20gJ2FwcC9jb3JlL1RhYmxlTW9kZWwnO1xuaW1wb3J0IGZsYXR0ZW4gZnJvbSAnYXBwL2NvcmUvdXRpbHMvZmxhdHRlbic7XG5cbmltcG9ydCB7IGlzTWV0cmljQWdncmVnYXRpb25XaXRoRmllbGQgfSBmcm9tICcuL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL2FnZ3JlZ2F0aW9ucyc7XG5pbXBvcnQgeyBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZyB9IGZyb20gJy4vY29tcG9uZW50cy9RdWVyeUVkaXRvci9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IvdXRpbHMnO1xuaW1wb3J0ICogYXMgcXVlcnlEZWYgZnJvbSAnLi9xdWVyeURlZic7XG5pbXBvcnQgeyBFbGFzdGljc2VhcmNoQWdncmVnYXRpb24sIEVsYXN0aWNzZWFyY2hRdWVyeSwgVG9wTWV0cmljcywgRXh0ZW5kZWRTdGF0TWV0YVR5cGUgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGRlc2NyaWJlTWV0cmljLCBnZXRTY3JpcHRWYWx1ZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBISUdITElHSFRfVEFHU19FWFAgPSBgJHtxdWVyeURlZi5oaWdobGlnaHRUYWdzLnByZX0oW15AXSspJHtxdWVyeURlZi5oaWdobGlnaHRUYWdzLnBvc3R9YDtcbnR5cGUgVG9wTWV0cmljTWV0cmljID0gUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbmludGVyZmFjZSBUb3BNZXRyaWNCdWNrZXQge1xuICB0b3A6IEFycmF5PHtcbiAgICBtZXRyaWNzOiBUb3BNZXRyaWNNZXRyaWM7XG4gIH0+O1xufVxuXG5leHBvcnQgY2xhc3MgRWxhc3RpY1Jlc3BvbnNlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB0YXJnZXRzOiBFbGFzdGljc2VhcmNoUXVlcnlbXSxcbiAgICBwcml2YXRlIHJlc3BvbnNlOiBhbnlcbiAgKSB7XG4gICAgdGhpcy50YXJnZXRzID0gdGFyZ2V0cztcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIH1cblxuICBwcm9jZXNzTWV0cmljcyhlc0FnZzogYW55LCB0YXJnZXQ6IEVsYXN0aWNzZWFyY2hRdWVyeSwgc2VyaWVzTGlzdDogYW55LCBwcm9wczogYW55KSB7XG4gICAgbGV0IG5ld1NlcmllczogYW55O1xuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0YXJnZXQubWV0cmljcyEubGVuZ3RoOyB5KyspIHtcbiAgICAgIGNvbnN0IG1ldHJpYyA9IHRhcmdldC5tZXRyaWNzIVt5XTtcbiAgICAgIGlmIChtZXRyaWMuaGlkZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChtZXRyaWMudHlwZSkge1xuICAgICAgICBjYXNlICdjb3VudCc6IHtcbiAgICAgICAgICBuZXdTZXJpZXMgPSB7IGRhdGFwb2ludHM6IFtdLCBtZXRyaWM6ICdjb3VudCcsIHByb3BzLCByZWZJZDogdGFyZ2V0LnJlZklkIH07XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlc0FnZy5idWNrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBidWNrZXQgPSBlc0FnZy5idWNrZXRzW2ldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBidWNrZXQuZG9jX2NvdW50O1xuICAgICAgICAgICAgbmV3U2VyaWVzLmRhdGFwb2ludHMucHVzaChbdmFsdWUsIGJ1Y2tldC5rZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VyaWVzTGlzdC5wdXNoKG5ld1Nlcmllcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAncGVyY2VudGlsZXMnOiB7XG4gICAgICAgICAgaWYgKGVzQWdnLmJ1Y2tldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBmaXJzdEJ1Y2tldCA9IGVzQWdnLmJ1Y2tldHNbMF07XG4gICAgICAgICAgY29uc3QgcGVyY2VudGlsZXMgPSBmaXJzdEJ1Y2tldFttZXRyaWMuaWRdLnZhbHVlcztcblxuICAgICAgICAgIGZvciAoY29uc3QgcGVyY2VudGlsZU5hbWUgaW4gcGVyY2VudGlsZXMpIHtcbiAgICAgICAgICAgIG5ld1NlcmllcyA9IHtcbiAgICAgICAgICAgICAgZGF0YXBvaW50czogW10sXG4gICAgICAgICAgICAgIG1ldHJpYzogJ3AnICsgcGVyY2VudGlsZU5hbWUsXG4gICAgICAgICAgICAgIHByb3BzOiBwcm9wcyxcbiAgICAgICAgICAgICAgZmllbGQ6IG1ldHJpYy5maWVsZCxcbiAgICAgICAgICAgICAgcmVmSWQ6IHRhcmdldC5yZWZJZCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXNBZ2cuYnVja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBjb25zdCBidWNrZXQgPSBlc0FnZy5idWNrZXRzW2ldO1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBidWNrZXRbbWV0cmljLmlkXS52YWx1ZXM7XG4gICAgICAgICAgICAgIG5ld1Nlcmllcy5kYXRhcG9pbnRzLnB1c2goW3ZhbHVlc1twZXJjZW50aWxlTmFtZV0sIGJ1Y2tldC5rZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcmllc0xpc3QucHVzaChuZXdTZXJpZXMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2V4dGVuZGVkX3N0YXRzJzoge1xuICAgICAgICAgIGZvciAoY29uc3Qgc3RhdE5hbWUgaW4gbWV0cmljLm1ldGEpIHtcbiAgICAgICAgICAgIGlmICghbWV0cmljLm1ldGFbc3RhdE5hbWUgYXMgRXh0ZW5kZWRTdGF0TWV0YVR5cGVdKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdTZXJpZXMgPSB7XG4gICAgICAgICAgICAgIGRhdGFwb2ludHM6IFtdLFxuICAgICAgICAgICAgICBtZXRyaWM6IHN0YXROYW1lLFxuICAgICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgICAgICAgIGZpZWxkOiBtZXRyaWMuZmllbGQsXG4gICAgICAgICAgICAgIHJlZklkOiB0YXJnZXQucmVmSWQsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVzQWdnLmJ1Y2tldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgY29uc3QgYnVja2V0ID0gZXNBZ2cuYnVja2V0c1tpXTtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBidWNrZXRbbWV0cmljLmlkXTtcblxuICAgICAgICAgICAgICAvLyBhZGQgc3RhdHMgdGhhdCBhcmUgaW4gbmVzdGVkIG9iaiB0byB0b3AgbGV2ZWwgb2JqXG4gICAgICAgICAgICAgIHN0YXRzLnN0ZF9kZXZpYXRpb25fYm91bmRzX3VwcGVyID0gc3RhdHMuc3RkX2RldmlhdGlvbl9ib3VuZHMudXBwZXI7XG4gICAgICAgICAgICAgIHN0YXRzLnN0ZF9kZXZpYXRpb25fYm91bmRzX2xvd2VyID0gc3RhdHMuc3RkX2RldmlhdGlvbl9ib3VuZHMubG93ZXI7XG5cbiAgICAgICAgICAgICAgbmV3U2VyaWVzLmRhdGFwb2ludHMucHVzaChbc3RhdHNbc3RhdE5hbWVdLCBidWNrZXQua2V5XSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlcmllc0xpc3QucHVzaChuZXdTZXJpZXMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3RvcF9tZXRyaWNzJzoge1xuICAgICAgICAgIGlmIChtZXRyaWMuc2V0dGluZ3M/Lm1ldHJpY3M/Lmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBtZXRyaWNGaWVsZCBvZiBtZXRyaWMuc2V0dGluZ3M/Lm1ldHJpY3MpIHtcbiAgICAgICAgICAgICAgbmV3U2VyaWVzID0ge1xuICAgICAgICAgICAgICAgIGRhdGFwb2ludHM6IFtdLFxuICAgICAgICAgICAgICAgIG1ldHJpYzogbWV0cmljLnR5cGUsXG4gICAgICAgICAgICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgICAgICAgICAgIHJlZklkOiB0YXJnZXQucmVmSWQsXG4gICAgICAgICAgICAgICAgZmllbGQ6IG1ldHJpY0ZpZWxkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVzQWdnLmJ1Y2tldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidWNrZXQgPSBlc0FnZy5idWNrZXRzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gYnVja2V0W21ldHJpYy5pZF0gYXMgVG9wTWV0cmljQnVja2V0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHN0YXRzLnRvcC5tYXAoKGhpdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGhpdC5tZXRyaWNzW21ldHJpY0ZpZWxkXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGl0Lm1ldHJpY3NbbWV0cmljRmllbGRdO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBbdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXSwgYnVja2V0LmtleV07XG4gICAgICAgICAgICAgICAgbmV3U2VyaWVzLmRhdGFwb2ludHMucHVzaChwb2ludCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2VyaWVzTGlzdC5wdXNoKG5ld1Nlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBuZXdTZXJpZXMgPSB7XG4gICAgICAgICAgICBkYXRhcG9pbnRzOiBbXSxcbiAgICAgICAgICAgIG1ldHJpYzogbWV0cmljLnR5cGUsXG4gICAgICAgICAgICBtZXRyaWNJZDogbWV0cmljLmlkLFxuICAgICAgICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgICAgICAgcmVmSWQ6IHRhcmdldC5yZWZJZCxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKGlzTWV0cmljQWdncmVnYXRpb25XaXRoRmllbGQobWV0cmljKSkge1xuICAgICAgICAgICAgbmV3U2VyaWVzLmZpZWxkID0gbWV0cmljLmZpZWxkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXNBZ2cuYnVja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYnVja2V0ID0gZXNBZ2cuYnVja2V0c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYnVja2V0W21ldHJpYy5pZF07XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGlmICh2YWx1ZS5ub3JtYWxpemVkX3ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbmV3U2VyaWVzLmRhdGFwb2ludHMucHVzaChbdmFsdWUubm9ybWFsaXplZF92YWx1ZSwgYnVja2V0LmtleV0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1Nlcmllcy5kYXRhcG9pbnRzLnB1c2goW3ZhbHVlLnZhbHVlLCBidWNrZXQua2V5XSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc2VyaWVzTGlzdC5wdXNoKG5ld1Nlcmllcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcm9jZXNzQWdncmVnYXRpb25Eb2NzKFxuICAgIGVzQWdnOiBhbnksXG4gICAgYWdnRGVmOiBFbGFzdGljc2VhcmNoQWdncmVnYXRpb24sXG4gICAgdGFyZ2V0OiBFbGFzdGljc2VhcmNoUXVlcnksXG4gICAgdGFibGU6IGFueSxcbiAgICBwcm9wczogYW55XG4gICkge1xuICAgIC8vIGFkZCBjb2x1bW5zXG4gICAgaWYgKHRhYmxlLmNvbHVtbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHByb3BLZXkgb2Yga2V5cyhwcm9wcykpIHtcbiAgICAgICAgdGFibGUuYWRkQ29sdW1uKHsgdGV4dDogcHJvcEtleSwgZmlsdGVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICAgIHRhYmxlLmFkZENvbHVtbih7IHRleHQ6IGFnZ0RlZi5maWVsZCwgZmlsdGVyYWJsZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvLyBoZWxwZXIgZnVuYyB0byBhZGQgdmFsdWVzIHRvIHZhbHVlIGFycmF5XG4gICAgY29uc3QgYWRkTWV0cmljVmFsdWUgPSAodmFsdWVzOiBhbnlbXSwgbWV0cmljTmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB7XG4gICAgICB0YWJsZS5hZGRDb2x1bW4oeyB0ZXh0OiBtZXRyaWNOYW1lIH0pO1xuICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgIH07XG4gICAgY29uc3QgYnVja2V0cyA9IGlzQXJyYXkoZXNBZ2cuYnVja2V0cykgPyBlc0FnZy5idWNrZXRzIDogW2VzQWdnLmJ1Y2tldHNdO1xuICAgIGZvciAoY29uc3QgYnVja2V0IG9mIGJ1Y2tldHMpIHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IHByb3BWYWx1ZXMgb2YgX3ZhbHVlcyhwcm9wcykpIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHJvcFZhbHVlcyk7XG4gICAgICB9XG5cbiAgICAgIC8vIGFkZCBidWNrZXQga2V5ICh2YWx1ZSlcbiAgICAgIHZhbHVlcy5wdXNoKGJ1Y2tldC5rZXkpO1xuXG4gICAgICBmb3IgKGNvbnN0IG1ldHJpYyBvZiB0YXJnZXQubWV0cmljcyB8fCBbXSkge1xuICAgICAgICBzd2l0Y2ggKG1ldHJpYy50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnY291bnQnOiB7XG4gICAgICAgICAgICBhZGRNZXRyaWNWYWx1ZSh2YWx1ZXMsIHRoaXMuZ2V0TWV0cmljTmFtZShtZXRyaWMudHlwZSksIGJ1Y2tldC5kb2NfY291bnQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2V4dGVuZGVkX3N0YXRzJzoge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzdGF0TmFtZSBpbiBtZXRyaWMubWV0YSkge1xuICAgICAgICAgICAgICBpZiAoIW1ldHJpYy5tZXRhW3N0YXROYW1lIGFzIEV4dGVuZGVkU3RhdE1ldGFUeXBlXSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBidWNrZXRbbWV0cmljLmlkXTtcbiAgICAgICAgICAgICAgLy8gYWRkIHN0YXRzIHRoYXQgYXJlIGluIG5lc3RlZCBvYmogdG8gdG9wIGxldmVsIG9ialxuICAgICAgICAgICAgICBzdGF0cy5zdGRfZGV2aWF0aW9uX2JvdW5kc191cHBlciA9IHN0YXRzLnN0ZF9kZXZpYXRpb25fYm91bmRzLnVwcGVyO1xuICAgICAgICAgICAgICBzdGF0cy5zdGRfZGV2aWF0aW9uX2JvdW5kc19sb3dlciA9IHN0YXRzLnN0ZF9kZXZpYXRpb25fYm91bmRzLmxvd2VyO1xuXG4gICAgICAgICAgICAgIGFkZE1ldHJpY1ZhbHVlKHZhbHVlcywgdGhpcy5nZXRNZXRyaWNOYW1lKHN0YXROYW1lIGFzIEV4dGVuZGVkU3RhdE1ldGFUeXBlKSwgc3RhdHNbc3RhdE5hbWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdwZXJjZW50aWxlcyc6IHtcbiAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRpbGVzID0gYnVja2V0W21ldHJpYy5pZF0udmFsdWVzO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBlcmNlbnRpbGVOYW1lIGluIHBlcmNlbnRpbGVzKSB7XG4gICAgICAgICAgICAgIGFkZE1ldHJpY1ZhbHVlKHZhbHVlcywgYHAke3BlcmNlbnRpbGVOYW1lfSAke21ldHJpYy5maWVsZH1gLCBwZXJjZW50aWxlc1twZXJjZW50aWxlTmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ3RvcF9tZXRyaWNzJzoge1xuICAgICAgICAgICAgY29uc3QgYmFzZU5hbWUgPSB0aGlzLmdldE1ldHJpY05hbWUobWV0cmljLnR5cGUpO1xuXG4gICAgICAgICAgICBpZiAobWV0cmljLnNldHRpbmdzPy5tZXRyaWNzKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgbWV0cmljRmllbGQgb2YgbWV0cmljLnNldHRpbmdzLm1ldHJpY3MpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBzZWxlY3RlZCBtb3JlIHRoYW4gb25lIG1ldHJpYyB3ZSBhbHNvIGFkZCBlYWNoIG1ldHJpYyBuYW1lXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0cmljTmFtZSA9IG1ldHJpYy5zZXR0aW5ncy5tZXRyaWNzLmxlbmd0aCA+IDEgPyBgJHtiYXNlTmFtZX0gJHttZXRyaWNGaWVsZH1gIDogYmFzZU5hbWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IGJ1Y2tldFttZXRyaWMuaWRdIGFzIFRvcE1ldHJpY0J1Y2tldDtcblxuICAgICAgICAgICAgICAgIC8vIFNpemUgb2YgdG9wX21ldHJpY3MgaXMgZml4ZWQgdG8gMS5cbiAgICAgICAgICAgICAgICBhZGRNZXRyaWNWYWx1ZSh2YWx1ZXMsIG1ldHJpY05hbWUsIHN0YXRzLnRvcFswXS5tZXRyaWNzW21ldHJpY0ZpZWxkXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGxldCBtZXRyaWNOYW1lID0gdGhpcy5nZXRNZXRyaWNOYW1lKG1ldHJpYy50eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyTWV0cmljcyA9IGZpbHRlcih0YXJnZXQubWV0cmljcywgeyB0eXBlOiBtZXRyaWMudHlwZSB9KTtcblxuICAgICAgICAgICAgLy8gaWYgbW9yZSBvZiB0aGUgc2FtZSBtZXRyaWMgdHlwZSBpbmNsdWRlIGZpZWxkIGZpZWxkIG5hbWUgaW4gcHJvcGVydHlcbiAgICAgICAgICAgIGlmIChvdGhlck1ldHJpY3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICBpZiAoaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhGaWVsZChtZXRyaWMpKSB7XG4gICAgICAgICAgICAgICAgbWV0cmljTmFtZSArPSAnICcgKyBtZXRyaWMuZmllbGQ7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAobWV0cmljLnR5cGUgPT09ICdidWNrZXRfc2NyaXB0Jykge1xuICAgICAgICAgICAgICAgIC8vVXNlIHRoZSBmb3JtdWxhIGluIHRoZSBjb2x1bW4gbmFtZVxuICAgICAgICAgICAgICAgIG1ldHJpY05hbWUgPSBnZXRTY3JpcHRWYWx1ZShtZXRyaWMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFkZE1ldHJpY1ZhbHVlKHZhbHVlcywgbWV0cmljTmFtZSwgYnVja2V0W21ldHJpYy5pZF0udmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRhYmxlLnJvd3MucHVzaCh2YWx1ZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgaXMgcXVpdGUgY29tcGxleFxuICAvLyBuZWVkIHRvIHJlY3Vyc2UgZG93biB0aGUgbmVzdGVkIGJ1Y2tldHMgdG8gYnVpbGQgc2VyaWVzXG4gIHByb2Nlc3NCdWNrZXRzKGFnZ3M6IGFueSwgdGFyZ2V0OiBFbGFzdGljc2VhcmNoUXVlcnksIHNlcmllc0xpc3Q6IGFueSwgdGFibGU6IFRhYmxlTW9kZWwsIHByb3BzOiBhbnksIGRlcHRoOiBudW1iZXIpIHtcbiAgICBsZXQgYnVja2V0LCBhZ2dEZWY6IGFueSwgZXNBZ2csIGFnZ0lkO1xuICAgIGNvbnN0IG1heERlcHRoID0gdGFyZ2V0LmJ1Y2tldEFnZ3MhLmxlbmd0aCAtIDE7XG5cbiAgICBmb3IgKGFnZ0lkIGluIGFnZ3MpIHtcbiAgICAgIGFnZ0RlZiA9IGZpbmQodGFyZ2V0LmJ1Y2tldEFnZ3MsIHsgaWQ6IGFnZ0lkIH0pO1xuICAgICAgZXNBZ2cgPSBhZ2dzW2FnZ0lkXTtcblxuICAgICAgaWYgKCFhZ2dEZWYpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChhZ2dEZWYudHlwZSA9PT0gJ25lc3RlZCcpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzQnVja2V0cyhlc0FnZywgdGFyZ2V0LCBzZXJpZXNMaXN0LCB0YWJsZSwgcHJvcHMsIGRlcHRoICsgMSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVwdGggPT09IG1heERlcHRoKSB7XG4gICAgICAgIGlmIChhZ2dEZWYudHlwZSA9PT0gJ2RhdGVfaGlzdG9ncmFtJykge1xuICAgICAgICAgIHRoaXMucHJvY2Vzc01ldHJpY3MoZXNBZ2csIHRhcmdldCwgc2VyaWVzTGlzdCwgcHJvcHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0aW9uRG9jcyhlc0FnZywgYWdnRGVmLCB0YXJnZXQsIHRhYmxlLCBwcm9wcyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZUluZGV4IGluIGVzQWdnLmJ1Y2tldHMpIHtcbiAgICAgICAgICBidWNrZXQgPSBlc0FnZy5idWNrZXRzW25hbWVJbmRleF07XG4gICAgICAgICAgcHJvcHMgPSBjbG9uZShwcm9wcyk7XG4gICAgICAgICAgaWYgKGJ1Y2tldC5rZXkgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcHJvcHNbYWdnRGVmLmZpZWxkXSA9IGJ1Y2tldC5rZXk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb3BzWydmaWx0ZXInXSA9IG5hbWVJbmRleDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGJ1Y2tldC5rZXlfYXNfc3RyaW5nKSB7XG4gICAgICAgICAgICBwcm9wc1thZ2dEZWYuZmllbGRdID0gYnVja2V0LmtleV9hc19zdHJpbmc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucHJvY2Vzc0J1Y2tldHMoYnVja2V0LCB0YXJnZXQsIHNlcmllc0xpc3QsIHRhYmxlLCBwcm9wcywgZGVwdGggKyAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0TWV0cmljTmFtZShtZXRyaWM6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgbWV0cmljRGVmID0gT2JqZWN0LmVudHJpZXMobWV0cmljQWdncmVnYXRpb25Db25maWcpXG4gICAgICAuZmlsdGVyKChba2V5XSkgPT4ga2V5ID09PSBtZXRyaWMpXG4gICAgICAubWFwKChbXywgdmFsdWVdKSA9PiB2YWx1ZSlbMF07XG5cbiAgICBpZiAobWV0cmljRGVmKSB7XG4gICAgICByZXR1cm4gbWV0cmljRGVmLmxhYmVsO1xuICAgIH1cblxuICAgIGNvbnN0IGV4dGVuZGVkU3RhdCA9IHF1ZXJ5RGVmLmV4dGVuZGVkU3RhdHMuZmluZCgoZSkgPT4gZS52YWx1ZSA9PT0gbWV0cmljKTtcbiAgICBpZiAoZXh0ZW5kZWRTdGF0KSB7XG4gICAgICByZXR1cm4gZXh0ZW5kZWRTdGF0LmxhYmVsO1xuICAgIH1cblxuICAgIHJldHVybiBtZXRyaWM7XG4gIH1cblxuICBwcml2YXRlIGdldFNlcmllc05hbWUoc2VyaWVzOiBhbnksIHRhcmdldDogRWxhc3RpY3NlYXJjaFF1ZXJ5LCBkZWR1cDogYm9vbGVhbikge1xuICAgIGxldCBtZXRyaWNOYW1lID0gdGhpcy5nZXRNZXRyaWNOYW1lKHNlcmllcy5tZXRyaWMpO1xuXG4gICAgaWYgKHRhcmdldC5hbGlhcykge1xuICAgICAgY29uc3QgcmVnZXggPSAvXFx7XFx7KFtcXHNcXFNdKz8pXFx9XFx9L2c7XG5cbiAgICAgIHJldHVybiB0YXJnZXQuYWxpYXMucmVwbGFjZShyZWdleCwgKG1hdGNoOiBhbnksIGcxOiBhbnksIGcyOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSBnMSB8fCBnMjtcblxuICAgICAgICBpZiAoZ3JvdXAuaW5kZXhPZigndGVybSAnKSA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBzZXJpZXMucHJvcHNbZ3JvdXAuc3Vic3RyaW5nKDUpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VyaWVzLnByb3BzW2dyb3VwXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgcmV0dXJuIHNlcmllcy5wcm9wc1tncm91cF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdyb3VwID09PSAnbWV0cmljJykge1xuICAgICAgICAgIHJldHVybiBtZXRyaWNOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncm91cCA9PT0gJ2ZpZWxkJykge1xuICAgICAgICAgIHJldHVybiBzZXJpZXMuZmllbGQgfHwgJyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocXVlcnlEZWYuaXNQaXBlbGluZUFnZyhzZXJpZXMubWV0cmljKSkge1xuICAgICAgaWYgKHNlcmllcy5tZXRyaWMgJiYgcXVlcnlEZWYuaXNQaXBlbGluZUFnZ1dpdGhNdWx0aXBsZUJ1Y2tldFBhdGhzKHNlcmllcy5tZXRyaWMpKSB7XG4gICAgICAgIGNvbnN0IGFnZzogYW55ID0gZmluZCh0YXJnZXQubWV0cmljcywgeyBpZDogc2VyaWVzLm1ldHJpY0lkIH0pO1xuICAgICAgICBpZiAoYWdnICYmIGFnZy5zZXR0aW5ncy5zY3JpcHQpIHtcbiAgICAgICAgICBtZXRyaWNOYW1lID0gZ2V0U2NyaXB0VmFsdWUoYWdnKTtcblxuICAgICAgICAgIGZvciAoY29uc3QgcHYgb2YgYWdnLnBpcGVsaW5lVmFyaWFibGVzKSB7XG4gICAgICAgICAgICBjb25zdCBhcHBsaWVkQWdnOiBhbnkgPSBmaW5kKHRhcmdldC5tZXRyaWNzLCB7IGlkOiBwdi5waXBlbGluZUFnZyB9KTtcbiAgICAgICAgICAgIGlmIChhcHBsaWVkQWdnKSB7XG4gICAgICAgICAgICAgIG1ldHJpY05hbWUgPSBtZXRyaWNOYW1lLnJlcGxhY2UoJ3BhcmFtcy4nICsgcHYubmFtZSwgZGVzY3JpYmVNZXRyaWMoYXBwbGllZEFnZykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZXRyaWNOYW1lID0gJ1Vuc2V0JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYXBwbGllZEFnZzogYW55ID0gZmluZCh0YXJnZXQubWV0cmljcywgeyBpZDogc2VyaWVzLmZpZWxkIH0pO1xuICAgICAgICBpZiAoYXBwbGllZEFnZykge1xuICAgICAgICAgIG1ldHJpY05hbWUgKz0gJyAnICsgZGVzY3JpYmVNZXRyaWMoYXBwbGllZEFnZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWV0cmljTmFtZSA9ICdVbnNldCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNlcmllcy5maWVsZCkge1xuICAgICAgbWV0cmljTmFtZSArPSAnICcgKyBzZXJpZXMuZmllbGQ7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvcEtleXMgPSBrZXlzKHNlcmllcy5wcm9wcyk7XG4gICAgaWYgKHByb3BLZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG1ldHJpY05hbWU7XG4gICAgfVxuXG4gICAgbGV0IG5hbWUgPSAnJztcbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIHNlcmllcy5wcm9wcykge1xuICAgICAgbmFtZSArPSBzZXJpZXMucHJvcHNbcHJvcE5hbWVdICsgJyAnO1xuICAgIH1cblxuICAgIGlmIChkZWR1cCkge1xuICAgICAgcmV0dXJuIG5hbWUudHJpbSgpICsgJyAnICsgbWV0cmljTmFtZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZS50cmltKCk7XG4gIH1cblxuICBuYW1lU2VyaWVzKHNlcmllc0xpc3Q6IGFueSwgdGFyZ2V0OiBFbGFzdGljc2VhcmNoUXVlcnkpIHtcbiAgICBjb25zdCBtZXRyaWNUeXBlQ291bnQgPSB1bmlxKG1hcChzZXJpZXNMaXN0LCAnbWV0cmljJykpLmxlbmd0aDtcbiAgICBjb25zdCBoYXNUb3BNZXRyaWNXaXRoTXVsdGlwbGVNZXRyaWNzID0gKFxuICAgICAgdGFyZ2V0Lm1ldHJpY3M/LmZpbHRlcigobSkgPT4gbS50eXBlID09PSAndG9wX21ldHJpY3MnKSBhcyBUb3BNZXRyaWNzW11cbiAgICApLnNvbWUoKG0pID0+IChtPy5zZXR0aW5ncz8ubWV0cmljcz8ubGVuZ3RoIHx8IDApID4gMSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlcmllc0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNlcmllcyA9IHNlcmllc0xpc3RbaV07XG4gICAgICBzZXJpZXMudGFyZ2V0ID0gdGhpcy5nZXRTZXJpZXNOYW1lKHNlcmllcywgdGFyZ2V0LCBtZXRyaWNUeXBlQ291bnQgPiAxIHx8IGhhc1RvcE1ldHJpY1dpdGhNdWx0aXBsZU1ldHJpY3MpO1xuICAgIH1cbiAgfVxuXG4gIHByb2Nlc3NIaXRzKGhpdHM6IHsgdG90YWw6IHsgdmFsdWU6IGFueSB9OyBoaXRzOiBhbnlbXSB9LCBzZXJpZXNMaXN0OiBhbnlbXSwgdGFyZ2V0OiBFbGFzdGljc2VhcmNoUXVlcnkpIHtcbiAgICBjb25zdCBoaXRzVG90YWwgPSB0eXBlb2YgaGl0cy50b3RhbCA9PT0gJ251bWJlcicgPyBoaXRzLnRvdGFsIDogaGl0cy50b3RhbC52YWx1ZTsgLy8gPC0gV29ya3Mgd2l0aCBFbGFzdGljc2VhcmNoIDcuMCtcblxuICAgIGNvbnN0IHNlcmllczogYW55ID0ge1xuICAgICAgdGFyZ2V0OiB0YXJnZXQucmVmSWQsXG4gICAgICB0eXBlOiAnZG9jcycsXG4gICAgICByZWZJZDogdGFyZ2V0LnJlZklkLFxuICAgICAgZGF0YXBvaW50czogW10sXG4gICAgICB0b3RhbDogaGl0c1RvdGFsLFxuICAgICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICB9O1xuICAgIGxldCBwcm9wTmFtZSwgaGl0LCBkb2M6IGFueSwgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBoaXRzLmhpdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGhpdCA9IGhpdHMuaGl0c1tpXTtcbiAgICAgIGRvYyA9IHtcbiAgICAgICAgX2lkOiBoaXQuX2lkLFxuICAgICAgICBfdHlwZTogaGl0Ll90eXBlLFxuICAgICAgICBfaW5kZXg6IGhpdC5faW5kZXgsXG4gICAgICAgIHNvcnQ6IGhpdC5zb3J0LFxuICAgICAgICBoaWdobGlnaHQ6IGhpdC5oaWdobGlnaHQsXG4gICAgICB9O1xuXG4gICAgICBpZiAoaGl0Ll9zb3VyY2UpIHtcbiAgICAgICAgZm9yIChwcm9wTmFtZSBpbiBoaXQuX3NvdXJjZSkge1xuICAgICAgICAgIGRvY1twcm9wTmFtZV0gPSBoaXQuX3NvdXJjZVtwcm9wTmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChwcm9wTmFtZSBpbiBoaXQuZmllbGRzKSB7XG4gICAgICAgIGRvY1twcm9wTmFtZV0gPSBoaXQuZmllbGRzW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICAgIHNlcmllcy5kYXRhcG9pbnRzLnB1c2goZG9jKTtcbiAgICB9XG5cbiAgICBzZXJpZXNMaXN0LnB1c2goc2VyaWVzKTtcbiAgfVxuXG4gIHRyaW1EYXRhcG9pbnRzKGFnZ3JlZ2F0aW9uczogYW55LCB0YXJnZXQ6IEVsYXN0aWNzZWFyY2hRdWVyeSkge1xuICAgIGNvbnN0IGhpc3RvZ3JhbTogYW55ID0gZmluZCh0YXJnZXQuYnVja2V0QWdncywgeyB0eXBlOiAnZGF0ZV9oaXN0b2dyYW0nIH0pO1xuXG4gICAgY29uc3Qgc2hvdWxkRHJvcEZpcnN0QW5kTGFzdCA9IGhpc3RvZ3JhbSAmJiBoaXN0b2dyYW0uc2V0dGluZ3MgJiYgaGlzdG9ncmFtLnNldHRpbmdzLnRyaW1FZGdlcztcbiAgICBpZiAoc2hvdWxkRHJvcEZpcnN0QW5kTGFzdCkge1xuICAgICAgY29uc3QgdHJpbSA9IGhpc3RvZ3JhbS5zZXR0aW5ncy50cmltRWRnZXM7XG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gYWdncmVnYXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IGFnZ3JlZ2F0aW9uc1twcm9wXTtcbiAgICAgICAgaWYgKHBvaW50cy5kYXRhcG9pbnRzLmxlbmd0aCA+IHRyaW0gKiAyKSB7XG4gICAgICAgICAgcG9pbnRzLmRhdGFwb2ludHMgPSBwb2ludHMuZGF0YXBvaW50cy5zbGljZSh0cmltLCBwb2ludHMuZGF0YXBvaW50cy5sZW5ndGggLSB0cmltKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldEVycm9yRnJvbUVsYXN0aWNSZXNwb25zZShyZXNwb25zZTogYW55LCBlcnI6IGFueSkge1xuICAgIGNvbnN0IHJlc3VsdDogYW55ID0ge307XG4gICAgcmVzdWx0LmRhdGEgPSBKU09OLnN0cmluZ2lmeShlcnIsIG51bGwsIDQpO1xuICAgIGlmIChlcnIucm9vdF9jYXVzZSAmJiBlcnIucm9vdF9jYXVzZS5sZW5ndGggPiAwICYmIGVyci5yb290X2NhdXNlWzBdLnJlYXNvbikge1xuICAgICAgcmVzdWx0Lm1lc3NhZ2UgPSBlcnIucm9vdF9jYXVzZVswXS5yZWFzb247XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5tZXNzYWdlID0gZXJyLnJlYXNvbiB8fCAnVW5rbm93biBlbGFzdGljIGVycm9yIHJlc3BvbnNlJztcbiAgICB9XG5cbiAgICBpZiAocmVzcG9uc2UuJCRjb25maWcpIHtcbiAgICAgIHJlc3VsdC5jb25maWcgPSByZXNwb25zZS4kJGNvbmZpZztcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZ2V0VGltZVNlcmllcygpIHtcbiAgICBpZiAodGhpcy50YXJnZXRzLnNvbWUoKHRhcmdldCkgPT4gcXVlcnlEZWYuaGFzTWV0cmljT2ZUeXBlKHRhcmdldCwgJ3Jhd19kYXRhJykpKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVzcG9uc2VUb0RhdGFGcmFtZXMoZmFsc2UpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnByb2Nlc3NSZXNwb25zZVRvU2VyaWVzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJlc3VsdCxcbiAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLm1hcCgoaXRlbSkgPT4gdG9EYXRhRnJhbWUoaXRlbSkpLFxuICAgIH07XG4gIH1cblxuICBnZXRMb2dzKGxvZ01lc3NhZ2VGaWVsZD86IHN0cmluZywgbG9nTGV2ZWxGaWVsZD86IHN0cmluZyk6IERhdGFRdWVyeVJlc3BvbnNlIHtcbiAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVzcG9uc2VUb0RhdGFGcmFtZXModHJ1ZSwgbG9nTWVzc2FnZUZpZWxkLCBsb2dMZXZlbEZpZWxkKTtcbiAgfVxuXG4gIHByaXZhdGUgcHJvY2Vzc1Jlc3BvbnNlVG9EYXRhRnJhbWVzKFxuICAgIGlzTG9nc1JlcXVlc3Q6IGJvb2xlYW4sXG4gICAgbG9nTWVzc2FnZUZpZWxkPzogc3RyaW5nLFxuICAgIGxvZ0xldmVsRmllbGQ/OiBzdHJpbmdcbiAgKTogRGF0YVF1ZXJ5UmVzcG9uc2Uge1xuICAgIGNvbnN0IGRhdGFGcmFtZTogRGF0YUZyYW1lW10gPSBbXTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMucmVzcG9uc2UucmVzcG9uc2VzLmxlbmd0aDsgbisrKSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMucmVzcG9uc2UucmVzcG9uc2VzW25dO1xuICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgIHRocm93IHRoaXMuZ2V0RXJyb3JGcm9tRWxhc3RpY1Jlc3BvbnNlKHRoaXMucmVzcG9uc2UsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlLmhpdHMpIHtcbiAgICAgICAgY29uc3QgeyBwcm9wTmFtZXMsIGRvY3MgfSA9IGZsYXR0ZW5IaXRzKHJlc3BvbnNlLmhpdHMuaGl0cyk7XG5cbiAgICAgICAgY29uc3Qgc2VyaWVzID0gZG9jcy5sZW5ndGhcbiAgICAgICAgICA/IGNyZWF0ZUVtcHR5RGF0YUZyYW1lKFxuICAgICAgICAgICAgICBwcm9wTmFtZXMubWFwKHRvTmFtZVR5cGVQYWlyKGRvY3MpKSxcbiAgICAgICAgICAgICAgaXNMb2dzUmVxdWVzdCxcbiAgICAgICAgICAgICAgdGhpcy50YXJnZXRzWzBdLnRpbWVGaWVsZCxcbiAgICAgICAgICAgICAgbG9nTWVzc2FnZUZpZWxkLFxuICAgICAgICAgICAgICBsb2dMZXZlbEZpZWxkXG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBjcmVhdGVFbXB0eURhdGFGcmFtZShbXSwgaXNMb2dzUmVxdWVzdCk7XG5cbiAgICAgICAgaWYgKGlzTG9nc1JlcXVlc3QpIHtcbiAgICAgICAgICBhZGRQcmVmZXJyZWRWaXN1YWxpc2F0aW9uVHlwZShzZXJpZXMsICdsb2dzJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgYSByb3cgZm9yIGVhY2ggZG9jdW1lbnRcbiAgICAgICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jcykge1xuICAgICAgICAgIGlmIChsb2dMZXZlbEZpZWxkKSB7XG4gICAgICAgICAgICAvLyBSZW1hcCBsZXZlbCBmaWVsZCBiYXNlZCBvbiB0aGUgZGF0YXNvdXJjZSBjb25maWcuIFRoaXMgZmllbGQgaXNcbiAgICAgICAgICAgIC8vIHRoZW4gdXNlZCBpbiBleHBsb3JlIHRvIGZpZ3VyZSBvdXQgdGhlIGxvZyBsZXZlbC4gV2UgbWF5IHJld3JpdGVcbiAgICAgICAgICAgIC8vIHNvbWUgYWN0dWFsIGRhdGEgaW4gdGhlIGxldmVsIGZpZWxkIGlmIHRoZXkgYXJlIGRpZmZlcmVudC5cbiAgICAgICAgICAgIGRvY1snbGV2ZWwnXSA9IGRvY1tsb2dMZXZlbEZpZWxkXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gV2hlbiBoaWdobGlnaHRpbmcgZXhpc3RzLCB3ZSBuZWVkIHRvIGNvbGxlY3QgYWxsIHRoZSBoaWdobGlnaHRlZFxuICAgICAgICAgIC8vIHBocmFzZXMgYW5kIGFkZCB0aGVtIHRvIHRoZSBEYXRhRnJhbWUncyBtZXRhLnNlYXJjaFdvcmRzIGFycmF5LlxuICAgICAgICAgIGlmIChkb2MuaGlnaGxpZ2h0KSB7XG4gICAgICAgICAgICAvLyBUaGVyZSBtaWdodCBiZSBtdWx0aXBsZSB3b3JkcyBzbyB3ZSBuZWVkIHR3byB2ZXJzaW9ucyBvZiB0aGVcbiAgICAgICAgICAgIC8vIHJlZ3VsYXIgZXhwcmVzc2lvbi4gT25lIHRvIG1hdGNoIGdvYmFsbHksIHdoZW4gdXNlZCB3aXRoIHBhcnQubWF0Y2gsXG4gICAgICAgICAgICAvLyBpdCByZXR1cm5zIGFuZCBhcnJheSBvZiBtYXRjaGVzLiBUaGUgc2Vjb25kIG9uZSBpcyB1c2VkIHRvIGNhcHR1cmUgdGhlXG4gICAgICAgICAgICAvLyB2YWx1ZXMgYmV0d2VlbiB0aGUgdGFncy5cbiAgICAgICAgICAgIGNvbnN0IGdsb2JhbEhpZ2hsaWdodFdvcmRSZWdleCA9IG5ldyBSZWdFeHAoSElHSExJR0hUX1RBR1NfRVhQLCAnZycpO1xuICAgICAgICAgICAgY29uc3QgaGlnaGxpZ2h0V29yZFJlZ2V4ID0gbmV3IFJlZ0V4cChISUdITElHSFRfVEFHU19FWFApO1xuICAgICAgICAgICAgY29uc3QgbmV3U2VhcmNoV29yZHMgPSBPYmplY3Qua2V5cyhkb2MuaGlnaGxpZ2h0KVxuICAgICAgICAgICAgICAuZmxhdE1hcCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvYy5oaWdobGlnaHRba2V5XS5mbGF0TWFwKChsaW5lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRQaHJhc2VzID0gbGluZS5tYXRjaChnbG9iYWxIaWdobGlnaHRXb3JkUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVkUGhyYXNlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlZFBocmFzZXMubWFwKChwYXJ0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBwYXJ0Lm1hdGNoKGhpZ2hsaWdodFdvcmRSZWdleCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAobWF0Y2hlcyAmJiBtYXRjaGVzWzFdKSB8fCBudWxsO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5maWx0ZXIoaWRlbnRpdHkpO1xuICAgICAgICAgICAgLy8gSWYgbWV0YSBhbmQgc2VhcmNoV29yZHMgYWxyZWFkeSBleGlzdHMsIGFkZCB0aGUgd29yZHMgYW5kXG4gICAgICAgICAgICAvLyBkZWR1cGxpY2F0ZSBvdGhlcndpc2UgY3JlYXRlIGEgbmV3IHNldCBvZiBzZWFyY2ggd29yZHMuXG4gICAgICAgICAgICBjb25zdCBzZWFyY2hXb3JkcyA9IHNlcmllcy5tZXRhPy5zZWFyY2hXb3Jkc1xuICAgICAgICAgICAgICA/IHVuaXEoWy4uLnNlcmllcy5tZXRhLnNlYXJjaFdvcmRzLCAuLi5uZXdTZWFyY2hXb3Jkc10pXG4gICAgICAgICAgICAgIDogWy4uLm5ld1NlYXJjaFdvcmRzXTtcbiAgICAgICAgICAgIHNlcmllcy5tZXRhID0gc2VyaWVzLm1ldGEgPyB7IC4uLnNlcmllcy5tZXRhLCBzZWFyY2hXb3JkcyB9IDogeyBzZWFyY2hXb3JkcyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXJpZXMuYWRkKGRvYyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLnRhcmdldHNbbl07XG4gICAgICAgIHNlcmllcy5yZWZJZCA9IHRhcmdldC5yZWZJZDtcbiAgICAgICAgZGF0YUZyYW1lLnB1c2goc2VyaWVzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlLmFnZ3JlZ2F0aW9ucykge1xuICAgICAgICBjb25zdCBhZ2dyZWdhdGlvbnMgPSByZXNwb25zZS5hZ2dyZWdhdGlvbnM7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMudGFyZ2V0c1tuXTtcbiAgICAgICAgY29uc3QgdG1wU2VyaWVzTGlzdDogYW55W10gPSBbXTtcbiAgICAgICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGVNb2RlbCgpO1xuXG4gICAgICAgIHRoaXMucHJvY2Vzc0J1Y2tldHMoYWdncmVnYXRpb25zLCB0YXJnZXQsIHRtcFNlcmllc0xpc3QsIHRhYmxlLCB7fSwgMCk7XG4gICAgICAgIHRoaXMudHJpbURhdGFwb2ludHModG1wU2VyaWVzTGlzdCwgdGFyZ2V0KTtcbiAgICAgICAgdGhpcy5uYW1lU2VyaWVzKHRtcFNlcmllc0xpc3QsIHRhcmdldCk7XG5cbiAgICAgICAgaWYgKHRhYmxlLnJvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHNlcmllcyA9IHRvRGF0YUZyYW1lKHRhYmxlKTtcbiAgICAgICAgICBzZXJpZXMucmVmSWQgPSB0YXJnZXQucmVmSWQ7XG4gICAgICAgICAgZGF0YUZyYW1lLnB1c2goc2VyaWVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdG1wU2VyaWVzTGlzdC5sZW5ndGg7IHkrKykge1xuICAgICAgICAgIGxldCBzZXJpZXMgPSB0b0RhdGFGcmFtZSh0bXBTZXJpZXNMaXN0W3ldKTtcblxuICAgICAgICAgIC8vIFdoZW4gbG9nIHJlc3VsdHMsIHNob3cgYWdncmVnYXRpb25zIG9ubHkgaW4gZ3JhcGguIExvZyBmaWVsZHMgYXJlIHRoZW4gZ29pbmcgdG8gYmUgc2hvd24gaW4gdGFibGUuXG4gICAgICAgICAgaWYgKGlzTG9nc1JlcXVlc3QpIHtcbiAgICAgICAgICAgIGFkZFByZWZlcnJlZFZpc3VhbGlzYXRpb25UeXBlKHNlcmllcywgJ2dyYXBoJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VyaWVzLnJlZklkID0gdGFyZ2V0LnJlZklkO1xuICAgICAgICAgIGRhdGFGcmFtZS5wdXNoKHNlcmllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBmcmFtZSBvZiBkYXRhRnJhbWUpIHtcbiAgICAgIGZvciAobGV0IGZpZWxkIG9mIGZyYW1lLmZpZWxkcykge1xuICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gRmllbGRUeXBlLnRpbWUgJiYgdHlwZW9mIGZpZWxkLnZhbHVlc1swXSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICBmaWVsZC52YWx1ZXMgPSBjb252ZXJ0RmllbGRUeXBlKGZpZWxkLCB7IGRlc3RpbmF0aW9uVHlwZTogRmllbGRUeXBlLnRpbWUgfSkudmFsdWVzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGF0YTogZGF0YUZyYW1lIH07XG4gIH1cblxuICBwcm9jZXNzUmVzcG9uc2VUb1NlcmllcyA9ICgpID0+IHtcbiAgICBjb25zdCBzZXJpZXNMaXN0ID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVzcG9uc2UucmVzcG9uc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMucmVzcG9uc2UucmVzcG9uc2VzW2ldO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy50YXJnZXRzW2ldO1xuXG4gICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgdGhpcy5nZXRFcnJvckZyb21FbGFzdGljUmVzcG9uc2UodGhpcy5yZXNwb25zZSwgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzcG9uc2UuaGl0cyAmJiByZXNwb25zZS5oaXRzLmhpdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnByb2Nlc3NIaXRzKHJlc3BvbnNlLmhpdHMsIHNlcmllc0xpc3QsIHRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNwb25zZS5hZ2dyZWdhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYWdncmVnYXRpb25zID0gcmVzcG9uc2UuYWdncmVnYXRpb25zO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLnRhcmdldHNbaV07XG4gICAgICAgIGNvbnN0IHRtcFNlcmllc0xpc3Q6IGFueVtdID0gW107XG4gICAgICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlTW9kZWwoKTtcbiAgICAgICAgdGFibGUucmVmSWQgPSB0YXJnZXQucmVmSWQ7XG5cbiAgICAgICAgdGhpcy5wcm9jZXNzQnVja2V0cyhhZ2dyZWdhdGlvbnMsIHRhcmdldCwgdG1wU2VyaWVzTGlzdCwgdGFibGUsIHt9LCAwKTtcbiAgICAgICAgdGhpcy50cmltRGF0YXBvaW50cyh0bXBTZXJpZXNMaXN0LCB0YXJnZXQpO1xuICAgICAgICB0aGlzLm5hbWVTZXJpZXModG1wU2VyaWVzTGlzdCwgdGFyZ2V0KTtcblxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRtcFNlcmllc0xpc3QubGVuZ3RoOyB5KyspIHtcbiAgICAgICAgICBzZXJpZXNMaXN0LnB1c2godG1wU2VyaWVzTGlzdFt5XSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFibGUucm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2VyaWVzTGlzdC5wdXNoKHRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGRhdGE6IHNlcmllc0xpc3QgfTtcbiAgfTtcbn1cblxudHlwZSBEb2MgPSB7XG4gIF9pZDogc3RyaW5nO1xuICBfdHlwZTogc3RyaW5nO1xuICBfaW5kZXg6IHN0cmluZztcbiAgX3NvdXJjZT86IGFueTtcbiAgc29ydD86IEFycmF5PHN0cmluZyB8IG51bWJlcj47XG4gIGhpZ2hsaWdodD86IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPjtcbn07XG5cbi8qKlxuICogRmxhdHRlbiB0aGUgZG9jcyBmcm9tIHJlc3BvbnNlIG1haW5seSB0aGUgX3NvdXJjZSBwYXJ0IHdoaWNoIGNhbiBiZSBuZXN0ZWQuIFRoaXMgZmxhdHRlbnMgaXQgc28gdGhhdCBpdCBpcyBvbmUgbGV2ZWxcbiAqIGRlZXAgYW5kIHRoZSBrZXlzIGFyZTogYGxldmVsMU5hbWUubGV2ZWwyTmFtZS4uLmAuIEFsc28gcmV0dXJucyBsaXN0IG9mIGFsbCBwcm9wZXJ0aWVzIGZyb20gYWxsIHRoZSBkb2NzIChub3QgYWxsXG4gKiBkb2NzIGhhdmUgdG8gaGF2ZSB0aGUgc2FtZSBrZXlzKS5cbiAqIEBwYXJhbSBoaXRzXG4gKi9cbmNvbnN0IGZsYXR0ZW5IaXRzID0gKGhpdHM6IERvY1tdKTogeyBkb2NzOiBBcnJheTxSZWNvcmQ8c3RyaW5nLCBhbnk+PjsgcHJvcE5hbWVzOiBzdHJpbmdbXSB9ID0+IHtcbiAgY29uc3QgZG9jczogYW55W10gPSBbXTtcbiAgLy8gV2Uga2VlcCBhIGxpc3Qgb2YgYWxsIHByb3BzIHNvIHRoYXQgd2UgY2FuIGNyZWF0ZSBhbGwgdGhlIGZpZWxkcyBpbiB0aGUgZGF0YUZyYW1lLCB0aGlzIGNhbiBsZWFkXG4gIC8vIHRvIHdpZGUgc3BhcnNlIGRhdGFmcmFtZXMgaW4gY2FzZSB0aGUgc2NoZW1lIGlzIGRpZmZlcmVudCBwZXIgZG9jdW1lbnQuXG4gIGxldCBwcm9wTmFtZXM6IHN0cmluZ1tdID0gW107XG5cbiAgZm9yIChjb25zdCBoaXQgb2YgaGl0cykge1xuICAgIGNvbnN0IGZsYXR0ZW5lZCA9IGhpdC5fc291cmNlID8gZmxhdHRlbihoaXQuX3NvdXJjZSkgOiB7fTtcbiAgICBjb25zdCBkb2MgPSB7XG4gICAgICBfaWQ6IGhpdC5faWQsXG4gICAgICBfdHlwZTogaGl0Ll90eXBlLFxuICAgICAgX2luZGV4OiBoaXQuX2luZGV4LFxuICAgICAgc29ydDogaGl0LnNvcnQsXG4gICAgICBoaWdobGlnaHQ6IGhpdC5oaWdobGlnaHQsXG4gICAgICBfc291cmNlOiB7IC4uLmZsYXR0ZW5lZCB9LFxuICAgICAgLi4uZmxhdHRlbmVkLFxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIG9mIE9iamVjdC5rZXlzKGRvYykpIHtcbiAgICAgIGlmIChwcm9wTmFtZXMuaW5kZXhPZihwcm9wTmFtZSkgPT09IC0xKSB7XG4gICAgICAgIHByb3BOYW1lcy5wdXNoKHByb3BOYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkb2NzLnB1c2goZG9jKTtcbiAgfVxuXG4gIHByb3BOYW1lcy5zb3J0KCk7XG4gIHJldHVybiB7IGRvY3MsIHByb3BOYW1lcyB9O1xufTtcblxuLyoqXG4gKiBDcmVhdGUgZW1wdHkgZGF0YWZyYW1lIGJ1dCB3aXRoIGNyZWF0ZWQgZmllbGRzLiBGaWVsZHMgYXJlIGJhc2VkIGZyb20gcHJvcE5hbWVzIChzaG91bGQgYmUgZnJvbSB0aGUgcmVzcG9uc2UpIGFuZFxuICogYWxzbyBmcm9tIGNvbmZpZ3VyYXRpb24gc3BlY2lmaWVkIGZpZWxkcyBmb3IgbWVzc2FnZSwgdGltZSwgYW5kIGxldmVsLlxuICogQHBhcmFtIHByb3BOYW1lc1xuICogQHBhcmFtIHRpbWVGaWVsZFxuICogQHBhcmFtIGxvZ01lc3NhZ2VGaWVsZFxuICogQHBhcmFtIGxvZ0xldmVsRmllbGRcbiAqL1xuY29uc3QgY3JlYXRlRW1wdHlEYXRhRnJhbWUgPSAoXG4gIHByb3BzOiBBcnJheTxbc3RyaW5nLCBGaWVsZFR5cGVdPixcbiAgaXNMb2dzUmVxdWVzdDogYm9vbGVhbixcbiAgdGltZUZpZWxkPzogc3RyaW5nLFxuICBsb2dNZXNzYWdlRmllbGQ/OiBzdHJpbmcsXG4gIGxvZ0xldmVsRmllbGQ/OiBzdHJpbmdcbik6IE11dGFibGVEYXRhRnJhbWUgPT4ge1xuICBjb25zdCBzZXJpZXMgPSBuZXcgTXV0YWJsZURhdGFGcmFtZSh7IGZpZWxkczogW10gfSk7XG5cbiAgaWYgKHRpbWVGaWVsZCkge1xuICAgIHNlcmllcy5hZGRGaWVsZCh7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBuYW1lOiB0aW1lRmllbGQsXG4gICAgICB0eXBlOiBGaWVsZFR5cGUudGltZSxcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChsb2dNZXNzYWdlRmllbGQpIHtcbiAgICBjb25zdCBmID0gc2VyaWVzLmFkZEZpZWxkKHtcbiAgICAgIG5hbWU6IGxvZ01lc3NhZ2VGaWVsZCxcbiAgICAgIHR5cGU6IEZpZWxkVHlwZS5zdHJpbmcsXG4gICAgfSk7XG4gICAgc2VyaWVzLnNldFBhcnNlcihmLCAodjogYW55KSA9PiB7XG4gICAgICByZXR1cm4gdiB8fCAnJztcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChsb2dMZXZlbEZpZWxkKSB7XG4gICAgY29uc3QgZiA9IHNlcmllcy5hZGRGaWVsZCh7XG4gICAgICBuYW1lOiAnbGV2ZWwnLFxuICAgICAgdHlwZTogRmllbGRUeXBlLnN0cmluZyxcbiAgICB9KTtcbiAgICBzZXJpZXMuc2V0UGFyc2VyKGYsICh2OiBhbnkpID0+IHtcbiAgICAgIHJldHVybiB2IHx8ICcnO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgZmllbGROYW1lcyA9IHNlcmllcy5maWVsZHMubWFwKChmaWVsZCkgPT4gZmllbGQubmFtZSk7XG5cbiAgZm9yIChjb25zdCBbbmFtZSwgdHlwZV0gb2YgcHJvcHMpIHtcbiAgICAvLyBEbyBub3QgZHVwbGljYXRlIGZpZWxkcy4gVGhpcyBjYW4gbWVhbiB0aGF0IHdlIHdpbGwgc2hhZG93IHNvbWUgZmllbGRzLlxuICAgIGlmIChmaWVsZE5hbWVzLmluY2x1ZGVzKG5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gRG8gbm90IGFkZCBfc291cmNlIGZpZWxkIChiZXNpZGVzIGxvZ3MpIGFzIHdlIGFyZSBzaG93aW5nIGVhY2ggX3NvdXJjZSBmaWVsZCBpbiB0YWJsZSBpbnN0ZWFkLlxuICAgIGlmICghaXNMb2dzUmVxdWVzdCAmJiBuYW1lID09PSAnX3NvdXJjZScpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGYgPSBzZXJpZXMuYWRkRmllbGQoe1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgICB9LFxuICAgICAgbmFtZSxcbiAgICAgIHR5cGUsXG4gICAgfSk7XG4gICAgc2VyaWVzLnNldFBhcnNlcihmLCAodjogYW55KSA9PiB7XG4gICAgICByZXR1cm4gdiB8fCAnJztcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBzZXJpZXM7XG59O1xuXG5jb25zdCBhZGRQcmVmZXJyZWRWaXN1YWxpc2F0aW9uVHlwZSA9IChzZXJpZXM6IGFueSwgdHlwZTogUHJlZmVycmVkVmlzdWFsaXNhdGlvblR5cGUpID0+IHtcbiAgbGV0IHMgPSBzZXJpZXM7XG4gIHMubWV0YVxuICAgID8gKHMubWV0YS5wcmVmZXJyZWRWaXN1YWxpc2F0aW9uVHlwZSA9IHR5cGUpXG4gICAgOiAocy5tZXRhID0ge1xuICAgICAgICBwcmVmZXJyZWRWaXN1YWxpc2F0aW9uVHlwZTogdHlwZSxcbiAgICAgIH0pO1xufTtcblxuY29uc3QgdG9OYW1lVHlwZVBhaXIgPVxuICAoZG9jczogQXJyYXk8UmVjb3JkPHN0cmluZywgYW55Pj4pID0+XG4gIChwcm9wTmFtZTogc3RyaW5nKTogW3N0cmluZywgRmllbGRUeXBlXSA9PiBbXG4gICAgcHJvcE5hbWUsXG4gICAgZ3Vlc3NUeXBlKGRvY3MuZmluZCgoZG9jKSA9PiBkb2NbcHJvcE5hbWVdICE9PSB1bmRlZmluZWQpPy5bcHJvcE5hbWVdKSxcbiAgXTtcblxuLyoqXG4gKiBUcnlpbmcgdG8gZ3Vlc3MgZGF0YSB0eXBlIGZyb20gaXRzIHZhbHVlLiBUaGlzIGlzIGZhciBmcm9tIHBlcmZlY3QsIGFzIGluIG9yZGVyIHRvIGhhdmUgYWNjdXJhdGUgZ3Vlc3NcbiAqIHdlIHNob3VsZCBoYXZlIGFjY2VzcyB0byB0aGUgZWxhc3RpY3NlYXJjaCBtYXBwaW5nLCBidXQgaXQgY292ZXJzIHRoZSBtb3N0IGNvbW1vbiB1c2UgY2FzZXMgZm9yIG51bWJlcnMsIHN0cmluZ3MgJiBhcnJheXMuXG4gKi9cbmNvbnN0IGd1ZXNzVHlwZSA9ICh2YWx1ZTogdW5rbm93bik6IEZpZWxkVHlwZSA9PiB7XG4gIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBGaWVsZFR5cGUubnVtYmVyO1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gRmllbGRUeXBlLnN0cmluZztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIEZpZWxkVHlwZS5vdGhlcjtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJ0YXJnZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/ElasticResponse.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/IndexPattern.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IndexPattern: () => (/* binding */ IndexPattern),\n/* harmony export */   intervalMap: () => (/* binding */ intervalMap)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n\n\nconst intervalMap = {\n  Hourly: { startOf: \"hour\", amount: \"hours\" },\n  Daily: { startOf: \"day\", amount: \"days\" },\n  Weekly: { startOf: \"isoWeek\", amount: \"weeks\" },\n  Monthly: { startOf: \"month\", amount: \"months\" },\n  Yearly: { startOf: \"year\", amount: \"years\" }\n};\nclass IndexPattern {\n  constructor(pattern, interval) {\n    this.pattern = pattern;\n    this.interval = interval;\n    this.dateLocale = \"en\";\n  }\n  getIndexForToday() {\n    if (this.interval) {\n      return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.toUtc)().locale(this.dateLocale).format(this.pattern);\n    } else {\n      return this.pattern;\n    }\n  }\n  getIndexList(from, to) {\n    const indexOffset = 7;\n    if (!this.interval) {\n      return this.pattern;\n    }\n    const intervalInfo = intervalMap[this.interval];\n    const start = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.dateTime)(from || (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.dateTime)(to).add(-indexOffset, intervalInfo.amount)).utc().startOf(intervalInfo.startOf);\n    const endEpoch = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.dateTime)(to || (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.dateTime)(from).add(indexOffset, intervalInfo.amount)).utc().startOf(intervalInfo.startOf).valueOf();\n    const indexList = [];\n    while (start.valueOf() <= endEpoch) {\n      indexList.push(start.locale(this.dateLocale).format(this.pattern));\n      start.add(1, intervalInfo.amount);\n    }\n    return indexList;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL0luZGV4UGF0dGVybi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBWWpELE1BQU0sY0FBMkI7QUFBQSxFQUN0QyxRQUFRLEVBQUUsU0FBUyxRQUFRLFFBQVEsUUFBUTtBQUFBLEVBQzNDLE9BQU8sRUFBRSxTQUFTLE9BQU8sUUFBUSxPQUFPO0FBQUEsRUFDeEMsUUFBUSxFQUFFLFNBQVMsV0FBVyxRQUFRLFFBQVE7QUFBQSxFQUM5QyxTQUFTLEVBQUUsU0FBUyxTQUFTLFFBQVEsU0FBUztBQUFBLEVBQzlDLFFBQVEsRUFBRSxTQUFTLFFBQVEsUUFBUSxRQUFRO0FBQzdDO0FBRU8sTUFBTSxhQUFhO0FBQUEsRUFHeEIsWUFDVSxTQUNBLFVBQ1I7QUFGUTtBQUNBO0FBSlYsU0FBUSxhQUFhO0FBQUEsRUFLbEI7QUFBQSxFQUVILG1CQUFtQjtBQUNqQixRQUFJLEtBQUssVUFBVTtBQUNqQixhQUFPLG9EQUFLLENBQUMsRUFBRSxPQUFPLEtBQUssVUFBVSxFQUFFLE9BQU8sS0FBSyxPQUFPO0FBQUEsSUFDNUQsT0FBTztBQUNMLGFBQU8sS0FBSztBQUFBLElBQ2Q7QUFBQSxFQUNGO0FBQUEsRUFFQSxhQUFhLE1BQWlCLElBQWU7QUFNM0MsVUFBTSxjQUFjO0FBQ3BCLFFBQUksQ0FBQyxLQUFLLFVBQVU7QUFDbEIsYUFBTyxLQUFLO0FBQUEsSUFDZDtBQUVBLFVBQU0sZUFBZSxZQUFZLEtBQUssUUFBUTtBQUM5QyxVQUFNLFFBQVEsdURBQVEsQ0FBQyxRQUFRLHVEQUFRLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLGFBQWEsTUFBTSxDQUFDLEVBQy9FLElBQUksRUFDSixRQUFRLGFBQWEsT0FBTztBQUMvQixVQUFNLFdBQVcsdURBQVEsQ0FBQyxNQUFNLHVEQUFRLENBQUMsSUFBSSxFQUFFLElBQUksYUFBYSxhQUFhLE1BQU0sQ0FBQyxFQUNqRixJQUFJLEVBQ0osUUFBUSxhQUFhLE9BQU8sRUFDNUIsUUFBUTtBQUNYLFVBQU0sWUFBWSxDQUFDO0FBRW5CLFdBQU8sTUFBTSxRQUFRLEtBQUssVUFBVTtBQUNsQyxnQkFBVSxLQUFLLE1BQU0sT0FBTyxLQUFLLFVBQVUsRUFBRSxPQUFPLEtBQUssT0FBTyxDQUFDO0FBQ2pFLFlBQU0sSUFBSSxHQUFHLGFBQWEsTUFBTTtBQUFBLElBQ2xDO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL0luZGV4UGF0dGVybi50cz80NTM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRvVXRjLCBkYXRlVGltZSwgRGF0ZVRpbWUsIER1cmF0aW9uVW5pdCB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuXG5pbXBvcnQgeyBJbnRlcnZhbCB9IGZyb20gJy4vdHlwZXMnO1xuXG50eXBlIEludGVydmFsTWFwID0gUmVjb3JkPFxuICBJbnRlcnZhbCxcbiAge1xuICAgIHN0YXJ0T2Y6IER1cmF0aW9uVW5pdDtcbiAgICBhbW91bnQ6IER1cmF0aW9uVW5pdDtcbiAgfVxuPjtcblxuZXhwb3J0IGNvbnN0IGludGVydmFsTWFwOiBJbnRlcnZhbE1hcCA9IHtcbiAgSG91cmx5OiB7IHN0YXJ0T2Y6ICdob3VyJywgYW1vdW50OiAnaG91cnMnIH0sXG4gIERhaWx5OiB7IHN0YXJ0T2Y6ICdkYXknLCBhbW91bnQ6ICdkYXlzJyB9LFxuICBXZWVrbHk6IHsgc3RhcnRPZjogJ2lzb1dlZWsnLCBhbW91bnQ6ICd3ZWVrcycgfSxcbiAgTW9udGhseTogeyBzdGFydE9mOiAnbW9udGgnLCBhbW91bnQ6ICdtb250aHMnIH0sXG4gIFllYXJseTogeyBzdGFydE9mOiAneWVhcicsIGFtb3VudDogJ3llYXJzJyB9LFxufTtcblxuZXhwb3J0IGNsYXNzIEluZGV4UGF0dGVybiB7XG4gIHByaXZhdGUgZGF0ZUxvY2FsZSA9ICdlbic7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBwYXR0ZXJuOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBpbnRlcnZhbD86IGtleW9mIHR5cGVvZiBpbnRlcnZhbE1hcFxuICApIHt9XG5cbiAgZ2V0SW5kZXhGb3JUb2RheSgpIHtcbiAgICBpZiAodGhpcy5pbnRlcnZhbCkge1xuICAgICAgcmV0dXJuIHRvVXRjKCkubG9jYWxlKHRoaXMuZGF0ZUxvY2FsZSkuZm9ybWF0KHRoaXMucGF0dGVybik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnBhdHRlcm47XG4gICAgfVxuICB9XG5cbiAgZ2V0SW5kZXhMaXN0KGZyb20/OiBEYXRlVGltZSwgdG8/OiBEYXRlVGltZSkge1xuICAgIC8vIFdoZW4gbm8gYGZyb21gIG9yIGB0b2AgaXMgcHJvdmlkZWQsIHdlIHJlcXVlc3QgZGF0YSBmcm9tIDcgc3Vic2VxdWVudC9wcmV2aW91cyBpbmRpY2VzXG4gICAgLy8gZm9yIHRoZSBwcm92aWRlZCBpbmRleCBwYXR0ZXJuLlxuICAgIC8vIFRoaXMgaXMgdXNlZnVsIHdoZW4gcmVxdWVzdGluZyBsb2cgY29udGV4dCB3aGVyZSB0aGUgb25seSB0aW1lIGRhdGEgd2UgaGF2ZSBpcyB0aGUgbG9nXG4gICAgLy8gdGltZXN0YW1wLlxuICAgIC8vIFRPRE86IFJlbW92ZSB3aGVuIGVuYWJsZUJhY2tlbmRNaWdyYXRpb24gdG9nZ2xlIGlzIHJlbW92ZWRcbiAgICBjb25zdCBpbmRleE9mZnNldCA9IDc7XG4gICAgaWYgKCF0aGlzLmludGVydmFsKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXR0ZXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGludGVydmFsSW5mbyA9IGludGVydmFsTWFwW3RoaXMuaW50ZXJ2YWxdO1xuICAgIGNvbnN0IHN0YXJ0ID0gZGF0ZVRpbWUoZnJvbSB8fCBkYXRlVGltZSh0bykuYWRkKC1pbmRleE9mZnNldCwgaW50ZXJ2YWxJbmZvLmFtb3VudCkpXG4gICAgICAudXRjKClcbiAgICAgIC5zdGFydE9mKGludGVydmFsSW5mby5zdGFydE9mKTtcbiAgICBjb25zdCBlbmRFcG9jaCA9IGRhdGVUaW1lKHRvIHx8IGRhdGVUaW1lKGZyb20pLmFkZChpbmRleE9mZnNldCwgaW50ZXJ2YWxJbmZvLmFtb3VudCkpXG4gICAgICAudXRjKClcbiAgICAgIC5zdGFydE9mKGludGVydmFsSW5mby5zdGFydE9mKVxuICAgICAgLnZhbHVlT2YoKTtcbiAgICBjb25zdCBpbmRleExpc3QgPSBbXTtcblxuICAgIHdoaWxlIChzdGFydC52YWx1ZU9mKCkgPD0gZW5kRXBvY2gpIHtcbiAgICAgIGluZGV4TGlzdC5wdXNoKHN0YXJ0LmxvY2FsZSh0aGlzLmRhdGVMb2NhbGUpLmZvcm1hdCh0aGlzLnBhdHRlcm4pKTtcbiAgICAgIHN0YXJ0LmFkZCgxLCBpbnRlcnZhbEluZm8uYW1vdW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXhMaXN0O1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/IndexPattern.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/LanguageProvider.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ElasticsearchLanguageProvider)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/datasource.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/query.ts\");\n\n\nclass ElasticsearchLanguageProvider extends _grafana_data__WEBPACK_IMPORTED_MODULE_0__.LanguageProvider {\n  constructor(datasource, initialValues) {\n    super();\n    this.datasource = datasource;\n    Object.assign(this, initialValues);\n  }\n  /**\n   * Queries are transformed to an ES Logs query since it's the behaviour most users expect.\n   **/\n  importFromAbstractQuery(abstractQuery) {\n    return {\n      metrics: [\n        {\n          id: \"1\",\n          type: \"logs\"\n        }\n      ],\n      query: this.getElasticsearchQuery(abstractQuery.labelMatchers),\n      refId: abstractQuery.refId\n    };\n  }\n  getElasticsearchQuery(labels) {\n    return labels.map((label) => {\n      switch (label.operator) {\n        case _grafana_data__WEBPACK_IMPORTED_MODULE_1__.AbstractLabelOperator.Equal: {\n          return label.name + ':\"' + label.value + '\"';\n        }\n        case _grafana_data__WEBPACK_IMPORTED_MODULE_1__.AbstractLabelOperator.NotEqual: {\n          return \"-\" + label.name + ':\"' + label.value + '\"';\n        }\n        case _grafana_data__WEBPACK_IMPORTED_MODULE_1__.AbstractLabelOperator.EqualRegEx: {\n          return label.name + \":/\" + label.value + \"/\";\n        }\n        case _grafana_data__WEBPACK_IMPORTED_MODULE_1__.AbstractLabelOperator.NotEqualRegEx: {\n          return \"-\" + label.name + \":/\" + label.value + \"/\";\n        }\n      }\n    }).join(\" AND \");\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL0xhbmd1YWdlUHJvdmlkZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2RjtBQUs5RSxNQUFNLHNDQUFzQywyREFBZ0IsQ0FBQztBQUFBLEVBSzFFLFlBQVksWUFBK0IsZUFBcUI7QUFDOUQsVUFBTTtBQUNOLFNBQUssYUFBYTtBQUVsQixXQUFPLE9BQU8sTUFBTSxhQUFhO0FBQUEsRUFDbkM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLHdCQUF3QixlQUFrRDtBQUN4RSxXQUFPO0FBQUEsTUFDTCxTQUFTO0FBQUEsUUFDUDtBQUFBLFVBQ0UsSUFBSTtBQUFBLFVBQ0osTUFBTTtBQUFBLFFBQ1I7QUFBQSxNQUNGO0FBQUEsTUFDQSxPQUFPLEtBQUssc0JBQXNCLGNBQWMsYUFBYTtBQUFBLE1BQzdELE9BQU8sY0FBYztBQUFBLElBQ3ZCO0FBQUEsRUFDRjtBQUFBLEVBRUEsc0JBQXNCLFFBQXdDO0FBQzVELFdBQU8sT0FDSixJQUFJLENBQUMsVUFBVTtBQUNkLGNBQVEsTUFBTSxVQUFVO0FBQUEsUUFDdEIsS0FBSyxnRUFBcUIsQ0FBQyxPQUFPO0FBQ2hDLGlCQUFPLE1BQU0sT0FBTyxPQUFPLE1BQU0sUUFBUTtBQUFBLFFBQzNDO0FBQUEsUUFDQSxLQUFLLGdFQUFxQixDQUFDLFVBQVU7QUFDbkMsaUJBQU8sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLFFBQVE7QUFBQSxRQUNqRDtBQUFBLFFBQ0EsS0FBSyxnRUFBcUIsQ0FBQyxZQUFZO0FBQ3JDLGlCQUFPLE1BQU0sT0FBTyxPQUFPLE1BQU0sUUFBUTtBQUFBLFFBQzNDO0FBQUEsUUFDQSxLQUFLLGdFQUFxQixDQUFDLGVBQWU7QUFDeEMsaUJBQU8sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLFFBQVE7QUFBQSxRQUNqRDtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUMsRUFDQSxLQUFLLE9BQU87QUFBQSxFQUNqQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvTGFuZ3VhZ2VQcm92aWRlci50cz80MGFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFic3RyYWN0TGFiZWxPcGVyYXRvciwgQWJzdHJhY3RMYWJlbE1hdGNoZXIsIExhbmd1YWdlUHJvdmlkZXIsIEFic3RyYWN0UXVlcnkgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxuaW1wb3J0IHsgRWxhc3RpY0RhdGFzb3VyY2UgfSBmcm9tICcuL2RhdGFzb3VyY2UnO1xuaW1wb3J0IHsgRWxhc3RpY3NlYXJjaFF1ZXJ5IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVsYXN0aWNzZWFyY2hMYW5ndWFnZVByb3ZpZGVyIGV4dGVuZHMgTGFuZ3VhZ2VQcm92aWRlciB7XG4gIGRlY2xhcmUgcmVxdWVzdDogKHVybDogc3RyaW5nLCBwYXJhbXM/OiBhbnkpID0+IFByb21pc2U8YW55PjtcbiAgZGVjbGFyZSBzdGFydDogKCkgPT4gUHJvbWlzZTxhbnlbXT47XG4gIGRhdGFzb3VyY2U6IEVsYXN0aWNEYXRhc291cmNlO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGFzb3VyY2U6IEVsYXN0aWNEYXRhc291cmNlLCBpbml0aWFsVmFsdWVzPzogYW55KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmRhdGFzb3VyY2UgPSBkYXRhc291cmNlO1xuXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbml0aWFsVmFsdWVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWVyaWVzIGFyZSB0cmFuc2Zvcm1lZCB0byBhbiBFUyBMb2dzIHF1ZXJ5IHNpbmNlIGl0J3MgdGhlIGJlaGF2aW91ciBtb3N0IHVzZXJzIGV4cGVjdC5cbiAgICoqL1xuICBpbXBvcnRGcm9tQWJzdHJhY3RRdWVyeShhYnN0cmFjdFF1ZXJ5OiBBYnN0cmFjdFF1ZXJ5KTogRWxhc3RpY3NlYXJjaFF1ZXJ5IHtcbiAgICByZXR1cm4ge1xuICAgICAgbWV0cmljczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgICB0eXBlOiAnbG9ncycsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgcXVlcnk6IHRoaXMuZ2V0RWxhc3RpY3NlYXJjaFF1ZXJ5KGFic3RyYWN0UXVlcnkubGFiZWxNYXRjaGVycyksXG4gICAgICByZWZJZDogYWJzdHJhY3RRdWVyeS5yZWZJZCxcbiAgICB9O1xuICB9XG5cbiAgZ2V0RWxhc3RpY3NlYXJjaFF1ZXJ5KGxhYmVsczogQWJzdHJhY3RMYWJlbE1hdGNoZXJbXSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGxhYmVsc1xuICAgICAgLm1hcCgobGFiZWwpID0+IHtcbiAgICAgICAgc3dpdGNoIChsYWJlbC5vcGVyYXRvcikge1xuICAgICAgICAgIGNhc2UgQWJzdHJhY3RMYWJlbE9wZXJhdG9yLkVxdWFsOiB7XG4gICAgICAgICAgICByZXR1cm4gbGFiZWwubmFtZSArICc6XCInICsgbGFiZWwudmFsdWUgKyAnXCInO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIEFic3RyYWN0TGFiZWxPcGVyYXRvci5Ob3RFcXVhbDoge1xuICAgICAgICAgICAgcmV0dXJuICctJyArIGxhYmVsLm5hbWUgKyAnOlwiJyArIGxhYmVsLnZhbHVlICsgJ1wiJztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBBYnN0cmFjdExhYmVsT3BlcmF0b3IuRXF1YWxSZWdFeDoge1xuICAgICAgICAgICAgcmV0dXJuIGxhYmVsLm5hbWUgKyAnOi8nICsgbGFiZWwudmFsdWUgKyAnLyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgQWJzdHJhY3RMYWJlbE9wZXJhdG9yLk5vdEVxdWFsUmVnRXg6IHtcbiAgICAgICAgICAgIHJldHVybiAnLScgKyBsYWJlbC5uYW1lICsgJzovJyArIGxhYmVsLnZhbHVlICsgJy8nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5qb2luKCcgQU5EICcpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/LanguageProvider.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/LegacyQueryRunner.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LegacyQueryRunner: () => (/* binding */ LegacyQueryRunner),\n/* harmony export */   enhanceDataFrame: () => (/* binding */ enhanceDataFrame)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/throwError.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/tap.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/logs.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/transformers/convertFieldType.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/backendSrv.ts\");\n/* harmony import */ var _ElasticResponse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/ElasticResponse.ts\");\n/* harmony import */ var _datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/datasource.ts\");\n/* harmony import */ var _queryDef__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/queryDef.ts\");\n/* harmony import */ var _tracking__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/tracking.ts\");\n\n\n\n\n\n\n\n\n\n\nclass LegacyQueryRunner {\n  constructor(datasource, templateSrv) {\n    this.datasource = datasource;\n    this.templateSrv = templateSrv;\n  }\n  request(method, url, data, headers) {\n    if (!this.datasource.isProxyAccess) {\n      const error = new Error(\n        \"Browser access mode in the Elasticsearch datasource is no longer available. Switch to server access mode.\"\n      );\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.throwError)(() => error);\n    }\n    const options = {\n      url: this.datasource.url + \"/\" + url,\n      method,\n      data,\n      headers\n    };\n    if (method === \"POST\") {\n      options.headers = options.headers ?? {};\n      options.headers[\"Content-Type\"] = \"application/x-ndjson\";\n    }\n    if (this.datasource.basicAuth || this.datasource.withCredentials) {\n      options.withCredentials = true;\n    }\n    if (this.datasource.basicAuth) {\n      options.headers = {\n        Authorization: this.datasource.basicAuth\n      };\n    }\n    return (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_6__.getBackendSrv)().fetch(options).pipe(\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)((results) => {\n        results.data.$$config = results.config;\n        return results.data;\n      }),\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.catchError)((err) => {\n        if (err.data) {\n          const message = err.data.error?.reason ?? err.data.message ?? \"Unknown error\";\n          return (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.throwError)({\n            message,\n            error: err.data.error\n          });\n        }\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.throwError)(err);\n      })\n    );\n  }\n  async logContextQuery(row, options) {\n    const sortField = row.dataFrame.fields.find((f) => f.name === \"sort\");\n    const searchAfter = sortField?.values[row.rowIndex] || [row.timeEpochMs];\n    const sort = options?.direction === _grafana_data__WEBPACK_IMPORTED_MODULE_9__.LogRowContextQueryDirection.Forward ? \"asc\" : \"desc\";\n    const header = options?.direction === _grafana_data__WEBPACK_IMPORTED_MODULE_9__.LogRowContextQueryDirection.Forward ? this.datasource.getQueryHeader(\"query_then_fetch\", (0,_grafana_data__WEBPACK_IMPORTED_MODULE_10__.dateTime)(row.timeEpochMs)) : this.datasource.getQueryHeader(\"query_then_fetch\", void 0, (0,_grafana_data__WEBPACK_IMPORTED_MODULE_10__.dateTime)(row.timeEpochMs));\n    const limit = options?.limit ?? 10;\n    const esQuery = JSON.stringify({\n      size: limit,\n      query: {\n        bool: {\n          filter: [\n            {\n              range: {\n                [this.datasource.timeField]: {\n                  [options?.direction === _grafana_data__WEBPACK_IMPORTED_MODULE_9__.LogRowContextQueryDirection.Forward ? \"gte\" : \"lte\"]: row.timeEpochMs,\n                  format: \"epoch_millis\"\n                }\n              }\n            }\n          ]\n        }\n      },\n      sort: [{ [this.datasource.timeField]: sort }, { _doc: sort }],\n      search_after: searchAfter\n    });\n    const payload = [header, esQuery].join(\"\\n\") + \"\\n\";\n    const url = this.datasource.getMultiSearchUrl();\n    const response = await (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.lastValueFrom)(this.request(\"POST\", url, payload));\n    const targets = [{ refId: `${row.dataFrame.refId}`, metrics: [{ type: \"logs\", id: \"1\" }] }];\n    const elasticResponse = new _ElasticResponse__WEBPACK_IMPORTED_MODULE_1__.ElasticResponse(targets, transformHitsBasedOnDirection(response, sort));\n    const logResponse = elasticResponse.getLogs(this.datasource.logMessageField, this.datasource.logLevelField);\n    const dataFrame = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.first)(logResponse.data);\n    if (!dataFrame) {\n      return { data: [] };\n    }\n    const timestampField = dataFrame.fields.find((f) => f.name === this.datasource.timeField);\n    const lineField = dataFrame.fields.find((f) => f.name === this.datasource.logMessageField);\n    const otherFields = dataFrame.fields.filter((f) => f !== timestampField && f !== lineField);\n    if (timestampField && lineField) {\n      return {\n        data: [\n          {\n            ...dataFrame,\n            fields: [(0,_grafana_data__WEBPACK_IMPORTED_MODULE_12__.ensureTimeField)(timestampField), lineField, ...otherFields]\n          }\n        ]\n      };\n    }\n    return logResponse;\n  }\n  query(request) {\n    let payload = \"\";\n    const targets = this.datasource.interpolateVariablesInQueries((0,lodash__WEBPACK_IMPORTED_MODULE_0__.cloneDeep)(request.targets), request.scopedVars);\n    const sentTargets = [];\n    let targetsContainsLogsQuery = targets.some((target) => (0,_queryDef__WEBPACK_IMPORTED_MODULE_3__.hasMetricOfType)(target, \"logs\"));\n    const logLimits = [];\n    for (const target of targets) {\n      if (target.hide) {\n        continue;\n      }\n      let queryObj;\n      if ((0,_queryDef__WEBPACK_IMPORTED_MODULE_3__.hasMetricOfType)(target, \"logs\")) {\n        target.bucketAggs = [(0,_queryDef__WEBPACK_IMPORTED_MODULE_3__.defaultBucketAgg)()];\n        const log = target.metrics?.find((m) => m.type === \"logs\");\n        const limit = log.settings?.limit ? parseInt(log.settings?.limit, 10) : 500;\n        logLimits.push(limit);\n        target.metrics = [];\n        queryObj = this.datasource.queryBuilder.getLogsQuery(target, limit);\n      } else {\n        logLimits.push();\n        if (target.alias) {\n          target.alias = this.datasource.interpolateLuceneQuery(target.alias, request.scopedVars);\n        }\n        queryObj = this.datasource.queryBuilder.build(target);\n      }\n      const esQuery = JSON.stringify(queryObj);\n      const searchType = \"query_then_fetch\";\n      const header = this.datasource.getQueryHeader(searchType, request.range.from, request.range.to);\n      payload += header + \"\\n\";\n      payload += esQuery + \"\\n\";\n      sentTargets.push(target);\n    }\n    if (sentTargets.length === 0) {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.of)({ data: [] });\n    }\n    payload = payload.replace(/\"\\$timeFrom\"/g, request.range.from.valueOf().toString());\n    payload = payload.replace(/\"\\$timeTo\"/g, request.range.to.valueOf().toString());\n    payload = this.templateSrv.replace(payload, request.scopedVars);\n    const url = this.datasource.getMultiSearchUrl();\n    const start = /* @__PURE__ */ new Date();\n    return this.request(\"POST\", url, payload).pipe(\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)((res) => {\n        const er = new _ElasticResponse__WEBPACK_IMPORTED_MODULE_1__.ElasticResponse(sentTargets, res);\n        if (targetsContainsLogsQuery) {\n          const response = er.getLogs(this.datasource.logMessageField, this.datasource.logLevelField);\n          response.data.forEach((dataFrame, index) => {\n            enhanceDataFrame(dataFrame, this.datasource.dataLinks, logLimits[index]);\n          });\n          return response;\n        }\n        return er.getTimeSeries();\n      }),\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.tap)((response) => (0,_tracking__WEBPACK_IMPORTED_MODULE_4__.trackQuery)(response, request, start))\n    );\n  }\n}\nfunction transformHitsBasedOnDirection(response, direction) {\n  if (direction === \"desc\") {\n    return response;\n  }\n  const actualResponse = response.responses[0];\n  return {\n    ...response,\n    responses: [\n      {\n        ...actualResponse,\n        hits: {\n          ...actualResponse.hits,\n          hits: actualResponse.hits.hits.reverse()\n        }\n      }\n    ]\n  };\n}\nfunction enhanceDataFrame(dataFrame, dataLinks, limit) {\n  if (limit) {\n    dataFrame.meta = {\n      ...dataFrame.meta,\n      limit\n    };\n  }\n  (0,_datasource__WEBPACK_IMPORTED_MODULE_2__.enhanceDataFrameWithDataLinks)(dataFrame, dataLinks);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL0xlZ2FjeVF1ZXJ5UnVubmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDZTtBQUNyQjtBQVk5QjtBQUN1RDtBQUU5QjtBQUNpQztBQUNmO0FBQ3ZCO0FBR3BCLE1BQU0sa0JBQWtCO0FBQUEsRUFJN0IsWUFBWSxZQUErQixhQUEwQjtBQUNuRSxTQUFLLGFBQWE7QUFDbEIsU0FBSyxjQUFjO0FBQUEsRUFDckI7QUFBQSxFQUVBLFFBQ0UsUUFDQSxLQUNBLE1BQ0EsU0FDaUI7QUFDakIsUUFBSSxDQUFDLEtBQUssV0FBVyxlQUFlO0FBQ2xDLFlBQU0sUUFBUSxJQUFJO0FBQUEsUUFDaEI7QUFBQSxNQUNGO0FBQ0EsYUFBTyxnREFBVSxDQUFDLE1BQU0sS0FBSztBQUFBLElBQy9CO0FBRUEsVUFBTSxVQUE2QjtBQUFBLE1BQ2pDLEtBQUssS0FBSyxXQUFXLE1BQU0sTUFBTTtBQUFBLE1BQ2pDO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNGO0FBRUEsUUFBSSxXQUFXLFFBQVE7QUFDckIsY0FBUSxVQUFVLFFBQVEsV0FBVyxDQUFDO0FBQ3RDLGNBQVEsUUFBUSxjQUFjLElBQUk7QUFBQSxJQUNwQztBQUVBLFFBQUksS0FBSyxXQUFXLGFBQWEsS0FBSyxXQUFXLGlCQUFpQjtBQUNoRSxjQUFRLGtCQUFrQjtBQUFBLElBQzVCO0FBQ0EsUUFBSSxLQUFLLFdBQVcsV0FBVztBQUM3QixjQUFRLFVBQVU7QUFBQSxRQUNoQixlQUFlLEtBQUssV0FBVztBQUFBLE1BQ2pDO0FBQUEsSUFDRjtBQUVBLFdBQU8sK0RBQWEsQ0FBQyxFQUNsQixNQUFXLE9BQU8sRUFDbEI7QUFBQSxNQUNDLG1EQUFHLENBQUMsQ0FBQyxZQUFZO0FBQ2YsZ0JBQVEsS0FBSyxXQUFXLFFBQVE7QUFDaEMsZUFBTyxRQUFRO0FBQUEsTUFDakIsQ0FBQztBQUFBLE1BQ0QsMERB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QUFTLFVBQVUsQ0FBQztBQUMzQyxTQUFPO0FBQUEsSUFDTCxHQUFHO0FBQUEsSUFDSCxXQUFXO0FBQUEsTUFDVDtBQUFBLFFBQ0UsR0FBRztBQUFBLFFBQ0gsTUFBTTtBQUFBLFVBQ0osR0FBRyxlQUFlO0FBQUEsVUFDbEIsTUFBTSxlQUFlLEtBQUssS0FBSyxRQUFRO0FBQUEsUUFDekM7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFDRjtBQU1PLFNBQVMsaUJBQWlCLFdBQXNCLFdBQTZCLE9BQWdCO0FBQ2xHLE1BQUksT0FBTztBQUNULGNBQVUsT0FBTztBQUFBLE1BQ2YsR0FBRyxVQUFVO0FBQUEsTUFDYjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0EsNEVBQTZCLENBQUMsV0FBVyxTQUFTO0FBQ3BEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvTGVnYWN5UXVlcnlSdW5uZXIudHM/MmZiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmaXJzdCBhcyBfZmlyc3QsIGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBsYXN0VmFsdWVGcm9tLCBPYnNlcnZhYmxlLCBvZiwgdGhyb3dFcnJvciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgbWFwLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gIERhdGFGcmFtZSxcbiAgRGF0YVF1ZXJ5UmVxdWVzdCxcbiAgRGF0YVF1ZXJ5UmVzcG9uc2UsXG4gIGRhdGVUaW1lLFxuICBlbnN1cmVUaW1lRmllbGQsXG4gIEZpZWxkLFxuICBMb2dSb3dDb250ZXh0T3B0aW9ucyxcbiAgTG9nUm93Q29udGV4dFF1ZXJ5RGlyZWN0aW9uLFxuICBMb2dSb3dNb2RlbCxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBCYWNrZW5kU3J2UmVxdWVzdCwgZ2V0QmFja2VuZFNydiwgVGVtcGxhdGVTcnYgfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcblxuaW1wb3J0IHsgRWxhc3RpY1Jlc3BvbnNlIH0gZnJvbSAnLi9FbGFzdGljUmVzcG9uc2UnO1xuaW1wb3J0IHsgRWxhc3RpY0RhdGFzb3VyY2UsIGVuaGFuY2VEYXRhRnJhbWVXaXRoRGF0YUxpbmtzIH0gZnJvbSAnLi9kYXRhc291cmNlJztcbmltcG9ydCB7IGRlZmF1bHRCdWNrZXRBZ2csIGhhc01ldHJpY09mVHlwZSB9IGZyb20gJy4vcXVlcnlEZWYnO1xuaW1wb3J0IHsgdHJhY2tRdWVyeSB9IGZyb20gJy4vdHJhY2tpbmcnO1xuaW1wb3J0IHsgRGF0YUxpbmtDb25maWcsIEVsYXN0aWNzZWFyY2hRdWVyeSwgTG9ncyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgTGVnYWN5UXVlcnlSdW5uZXIge1xuICBkYXRhc291cmNlOiBFbGFzdGljRGF0YXNvdXJjZTtcbiAgdGVtcGxhdGVTcnY6IFRlbXBsYXRlU3J2O1xuXG4gIGNvbnN0cnVjdG9yKGRhdGFzb3VyY2U6IEVsYXN0aWNEYXRhc291cmNlLCB0ZW1wbGF0ZVNydjogVGVtcGxhdGVTcnYpIHtcbiAgICB0aGlzLmRhdGFzb3VyY2UgPSBkYXRhc291cmNlO1xuICAgIHRoaXMudGVtcGxhdGVTcnYgPSB0ZW1wbGF0ZVNydjtcbiAgfVxuXG4gIHJlcXVlc3QoXG4gICAgbWV0aG9kOiBzdHJpbmcsXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgZGF0YT86IEJhY2tlbmRTcnZSZXF1ZXN0WydkYXRhJ10sXG4gICAgaGVhZGVycz86IEJhY2tlbmRTcnZSZXF1ZXN0WydoZWFkZXJzJ11cbiAgKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICBpZiAoIXRoaXMuZGF0YXNvdXJjZS5pc1Byb3h5QWNjZXNzKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgJ0Jyb3dzZXIgYWNjZXNzIG1vZGUgaW4gdGhlIEVsYXN0aWNzZWFyY2ggZGF0YXNvdXJjZSBpcyBubyBsb25nZXIgYXZhaWxhYmxlLiBTd2l0Y2ggdG8gc2VydmVyIGFjY2VzcyBtb2RlLidcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhyb3dFcnJvcigoKSA9PiBlcnJvcik7XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9uczogQmFja2VuZFNydlJlcXVlc3QgPSB7XG4gICAgICB1cmw6IHRoaXMuZGF0YXNvdXJjZS51cmwgKyAnLycgKyB1cmwsXG4gICAgICBtZXRob2QsXG4gICAgICBkYXRhLFxuICAgICAgaGVhZGVycyxcbiAgICB9O1xuXG4gICAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgPz8ge307XG4gICAgICBvcHRpb25zLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL3gtbmRqc29uJztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhc291cmNlLmJhc2ljQXV0aCB8fCB0aGlzLmRhdGFzb3VyY2Uud2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICBvcHRpb25zLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGFzb3VyY2UuYmFzaWNBdXRoKSB7XG4gICAgICBvcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IHRoaXMuZGF0YXNvdXJjZS5iYXNpY0F1dGgsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBnZXRCYWNrZW5kU3J2KClcbiAgICAgIC5mZXRjaDxhbnk+KG9wdGlvbnMpXG4gICAgICAucGlwZShcbiAgICAgICAgbWFwKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgcmVzdWx0cy5kYXRhLiQkY29uZmlnID0gcmVzdWx0cy5jb25maWc7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHMuZGF0YTtcbiAgICAgICAgfSksXG4gICAgICAgIGNhdGNoRXJyb3IoKGVycikgPT4ge1xuICAgICAgICAgIGlmIChlcnIuZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVyci5kYXRhLmVycm9yPy5yZWFzb24gPz8gZXJyLmRhdGEubWVzc2FnZSA/PyAnVW5rbm93biBlcnJvcic7XG5cbiAgICAgICAgICAgIHJldHVybiB0aHJvd0Vycm9yKHtcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZXJyb3I6IGVyci5kYXRhLmVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gIH1cblxuICBhc3luYyBsb2dDb250ZXh0UXVlcnkocm93OiBMb2dSb3dNb2RlbCwgb3B0aW9ucz86IExvZ1Jvd0NvbnRleHRPcHRpb25zKTogUHJvbWlzZTx7IGRhdGE6IERhdGFGcmFtZVtdIH0+IHtcbiAgICBjb25zdCBzb3J0RmllbGQgPSByb3cuZGF0YUZyYW1lLmZpZWxkcy5maW5kKChmKSA9PiBmLm5hbWUgPT09ICdzb3J0Jyk7XG4gICAgY29uc3Qgc2VhcmNoQWZ0ZXIgPSBzb3J0RmllbGQ/LnZhbHVlc1tyb3cucm93SW5kZXhdIHx8IFtyb3cudGltZUVwb2NoTXNdO1xuICAgIGNvbnN0IHNvcnQgPSBvcHRpb25zPy5kaXJlY3Rpb24gPT09IExvZ1Jvd0NvbnRleHRRdWVyeURpcmVjdGlvbi5Gb3J3YXJkID8gJ2FzYycgOiAnZGVzYyc7XG5cbiAgICBjb25zdCBoZWFkZXIgPVxuICAgICAgb3B0aW9ucz8uZGlyZWN0aW9uID09PSBMb2dSb3dDb250ZXh0UXVlcnlEaXJlY3Rpb24uRm9yd2FyZFxuICAgICAgICA/IHRoaXMuZGF0YXNvdXJjZS5nZXRRdWVyeUhlYWRlcigncXVlcnlfdGhlbl9mZXRjaCcsIGRhdGVUaW1lKHJvdy50aW1lRXBvY2hNcykpXG4gICAgICAgIDogdGhpcy5kYXRhc291cmNlLmdldFF1ZXJ5SGVhZGVyKCdxdWVyeV90aGVuX2ZldGNoJywgdW5kZWZpbmVkLCBkYXRlVGltZShyb3cudGltZUVwb2NoTXMpKTtcblxuICAgIGNvbnN0IGxpbWl0ID0gb3B0aW9ucz8ubGltaXQgPz8gMTA7XG4gICAgY29uc3QgZXNRdWVyeSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHNpemU6IGxpbWl0LFxuICAgICAgcXVlcnk6IHtcbiAgICAgICAgYm9vbDoge1xuICAgICAgICAgIGZpbHRlcjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgICAgIFt0aGlzLmRhdGFzb3VyY2UudGltZUZpZWxkXToge1xuICAgICAgICAgICAgICAgICAgW29wdGlvbnM/LmRpcmVjdGlvbiA9PT0gTG9nUm93Q29udGV4dFF1ZXJ5RGlyZWN0aW9uLkZvcndhcmQgPyAnZ3RlJyA6ICdsdGUnXTogcm93LnRpbWVFcG9jaE1zLFxuICAgICAgICAgICAgICAgICAgZm9ybWF0OiAnZXBvY2hfbWlsbGlzJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHNvcnQ6IFt7IFt0aGlzLmRhdGFzb3VyY2UudGltZUZpZWxkXTogc29ydCB9LCB7IF9kb2M6IHNvcnQgfV0sXG4gICAgICBzZWFyY2hfYWZ0ZXI6IHNlYXJjaEFmdGVyLFxuICAgIH0pO1xuICAgIGNvbnN0IHBheWxvYWQgPSBbaGVhZGVyLCBlc1F1ZXJ5XS5qb2luKCdcXG4nKSArICdcXG4nO1xuICAgIGNvbnN0IHVybCA9IHRoaXMuZGF0YXNvdXJjZS5nZXRNdWx0aVNlYXJjaFVybCgpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbGFzdFZhbHVlRnJvbSh0aGlzLnJlcXVlc3QoJ1BPU1QnLCB1cmwsIHBheWxvYWQpKTtcbiAgICBjb25zdCB0YXJnZXRzOiBFbGFzdGljc2VhcmNoUXVlcnlbXSA9IFt7IHJlZklkOiBgJHtyb3cuZGF0YUZyYW1lLnJlZklkfWAsIG1ldHJpY3M6IFt7IHR5cGU6ICdsb2dzJywgaWQ6ICcxJyB9XSB9XTtcbiAgICBjb25zdCBlbGFzdGljUmVzcG9uc2UgPSBuZXcgRWxhc3RpY1Jlc3BvbnNlKHRhcmdldHMsIHRyYW5zZm9ybUhpdHNCYXNlZE9uRGlyZWN0aW9uKHJlc3BvbnNlLCBzb3J0KSk7XG4gICAgY29uc3QgbG9nUmVzcG9uc2UgPSBlbGFzdGljUmVzcG9uc2UuZ2V0TG9ncyh0aGlzLmRhdGFzb3VyY2UubG9nTWVzc2FnZUZpZWxkLCB0aGlzLmRhdGFzb3VyY2UubG9nTGV2ZWxGaWVsZCk7XG4gICAgY29uc3QgZGF0YUZyYW1lID0gX2ZpcnN0KGxvZ1Jlc3BvbnNlLmRhdGEpO1xuICAgIGlmICghZGF0YUZyYW1lKSB7XG4gICAgICByZXR1cm4geyBkYXRhOiBbXSB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgTG9nUm93Q29udGV4dCByZXF1aXJlcyB0aGVyZSBpcyBhIGZpZWxkIGluIHRoZSBkYXRhRnJhbWUuZmllbGRzXG4gICAgICogbmFtZWQgYHRzYCBmb3IgdGltZXN0YW1wIGFuZCBgbGluZWAgZm9yIHRoZSBhY3R1YWwgbG9nIGxpbmUgdG8gZGlzcGxheS5cbiAgICAgKiBVbmZvcnR1bmF0bHkgdGhlc2UgZmllbGRzIGFyZSBoYXJkY29kZWQgYW5kIGFyZSByZXF1aXJlZCBmb3IgdGhlIGxpbmVzIHRvXG4gICAgICogYmUgcHJvcGVybHkgZGlzcGxheWVkLiBUaGlzIGNvZGUganVzdCBjb3BpZXMgdGhlIGZpZWxkcyBiYXNlZCBvbiB0aGlzLnRpbWVGaWVsZFxuICAgICAqIGFuZCB0aGlzLmxvZ01lc3NhZ2VGaWVsZCBhbmQgcmVjcmVhdGVzIHRoZSBkYXRhRnJhbWUgc28gaXQgd29ya3MuXG4gICAgICovXG4gICAgY29uc3QgdGltZXN0YW1wRmllbGQgPSBkYXRhRnJhbWUuZmllbGRzLmZpbmQoKGY6IEZpZWxkKSA9PiBmLm5hbWUgPT09IHRoaXMuZGF0YXNvdXJjZS50aW1lRmllbGQpO1xuICAgIGNvbnN0IGxpbmVGaWVsZCA9IGRhdGFGcmFtZS5maWVsZHMuZmluZCgoZjogRmllbGQpID0+IGYubmFtZSA9PT0gdGhpcy5kYXRhc291cmNlLmxvZ01lc3NhZ2VGaWVsZCk7XG4gICAgY29uc3Qgb3RoZXJGaWVsZHMgPSBkYXRhRnJhbWUuZmllbGRzLmZpbHRlcigoZjogRmllbGQpID0+IGYgIT09IHRpbWVzdGFtcEZpZWxkICYmIGYgIT09IGxpbmVGaWVsZCk7XG4gICAgaWYgKHRpbWVzdGFtcEZpZWxkICYmIGxpbmVGaWVsZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRhdGFGcmFtZSxcbiAgICAgICAgICAgIGZpZWxkczogW2Vuc3VyZVRpbWVGaWVsZCh0aW1lc3RhbXBGaWVsZCksIGxpbmVGaWVsZCwgLi4ub3RoZXJGaWVsZHNdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbG9nUmVzcG9uc2U7XG4gIH1cblxuICBxdWVyeShyZXF1ZXN0OiBEYXRhUXVlcnlSZXF1ZXN0PEVsYXN0aWNzZWFyY2hRdWVyeT4pOiBPYnNlcnZhYmxlPERhdGFRdWVyeVJlc3BvbnNlPiB7XG4gICAgbGV0IHBheWxvYWQgPSAnJztcbiAgICBjb25zdCB0YXJnZXRzID0gdGhpcy5kYXRhc291cmNlLmludGVycG9sYXRlVmFyaWFibGVzSW5RdWVyaWVzKGNsb25lRGVlcChyZXF1ZXN0LnRhcmdldHMpLCByZXF1ZXN0LnNjb3BlZFZhcnMpO1xuICAgIGNvbnN0IHNlbnRUYXJnZXRzOiBFbGFzdGljc2VhcmNoUXVlcnlbXSA9IFtdO1xuICAgIGxldCB0YXJnZXRzQ29udGFpbnNMb2dzUXVlcnkgPSB0YXJnZXRzLnNvbWUoKHRhcmdldCkgPT4gaGFzTWV0cmljT2ZUeXBlKHRhcmdldCwgJ2xvZ3MnKSk7XG5cbiAgICBjb25zdCBsb2dMaW1pdHM6IEFycmF5PG51bWJlciB8IHVuZGVmaW5lZD4gPSBbXTtcblxuICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIHRhcmdldHMpIHtcbiAgICAgIGlmICh0YXJnZXQuaGlkZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHF1ZXJ5T2JqO1xuICAgICAgaWYgKGhhc01ldHJpY09mVHlwZSh0YXJnZXQsICdsb2dzJykpIHtcbiAgICAgICAgLy8gRklYTUU6IEFsbCB0aGlzIGxvZ2ljIGhlcmUgc2hvdWxkIGJlIGluIHRoZSBxdWVyeSBidWlsZGVyLlxuICAgICAgICAvLyBXaGVuIG1vdmluZyB0byB0aGUgQkUtb25seSBpbXBsZW1lbnRhdGlvbiB3ZSBzaG91bGQgcmVtb3ZlIHRoaXMgYW5kIGxldCB0aGUgQkVcbiAgICAgICAgLy8gSGFuZGxlIHRoaXMuXG4gICAgICAgIC8vIFRPRE86IGRlZmF1bHRCdWNrZXRBZ2cgY3JlYXRlcyBhIGRldGVfaGlzdG9ncmFtIGFnZ3JlZ2F0aW9uIHdpdGhvdXQgYSBmaWVsZCwgc28gaXQgZmFsbGJhY2tzIHRvXG4gICAgICAgIC8vIHRoZSBjb25maWd1cmVkIHRpbWVGaWVsZC4gd2Ugc2hvdWxkIGFsbG93IHBlb3BsZSB0byB1c2UgYSBkaWZmZXJlbnQgdGltZSBmaWVsZCBoZXJlLlxuICAgICAgICB0YXJnZXQuYnVja2V0QWdncyA9IFtkZWZhdWx0QnVja2V0QWdnKCldO1xuXG4gICAgICAgIGNvbnN0IGxvZyA9IHRhcmdldC5tZXRyaWNzPy5maW5kKChtKSA9PiBtLnR5cGUgPT09ICdsb2dzJykgYXMgTG9ncztcbiAgICAgICAgY29uc3QgbGltaXQgPSBsb2cuc2V0dGluZ3M/LmxpbWl0ID8gcGFyc2VJbnQobG9nLnNldHRpbmdzPy5saW1pdCwgMTApIDogNTAwO1xuICAgICAgICBsb2dMaW1pdHMucHVzaChsaW1pdCk7XG5cbiAgICAgICAgdGFyZ2V0Lm1ldHJpY3MgPSBbXTtcbiAgICAgICAgLy8gU2V0dGluZyB0aGlzIGZvciBtZXRyaWNzIHF1ZXJpZXMgdGhhdCBhcmUgdHlwZWQgYXMgbG9nc1xuICAgICAgICBxdWVyeU9iaiA9IHRoaXMuZGF0YXNvdXJjZS5xdWVyeUJ1aWxkZXIuZ2V0TG9nc1F1ZXJ5KHRhcmdldCwgbGltaXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nTGltaXRzLnB1c2goKTtcbiAgICAgICAgaWYgKHRhcmdldC5hbGlhcykge1xuICAgICAgICAgIHRhcmdldC5hbGlhcyA9IHRoaXMuZGF0YXNvdXJjZS5pbnRlcnBvbGF0ZUx1Y2VuZVF1ZXJ5KHRhcmdldC5hbGlhcywgcmVxdWVzdC5zY29wZWRWYXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHF1ZXJ5T2JqID0gdGhpcy5kYXRhc291cmNlLnF1ZXJ5QnVpbGRlci5idWlsZCh0YXJnZXQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlc1F1ZXJ5ID0gSlNPTi5zdHJpbmdpZnkocXVlcnlPYmopO1xuXG4gICAgICBjb25zdCBzZWFyY2hUeXBlID0gJ3F1ZXJ5X3RoZW5fZmV0Y2gnO1xuICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5kYXRhc291cmNlLmdldFF1ZXJ5SGVhZGVyKHNlYXJjaFR5cGUsIHJlcXVlc3QucmFuZ2UuZnJvbSwgcmVxdWVzdC5yYW5nZS50byk7XG4gICAgICBwYXlsb2FkICs9IGhlYWRlciArICdcXG4nO1xuXG4gICAgICBwYXlsb2FkICs9IGVzUXVlcnkgKyAnXFxuJztcblxuICAgICAgc2VudFRhcmdldHMucHVzaCh0YXJnZXQpO1xuICAgIH1cblxuICAgIGlmIChzZW50VGFyZ2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBvZih7IGRhdGE6IFtdIH0pO1xuICAgIH1cblxuICAgIC8vIFdlIHJlcGxhY2UgdGhlIHJhbmdlIGhlcmUgZm9yIGFjdHVhbCB2YWx1ZXMuIFdlIG5lZWQgdG8gcmVwbGFjZSBpdCB0b2dldGhlciB3aXRoIGVuY2xvc2luZyBcIlwiIHNvIHRoYXQgd2UgcmVwbGFjZVxuICAgIC8vIGl0IGFzIGFuIGludGVnZXIgbm90IGFzIHN0cmluZyB3aXRoIGRpZ2l0cy4gVGhpcyBpcyBiZWNhdXNlIGVsYXN0aWMgd2lsbCBjb252ZXJ0IHRoZSBzdHJpbmcgb25seSBpZiB0aGUgdGltZVxuICAgIC8vIGZpZWxkIGlzIHNwZWNpZmllZCBhcyB0eXBlIGRhdGUgKHdoaWNoIHByb2JhYmx5IHNob3VsZCkgYnV0IGNhbiBhbHNvIGJlIHNwZWNpZmllZCBhcyBpbnRlZ2VyIChtaWxsaXNlY29uZCBlcG9jaClcbiAgICAvLyBhbmQgdGhlbiBzZW5kaW5nIHN0cmluZyB3aWxsIGVycm9yIG91dC5cbiAgICBwYXlsb2FkID0gcGF5bG9hZC5yZXBsYWNlKC9cIlxcJHRpbWVGcm9tXCIvZywgcmVxdWVzdC5yYW5nZS5mcm9tLnZhbHVlT2YoKS50b1N0cmluZygpKTtcbiAgICBwYXlsb2FkID0gcGF5bG9hZC5yZXBsYWNlKC9cIlxcJHRpbWVUb1wiL2csIHJlcXVlc3QucmFuZ2UudG8udmFsdWVPZigpLnRvU3RyaW5nKCkpO1xuICAgIHBheWxvYWQgPSB0aGlzLnRlbXBsYXRlU3J2LnJlcGxhY2UocGF5bG9hZCwgcmVxdWVzdC5zY29wZWRWYXJzKTtcblxuICAgIGNvbnN0IHVybCA9IHRoaXMuZGF0YXNvdXJjZS5nZXRNdWx0aVNlYXJjaFVybCgpO1xuXG4gICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpO1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ1BPU1QnLCB1cmwsIHBheWxvYWQpLnBpcGUoXG4gICAgICBtYXAoKHJlcykgPT4ge1xuICAgICAgICBjb25zdCBlciA9IG5ldyBFbGFzdGljUmVzcG9uc2Uoc2VudFRhcmdldHMsIHJlcyk7XG5cbiAgICAgICAgLy8gVE9ETzogVGhpcyBuZWVkcyB0byBiZSByZXZpc2l0ZWQsIGl0IHNlZW1zIHdyb25nIHRvIHByb2Nlc3MgQUxMIHRoZSBzZW50IHF1ZXJpZXMgYXMgbG9ncyBpZiBvbmx5IG9uZSBvZiB0aGVtIHdhcyBhIGxvZyBxdWVyeVxuICAgICAgICBpZiAodGFyZ2V0c0NvbnRhaW5zTG9nc1F1ZXJ5KSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBlci5nZXRMb2dzKHRoaXMuZGF0YXNvdXJjZS5sb2dNZXNzYWdlRmllbGQsIHRoaXMuZGF0YXNvdXJjZS5sb2dMZXZlbEZpZWxkKTtcblxuICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaCgoZGF0YUZyYW1lLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgZW5oYW5jZURhdGFGcmFtZShkYXRhRnJhbWUsIHRoaXMuZGF0YXNvdXJjZS5kYXRhTGlua3MsIGxvZ0xpbWl0c1tpbmRleF0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlci5nZXRUaW1lU2VyaWVzKCk7XG4gICAgICB9KSxcbiAgICAgIHRhcCgocmVzcG9uc2UpID0+IHRyYWNrUXVlcnkocmVzcG9uc2UsIHJlcXVlc3QsIHN0YXJ0KSlcbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybUhpdHNCYXNlZE9uRGlyZWN0aW9uKHJlc3BvbnNlOiBhbnksIGRpcmVjdGlvbjogJ2FzYycgfCAnZGVzYycpIHtcbiAgaWYgKGRpcmVjdGlvbiA9PT0gJ2Rlc2MnKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG4gIGNvbnN0IGFjdHVhbFJlc3BvbnNlID0gcmVzcG9uc2UucmVzcG9uc2VzWzBdO1xuICByZXR1cm4ge1xuICAgIC4uLnJlc3BvbnNlLFxuICAgIHJlc3BvbnNlczogW1xuICAgICAge1xuICAgICAgICAuLi5hY3R1YWxSZXNwb25zZSxcbiAgICAgICAgaGl0czoge1xuICAgICAgICAgIC4uLmFjdHVhbFJlc3BvbnNlLmhpdHMsXG4gICAgICAgICAgaGl0czogYWN0dWFsUmVzcG9uc2UuaGl0cy5oaXRzLnJldmVyc2UoKSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfTtcbn1cblxuLyoqXG4gKiBNb2RpZmllcyBkYXRhRnJhbWUgYW5kIGFkZHMgZGF0YUxpbmtzIGZyb20gdGhlIGNvbmZpZy5cbiAqIEV4cG9ydGVkIGZvciB0ZXN0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuaGFuY2VEYXRhRnJhbWUoZGF0YUZyYW1lOiBEYXRhRnJhbWUsIGRhdGFMaW5rczogRGF0YUxpbmtDb25maWdbXSwgbGltaXQ/OiBudW1iZXIpIHtcbiAgaWYgKGxpbWl0KSB7XG4gICAgZGF0YUZyYW1lLm1ldGEgPSB7XG4gICAgICAuLi5kYXRhRnJhbWUubWV0YSxcbiAgICAgIGxpbWl0LFxuICAgIH07XG4gIH1cbiAgZW5oYW5jZURhdGFGcmFtZVdpdGhEYXRhTGlua3MoZGF0YUZyYW1lLCBkYXRhTGlua3MpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/LegacyQueryRunner.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/QueryBuilder.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElasticQueryBuilder: () => (/* binding */ ElasticQueryBuilder)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/timezones.ts\");\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _queryDef__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/queryDef.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n\n\n\n\n\nclass ElasticQueryBuilder {\n  constructor(options) {\n    this.timeField = options.timeField;\n  }\n  getRangeFilter() {\n    const filter = {};\n    filter[this.timeField] = {\n      gte: \"$timeFrom\",\n      lte: \"$timeTo\",\n      format: \"epoch_millis\"\n    };\n    return filter;\n  }\n  buildTermsAgg(aggDef, queryNode, target) {\n    queryNode.terms = { field: aggDef.field };\n    if (!aggDef.settings) {\n      return queryNode;\n    }\n    const size = aggDef.settings?.size ? parseInt(aggDef.settings.size, 10) : 500;\n    queryNode.terms.size = size === 0 ? 500 : size;\n    if (aggDef.settings.orderBy !== void 0) {\n      queryNode.terms.order = {};\n      if (aggDef.settings.orderBy === \"_term\") {\n        queryNode.terms.order[\"_key\"] = aggDef.settings.order;\n      } else {\n        queryNode.terms.order[aggDef.settings.orderBy] = aggDef.settings.order;\n      }\n      const metricId = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.convertOrderByToMetricId)(aggDef.settings.orderBy);\n      if (metricId) {\n        for (let metric of target.metrics || []) {\n          if (metric.id === metricId) {\n            if (metric.type === \"count\") {\n              queryNode.terms.order = { _count: aggDef.settings.order };\n            } else if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__.isMetricAggregationWithField)(metric)) {\n              queryNode.aggs = {};\n              queryNode.aggs[metric.id] = {\n                [metric.type]: { field: metric.field }\n              };\n            }\n            break;\n          }\n        }\n      }\n    }\n    if (aggDef.settings.min_doc_count !== void 0) {\n      queryNode.terms.min_doc_count = parseInt(aggDef.settings.min_doc_count, 10);\n      if (isNaN(queryNode.terms.min_doc_count)) {\n        queryNode.terms.min_doc_count = aggDef.settings.min_doc_count;\n      }\n    }\n    if (aggDef.settings.missing) {\n      queryNode.terms.missing = aggDef.settings.missing;\n    }\n    return queryNode;\n  }\n  getDateHistogramAgg(aggDef) {\n    const esAgg = {};\n    const settings = aggDef.settings || {};\n    esAgg.field = aggDef.field || this.timeField;\n    esAgg.min_doc_count = settings.min_doc_count || 0;\n    esAgg.extended_bounds = { min: \"$timeFrom\", max: \"$timeTo\" };\n    esAgg.format = \"epoch_millis\";\n    if (settings.timeZone && settings.timeZone !== _grafana_data__WEBPACK_IMPORTED_MODULE_3__.InternalTimeZones.utc) {\n      esAgg.time_zone = settings.timeZone;\n    }\n    if (settings.offset !== \"\") {\n      esAgg.offset = settings.offset;\n    }\n    const interval = settings.interval === \"auto\" ? \"${__interval_ms}ms\" : settings.interval;\n    esAgg.fixed_interval = interval;\n    return esAgg;\n  }\n  getHistogramAgg(aggDef) {\n    const esAgg = {};\n    const settings = aggDef.settings || {};\n    esAgg.interval = settings.interval;\n    esAgg.field = aggDef.field;\n    esAgg.min_doc_count = settings.min_doc_count || 0;\n    return esAgg;\n  }\n  getFiltersAgg(aggDef) {\n    const filterObj = {};\n    for (let { query, label } of aggDef.settings?.filters || []) {\n      filterObj[label || query] = {\n        query_string: {\n          query,\n          analyze_wildcard: true\n        }\n      };\n    }\n    return filterObj;\n  }\n  documentQuery(query, size) {\n    query.size = size;\n    query.sort = [\n      {\n        [this.timeField]: { order: \"desc\", unmapped_type: \"boolean\" }\n      },\n      {\n        _doc: { order: \"desc\" }\n      }\n    ];\n    query.script_fields = {};\n    return query;\n  }\n  build(target) {\n    target.metrics = target.metrics || [(0,_queryDef__WEBPACK_IMPORTED_MODULE_1__.defaultMetricAgg)()];\n    target.bucketAggs = target.bucketAggs || [(0,_queryDef__WEBPACK_IMPORTED_MODULE_1__.defaultBucketAgg)()];\n    target.timeField = this.timeField;\n    let metric;\n    let i, j, pv, nestedAggs;\n    const query = {\n      size: 0,\n      query: {\n        bool: {\n          filter: [{ range: this.getRangeFilter() }]\n        }\n      }\n    };\n    if (target.query && target.query !== \"\") {\n      query.query.bool.filter = [\n        ...query.query.bool.filter,\n        {\n          query_string: {\n            analyze_wildcard: true,\n            query: target.query\n          }\n        }\n      ];\n    }\n    if (target.bucketAggs.length === 0) {\n      metric = target.metrics[0];\n      if (!metric || !(metric.type === \"raw_document\" || metric.type === \"raw_data\")) {\n        throw { message: \"Invalid query\" };\n      }\n    }\n    if (target.metrics?.[0]?.type === \"raw_document\" || target.metrics?.[0]?.type === \"raw_data\") {\n      metric = target.metrics[0];\n      const size = metric.settings?.size ? parseInt(metric.settings.size, 10) : 500;\n      return this.documentQuery(query, size || 500);\n    }\n    nestedAggs = query;\n    for (i = 0; i < target.bucketAggs.length; i++) {\n      const aggDef = target.bucketAggs[i];\n      const esAgg = {};\n      switch (aggDef.type) {\n        case \"date_histogram\": {\n          esAgg[\"date_histogram\"] = this.getDateHistogramAgg(aggDef);\n          break;\n        }\n        case \"histogram\": {\n          esAgg[\"histogram\"] = this.getHistogramAgg(aggDef);\n          break;\n        }\n        case \"filters\": {\n          esAgg[\"filters\"] = { filters: this.getFiltersAgg(aggDef) };\n          break;\n        }\n        case \"terms\": {\n          this.buildTermsAgg(aggDef, esAgg, target);\n          break;\n        }\n        case \"geohash_grid\": {\n          esAgg[\"geohash_grid\"] = {\n            field: aggDef.field,\n            precision: aggDef.settings?.precision\n          };\n          break;\n        }\n        case \"nested\": {\n          esAgg[\"nested\"] = { path: aggDef.field };\n          break;\n        }\n      }\n      nestedAggs.aggs = nestedAggs.aggs || {};\n      nestedAggs.aggs[aggDef.id] = esAgg;\n      nestedAggs = esAgg;\n    }\n    nestedAggs.aggs = {};\n    for (i = 0; i < target.metrics.length; i++) {\n      metric = target.metrics[i];\n      if (metric.type === \"count\") {\n        continue;\n      }\n      const aggField = {};\n      let metricAgg = {};\n      if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__.isPipelineAggregation)(metric)) {\n        if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__.isPipelineAggregationWithMultipleBucketPaths)(metric)) {\n          if (metric.pipelineVariables) {\n            metricAgg = {\n              buckets_path: {}\n            };\n            for (j = 0; j < metric.pipelineVariables.length; j++) {\n              pv = metric.pipelineVariables[j];\n              if (pv.name && pv.pipelineAgg && /^\\d*$/.test(pv.pipelineAgg)) {\n                const appliedAgg = (0,_queryDef__WEBPACK_IMPORTED_MODULE_1__.findMetricById)(target.metrics, pv.pipelineAgg);\n                if (appliedAgg) {\n                  if (appliedAgg.type === \"count\") {\n                    metricAgg.buckets_path[pv.name] = \"_count\";\n                  } else {\n                    metricAgg.buckets_path[pv.name] = pv.pipelineAgg;\n                  }\n                }\n              }\n            }\n          } else {\n            continue;\n          }\n        } else {\n          if (metric.field && /^\\d*$/.test(metric.field)) {\n            const appliedAgg = (0,_queryDef__WEBPACK_IMPORTED_MODULE_1__.findMetricById)(target.metrics, metric.field);\n            if (appliedAgg) {\n              if (appliedAgg.type === \"count\") {\n                metricAgg = { buckets_path: \"_count\" };\n              } else {\n                metricAgg = { buckets_path: metric.field };\n              }\n            }\n          } else {\n            continue;\n          }\n        }\n      } else if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__.isMetricAggregationWithField)(metric)) {\n        metricAgg = { field: metric.field };\n      }\n      if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__.isMetricAggregationWithSettings)(metric)) {\n        Object.entries(metric.settings || {}).filter(([_, v]) => v !== null).forEach(([k, v]) => {\n          metricAgg[k] = k === \"script\" ? this.buildScript((0,_utils__WEBPACK_IMPORTED_MODULE_2__.getScriptValue)(metric)) : v;\n        });\n        switch (metric.type) {\n          case \"moving_avg\":\n            metricAgg = {\n              ...metricAgg,\n              ...metricAgg?.window !== void 0 && { window: this.toNumber(metricAgg.window) },\n              ...metricAgg?.predict !== void 0 && { predict: this.toNumber(metricAgg.predict) },\n              ...(0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__.isMovingAverageWithModelSettings)(metric) && {\n                settings: {\n                  ...metricAgg.settings,\n                  ...Object.fromEntries(\n                    Object.entries(metricAgg.settings || {}).filter(([settingName]) => [\"alpha\", \"beta\", \"gamma\", \"period\"].includes(settingName)).filter(([_, stringValue]) => stringValue !== void 0).map(([_, stringValue]) => [_, this.toNumber(stringValue)])\n                  )\n                }\n              }\n            };\n            break;\n          case \"serial_diff\":\n            metricAgg = {\n              ...metricAgg,\n              ...metricAgg.lag !== void 0 && {\n                lag: this.toNumber(metricAgg.lag)\n              }\n            };\n            break;\n          case \"top_metrics\":\n            metricAgg = {\n              metrics: metric.settings?.metrics?.map((field) => ({ field })),\n              size: 1\n            };\n            if (metric.settings?.orderBy) {\n              metricAgg.sort = [{ [metric.settings?.orderBy]: metric.settings?.order }];\n            }\n            break;\n        }\n      }\n      aggField[metric.type] = metricAgg;\n      nestedAggs.aggs[metric.id] = aggField;\n    }\n    return query;\n  }\n  buildScript(script) {\n    return script;\n  }\n  toNumber(stringValue) {\n    const parsedValue = parseFloat(`${stringValue}`);\n    if (isNaN(parsedValue)) {\n      return stringValue;\n    }\n    return parsedValue;\n  }\n  getTermsQuery(queryDef) {\n    const query = {\n      size: 0,\n      query: {\n        bool: {\n          filter: [{ range: this.getRangeFilter() }]\n        }\n      }\n    };\n    if (queryDef.query) {\n      query.query.bool.filter.push({\n        query_string: {\n          analyze_wildcard: true,\n          query: queryDef.query\n        }\n      });\n    }\n    let size = 500;\n    if (queryDef.size) {\n      size = queryDef.size;\n    }\n    query.aggs = {\n      \"1\": {\n        terms: {\n          field: queryDef.field,\n          size,\n          order: {}\n        }\n      }\n    };\n    const { orderBy = \"key\", order = orderBy === \"doc_count\" ? \"desc\" : \"asc\" } = queryDef;\n    if ([\"asc\", \"desc\"].indexOf(order) < 0) {\n      throw { message: `Invalid query sort order ${order}` };\n    }\n    switch (orderBy) {\n      case \"key\":\n      case \"term\":\n        const keyname = \"_key\";\n        query.aggs[\"1\"].terms.order[keyname] = order;\n        break;\n      case \"doc_count\":\n        query.aggs[\"1\"].terms.order[\"_count\"] = order;\n        break;\n      default:\n        throw { message: `Invalid query sort type ${orderBy}` };\n    }\n    return query;\n  }\n  getLogsQuery(target, limit) {\n    let query = {\n      size: 0,\n      query: {\n        bool: {\n          filter: [{ range: this.getRangeFilter() }]\n        }\n      }\n    };\n    if (target.query) {\n      query.query.bool.filter.push({\n        query_string: {\n          analyze_wildcard: true,\n          query: target.query\n        }\n      });\n    }\n    query = this.documentQuery(query, limit);\n    return {\n      ...query,\n      aggs: this.build(target).aggs,\n      highlight: {\n        fields: {\n          \"*\": {}\n        },\n        pre_tags: [_queryDef__WEBPACK_IMPORTED_MODULE_1__.highlightTags.pre],\n        post_tags: [_queryDef__WEBPACK_IMPORTED_MODULE_1__.highlightTags.post],\n        fragment_size: 2147483647\n      }\n    };\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL1F1ZXJ5QnVpbGRlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0M7QUFRM0I7QUFDMkU7QUFXekI7QUFFbEQsTUFBTSxvQkFBb0I7QUFBQSxFQUcvQixZQUFZLFNBQWdDO0FBQzFDLFNBQUssWUFBWSxRQUFRO0FBQUEsRUFDM0I7QUFBQSxFQUVBLGlCQUFpQjtBQUNmLFVBQU0sU0FBYyxDQUFDO0FBQ3JCLFdBQU8sS0FBSyxTQUFTLElBQUk7QUFBQSxNQUN2QixLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsTUFDTCxRQUFRO0FBQUEsSUFDVjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxjQUFjLFFBQWUsV0FBd0MsUUFBNEI7QUFDL0YsY0FBVSxRQUFRLEVBQUUsT0FBTyxPQUFPLE1BQU07QUFFeEMsUUFBSSxDQUFDLE9BQU8sVUFBVTtBQUNwQixhQUFPO0FBQUEsSUFDVDtBQUdBLFVBQU0sT0FBTyxPQUFPLFVBQVUsT0FBTyxTQUFTLE9BQU8sU0FBUyxNQUFNLEVBQUUsSUFBSTtBQUMxRSxjQUFVLE1BQU0sT0FBTyxTQUFTLElBQUksTUFBTTtBQUUxQyxRQUFJLE9BQU8sU0FBUyxZQUFZLFFBQVE7QUFDdEMsZ0JBQVUsTUFBTSxRQUFRLENBQUM7QUFDekIsVUFBSSxPQUFPLFNBQVMsWUFBWSxTQUFTO0FBQ3ZDLGtCQUFVLE1BQU0sTUFBTSxNQUFNLElBQUksT0FBTyxTQUFTO0FBQUEsTUFDbEQsT0FBTztBQUNMLGtCQUFVLE1BQU0sTUFBTSxPQUFPLFNBQVMsT0FBTyxJQUFJLE9BQU8sU0FBUztBQUFBLE1BQ25FO0FBR0EsWUFBTSxXQUFXLGdFQUF3QixDQUFDLE9BQU8sU0FBUyxPQUFPO0FBQ2pFLFVBQUksVUFBVTtBQUNaLGlCQUFTLFVBQVUsT0FBTyxXQUFXLENBQUMsR0FBRztBQUN2QyxjQUFJLE9BQU8sT0FBTyxVQUFVO0FBQzFCLGdCQUFJLE9BQU8sU0FB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c291cmNlL2VsYXN0aWNzZWFyY2gvUXVlcnlCdWlsZGVyLnRzPzJlZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW50ZXJuYWxUaW1lWm9uZXMgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxuaW1wb3J0IHtcbiAgaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhGaWVsZCxcbiAgaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhTZXR0aW5ncyxcbiAgaXNNb3ZpbmdBdmVyYWdlV2l0aE1vZGVsU2V0dGluZ3MsXG4gIGlzUGlwZWxpbmVBZ2dyZWdhdGlvbixcbiAgaXNQaXBlbGluZUFnZ3JlZ2F0aW9uV2l0aE11bHRpcGxlQnVja2V0UGF0aHMsXG59IGZyb20gJy4vY29tcG9uZW50cy9RdWVyeUVkaXRvci9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IvYWdncmVnYXRpb25zJztcbmltcG9ydCB7IGRlZmF1bHRCdWNrZXRBZ2csIGRlZmF1bHRNZXRyaWNBZ2csIGZpbmRNZXRyaWNCeUlkLCBoaWdobGlnaHRUYWdzIH0gZnJvbSAnLi9xdWVyeURlZic7XG5pbXBvcnQge1xuICBFbGFzdGljc2VhcmNoUXVlcnksXG4gIFRlcm1zUXVlcnksXG4gIEZpbHRlcnMsXG4gIFRlcm1zLFxuICBNZXRyaWNBZ2dyZWdhdGlvbixcbiAgTWV0cmljQWdncmVnYXRpb25XaXRoSW5saW5lU2NyaXB0LFxuICBIaXN0b2dyYW0sXG4gIERhdGVIaXN0b2dyYW0sXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgY29udmVydE9yZGVyQnlUb01ldHJpY0lkLCBnZXRTY3JpcHRWYWx1ZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgRWxhc3RpY1F1ZXJ5QnVpbGRlciB7XG4gIHRpbWVGaWVsZDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHsgdGltZUZpZWxkOiBzdHJpbmcgfSkge1xuICAgIHRoaXMudGltZUZpZWxkID0gb3B0aW9ucy50aW1lRmllbGQ7XG4gIH1cblxuICBnZXRSYW5nZUZpbHRlcigpIHtcbiAgICBjb25zdCBmaWx0ZXI6IGFueSA9IHt9O1xuICAgIGZpbHRlclt0aGlzLnRpbWVGaWVsZF0gPSB7XG4gICAgICBndGU6ICckdGltZUZyb20nLFxuICAgICAgbHRlOiAnJHRpbWVUbycsXG4gICAgICBmb3JtYXQ6ICdlcG9jaF9taWxsaXMnLFxuICAgIH07XG5cbiAgICByZXR1cm4gZmlsdGVyO1xuICB9XG5cbiAgYnVpbGRUZXJtc0FnZyhhZ2dEZWY6IFRlcm1zLCBxdWVyeU5vZGU6IHsgdGVybXM/OiBhbnk7IGFnZ3M/OiBhbnkgfSwgdGFyZ2V0OiBFbGFzdGljc2VhcmNoUXVlcnkpIHtcbiAgICBxdWVyeU5vZGUudGVybXMgPSB7IGZpZWxkOiBhZ2dEZWYuZmllbGQgfTtcblxuICAgIGlmICghYWdnRGVmLnNldHRpbmdzKSB7XG4gICAgICByZXR1cm4gcXVlcnlOb2RlO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFRoaXMgZGVmYXVsdCBzaG91bGQgYmUgc29tZXdoZXJlIGVsc2UgdG9nZXRoZXIgd2l0aCB0aGUgb25lIHVzZWQgaW4gdGhlIFVJXG4gICAgY29uc3Qgc2l6ZSA9IGFnZ0RlZi5zZXR0aW5ncz8uc2l6ZSA/IHBhcnNlSW50KGFnZ0RlZi5zZXR0aW5ncy5zaXplLCAxMCkgOiA1MDA7XG4gICAgcXVlcnlOb2RlLnRlcm1zLnNpemUgPSBzaXplID09PSAwID8gNTAwIDogc2l6ZTtcblxuICAgIGlmIChhZ2dEZWYuc2V0dGluZ3Mub3JkZXJCeSAhPT0gdm9pZCAwKSB7XG4gICAgICBxdWVyeU5vZGUudGVybXMub3JkZXIgPSB7fTtcbiAgICAgIGlmIChhZ2dEZWYuc2V0dGluZ3Mub3JkZXJCeSA9PT0gJ190ZXJtJykge1xuICAgICAgICBxdWVyeU5vZGUudGVybXMub3JkZXJbJ19rZXknXSA9IGFnZ0RlZi5zZXR0aW5ncy5vcmRlcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXJ5Tm9kZS50ZXJtcy5vcmRlclthZ2dEZWYuc2V0dGluZ3Mub3JkZXJCeV0gPSBhZ2dEZWYuc2V0dGluZ3Mub3JkZXI7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIG1ldHJpYyByZWYsIGxvb2sgaXQgdXAgYW5kIGFkZCBpdCB0byB0aGlzIGFnZyBsZXZlbFxuICAgICAgY29uc3QgbWV0cmljSWQgPSBjb252ZXJ0T3JkZXJCeVRvTWV0cmljSWQoYWdnRGVmLnNldHRpbmdzLm9yZGVyQnkpO1xuICAgICAgaWYgKG1ldHJpY0lkKSB7XG4gICAgICAgIGZvciAobGV0IG1ldHJpYyBvZiB0YXJnZXQubWV0cmljcyB8fCBbXSkge1xuICAgICAgICAgIGlmIChtZXRyaWMuaWQgPT09IG1ldHJpY0lkKSB7XG4gICAgICAgICAgICBpZiAobWV0cmljLnR5cGUgPT09ICdjb3VudCcpIHtcbiAgICAgICAgICAgICAgcXVlcnlOb2RlLnRlcm1zLm9yZGVyID0geyBfY291bnQ6IGFnZ0RlZi5zZXR0aW5ncy5vcmRlciB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aEZpZWxkKG1ldHJpYykpIHtcbiAgICAgICAgICAgICAgcXVlcnlOb2RlLmFnZ3MgPSB7fTtcbiAgICAgICAgICAgICAgcXVlcnlOb2RlLmFnZ3NbbWV0cmljLmlkXSA9IHtcbiAgICAgICAgICAgICAgICBbbWV0cmljLnR5cGVdOiB7IGZpZWxkOiBtZXRyaWMuZmllbGQgfSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhZ2dEZWYuc2V0dGluZ3MubWluX2RvY19jb3VudCAhPT0gdm9pZCAwKSB7XG4gICAgICBxdWVyeU5vZGUudGVybXMubWluX2RvY19jb3VudCA9IHBhcnNlSW50KGFnZ0RlZi5zZXR0aW5ncy5taW5fZG9jX2NvdW50LCAxMCk7XG5cbiAgICAgIGlmIChpc05hTihxdWVyeU5vZGUudGVybXMubWluX2RvY19jb3VudCkpIHtcbiAgICAgICAgcXVlcnlOb2RlLnRlcm1zLm1pbl9kb2NfY291bnQgPSBhZ2dEZWYuc2V0dGluZ3MubWluX2RvY19jb3VudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWdnRGVmLnNldHRpbmdzLm1pc3NpbmcpIHtcbiAgICAgIHF1ZXJ5Tm9kZS50ZXJtcy5taXNzaW5nID0gYWdnRGVmLnNldHRpbmdzLm1pc3Npbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXJ5Tm9kZTtcbiAgfVxuXG4gIGdldERhdGVIaXN0b2dyYW1BZ2coYWdnRGVmOiBEYXRlSGlzdG9ncmFtKSB7XG4gICAgY29uc3QgZXNBZ2c6IGFueSA9IHt9O1xuICAgIGNvbnN0IHNldHRpbmdzID0gYWdnRGVmLnNldHRpbmdzIHx8IHt9O1xuXG4gICAgZXNBZ2cuZmllbGQgPSBhZ2dEZWYuZmllbGQgfHwgdGhpcy50aW1lRmllbGQ7XG4gICAgZXNBZ2cubWluX2RvY19jb3VudCA9IHNldHRpbmdzLm1pbl9kb2NfY291bnQgfHwgMDtcbiAgICBlc0FnZy5leHRlbmRlZF9ib3VuZHMgPSB7IG1pbjogJyR0aW1lRnJvbScsIG1heDogJyR0aW1lVG8nIH07XG4gICAgZXNBZ2cuZm9ybWF0ID0gJ2Vwb2NoX21pbGxpcyc7XG4gICAgaWYgKHNldHRpbmdzLnRpbWVab25lICYmIHNldHRpbmdzLnRpbWVab25lICE9PSBJbnRlcm5hbFRpbWVab25lcy51dGMpIHtcbiAgICAgIGVzQWdnLnRpbWVfem9uZSA9IHNldHRpbmdzLnRpbWVab25lO1xuICAgIH1cblxuICAgIGlmIChzZXR0aW5ncy5vZmZzZXQgIT09ICcnKSB7XG4gICAgICBlc0FnZy5vZmZzZXQgPSBzZXR0aW5ncy5vZmZzZXQ7XG4gICAgfVxuXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXR0aW5ncy5pbnRlcnZhbCA9PT0gJ2F1dG8nID8gJyR7X19pbnRlcnZhbF9tc31tcycgOiBzZXR0aW5ncy5pbnRlcnZhbDtcblxuICAgIGVzQWdnLmZpeGVkX2ludGVydmFsID0gaW50ZXJ2YWw7XG5cbiAgICByZXR1cm4gZXNBZ2c7XG4gIH1cblxuICBnZXRIaXN0b2dyYW1BZ2coYWdnRGVmOiBIaXN0b2dyYW0pIHtcbiAgICBjb25zdCBlc0FnZzogYW55ID0ge307XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBhZ2dEZWYuc2V0dGluZ3MgfHwge307XG4gICAgZXNBZ2cuaW50ZXJ2YWwgPSBzZXR0aW5ncy5pbnRlcnZhbDtcbiAgICBlc0FnZy5maWVsZCA9IGFnZ0RlZi5maWVsZDtcbiAgICBlc0FnZy5taW5fZG9jX2NvdW50ID0gc2V0dGluZ3MubWluX2RvY19jb3VudCB8fCAwO1xuXG4gICAgcmV0dXJuIGVzQWdnO1xuICB9XG5cbiAgZ2V0RmlsdGVyc0FnZyhhZ2dEZWY6IEZpbHRlcnMpIHtcbiAgICBjb25zdCBmaWx0ZXJPYmo6IFJlY29yZDxzdHJpbmcsIHsgcXVlcnlfc3RyaW5nOiB7IHF1ZXJ5OiBzdHJpbmc7IGFuYWx5emVfd2lsZGNhcmQ6IGJvb2xlYW4gfSB9PiA9IHt9O1xuXG4gICAgZm9yIChsZXQgeyBxdWVyeSwgbGFiZWwgfSBvZiBhZ2dEZWYuc2V0dGluZ3M/LmZpbHRlcnMgfHwgW10pIHtcbiAgICAgIGZpbHRlck9ialtsYWJlbCB8fCBxdWVyeV0gPSB7XG4gICAgICAgIHF1ZXJ5X3N0cmluZzoge1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBhbmFseXplX3dpbGRjYXJkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsdGVyT2JqO1xuICB9XG5cbiAgZG9jdW1lbnRRdWVyeShxdWVyeTogYW55LCBzaXplOiBudW1iZXIpIHtcbiAgICBxdWVyeS5zaXplID0gc2l6ZTtcbiAgICBxdWVyeS5zb3J0ID0gW1xuICAgICAge1xuICAgICAgICBbdGhpcy50aW1lRmllbGRdOiB7IG9yZGVyOiAnZGVzYycsIHVubWFwcGVkX3R5cGU6ICdib29sZWFuJyB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgX2RvYzogeyBvcmRlcjogJ2Rlc2MnIH0sXG4gICAgICB9LFxuICAgIF07XG5cbiAgICBxdWVyeS5zY3JpcHRfZmllbGRzID0ge307XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgYnVpbGQodGFyZ2V0OiBFbGFzdGljc2VhcmNoUXVlcnkpIHtcbiAgICAvLyBtYWtlIHN1cmUgcXVlcnkgaGFzIGRlZmF1bHRzO1xuICAgIHRhcmdldC5tZXRyaWNzID0gdGFyZ2V0Lm1ldHJpY3MgfHwgW2RlZmF1bHRNZXRyaWNBZ2coKV07XG4gICAgdGFyZ2V0LmJ1Y2tldEFnZ3MgPSB0YXJnZXQuYnVja2V0QWdncyB8fCBbZGVmYXVsdEJ1Y2tldEFnZygpXTtcbiAgICB0YXJnZXQudGltZUZpZWxkID0gdGhpcy50aW1lRmllbGQ7XG4gICAgbGV0IG1ldHJpYzogTWV0cmljQWdncmVnYXRpb247XG5cbiAgICBsZXQgaSwgaiwgcHYsIG5lc3RlZEFnZ3M7XG4gICAgY29uc3QgcXVlcnk6IGFueSA9IHtcbiAgICAgIHNpemU6IDAsXG4gICAgICBxdWVyeToge1xuICAgICAgICBib29sOiB7XG4gICAgICAgICAgZmlsdGVyOiBbeyByYW5nZTogdGhpcy5nZXRSYW5nZUZpbHRlcigpIH1dLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgaWYgKHRhcmdldC5xdWVyeSAmJiB0YXJnZXQucXVlcnkgIT09ICcnKSB7XG4gICAgICBxdWVyeS5xdWVyeS5ib29sLmZpbHRlciA9IFtcbiAgICAgICAgLi4ucXVlcnkucXVlcnkuYm9vbC5maWx0ZXIsXG4gICAgICAgIHtcbiAgICAgICAgICBxdWVyeV9zdHJpbmc6IHtcbiAgICAgICAgICAgIGFuYWx5emVfd2lsZGNhcmQ6IHRydWUsXG4gICAgICAgICAgICBxdWVyeTogdGFyZ2V0LnF1ZXJ5LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdO1xuICAgIH1cblxuICAgIC8vIElmIHRhcmdldCBkb2Vzbid0IGhhdmUgYnVja2V0QWdncyBhbmQgdHlwZSBpcyBub3QgcmF3X2RvY3VtZW50LCBpdCBpcyBpbnZhbGlkIHF1ZXJ5LlxuICAgIGlmICh0YXJnZXQuYnVja2V0QWdncy5sZW5ndGggPT09IDApIHtcbiAgICAgIG1ldHJpYyA9IHRhcmdldC5tZXRyaWNzWzBdO1xuXG4gICAgICBpZiAoIW1ldHJpYyB8fCAhKG1ldHJpYy50eXBlID09PSAncmF3X2RvY3VtZW50JyB8fCBtZXRyaWMudHlwZSA9PT0gJ3Jhd19kYXRhJykpIHtcbiAgICAgICAgdGhyb3cgeyBtZXNzYWdlOiAnSW52YWxpZCBxdWVyeScgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBIYW5kbGUgZG9jdW1lbnQgcXVlcnk6XG4gICAgICogQ2hlY2sgaWYgbWV0cmljIHR5cGUgaXMgcmF3X2RvY3VtZW50LiBJZiBtZXRyaWMgZG9lc24ndCBoYXZlIHNpemUgKG9yIHNpemUgaXMgMCksIHVwZGF0ZSBzaXplIHRvIDUwMC5cbiAgICAgKiBPdGhlcndpc2UgaXQgd2lsbCBub3QgYmUgYSB2YWxpZCBxdWVyeSBhbmQgZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gICAgICovXG4gICAgaWYgKHRhcmdldC5tZXRyaWNzPy5bMF0/LnR5cGUgPT09ICdyYXdfZG9jdW1lbnQnIHx8IHRhcmdldC5tZXRyaWNzPy5bMF0/LnR5cGUgPT09ICdyYXdfZGF0YScpIHtcbiAgICAgIG1ldHJpYyA9IHRhcmdldC5tZXRyaWNzWzBdO1xuXG4gICAgICAvLyBUT0RPOiBUaGlzIGRlZmF1bHQgc2hvdWxkIGJlIHNvbWV3aGVyZSBlbHNlIHRvZ2V0aGVyIHdpdGggdGhlIG9uZSB1c2VkIGluIHRoZSBVSVxuICAgICAgY29uc3Qgc2l6ZSA9IG1ldHJpYy5zZXR0aW5ncz8uc2l6ZSA/IHBhcnNlSW50KG1ldHJpYy5zZXR0aW5ncy5zaXplLCAxMCkgOiA1MDA7XG5cbiAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50UXVlcnkocXVlcnksIHNpemUgfHwgNTAwKTtcbiAgICB9XG5cbiAgICBuZXN0ZWRBZ2dzID0gcXVlcnk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFyZ2V0LmJ1Y2tldEFnZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGFnZ0RlZiA9IHRhcmdldC5idWNrZXRBZ2dzW2ldO1xuICAgICAgY29uc3QgZXNBZ2c6IGFueSA9IHt9O1xuXG4gICAgICBzd2l0Y2ggKGFnZ0RlZi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2RhdGVfaGlzdG9ncmFtJzoge1xuICAgICAgICAgIGVzQWdnWydkYXRlX2hpc3RvZ3JhbSddID0gdGhpcy5nZXREYXRlSGlzdG9ncmFtQWdnKGFnZ0RlZik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnaGlzdG9ncmFtJzoge1xuICAgICAgICAgIGVzQWdnWydoaXN0b2dyYW0nXSA9IHRoaXMuZ2V0SGlzdG9ncmFtQWdnKGFnZ0RlZik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnZmlsdGVycyc6IHtcbiAgICAgICAgICBlc0FnZ1snZmlsdGVycyddID0geyBmaWx0ZXJzOiB0aGlzLmdldEZpbHRlcnNBZ2coYWdnRGVmKSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3Rlcm1zJzoge1xuICAgICAgICAgIHRoaXMuYnVpbGRUZXJtc0FnZyhhZ2dEZWYsIGVzQWdnLCB0YXJnZXQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2dlb2hhc2hfZ3JpZCc6IHtcbiAgICAgICAgICBlc0FnZ1snZ2VvaGFzaF9ncmlkJ10gPSB7XG4gICAgICAgICAgICBmaWVsZDogYWdnRGVmLmZpZWxkLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiBhZ2dEZWYuc2V0dGluZ3M/LnByZWNpc2lvbixcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ25lc3RlZCc6IHtcbiAgICAgICAgICBlc0FnZ1snbmVzdGVkJ10gPSB7IHBhdGg6IGFnZ0RlZi5maWVsZCB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5lc3RlZEFnZ3MuYWdncyA9IG5lc3RlZEFnZ3MuYWdncyB8fCB7fTtcbiAgICAgIG5lc3RlZEFnZ3MuYWdnc1thZ2dEZWYuaWRdID0gZXNBZ2c7XG4gICAgICBuZXN0ZWRBZ2dzID0gZXNBZ2c7XG4gICAgfVxuXG4gICAgbmVzdGVkQWdncy5hZ2dzID0ge307XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFyZ2V0Lm1ldHJpY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIG1ldHJpYyA9IHRhcmdldC5tZXRyaWNzW2ldO1xuICAgICAgaWYgKG1ldHJpYy50eXBlID09PSAnY291bnQnKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhZ2dGaWVsZDogYW55ID0ge307XG4gICAgICBsZXQgbWV0cmljQWdnOiBhbnkgPSB7fTtcblxuICAgICAgaWYgKGlzUGlwZWxpbmVBZ2dyZWdhdGlvbihtZXRyaWMpKSB7XG4gICAgICAgIGlmIChpc1BpcGVsaW5lQWdncmVnYXRpb25XaXRoTXVsdGlwbGVCdWNrZXRQYXRocyhtZXRyaWMpKSB7XG4gICAgICAgICAgaWYgKG1ldHJpYy5waXBlbGluZVZhcmlhYmxlcykge1xuICAgICAgICAgICAgbWV0cmljQWdnID0ge1xuICAgICAgICAgICAgICBidWNrZXRzX3BhdGg6IHt9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IG1ldHJpYy5waXBlbGluZVZhcmlhYmxlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICBwdiA9IG1ldHJpYy5waXBlbGluZVZhcmlhYmxlc1tqXTtcblxuICAgICAgICAgICAgICBpZiAocHYubmFtZSAmJiBwdi5waXBlbGluZUFnZyAmJiAvXlxcZCokLy50ZXN0KHB2LnBpcGVsaW5lQWdnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwcGxpZWRBZ2cgPSBmaW5kTWV0cmljQnlJZCh0YXJnZXQubWV0cmljcywgcHYucGlwZWxpbmVBZ2cpO1xuICAgICAgICAgICAgICAgIGlmIChhcHBsaWVkQWdnKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoYXBwbGllZEFnZy50eXBlID09PSAnY291bnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldHJpY0FnZy5idWNrZXRzX3BhdGhbcHYubmFtZV0gPSAnX2NvdW50JztcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldHJpY0FnZy5idWNrZXRzX3BhdGhbcHYubmFtZV0gPSBwdi5waXBlbGluZUFnZztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChtZXRyaWMuZmllbGQgJiYgL15cXGQqJC8udGVzdChtZXRyaWMuZmllbGQpKSB7XG4gICAgICAgICAgICBjb25zdCBhcHBsaWVkQWdnID0gZmluZE1ldHJpY0J5SWQodGFyZ2V0Lm1ldHJpY3MsIG1ldHJpYy5maWVsZCk7XG4gICAgICAgICAgICBpZiAoYXBwbGllZEFnZykge1xuICAgICAgICAgICAgICBpZiAoYXBwbGllZEFnZy50eXBlID09PSAnY291bnQnKSB7XG4gICAgICAgICAgICAgICAgbWV0cmljQWdnID0geyBidWNrZXRzX3BhdGg6ICdfY291bnQnIH07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWV0cmljQWdnID0geyBidWNrZXRzX3BhdGg6IG1ldHJpYy5maWVsZCB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aEZpZWxkKG1ldHJpYykpIHtcbiAgICAgICAgbWV0cmljQWdnID0geyBmaWVsZDogbWV0cmljLmZpZWxkIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aFNldHRpbmdzKG1ldHJpYykpIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobWV0cmljLnNldHRpbmdzIHx8IHt9KVxuICAgICAgICAgIC5maWx0ZXIoKFtfLCB2XSkgPT4gdiAhPT0gbnVsbClcbiAgICAgICAgICAuZm9yRWFjaCgoW2ssIHZdKSA9PiB7XG4gICAgICAgICAgICBtZXRyaWNBZ2dba10gPVxuICAgICAgICAgICAgICBrID09PSAnc2NyaXB0JyA/IHRoaXMuYnVpbGRTY3JpcHQoZ2V0U2NyaXB0VmFsdWUobWV0cmljIGFzIE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aElubGluZVNjcmlwdCkpIDogdjtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBFbGFzdGljc2VhcmNoIGlzbid0IGdlbmVyYWxseSB0b28gcGlja3kgYWJvdXQgdGhlIGRhdGEgdHlwZXMgaW4gdGhlIHJlcXVlc3QgYm9keSxcbiAgICAgICAgLy8gaG93ZXZlciBzb21lIGZpZWxkcyBhcmUgcmVxdWlyZWQgdG8gYmUgbnVtZXJpYy5cbiAgICAgICAgLy8gVXNlcnMgbWlnaHQgaGF2ZSBhbHJlYWR5IGNyZWF0ZWQgc29tZSBvZiB0aG9zZSB3aXRoIGJlZm9yZSwgd2hlcmUgdGhlIHZhbHVlcyB3ZXJlIG51bWJlcnMuXG4gICAgICAgIHN3aXRjaCAobWV0cmljLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdtb3ZpbmdfYXZnJzpcbiAgICAgICAgICAgIG1ldHJpY0FnZyA9IHtcbiAgICAgICAgICAgICAgLi4ubWV0cmljQWdnLFxuICAgICAgICAgICAgICAuLi4obWV0cmljQWdnPy53aW5kb3cgIT09IHVuZGVmaW5lZCAmJiB7IHdpbmRvdzogdGhpcy50b051bWJlcihtZXRyaWNBZ2cud2luZG93KSB9KSxcbiAgICAgICAgICAgICAgLi4uKG1ldHJpY0FnZz8ucHJlZGljdCAhPT0gdW5kZWZpbmVkICYmIHsgcHJlZGljdDogdGhpcy50b051bWJlcihtZXRyaWNBZ2cucHJlZGljdCkgfSksXG4gICAgICAgICAgICAgIC4uLihpc01vdmluZ0F2ZXJhZ2VXaXRoTW9kZWxTZXR0aW5ncyhtZXRyaWMpICYmIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgLi4ubWV0cmljQWdnLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhtZXRyaWNBZ2cuc2V0dGluZ3MgfHwge30pXG4gICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBmb3JtYXQgcHJvcGVydGllcyB0aGF0IGFyZSByZXF1aXJlZCB0byBiZSBudW1iZXJzXG4gICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoW3NldHRpbmdOYW1lXSkgPT4gWydhbHBoYScsICdiZXRhJywgJ2dhbW1hJywgJ3BlcmlvZCddLmluY2x1ZGVzKHNldHRpbmdOYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgICAvLyBvbWl0dGluZyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChbXywgc3RyaW5nVmFsdWVdKSA9PiBzdHJpbmdWYWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKFtfLCBzdHJpbmdWYWx1ZV0pID0+IFtfLCB0aGlzLnRvTnVtYmVyKHN0cmluZ1ZhbHVlKV0pXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnc2VyaWFsX2RpZmYnOlxuICAgICAgICAgICAgbWV0cmljQWdnID0ge1xuICAgICAgICAgICAgICAuLi5tZXRyaWNBZ2csXG4gICAgICAgICAgICAgIC4uLihtZXRyaWNBZ2cubGFnICE9PSB1bmRlZmluZWQgJiYge1xuICAgICAgICAgICAgICAgIGxhZzogdGhpcy50b051bWJlcihtZXRyaWNBZ2cubGFnKSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICd0b3BfbWV0cmljcyc6XG4gICAgICAgICAgICBtZXRyaWNBZ2cgPSB7XG4gICAgICAgICAgICAgIG1ldHJpY3M6IG1ldHJpYy5zZXR0aW5ncz8ubWV0cmljcz8ubWFwKChmaWVsZCkgPT4gKHsgZmllbGQgfSkpLFxuICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKG1ldHJpYy5zZXR0aW5ncz8ub3JkZXJCeSkge1xuICAgICAgICAgICAgICBtZXRyaWNBZ2cuc29ydCA9IFt7IFttZXRyaWMuc2V0dGluZ3M/Lm9yZGVyQnldOiBtZXRyaWMuc2V0dGluZ3M/Lm9yZGVyIH1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYWdnRmllbGRbbWV0cmljLnR5cGVdID0gbWV0cmljQWdnO1xuICAgICAgbmVzdGVkQWdncy5hZ2dzW21ldHJpYy5pZF0gPSBhZ2dGaWVsZDtcbiAgICB9XG5cbiAgICByZXR1cm4gcXVlcnk7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkU2NyaXB0KHNjcmlwdDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHNjcmlwdDtcbiAgfVxuXG4gIHByaXZhdGUgdG9OdW1iZXIoc3RyaW5nVmFsdWU6IHVua25vd24pOiB1bmtub3duIHwgbnVtYmVyIHtcbiAgICBjb25zdCBwYXJzZWRWYWx1ZSA9IHBhcnNlRmxvYXQoYCR7c3RyaW5nVmFsdWV9YCk7XG4gICAgaWYgKGlzTmFOKHBhcnNlZFZhbHVlKSkge1xuICAgICAgcmV0dXJuIHN0cmluZ1ZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZWRWYWx1ZTtcbiAgfVxuXG4gIGdldFRlcm1zUXVlcnkocXVlcnlEZWY6IFRlcm1zUXVlcnkpIHtcbiAgICBjb25zdCBxdWVyeTogYW55ID0ge1xuICAgICAgc2l6ZTogMCxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIGJvb2w6IHtcbiAgICAgICAgICBmaWx0ZXI6IFt7IHJhbmdlOiB0aGlzLmdldFJhbmdlRmlsdGVyKCkgfV0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICBpZiAocXVlcnlEZWYucXVlcnkpIHtcbiAgICAgIHF1ZXJ5LnF1ZXJ5LmJvb2wuZmlsdGVyLnB1c2goe1xuICAgICAgICBxdWVyeV9zdHJpbmc6IHtcbiAgICAgICAgICBhbmFseXplX3dpbGRjYXJkOiB0cnVlLFxuICAgICAgICAgIHF1ZXJ5OiBxdWVyeURlZi5xdWVyeSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBzaXplID0gNTAwO1xuICAgIGlmIChxdWVyeURlZi5zaXplKSB7XG4gICAgICBzaXplID0gcXVlcnlEZWYuc2l6ZTtcbiAgICB9XG5cbiAgICBxdWVyeS5hZ2dzID0ge1xuICAgICAgJzEnOiB7XG4gICAgICAgIHRlcm1zOiB7XG4gICAgICAgICAgZmllbGQ6IHF1ZXJ5RGVmLmZpZWxkLFxuICAgICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgICAgb3JkZXI6IHt9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgLy8gRGVmYXVsdCBiZWhhdmlvdXIgaXMgdG8gb3JkZXIgcmVzdWx0cyBieSB7IF9rZXk6IGFzYyB9XG4gICAgLy8gcXVlcnlEZWYub3JkZXIgYWxsb3dzIHNlbGVjdGlvbiBvZiBhc2MvZGVzY1xuICAgIC8vIHF1ZXJ5RGVmLm9yZGVyQnkgYWxsb3dzIHNlbGVjdGlvbiBvZiBkb2NfY291bnQgb3JkZXJpbmcgKGRlZmF1bHRzIGRlc2MpXG5cbiAgICBjb25zdCB7IG9yZGVyQnkgPSAna2V5Jywgb3JkZXIgPSBvcmRlckJ5ID09PSAnZG9jX2NvdW50JyA/ICdkZXNjJyA6ICdhc2MnIH0gPSBxdWVyeURlZjtcblxuICAgIGlmIChbJ2FzYycsICdkZXNjJ10uaW5kZXhPZihvcmRlcikgPCAwKSB7XG4gICAgICB0aHJvdyB7IG1lc3NhZ2U6IGBJbnZhbGlkIHF1ZXJ5IHNvcnQgb3JkZXIgJHtvcmRlcn1gIH07XG4gICAgfVxuXG4gICAgc3dpdGNoIChvcmRlckJ5KSB7XG4gICAgICBjYXNlICdrZXknOlxuICAgICAgY2FzZSAndGVybSc6XG4gICAgICAgIGNvbnN0IGtleW5hbWUgPSAnX2tleSc7XG4gICAgICAgIHF1ZXJ5LmFnZ3NbJzEnXS50ZXJtcy5vcmRlcltrZXluYW1lXSA9IG9yZGVyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RvY19jb3VudCc6XG4gICAgICAgIHF1ZXJ5LmFnZ3NbJzEnXS50ZXJtcy5vcmRlclsnX2NvdW50J10gPSBvcmRlcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyB7IG1lc3NhZ2U6IGBJbnZhbGlkIHF1ZXJ5IHNvcnQgdHlwZSAke29yZGVyQnl9YCB9O1xuICAgIH1cblxuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuXG4gIGdldExvZ3NRdWVyeSh0YXJnZXQ6IEVsYXN0aWNzZWFyY2hRdWVyeSwgbGltaXQ6IG51bWJlcikge1xuICAgIGxldCBxdWVyeTogYW55ID0ge1xuICAgICAgc2l6ZTogMCxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIGJvb2w6IHtcbiAgICAgICAgICBmaWx0ZXI6IFt7IHJhbmdlOiB0aGlzLmdldFJhbmdlRmlsdGVyKCkgfV0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICBpZiAodGFyZ2V0LnF1ZXJ5KSB7XG4gICAgICBxdWVyeS5xdWVyeS5ib29sLmZpbHRlci5wdXNoKHtcbiAgICAgICAgcXVlcnlfc3RyaW5nOiB7XG4gICAgICAgICAgYW5hbHl6ZV93aWxkY2FyZDogdHJ1ZSxcbiAgICAgICAgICBxdWVyeTogdGFyZ2V0LnF1ZXJ5LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcXVlcnkgPSB0aGlzLmRvY3VtZW50UXVlcnkocXVlcnksIGxpbWl0KTtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5xdWVyeSxcbiAgICAgIGFnZ3M6IHRoaXMuYnVpbGQodGFyZ2V0KS5hZ2dzLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICcqJzoge30sXG4gICAgICAgIH0sXG4gICAgICAgIHByZV90YWdzOiBbaGlnaGxpZ2h0VGFncy5wcmVdLFxuICAgICAgICBwb3N0X3RhZ3M6IFtoaWdobGlnaHRUYWdzLnBvc3RdLFxuICAgICAgICBmcmFnbWVudF9zaXplOiAyMTQ3NDgzNjQ3LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/QueryBuilder.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/AddRemove.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AddRemove: () => (/* binding */ AddRemove)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n\n\n\n\nconst AddRemove = ({ index, onAdd, onRemove, elements }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    \"div\",\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n        display: flex;\n      `\n    },\n    index === 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { variant: \"secondary\", fill: \"text\", icon: \"plus\", onClick: onAdd, tooltip: \"Add\", \"aria-label\": \"Add\" }),\n    elements.length >= 2 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { variant: \"secondary\", fill: \"text\", icon: \"minus\", onClick: onRemove, tooltip: \"Remove\", \"aria-label\": \"Remove\" })\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvQWRkUmVtb3ZlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBb0I7QUFDRjtBQUVLO0FBYWhCLE1BQU0sWUFBWSxDQUFDLEVBQUUsT0FBTyxPQUFPLFVBQVUsU0FBUyxNQUFhO0FBQ3hFLFNBQ0U7QUFBQSxJQUFDO0FBQUE7QUFBQSxNQUNDLFdBQVcsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQSxJQUlWLFVBQVUsS0FDVCwyRUFBQywrQ0FBTSxJQUFDLFNBQVEsYUFBWSxNQUFLLFFBQU8sTUFBSyxRQUFPLFNBQVMsT0FBTyxTQUFRLE9BQU0sY0FBVyxPQUFNO0FBQUEsSUFHcEcsU0FBUyxVQUFVLEtBQ2xCLDJFQUFDLCtDQUFNLElBQUMsU0FBUSxhQUFZLE1BQUssUUFBTyxNQUFLLFNBQVEsU0FBUyxVQUFVLFNBQVEsVUFBUyxjQUFXLFVBQVM7QUFBQSxFQUVqSDtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9BZGRSZW1vdmUudHN4PzkwNzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgZWxlbWVudHM6IGFueVtdO1xuICBvbkFkZDogKCkgPT4gdm9pZDtcbiAgb25SZW1vdmU6ICgpID0+IHZvaWQ7XG59XG5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCB0byBzaG93IGFkZCAmIHJlbW92ZSBidXR0b25zIGZvciBtdXRhYmxlIGxpc3RzIG9mIHZhbHVlcy4gV2V0aGVyIHRvIHNob3cgb3Igbm90IHRoZSBhZGQgb3IgdGhlIHJlbW92ZSBidXR0b25zXG4gKiBkZXBlbmRzIG9uIHRoZSBgaW5kZXhgIGFuZCBgZWxlbWVudHNgIHByb3BzLiBUaGlzIGVuZm9yY2VzIGEgY29uc2lzdGVudCBleHBlcmllbmNlIHdoZW5ldmVyIHRoaXMgcGF0dGVybiBpcyB1c2VkLlxuICovXG5leHBvcnQgY29uc3QgQWRkUmVtb3ZlID0gKHsgaW5kZXgsIG9uQWRkLCBvblJlbW92ZSwgZWxlbWVudHMgfTogUHJvcHMpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2Nzc2BcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGB9XG4gICAgPlxuICAgICAge2luZGV4ID09PSAwICYmIChcbiAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwic2Vjb25kYXJ5XCIgZmlsbD1cInRleHRcIiBpY29uPVwicGx1c1wiIG9uQ2xpY2s9e29uQWRkfSB0b29sdGlwPVwiQWRkXCIgYXJpYS1sYWJlbD1cIkFkZFwiIC8+XG4gICAgICApfVxuXG4gICAgICB7ZWxlbWVudHMubGVuZ3RoID49IDIgJiYgKFxuICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIiBmaWxsPVwidGV4dFwiIGljb249XCJtaW51c1wiIG9uQ2xpY2s9e29uUmVtb3ZlfSB0b29sdGlwPVwiUmVtb3ZlXCIgYXJpYS1sYWJlbD1cIlJlbW92ZVwiIC8+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/AddRemove.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/MetricPicker.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetricPicker: () => (/* binding */ MetricPicker)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Segment/Segment.tsx\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n\n\n\n\n\nconst noWrap = (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n  white-space: nowrap;\n`;\nconst toOption = (metric) => ({\n  label: (0,_utils__WEBPACK_IMPORTED_MODULE_2__.describeMetric)(metric),\n  value: metric\n});\nconst toOptions = (metrics) => metrics.map(toOption);\nconst MetricPicker = ({ options, onChange, className, value }) => {\n  const selectedOption = options.find((option) => option.id === value);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_3__.Segment,\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(className, noWrap),\n      options: toOptions(options),\n      onChange,\n      placeholder: \"Select Metric\",\n      value: !!selectedOption ? toOption(selectedOption) : void 0\n    }\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvTWV0cmljUGlja2VyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdCO0FBQ047QUFHTTtBQUdPO0FBRS9CLE1BQU0sU0FBUyxpREFBRztBQUFIO0FBQUE7QUFJZixNQUFNLFdBQVcsQ0FBQyxZQUErQjtBQUFBLEVBQy9DLE9BQU8sc0RBQWMsQ0FBQyxNQUFNO0FBQUEsRUFDNUIsT0FBTztBQUNUO0FBRUEsTUFBTSxZQUFZLENBQUMsWUFBNEUsUUFBUSxJQUFJLFFBQVE7QUFTNUcsTUFBTSxlQUFlLENBQUMsRUFBRSxTQUFTLFVBQVUsV0FBVyxNQUFNLE1BQWE7QUFDOUUsUUFBTSxpQkFBaUIsUUFBUSxLQUFLLENBQUMsV0FBVyxPQUFPLE9BQU8sS0FBSztBQUVuRSxTQUNFO0FBQUEsSUFBQyxnREFBTztBQUFQO0FBQUEsTUFDQyxXQUFXLGdEQUFFLENBQUMsV0FBVyxNQUFNO0FBQUEsTUFDL0IsU0FBUyxVQUFVLE9BQU87QUFBQSxNQUMxQjtBQUFBLE1BQ0EsYUFBWTtBQUFBLE1BQ1osT0FBTyxDQUFDLENBQUMsaUJBQWlCLFNBQVMsY0FBYyxJQUFJO0FBQUE7QUFBQSxFQUN2RDtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9NZXRyaWNQaWNrZXIudHN4PzRjYTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzLCBjeCB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBTZWxlY3RhYmxlVmFsdWUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IFNlZ21lbnQgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IE1ldHJpY0FnZ3JlZ2F0aW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgZGVzY3JpYmVNZXRyaWMgfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IG5vV3JhcCA9IGNzc2BcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbmA7XG5cbmNvbnN0IHRvT3B0aW9uID0gKG1ldHJpYzogTWV0cmljQWdncmVnYXRpb24pID0+ICh7XG4gIGxhYmVsOiBkZXNjcmliZU1ldHJpYyhtZXRyaWMpLFxuICB2YWx1ZTogbWV0cmljLFxufSk7XG5cbmNvbnN0IHRvT3B0aW9ucyA9IChtZXRyaWNzOiBNZXRyaWNBZ2dyZWdhdGlvbltdKTogQXJyYXk8U2VsZWN0YWJsZVZhbHVlPE1ldHJpY0FnZ3JlZ2F0aW9uPj4gPT4gbWV0cmljcy5tYXAodG9PcHRpb24pO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBvcHRpb25zOiBNZXRyaWNBZ2dyZWdhdGlvbltdO1xuICBvbkNoYW5nZTogKGU6IFNlbGVjdGFibGVWYWx1ZTxNZXRyaWNBZ2dyZWdhdGlvbj4pID0+IHZvaWQ7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgdmFsdWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBNZXRyaWNQaWNrZXIgPSAoeyBvcHRpb25zLCBvbkNoYW5nZSwgY2xhc3NOYW1lLCB2YWx1ZSB9OiBQcm9wcykgPT4ge1xuICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IG9wdGlvbnMuZmluZCgob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IHZhbHVlKTtcblxuICByZXR1cm4gKFxuICAgIDxTZWdtZW50XG4gICAgICBjbGFzc05hbWU9e2N4KGNsYXNzTmFtZSwgbm9XcmFwKX1cbiAgICAgIG9wdGlvbnM9e3RvT3B0aW9ucyhvcHRpb25zKX1cbiAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgIHBsYWNlaG9sZGVyPVwiU2VsZWN0IE1ldHJpY1wiXG4gICAgICB2YWx1ZT17ISFzZWxlY3RlZE9wdGlvbiA/IHRvT3B0aW9uKHNlbGVjdGVkT3B0aW9uKSA6IHVuZGVmaW5lZH1cbiAgICAvPlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/MetricPicker.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/AnnotationQueryEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElasticsearchAnnotationsQueryEditor: () => (/* binding */ ElasticsearchAnnotationsQueryEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRow.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorField.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/index.tsx\");\n\n\n\n\n\nfunction ElasticsearchAnnotationsQueryEditor(props) {\n  const annotation = props.annotation;\n  const onAnnotationChange = props.onAnnotationChange;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"gf-form-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _index__WEBPACK_IMPORTED_MODULE_1__.ElasticSearchQueryField,\n    {\n      value: annotation.target?.query,\n      onChange: (query) => {\n        const currentTarget = annotation.target ?? { refId: \"annotation_query\" };\n        const newTarget = {\n          ...currentTarget,\n          query\n        };\n        onAnnotationChange({\n          ...annotation,\n          target: newTarget\n        });\n      }\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"gf-form-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h6\", null, \"Field mappings\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_2__.EditorRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_3__.EditorField, { label: \"Time\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n    {\n      type: \"text\",\n      placeholder: \"@timestamp\",\n      value: annotation.timeField,\n      onChange: (e) => {\n        onAnnotationChange({\n          ...annotation,\n          timeField: e.currentTarget.value\n        });\n      }\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_3__.EditorField, { label: \"Time End\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n    {\n      type: \"text\",\n      value: annotation.timeEndField,\n      onChange: (e) => {\n        onAnnotationChange({\n          ...annotation,\n          timeEndField: e.currentTarget.value\n        });\n      }\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_3__.EditorField, { label: \"Text\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n    {\n      type: \"text\",\n      value: annotation.textField,\n      onChange: (e) => {\n        onAnnotationChange({\n          ...annotation,\n          textField: e.currentTarget.value\n        });\n      }\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_3__.EditorField, { label: \"Tags\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n    {\n      type: \"text\",\n      placeholder: \"tags\",\n      value: annotation.tagsField,\n      onChange: (e) => {\n        onAnnotationChange({\n          ...annotation,\n          tagsField: e.currentTarget.value\n        });\n      }\n    }\n  )))));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQW5ub3RhdGlvblF1ZXJ5RWRpdG9yLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFrQjtBQUdxQjtBQUNqQjtBQUkyQztBQU8xRCxTQUFTLG9DQUFvQyxPQUFjO0FBQ2hFLFFBQU0sYUFBYSxNQUFNO0FBQ3pCLFFBQU0scUJBQXFCLE1BQU07QUFFakMsU0FDRSwwSUFDRSwyRUFBQyxTQUFJLFdBQVUsbUJBQ2I7QUFBQSxJQUFDLDJEQUF1QjtBQUF2QjtBQUFBLE1BQ0MsT0FBTyxXQUFXLFFBQVE7QUFBQSxNQUMxQixVQUFVLENBQUMsVUFBVTtBQUNuQixjQUFNLGdCQUFnQixXQUFXLFVBQVUsRUFBRSxPQUFPLG1CQUFtQjtBQUN2RSxjQUFNLFlBQVk7QUFBQSxVQUNoQixHQUFHO0FBQUEsVUFDSDtBQUFBLFFBQ0Y7QUFFQSwyQkFBbUI7QUFBQSxVQUNqQixHQUFHO0FBQUEsVUFDSCxRQUFRO0FBQUEsUUFDVixDQUFDO0FBQUEsTUFDSDtBQUFBO0FBQUEsRUFDRixDQUNGLEdBRUEsMkVBQUMsU0FBSSxXQUFVLG1CQUNiLDJFQUFDLFlBQUcsZ0JBQWMsR0FDbEIsMkVBQUMsNERBQVMsUUFDUiwyRUFBQyw4REFBVyxJQUFDLE9BQU0sVUFDakI7QUFBQSxJQUFDLDhDQUFLO0FBQUw7QUFBQSxNQUNDLE1BQUs7QUFBQSxNQUNMLGFBQVk7QUFBQSxNQUNaLE9BQU8sV0FBVztBQUFBLE1BQ2xCLFVBQVUsQ0FBQyxNQUFNO0FBQ2YsMkJBQW1CO0FBQUEsVUFDakIsR0FBRztBQUFBLFVBQ0gsV0FBVyxFQUFFLGNBQWM7QUFBQSxRQUM3QixDQUFDO0FBQUEsTUFDSDtBQUFBO0FBQUEsRUFDRixDQUNGLEdBQ0EsMkVBQUMsOERBQVcsSUFBQyxPQUFNLGNBQ2pCO0FBQUEsSUFBQyw4Q0FBSztBQUFMO0FBQUEsTUFDQyxNQUFLO0FBQUEsTUFDTCxPQUFPLFdBQVc7QUFBQSxNQUNsQixVQUFVLENBQUMsTUFBTTtBQUNmLDJCQUFtQjtBQUFBLFVBQ2pCLEdBQUc7QUFBQSxVQUNILGNBQWMsRUFBRSxjQUFjO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0g7QUFBQTtBQUFBLEVBQ0YsQ0FDRixHQUNBLDJFQUFDLDhEQUFXLElBQUMsT0FBTSxVQUNqQjtBQUFBLElBQUMsOENBQUs7QUFBTDtBQUFBLE1BQ0MsTUFBSztBQUFBLE1BQ0wsT0FBTyxXQUFXO0FBQUEsTUFDbEIsVUFBVSxDQUFDLE1BQU07QUFDZiwyQkFBbUI7QUFBQSxVQUNqQixHQUFHO0FBQUEsVUFDSCxXQUFXLEVBQUUsY0FBYztBQUFBLFFBQzdCLENBQUM7QUFBQSxNQUNIO0FBQUE7QUFBQSxFQUNGLENBQ0YsR0FDQSwyRUFBQyw4REFBVyxJQUFDLE9BQU0sVUFDakI7QUFBQSxJQUFDLDhDQUFLO0FBQUw7QUFBQSxNQUNDLE1BQUs7QUFBQSxNQUNMLGFBQVk7QUFBQSxNQUNaLE9BQU8sV0FBVztBQUFBLE1BQ2xCLFVBQVUsQ0FBQyxNQUFNO0FBQ2YsMkJBQW1CO0FBQUEsVUFDakIsR0FBRztBQUFBLFVBQ0gsV0FBVyxFQUFFLGNBQWM7QUFBQSxRQUM3QixDQUFDO0FBQUEsTUFDSDtBQUFBO0FBQUEsRUFDRixDQUNGLENBQ0YsQ0FDRixDQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0Fubm90YXRpb25RdWVyeUVkaXRvci50c3g/YTgyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBBbm5vdGF0aW9uUXVlcnkgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEVkaXRvckZpZWxkLCBFZGl0b3JSb3cgfSBmcm9tICdAZ3JhZmFuYS9leHBlcmltZW50YWwnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hRdWVyeSB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuaW1wb3J0IHsgRWxhc3RpY1F1ZXJ5RWRpdG9yUHJvcHMsIEVsYXN0aWNTZWFyY2hRdWVyeUZpZWxkIH0gZnJvbSAnLi9pbmRleCc7XG5cbnR5cGUgUHJvcHMgPSBFbGFzdGljUXVlcnlFZGl0b3JQcm9wcyAmIHtcbiAgYW5ub3RhdGlvbj86IEFubm90YXRpb25RdWVyeTxFbGFzdGljc2VhcmNoUXVlcnk+O1xuICBvbkFubm90YXRpb25DaGFuZ2U/OiAoYW5ub3RhdGlvbjogQW5ub3RhdGlvblF1ZXJ5PEVsYXN0aWNzZWFyY2hRdWVyeT4pID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gRWxhc3RpY3NlYXJjaEFubm90YXRpb25zUXVlcnlFZGl0b3IocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IGFubm90YXRpb24gPSBwcm9wcy5hbm5vdGF0aW9uITtcbiAgY29uc3Qgb25Bbm5vdGF0aW9uQ2hhbmdlID0gcHJvcHMub25Bbm5vdGF0aW9uQ2hhbmdlITtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdmLWZvcm0tZ3JvdXBcIj5cbiAgICAgICAgPEVsYXN0aWNTZWFyY2hRdWVyeUZpZWxkXG4gICAgICAgICAgdmFsdWU9e2Fubm90YXRpb24udGFyZ2V0Py5xdWVyeX1cbiAgICAgICAgICBvbkNoYW5nZT17KHF1ZXJ5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VGFyZ2V0ID0gYW5ub3RhdGlvbi50YXJnZXQgPz8geyByZWZJZDogJ2Fubm90YXRpb25fcXVlcnknIH07XG4gICAgICAgICAgICBjb25zdCBuZXdUYXJnZXQgPSB7XG4gICAgICAgICAgICAgIC4uLmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgb25Bbm5vdGF0aW9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgLi4uYW5ub3RhdGlvbixcbiAgICAgICAgICAgICAgdGFyZ2V0OiBuZXdUYXJnZXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2YtZm9ybS1ncm91cFwiPlxuICAgICAgICA8aDY+RmllbGQgbWFwcGluZ3M8L2g2PlxuICAgICAgICA8RWRpdG9yUm93PlxuICAgICAgICAgIDxFZGl0b3JGaWVsZCBsYWJlbD1cIlRpbWVcIj5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQHRpbWVzdGFtcFwiXG4gICAgICAgICAgICAgIHZhbHVlPXthbm5vdGF0aW9uLnRpbWVGaWVsZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgb25Bbm5vdGF0aW9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmFubm90YXRpb24sXG4gICAgICAgICAgICAgICAgICB0aW1lRmllbGQ6IGUuY3VycmVudFRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9FZGl0b3JGaWVsZD5cbiAgICAgICAgICA8RWRpdG9yRmllbGQgbGFiZWw9XCJUaW1lIEVuZFwiPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgdmFsdWU9e2Fubm90YXRpb24udGltZUVuZEZpZWxkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBvbkFubm90YXRpb25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgLi4uYW5ub3RhdGlvbixcbiAgICAgICAgICAgICAgICAgIHRpbWVFbmRGaWVsZDogZS5jdXJyZW50VGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0VkaXRvckZpZWxkPlxuICAgICAgICAgIDxFZGl0b3JGaWVsZCBsYWJlbD1cIlRleHRcIj5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHZhbHVlPXthbm5vdGF0aW9uLnRleHRGaWVsZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgb25Bbm5vdGF0aW9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmFubm90YXRpb24sXG4gICAgICAgICAgICAgICAgICB0ZXh0RmllbGQ6IGUuY3VycmVudFRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9FZGl0b3JGaWVsZD5cbiAgICAgICAgICA8RWRpdG9yRmllbGQgbGFiZWw9XCJUYWdzXCI+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInRhZ3NcIlxuICAgICAgICAgICAgICB2YWx1ZT17YW5ub3RhdGlvbi50YWdzRmllbGR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIG9uQW5ub3RhdGlvbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgICAuLi5hbm5vdGF0aW9uLFxuICAgICAgICAgICAgICAgICAgdGFnc0ZpZWxkOiBlLmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvRWRpdG9yRmllbGQ+XG4gICAgICAgIDwvRWRpdG9yUm93PlxuICAgICAgPC9kaXY+XG4gICAgPC8+XG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/AnnotationQueryEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/BucketAggregationEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BucketAggregationEditor: () => (/* binding */ BucketAggregationEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineSegmentGroup.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Segment/Segment.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Segment/SegmentAsync.tsx\");\n/* harmony import */ var _hooks_useFields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useFields.ts\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/styles.ts\");\n/* harmony import */ var _SettingsEditor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/index.tsx\");\n/* harmony import */ var _aggregations__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n\n\n\n\n\n\n\n\n\n\nconst bucketAggOptions = Object.entries(_utils__WEBPACK_IMPORTED_MODULE_7__.bucketAggregationConfig).map(\n  ([key, { label }]) => ({\n    label,\n    value: key\n  })\n);\nconst toOption = (bucketAgg) => ({\n  label: _utils__WEBPACK_IMPORTED_MODULE_7__.bucketAggregationConfig[bucketAgg.type].label,\n  value: bucketAgg.type\n});\nconst BucketAggregationEditor = ({ value }) => {\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n  const getFields = (0,_hooks_useFields__WEBPACK_IMPORTED_MODULE_1__.useFields)(value.type);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.InlineSegmentGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Segment,\n    {\n      className: _styles__WEBPACK_IMPORTED_MODULE_3__.segmentStyles,\n      options: bucketAggOptions,\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.changeBucketAggregationType)({ id: value.id, newType: e.value })),\n      value: toOption(value)\n    }\n  ), (0,_aggregations__WEBPACK_IMPORTED_MODULE_5__.isBucketAggregationWithField)(value) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_10__.SegmentAsync,\n    {\n      className: _styles__WEBPACK_IMPORTED_MODULE_3__.segmentStyles,\n      loadOptions: getFields,\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.changeBucketAggregationField)({ id: value.id, newField: e.value })),\n      placeholder: \"Select Field\",\n      value: value.field\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_SettingsEditor__WEBPACK_IMPORTED_MODULE_4__.SettingsEditor, { bucketAgg: value }));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uRWRpdG9yLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFrQjtBQUd3QztBQUVoQztBQUNFO0FBQ0U7QUFHQztBQUNjO0FBQzZCO0FBQ2xDO0FBRXhDLE1BQU0sbUJBQWtFLE9BQU8sUUFBUSwyREFBdUIsRUFBRTtBQUFBLEVBQzlHLENBQUMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE9BQU87QUFBQSxJQUNyQjtBQUFBLElBQ0EsT0FBTztBQUFBLEVBQ1Q7QUFDRjtBQUVBLE1BQU0sV0FBVyxDQUFDLGVBQWtDO0FBQUEsRUFDbEQsT0FBTywyREFBdUIsQ0FBQyxVQUFVLElBQUksRUFBRTtBQUFBLEVBQy9DLE9BQU8sVUFBVTtBQUNuQjtBQU1PLE1BQU0sMEJBQTBCLENBQUMsRUFBRSxNQUFNLE1BQThCO0FBQzVFLFFBQU0sV0FBVyx1RUFBVyxDQUFDO0FBQzdCLFFBQU0sWUFBWSwyREFBUyxDQUFDLE1BQU0sSUFBSTtBQUV0QyxTQUNFLDBJQUNFLDJFQUFDLDJEQUFrQixRQUNqQjtBQUFBLElBQUMsZ0RBQU87QUFBUDtBQUFBLE1BQ0MsV0FBVyxrREFBYTtBQUFiLE1BQ1gsU0FBUztBQUFBLE1BQ1QsVUFBVSxDQUFDLE1BQU0sU0FBUywyRUFBMkIsQ0FBQyxFQUFFLElBQUksTUFBTSxJQUFJLFNBQVMsRUFBRSxNQUFPLENBQUMsQ0FBQztBQUFBLE1BQzFGLE9BQU8sU0FBUyxLQUFLO0FBQUE7QUFBQSxFQUN2QixHQUVDLDJFQUE0QixDQUFDLEtBQUssS0FDakM7QUFBQSxJQUFDLHNEQUFZO0FBQVo7QUFBQSxNQUNDLFdBQVcsa0RBQWE7QUFBYixNQUNYLGFBQWE7QUFBQSxNQUNiLFVBQVUsQ0FBQyxNQUFNLFNBQVMsNEVBQTRCLENBQUMsRUFBRSxJQUFJLE1BQU0sSUFBSSxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFBQSxNQUMzRixhQUFZO0FBQUEsTUFDWixPQUFPLE1BQU07QUFBQTtBQUFBLEVBQ2YsQ0FFSixHQUVBLDJFQUFDLDJEQUFjLElBQUMsV0FBVyxPQUFPLENBQ3BDO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvci9CdWNrZXRBZ2dyZWdhdGlvbkVkaXRvci50c3g/YmM4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBTZWxlY3RhYmxlVmFsdWUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IElubGluZVNlZ21lbnRHcm91cCwgU2VnbWVudCwgU2VnbWVudEFzeW5jIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyB1c2VGaWVsZHMgfSBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VGaWVsZHMnO1xuaW1wb3J0IHsgdXNlRGlzcGF0Y2ggfSBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VTdGF0ZWxlc3NSZWR1Y2VyJztcbmltcG9ydCB7IHNlZ21lbnRTdHlsZXMgfSBmcm9tICcuLi9zdHlsZXMnO1xuXG5pbXBvcnQgeyBCdWNrZXRBZ2dyZWdhdGlvbiwgQnVja2V0QWdncmVnYXRpb25UeXBlIH0gZnJvbSAnLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBTZXR0aW5nc0VkaXRvciB9IGZyb20gJy4vU2V0dGluZ3NFZGl0b3InO1xuaW1wb3J0IHsgaXNCdWNrZXRBZ2dyZWdhdGlvbldpdGhGaWVsZCB9IGZyb20gJy4vYWdncmVnYXRpb25zJztcbmltcG9ydCB7IGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uRmllbGQsIGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uVHlwZSB9IGZyb20gJy4vc3RhdGUvYWN0aW9ucyc7XG5pbXBvcnQgeyBidWNrZXRBZ2dyZWdhdGlvbkNvbmZpZyB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBidWNrZXRBZ2dPcHRpb25zOiBBcnJheTxTZWxlY3RhYmxlVmFsdWU8QnVja2V0QWdncmVnYXRpb25UeXBlPj4gPSBPYmplY3QuZW50cmllcyhidWNrZXRBZ2dyZWdhdGlvbkNvbmZpZykubWFwKFxuICAoW2tleSwgeyBsYWJlbCB9XSkgPT4gKHtcbiAgICBsYWJlbCxcbiAgICB2YWx1ZToga2V5IGFzIEJ1Y2tldEFnZ3JlZ2F0aW9uVHlwZSxcbiAgfSlcbik7XG5cbmNvbnN0IHRvT3B0aW9uID0gKGJ1Y2tldEFnZzogQnVja2V0QWdncmVnYXRpb24pID0+ICh7XG4gIGxhYmVsOiBidWNrZXRBZ2dyZWdhdGlvbkNvbmZpZ1tidWNrZXRBZ2cudHlwZV0ubGFiZWwsXG4gIHZhbHVlOiBidWNrZXRBZ2cudHlwZSxcbn0pO1xuXG5pbnRlcmZhY2UgUXVlcnlNZXRyaWNFZGl0b3JQcm9wcyB7XG4gIHZhbHVlOiBCdWNrZXRBZ2dyZWdhdGlvbjtcbn1cblxuZXhwb3J0IGNvbnN0IEJ1Y2tldEFnZ3JlZ2F0aW9uRWRpdG9yID0gKHsgdmFsdWUgfTogUXVlcnlNZXRyaWNFZGl0b3JQcm9wcykgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IGdldEZpZWxkcyA9IHVzZUZpZWxkcyh2YWx1ZS50eXBlKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8SW5saW5lU2VnbWVudEdyb3VwPlxuICAgICAgICA8U2VnbWVudFxuICAgICAgICAgIGNsYXNzTmFtZT17c2VnbWVudFN0eWxlc31cbiAgICAgICAgICBvcHRpb25zPXtidWNrZXRBZ2dPcHRpb25zfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gZGlzcGF0Y2goY2hhbmdlQnVja2V0QWdncmVnYXRpb25UeXBlKHsgaWQ6IHZhbHVlLmlkLCBuZXdUeXBlOiBlLnZhbHVlISB9KSl9XG4gICAgICAgICAgdmFsdWU9e3RvT3B0aW9uKHZhbHVlKX1cbiAgICAgICAgLz5cblxuICAgICAgICB7aXNCdWNrZXRBZ2dyZWdhdGlvbldpdGhGaWVsZCh2YWx1ZSkgJiYgKFxuICAgICAgICAgIDxTZWdtZW50QXN5bmNcbiAgICAgICAgICAgIGNsYXNzTmFtZT17c2VnbWVudFN0eWxlc31cbiAgICAgICAgICAgIGxvYWRPcHRpb25zPXtnZXRGaWVsZHN9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGRpc3BhdGNoKGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uRmllbGQoeyBpZDogdmFsdWUuaWQsIG5ld0ZpZWxkOiBlLnZhbHVlIH0pKX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VsZWN0IEZpZWxkXCJcbiAgICAgICAgICAgIHZhbHVlPXt2YWx1ZS5maWVsZH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9JbmxpbmVTZWdtZW50R3JvdXA+XG5cbiAgICAgIDxTZXR0aW5nc0VkaXRvciBidWNrZXRBZ2c9e3ZhbHVlfSAvPlxuICAgIDwvPlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/BucketAggregationEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/DateHistogramSettingsEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DateHistogramSettingsEditor: () => (/* binding */ DateHistogramSettingsEditor)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/timezones.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/DateTimePickers/TimeZonePicker.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _hooks_useCreatableSelectPersistedBehaviour__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/hooks/useCreatableSelectPersistedBehaviour.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/index.tsx\");\n\n\n\n\n\n\n\n\n\n\nconst defaultIntervalOptions = [\n  { label: \"auto\", value: \"auto\" },\n  { label: \"10s\", value: \"10s\" },\n  { label: \"1m\", value: \"1m\" },\n  { label: \"5m\", value: \"5m\" },\n  { label: \"10m\", value: \"10m\" },\n  { label: \"20m\", value: \"20m\" },\n  { label: \"1h\", value: \"1h\" },\n  { label: \"1d\", value: \"1d\" }\n];\nconst hasValue = (searchValue) => ({ value }) => value === searchValue;\nconst isValidNewOption = (inputValue, _, options) => {\n  const valueExists = options.some(hasValue(inputValue));\n  return !valueExists && inputValue.trim().length > 0;\n};\nconst optionStartsWithValue = (option, value) => option.value?.startsWith(value) || false;\nconst DateHistogramSettingsEditor = ({ bucketAgg }) => {\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n  const { current: baseId } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqueId)(\"es-date_histogram-\"));\n  const handleIntervalChange = ({ value }) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"interval\", newValue: value }));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Interval\", ...___WEBPACK_IMPORTED_MODULE_6__.inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Select,\n    {\n      inputId: (0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqueId)(\"es-date_histogram-interval\"),\n      isValidNewOption,\n      filterOption: optionStartsWithValue,\n      ...(0,_hooks_useCreatableSelectPersistedBehaviour__WEBPACK_IMPORTED_MODULE_3__.useCreatableSelectPersistedBehaviour)({\n        options: defaultIntervalOptions,\n        value: bucketAgg.settings?.interval || _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig.date_histogram.defaultSettings?.interval,\n        onChange: handleIntervalChange\n      })\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Min Doc Count\", ...___WEBPACK_IMPORTED_MODULE_6__.inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n    {\n      id: `${baseId}-min_doc_count`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"min_doc_count\", newValue: e.target.value })\n      ),\n      defaultValue: bucketAgg.settings?.min_doc_count || _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig.date_histogram.defaultSettings?.min_doc_count\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Trim Edges\", ...___WEBPACK_IMPORTED_MODULE_6__.inlineFieldProps, tooltip: \"Trim the edges on the timeseries datapoints\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n    {\n      id: `${baseId}-trime_edges`,\n      onBlur: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"trimEdges\", newValue: e.target.value })),\n      defaultValue: bucketAgg.settings?.trimEdges || _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig.date_histogram.defaultSettings?.trimEdges\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField,\n    {\n      label: \"Offset\",\n      ...___WEBPACK_IMPORTED_MODULE_6__.inlineFieldProps,\n      tooltip: \"Change the start value of each bucket by the specified positive (+) or negative offset (-) duration, such as 1h for an hour, or 1d for a day\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n      {\n        id: `${baseId}-offset`,\n        onBlur: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"offset\", newValue: e.target.value })),\n        defaultValue: bucketAgg.settings?.offset || _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig.date_histogram.defaultSettings?.offset\n      }\n    )\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Timezone\", ...___WEBPACK_IMPORTED_MODULE_6__.inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_10__.TimeZonePicker,\n    {\n      value: bucketAgg.settings?.timeZone || _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig.date_histogram.defaultSettings?.timeZone,\n      includeInternal: [_grafana_data__WEBPACK_IMPORTED_MODULE_11__.InternalTimeZones.utc],\n      onChange: (timeZone) => {\n        dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"timeZone\", newValue: timeZone }));\n      }\n    }\n  )));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0RhdGVIaXN0b2dyYW1TZXR0aW5nc0VkaXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5QjtBQUNLO0FBR3FCO0FBQ1E7QUFFL0I7QUFFeUI7QUFDTjtBQUNQO0FBRVA7QUFFakMsTUFBTSx5QkFBeUQ7QUFBQSxFQUM3RCxFQUFFLE9BQU8sUUFBUSxPQUFPLE9BQU87QUFBQSxFQUMvQixFQUFFLE9BQU8sT0FBTyxPQUFPLE1BQU07QUFBQSxFQUM3QixFQUFFLE9BQU8sTUFBTSxPQUFPLEtBQUs7QUFBQSxFQUMzQixFQUFFLE9BQU8sTUFBTSxPQUFPLEtBQUs7QUFBQSxFQUMzQixFQUFFLE9BQU8sT0FBTyxPQUFPLE1BQU07QUFBQSxFQUM3QixFQUFFLE9BQU8sT0FBTyxPQUFPLE1BQU07QUFBQSxFQUM3QixFQUFFLE9BQU8sTUFBTSxPQUFPLEtBQUs7QUFBQSxFQUMzQixFQUFFLE9BQU8sTUFBTSxPQUFPLEtBQUs7QUFDN0I7QUFFQSxNQUFNLFdBQ0osQ0FBQyxnQkFDRCxDQUFDLEVBQUUsTUFBTSxNQUNQLFVBQVU7QUFFZCxNQUFNLG1CQUFtQixDQUN2QixZQUNBLEdBQ0EsWUFDRztBQUdILFFBQU0sY0FBZSxRQUEyQyxLQUFLLFNBQVMsVUFBVSxDQUFDO0FBRXpGLFNBQU8sQ0FBQyxlQUFlLFdBQVcsS0FBSyxFQUFFLFNBQVM7QUFDcEQ7QUFFQSxNQUFNLHdCQUF3QixDQUFDLFFBQWlDLFVBQzlELE9BQU8sT0FBTyxXQUFXLEtBQUssS0FBSztBQU05QixNQUFNLDhCQUE4QixDQUFDLEVBQUUsVUFBVSxNQUFhO0FBQ25FLFFBQU0sV0FBVyx1RUFBVyxDQUFDO0FBQzdCLFFBQU0sRUFBRSxTQUFTLE9BQU8sSUFBSSw2Q0FBTSxDQUFDLGdEQUFRLENBQUMsb0JBQW9CLENBQUM7QUFFakUsUUFBTSx1QkFBdUIsQ0FBQyxFQUFFLE1BQU0sTUFDcEMsU0FBUyw4RUFBOEIsQ0FBQyxFQUFFLFdBQVcsYUFBYSxZQUFZLFVBQVUsTUFBTSxDQUFDLENBQUM7QUFFbEcsU0FDRSwwSUFDRSwyRUFBQyxvREFBVyxJQUFDLE9BQU0sWUFBWSxHQUFHLCtDQUFnQixJQUNoRDtBQUFBLElBQUMsK0NBQU07QUFBTjtBQUFBLE1BQ0MsU0FBUyxnREFBUSxDQUFDLDRCQUE0QjtBQUFBLE1BQzlDO0FBQUEsTUFDQSxjQUFjO0FBQUEsTUFDYixHQUFHLGlIQUFvQyxDQUFDO0FBQUEsUUFDdkMsU0FBUztBQUFBLFFBQ1QsT0FBTyxVQUFVLFVBQVUsWUFBWSwyREFBdUIsQ0FBQyxlQUFlLGlCQUFpQjtBQUFBLFFBQy9GLFVBQVU7QUFBQSxNQUNaLENBQUM7QUFBQTtBQUFBLEVBQ0gsQ0FDRixHQUVBLDJFQUFDLG9EQUFXLElBQUMsT0FBTSxpQkFBaUIsR0FBRywrQ0FBZ0IsSUFDckQ7QUFBQSxJQUFDLDhDQUFLO0FBQUw7QUFBQSxNQUNDLElBQUksR0FBRztBQUFBLE1BQ1AsUUFBUSxDQUFDLE1BQ1A7QUFBQSxRQUNFLDhFQUE4QixDQUFDLEVBQUUsV0FBVyxhQUFhLGlCQUFpQixVQUFVLEVBQUUsT0FBTyxNQUFNLENBQUM7QUFBQSxNQUN0RztBQUFBLE1BRUYsY0FDRSxVQUFVLFVBQVUsaUJBQWlCLDJEQUF1QixDQUFDLGVBQWUsaUJBQWlCO0FBQUE7QUFBQSxFQUVqRyxDQUNGLEdBRUEsMkVBQUMsb0RBQVcsSUFBQyxPQUFNLGNBQWMsR0FBRywrQ0FBZ0IsRUFBRSxTQUFRLGlEQUM1RDtBQUFBLElBQUMsOENBQUs7QUFBTDtBQUFBLE1BQ0MsSUFBSSxHQUFHO0FBQUEsTUFDUCxRQUFRLENBQUMsTUFDUCxTQUFTLDhFQUE4QixDQUFDLEVBQUUsV0FBVyxhQUFhLGFBQWEsVUFBVSxFQUFFLE9BQU8sTUFBTSxDQUFDLENBQUM7QUFBQSxNQUU1RyxjQUNFLFVBQVUsVUFBVSxhQUFhLDJEQUF1QixDQUFDLGVBQWUsaUJBQWlCO0FBQUE7QUFBQSxFQUU3RixDQUNGLEdBRUE7QUFBQSxJQUFDLG9EQUFXO0FBQVg7QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNMLEdBQUcsK0NBQWdCO0FBQWhCLE1BQ0osU0FBUTtBQUFBO0FBQUEsSUFFUjtBQUFBLE1BQUMsOENBQUs7QUFBTDtBQUFBLFFBQ0MsSUFBSSxHQUFHO0FBQUEsUUFDUCxRQUFRLENBQUMsTUFDUCxTQUFTLDhFQUE4QixDQUFDLEVBQUUsV0FBVyxhQUFhLFVBQVUsVUFBVSxFQUFFLE9BQU8sTUFBTSxDQUFDLENBQUM7QUFBQSxRQUV6RyxjQUFjLFVBQVUsVUFBVSxVQUFVLDJEQUF1QixDQUFDLGVBQWUsaUJBQWlCO0FBQUE7QUFBQSxJQUN0RztBQUFBLEVBQ0YsR0FFQSwyRUFBQyxvREFBVyxJQUFDLE9BQU0sWUFBWSxHQUFHLCtDQUFnQixJQUNoRDtBQUFBLElBQUMsd0RBQWM7QUFBZDtBQUFBLE1BQ0MsT0FBTyxVQUFVLFVBQVUsWUFBWSwyREFBdUIsQ0FBQyxlQUFlLGlCQUFpQjtBQUFBLE1BQy9GLGlCQUFpQixDQUFDLDZEQUFpQixDQUFDLEdBQUc7QUFBQSxNQUN2QyxVQUFVLENBQUMsYUFBYTtBQUN0QixpQkFBUyw4RUFBOEIsQ0FBQyxFQUFFLFdBQVcsYUFBYSxZQUFZLFVBQVUsU0FBUyxDQUFDLENBQUM7QUFBQSxNQUNyRztBQUFBO0FBQUEsRUFDRixDQUNGLENBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0RhdGVIaXN0b2dyYW1TZXR0aW5nc0VkaXRvci50c3g/NzdmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgR3JvdXBCYXNlLCBPcHRpb25zT3JHcm91cHMgfSBmcm9tICdyZWFjdC1zZWxlY3QnO1xuXG5pbXBvcnQgeyBJbnRlcm5hbFRpbWVab25lcywgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBJbmxpbmVGaWVsZCwgSW5wdXQsIFNlbGVjdCwgVGltZVpvbmVQaWNrZXIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi4vLi4vLi4vLi4vaG9va3MvdXNlU3RhdGVsZXNzUmVkdWNlcic7XG5pbXBvcnQgeyBEYXRlSGlzdG9ncmFtIH0gZnJvbSAnLi4vLi4vLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgdXNlQ3JlYXRhYmxlU2VsZWN0UGVyc2lzdGVkQmVoYXZpb3VyIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlQ3JlYXRhYmxlU2VsZWN0UGVyc2lzdGVkQmVoYXZpb3VyJztcbmltcG9ydCB7IGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZyB9IGZyb20gJy4uL3N0YXRlL2FjdGlvbnMnO1xuaW1wb3J0IHsgYnVja2V0QWdncmVnYXRpb25Db25maWcgfSBmcm9tICcuLi91dGlscyc7XG5cbmltcG9ydCB7IGlubGluZUZpZWxkUHJvcHMgfSBmcm9tICcuJztcblxuY29uc3QgZGVmYXVsdEludGVydmFsT3B0aW9uczogQXJyYXk8U2VsZWN0YWJsZVZhbHVlPHN0cmluZz4+ID0gW1xuICB7IGxhYmVsOiAnYXV0bycsIHZhbHVlOiAnYXV0bycgfSxcbiAgeyBsYWJlbDogJzEwcycsIHZhbHVlOiAnMTBzJyB9LFxuICB7IGxhYmVsOiAnMW0nLCB2YWx1ZTogJzFtJyB9LFxuICB7IGxhYmVsOiAnNW0nLCB2YWx1ZTogJzVtJyB9LFxuICB7IGxhYmVsOiAnMTBtJywgdmFsdWU6ICcxMG0nIH0sXG4gIHsgbGFiZWw6ICcyMG0nLCB2YWx1ZTogJzIwbScgfSxcbiAgeyBsYWJlbDogJzFoJywgdmFsdWU6ICcxaCcgfSxcbiAgeyBsYWJlbDogJzFkJywgdmFsdWU6ICcxZCcgfSxcbl07XG5cbmNvbnN0IGhhc1ZhbHVlID1cbiAgKHNlYXJjaFZhbHVlOiBzdHJpbmcpID0+XG4gICh7IHZhbHVlIH06IFNlbGVjdGFibGVWYWx1ZTxzdHJpbmc+KSA9PlxuICAgIHZhbHVlID09PSBzZWFyY2hWYWx1ZTtcblxuY29uc3QgaXNWYWxpZE5ld09wdGlvbiA9IChcbiAgaW5wdXRWYWx1ZTogc3RyaW5nLFxuICBfOiBTZWxlY3RhYmxlVmFsdWU8c3RyaW5nPiB8IG51bGwsXG4gIG9wdGlvbnM6IE9wdGlvbnNPckdyb3Vwczx1bmtub3duLCBHcm91cEJhc2U8dW5rbm93bj4+XG4pID0+IHtcbiAgLy8gVE9ETzogd291bGQgYmUgZXh0cmVtZWx5IG5pY2UgaGVyZSB0byBhbGxvdyBvbmx5IHRlbXBsYXRlIHZhcmlhYmxlcyBhbmQgdmFsdWVzIHRoYXQgYXJlXG4gIC8vIHZhbGlkIGRhdGUgaGlzdG9ncmFtJ3MgSW50ZXJ2YWwgb3B0aW9uc1xuICBjb25zdCB2YWx1ZUV4aXN0cyA9IChvcHRpb25zIGFzIEFycmF5PFNlbGVjdGFibGVWYWx1ZTxzdHJpbmc+Pikuc29tZShoYXNWYWx1ZShpbnB1dFZhbHVlKSk7XG4gIC8vIHdlIGFsc28gZG9uJ3Qgd2FudCB1c2VycyB0byBjcmVhdGUgXCJlbXB0eVwiIHZhbHVlc1xuICByZXR1cm4gIXZhbHVlRXhpc3RzICYmIGlucHV0VmFsdWUudHJpbSgpLmxlbmd0aCA+IDA7XG59O1xuXG5jb25zdCBvcHRpb25TdGFydHNXaXRoVmFsdWUgPSAob3B0aW9uOiBTZWxlY3RhYmxlVmFsdWU8c3RyaW5nPiwgdmFsdWU6IHN0cmluZykgPT5cbiAgb3B0aW9uLnZhbHVlPy5zdGFydHNXaXRoKHZhbHVlKSB8fCBmYWxzZTtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgYnVja2V0QWdnOiBEYXRlSGlzdG9ncmFtO1xufVxuXG5leHBvcnQgY29uc3QgRGF0ZUhpc3RvZ3JhbVNldHRpbmdzRWRpdG9yID0gKHsgYnVja2V0QWdnIH06IFByb3BzKSA9PiB7XG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcbiAgY29uc3QgeyBjdXJyZW50OiBiYXNlSWQgfSA9IHVzZVJlZih1bmlxdWVJZCgnZXMtZGF0ZV9oaXN0b2dyYW0tJykpO1xuXG4gIGNvbnN0IGhhbmRsZUludGVydmFsQ2hhbmdlID0gKHsgdmFsdWUgfTogU2VsZWN0YWJsZVZhbHVlPHN0cmluZz4pID0+XG4gICAgZGlzcGF0Y2goY2hhbmdlQnVja2V0QWdncmVnYXRpb25TZXR0aW5nKHsgYnVja2V0QWdnLCBzZXR0aW5nTmFtZTogJ2ludGVydmFsJywgbmV3VmFsdWU6IHZhbHVlIH0pKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJJbnRlcnZhbFwiIHsuLi5pbmxpbmVGaWVsZFByb3BzfT5cbiAgICAgICAgPFNlbGVjdFxuICAgICAgICAgIGlucHV0SWQ9e3VuaXF1ZUlkKCdlcy1kYXRlX2hpc3RvZ3JhbS1pbnRlcnZhbCcpfVxuICAgICAgICAgIGlzVmFsaWROZXdPcHRpb249e2lzVmFsaWROZXdPcHRpb259XG4gICAgICAgICAgZmlsdGVyT3B0aW9uPXtvcHRpb25TdGFydHNXaXRoVmFsdWV9XG4gICAgICAgICAgey4uLnVzZUNyZWF0YWJsZVNlbGVjdFBlcnNpc3RlZEJlaGF2aW91cih7XG4gICAgICAgICAgICBvcHRpb25zOiBkZWZhdWx0SW50ZXJ2YWxPcHRpb25zLFxuICAgICAgICAgICAgdmFsdWU6IGJ1Y2tldEFnZy5zZXR0aW5ncz8uaW50ZXJ2YWwgfHwgYnVja2V0QWdncmVnYXRpb25Db25maWcuZGF0ZV9oaXN0b2dyYW0uZGVmYXVsdFNldHRpbmdzPy5pbnRlcnZhbCxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBoYW5kbGVJbnRlcnZhbENoYW5nZSxcbiAgICAgICAgICB9KX1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIk1pbiBEb2MgQ291bnRcIiB7Li4uaW5saW5lRmllbGRQcm9wc30+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LW1pbl9kb2NfY291bnRgfVxuICAgICAgICAgIG9uQmx1cj17KGUpID0+XG4gICAgICAgICAgICBkaXNwYXRjaChcbiAgICAgICAgICAgICAgY2hhbmdlQnVja2V0QWdncmVnYXRpb25TZXR0aW5nKHsgYnVja2V0QWdnLCBzZXR0aW5nTmFtZTogJ21pbl9kb2NfY291bnQnLCBuZXdWYWx1ZTogZS50YXJnZXQudmFsdWUgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgIGJ1Y2tldEFnZy5zZXR0aW5ncz8ubWluX2RvY19jb3VudCB8fCBidWNrZXRBZ2dyZWdhdGlvbkNvbmZpZy5kYXRlX2hpc3RvZ3JhbS5kZWZhdWx0U2V0dGluZ3M/Lm1pbl9kb2NfY291bnRcbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICA8L0lubGluZUZpZWxkPlxuXG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJUcmltIEVkZ2VzXCIgey4uLmlubGluZUZpZWxkUHJvcHN9IHRvb2x0aXA9XCJUcmltIHRoZSBlZGdlcyBvbiB0aGUgdGltZXNlcmllcyBkYXRhcG9pbnRzXCI+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LXRyaW1lX2VkZ2VzYH1cbiAgICAgICAgICBvbkJsdXI9eyhlKSA9PlxuICAgICAgICAgICAgZGlzcGF0Y2goY2hhbmdlQnVja2V0QWdncmVnYXRpb25TZXR0aW5nKHsgYnVja2V0QWdnLCBzZXR0aW5nTmFtZTogJ3RyaW1FZGdlcycsIG5ld1ZhbHVlOiBlLnRhcmdldC52YWx1ZSB9KSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgIGJ1Y2tldEFnZy5zZXR0aW5ncz8udHJpbUVkZ2VzIHx8IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnLmRhdGVfaGlzdG9ncmFtLmRlZmF1bHRTZXR0aW5ncz8udHJpbUVkZ2VzXG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgPC9JbmxpbmVGaWVsZD5cblxuICAgICAgPElubGluZUZpZWxkXG4gICAgICAgIGxhYmVsPVwiT2Zmc2V0XCJcbiAgICAgICAgey4uLmlubGluZUZpZWxkUHJvcHN9XG4gICAgICAgIHRvb2x0aXA9XCJDaGFuZ2UgdGhlIHN0YXJ0IHZhbHVlIG9mIGVhY2ggYnVja2V0IGJ5IHRoZSBzcGVjaWZpZWQgcG9zaXRpdmUgKCspIG9yIG5lZ2F0aXZlIG9mZnNldCAoLSkgZHVyYXRpb24sIHN1Y2ggYXMgMWggZm9yIGFuIGhvdXIsIG9yIDFkIGZvciBhIGRheVwiXG4gICAgICA+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LW9mZnNldGB9XG4gICAgICAgICAgb25CbHVyPXsoZSkgPT5cbiAgICAgICAgICAgIGRpc3BhdGNoKGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZyh7IGJ1Y2tldEFnZywgc2V0dGluZ05hbWU6ICdvZmZzZXQnLCBuZXdWYWx1ZTogZS50YXJnZXQudmFsdWUgfSkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHRWYWx1ZT17YnVja2V0QWdnLnNldHRpbmdzPy5vZmZzZXQgfHwgYnVja2V0QWdncmVnYXRpb25Db25maWcuZGF0ZV9oaXN0b2dyYW0uZGVmYXVsdFNldHRpbmdzPy5vZmZzZXR9XG4gICAgICAgIC8+XG4gICAgICA8L0lubGluZUZpZWxkPlxuXG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJUaW1lem9uZVwiIHsuLi5pbmxpbmVGaWVsZFByb3BzfT5cbiAgICAgICAgPFRpbWVab25lUGlja2VyXG4gICAgICAgICAgdmFsdWU9e2J1Y2tldEFnZy5zZXR0aW5ncz8udGltZVpvbmUgfHwgYnVja2V0QWdncmVnYXRpb25Db25maWcuZGF0ZV9oaXN0b2dyYW0uZGVmYXVsdFNldHRpbmdzPy50aW1lWm9uZX1cbiAgICAgICAgICBpbmNsdWRlSW50ZXJuYWw9e1tJbnRlcm5hbFRpbWVab25lcy51dGNdfVxuICAgICAgICAgIG9uQ2hhbmdlPXsodGltZVpvbmUpID0+IHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZyh7IGJ1Y2tldEFnZywgc2V0dGluZ05hbWU6ICd0aW1lWm9uZScsIG5ld1ZhbHVlOiB0aW1lWm9uZSB9KSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgPC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/DateHistogramSettingsEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/index.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FiltersSettingsEditor: () => (/* binding */ FiltersSettingsEditor)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/QueryField/QueryField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _AddRemove__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/AddRemove.tsx\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/state/actions.ts\");\n/* harmony import */ var _state_reducer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/state/reducer.ts\");\n\n\n\n\n\n\n\n\n\n\nconst FiltersSettingsEditor = ({ bucketAgg }) => {\n  const { current: baseId } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)((0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(\"es-filters-\"));\n  const upperStateDispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__.useDispatch)();\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__.useStatelessReducer)(\n    (newValue) => upperStateDispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"filters\", newValue })),\n    bucketAgg.settings?.filters,\n    _state_reducer__WEBPACK_IMPORTED_MODULE_7__.reducer\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!bucketAgg.settings?.filters?.length) {\n      dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.addFilter)());\n    }\n  }, [dispatch, bucketAgg.settings?.filters?.length]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    \"div\",\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n          display: flex;\n          flex-direction: column;\n        `\n    },\n    bucketAgg.settings?.filters.map((filter, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      \"div\",\n      {\n        key: index,\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n              display: flex;\n            `\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.InlineField, { label: \"Query\", labelWidth: 8 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n        \"div\",\n        {\n          className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n                  width: 150px;\n                `\n        },\n        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n          _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.QueryField,\n          {\n            placeholder: \"Lucene Query\",\n            portalOrigin: \"elasticsearch\",\n            onChange: (query) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.changeFilter)({ index, filter: { ...filter, query } })),\n            query: filter.query\n          }\n        )\n      )),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.InlineField, { label: \"Label\", labelWidth: 8 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_10__.Input,\n        {\n          width: 16,\n          id: `${baseId}-label-${index}`,\n          placeholder: \"Label\",\n          onBlur: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.changeFilter)({ index, filter: { ...filter, label: e.target.value } })),\n          defaultValue: filter.label\n        }\n      )),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n        _AddRemove__WEBPACK_IMPORTED_MODULE_4__.AddRemove,\n        {\n          index,\n          elements: bucketAgg.settings?.filters || [],\n          onAdd: () => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.addFilter)()),\n          onRemove: () => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.removeFilter)(index))\n        }\n      )\n    ))\n  ));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0ZpbHRlcnNTZXR0aW5nc0VkaXRvci9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ0s7QUFDZ0I7QUFFTTtBQUVFO0FBRXZCO0FBQ3FCO0FBRU87QUFDWjtBQU1uQyxNQUFNLHdCQUF3QixDQUFDLEVBQUUsVUFBVSxNQUFhO0FBQzdELFFBQU0sRUFBRSxTQUFTLE9BQU8sSUFBSSw2Q0FBTSxDQUFDLGdEQUFRLENBQUMsYUFBYSxDQUFDO0FBRTFELFFBQU0scUJBQXFCLHVFQUFXLENBQUM7QUFFdkMsUUFBTSxXQUFXLCtFQUFtQjtBQUFuQixJQUNmLENBQUMsYUFBYSxtQkFBbUIsOEVBQThCLENBQUMsRUFBRSxXQUFXLGFBQWEsV0FBVyxTQUFTLENBQUMsQ0FBQztBQUFBLElBQ2hILFVBQVUsVUFBVTtBQUFBLElBQ3BCLG1EQUFjO0FBQWQsRUFDRjtBQUlBLGtEQUFTLENBQUMsTUFBTTtBQUNkLFFBQUksQ0FBQyxVQUFVLFVBQVUsU0FBUyxRQUFRO0FBQ3hDLGVBQVMseURBQVMsQ0FBQyxDQUFDO0FBQUEsSUFDdEI7QUFBQSxFQUNGLEdBQUcsQ0FBQyxVQUFVLFVBQVUsVUFBVSxTQUFTLE1BQU0sQ0FBQztBQUVsRCxTQUNFLDBJQUNFO0FBQUEsSUFBQztBQUFBO0FBQUEsTUFDQyxXQUFXLGlEQUFHO0FBQUg7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUtWLFVBQVUsVUFBVSxRQUFTLElBQUksQ0FBQyxRQUFRLFVBQ3pDO0FBQUEsTUFBQztBQUFBO0FBQUEsUUFDQyxLQUFLO0FBQUEsUUFDTCxXQUFXLGlEQUFHO0FBQUg7QUFBQTtBQUFBO0FBQUEsTUFJWCwyRUFBQyxvREFBVyxJQUFDLE9BQU0sU0FBUSxZQUFZLEtBQ3JDO0FBQUEsUUFBQztBQUFBO0FBQUEsVUFDQyxXQUFXLGlEQUFHO0FBQUg7QUFBQTtBQUFBO0FBQUEsUUFJWDtBQUFBLFVBQUMsbURBQVU7QUFBVjtBQUFBLFlBQ0MsYUFBWTtBQUFBLFlBQ1osY0FBYTtBQUFBLFlBQ2IsVUFBVSxDQUFDLFVBQVUsU0FBUyw0REFBWSxDQUFDLEVBQUUsT0FBTyxRQUFRLEVBQUUsR0FBRyxRQUFRLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFBQSxZQUNuRixPQUFPLE9BQU87QUFBQTtBQUFBLFFBQ2hCO0FBQUEsTUFDRixDQUNGO0FBQUEsTUFDQSwyRUFBQyxvREFBVyxJQUFDLE9BQU0sU0FBUSxZQUFZLEtBQ3JDO0FBQUEsUUFBQywrQ0FBSztBQUFMO0FBQUEsVUFDQyxPQUFPO0FBQUEsVUFDUCxJQUFJLEdBQUcsZ0JBQWdCO0FBQUEsVUFDdkIsYUFBWTtBQUFBLFVBQ1osUUFBUSxDQUFDLE1BQU0sU0FBUyw0REFBWSxDQUFDLEVBQUUsT0FBTyxRQUFRLEVBQUUsR0FBRyxRQUFRLE9BQU8sRUFBRSxPQUFPLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFBQSxVQUM3RixjQUFjLE9BQU87QUFBQTtBQUFBLE1BQ3ZCLENBQ0Y7QUFBQSxNQUNBO0FBQUEsUUFBQyxpREFBUztBQUFUO0FBQUEsVUFDQztBQUFBLFVBQ0EsVUFBVSxVQUFVLFVBQVUsV0FBVyxDQUFDO0FBQUEsVUFDMUMsT0FBTyxNQUFNLFNBQVMseURBQVMsQ0FBQyxDQUFDO0FBQUEsVUFDakMsVUFBVSxNQUFNLFNBQVMsNERBQVksQ0FBQyxLQUFLLENBQUM7QUFBQTtBQUFBLE1BQzlDO0FBQUEsSUFDRixDQUNEO0FBQUEsRUFDSCxDQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvci9TZXR0aW5nc0VkaXRvci9GaWx0ZXJzU2V0dGluZ3NFZGl0b3IvaW5kZXgudHN4PzRlNDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCB7IHVuaXF1ZUlkIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgSW5saW5lRmllbGQsIElucHV0LCBRdWVyeUZpZWxkIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU3RhdGVsZXNzUmVkdWNlciB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2hvb2tzL3VzZVN0YXRlbGVzc1JlZHVjZXInO1xuaW1wb3J0IHsgRmlsdGVycyB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IEFkZFJlbW92ZSB9IGZyb20gJy4uLy4uLy4uLy4uL0FkZFJlbW92ZSc7XG5pbXBvcnQgeyBjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvblNldHRpbmcgfSBmcm9tICcuLi8uLi9zdGF0ZS9hY3Rpb25zJztcblxuaW1wb3J0IHsgYWRkRmlsdGVyLCBjaGFuZ2VGaWx0ZXIsIHJlbW92ZUZpbHRlciB9IGZyb20gJy4vc3RhdGUvYWN0aW9ucyc7XG5pbXBvcnQgeyByZWR1Y2VyIGFzIGZpbHRlcnNSZWR1Y2VyIH0gZnJvbSAnLi9zdGF0ZS9yZWR1Y2VyJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgYnVja2V0QWdnOiBGaWx0ZXJzO1xufVxuXG5leHBvcnQgY29uc3QgRmlsdGVyc1NldHRpbmdzRWRpdG9yID0gKHsgYnVja2V0QWdnIH06IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgY3VycmVudDogYmFzZUlkIH0gPSB1c2VSZWYodW5pcXVlSWQoJ2VzLWZpbHRlcnMtJykpO1xuXG4gIGNvbnN0IHVwcGVyU3RhdGVEaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG5cbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VTdGF0ZWxlc3NSZWR1Y2VyKFxuICAgIChuZXdWYWx1ZSkgPT4gdXBwZXJTdGF0ZURpc3BhdGNoKGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZyh7IGJ1Y2tldEFnZywgc2V0dGluZ05hbWU6ICdmaWx0ZXJzJywgbmV3VmFsdWUgfSkpLFxuICAgIGJ1Y2tldEFnZy5zZXR0aW5ncz8uZmlsdGVycyxcbiAgICBmaWx0ZXJzUmVkdWNlclxuICApO1xuXG4gIC8vIFRoZSBtb2RlbCBtaWdodCBub3QgaGF2ZSBmaWx0ZXJzIChvciBhbiBlbXB0eSBhcnJheSBvZiBmaWx0ZXJzKSBpbiBpdCBiZWNhdXNlIG9mIHRoZSB3YXkgaXQgd2FzIGJ1aWx0IGluIHByZXZpb3VzIHZlcnNpb25zIG9mIHRoZSBkYXRhc291cmNlLlxuICAvLyBJZiB0aGlzIGlzIHRoZSBjYXNlIHdlIGFkZCBhIGRlZmF1bHQgb25lLlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYnVja2V0QWdnLnNldHRpbmdzPy5maWx0ZXJzPy5sZW5ndGgpIHtcbiAgICAgIGRpc3BhdGNoKGFkZEZpbHRlcigpKTtcbiAgICB9XG4gIH0sIFtkaXNwYXRjaCwgYnVja2V0QWdnLnNldHRpbmdzPy5maWx0ZXJzPy5sZW5ndGhdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y3NzYFxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAge2J1Y2tldEFnZy5zZXR0aW5ncz8uZmlsdGVycyEubWFwKChmaWx0ZXIsIGluZGV4KSA9PiAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJRdWVyeVwiIGxhYmVsV2lkdGg9ezh9PlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjc3NgXG4gICAgICAgICAgICAgICAgICB3aWR0aDogMTUwcHg7XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxRdWVyeUZpZWxkXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkx1Y2VuZSBRdWVyeVwiXG4gICAgICAgICAgICAgICAgICBwb3J0YWxPcmlnaW49XCJlbGFzdGljc2VhcmNoXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsocXVlcnkpID0+IGRpc3BhdGNoKGNoYW5nZUZpbHRlcih7IGluZGV4LCBmaWx0ZXI6IHsgLi4uZmlsdGVyLCBxdWVyeSB9IH0pKX1cbiAgICAgICAgICAgICAgICAgIHF1ZXJ5PXtmaWx0ZXIucXVlcnl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0lubGluZUZpZWxkPlxuICAgICAgICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiTGFiZWxcIiBsYWJlbFdpZHRoPXs4fT5cbiAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgd2lkdGg9ezE2fVxuICAgICAgICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LWxhYmVsLSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkxhYmVsXCJcbiAgICAgICAgICAgICAgICBvbkJsdXI9eyhlKSA9PiBkaXNwYXRjaChjaGFuZ2VGaWx0ZXIoeyBpbmRleCwgZmlsdGVyOiB7IC4uLmZpbHRlciwgbGFiZWw6IGUudGFyZ2V0LnZhbHVlIH0gfSkpfVxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmlsdGVyLmxhYmVsfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICAgICAgIDxBZGRSZW1vdmVcbiAgICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgICBlbGVtZW50cz17YnVja2V0QWdnLnNldHRpbmdzPy5maWx0ZXJzIHx8IFtdfVxuICAgICAgICAgICAgICBvbkFkZD17KCkgPT4gZGlzcGF0Y2goYWRkRmlsdGVyKCkpfVxuICAgICAgICAgICAgICBvblJlbW92ZT17KCkgPT4gZGlzcGF0Y2gocmVtb3ZlRmlsdGVyKGluZGV4KSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvPlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/index.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/state/actions.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addFilter: () => (/* binding */ addFilter),\n/* harmony export */   changeFilter: () => (/* binding */ changeFilter),\n/* harmony export */   removeFilter: () => (/* binding */ removeFilter)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@reduxjs-toolkit-virtual-75570b104b/0/cache/@reduxjs-toolkit-npm-1.9.3-cbad5da1de-d965fc6197.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js\");\n\n\nconst addFilter = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@bucketAggregations/filter/add\");\nconst removeFilter = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@bucketAggregations/filter/remove\");\nconst changeFilter = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@bucketAggregations/filter/change\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0ZpbHRlcnNTZXR0aW5nc0VkaXRvci9zdGF0ZS9hY3Rpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTZCO0FBSXRCLE1BQU0sWUFBWSw4REFBWSxDQUFDLGdDQUFnQztBQUMvRCxNQUFNLGVBQWUsOERBQVksQ0FBUyxtQ0FBbUM7QUFDN0UsTUFBTSxlQUFlLDhEQUFZLENBQW9DLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0ZpbHRlcnNTZXR0aW5nc0VkaXRvci9zdGF0ZS9hY3Rpb25zLnRzPzA0MTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQWN0aW9uIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5cbmltcG9ydCB7IEZpbHRlciB9IGZyb20gJy4uLy4uLy4uLy4uLy4uLy4uL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGFkZEZpbHRlciA9IGNyZWF0ZUFjdGlvbignQGJ1Y2tldEFnZ3JlZ2F0aW9ucy9maWx0ZXIvYWRkJyk7XG5leHBvcnQgY29uc3QgcmVtb3ZlRmlsdGVyID0gY3JlYXRlQWN0aW9uPG51bWJlcj4oJ0BidWNrZXRBZ2dyZWdhdGlvbnMvZmlsdGVyL3JlbW92ZScpO1xuZXhwb3J0IGNvbnN0IGNoYW5nZUZpbHRlciA9IGNyZWF0ZUFjdGlvbjx7IGluZGV4OiBudW1iZXI7IGZpbHRlcjogRmlsdGVyIH0+KCdAYnVja2V0QWdncmVnYXRpb25zL2ZpbHRlci9jaGFuZ2UnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/state/actions.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/state/reducer.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reducer: () => (/* binding */ reducer)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/utils.ts\");\n/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/state/actions.ts\");\n\n\n\nconst reducer = (state = [], action) => {\n  if (_actions__WEBPACK_IMPORTED_MODULE_1__.addFilter.match(action)) {\n    return [...state, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.defaultFilter)()];\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_1__.removeFilter.match(action)) {\n    return state.slice(0, action.payload).concat(state.slice(action.payload + 1));\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_1__.changeFilter.match(action)) {\n    return state.map((filter, index) => {\n      if (index !== action.payload.index) {\n        return filter;\n      }\n      return action.payload.filter;\n    });\n  }\n  return state;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0ZpbHRlcnNTZXR0aW5nc0VkaXRvci9zdGF0ZS9yZWR1Y2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHOEI7QUFFd0I7QUFFL0MsTUFBTSxVQUFVLENBQUMsUUFBa0IsQ0FBQyxHQUFHLFdBQW1CO0FBQy9ELE1BQUksK0NBQVMsQ0FBQyxNQUFNLE1BQU0sR0FBRztBQUMzQixXQUFPLENBQUMsR0FBRyxPQUFPLHFEQUFhLENBQUMsQ0FBQztBQUFBLEVBQ25DO0FBRUEsTUFBSSxrREFBWSxDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQzlCLFdBQU8sTUFBTSxNQUFNLEdBQUcsT0FBTyxPQUFPLEVBQUUsT0FBTyxNQUFNLE1BQU0sT0FBTyxVQUFVLENBQUMsQ0FBQztBQUFBLEVBQzlFO0FBRUEsTUFBSSxrREFBWSxDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQzlCLFdBQU8sTUFBTSxJQUFJLENBQUMsUUFBUSxVQUFVO0FBQ2xDLFVBQUksVUFBVSxPQUFPLFFBQVEsT0FBTztBQUNsQyxlQUFPO0FBQUEsTUFDVDtBQUVBLGFBQU8sT0FBTyxRQUFRO0FBQUEsSUFDeEIsQ0FBQztBQUFBLEVBQ0g7QUFFQSxTQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvci9TZXR0aW5nc0VkaXRvci9GaWx0ZXJzU2V0dGluZ3NFZGl0b3Ivc3RhdGUvcmVkdWNlci50cz8yOTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjdGlvbiB9IGZyb20gJ3JlZHV4JztcblxuaW1wb3J0IHsgRmlsdGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgZGVmYXVsdEZpbHRlciB9IGZyb20gJy4uL3V0aWxzJztcblxuaW1wb3J0IHsgYWRkRmlsdGVyLCBjaGFuZ2VGaWx0ZXIsIHJlbW92ZUZpbHRlciB9IGZyb20gJy4vYWN0aW9ucyc7XG5cbmV4cG9ydCBjb25zdCByZWR1Y2VyID0gKHN0YXRlOiBGaWx0ZXJbXSA9IFtdLCBhY3Rpb246IEFjdGlvbikgPT4ge1xuICBpZiAoYWRkRmlsdGVyLm1hdGNoKGFjdGlvbikpIHtcbiAgICByZXR1cm4gWy4uLnN0YXRlLCBkZWZhdWx0RmlsdGVyKCldO1xuICB9XG5cbiAgaWYgKHJlbW92ZUZpbHRlci5tYXRjaChhY3Rpb24pKSB7XG4gICAgcmV0dXJuIHN0YXRlLnNsaWNlKDAsIGFjdGlvbi5wYXlsb2FkKS5jb25jYXQoc3RhdGUuc2xpY2UoYWN0aW9uLnBheWxvYWQgKyAxKSk7XG4gIH1cblxuICBpZiAoY2hhbmdlRmlsdGVyLm1hdGNoKGFjdGlvbikpIHtcbiAgICByZXR1cm4gc3RhdGUubWFwKChmaWx0ZXIsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggIT09IGFjdGlvbi5wYXlsb2FkLmluZGV4KSB7XG4gICAgICAgIHJldHVybiBmaWx0ZXI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhY3Rpb24ucGF5bG9hZC5maWx0ZXI7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gc3RhdGU7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/state/reducer.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/utils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultFilter: () => (/* binding */ defaultFilter)\n/* harmony export */ });\n\nconst defaultFilter = () => ({ label: \"\", query: \"*\" });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0ZpbHRlcnNTZXR0aW5nc0VkaXRvci91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUVPLE1BQU0sZ0JBQWdCLE9BQWUsRUFBRSxPQUFPLElBQUksT0FBTyxJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9CdWNrZXRBZ2dyZWdhdGlvbnNFZGl0b3IvU2V0dGluZ3NFZGl0b3IvRmlsdGVyc1NldHRpbmdzRWRpdG9yL3V0aWxzLnRzP2NkZmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmlsdGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdEZpbHRlciA9ICgpOiBGaWx0ZXIgPT4gKHsgbGFiZWw6ICcnLCBxdWVyeTogJyonIH0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/utils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/TermsSettingsEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TermsSettingsEditor: () => (/* binding */ TermsSettingsEditor),\n/* harmony export */   createOrderByOptions: () => (/* binding */ createOrderByOptions)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n/* harmony import */ var _hooks_useCreatableSelectPersistedBehaviour__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/hooks/useCreatableSelectPersistedBehaviour.ts\");\n/* harmony import */ var _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/index.tsx\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst TermsSettingsEditor = ({ bucketAgg }) => {\n  const { metrics } = (0,_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_5__.useQuery)();\n  const orderBy = createOrderByOptions(metrics);\n  const { current: baseId } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqueId)(\"es-terms-\"));\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineField, { label: \"Order\", ...___WEBPACK_IMPORTED_MODULE_9__.inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Select,\n    {\n      inputId: `${baseId}-order`,\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"order\", newValue: e.value })),\n      options: _utils__WEBPACK_IMPORTED_MODULE_8__.orderOptions,\n      value: bucketAgg.settings?.order || _utils__WEBPACK_IMPORTED_MODULE_8__.bucketAggregationConfig.terms.defaultSettings?.order\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineField, { label: \"Size\", ...___WEBPACK_IMPORTED_MODULE_9__.inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Select,\n    {\n      inputId: `${baseId}-size`,\n      ...(0,_hooks_useCreatableSelectPersistedBehaviour__WEBPACK_IMPORTED_MODULE_4__.useCreatableSelectPersistedBehaviour)({\n        options: _utils__WEBPACK_IMPORTED_MODULE_8__.sizeOptions,\n        value: bucketAgg.settings?.size || _utils__WEBPACK_IMPORTED_MODULE_8__.bucketAggregationConfig.terms.defaultSettings?.size,\n        onChange({ value }) {\n          dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"size\", newValue: value }));\n        }\n      })\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineField, { label: \"Min Doc Count\", ...___WEBPACK_IMPORTED_MODULE_9__.inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Input,\n    {\n      id: `${baseId}-min_doc_count`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"min_doc_count\", newValue: e.target.value })\n      ),\n      defaultValue: bucketAgg.settings?.min_doc_count || _utils__WEBPACK_IMPORTED_MODULE_8__.bucketAggregationConfig.terms.defaultSettings?.min_doc_count\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineField, { label: \"Order By\", ...___WEBPACK_IMPORTED_MODULE_9__.inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Select,\n    {\n      inputId: `${baseId}-order_by`,\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"orderBy\", newValue: e.value })),\n      options: orderBy,\n      value: bucketAgg.settings?.orderBy || _utils__WEBPACK_IMPORTED_MODULE_8__.bucketAggregationConfig.terms.defaultSettings?.orderBy\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineField, { label: \"Missing\", ...___WEBPACK_IMPORTED_MODULE_9__.inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Input,\n    {\n      id: `${baseId}-missing`,\n      onBlur: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"missing\", newValue: e.target.value })),\n      defaultValue: bucketAgg.settings?.missing || _utils__WEBPACK_IMPORTED_MODULE_8__.bucketAggregationConfig.terms.defaultSettings?.missing\n    }\n  )));\n};\nfunction createOrderByOptionsForExtendedStats(metric) {\n  if (!metric.meta) {\n    return [];\n  }\n  const metaKeys = Object.keys(metric.meta);\n  return metaKeys.filter((key) => metric.meta?.[key]).map((key) => {\n    let method = key;\n    if (key === \"std_deviation_bounds_lower\") {\n      method = \"std_lower\";\n    }\n    if (key === \"std_deviation_bounds_upper\") {\n      method = \"std_upper\";\n    }\n    return { label: `${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.describeMetric)(metric)} (${method})`, value: `${metric.id}[${method}]` };\n  });\n}\nfunction createOrderByOptionsForPercentiles(metric) {\n  if (!metric.settings?.percents) {\n    return [];\n  }\n  return metric.settings.percents.map((percent) => {\n    const percentString = /^\\d+\\.\\d+/.test(`${percent}`) ? percent : `${percent}.0`;\n    return { label: `${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.describeMetric)(metric)} (${percent})`, value: `${metric.id}[${percentString}]` };\n  });\n}\nfunction isValidOrderTarget(metric) {\n  return (\n    // top metrics can't be used for ordering\n    metric.type !== \"top_metrics\" && // pipeline aggregations can't be used for ordering: https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html#search-aggregations-bucket-terms-aggregation-order\n    !(0,_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_6__.isPipelineAggregation)(metric)\n  );\n}\nconst createOrderByOptions = (metrics = []) => {\n  const metricOptions = metrics.filter(isValidOrderTarget).flatMap((metric) => {\n    if (metric.type === \"extended_stats\") {\n      return createOrderByOptionsForExtendedStats(metric);\n    } else if (metric.type === \"percentiles\") {\n      return createOrderByOptionsForPercentiles(metric);\n    } else {\n      return { label: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.describeMetric)(metric), value: metric.id };\n    }\n  });\n  return [..._utils__WEBPACK_IMPORTED_MODULE_8__.orderByOptions, ...metricOptions];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL1Rlcm1zU2V0dGluZ3NFZGl0b3IudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5QjtBQUNLO0FBR2E7QUFFZjtBQUVHO0FBQ3NCO0FBQzVCO0FBQ2E7QUFDUztBQUNvQztBQUVsRDtBQU0xQixNQUFNLHNCQUFzQixDQUFDLEVBQUUsVUFBVSxNQUFhO0FBQzNELFFBQU0sRUFBRSxRQUFRLElBQUksb0VBQVEsQ0FBQztBQUM3QixRQUFNLFVBQVUscUJBQXFCLE9BQU87QUFDNUMsUUFBTSxFQUFFLFNBQVMsT0FBTyxJQUFJLDZDQUFNLENBQUMsZ0RBQVEsQ0FBQyxXQUFXLENBQUM7QUFFeEQsUUFBTSxXQUFXLHVFQUFXLENBQUM7QUFFN0IsU0FDRSwwSUFDRSwyRUFBQyxxREFBVyxJQUFDLE9BQU0sU0FBUyxHQUFHLCtDQUFnQixJQUM3QztBQUFBLElBQUMsZ0RBQU07QUFBTjtBQUFBLE1BQ0MsU0FBUyxHQUFHO0FBQUEsTUFDWixVQUFVLENBQUMsTUFDVCxTQUFTLDhFQUE4QixDQUFDLEVBQUUsV0FBVyxhQUFhLFNBQVMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQUEsTUFFakcsU0FBUyxnREFBWTtBQUFaLE1BQ1QsT0FBTyxVQUFVLFVBQVUsU0FBUywyREFBdUIsQ0FBQyxNQUFNLGlCQUFpQjtBQUFBO0FBQUEsRUFDckYsQ0FDRixHQUVBLDJFQUFDLHFEQUFXLElBQUMsT0FBTSxRQUFRLEdBQUcsK0NBQWdCLElBQzVDO0FBQUEsSUFBQyxnREFBTTtBQUFOO0FBQUEsTUFDQyxTQUFTLEdBQUc7QUFBQSxNQUVYLEdBQUcsaUhBQW9DLENBQUM7QUFBQSxRQUN2QyxTQUFTLCtDQUFXO0FBQVgsUUFDVCxPQUFPLFVBQVUsVUFBVSxRQUFRLDJE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LEVBQUUsUUFBUSxDQUFDLFdBQVc7QUFDM0UsUUFBSSxPQUFPLFNBQVMsa0JBQWtCO0FBQ3BDLGFBQU8scUNBQXFDLE1BQU07QUFBQSxJQUNwRCxXQUFXLE9BQU8sU0FBUyxlQUFlO0FBQ3hDLGFBQU8sbUNBQW1DLE1BQU07QUFBQSxJQUNsRCxPQUFPO0FBQ0wsYUFBTyxFQUFFLE9BQU8sc0RBQWMsQ0FBQyxNQUFNLEdBQUcsT0FBTyxPQUFPLEdBQUc7QUFBQSxJQUMzRDtBQUFBLEVBQ0YsQ0FBQztBQUNELFNBQU8sQ0FBQyxHQUFHLGtEQUFjLEVBQUUsR0FBRyxhQUFhO0FBQzdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9CdWNrZXRBZ2dyZWdhdGlvbnNFZGl0b3IvU2V0dGluZ3NFZGl0b3IvVGVybXNTZXR0aW5nc0VkaXRvci50c3g/MjFlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBTZWxlY3RhYmxlVmFsdWUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IElubGluZUZpZWxkLCBTZWxlY3QsIElucHV0IH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJy4uLy4uLy4uLy4uL2hvb2tzL3VzZVN0YXRlbGVzc1JlZHVjZXInO1xuaW1wb3J0IHsgTWV0cmljQWdncmVnYXRpb24sIFBlcmNlbnRpbGVzLCBFeHRlbmRlZFN0YXRNZXRhVHlwZSwgRXh0ZW5kZWRTdGF0cywgVGVybXMgfSBmcm9tICcuLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBkZXNjcmliZU1ldHJpYyB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IHVzZUNyZWF0YWJsZVNlbGVjdFBlcnNpc3RlZEJlaGF2aW91ciB9IGZyb20gJy4uLy4uLy4uL2hvb2tzL3VzZUNyZWF0YWJsZVNlbGVjdFBlcnNpc3RlZEJlaGF2aW91cic7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJy4uLy4uL0VsYXN0aWNzZWFyY2hRdWVyeUNvbnRleHQnO1xuaW1wb3J0IHsgaXNQaXBlbGluZUFnZ3JlZ2F0aW9uIH0gZnJvbSAnLi4vLi4vTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL2FnZ3JlZ2F0aW9ucyc7XG5pbXBvcnQgeyBjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvblNldHRpbmcgfSBmcm9tICcuLi9zdGF0ZS9hY3Rpb25zJztcbmltcG9ydCB7IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnLCBvcmRlckJ5T3B0aW9ucywgb3JkZXJPcHRpb25zLCBzaXplT3B0aW9ucyB9IGZyb20gJy4uL3V0aWxzJztcblxuaW1wb3J0IHsgaW5saW5lRmllbGRQcm9wcyB9IGZyb20gJy4nO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBidWNrZXRBZ2c6IFRlcm1zO1xufVxuXG5leHBvcnQgY29uc3QgVGVybXNTZXR0aW5nc0VkaXRvciA9ICh7IGJ1Y2tldEFnZyB9OiBQcm9wcykgPT4ge1xuICBjb25zdCB7IG1ldHJpY3MgfSA9IHVzZVF1ZXJ5KCk7XG4gIGNvbnN0IG9yZGVyQnkgPSBjcmVhdGVPcmRlckJ5T3B0aW9ucyhtZXRyaWNzKTtcbiAgY29uc3QgeyBjdXJyZW50OiBiYXNlSWQgfSA9IHVzZVJlZih1bmlxdWVJZCgnZXMtdGVybXMtJykpO1xuXG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJPcmRlclwiIHsuLi5pbmxpbmVGaWVsZFByb3BzfT5cbiAgICAgICAgPFNlbGVjdFxuICAgICAgICAgIGlucHV0SWQ9e2Ake2Jhc2VJZH0tb3JkZXJgfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT5cbiAgICAgICAgICAgIGRpc3BhdGNoKGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZyh7IGJ1Y2tldEFnZywgc2V0dGluZ05hbWU6ICdvcmRlcicsIG5ld1ZhbHVlOiBlLnZhbHVlIH0pKVxuICAgICAgICAgIH1cbiAgICAgICAgICBvcHRpb25zPXtvcmRlck9wdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e2J1Y2tldEFnZy5zZXR0aW5ncz8ub3JkZXIgfHwgYnVja2V0QWdncmVnYXRpb25Db25maWcudGVybXMuZGVmYXVsdFNldHRpbmdzPy5vcmRlcn1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIlNpemVcIiB7Li4uaW5saW5lRmllbGRQcm9wc30+XG4gICAgICAgIDxTZWxlY3RcbiAgICAgICAgICBpbnB1dElkPXtgJHtiYXNlSWR9LXNpemVgfVxuICAgICAgICAgIC8vIFRPRE86IGlzVmFsaWROZXdPcHRpb24gc2hvdWxkIG9ubHkgYWxsb3cgbnVtYmVycyAmIHRlbXBsYXRlIHZhcmlhYmxlc1xuICAgICAgICAgIHsuLi51c2VDcmVhdGFibGVTZWxlY3RQZXJzaXN0ZWRCZWhhdmlvdXIoe1xuICAgICAgICAgICAgb3B0aW9uczogc2l6ZU9wdGlvbnMsXG4gICAgICAgICAgICB2YWx1ZTogYnVja2V0QWdnLnNldHRpbmdzPy5zaXplIHx8IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnLnRlcm1zLmRlZmF1bHRTZXR0aW5ncz8uc2l6ZSxcbiAgICAgICAgICAgIG9uQ2hhbmdlKHsgdmFsdWUgfSkge1xuICAgICAgICAgICAgICBkaXNwYXRjaChjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvblNldHRpbmcoeyBidWNrZXRBZ2csIHNldHRpbmdOYW1lOiAnc2l6ZScsIG5ld1ZhbHVlOiB2YWx1ZSB9KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pfVxuICAgICAgICAvPlxuICAgICAgPC9JbmxpbmVGaWVsZD5cblxuICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiTWluIERvYyBDb3VudFwiIHsuLi5pbmxpbmVGaWVsZFByb3BzfT5cbiAgICAgICAgPElucHV0XG4gICAgICAgICAgaWQ9e2Ake2Jhc2VJZH0tbWluX2RvY19jb3VudGB9XG4gICAgICAgICAgb25CbHVyPXsoZSkgPT5cbiAgICAgICAgICAgIGRpc3BhdGNoKFxuICAgICAgICAgICAgICBjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvblNldHRpbmcoeyBidWNrZXRBZ2csIHNldHRpbmdOYW1lOiAnbWluX2RvY19jb3VudCcsIG5ld1ZhbHVlOiBlLnRhcmdldC52YWx1ZSB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0VmFsdWU9e1xuICAgICAgICAgICAgYnVja2V0QWdnLnNldHRpbmdzPy5taW5fZG9jX2NvdW50IHx8IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnLnRlcm1zLmRlZmF1bHRTZXR0aW5ncz8ubWluX2RvY19jb3VudFxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIk9yZGVyIEJ5XCIgey4uLmlubGluZUZpZWxkUHJvcHN9PlxuICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgaW5wdXRJZD17YCR7YmFzZUlkfS1vcmRlcl9ieWB9XG4gICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PlxuICAgICAgICAgICAgZGlzcGF0Y2goY2hhbmdlQnVja2V0QWdncmVnYXRpb25TZXR0aW5nKHsgYnVja2V0QWdnLCBzZXR0aW5nTmFtZTogJ29yZGVyQnknLCBuZXdWYWx1ZTogZS52YWx1ZSB9KSlcbiAgICAgICAgICB9XG4gICAgICAgICAgb3B0aW9ucz17b3JkZXJCeX1cbiAgICAgICAgICB2YWx1ZT17YnVja2V0QWdnLnNldHRpbmdzPy5vcmRlckJ5IHx8IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnLnRlcm1zLmRlZmF1bHRTZXR0aW5ncz8ub3JkZXJCeX1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIk1pc3NpbmdcIiB7Li4uaW5saW5lRmllbGRQcm9wc30+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LW1pc3NpbmdgfVxuICAgICAgICAgIG9uQmx1cj17KGUpID0+XG4gICAgICAgICAgICBkaXNwYXRjaChjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvblNldHRpbmcoeyBidWNrZXRBZ2csIHNldHRpbmdOYW1lOiAnbWlzc2luZycsIG5ld1ZhbHVlOiBlLnRhcmdldC52YWx1ZSB9KSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdFZhbHVlPXtidWNrZXRBZ2cuc2V0dGluZ3M/Lm1pc3NpbmcgfHwgYnVja2V0QWdncmVnYXRpb25Db25maWcudGVybXMuZGVmYXVsdFNldHRpbmdzPy5taXNzaW5nfVxuICAgICAgICAvPlxuICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICA8Lz5cbiAgKTtcbn07XG5cbi8qKlxuICogVGhpcyByZXR1cm5zIHRoZSB2YWxpZCBvcHRpb25zIGZvciBlYWNoIG9mIHRoZSBlbmFibGVkIGV4dGVuZGVkIHN0YXRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlT3JkZXJCeU9wdGlvbnNGb3JFeHRlbmRlZFN0YXRzKG1ldHJpYzogRXh0ZW5kZWRTdGF0cyk6IFNlbGVjdGFibGVWYWx1ZTxzdHJpbmc+IHtcbiAgaWYgKCFtZXRyaWMubWV0YSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBtZXRhS2V5cyA9IE9iamVjdC5rZXlzKG1ldHJpYy5tZXRhKSBhcyBFeHRlbmRlZFN0YXRNZXRhVHlwZVtdO1xuICByZXR1cm4gbWV0YUtleXNcbiAgICAuZmlsdGVyKChrZXkpID0+IG1ldHJpYy5tZXRhPy5ba2V5XSlcbiAgICAubWFwKChrZXkpID0+IHtcbiAgICAgIGxldCBtZXRob2QgPSBrZXkgYXMgc3RyaW5nO1xuICAgICAgLy8gVGhlIGJ1Y2tldCBwYXRoIGZvciBzdGRfZGV2aWF0aW9uX2JvdW5kcy5sb3dlciBhbmQgc3RkX2RldmlhdGlvbl9ib3VuZHMudXBwZXJcbiAgICAgIC8vIGlzIGFjY2Vzc2VkIHZpYSBzdGRfbG93ZXIgYW5kIHN0ZF91cHBlciwgcmVzcGVjdGl2ZWx5LlxuICAgICAgaWYgKGtleSA9PT0gJ3N0ZF9kZXZpYXRpb25fYm91bmRzX2xvd2VyJykge1xuICAgICAgICBtZXRob2QgPSAnc3RkX2xvd2VyJztcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09ICdzdGRfZGV2aWF0aW9uX2JvdW5kc191cHBlcicpIHtcbiAgICAgICAgbWV0aG9kID0gJ3N0ZF91cHBlcic7XG4gICAgICB9XG4gICAgICByZXR1cm4geyBsYWJlbDogYCR7ZGVzY3JpYmVNZXRyaWMobWV0cmljKX0gKCR7bWV0aG9kfSlgLCB2YWx1ZTogYCR7bWV0cmljLmlkfVske21ldGhvZH1dYCB9O1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFRoaXMgcmV0dXJucyB0aGUgdmFsaWQgb3B0aW9ucyBmb3IgZWFjaCBvZiB0aGUgcGVyY2VudHMgbGlzdGVkIGluIHRoZSBwZXJjZW50aWxlIHNldHRpbmdzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU9yZGVyQnlPcHRpb25zRm9yUGVyY2VudGlsZXMobWV0cmljOiBQZXJjZW50aWxlcyk6IEFycmF5PFNlbGVjdGFibGVWYWx1ZTxzdHJpbmc+PiB7XG4gIGlmICghbWV0cmljLnNldHRpbmdzPy5wZXJjZW50cykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gbWV0cmljLnNldHRpbmdzLnBlcmNlbnRzLm1hcCgocGVyY2VudCkgPT4ge1xuICAgIC8vIFRoZSBidWNrZXQgcGF0aCBmb3IgcGVyY2VudGlsZSBudW1iZXJzIGlzIGFwcGVuZGVkIHdpdGggYSBgLjBgIGlmIHRoZSBudW1iZXIgaXMgd2hvbGVcbiAgICAvLyBvdGhlcndpc2UgeW91IGhhdmUgdG8gdXNlIHRoZSBhY3R1YWwgdmFsdWUuXG4gICAgY29uc3QgcGVyY2VudFN0cmluZyA9IC9eXFxkK1xcLlxcZCsvLnRlc3QoYCR7cGVyY2VudH1gKSA/IHBlcmNlbnQgOiBgJHtwZXJjZW50fS4wYDtcbiAgICByZXR1cm4geyBsYWJlbDogYCR7ZGVzY3JpYmVNZXRyaWMobWV0cmljKX0gKCR7cGVyY2VudH0pYCwgdmFsdWU6IGAke21ldHJpYy5pZH1bJHtwZXJjZW50U3RyaW5nfV1gIH07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkT3JkZXJUYXJnZXQobWV0cmljOiBNZXRyaWNBZ2dyZWdhdGlvbikge1xuICByZXR1cm4gKFxuICAgIC8vIHRvcCBtZXRyaWNzIGNhbid0IGJlIHVzZWQgZm9yIG9yZGVyaW5nXG4gICAgbWV0cmljLnR5cGUgIT09ICd0b3BfbWV0cmljcycgJiZcbiAgICAvLyBwaXBlbGluZSBhZ2dyZWdhdGlvbnMgY2FuJ3QgYmUgdXNlZCBmb3Igb3JkZXJpbmc6IGh0dHBzOi8vd3d3LmVsYXN0aWMuY28vZ3VpZGUvZW4vZWxhc3RpY3NlYXJjaC9yZWZlcmVuY2UvY3VycmVudC9zZWFyY2gtYWdncmVnYXRpb25zLWJ1Y2tldC10ZXJtcy1hZ2dyZWdhdGlvbi5odG1sI3NlYXJjaC1hZ2dyZWdhdGlvbnMtYnVja2V0LXRlcm1zLWFnZ3JlZ2F0aW9uLW9yZGVyXG4gICAgIWlzUGlwZWxpbmVBZ2dyZWdhdGlvbihtZXRyaWMpXG4gICk7XG59XG5cbi8qKlxuICogVGhpcyBjcmVhdGVzIGFsbCB0aGUgdmFsaWQgb3JkZXIgYnkgb3B0aW9ucyBiYXNlZCBvbiB0aGUgbWV0cmljc1xuICovXG5leHBvcnQgY29uc3QgY3JlYXRlT3JkZXJCeU9wdGlvbnMgPSAobWV0cmljczogTWV0cmljQWdncmVnYXRpb25bXSA9IFtdKTogQXJyYXk8U2VsZWN0YWJsZVZhbHVlPHN0cmluZz4+ID0+IHtcbiAgY29uc3QgbWV0cmljT3B0aW9ucyA9IG1ldHJpY3MuZmlsdGVyKGlzVmFsaWRPcmRlclRhcmdldCkuZmxhdE1hcCgobWV0cmljKSA9PiB7XG4gICAgaWYgKG1ldHJpYy50eXBlID09PSAnZXh0ZW5kZWRfc3RhdHMnKSB7XG4gICAgICByZXR1cm4gY3JlYXRlT3JkZXJCeU9wdGlvbnNGb3JFeHRlbmRlZFN0YXRzKG1ldHJpYyk7XG4gICAgfSBlbHNlIGlmIChtZXRyaWMudHlwZSA9PT0gJ3BlcmNlbnRpbGVzJykge1xuICAgICAgcmV0dXJuIGNyZWF0ZU9yZGVyQnlPcHRpb25zRm9yUGVyY2VudGlsZXMobWV0cmljKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHsgbGFiZWw6IGRlc2NyaWJlTWV0cmljKG1ldHJpYyksIHZhbHVlOiBtZXRyaWMuaWQgfTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gWy4uLm9yZGVyQnlPcHRpb25zLCAuLi5tZXRyaWNPcHRpb25zXTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/TermsSettingsEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/index.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingsEditor: () => (/* binding */ SettingsEditor),\n/* harmony export */   inlineFieldProps: () => (/* binding */ inlineFieldProps)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _SettingsEditorContainer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/SettingsEditorContainer.tsx\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n/* harmony import */ var _DateHistogramSettingsEditor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/DateHistogramSettingsEditor.tsx\");\n/* harmony import */ var _FiltersSettingsEditor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/index.tsx\");\n/* harmony import */ var _TermsSettingsEditor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/TermsSettingsEditor.tsx\");\n/* harmony import */ var _useDescription__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/useDescription.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst inlineFieldProps = {\n  labelWidth: 16\n};\nconst SettingsEditor = ({ bucketAgg }) => {\n  const { current: baseId } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqueId)(\"es-setting-\"));\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n  const settingsDescription = (0,_useDescription__WEBPACK_IMPORTED_MODULE_9__.useDescription)(bucketAgg);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingsEditorContainer__WEBPACK_IMPORTED_MODULE_3__.SettingsEditorContainer, { label: settingsDescription }, bucketAgg.type === \"terms\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_TermsSettingsEditor__WEBPACK_IMPORTED_MODULE_8__.TermsSettingsEditor, { bucketAgg }), bucketAgg.type === \"date_histogram\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_DateHistogramSettingsEditor__WEBPACK_IMPORTED_MODULE_6__.DateHistogramSettingsEditor, { bucketAgg }), bucketAgg.type === \"filters\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_FiltersSettingsEditor__WEBPACK_IMPORTED_MODULE_7__.FiltersSettingsEditor, { bucketAgg }), bucketAgg.type === \"geohash_grid\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineField, { label: \"Precision\", ...inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Input,\n    {\n      id: `${baseId}-geohash_grid-precision`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"precision\", newValue: e.target.value })\n      ),\n      defaultValue: bucketAgg.settings?.precision || _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig[bucketAgg.type].defaultSettings?.precision\n    }\n  )), bucketAgg.type === \"histogram\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineField, { label: \"Interval\", ...inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Input,\n    {\n      id: `${baseId}-histogram-interval`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"interval\", newValue: e.target.value })\n      ),\n      defaultValue: bucketAgg.settings?.interval || _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig[bucketAgg.type].defaultSettings?.interval\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineField, { label: \"Min Doc Count\", ...inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Input,\n    {\n      id: `${baseId}-histogram-min_doc_count`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeBucketAggregationSetting)({ bucketAgg, settingName: \"min_doc_count\", newValue: e.target.value })\n      ),\n      defaultValue: bucketAgg.settings?.min_doc_count || _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig[bucketAgg.type].defaultSettings?.min_doc_count\n    }\n  ))));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5QjtBQUNxQjtBQUVYO0FBRVA7QUFFWTtBQUNPO0FBQ1A7QUFFSTtBQUNOO0FBQ0Y7QUFDTDtBQUV4QixNQUFNLG1CQUFnRTtBQUFBLEVBQzNFLFlBQVk7QUFDZDtBQU1PLE1BQU0saUJBQWlCLENBQUMsRUFBRSxVQUFVLE1BQWE7QUFDdEQsUUFBTSxFQUFFLFNBQVMsT0FBTyxJQUFJLDZDQUFNLENBQUMsZ0RBQVEsQ0FBQyxhQUFhLENBQUM7QUFFMUQsUUFBTSxXQUFXLHVFQUFXLENBQUM7QUFFN0IsUUFBTSxzQkFBc0IsK0RBQWMsQ0FBQyxTQUFTO0FBRXBELFNBQ0UsMkVBQUMsNkVBQXVCLElBQUMsT0FBTyx1QkFDN0IsVUFBVSxTQUFTLFdBQVcsMkVBQUMscUVBQW1CLElBQUMsV0FBc0IsR0FDekUsVUFBVSxTQUFTLG9CQUFvQiwyRUFBQyxxRkFBMkIsSUFBQyxXQUFzQixHQUMxRixVQUFVLFNBQVMsYUFBYSwyRUFBQyx5RUFBcUIsSUFBQyxXQUFzQixHQUU3RSxVQUFVLFNBQVMsa0JBQ2xCLDJFQUFDLHFEQUFXLElBQUMsT0FBTSxhQUFhLEdBQUcsb0JBQ2pDO0FBQUEsSUFBQywrQ0FBSztBQUFMO0FBQUEsTUFDQyxJQUFJLEdBQUc7QUFBQSxNQUNQLFFBQVEsQ0FBQyxNQUNQO0FBQUEsUUFDRSw4RUFBOEIsQ0FBQyxFQUFFLFdBQVcsYUFBYSxhQUFhLFVBQVUsRUFBRSxPQUFPLE1BQU0sQ0FBQztBQUFBLE1BQ2xHO0FBQUEsTUFFRixjQUNFLFVBQVUsVUFBVSxhQUFhLDJEQUF1QixDQUFDLFVBQVUsSUFBSSxFQUFFLGlCQUFpQjtBQUFBO0FBQUEsRUFFOUYsQ0FDRixHQUdELFVBQVUsU0FBUyxlQUNsQiwwSUFDRSwyRUFBQyxxREFBVyxJQUFDLE9BQU0sWUFBWSxHQUFHLG9CQUNoQztBQUFBLElBQUMsK0NBQUs7QUFBTDtBQUFBLE1BQ0MsSUFBSSxHQUFHO0FBQUEsTUFDUCxRQUFRLENBQUMsTUFDUDtBQUFBLFFBQ0UsOEVBQThCLENBQUMsRUFBRSxXQUFXLGFBQWEsWUFBWSxVQUFVLEVBQUUsT0FBTyxNQUFNLENBQUM7QUFBQSxNQUNqRztBQUFBLE1BRUYsY0FDRSxVQUFVLFVBQVUsWUFBWSwyREFBdUIsQ0FBQyxVQUFVLElBQUksRUFBRSxpQkFBaUI7QUFBQTtBQUFBLEVBRTdGLENBQ0YsR0FFQSwyRUFBQyxxREFBVyxJQUFDLE9BQU0saUJBQWlCLEdBQUcsb0JBQ3JDO0FBQUEsSUFBQywrQ0FBSztBQUFMO0FBQUEsTUFDQyxJQUFJLEdBQUc7QUFBQSxNQUNQLFFBQVEsQ0FBQyxNQUNQO0FBQUEsUUFDRSw4RUFBOEIsQ0FBQyxFQUFFLFdBQVcsYUFBYSxpQkFBaUIsVUFBVSxFQUFFLE9BQU8sTUFBTSxDQUFDO0FBQUEsTUFDdEc7QUFBQSxNQUVGLGNBQ0UsVUFBVSxVQUFVLGlCQUNwQiwyREFBdUIsQ0FBQyxVQUFVLElBQUksRUFBRSxpQkFBaUI7QUFBQTtBQUFBLEVBRTdELENBQ0YsQ0FDRixDQUVKO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvci9TZXR0aW5nc0VkaXRvci9pbmRleC50c3g/MWIzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50UHJvcHMsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgSW5saW5lRmllbGQsIElucHV0IH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJy4uLy4uLy4uLy4uL2hvb2tzL3VzZVN0YXRlbGVzc1JlZHVjZXInO1xuaW1wb3J0IHsgQnVja2V0QWdncmVnYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBTZXR0aW5nc0VkaXRvckNvbnRhaW5lciB9IGZyb20gJy4uLy4uL1NldHRpbmdzRWRpdG9yQ29udGFpbmVyJztcbmltcG9ydCB7IGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZyB9IGZyb20gJy4uL3N0YXRlL2FjdGlvbnMnO1xuaW1wb3J0IHsgYnVja2V0QWdncmVnYXRpb25Db25maWcgfSBmcm9tICcuLi91dGlscyc7XG5cbmltcG9ydCB7IERhdGVIaXN0b2dyYW1TZXR0aW5nc0VkaXRvciB9IGZyb20gJy4vRGF0ZUhpc3RvZ3JhbVNldHRpbmdzRWRpdG9yJztcbmltcG9ydCB7IEZpbHRlcnNTZXR0aW5nc0VkaXRvciB9IGZyb20gJy4vRmlsdGVyc1NldHRpbmdzRWRpdG9yJztcbmltcG9ydCB7IFRlcm1zU2V0dGluZ3NFZGl0b3IgfSBmcm9tICcuL1Rlcm1zU2V0dGluZ3NFZGl0b3InO1xuaW1wb3J0IHsgdXNlRGVzY3JpcHRpb24gfSBmcm9tICcuL3VzZURlc2NyaXB0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlubGluZUZpZWxkUHJvcHM6IFBhcnRpYWw8Q29tcG9uZW50UHJvcHM8dHlwZW9mIElubGluZUZpZWxkPj4gPSB7XG4gIGxhYmVsV2lkdGg6IDE2LFxufTtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgYnVja2V0QWdnOiBCdWNrZXRBZ2dyZWdhdGlvbjtcbn1cblxuZXhwb3J0IGNvbnN0IFNldHRpbmdzRWRpdG9yID0gKHsgYnVja2V0QWdnIH06IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgY3VycmVudDogYmFzZUlkIH0gPSB1c2VSZWYodW5pcXVlSWQoJ2VzLXNldHRpbmctJykpO1xuXG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcblxuICBjb25zdCBzZXR0aW5nc0Rlc2NyaXB0aW9uID0gdXNlRGVzY3JpcHRpb24oYnVja2V0QWdnKTtcblxuICByZXR1cm4gKFxuICAgIDxTZXR0aW5nc0VkaXRvckNvbnRhaW5lciBsYWJlbD17c2V0dGluZ3NEZXNjcmlwdGlvbn0+XG4gICAgICB7YnVja2V0QWdnLnR5cGUgPT09ICd0ZXJtcycgJiYgPFRlcm1zU2V0dGluZ3NFZGl0b3IgYnVja2V0QWdnPXtidWNrZXRBZ2d9IC8+fVxuICAgICAge2J1Y2tldEFnZy50eXBlID09PSAnZGF0ZV9oaXN0b2dyYW0nICYmIDxEYXRlSGlzdG9ncmFtU2V0dGluZ3NFZGl0b3IgYnVja2V0QWdnPXtidWNrZXRBZ2d9IC8+fVxuICAgICAge2J1Y2tldEFnZy50eXBlID09PSAnZmlsdGVycycgJiYgPEZpbHRlcnNTZXR0aW5nc0VkaXRvciBidWNrZXRBZ2c9e2J1Y2tldEFnZ30gLz59XG5cbiAgICAgIHtidWNrZXRBZ2cudHlwZSA9PT0gJ2dlb2hhc2hfZ3JpZCcgJiYgKFxuICAgICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJQcmVjaXNpb25cIiB7Li4uaW5saW5lRmllbGRQcm9wc30+XG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICBpZD17YCR7YmFzZUlkfS1nZW9oYXNoX2dyaWQtcHJlY2lzaW9uYH1cbiAgICAgICAgICAgIG9uQmx1cj17KGUpID0+XG4gICAgICAgICAgICAgIGRpc3BhdGNoKFxuICAgICAgICAgICAgICAgIGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZyh7IGJ1Y2tldEFnZywgc2V0dGluZ05hbWU6ICdwcmVjaXNpb24nLCBuZXdWYWx1ZTogZS50YXJnZXQudmFsdWUgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgYnVja2V0QWdnLnNldHRpbmdzPy5wcmVjaXNpb24gfHwgYnVja2V0QWdncmVnYXRpb25Db25maWdbYnVja2V0QWdnLnR5cGVdLmRlZmF1bHRTZXR0aW5ncz8ucHJlY2lzaW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICl9XG5cbiAgICAgIHtidWNrZXRBZ2cudHlwZSA9PT0gJ2hpc3RvZ3JhbScgJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIkludGVydmFsXCIgey4uLmlubGluZUZpZWxkUHJvcHN9PlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LWhpc3RvZ3JhbS1pbnRlcnZhbGB9XG4gICAgICAgICAgICAgIG9uQmx1cj17KGUpID0+XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvblNldHRpbmcoeyBidWNrZXRBZ2csIHNldHRpbmdOYW1lOiAnaW50ZXJ2YWwnLCBuZXdWYWx1ZTogZS50YXJnZXQudmFsdWUgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICBidWNrZXRBZ2cuc2V0dGluZ3M/LmludGVydmFsIHx8IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnW2J1Y2tldEFnZy50eXBlXS5kZWZhdWx0U2V0dGluZ3M/LmludGVydmFsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9JbmxpbmVGaWVsZD5cblxuICAgICAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIk1pbiBEb2MgQ291bnRcIiB7Li4uaW5saW5lRmllbGRQcm9wc30+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgaWQ9e2Ake2Jhc2VJZH0taGlzdG9ncmFtLW1pbl9kb2NfY291bnRgfVxuICAgICAgICAgICAgICBvbkJsdXI9eyhlKSA9PlxuICAgICAgICAgICAgICAgIGRpc3BhdGNoKFxuICAgICAgICAgICAgICAgICAgY2hhbmdlQnVja2V0QWdncmVnYXRpb25TZXR0aW5nKHsgYnVja2V0QWdnLCBzZXR0aW5nTmFtZTogJ21pbl9kb2NfY291bnQnLCBuZXdWYWx1ZTogZS50YXJnZXQudmFsdWUgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICBidWNrZXRBZ2cuc2V0dGluZ3M/Lm1pbl9kb2NfY291bnQgfHxcbiAgICAgICAgICAgICAgICBidWNrZXRBZ2dyZWdhdGlvbkNvbmZpZ1tidWNrZXRBZ2cudHlwZV0uZGVmYXVsdFNldHRpbmdzPy5taW5fZG9jX2NvdW50XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgIDwvU2V0dGluZ3NFZGl0b3JDb250YWluZXI+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/index.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/useDescription.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDescription: () => (/* binding */ useDescription)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n/* harmony import */ var _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n\n\n\n\nconst hasValue = (value) => (object) => object.value === value;\nconst useDescription = (bucketAgg) => {\n  const { metrics } = (0,_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_1__.useQuery)();\n  switch (bucketAgg.type) {\n    case \"terms\": {\n      const order = bucketAgg.settings?.order || \"desc\";\n      const size = bucketAgg.settings?.size || \"10\";\n      const minDocCount = parseInt(bucketAgg.settings?.min_doc_count || \"0\", 10);\n      const orderBy = bucketAgg.settings?.orderBy || \"_term\";\n      let description = \"\";\n      if (size !== \"0\") {\n        const orderLabel = _utils__WEBPACK_IMPORTED_MODULE_2__.orderOptions.find(hasValue(order))?.label;\n        description = `${orderLabel} ${size}, `;\n      }\n      if (minDocCount > 0) {\n        description += `Min Doc Count: ${minDocCount}, `;\n      }\n      description += \"Order by: \";\n      const orderByOption = _utils__WEBPACK_IMPORTED_MODULE_2__.orderByOptions.find(hasValue(orderBy));\n      if (orderByOption) {\n        description += orderByOption.label;\n      } else {\n        const metric = metrics?.find((m) => m.id === (0,_utils__WEBPACK_IMPORTED_MODULE_0__.convertOrderByToMetricId)(orderBy));\n        if (metric) {\n          description += (0,_utils__WEBPACK_IMPORTED_MODULE_0__.describeMetric)(metric);\n        } else {\n          description += \"metric not found\";\n        }\n      }\n      if (size === \"0\") {\n        description += ` (${order})`;\n      }\n      return description;\n    }\n    case \"histogram\": {\n      const interval = bucketAgg.settings?.interval || \"1000\";\n      const minDocCount = parseInt(bucketAgg.settings?.min_doc_count || \"1\", 10);\n      return `Interval: ${interval}${minDocCount > 0 ? `, Min Doc Count: ${minDocCount}` : \"\"}`;\n    }\n    case \"filters\": {\n      const filters = bucketAgg.settings?.filters || _utils__WEBPACK_IMPORTED_MODULE_2__.bucketAggregationConfig[\"filters\"].defaultSettings?.filters;\n      return `Filter Queries (${filters.length})`;\n    }\n    case \"geohash_grid\": {\n      const precision = Math.max(Math.min(parseInt(bucketAgg.settings?.precision || \"5\", 10), 12), 1);\n      return `Precision: ${precision}`;\n    }\n    case \"date_histogram\": {\n      const interval = bucketAgg.settings?.interval || \"auto\";\n      const minDocCount = parseInt(bucketAgg.settings?.min_doc_count || \"0\", 10);\n      const trimEdges = parseInt(bucketAgg.settings?.trimEdges || \"0\", 10);\n      let description = `Interval: ${interval}`;\n      if (minDocCount > 0) {\n        description += `, Min Doc Count: ${minDocCount}`;\n      }\n      if (trimEdges > 0) {\n        description += `, Trim edges: ${trimEdges}`;\n      }\n      return description;\n    }\n    default:\n      return \"Settings\";\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL3VzZURlc2NyaXB0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ3lEO0FBQ2hDO0FBQzZDO0FBRXRFLE1BQU0sV0FBVyxDQUFDLFVBQWtCLENBQUMsV0FBK0IsT0FBTyxVQUFVO0FBTTlFLE1BQU0saUJBQWlCLENBQUMsY0FBeUM7QUFDdEUsUUFBTSxFQUFFLFFBQVEsSUFBSSxvRUFBUSxDQUFDO0FBRTdCLFVBQVEsVUFBVSxNQUFNO0FBQUEsSUFDdEIsS0FBSyxTQUFTO0FBQ1osWUFBTSxRQUFRLFVBQVUsVUFBVSxTQUFTO0FBQzNDLFlBQU0sT0FBTyxVQUFVLFVBQVUsUUFBUTtBQUN6QyxZQUFNLGNBQWMsU0FBUyxVQUFVLFVBQVUsaUJBQWlCLEtBQUssRUFBRTtBQUN6RSxZQUFNLFVBQVUsVUFBVSxVQUFVLFdBQVc7QUFDL0MsVUFBSSxjQUFjO0FBRWxCLFVBQUksU0FBUyxLQUFLO0FBQ2hCLGNBQU0sYUFBYSxnREFBWSxDQUFDLEtBQUssU0FBUyxLQUFLLENBQUMsR0FBRztBQUN2RCxzQkFBYyxHQUFHLGNBQWM7QUFBQSxNQUNqQztBQUVBLFVBQUksY0FBYyxHQUFHO0FBQ25CLHVCQUFlLGtCQUFrQjtBQUFBLE1BQ25DO0FBRUEscUJBQWU7QUFDZixZQUFNLGdCQUFnQixrREFBYyxDQUFDLEtBQUssU0FBUyxPQUFPLENBQUM7QUFDM0QsVUFBSSxlQUFlO0FBQ2pCLHVCQUFlLGNBQWM7QUFBQSxNQUMvQixPQUFPO0FBQ0wsY0FBTSxTQUFTLFNBQVMsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLGdFQUF3QixDQUFDLE9BQU8sQ0FBQztBQUM5RSxZQUFJLFFBQVE7QUFDVix5QkFBZSxzREFBYyxDQUFDLE1BQU07QUFBQSxRQUN0QyxPQUFPO0FBQ0wseUJBQWU7QUFBQSxRQUNqQjtBQUFBLE1BQ0Y7QUFFQSxVQUFJLFNBQVMsS0FBSztBQUNoQix1QkFBZSxLQUFLO0FBQUEsTUFDdEI7QUFDQSxhQUFPO0FBQUEsSUFDVDtBQUFBLElBRUEsS0FBSyxhQUFhO0FBQ2hCLFlBQU0sV0FBVyxVQUFVLFVBQVUsWUFBWTtBQUNqRCxZQUFNLGNBQWMsU0FBUyxVQUFVLFVBQVUsaUJBQWlCLEtBQUssRUFBRTtBQUV6RSxhQUFPLGFBQWEsV0FBVyxjQUFjLElBQUksb0JBQW9CLGdCQUFnQjtBQUFBLElBQ3ZGO0FBQUEsSUFFQSxLQUFLLFdBQVc7QUFDZCxZQUFNLFVBQVUsVUFBVSxVQUFVLFdBQVcsMkRBQXVCLENBQUMsU0FBUyxFQUFFLGlCQUFpQjtBQUNuRyxhQUFPLG1CQUFtQixRQUFTO0FBQUEsSUFDckM7QUFBQSxJQUVBLEtBQUssZ0JBQWdCO0FBQ25CLFlBQU0sWUFBWSxLQUFLLElBQUksS0FBSyxJQUFJLFNBQVMsVUFBVSxVQUFVLGFBQWEsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7QUFDOUYsYUFBTyxjQUFjO0FBQUEsSUFDdkI7QUFBQSxJQUVBLEtBQUssa0JBQWtCO0FBQ3JCLFlBQU0sV0FBVyxVQUFVLFVBQVUsWUFBWTtBQUNqRCxZQUFNLGNBQWMsU0FBUyxVQUFVLFVBQVUsaUJBQWlCLEtBQUssRUFBRTtBQUN6RSxZQUFNLFlBQVksU0FBUyxVQUFVLFVBQVUsYUFBYSxLQUFLLEVBQUU7QUFFbkUsVUFBSSxjQUFjLGFBQWE7QUFFL0IsVUFBSSxjQUFjLEdBQUc7QUFDbkIsdUJBQWUsb0JBQW9CO0FBQUEsTUFDckM7QUFFQSxVQUFJLFlBQVksR0FBRztBQUNqQix1QkFBZSxpQkFBaUI7QUFBQSxNQUNsQztBQUVBLGFBQU87QUFBQSxJQUNUO0FBQUEsSUFFQTtBQUNFLGFBQU87QUFBQSxFQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvci9TZXR0aW5nc0VkaXRvci91c2VEZXNjcmlwdGlvbi50cz9kMDBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJ1Y2tldEFnZ3JlZ2F0aW9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgZGVzY3JpYmVNZXRyaWMsIGNvbnZlcnRPcmRlckJ5VG9NZXRyaWNJZCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IHVzZVF1ZXJ5IH0gZnJvbSAnLi4vLi4vRWxhc3RpY3NlYXJjaFF1ZXJ5Q29udGV4dCc7XG5pbXBvcnQgeyBidWNrZXRBZ2dyZWdhdGlvbkNvbmZpZywgb3JkZXJCeU9wdGlvbnMsIG9yZGVyT3B0aW9ucyB9IGZyb20gJy4uL3V0aWxzJztcblxuY29uc3QgaGFzVmFsdWUgPSAodmFsdWU6IHN0cmluZykgPT4gKG9iamVjdDogeyB2YWx1ZT86IHN0cmluZyB9KSA9PiBvYmplY3QudmFsdWUgPT09IHZhbHVlO1xuXG4vLyBGSVhNRTogV2Ugc2hvdWxkIGFwcGx5IHRoZSBzYW1lIGRlZmF1bHRzIHdlIGhhdmUgaW4gYnVja2V0QWdncmVnYXRpb25zQ29uZmlnIGhlcmUgaW5zdGVhZCBvZiBcImN1c3RvbVwiIHZhbHVlc1xuLy8gYXMgdGhleSBtaWdodCBnZXQgb3V0IG9mIHN5bmMuXG4vLyBUaGUgcmVhc29uIHdlIG5lZWQgdGhlbSBpcyB0aGF0IGV2ZW4gdGhvdWdoIGFmdGVyIHRoZSByZWZhY3RvcmluZyBlYWNoIHNldHRpbmcgaXMgY3JlYXRlZCB3aXRoIGl0cyBkZWZhdWx0IHZhbHVlLFxuLy8gcXVlcmllcyBjcmVhdGVkIHdpdGggdGhlIG9sZCB2ZXJzaW9uIG1pZ2h0IG5vdCBoYXZlIHRoZW0uXG5leHBvcnQgY29uc3QgdXNlRGVzY3JpcHRpb24gPSAoYnVja2V0QWdnOiBCdWNrZXRBZ2dyZWdhdGlvbik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHsgbWV0cmljcyB9ID0gdXNlUXVlcnkoKTtcblxuICBzd2l0Y2ggKGJ1Y2tldEFnZy50eXBlKSB7XG4gICAgY2FzZSAndGVybXMnOiB7XG4gICAgICBjb25zdCBvcmRlciA9IGJ1Y2tldEFnZy5zZXR0aW5ncz8ub3JkZXIgfHwgJ2Rlc2MnO1xuICAgICAgY29uc3Qgc2l6ZSA9IGJ1Y2tldEFnZy5zZXR0aW5ncz8uc2l6ZSB8fCAnMTAnO1xuICAgICAgY29uc3QgbWluRG9jQ291bnQgPSBwYXJzZUludChidWNrZXRBZ2cuc2V0dGluZ3M/Lm1pbl9kb2NfY291bnQgfHwgJzAnLCAxMCk7XG4gICAgICBjb25zdCBvcmRlckJ5ID0gYnVja2V0QWdnLnNldHRpbmdzPy5vcmRlckJ5IHx8ICdfdGVybSc7XG4gICAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcblxuICAgICAgaWYgKHNpemUgIT09ICcwJykge1xuICAgICAgICBjb25zdCBvcmRlckxhYmVsID0gb3JkZXJPcHRpb25zLmZpbmQoaGFzVmFsdWUob3JkZXIpKT8ubGFiZWwhO1xuICAgICAgICBkZXNjcmlwdGlvbiA9IGAke29yZGVyTGFiZWx9ICR7c2l6ZX0sIGA7XG4gICAgICB9XG5cbiAgICAgIGlmIChtaW5Eb2NDb3VudCA+IDApIHtcbiAgICAgICAgZGVzY3JpcHRpb24gKz0gYE1pbiBEb2MgQ291bnQ6ICR7bWluRG9jQ291bnR9LCBgO1xuICAgICAgfVxuXG4gICAgICBkZXNjcmlwdGlvbiArPSAnT3JkZXIgYnk6ICc7XG4gICAgICBjb25zdCBvcmRlckJ5T3B0aW9uID0gb3JkZXJCeU9wdGlvbnMuZmluZChoYXNWYWx1ZShvcmRlckJ5KSk7XG4gICAgICBpZiAob3JkZXJCeU9wdGlvbikge1xuICAgICAgICBkZXNjcmlwdGlvbiArPSBvcmRlckJ5T3B0aW9uLmxhYmVsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbWV0cmljID0gbWV0cmljcz8uZmluZCgobSkgPT4gbS5pZCA9PT0gY29udmVydE9yZGVyQnlUb01ldHJpY0lkKG9yZGVyQnkpKTtcbiAgICAgICAgaWYgKG1ldHJpYykge1xuICAgICAgICAgIGRlc2NyaXB0aW9uICs9IGRlc2NyaWJlTWV0cmljKG1ldHJpYyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVzY3JpcHRpb24gKz0gJ21ldHJpYyBub3QgZm91bmQnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzaXplID09PSAnMCcpIHtcbiAgICAgICAgZGVzY3JpcHRpb24gKz0gYCAoJHtvcmRlcn0pYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBjYXNlICdoaXN0b2dyYW0nOiB7XG4gICAgICBjb25zdCBpbnRlcnZhbCA9IGJ1Y2tldEFnZy5zZXR0aW5ncz8uaW50ZXJ2YWwgfHwgJzEwMDAnO1xuICAgICAgY29uc3QgbWluRG9jQ291bnQgPSBwYXJzZUludChidWNrZXRBZ2cuc2V0dGluZ3M/Lm1pbl9kb2NfY291bnQgfHwgJzEnLCAxMCk7XG5cbiAgICAgIHJldHVybiBgSW50ZXJ2YWw6ICR7aW50ZXJ2YWx9JHttaW5Eb2NDb3VudCA+IDAgPyBgLCBNaW4gRG9jIENvdW50OiAke21pbkRvY0NvdW50fWAgOiAnJ31gO1xuICAgIH1cblxuICAgIGNhc2UgJ2ZpbHRlcnMnOiB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0gYnVja2V0QWdnLnNldHRpbmdzPy5maWx0ZXJzIHx8IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnWydmaWx0ZXJzJ10uZGVmYXVsdFNldHRpbmdzPy5maWx0ZXJzO1xuICAgICAgcmV0dXJuIGBGaWx0ZXIgUXVlcmllcyAoJHtmaWx0ZXJzIS5sZW5ndGh9KWA7XG4gICAgfVxuXG4gICAgY2FzZSAnZ2VvaGFzaF9ncmlkJzoge1xuICAgICAgY29uc3QgcHJlY2lzaW9uID0gTWF0aC5tYXgoTWF0aC5taW4ocGFyc2VJbnQoYnVja2V0QWdnLnNldHRpbmdzPy5wcmVjaXNpb24gfHwgJzUnLCAxMCksIDEyKSwgMSk7XG4gICAgICByZXR1cm4gYFByZWNpc2lvbjogJHtwcmVjaXNpb259YDtcbiAgICB9XG5cbiAgICBjYXNlICdkYXRlX2hpc3RvZ3JhbSc6IHtcbiAgICAgIGNvbnN0IGludGVydmFsID0gYnVja2V0QWdnLnNldHRpbmdzPy5pbnRlcnZhbCB8fCAnYXV0byc7XG4gICAgICBjb25zdCBtaW5Eb2NDb3VudCA9IHBhcnNlSW50KGJ1Y2tldEFnZy5zZXR0aW5ncz8ubWluX2RvY19jb3VudCB8fCAnMCcsIDEwKTtcbiAgICAgIGNvbnN0IHRyaW1FZGdlcyA9IHBhcnNlSW50KGJ1Y2tldEFnZy5zZXR0aW5ncz8udHJpbUVkZ2VzIHx8ICcwJywgMTApO1xuXG4gICAgICBsZXQgZGVzY3JpcHRpb24gPSBgSW50ZXJ2YWw6ICR7aW50ZXJ2YWx9YDtcblxuICAgICAgaWYgKG1pbkRvY0NvdW50ID4gMCkge1xuICAgICAgICBkZXNjcmlwdGlvbiArPSBgLCBNaW4gRG9jIENvdW50OiAke21pbkRvY0NvdW50fWA7XG4gICAgICB9XG5cbiAgICAgIGlmICh0cmltRWRnZXMgPiAwKSB7XG4gICAgICAgIGRlc2NyaXB0aW9uICs9IGAsIFRyaW0gZWRnZXM6ICR7dHJpbUVkZ2VzfWA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdTZXR0aW5ncyc7XG4gIH1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/useDescription.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/aggregations.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUCKET_AGGREGATION_TYPES: () => (/* binding */ BUCKET_AGGREGATION_TYPES),\n/* harmony export */   isBucketAggregationType: () => (/* binding */ isBucketAggregationType),\n/* harmony export */   isBucketAggregationWithField: () => (/* binding */ isBucketAggregationWithField)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n\n\nconst isBucketAggregationWithField = (bucketAgg) => _utils__WEBPACK_IMPORTED_MODULE_0__.bucketAggregationConfig[bucketAgg.type].requiresField;\nconst BUCKET_AGGREGATION_TYPES = [\n  \"date_histogram\",\n  \"histogram\",\n  \"terms\",\n  \"filters\",\n  \"geohash_grid\",\n  \"nested\"\n];\nconst isBucketAggregationType = (s) => BUCKET_AGGREGATION_TYPES.includes(s);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL2FnZ3JlZ2F0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUV3QztBQUVqQyxNQUFNLCtCQUErQixDQUMxQyxjQUM0QywyREFBdUIsQ0FBQyxVQUFVLElBQUksRUFBRTtBQUUvRSxNQUFNLDJCQUFvRDtBQUFBLEVBQy9EO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRjtBQUVPLE1BQU0sMEJBQTBCLENBQUMsTUFDdEMseUJBQXlCLFNBQVMsQ0FBMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvci9hZ2dyZWdhdGlvbnMudHM/ZTJlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCdWNrZXRBZ2dyZWdhdGlvblR5cGUsIEJ1Y2tldEFnZ3JlZ2F0aW9uV2l0aEZpZWxkLCBCdWNrZXRBZ2dyZWdhdGlvbiB9IGZyb20gJy4uLy4uLy4uL3R5cGVzJztcblxuaW1wb3J0IHsgYnVja2V0QWdncmVnYXRpb25Db25maWcgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IGlzQnVja2V0QWdncmVnYXRpb25XaXRoRmllbGQgPSAoXG4gIGJ1Y2tldEFnZzogQnVja2V0QWdncmVnYXRpb24gfCBCdWNrZXRBZ2dyZWdhdGlvbldpdGhGaWVsZFxuKTogYnVja2V0QWdnIGlzIEJ1Y2tldEFnZ3JlZ2F0aW9uV2l0aEZpZWxkID0+IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnW2J1Y2tldEFnZy50eXBlXS5yZXF1aXJlc0ZpZWxkO1xuXG5leHBvcnQgY29uc3QgQlVDS0VUX0FHR1JFR0FUSU9OX1RZUEVTOiBCdWNrZXRBZ2dyZWdhdGlvblR5cGVbXSA9IFtcbiAgJ2RhdGVfaGlzdG9ncmFtJyxcbiAgJ2hpc3RvZ3JhbScsXG4gICd0ZXJtcycsXG4gICdmaWx0ZXJzJyxcbiAgJ2dlb2hhc2hfZ3JpZCcsXG4gICduZXN0ZWQnLFxuXTtcblxuZXhwb3J0IGNvbnN0IGlzQnVja2V0QWdncmVnYXRpb25UeXBlID0gKHM6IEJ1Y2tldEFnZ3JlZ2F0aW9uVHlwZSB8IHN0cmluZyk6IHMgaXMgQnVja2V0QWdncmVnYXRpb25UeXBlID0+XG4gIEJVQ0tFVF9BR0dSRUdBVElPTl9UWVBFUy5pbmNsdWRlcyhzIGFzIEJ1Y2tldEFnZ3JlZ2F0aW9uVHlwZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/aggregations.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/index.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BucketAggregationsEditor: () => (/* binding */ BucketAggregationsEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _QueryEditorRow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryEditorRow.tsx\");\n/* harmony import */ var _BucketAggregationEditor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/BucketAggregationEditor.tsx\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts\");\n\n\n\n\n\n\n\n\nconst BucketAggregationsEditor = ({ nextId }) => {\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__.useDispatch)();\n  const { bucketAggs } = (0,_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_2__.useQuery)();\n  const totalBucketAggs = bucketAggs?.length || 0;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, bucketAggs.map((bucketAgg, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _QueryEditorRow__WEBPACK_IMPORTED_MODULE_3__.QueryEditorRow,\n    {\n      key: `${bucketAgg.type}-${bucketAgg.id}`,\n      label: index === 0 ? \"Group By\" : \"Then By\",\n      onRemoveClick: totalBucketAggs > 1 && (() => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.removeBucketAggregation)(bucketAgg.id)))\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_BucketAggregationEditor__WEBPACK_IMPORTED_MODULE_4__.BucketAggregationEditor, { value: bucketAgg }),\n    index === 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Button,\n      {\n        variant: \"secondary\",\n        fill: \"text\",\n        icon: \"plus\",\n        onClick: () => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.addBucketAggregation)(nextId)),\n        tooltip: \"Add grouping condition\",\n        \"aria-label\": \"Add grouping condition\"\n      }\n    )\n  )));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWtCO0FBRUs7QUFFSztBQUNIO0FBQ007QUFHUztBQUNzQjtBQU12RCxNQUFNLDJCQUEyQixDQUFDLEVBQUUsT0FBTyxNQUFhO0FBQzdELFFBQU0sV0FBVyx1RUFBVyxDQUFDO0FBQzdCLFFBQU0sRUFBRSxXQUFXLElBQUksb0VBQVEsQ0FBQztBQUNoQyxRQUFNLGtCQUFrQixZQUFZLFVBQVU7QUFFOUMsU0FDRSwwSUFDRyxXQUFZLElBQUksQ0FBQyxXQUFXLFVBQzNCO0FBQUEsSUFBQywyREFBYztBQUFkO0FBQUEsTUFDQyxLQUFLLEdBQUcsVUFBVSxRQUFRLFVBQVU7QUFBQSxNQUNwQyxPQUFPLFVBQVUsSUFBSSxhQUFhO0FBQUEsTUFDbEMsZUFBZSxrQkFBa0IsTUFBTSxNQUFNLFNBQVMsdUVBQXVCLENBQUMsVUFBVSxFQUFFLENBQUM7QUFBQTtBQUFBLElBRTNGLDJFQUFDLDZFQUF1QixJQUFDLE9BQU8sV0FBVztBQUFBLElBRTFDLFVBQVUsS0FDVDtBQUFBLE1BQUMsK0NBQU07QUFBTjtBQUFBLFFBQ0MsU0FBUTtBQUFBLFFBQ1IsTUFBSztBQUFBLFFBQ0wsTUFBSztBQUFBLFFBQ0wsU0FBUyxNQUFNLFNBQVMsb0VBQW9CLENBQUMsTUFBTSxDQUFDO0FBQUEsUUFDcEQsU0FBUTtBQUFBLFFBQ1IsY0FBVztBQUFBO0FBQUEsSUFDYjtBQUFBLEVBRUosQ0FDRCxDQUNIO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvci9pbmRleC50c3g/ZDkzZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlU3RhdGVsZXNzUmVkdWNlcic7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJy4uL0VsYXN0aWNzZWFyY2hRdWVyeUNvbnRleHQnO1xuaW1wb3J0IHsgUXVlcnlFZGl0b3JSb3cgfSBmcm9tICcuLi9RdWVyeUVkaXRvclJvdyc7XG5cbmltcG9ydCB7IEJ1Y2tldEFnZ3JlZ2F0aW9uIH0gZnJvbSAnLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBCdWNrZXRBZ2dyZWdhdGlvbkVkaXRvciB9IGZyb20gJy4vQnVja2V0QWdncmVnYXRpb25FZGl0b3InO1xuaW1wb3J0IHsgYWRkQnVja2V0QWdncmVnYXRpb24sIHJlbW92ZUJ1Y2tldEFnZ3JlZ2F0aW9uIH0gZnJvbSAnLi9zdGF0ZS9hY3Rpb25zJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgbmV4dElkOiBCdWNrZXRBZ2dyZWdhdGlvblsnaWQnXTtcbn1cblxuZXhwb3J0IGNvbnN0IEJ1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvciA9ICh7IG5leHRJZCB9OiBQcm9wcykgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IHsgYnVja2V0QWdncyB9ID0gdXNlUXVlcnkoKTtcbiAgY29uc3QgdG90YWxCdWNrZXRBZ2dzID0gYnVja2V0QWdncz8ubGVuZ3RoIHx8IDA7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAge2J1Y2tldEFnZ3MhLm1hcCgoYnVja2V0QWdnLCBpbmRleCkgPT4gKFxuICAgICAgICA8UXVlcnlFZGl0b3JSb3dcbiAgICAgICAgICBrZXk9e2Ake2J1Y2tldEFnZy50eXBlfS0ke2J1Y2tldEFnZy5pZH1gfVxuICAgICAgICAgIGxhYmVsPXtpbmRleCA9PT0gMCA/ICdHcm91cCBCeScgOiAnVGhlbiBCeSd9XG4gICAgICAgICAgb25SZW1vdmVDbGljaz17dG90YWxCdWNrZXRBZ2dzID4gMSAmJiAoKCkgPT4gZGlzcGF0Y2gocmVtb3ZlQnVja2V0QWdncmVnYXRpb24oYnVja2V0QWdnLmlkKSkpfVxuICAgICAgICA+XG4gICAgICAgICAgPEJ1Y2tldEFnZ3JlZ2F0aW9uRWRpdG9yIHZhbHVlPXtidWNrZXRBZ2d9IC8+XG5cbiAgICAgICAgICB7aW5kZXggPT09IDAgJiYgKFxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgZmlsbD1cInRleHRcIlxuICAgICAgICAgICAgICBpY29uPVwicGx1c1wiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGRpc3BhdGNoKGFkZEJ1Y2tldEFnZ3JlZ2F0aW9uKG5leHRJZCkpfVxuICAgICAgICAgICAgICB0b29sdGlwPVwiQWRkIGdyb3VwaW5nIGNvbmRpdGlvblwiXG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJBZGQgZ3JvdXBpbmcgY29uZGl0aW9uXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9RdWVyeUVkaXRvclJvdz5cbiAgICAgICkpfVxuICAgIDwvPlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/index.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addBucketAggregation: () => (/* binding */ addBucketAggregation),\n/* harmony export */   changeBucketAggregationField: () => (/* binding */ changeBucketAggregationField),\n/* harmony export */   changeBucketAggregationSetting: () => (/* binding */ changeBucketAggregationSetting),\n/* harmony export */   changeBucketAggregationType: () => (/* binding */ changeBucketAggregationType),\n/* harmony export */   removeBucketAggregation: () => (/* binding */ removeBucketAggregation)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@reduxjs-toolkit-virtual-75570b104b/0/cache/@reduxjs-toolkit-npm-1.9.3-cbad5da1de-d965fc6197.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js\");\n\n\nconst addBucketAggregation = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@bucketAggs/add\");\nconst removeBucketAggregation = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@bucketAggs/remove\");\nconst changeBucketAggregationType = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@bucketAggs/change_type\");\nconst changeBucketAggregationField = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@bucketAggs/change_field\");\nconst changeBucketAggregationSetting = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@bucketAggs/change_setting\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL3N0YXRlL2FjdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE2QjtBQUl0QixNQUFNLHVCQUF1Qiw4REFBWSxDQUEwQixpQkFBaUI7QUFDcEYsTUFBTSwwQkFBMEIsOERBQVksQ0FBMEIsb0JBQW9CO0FBQzFGLE1BQU0sOEJBQThCLDhEQUFZLENBR3BELHlCQUF5QjtBQUNyQixNQUFNLCtCQUErQiw4REFBWSxDQUdyRCwwQkFBMEI7QUFDdEIsTUFBTSxpQ0FBaUMsOERBQVksQ0FJdkQsNEJBQTRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9CdWNrZXRBZ2dyZWdhdGlvbnNFZGl0b3Ivc3RhdGUvYWN0aW9ucy50cz9lZDkxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFjdGlvbiB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuXG5pbXBvcnQgeyBCdWNrZXRBZ2dyZWdhdGlvbiwgQnVja2V0QWdncmVnYXRpb25UeXBlLCBCdWNrZXRBZ2dyZWdhdGlvbldpdGhGaWVsZCB9IGZyb20gJy4uLy4uLy4uLy4uL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGFkZEJ1Y2tldEFnZ3JlZ2F0aW9uID0gY3JlYXRlQWN0aW9uPEJ1Y2tldEFnZ3JlZ2F0aW9uWydpZCddPignQGJ1Y2tldEFnZ3MvYWRkJyk7XG5leHBvcnQgY29uc3QgcmVtb3ZlQnVja2V0QWdncmVnYXRpb24gPSBjcmVhdGVBY3Rpb248QnVja2V0QWdncmVnYXRpb25bJ2lkJ10+KCdAYnVja2V0QWdncy9yZW1vdmUnKTtcbmV4cG9ydCBjb25zdCBjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvblR5cGUgPSBjcmVhdGVBY3Rpb248e1xuICBpZDogQnVja2V0QWdncmVnYXRpb25bJ2lkJ107XG4gIG5ld1R5cGU6IEJ1Y2tldEFnZ3JlZ2F0aW9uVHlwZTtcbn0+KCdAYnVja2V0QWdncy9jaGFuZ2VfdHlwZScpO1xuZXhwb3J0IGNvbnN0IGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uRmllbGQgPSBjcmVhdGVBY3Rpb248e1xuICBpZDogQnVja2V0QWdncmVnYXRpb25bJ2lkJ107XG4gIG5ld0ZpZWxkOiBCdWNrZXRBZ2dyZWdhdGlvbldpdGhGaWVsZFsnZmllbGQnXTtcbn0+KCdAYnVja2V0QWdncy9jaGFuZ2VfZmllbGQnKTtcbmV4cG9ydCBjb25zdCBjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvblNldHRpbmcgPSBjcmVhdGVBY3Rpb248e1xuICBidWNrZXRBZ2c6IEJ1Y2tldEFnZ3JlZ2F0aW9uO1xuICBzZXR0aW5nTmFtZTogc3RyaW5nO1xuICBuZXdWYWx1ZTogYW55O1xufT4oJ0BidWNrZXRBZ2dzL2NoYW5nZV9zZXR0aW5nJyk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/reducer.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createReducer: () => (/* binding */ createReducer)\n/* harmony export */ });\n/* harmony import */ var _queryDef__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/queryDef.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n/* harmony import */ var _MetricAggregationsEditor_state_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/state.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/actions.ts\");\n\n\n\n\n\n\n\n\nconst createReducer = (defaultTimeField) => (state, action) => {\n  if (_actions__WEBPACK_IMPORTED_MODULE_6__.addBucketAggregation.match(action)) {\n    const newAgg = {\n      id: action.payload,\n      type: \"terms\",\n      settings: _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig[\"terms\"].defaultSettings\n    };\n    const lastAgg = state[state.length - 1];\n    if (lastAgg?.type === \"date_histogram\") {\n      return [...state.slice(0, state.length - 1), newAgg, lastAgg];\n    }\n    return [...state, newAgg];\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_6__.removeBucketAggregation.match(action)) {\n    return state.filter((bucketAgg) => bucketAgg.id !== action.payload);\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_6__.changeBucketAggregationType.match(action)) {\n    return state.map((bucketAgg) => {\n      if (bucketAgg.id !== action.payload.id) {\n        return bucketAgg;\n      }\n      return {\n        id: bucketAgg.id,\n        type: action.payload.newType,\n        settings: _utils__WEBPACK_IMPORTED_MODULE_5__.bucketAggregationConfig[action.payload.newType].defaultSettings\n      };\n    });\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_6__.changeBucketAggregationField.match(action)) {\n    return state.map((bucketAgg) => {\n      if (bucketAgg.id !== action.payload.id) {\n        return bucketAgg;\n      }\n      return {\n        ...bucketAgg,\n        field: action.payload.newField\n      };\n    });\n  }\n  if (_MetricAggregationsEditor_state_actions__WEBPACK_IMPORTED_MODULE_2__.changeMetricType.match(action)) {\n    if (_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_3__.metricAggregationConfig[action.payload.type].impliedQueryType !== \"metrics\") {\n      return [];\n    } else if (state.length === 0) {\n      return [{ ...(0,_queryDef__WEBPACK_IMPORTED_MODULE_0__.defaultBucketAgg)(\"2\"), field: defaultTimeField }];\n    }\n    return state;\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_6__.changeBucketAggregationSetting.match(action)) {\n    return state.map((bucketAgg) => {\n      if (bucketAgg.id !== action.payload.bucketAgg.id) {\n        return bucketAgg;\n      }\n      const newSettings = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.removeEmpty)({\n        ...bucketAgg.settings,\n        [action.payload.settingName]: action.payload.newValue\n      });\n      return {\n        ...bucketAgg,\n        settings: {\n          ...newSettings\n        }\n      };\n    });\n  }\n  if (_state__WEBPACK_IMPORTED_MODULE_4__.initQuery.match(action)) {\n    if (state && state.length > 0) {\n      return state;\n    }\n    return [{ ...(0,_queryDef__WEBPACK_IMPORTED_MODULE_0__.defaultBucketAgg)(\"2\"), field: defaultTimeField }];\n  }\n  return state;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL3N0YXRlL3JlZHVjZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBRWlDO0FBRUw7QUFDSztBQUNPO0FBQ2Q7QUFDYztBQVFqQztBQUVBLE1BQU0sZ0JBQ1gsQ0FBQyxxQkFDRCxDQUFDLE9BQXlDLFdBQXFEO0FBQzdGLE1BQUksMERBQW9CLENBQUMsTUFBTSxNQUFNLEdBQUc7QUFDdEMsVUFBTSxTQUFnQjtBQUFBLE1BQ3BCLElBQUksT0FBTztBQUFBLE1BQ1gsTUFBTTtBQUFBLE1BQ04sVUFBVSwyREFBdUIsQ0FBQyxPQUFPLEVBQUU7QUFBQSxJQUM3QztBQUdBLFVBQU0sVUFBVSxNQUFPLE1BQU8sU0FBUyxDQUFDO0FBQ3hDLFFBQUksU0FBUyxTQUFTLGtCQUFrQjtBQUN0QyxhQUFPLENBQUMsR0FBRyxNQUFPLE1BQU0sR0FBRyxNQUFPLFNBQVMsQ0FBQyxHQUFHLFFBQVEsT0FBTztBQUFBLElBQ2hFO0FBRUEsV0FBTyxDQUFDLEdBQUcsT0FBUSxNQUFNO0FBQUEsRUFDM0I7QUFFQSxNQUFJLDZEQUF1QixDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQ3pDLFdBQU8sTUFBTyxPQUFPLENBQUMsY0FBYyxVQUFVLE9BQU8sT0FBTyxPQUFPO0FBQUEsRUFDckU7QUFFQSxNQUFJLGlFQUEyQixDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQzdDLFdBQU8sTUFBTyxJQUFJLENBQUMsY0FBYztBQUMvQixVQUFJLFVBQVUsT0FBTyxPQUFPLFFBQVEsSUFBSTtBQUN0QyxlQUFPO0FBQUEsTUFDVDtBQVFBLGFBQU87QUFBQSxRQUNMLElBQUksVUFBVTtBQUFBLFFBQ2QsTUFBTSxPQUFPLFFBQVE7QUFBQSxRQUNyQixVQUFVLDJEQUF1QixDQUFDLE9BQU8sUUFBUSxPQUFPLEVBQUU7QUFBQSxNQUM1RDtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFFQSxNQUFJLGtFQUE0QixDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQzlDLFdBQU8sTUFBTyxJQUFJLENBQUMsY0FBYztBQUMvQixVQUFJLFVBQVUsT0FBTyxPQUFPLFFBQVEsSUFBSTtBQUN0QyxlQUFPO0FBQUEsTUFDVDtBQUVBLGFBQU87QUFBQSxRQUNMLEdBQUc7QUFBQSxRQUNILE9BQU8sT0FBTyxRQUFRO0FBQUEsTUFDeEI7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBRUEsTUFBSSxxRkFBZ0IsQ0FBQyxNQUFNLE1BQU0sR0FBRztBQUdsQyxRQUFJLG9GQUF1QixDQUFDLE9BQU8sUUFBUSxJQUFJLEVBQUUscUJBQXFCLFdBQVc7QUFDL0UsYUFBTyxDQUFDO0FBQUEsSUFDVixXQUFXLE1BQU8sV0FBVyxHQUFHO0FBSTlCLGFBQU8sQ0FBQyxFQUFFLEdBQUcsMkRBQWdCLENBQUMsR0FBRyxHQUFHLE9BQU8saUJBQWlCLENBQUM7QUFBQSxJQUMvRDtBQUNBLFdBQU87QUFBQSxFQUNUO0FBRUEsTUFBSSxvRUFBOEIsQ0FBQyxNQUFNLE1BQU0sR0FBRztBQUNoRCxXQUFPLE1BQU8sSUFBSSxDQUFDLGNBQWM7QUFDL0IsVUFBSSxVQUFVLE9BQU8sT0FBTyxRQUFRLFVBQVUsSUFBSTtBQUNoRCxlQUFPO0FBQUEsTUFDVDtBQUVBLFlBQU0sY0FBYyxtREFBVyxDQUFDO0FBQUEsUUFDOUIsR0FBRyxVQUFVO0FBQUEsUUFDYixDQUFDLE9BQU8sUUFBUSxXQUFXLEdBQUcsT0FBTyxRQUFRO0FBQUEsTUFDL0MsQ0FBQztBQUVELGFBQU87QUFBQSxRQUNMLEdBQUc7QUFBQSxRQUNILFVBQVU7QUFBQSxVQUNSLEdBQUc7QUFBQSxRQUNMO0FBQUEsTUFDRjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFFQSxNQUFJLDZDQUFTLENBQUMsTUFBTSxNQUFNLEdBQUc7QUFDM0IsUUFBSSxTQUFTLE1BQU0sU0FBUyxHQUFHO0FBQzdCLGFBQU87QUFBQSxJQUNUO0FBQ0EsV0FBTyxDQUFDLEVBQUUsR0FBRywyREFBZ0IsQ0FBQyxHQUFHLEdBQUcsT0FBTyxpQkFBaUIsQ0FBQztBQUFBLEVBQy9EO0FBRUEsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9CdWNrZXRBZ2dyZWdhdGlvbnNFZGl0b3Ivc3RhdGUvcmVkdWNlci50cz81OTNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjdGlvbiB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuXG5pbXBvcnQgeyBkZWZhdWx0QnVja2V0QWdnIH0gZnJvbSAnLi4vLi4vLi4vLi4vcXVlcnlEZWYnO1xuaW1wb3J0IHsgRWxhc3RpY3NlYXJjaFF1ZXJ5LCBUZXJtcywgQnVja2V0QWdncmVnYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyByZW1vdmVFbXB0eSB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IGNoYW5nZU1ldHJpY1R5cGUgfSBmcm9tICcuLi8uLi9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3Ivc3RhdGUvYWN0aW9ucyc7XG5pbXBvcnQgeyBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZyB9IGZyb20gJy4uLy4uL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci91dGlscyc7XG5pbXBvcnQgeyBpbml0UXVlcnkgfSBmcm9tICcuLi8uLi9zdGF0ZSc7XG5pbXBvcnQgeyBidWNrZXRBZ2dyZWdhdGlvbkNvbmZpZyB9IGZyb20gJy4uL3V0aWxzJztcblxuaW1wb3J0IHtcbiAgYWRkQnVja2V0QWdncmVnYXRpb24sXG4gIGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uRmllbGQsXG4gIGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZyxcbiAgY2hhbmdlQnVja2V0QWdncmVnYXRpb25UeXBlLFxuICByZW1vdmVCdWNrZXRBZ2dyZWdhdGlvbixcbn0gZnJvbSAnLi9hY3Rpb25zJztcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlZHVjZXIgPVxuICAoZGVmYXVsdFRpbWVGaWVsZDogc3RyaW5nKSA9PlxuICAoc3RhdGU6IEVsYXN0aWNzZWFyY2hRdWVyeVsnYnVja2V0QWdncyddLCBhY3Rpb246IEFjdGlvbik6IEVsYXN0aWNzZWFyY2hRdWVyeVsnYnVja2V0QWdncyddID0+IHtcbiAgICBpZiAoYWRkQnVja2V0QWdncmVnYXRpb24ubWF0Y2goYWN0aW9uKSkge1xuICAgICAgY29uc3QgbmV3QWdnOiBUZXJtcyA9IHtcbiAgICAgICAgaWQ6IGFjdGlvbi5wYXlsb2FkLFxuICAgICAgICB0eXBlOiAndGVybXMnLFxuICAgICAgICBzZXR0aW5nczogYnVja2V0QWdncmVnYXRpb25Db25maWdbJ3Rlcm1zJ10uZGVmYXVsdFNldHRpbmdzLFxuICAgICAgfTtcblxuICAgICAgLy8gSWYgdGhlIGxhc3QgYnVja2V0IGFnZ3JlZ2F0aW9uIGlzIGEgYGRhdGVfaGlzdG9ncmFtYCB3ZSBhZGQgdGhlIG5ldyBvbmUgYmVmb3JlIGl0LlxuICAgICAgY29uc3QgbGFzdEFnZyA9IHN0YXRlIVtzdGF0ZSEubGVuZ3RoIC0gMV07XG4gICAgICBpZiAobGFzdEFnZz8udHlwZSA9PT0gJ2RhdGVfaGlzdG9ncmFtJykge1xuICAgICAgICByZXR1cm4gWy4uLnN0YXRlIS5zbGljZSgwLCBzdGF0ZSEubGVuZ3RoIC0gMSksIG5ld0FnZywgbGFzdEFnZ107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbLi4uc3RhdGUhLCBuZXdBZ2ddO1xuICAgIH1cblxuICAgIGlmIChyZW1vdmVCdWNrZXRBZ2dyZWdhdGlvbi5tYXRjaChhY3Rpb24pKSB7XG4gICAgICByZXR1cm4gc3RhdGUhLmZpbHRlcigoYnVja2V0QWdnKSA9PiBidWNrZXRBZ2cuaWQgIT09IGFjdGlvbi5wYXlsb2FkKTtcbiAgICB9XG5cbiAgICBpZiAoY2hhbmdlQnVja2V0QWdncmVnYXRpb25UeXBlLm1hdGNoKGFjdGlvbikpIHtcbiAgICAgIHJldHVybiBzdGF0ZSEubWFwKChidWNrZXRBZ2cpID0+IHtcbiAgICAgICAgaWYgKGJ1Y2tldEFnZy5pZCAhPT0gYWN0aW9uLnBheWxvYWQuaWQpIHtcbiAgICAgICAgICByZXR1cm4gYnVja2V0QWdnO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcbiAgICAgICAgVE9ETzogVGhlIHByZXZpb3VzIHZlcnNpb24gb2YgdGhlIHF1ZXJ5IGVkaXRvciB3YXMga2VlcGluZyBzb21lIG9mIHRoZSBvbGQgYnVja2V0IGFnZ3JlZ2F0aW9uJ3MgY29uZmlndXJhdGlvbnNcbiAgICAgICAgaW4gdGhlIG5ldyBzZWxlY3RlZCBvbmUgKHN1Y2ggYXMgZmllbGQgb3Igc29tZSBzZXR0aW5ncykuXG4gICAgICAgIEl0IHRoZSBmdXR1cmUgd291bGQgYmUgbmljZSB0byBoYXZlIHRoZSBzYW1lIGJlaGF2aW9yIGJ1dCBpdCdzIGhhcmQgd2l0aG91dCBhIHByb3BlciBkZWZpbml0aW9uLFxuICAgICAgICBhcyBFbGFzdGljc2VhcmNoIHdpbGwgZXJyb3Igc29tZXRpbWVzIGlmIHNvbWUgc2V0dGluZ3MgYXJlIG5vdCBjb21wYXRpYmxlLlxuICAgICAgKi9cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogYnVja2V0QWdnLmlkLFxuICAgICAgICAgIHR5cGU6IGFjdGlvbi5wYXlsb2FkLm5ld1R5cGUsXG4gICAgICAgICAgc2V0dGluZ3M6IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnW2FjdGlvbi5wYXlsb2FkLm5ld1R5cGVdLmRlZmF1bHRTZXR0aW5ncyxcbiAgICAgICAgfSBhcyBCdWNrZXRBZ2dyZWdhdGlvbjtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VCdWNrZXRBZ2dyZWdhdGlvbkZpZWxkLm1hdGNoKGFjdGlvbikpIHtcbiAgICAgIHJldHVybiBzdGF0ZSEubWFwKChidWNrZXRBZ2cpID0+IHtcbiAgICAgICAgaWYgKGJ1Y2tldEFnZy5pZCAhPT0gYWN0aW9uLnBheWxvYWQuaWQpIHtcbiAgICAgICAgICByZXR1cm4gYnVja2V0QWdnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5idWNrZXRBZ2csXG4gICAgICAgICAgZmllbGQ6IGFjdGlvbi5wYXlsb2FkLm5ld0ZpZWxkLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZU1ldHJpY1R5cGUubWF0Y2goYWN0aW9uKSkge1xuICAgICAgLy8gSWYgd2UgYXJlIHN3aXRjaGluZyB0byBhIG1ldHJpYyB3aGljaCByZXF1aXJlcyB0aGUgYWJzZW5jZSBvZiBidWNrZXQgYWdncmVnYXRpb25zXG4gICAgICAvLyB3ZSByZW1vdmUgYWxsIG9mIHRoZW0uXG4gICAgICBpZiAobWV0cmljQWdncmVnYXRpb25Db25maWdbYWN0aW9uLnBheWxvYWQudHlwZV0uaW1wbGllZFF1ZXJ5VHlwZSAhPT0gJ21ldHJpY3MnKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBFbHNlLCBpZiB0aGVyZSBhcmUgbm8gYnVja2V0IGFnZ3JlZ2F0aW9ucyB3ZSByZXN0b3JlIGEgZGVmYXVsdCBvbmUuXG4gICAgICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIHN3aXRjaGluZyBmcm9tIGEgbWV0cmljIHRoYXQgcmVxdWlyZXMgdGhlIGFic2VuY2Ugb2YgYnVja2V0IGFnZ3JlZ2F0aW9ucyB0b1xuICAgICAgICAvLyBvbmUgdGhhdCByZXF1aXJlcyBpdC5cbiAgICAgICAgcmV0dXJuIFt7IC4uLmRlZmF1bHRCdWNrZXRBZ2coJzInKSwgZmllbGQ6IGRlZmF1bHRUaW1lRmllbGQgfV07XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZUJ1Y2tldEFnZ3JlZ2F0aW9uU2V0dGluZy5tYXRjaChhY3Rpb24pKSB7XG4gICAgICByZXR1cm4gc3RhdGUhLm1hcCgoYnVja2V0QWdnKSA9PiB7XG4gICAgICAgIGlmIChidWNrZXRBZ2cuaWQgIT09IGFjdGlvbi5wYXlsb2FkLmJ1Y2tldEFnZy5pZCkge1xuICAgICAgICAgIHJldHVybiBidWNrZXRBZ2c7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdTZXR0aW5ncyA9IHJlbW92ZUVtcHR5KHtcbiAgICAgICAgICAuLi5idWNrZXRBZ2cuc2V0dGluZ3MsXG4gICAgICAgICAgW2FjdGlvbi5wYXlsb2FkLnNldHRpbmdOYW1lXTogYWN0aW9uLnBheWxvYWQubmV3VmFsdWUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uYnVja2V0QWdnLFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAuLi5uZXdTZXR0aW5ncyxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGluaXRRdWVyeS5tYXRjaChhY3Rpb24pKSB7XG4gICAgICBpZiAoc3RhdGUgJiYgc3RhdGUubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3sgLi4uZGVmYXVsdEJ1Y2tldEFnZygnMicpLCBmaWVsZDogZGVmYXVsdFRpbWVGaWVsZCB9XTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGU7XG4gIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/reducer.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bucketAggregationConfig: () => (/* binding */ bucketAggregationConfig),\n/* harmony export */   orderByOptions: () => (/* binding */ orderByOptions),\n/* harmony export */   orderOptions: () => (/* binding */ orderOptions),\n/* harmony export */   sizeOptions: () => (/* binding */ sizeOptions)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/timezones.ts\");\n/* harmony import */ var _SettingsEditor_FiltersSettingsEditor_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/SettingsEditor/FiltersSettingsEditor/utils.ts\");\n\n\n\nconst bucketAggregationConfig = {\n  terms: {\n    label: \"Terms\",\n    requiresField: true,\n    defaultSettings: {\n      min_doc_count: \"1\",\n      size: \"10\",\n      order: \"desc\",\n      orderBy: \"_term\"\n    }\n  },\n  filters: {\n    label: \"Filters\",\n    requiresField: false,\n    defaultSettings: {\n      filters: [(0,_SettingsEditor_FiltersSettingsEditor_utils__WEBPACK_IMPORTED_MODULE_0__.defaultFilter)()]\n    }\n  },\n  geohash_grid: {\n    label: \"Geo Hash Grid\",\n    requiresField: true,\n    defaultSettings: {\n      precision: \"3\"\n    }\n  },\n  date_histogram: {\n    label: \"Date Histogram\",\n    requiresField: true,\n    defaultSettings: {\n      interval: \"auto\",\n      min_doc_count: \"0\",\n      trimEdges: \"0\",\n      timeZone: _grafana_data__WEBPACK_IMPORTED_MODULE_1__.InternalTimeZones.utc\n    }\n  },\n  histogram: {\n    label: \"Histogram\",\n    requiresField: true,\n    defaultSettings: {\n      interval: \"1000\",\n      min_doc_count: \"0\"\n    }\n  },\n  nested: {\n    label: \"Nested (experimental)\",\n    requiresField: true,\n    defaultSettings: {}\n  }\n};\nconst orderByOptions = [\n  { label: \"Term value\", value: \"_term\" },\n  { label: \"Doc Count\", value: \"_count\" }\n];\nconst orderOptions = [\n  { label: \"Top\", value: \"desc\" },\n  { label: \"Bottom\", value: \"asc\" }\n];\nconst sizeOptions = [\n  { label: \"No limit\", value: \"0\" },\n  { label: \"1\", value: \"1\" },\n  { label: \"2\", value: \"2\" },\n  { label: \"3\", value: \"3\" },\n  { label: \"5\", value: \"5\" },\n  { label: \"10\", value: \"10\" },\n  { label: \"15\", value: \"15\" },\n  { label: \"20\", value: \"20\" }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL3V0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBbUQ7QUFJckI7QUFFdkIsTUFBTSwwQkFBZ0Q7QUFBQSxFQUMzRCxPQUFPO0FBQUEsSUFDTCxPQUFPO0FBQUEsSUFDUCxlQUFlO0FBQUEsSUFDZixpQkFBaUI7QUFBQSxNQUNmLGVBQWU7QUFBQSxNQUNmLE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNYO0FBQUEsRUFDRjtBQUFBLEVBQ0EsU0FBUztBQUFBLElBQ1AsT0FBTztBQUFBLElBQ1AsZUFBZTtBQUFBLElBQ2YsaUJBQWlCO0FBQUEsTUFDZixTQUFTLENBQUMsMEZBQWEsQ0FBQyxDQUFDO0FBQUEsSUFDM0I7QUFBQSxFQUNGO0FBQUEsRUFDQSxjQUFjO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxlQUFlO0FBQUEsSUFDZixpQkFBaUI7QUFBQSxNQUNmLFdBQVc7QUFBQSxJQUNiO0FBQUEsRUFDRjtBQUFBLEVBQ0EsZ0JBQWdCO0FBQUEsSUFDZCxPQUFPO0FBQUEsSUFDUCxlQUFlO0FBQUEsSUFDZixpQkFBaUI7QUFBQSxNQUNmLFVBQVU7QUFBQSxNQUNWLGVBQWU7QUFBQSxNQUNmLFdBQVc7QUFBQSxNQUNYLFVBQVUsNERBQWlCLENBQUM7QUFBQSxJQUM5QjtBQUFBLEVBQ0Y7QUFBQSxFQUNBLFdBQVc7QUFBQSxJQUNULE9BQU87QUFBQSxJQUNQLGVBQWU7QUFBQSxJQUNmLGlCQUFpQjtBQUFBLE1BQ2YsVUFBVTtBQUFBLE1BQ1YsZUFBZTtBQUFBLElBQ2pCO0FBQUEsRUFDRjtBQUFBLEVBQ0EsUUFBUTtBQUFBLElBQ04sT0FBTztBQUFBLElBQ1AsZUFBZTtBQUFBLElBQ2YsaUJBQWlCLENBQUM7QUFBQSxFQUNwQjtBQUNGO0FBRU8sTUFBTSxpQkFBaUQ7QUFBQSxFQUM1RCxFQUFFLE9BQU8sY0FBYyxPQUFPLFFBQVE7QUFBQSxFQUN0QyxFQUFFLE9BQU8sYUFBYSxPQUFPLFNBQVM7QUFDeEM7QUFFTyxNQUFNLGVBQStDO0FBQUEsRUFDMUQsRUFBRSxPQUFPLE9BQU8sT0FBTyxPQUFPO0FBQUEsRUFDOUIsRUFBRSxPQUFPLFVBQVUsT0FBTyxNQUFNO0FBQ2xDO0FBRU8sTUFBTSxjQUFjO0FBQUEsRUFDekIsRUFBRSxPQUFPLFlBQVksT0FBTyxJQUFJO0FBQUEsRUFDaEMsRUFBRSxPQUFPLEtBQUssT0FBTyxJQUFJO0FBQUEsRUFDekIsRUFBRSxPQUFPLEtBQUssT0FBTyxJQUFJO0FBQUEsRUFDekIsRUFBRSxPQUFPLEtBQUssT0FBTyxJQUFJO0FBQUEsRUFDekIsRUFBRSxPQUFPLEtBQUssT0FBTyxJQUFJO0FBQUEsRUFDekIsRUFBRSxPQUFPLE1BQU0sT0FBTyxLQUFLO0FBQUEsRUFDM0IsRUFBRSxPQUFPLE1BQU0sT0FBTyxLQUFLO0FBQUEsRUFDM0IsRUFBRSxPQUFPLE1BQU0sT0FBTyxLQUFLO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9CdWNrZXRBZ2dyZWdhdGlvbnNFZGl0b3IvdXRpbHMudHM/Y2QzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnRlcm5hbFRpbWVab25lcywgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmltcG9ydCB7IEJ1Y2tldHNDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBkZWZhdWx0RmlsdGVyIH0gZnJvbSAnLi9TZXR0aW5nc0VkaXRvci9GaWx0ZXJzU2V0dGluZ3NFZGl0b3IvdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgYnVja2V0QWdncmVnYXRpb25Db25maWc6IEJ1Y2tldHNDb25maWd1cmF0aW9uID0ge1xuICB0ZXJtczoge1xuICAgIGxhYmVsOiAnVGVybXMnLFxuICAgIHJlcXVpcmVzRmllbGQ6IHRydWUsXG4gICAgZGVmYXVsdFNldHRpbmdzOiB7XG4gICAgICBtaW5fZG9jX2NvdW50OiAnMScsXG4gICAgICBzaXplOiAnMTAnLFxuICAgICAgb3JkZXI6ICdkZXNjJyxcbiAgICAgIG9yZGVyQnk6ICdfdGVybScsXG4gICAgfSxcbiAgfSxcbiAgZmlsdGVyczoge1xuICAgIGxhYmVsOiAnRmlsdGVycycsXG4gICAgcmVxdWlyZXNGaWVsZDogZmFsc2UsXG4gICAgZGVmYXVsdFNldHRpbmdzOiB7XG4gICAgICBmaWx0ZXJzOiBbZGVmYXVsdEZpbHRlcigpXSxcbiAgICB9LFxuICB9LFxuICBnZW9oYXNoX2dyaWQ6IHtcbiAgICBsYWJlbDogJ0dlbyBIYXNoIEdyaWQnLFxuICAgIHJlcXVpcmVzRmllbGQ6IHRydWUsXG4gICAgZGVmYXVsdFNldHRpbmdzOiB7XG4gICAgICBwcmVjaXNpb246ICczJyxcbiAgICB9LFxuICB9LFxuICBkYXRlX2hpc3RvZ3JhbToge1xuICAgIGxhYmVsOiAnRGF0ZSBIaXN0b2dyYW0nLFxuICAgIHJlcXVpcmVzRmllbGQ6IHRydWUsXG4gICAgZGVmYXVsdFNldHRpbmdzOiB7XG4gICAgICBpbnRlcnZhbDogJ2F1dG8nLFxuICAgICAgbWluX2RvY19jb3VudDogJzAnLFxuICAgICAgdHJpbUVkZ2VzOiAnMCcsXG4gICAgICB0aW1lWm9uZTogSW50ZXJuYWxUaW1lWm9uZXMudXRjLFxuICAgIH0sXG4gIH0sXG4gIGhpc3RvZ3JhbToge1xuICAgIGxhYmVsOiAnSGlzdG9ncmFtJyxcbiAgICByZXF1aXJlc0ZpZWxkOiB0cnVlLFxuICAgIGRlZmF1bHRTZXR0aW5nczoge1xuICAgICAgaW50ZXJ2YWw6ICcxMDAwJyxcbiAgICAgIG1pbl9kb2NfY291bnQ6ICcwJyxcbiAgICB9LFxuICB9LFxuICBuZXN0ZWQ6IHtcbiAgICBsYWJlbDogJ05lc3RlZCAoZXhwZXJpbWVudGFsKScsXG4gICAgcmVxdWlyZXNGaWVsZDogdHJ1ZSxcbiAgICBkZWZhdWx0U2V0dGluZ3M6IHt9LFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IG9yZGVyQnlPcHRpb25zOiBBcnJheTxTZWxlY3RhYmxlVmFsdWU8c3RyaW5nPj4gPSBbXG4gIHsgbGFiZWw6ICdUZXJtIHZhbHVlJywgdmFsdWU6ICdfdGVybScgfSxcbiAgeyBsYWJlbDogJ0RvYyBDb3VudCcsIHZhbHVlOiAnX2NvdW50JyB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IG9yZGVyT3B0aW9uczogQXJyYXk8U2VsZWN0YWJsZVZhbHVlPHN0cmluZz4+ID0gW1xuICB7IGxhYmVsOiAnVG9wJywgdmFsdWU6ICdkZXNjJyB9LFxuICB7IGxhYmVsOiAnQm90dG9tJywgdmFsdWU6ICdhc2MnIH0sXG5dO1xuXG5leHBvcnQgY29uc3Qgc2l6ZU9wdGlvbnMgPSBbXG4gIHsgbGFiZWw6ICdObyBsaW1pdCcsIHZhbHVlOiAnMCcgfSxcbiAgeyBsYWJlbDogJzEnLCB2YWx1ZTogJzEnIH0sXG4gIHsgbGFiZWw6ICcyJywgdmFsdWU6ICcyJyB9LFxuICB7IGxhYmVsOiAnMycsIHZhbHVlOiAnMycgfSxcbiAgeyBsYWJlbDogJzUnLCB2YWx1ZTogJzUnIH0sXG4gIHsgbGFiZWw6ICcxMCcsIHZhbHVlOiAnMTAnIH0sXG4gIHsgbGFiZWw6ICcxNScsIHZhbHVlOiAnMTUnIH0sXG4gIHsgbGFiZWw6ICcyMCcsIHZhbHVlOiAnMjAnIH0sXG5dO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElasticsearchProvider: () => (/* binding */ ElasticsearchProvider),\n/* harmony export */   useDatasource: () => (/* binding */ useDatasource),\n/* harmony export */   useQuery: () => (/* binding */ useQuery),\n/* harmony export */   useRange: () => (/* binding */ useRange)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _BucketAggregationsEditor_state_reducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/state/reducer.ts\");\n/* harmony import */ var _MetricAggregationsEditor_state_reducer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/reducer.ts\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/state.ts\");\n\n\n\n\n\n\nconst DatasourceContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nconst QueryContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nconst RangeContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nconst ElasticsearchProvider = ({\n  children,\n  onChange,\n  onRunQuery,\n  query,\n  datasource,\n  range\n}) => {\n  const onStateChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (query2) => {\n      onChange(query2);\n      onRunQuery();\n    },\n    [onChange, onRunQuery]\n  );\n  const reducer = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__.combineReducers)({\n    query: _state__WEBPACK_IMPORTED_MODULE_4__.queryReducer,\n    alias: _state__WEBPACK_IMPORTED_MODULE_4__.aliasPatternReducer,\n    metrics: _MetricAggregationsEditor_state_reducer__WEBPACK_IMPORTED_MODULE_3__.reducer,\n    bucketAggs: (0,_BucketAggregationsEditor_state_reducer__WEBPACK_IMPORTED_MODULE_2__.createReducer)(datasource.timeField)\n  });\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__.useStatelessReducer)(\n    // timeField is part of the query model, but its value is always set to be the one from datasource settings.\n    (newState) => onStateChange({ ...query, ...newState, timeField: datasource.timeField }),\n    query,\n    reducer\n  );\n  const isUninitialized = !query.metrics || !query.bucketAggs || query.query === void 0;\n  const [shouldRunInit, setShouldRunInit] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(isUninitialized);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (shouldRunInit && isUninitialized) {\n      dispatch((0,_state__WEBPACK_IMPORTED_MODULE_4__.initQuery)());\n      setShouldRunInit(false);\n    }\n  }, [shouldRunInit, dispatch, isUninitialized]);\n  if (isUninitialized) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DatasourceContext.Provider, { value: datasource }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(QueryContext.Provider, { value: query }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(RangeContext.Provider, { value: range }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__.DispatchContext.Provider, { value: dispatch }, children))));\n};\nconst getHook = (c) => () => {\n  const contextValue = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(c);\n  if (!contextValue) {\n    throw new Error(\"use ElasticsearchProvider first.\");\n  }\n  return contextValue;\n};\nconst useQuery = getHook(QueryContext);\nconst useDatasource = getHook(DatasourceContext);\nconst useRange = getHook(RangeContext);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvRWxhc3RpY3NlYXJjaFF1ZXJ5Q29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0c7QUFLekM7QUFHYjtBQUNmO0FBQ21CO0FBRTdELE1BQU0sb0JBQW9CLG9EQUFhLENBQWdDLE1BQVM7QUFDaEYsTUFBTSxlQUFlLG9EQUFhLENBQWlDLE1BQVM7QUFDNUUsTUFBTSxlQUFlLG9EQUFhLENBQXdCLE1BQVM7QUFVNUQsTUFBTSx3QkFBd0IsQ0FBQztBQUFBLEVBQ3BDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRixNQUFnQztBQUM5QixRQUFNLGdCQUFnQixrREFBVztBQUFYLElBQ3BCLENBQUNBLFdBQThCO0FBQzdCLGVBQVNBLE1BQUs7QUFDZCxpQkFBVztBQUFBLElBQ2I7QUFBQSxJQUNBLENBQUMsVUFBVSxVQUFVO0FBQUEsRUFDdkI7QUFFQSxRQUFNLFVBQVUsMkVBQWUsQ0FBeUU7QUFBQSxJQUN0RyxPQUFPLGdEQUFZO0FBQVosSUFDUCxPQUFPLHVEQUFtQjtBQUFuQixJQUNQLFNBQVMsNEVBQWM7QUFBZCxJQUNULFlBQVksc0ZBQXVCLENBQUMsV0FBVyxTQUFTO0FBQUEsRUFDMUQsQ0FBQztBQUVELFFBQU0sV0FBVywrRUFBbUI7QUFBbkI7QUFBQSxJQUVmLENBQUMsYUFBYSxjQUFjLEVBQUUsR0FBRyxPQUFPLEdBQUcsVUFBVSxXQUFXLFdBQVcsVUFBVSxDQUFDO0FBQUEsSUFDdEY7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUVBLFFBQU0sa0JBQWtCLENBQUMsTUFBTSxXQUFXLENBQUMsTUFBTSxjQUFjLE1BQU0sVUFBVTtBQUUvRSxRQUFNLENBQUMsZUFBZSxnQkFBZ0IsSUFBSSwrQ0FBUSxDQUFDLGVBQWU7QUFJbEUsa0RBQVMsQ0FBQyxNQUFNO0FBQ2QsUUFBSSxpQkFBaUIsaUJBQWlCO0FBQ3BDLGVBQVMsaURBQVMsQ0FBQyxDQUFDO0FBQ3BCLHVCQUFpQixLQUFLO0FBQUEsSUFDeEI7QUFBQSxFQUNGLEdBQUcsQ0FBQyxlQUFlLFVBQVUsZUFBZSxDQUFDO0FBRTdDLE1BQUksaUJBQWlCO0FBQ25CLFdBQU87QUFBQSxFQUNUO0FBRUEsU0FDRSwyRUFBQyxrQkFBa0IsVUFBbEIsRUFBMkIsT0FBTyxjQUNqQywyRUFBQyxhQUFhLFVBQWIsRUFBc0IsT0FBTyxTQUM1QiwyRUFBQyxhQUFhLFVBQWIsRUFBc0IsT0FBTyxTQUM1QiwyRUFBQyx1RUFBZSxDQUFDLFVBQWhCLEVBQXlCLE9BQU8sWUFBVyxRQUFTLENBQ3ZELENBQ0YsQ0FDRjtBQUVKO0FBTUEsTUFBTSxVQUFtQixDQUFDLE1BQU0sTUFBTTtBQUNwQyxRQUFNLGVBQWUsaURBQVUsQ0FBQyxDQUFDO0FBRWpDLE1BQUksQ0FBQyxjQUFjO0FBQ2pCLFVBQU0sSUFBSSxNQUFNLGtDQUFrQztBQUFBLEVBQ3BEO0FBRUEsU0FBTztBQUNUO0FBRU8sTUFBTSxXQUFXLFFBQVEsWUFBWTtBQUNyQyxNQUFNLGdCQUFnQixRQUFRLGlCQUFpQjtBQUMvQyxNQUFNLFdBQVcsUUFBUSxZQUFZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9FbGFzdGljc2VhcmNoUXVlcnlDb250ZXh0LnRzeD9mYzFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb250ZXh0LCBjcmVhdGVDb250ZXh0LCBQcm9wc1dpdGhDaGlsZHJlbiwgdXNlQ2FsbGJhY2ssIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IFRpbWVSYW5nZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuXG5pbXBvcnQgeyBFbGFzdGljRGF0YXNvdXJjZSB9IGZyb20gJy4uLy4uL2RhdGFzb3VyY2UnO1xuaW1wb3J0IHsgY29tYmluZVJlZHVjZXJzLCB1c2VTdGF0ZWxlc3NSZWR1Y2VyLCBEaXNwYXRjaENvbnRleHQgfSBmcm9tICcuLi8uLi9ob29rcy91c2VTdGF0ZWxlc3NSZWR1Y2VyJztcbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hRdWVyeSB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuaW1wb3J0IHsgY3JlYXRlUmVkdWNlciBhcyBjcmVhdGVCdWNrZXRBZ2dzUmVkdWNlciB9IGZyb20gJy4vQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL3N0YXRlL3JlZHVjZXInO1xuaW1wb3J0IHsgcmVkdWNlciBhcyBtZXRyaWNzUmVkdWNlciB9IGZyb20gJy4vTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3N0YXRlL3JlZHVjZXInO1xuaW1wb3J0IHsgYWxpYXNQYXR0ZXJuUmVkdWNlciwgcXVlcnlSZWR1Y2VyLCBpbml0UXVlcnkgfSBmcm9tICcuL3N0YXRlJztcblxuY29uc3QgRGF0YXNvdXJjZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0PEVsYXN0aWNEYXRhc291cmNlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuY29uc3QgUXVlcnlDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxFbGFzdGljc2VhcmNoUXVlcnkgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5jb25zdCBSYW5nZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0PFRpbWVSYW5nZSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcXVlcnk6IEVsYXN0aWNzZWFyY2hRdWVyeTtcbiAgb25DaGFuZ2U6IChxdWVyeTogRWxhc3RpY3NlYXJjaFF1ZXJ5KSA9PiB2b2lkO1xuICBvblJ1blF1ZXJ5OiAoKSA9PiB2b2lkO1xuICBkYXRhc291cmNlOiBFbGFzdGljRGF0YXNvdXJjZTtcbiAgcmFuZ2U6IFRpbWVSYW5nZTtcbn1cblxuZXhwb3J0IGNvbnN0IEVsYXN0aWNzZWFyY2hQcm92aWRlciA9ICh7XG4gIGNoaWxkcmVuLFxuICBvbkNoYW5nZSxcbiAgb25SdW5RdWVyeSxcbiAgcXVlcnksXG4gIGRhdGFzb3VyY2UsXG4gIHJhbmdlLFxufTogUHJvcHNXaXRoQ2hpbGRyZW48UHJvcHM+KSA9PiB7XG4gIGNvbnN0IG9uU3RhdGVDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAocXVlcnk6IEVsYXN0aWNzZWFyY2hRdWVyeSkgPT4ge1xuICAgICAgb25DaGFuZ2UocXVlcnkpO1xuICAgICAgb25SdW5RdWVyeSgpO1xuICAgIH0sXG4gICAgW29uQ2hhbmdlLCBvblJ1blF1ZXJ5XVxuICApO1xuXG4gIGNvbnN0IHJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnM8UGljazxFbGFzdGljc2VhcmNoUXVlcnksICdxdWVyeScgfCAnYWxpYXMnIHwgJ21ldHJpY3MnIHwgJ2J1Y2tldEFnZ3MnPj4oe1xuICAgIHF1ZXJ5OiBxdWVyeVJlZHVjZXIsXG4gICAgYWxpYXM6IGFsaWFzUGF0dGVyblJlZHVjZXIsXG4gICAgbWV0cmljczogbWV0cmljc1JlZHVjZXIsXG4gICAgYnVja2V0QWdnczogY3JlYXRlQnVja2V0QWdnc1JlZHVjZXIoZGF0YXNvdXJjZS50aW1lRmllbGQpLFxuICB9KTtcblxuICBjb25zdCBkaXNwYXRjaCA9IHVzZVN0YXRlbGVzc1JlZHVjZXIoXG4gICAgLy8gdGltZUZpZWxkIGlzIHBhcnQgb2YgdGhlIHF1ZXJ5IG1vZGVsLCBidXQgaXRzIHZhbHVlIGlzIGFsd2F5cyBzZXQgdG8gYmUgdGhlIG9uZSBmcm9tIGRhdGFzb3VyY2Ugc2V0dGluZ3MuXG4gICAgKG5ld1N0YXRlKSA9PiBvblN0YXRlQ2hhbmdlKHsgLi4ucXVlcnksIC4uLm5ld1N0YXRlLCB0aW1lRmllbGQ6IGRhdGFzb3VyY2UudGltZUZpZWxkIH0pLFxuICAgIHF1ZXJ5LFxuICAgIHJlZHVjZXJcbiAgKTtcblxuICBjb25zdCBpc1VuaW5pdGlhbGl6ZWQgPSAhcXVlcnkubWV0cmljcyB8fCAhcXVlcnkuYnVja2V0QWdncyB8fCBxdWVyeS5xdWVyeSA9PT0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0IFtzaG91bGRSdW5Jbml0LCBzZXRTaG91bGRSdW5Jbml0XSA9IHVzZVN0YXRlKGlzVW5pbml0aWFsaXplZCk7XG5cbiAgLy8gVGhpcyBpbml0aWFsaXplcyB0aGUgcXVlcnkgYnkgZGlzcGF0Y2hpbmcgYW4gaW5pdCBhY3Rpb24gdG8gZWFjaCByZWR1Y2VyLlxuICAvLyB1c2VTdGF0ZWxlc3NSZWR1Y2VyIHdpbGwgdGhlbiBjYWxsIGBvbkNoYW5nZWAgd2l0aCB0aGUgbmV3bHkgZ2VuZXJhdGVkIHF1ZXJ5XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3VsZFJ1bkluaXQgJiYgaXNVbmluaXRpYWxpemVkKSB7XG4gICAgICBkaXNwYXRjaChpbml0UXVlcnkoKSk7XG4gICAgICBzZXRTaG91bGRSdW5Jbml0KGZhbHNlKTtcbiAgICB9XG4gIH0sIFtzaG91bGRSdW5Jbml0LCBkaXNwYXRjaCwgaXNVbmluaXRpYWxpemVkXSk7XG5cbiAgaWYgKGlzVW5pbml0aWFsaXplZCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8RGF0YXNvdXJjZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2RhdGFzb3VyY2V9PlxuICAgICAgPFF1ZXJ5Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17cXVlcnl9PlxuICAgICAgICA8UmFuZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtyYW5nZX0+XG4gICAgICAgICAgPERpc3BhdGNoQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17ZGlzcGF0Y2h9PntjaGlsZHJlbn08L0Rpc3BhdGNoQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgPC9SYW5nZUNvbnRleHQuUHJvdmlkZXI+XG4gICAgICA8L1F1ZXJ5Q29udGV4dC5Qcm92aWRlcj5cbiAgICA8L0RhdGFzb3VyY2VDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuaW50ZXJmYWNlIEdldEhvb2sge1xuICA8VD4oY29udGV4dDogQ29udGV4dDxUPik6ICgpID0+IE5vbk51bGxhYmxlPFQ+O1xufVxuXG5jb25zdCBnZXRIb29rOiBHZXRIb29rID0gKGMpID0+ICgpID0+IHtcbiAgY29uc3QgY29udGV4dFZhbHVlID0gdXNlQ29udGV4dChjKTtcblxuICBpZiAoIWNvbnRleHRWYWx1ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlIEVsYXN0aWNzZWFyY2hQcm92aWRlciBmaXJzdC4nKTtcbiAgfVxuXG4gIHJldHVybiBjb250ZXh0VmFsdWUgYXMgTm9uTnVsbGFibGU8dHlwZW9mIGNvbnRleHRWYWx1ZT47XG59O1xuXG5leHBvcnQgY29uc3QgdXNlUXVlcnkgPSBnZXRIb29rKFF1ZXJ5Q29udGV4dCk7XG5leHBvcnQgY29uc3QgdXNlRGF0YXNvdXJjZSA9IGdldEhvb2soRGF0YXNvdXJjZUNvbnRleHQpO1xuZXhwb3J0IGNvbnN0IHVzZVJhbmdlID0gZ2V0SG9vayhSYW5nZUNvbnRleHQpO1xuIl0sIm5hbWVzIjpbInF1ZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/MetricEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetricEditor: () => (/* binding */ MetricEditor)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var semver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/semver-npm-7.5.4-c4ad957fcd-12d8ad952f.zip/node_modules/semver/index.js\");\n/* harmony import */ var semver__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(semver__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineSegmentGroup.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Segment/SegmentAsync.tsx\");\n/* harmony import */ var _hooks_useFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useFields.ts\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _MetricPicker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/MetricPicker.tsx\");\n/* harmony import */ var _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/styles.ts\");\n/* harmony import */ var _SettingsEditor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/index.tsx\");\n/* harmony import */ var _aggregations__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/styles.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst toOption = (metric) => ({\n  label: _utils__WEBPACK_IMPORTED_MODULE_12__.metricAggregationConfig[metric.type].label,\n  value: metric.type\n});\nconst isBasicAggregation = (metric) => !_utils__WEBPACK_IMPORTED_MODULE_12__.metricAggregationConfig[metric.type].isPipelineAgg;\nconst getTypeOptions = (previousMetrics, esVersion) => {\n  const includePipelineAggregations = previousMetrics.some(isBasicAggregation);\n  return Object.entries(_utils__WEBPACK_IMPORTED_MODULE_12__.metricAggregationConfig).filter(([_, config]) => config.impliedQueryType === \"metrics\").filter(([_, { versionRange = \"*\" }]) => esVersion != null ? (0,semver__WEBPACK_IMPORTED_MODULE_2__.satisfies)(esVersion, versionRange) : true).filter(([_, config]) => includePipelineAggregations || !config.isPipelineAgg).map(([key, { label }]) => ({\n    label,\n    value: key\n  }));\n};\nconst MetricEditor = ({ value }) => {\n  const styles = (0,_styles__WEBPACK_IMPORTED_MODULE_11__.getStyles)((0,_grafana_ui__WEBPACK_IMPORTED_MODULE_13__.useTheme2)(), !!value.hide);\n  const datasource = (0,_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_6__.useDatasource)();\n  const query = (0,_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_6__.useQuery)();\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_4__.useDispatch)();\n  const getFields = (0,_hooks_useFields__WEBPACK_IMPORTED_MODULE_3__.useFields)(value.type);\n  const getTypeOptionsAsync = async (previousMetrics2) => {\n    const dbVersion = await datasource.getDatabaseVersion();\n    return getTypeOptions(previousMetrics2, dbVersion);\n  };\n  const loadOptions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async () => {\n    const remoteFields = await getFields();\n    if ((0,_aggregations__WEBPACK_IMPORTED_MODULE_9__.isMetricAggregationWithInlineScript)(value)) {\n      return [{ label: \"None\" }, ...remoteFields];\n    }\n    return remoteFields;\n  }, [getFields, value]);\n  const previousMetrics = query.metrics.slice(\n    0,\n    query.metrics.findIndex((m) => m.id === value.id)\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.InlineSegmentGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_15__.SegmentAsync,\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.color, _styles__WEBPACK_IMPORTED_MODULE_7__.segmentStyles),\n      loadOptions: () => getTypeOptionsAsync(previousMetrics),\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_10__.changeMetricType)({ id: value.id, type: e.value })),\n      value: toOption(value)\n    }\n  ), (0,_aggregations__WEBPACK_IMPORTED_MODULE_9__.isMetricAggregationWithField)(value) && !(0,_aggregations__WEBPACK_IMPORTED_MODULE_9__.isPipelineAggregation)(value) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_15__.SegmentAsync,\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.color, _styles__WEBPACK_IMPORTED_MODULE_7__.segmentStyles),\n      loadOptions,\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_10__.changeMetricField)({ id: value.id, field: e.value })),\n      placeholder: \"Select Field\",\n      value: value.field\n    }\n  ), (0,_aggregations__WEBPACK_IMPORTED_MODULE_9__.isPipelineAggregation)(value) && !(0,_aggregations__WEBPACK_IMPORTED_MODULE_9__.isPipelineAggregationWithMultipleBucketPaths)(value) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _MetricPicker__WEBPACK_IMPORTED_MODULE_5__.MetricPicker,\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.color, _styles__WEBPACK_IMPORTED_MODULE_7__.segmentStyles),\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_10__.changeMetricField)({ id: value.id, field: e.value?.id })),\n      options: previousMetrics,\n      value: value.field\n    }\n  )), (0,_aggregations__WEBPACK_IMPORTED_MODULE_9__.isMetricAggregationWithSettings)(value) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingsEditor__WEBPACK_IMPORTED_MODULE_8__.SettingsEditor, { metric: value, previousMetrics }));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL01ldHJpY0VkaXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUI7QUFDZ0I7QUFDRDtBQUcwQjtBQUVsQztBQUNFO0FBRUM7QUFDVztBQUNWO0FBRUM7QUFPeEI7QUFDNkM7QUFDMUI7QUFDYztBQUV4QyxNQUFNLFdBQVcsQ0FBQyxZQUErQjtBQUFBLEVBQy9DLE9BQU8sNERBQXVCLENBQUMsT0FBTyxJQUFJLEVBQUU7QUFBQSxFQUM1QyxPQUFPLE9BQU87QUFDaEI7QUFVQSxNQUFNLHFCQUFxQixDQUFDLFdBQThCLENBQUMsNERBQXVCLENBQUMsT0FBTyxJQUFJLEVBQUU7QUFFaEcsTUFBTSxpQkFBaUIsQ0FDckIsaUJBQ0EsY0FDa0Q7QUFFbEQsUUFBTSw4QkFBOEIsZ0JBQWdCLEtBQUssa0JBQWtCO0FBRTNFLFNBQ0UsT0FBTyxRQUFRLDREQUF1QixFQUNuQyxPQUFPLENBQUMsQ0FBQyxHQUFHLE1BQU0sTUFBTSxPQUFPLHFCQUFxQixTQUFTLEVBRzdELE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxlQUFlLElBQUksQ0FBQyxNQUFPLGFBQWEsT0FBTyxpREFBUyxDQUFDLFdBQVcsWUFBWSxJQUFJLElBQUssRUFFdkcsT0FBTyxDQUFDLENBQUMsR0FBRyxNQUFNLE1BQU0sK0JBQStCLENBQUMsT0FBTyxhQUFhLEVBQzVFLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsT0FBTztBQUFBLElBQzFCO0FBQUEsSUFDQSxPQUFPO0FBQUEsRUFDVCxFQUFFO0FBRVI7QUFFTyxNQUFNLGVBQWUsQ0FBQyxFQUFFLE1BQU0sTUFBYTtBQUNoRCxRQUFNLFNBQVMsbURBQVMsQ0FBQyx1REFBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sSUFBSTtBQUNsRCxRQUFNLGFBQWEseUVBQWEsQ0FBQztBQUNqQyxRQUFNLFFBQVEsb0VBQVEsQ0FBQztBQUN2QixRQUFNLFdBQVcsdUVBQVcsQ0FBQztBQUM3QixRQUFNLFlBQVksMkRBQVMsQ0FBQyxNQUFNLElBQUk7QUFFdEMsUUFBTSxzQkFBc0IsT0FBT0EscUJBQXlDO0FBQzFFLFVBQU0sWUFBWSxNQUFNLFdBQVcsbUJBQW1CO0FBQ3RELFdBQU8sZUFBZUEsa0JBQWlCLFNBQVM7QUFBQSxFQUNsRDtBQUVBLFFBQU0sY0FBYyxrREFBVyxDQUFDLFlBQVk7QUFDMUMsVUFBTSxlQUFlLE1BQU0sVUFBVTtBQUdyQyxRQUFJLGtGQUFtQyxDQUFDLEtBQUssR0FBRztBQUM5QyxhQUFPLENBQUMsRUFBRSxPQUFPLE9BQU8sR0FBRyxHQUFHLFlBQVk7QUFBQSxJQUM1QztBQUVBLFdBQU87QUFBQSxFQUNULEdBQUcsQ0FBQyxXQUFXLEtBQUssQ0FBQztBQUVyQixRQUFNLGtCQUFrQixNQUFNLFFBQVM7QUFBQSxJQUNyQztBQUFBLElBQ0EsTUFBTSxRQUFTLFVBQVUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxNQUFNLEVBQUU7QUFBQSxFQUNuRDtBQUVBLFNBQ0UsMElBQ0UsMkVBQUMsNERBQWtCLFFBQ2pCO0FBQUEsSUFBQyxzREFBWTtBQUFaO0FBQUEsTUFDQyxXQUFXLGdEQUFFLENBQUMsT0FBTyxPQUFPLGtEQUFhO0FBQUEsTUFDekMsYUFBYSxNQUFNLG9CQUFvQixlQUFlO0FBQUEsTUFDdEQsVUFBVSxDQUFDLE1BQU0sU0FBUyxpRUFBZ0IsQ0FBQyxFQUFFLElBQUksTUFBTSxJQUFJLE1BQU0sRUFBRSxNQUFPLENBQUMsQ0FBQztBQUFBLE1BQzVFLE9BQU8sU0FBUyxLQUFLO0FBQUE7QUFBQSxFQUN2QixHQUVDLDJFQUE0QixDQUFDLEtBQUssS0FBSyxDQUFDLG9FQUFxQixDQUFDLEtBQUssS0FDbEU7QUFBQSxJQUFDLHNEQUFZO0FBQVo7QUFBQSxNQUNDLFdBQVcsZ0RBQUUsQ0FBQyxPQUFPLE9BQU8sa0RBQWE7QUFBQSxNQUN6QztBQUFBLE1BQ0EsVUFBVSxDQUFDLE1BQU0sU0FBUyxrRUFBaUIsQ0FBQyxFQUFFLElBQUksTUFBTSxJQUFJLE9BQU8sRUFBRSxNQUFPLENBQUMsQ0FBQztBQUFBLE1BQzlFLGFBQVk7QUFBQSxNQUNaLE9BQU8sTUFBTTtBQUFBO0FBQUEsRUFDZixHQUdELG9FQUFxQixDQUFDLEtBQUssS0FBSyxDQUFDLDJGQUE0QyxDQUFDLEtBQUssS0FDbEY7QUFBQSxJQUFDLHVEQUFZO0FBQVo7QUFBQSxNQUNDLFdBQVcsZ0RBQUUsQ0FBQyxPQUFPLE9BQU8sa0RBQWE7QUFBQSxNQUN6QyxVQUFVLENBQUMsTUFBTSxTQUFTLGtFQUFpQixDQUFDLEVBQUUsSUFBSSxNQUFNLElBQUksT0FBTyxFQUFFLE9BQU8sR0FBSSxDQUFDLENBQUM7QUFBQSxNQUNsRixTQUFTO0FBQUEsTUFDVCxPQUFPLE1BQU07QUFBQTtBQUFBLEVBQ2YsQ0FFSixHQUVDLDhFQUErQixDQUFDLEtBQUssS0FBSywyRUFBQywyREFBYyxJQUFDLFFBQVEsT0FBTyxpQkFBa0MsQ0FDOUc7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL01ldHJpY0VkaXRvci50c3g/MjQ0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjeCB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBzYXRpc2ZpZXMsIFNlbVZlciB9IGZyb20gJ3NlbXZlcic7XG5cbmltcG9ydCB7IFNlbGVjdGFibGVWYWx1ZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgSW5saW5lU2VnbWVudEdyb3VwLCBTZWdtZW50QXN5bmMsIHVzZVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgdXNlRmllbGRzIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlRmllbGRzJztcbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlU3RhdGVsZXNzUmVkdWNlcic7XG5pbXBvcnQgeyBNZXRyaWNBZ2dyZWdhdGlvbiwgTWV0cmljQWdncmVnYXRpb25UeXBlIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgTWV0cmljUGlja2VyIH0gZnJvbSAnLi4vLi4vTWV0cmljUGlja2VyJztcbmltcG9ydCB7IHVzZURhdGFzb3VyY2UsIHVzZVF1ZXJ5IH0gZnJvbSAnLi4vRWxhc3RpY3NlYXJjaFF1ZXJ5Q29udGV4dCc7XG5pbXBvcnQgeyBzZWdtZW50U3R5bGVzIH0gZnJvbSAnLi4vc3R5bGVzJztcblxuaW1wb3J0IHsgU2V0dGluZ3NFZGl0b3IgfSBmcm9tICcuL1NldHRpbmdzRWRpdG9yJztcbmltcG9ydCB7XG4gIGlzTWV0cmljQWdncmVnYXRpb25XaXRoRmllbGQsXG4gIGlzTWV0cmljQWdncmVnYXRpb25XaXRoSW5saW5lU2NyaXB0LFxuICBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aFNldHRpbmdzLFxuICBpc1BpcGVsaW5lQWdncmVnYXRpb24sXG4gIGlzUGlwZWxpbmVBZ2dyZWdhdGlvbldpdGhNdWx0aXBsZUJ1Y2tldFBhdGhzLFxufSBmcm9tICcuL2FnZ3JlZ2F0aW9ucyc7XG5pbXBvcnQgeyBjaGFuZ2VNZXRyaWNGaWVsZCwgY2hhbmdlTWV0cmljVHlwZSB9IGZyb20gJy4vc3RhdGUvYWN0aW9ucyc7XG5pbXBvcnQgeyBnZXRTdHlsZXMgfSBmcm9tICcuL3N0eWxlcyc7XG5pbXBvcnQgeyBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZyB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCB0b09wdGlvbiA9IChtZXRyaWM6IE1ldHJpY0FnZ3JlZ2F0aW9uKSA9PiAoe1xuICBsYWJlbDogbWV0cmljQWdncmVnYXRpb25Db25maWdbbWV0cmljLnR5cGVdLmxhYmVsLFxuICB2YWx1ZTogbWV0cmljLnR5cGUsXG59KTtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgdmFsdWU6IE1ldHJpY0FnZ3JlZ2F0aW9uO1xufVxuXG4vLyBJZiBhIG1ldHJpYyBpcyBhIFBpcGVsaW5lIEFnZ3JlZ2F0aW9uIChodHRwczovL3d3dy5lbGFzdGljLmNvL2d1aWRlL2VuL2VsYXN0aWNzZWFyY2gvcmVmZXJlbmNlL2N1cnJlbnQvc2VhcmNoLWFnZ3JlZ2F0aW9ucy1waXBlbGluZS5odG1sKVxuLy8gaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIHNob3cgaXQgaW4gdGhlIHR5cGUgcGlja2VyIHdoZW4gdGhlcmUgaXMgbm8gbm9uLXBpcGVsaW5lLWFnZ3JlZ2F0aW9uIHByZXZpb3VzbHkgc2VsZWN0ZWRcbi8vIGFzIHRoZXkgd29yayBvbiB0aGUgb3V0cHV0cyBwcm9kdWNlZCBmcm9tIG90aGVyIGFnZ3JlZ2F0aW9ucyByYXRoZXIgdGhhbiBmcm9tIGRvY3VtZW50cyBvciBmaWVsZHMuXG4vLyBUaGlzIG1lYW5zIHdlIHNob3VsZCBmaWx0ZXIgdGhlbSBvdXQgZnJvbSB0aGUgdHlwZSBwaWNrZXIgaWYgdGhlcmUncyBubyBvdGhlciBcImJhc2ljXCIgYWdncmVnYXRpb24gYmVmb3JlIHRoZSBjdXJyZW50IG9uZS5cbmNvbnN0IGlzQmFzaWNBZ2dyZWdhdGlvbiA9IChtZXRyaWM6IE1ldHJpY0FnZ3JlZ2F0aW9uKSA9PiAhbWV0cmljQWdncmVnYXRpb25Db25maWdbbWV0cmljLnR5cGVdLmlzUGlwZWxpbmVBZ2c7XG5cbmNvbnN0IGdldFR5cGVPcHRpb25zID0gKFxuICBwcmV2aW91c01ldHJpY3M6IE1ldHJpY0FnZ3JlZ2F0aW9uW10sXG4gIGVzVmVyc2lvbjogU2VtVmVyIHwgbnVsbFxuKTogQXJyYXk8U2VsZWN0YWJsZVZhbHVlPE1ldHJpY0FnZ3JlZ2F0aW9uVHlwZT4+ID0+IHtcbiAgLy8gd2UnbGwgaW5jbHVkZSBQaXBlbGluZSBBZ2dyZWdhdGlvbnMgb25seSBpZiBhdCBsZWFzdCBvbmUgcHJldmlvdXMgbWV0cmljIGlzIGEgXCJCYXNpY1wiIG9uZVxuICBjb25zdCBpbmNsdWRlUGlwZWxpbmVBZ2dyZWdhdGlvbnMgPSBwcmV2aW91c01ldHJpY3Muc29tZShpc0Jhc2ljQWdncmVnYXRpb24pO1xuXG4gIHJldHVybiAoXG4gICAgT2JqZWN0LmVudHJpZXMobWV0cmljQWdncmVnYXRpb25Db25maWcpXG4gICAgICAuZmlsdGVyKChbXywgY29uZmlnXSkgPT4gY29uZmlnLmltcGxpZWRRdWVyeVR5cGUgPT09ICdtZXRyaWNzJylcbiAgICAgIC8vIE9ubHkgc2hvd2luZyBtZXRyaWNzIHR5cGUgc3VwcG9ydGVkIGJ5IHRoZSB2ZXJzaW9uIG9mIEVTLlxuICAgICAgLy8gaWYgd2UgY2Fubm90IGRldGVybWluZSB0aGUgdmVyc2lvbiwgd2UgYXNzdW1lIGl0IGlzIHN1aXRhYmxlLlxuICAgICAgLmZpbHRlcigoW18sIHsgdmVyc2lvblJhbmdlID0gJyonIH1dKSA9PiAoZXNWZXJzaW9uICE9IG51bGwgPyBzYXRpc2ZpZXMoZXNWZXJzaW9uLCB2ZXJzaW9uUmFuZ2UpIDogdHJ1ZSkpXG4gICAgICAvLyBGaWx0ZXJpbmcgb3V0IFBpcGVsaW5lIEFnZ3JlZ2F0aW9ucyBpZiB0aGVyZSdzIG5vIGJhc2ljIG1ldHJpYyBzZWxlY3RlZCBiZWZvcmVcbiAgICAgIC5maWx0ZXIoKFtfLCBjb25maWddKSA9PiBpbmNsdWRlUGlwZWxpbmVBZ2dyZWdhdGlvbnMgfHwgIWNvbmZpZy5pc1BpcGVsaW5lQWdnKVxuICAgICAgLm1hcCgoW2tleSwgeyBsYWJlbCB9XSkgPT4gKHtcbiAgICAgICAgbGFiZWwsXG4gICAgICAgIHZhbHVlOiBrZXkgYXMgTWV0cmljQWdncmVnYXRpb25UeXBlLFxuICAgICAgfSkpXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgTWV0cmljRWRpdG9yID0gKHsgdmFsdWUgfTogUHJvcHMpID0+IHtcbiAgY29uc3Qgc3R5bGVzID0gZ2V0U3R5bGVzKHVzZVRoZW1lMigpLCAhIXZhbHVlLmhpZGUpO1xuICBjb25zdCBkYXRhc291cmNlID0gdXNlRGF0YXNvdXJjZSgpO1xuICBjb25zdCBxdWVyeSA9IHVzZVF1ZXJ5KCk7XG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcbiAgY29uc3QgZ2V0RmllbGRzID0gdXNlRmllbGRzKHZhbHVlLnR5cGUpO1xuXG4gIGNvbnN0IGdldFR5cGVPcHRpb25zQXN5bmMgPSBhc3luYyAocHJldmlvdXNNZXRyaWNzOiBNZXRyaWNBZ2dyZWdhdGlvbltdKSA9PiB7XG4gICAgY29uc3QgZGJWZXJzaW9uID0gYXdhaXQgZGF0YXNvdXJjZS5nZXREYXRhYmFzZVZlcnNpb24oKTtcbiAgICByZXR1cm4gZ2V0VHlwZU9wdGlvbnMocHJldmlvdXNNZXRyaWNzLCBkYlZlcnNpb24pO1xuICB9O1xuXG4gIGNvbnN0IGxvYWRPcHRpb25zID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlbW90ZUZpZWxkcyA9IGF3YWl0IGdldEZpZWxkcygpO1xuXG4gICAgLy8gTWV0cmljIGFnZ3JlZ2F0aW9ucyB0aGF0IGhhdmUgaW5saW5lIHNjcmlwdCBzdXBwb3J0IGRvbid0IHJlcXVpcmUgYSBmaWVsZCB0byBiZSBzZXQuXG4gICAgaWYgKGlzTWV0cmljQWdncmVnYXRpb25XaXRoSW5saW5lU2NyaXB0KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIFt7IGxhYmVsOiAnTm9uZScgfSwgLi4ucmVtb3RlRmllbGRzXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVtb3RlRmllbGRzO1xuICB9LCBbZ2V0RmllbGRzLCB2YWx1ZV0pO1xuXG4gIGNvbnN0IHByZXZpb3VzTWV0cmljcyA9IHF1ZXJ5Lm1ldHJpY3MhLnNsaWNlKFxuICAgIDAsXG4gICAgcXVlcnkubWV0cmljcyEuZmluZEluZGV4KChtKSA9PiBtLmlkID09PSB2YWx1ZS5pZClcbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8SW5saW5lU2VnbWVudEdyb3VwPlxuICAgICAgICA8U2VnbWVudEFzeW5jXG4gICAgICAgICAgY2xhc3NOYW1lPXtjeChzdHlsZXMuY29sb3IsIHNlZ21lbnRTdHlsZXMpfVxuICAgICAgICAgIGxvYWRPcHRpb25zPXsoKSA9PiBnZXRUeXBlT3B0aW9uc0FzeW5jKHByZXZpb3VzTWV0cmljcyl9XG4gICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBkaXNwYXRjaChjaGFuZ2VNZXRyaWNUeXBlKHsgaWQ6IHZhbHVlLmlkLCB0eXBlOiBlLnZhbHVlISB9KSl9XG4gICAgICAgICAgdmFsdWU9e3RvT3B0aW9uKHZhbHVlKX1cbiAgICAgICAgLz5cblxuICAgICAgICB7aXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhGaWVsZCh2YWx1ZSkgJiYgIWlzUGlwZWxpbmVBZ2dyZWdhdGlvbih2YWx1ZSkgJiYgKFxuICAgICAgICAgIDxTZWdtZW50QXN5bmNcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goc3R5bGVzLmNvbG9yLCBzZWdtZW50U3R5bGVzKX1cbiAgICAgICAgICAgIGxvYWRPcHRpb25zPXtsb2FkT3B0aW9uc31cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gZGlzcGF0Y2goY2hhbmdlTWV0cmljRmllbGQoeyBpZDogdmFsdWUuaWQsIGZpZWxkOiBlLnZhbHVlISB9KSl9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCBGaWVsZFwiXG4gICAgICAgICAgICB2YWx1ZT17dmFsdWUuZmllbGR9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cblxuICAgICAgICB7aXNQaXBlbGluZUFnZ3JlZ2F0aW9uKHZhbHVlKSAmJiAhaXNQaXBlbGluZUFnZ3JlZ2F0aW9uV2l0aE11bHRpcGxlQnVja2V0UGF0aHModmFsdWUpICYmIChcbiAgICAgICAgICA8TWV0cmljUGlja2VyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2N4KHN0eWxlcy5jb2xvciwgc2VnbWVudFN0eWxlcyl9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGRpc3BhdGNoKGNoYW5nZU1ldHJpY0ZpZWxkKHsgaWQ6IHZhbHVlLmlkLCBmaWVsZDogZS52YWx1ZT8uaWQhIH0pKX1cbiAgICAgICAgICAgIG9wdGlvbnM9e3ByZXZpb3VzTWV0cmljc31cbiAgICAgICAgICAgIHZhbHVlPXt2YWx1ZS5maWVsZH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9JbmxpbmVTZWdtZW50R3JvdXA+XG5cbiAgICAgIHtpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aFNldHRpbmdzKHZhbHVlKSAmJiA8U2V0dGluZ3NFZGl0b3IgbWV0cmljPXt2YWx1ZX0gcHJldmlvdXNNZXRyaWNzPXtwcmV2aW91c01ldHJpY3N9IC8+fVxuICAgIDwvPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJwcmV2aW91c01ldHJpY3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/MetricEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/index.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BucketScriptSettingsEditor: () => (/* binding */ BucketScriptSettingsEditor)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineLabel.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _AddRemove__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/AddRemove.tsx\");\n/* harmony import */ var _MetricPicker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/MetricPicker.tsx\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _SettingField__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/SettingField.tsx\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/state/actions.ts\");\n/* harmony import */ var _state_reducer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/state/reducer.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst BucketScriptSettingsEditor = ({ value, previousMetrics }) => {\n  const upperStateDispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__.useDispatch)();\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__.useStatelessReducer)(\n    (newValue) => upperStateDispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.changeMetricAttribute)({ metric: value, attribute: \"pipelineVariables\", newValue })),\n    value.pipelineVariables,\n    _state_reducer__WEBPACK_IMPORTED_MODULE_9__.reducer\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!value.pipelineVariables?.length) {\n      dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_8__.addPipelineVariable)());\n    }\n  }, [dispatch, value.pipelineVariables?.length]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    \"div\",\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n          display: flex;\n        `\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineLabel, { width: 16 }, \"Variables\"),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      \"div\",\n      {\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n            display: grid;\n            grid-template-columns: 1fr auto;\n            row-gap: 4px;\n            margin-bottom: 4px;\n          `\n      },\n      value.pipelineVariables.map((pipelineVar, index) => (\n        // index as a key doesn't work here since removing an element\n        // in the middle of the list, will cause the next element to obtain the same key as the removed one.\n        // this will cause react to \"drop\" the last element of the list instead of the just removed one,\n        // and the default value for the input won't match the model as the DOM won't get updated.\n        // using pipelineVar.name is not an option since it might be duplicated by the user.\n        // generating a unique key on every render, while is probably not the best solution in terms of performance\n        // ensures the UI is in a correct state. We might want to optimize this if we see perf issue in the future.\n        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, { key: (0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(\"es-bs-\") }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n          \"div\",\n          {\n            className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n                  display: grid;\n                  column-gap: 4px;\n                  grid-template-columns: auto auto;\n                `\n          },\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n            _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Input,\n            {\n              \"aria-label\": \"Variable name\",\n              defaultValue: pipelineVar.name,\n              placeholder: \"Variable Name\",\n              onBlur: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_8__.renamePipelineVariable)({ newName: e.target.value, index }))\n            }\n          ),\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n            _MetricPicker__WEBPACK_IMPORTED_MODULE_5__.MetricPicker,\n            {\n              onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_8__.changePipelineVariableMetric)({ newMetric: e.value.id, index })),\n              options: previousMetrics,\n              value: pipelineVar.pipelineAgg\n            }\n          )\n        ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n          _AddRemove__WEBPACK_IMPORTED_MODULE_4__.AddRemove,\n          {\n            index,\n            elements: value.pipelineVariables || [],\n            onAdd: () => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_8__.addPipelineVariable)()),\n            onRemove: () => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_8__.removePipelineVariable)(index))\n          }\n        ))\n      ))\n    )\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _SettingField__WEBPACK_IMPORTED_MODULE_7__.SettingField,\n    {\n      label: \"Script\",\n      metric: value,\n      settingName: \"script\",\n      tooltip: \"Elasticsearch v5.0 and above: Scripting language is Painless. Use params.<var> to reference a variable. Elasticsearch pre-v5.0: Scripting language is per default Groovy if not changed. For Groovy use <var> to reference a variable.\",\n      placeholder: \"params.var1 / params.var2\"\n    }\n  ));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0J1Y2tldFNjcmlwdFNldHRpbmdzRWRpdG9yL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ0s7QUFDa0I7QUFFUjtBQUVjO0FBRXZCO0FBQ0c7QUFDUztBQUNUO0FBT3RCO0FBQ2lCO0FBT2pCLE1BQU0sNkJBQTZCLENBQUMsRUFBRSxPQUFPLGdCQUFnQixNQUFhO0FBQy9FLFFBQU0scUJBQXFCLHVFQUFXLENBQUM7QUFFdkMsUUFBTSxXQUFXLCtFQUFtQjtBQUFuQixJQUNmLENBQUMsYUFDQyxtQkFBbUIscUVBQXFCLENBQUMsRUFBRSxRQUFRLE9BQU8sV0FBVyxxQkFBcUIsU0FBUyxDQUFDLENBQUM7QUFBQSxJQUN2RyxNQUFNO0FBQUEsSUFDTixtREFBTztBQUFQLEVBQ0Y7QUFJQSxrREFBUyxDQUFDLE1BQU07QUFDZCxRQUFJLENBQUMsTUFBTSxtQkFBbUIsUUFBUTtBQUNwQyxlQUFTLG1FQUFtQixDQUFDLENBQUM7QUFBQSxJQUNoQztBQUFBLEVBQ0YsR0FBRyxDQUFDLFVBQVUsTUFBTSxtQkFBbUIsTUFBTSxDQUFDO0FBRTlDLFNBQ0UsMElBQ0U7QUFBQSxJQUFDO0FBQUE7QUFBQSxNQUNDLFdBQVcsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQSxJQUlYLDJFQUFDLHFEQUFXLElBQUMsT0FBTyxNQUFJLFdBQVM7QUFBQSxJQUNqQztBQUFBLE1BQUM7QUFBQTtBQUFBLFFBQ0MsV0FBVyxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE1BT1YsTUFBTSxrQkFBbUIsSUFBSSxDQUFDLGFBQWE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFFBUTFDLDJFQUFDLDJDQUFRLElBQUMsS0FBSyxnREFBUSxDQUFDLFFBQVEsS0FDOUI7QUFBQSxVQUFDO0FBQUE7QUFBQSxZQUNDLFdBQVcsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFNWDtBQUFBLFlBQUMsK0NBQUs7QUFBTDtBQUFBLGNBQ0MsY0FBVztBQUFBLGNBQ1gsY0FBYyxZQUFZO0FBQUEsY0FDMUIsYUFBWTtBQUFBLGNBQ1osUUFBUSxDQUFDLE1BQU0sU0FBUyxzRUFBc0IsQ0FBQyxFQUFFLFNBQVMsRUFBRSxPQUFPLE9BQU8sTUFBTSxDQUFDLENBQUM7QUFBQTtBQUFBLFVBQ3BGO0FBQUEsVUFDQTtBQUFBLFlBQUMsdURBQVk7QUFBWjtBQUFBLGNBQ0MsVUFBVSxDQUFDLE1BQU0sU0FBUyw0RUFBNEIsQ0FBQyxFQUFFLFdBQVcsRUFBRSxNQUFPLElBQUksTUFBTSxDQUFDLENBQUM7QUFBQSxjQUN6RixTQUFTO0FBQUEsY0FDVCxPQUFPLFlBQVk7QUFBQTtBQUFBLFVBQ3JCO0FBQUEsUUFDRixHQUVBO0FBQUEsVUFBQyxpREFBUztBQUFUO0FBQUEsWUFDQztBQUFBLFlBQ0EsVUFBVSxNQUFNLHFCQUFxQixDQUFDO0FBQUEsWUFDdEMsT0FBTyxNQUFNLFNBQVMsbUVBQW1CLENBQUMsQ0FBQztBQUFBLFlBQzNDLFVBQVUsTUFBTSxTQUFTLHNFQUFzQixDQUFDLEtBQUssQ0FBQztBQUFBO0FBQUEsUUFDeEQsQ0FDRjtBQUFBLE9BQ0Q7QUFBQSxJQUNIO0FBQUEsRUFDRixHQUVBO0FBQUEsSUFBQyx1REFBWTtBQUFaO0FBQUEsTUFDQyxPQUFNO0FBQUEsTUFDTixRQUFRO0FBQUEsTUFDUixhQUFZO0FBQUEsTUFDWixTQUFRO0FBQUEsTUFDUixhQUFZO0FBQUE7QUFBQSxFQUNkLENBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0J1Y2tldFNjcmlwdFNldHRpbmdzRWRpdG9yL2luZGV4LnRzeD80OGNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgRnJhZ21lbnQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgSW5wdXQsIElubGluZUxhYmVsIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZWxlc3NSZWR1Y2VyLCB1c2VEaXNwYXRjaCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2hvb2tzL3VzZVN0YXRlbGVzc1JlZHVjZXInO1xuaW1wb3J0IHsgQnVja2V0U2NyaXB0LCBNZXRyaWNBZ2dyZWdhdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IEFkZFJlbW92ZSB9IGZyb20gJy4uLy4uLy4uLy4uL0FkZFJlbW92ZSc7XG5pbXBvcnQgeyBNZXRyaWNQaWNrZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9NZXRyaWNQaWNrZXInO1xuaW1wb3J0IHsgY2hhbmdlTWV0cmljQXR0cmlidXRlIH0gZnJvbSAnLi4vLi4vc3RhdGUvYWN0aW9ucyc7XG5pbXBvcnQgeyBTZXR0aW5nRmllbGQgfSBmcm9tICcuLi9TZXR0aW5nRmllbGQnO1xuXG5pbXBvcnQge1xuICBhZGRQaXBlbGluZVZhcmlhYmxlLFxuICByZW1vdmVQaXBlbGluZVZhcmlhYmxlLFxuICByZW5hbWVQaXBlbGluZVZhcmlhYmxlLFxuICBjaGFuZ2VQaXBlbGluZVZhcmlhYmxlTWV0cmljLFxufSBmcm9tICcuL3N0YXRlL2FjdGlvbnMnO1xuaW1wb3J0IHsgcmVkdWNlciB9IGZyb20gJy4vc3RhdGUvcmVkdWNlcic7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHZhbHVlOiBCdWNrZXRTY3JpcHQ7XG4gIHByZXZpb3VzTWV0cmljczogTWV0cmljQWdncmVnYXRpb25bXTtcbn1cblxuZXhwb3J0IGNvbnN0IEJ1Y2tldFNjcmlwdFNldHRpbmdzRWRpdG9yID0gKHsgdmFsdWUsIHByZXZpb3VzTWV0cmljcyB9OiBQcm9wcykgPT4ge1xuICBjb25zdCB1cHBlclN0YXRlRGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuXG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlU3RhdGVsZXNzUmVkdWNlcihcbiAgICAobmV3VmFsdWUpID0+XG4gICAgICB1cHBlclN0YXRlRGlzcGF0Y2goY2hhbmdlTWV0cmljQXR0cmlidXRlKHsgbWV0cmljOiB2YWx1ZSwgYXR0cmlidXRlOiAncGlwZWxpbmVWYXJpYWJsZXMnLCBuZXdWYWx1ZSB9KSksXG4gICAgdmFsdWUucGlwZWxpbmVWYXJpYWJsZXMsXG4gICAgcmVkdWNlclxuICApO1xuXG4gIC8vIFRoZSBtb2RlbCBtaWdodCBub3QgaGF2ZSBwaXBlbGluZSB2YXJpYWJsZXMgKG9yIGFuIGVtcHR5IGFycmF5IG9mIHBpcGVsaW5lIHZhcnMpIGluIGl0IGJlY2F1c2Ugb2YgdGhlIHdheSBpdCB3YXMgYnVpbHQgaW4gcHJldmlvdXMgdmVyc2lvbnMgb2YgdGhlIGRhdGFzb3VyY2UuXG4gIC8vIElmIHRoaXMgaXMgdGhlIGNhc2Ugd2UgYWRkIGEgZGVmYXVsdCBvbmUuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2YWx1ZS5waXBlbGluZVZhcmlhYmxlcz8ubGVuZ3RoKSB7XG4gICAgICBkaXNwYXRjaChhZGRQaXBlbGluZVZhcmlhYmxlKCkpO1xuICAgIH1cbiAgfSwgW2Rpc3BhdGNoLCB2YWx1ZS5waXBlbGluZVZhcmlhYmxlcz8ubGVuZ3RoXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9e2Nzc2BcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICA8SW5saW5lTGFiZWwgd2lkdGg9ezE2fT5WYXJpYWJsZXM8L0lubGluZUxhYmVsPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtjc3NgXG4gICAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgYXV0bztcbiAgICAgICAgICAgIHJvdy1nYXA6IDRweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICBgfVxuICAgICAgICA+XG4gICAgICAgICAge3ZhbHVlLnBpcGVsaW5lVmFyaWFibGVzIS5tYXAoKHBpcGVsaW5lVmFyLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgLy8gaW5kZXggYXMgYSBrZXkgZG9lc24ndCB3b3JrIGhlcmUgc2luY2UgcmVtb3ZpbmcgYW4gZWxlbWVudFxuICAgICAgICAgICAgLy8gaW4gdGhlIG1pZGRsZSBvZiB0aGUgbGlzdCwgd2lsbCBjYXVzZSB0aGUgbmV4dCBlbGVtZW50IHRvIG9idGFpbiB0aGUgc2FtZSBrZXkgYXMgdGhlIHJlbW92ZWQgb25lLlxuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGNhdXNlIHJlYWN0IHRvIFwiZHJvcFwiIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGxpc3QgaW5zdGVhZCBvZiB0aGUganVzdCByZW1vdmVkIG9uZSxcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIGlucHV0IHdvbid0IG1hdGNoIHRoZSBtb2RlbCBhcyB0aGUgRE9NIHdvbid0IGdldCB1cGRhdGVkLlxuICAgICAgICAgICAgLy8gdXNpbmcgcGlwZWxpbmVWYXIubmFtZSBpcyBub3QgYW4gb3B0aW9uIHNpbmNlIGl0IG1pZ2h0IGJlIGR1cGxpY2F0ZWQgYnkgdGhlIHVzZXIuXG4gICAgICAgICAgICAvLyBnZW5lcmF0aW5nIGEgdW5pcXVlIGtleSBvbiBldmVyeSByZW5kZXIsIHdoaWxlIGlzIHByb2JhYmx5IG5vdCB0aGUgYmVzdCBzb2x1dGlvbiBpbiB0ZXJtcyBvZiBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGUgVUkgaXMgaW4gYSBjb3JyZWN0IHN0YXRlLiBXZSBtaWdodCB3YW50IHRvIG9wdGltaXplIHRoaXMgaWYgd2Ugc2VlIHBlcmYgaXNzdWUgaW4gdGhlIGZ1dHVyZS5cbiAgICAgICAgICAgIDxGcmFnbWVudCBrZXk9e3VuaXF1ZUlkKCdlcy1icy0nKX0+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgICAgICAgICBjb2x1bW4tZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IGF1dG8gYXV0bztcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiVmFyaWFibGUgbmFtZVwiXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3BpcGVsaW5lVmFyLm5hbWV9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlZhcmlhYmxlIE5hbWVcIlxuICAgICAgICAgICAgICAgICAgb25CbHVyPXsoZSkgPT4gZGlzcGF0Y2gocmVuYW1lUGlwZWxpbmVWYXJpYWJsZSh7IG5ld05hbWU6IGUudGFyZ2V0LnZhbHVlLCBpbmRleCB9KSl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8TWV0cmljUGlja2VyXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGRpc3BhdGNoKGNoYW5nZVBpcGVsaW5lVmFyaWFibGVNZXRyaWMoeyBuZXdNZXRyaWM6IGUudmFsdWUhLmlkLCBpbmRleCB9KSl9XG4gICAgICAgICAgICAgICAgICBvcHRpb25zPXtwcmV2aW91c01ldHJpY3N9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17cGlwZWxpbmVWYXIucGlwZWxpbmVBZ2d9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPEFkZFJlbW92ZVxuICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgICAgICBlbGVtZW50cz17dmFsdWUucGlwZWxpbmVWYXJpYWJsZXMgfHwgW119XG4gICAgICAgICAgICAgICAgb25BZGQ9eygpID0+IGRpc3BhdGNoKGFkZFBpcGVsaW5lVmFyaWFibGUoKSl9XG4gICAgICAgICAgICAgICAgb25SZW1vdmU9eygpID0+IGRpc3BhdGNoKHJlbW92ZVBpcGVsaW5lVmFyaWFibGUoaW5kZXgpKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvRnJhZ21lbnQ+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxTZXR0aW5nRmllbGRcbiAgICAgICAgbGFiZWw9XCJTY3JpcHRcIlxuICAgICAgICBtZXRyaWM9e3ZhbHVlfVxuICAgICAgICBzZXR0aW5nTmFtZT1cInNjcmlwdFwiXG4gICAgICAgIHRvb2x0aXA9XCJFbGFzdGljc2VhcmNoIHY1LjAgYW5kIGFib3ZlOiBTY3JpcHRpbmcgbGFuZ3VhZ2UgaXMgUGFpbmxlc3MuIFVzZSBwYXJhbXMuPHZhcj4gdG8gcmVmZXJlbmNlIGEgdmFyaWFibGUuIEVsYXN0aWNzZWFyY2ggcHJlLXY1LjA6IFNjcmlwdGluZyBsYW5ndWFnZSBpcyBwZXIgZGVmYXVsdCBHcm9vdnkgaWYgbm90IGNoYW5nZWQuIEZvciBHcm9vdnkgdXNlIDx2YXI+IHRvIHJlZmVyZW5jZSBhIHZhcmlhYmxlLlwiXG4gICAgICAgIHBsYWNlaG9sZGVyPVwicGFyYW1zLnZhcjEgLyBwYXJhbXMudmFyMlwiXG4gICAgICAvPlxuICAgIDwvPlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/index.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/state/actions.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addPipelineVariable: () => (/* binding */ addPipelineVariable),\n/* harmony export */   changePipelineVariableMetric: () => (/* binding */ changePipelineVariableMetric),\n/* harmony export */   removePipelineVariable: () => (/* binding */ removePipelineVariable),\n/* harmony export */   renamePipelineVariable: () => (/* binding */ renamePipelineVariable)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@reduxjs-toolkit-virtual-75570b104b/0/cache/@reduxjs-toolkit-npm-1.9.3-cbad5da1de-d965fc6197.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js\");\n\n\nconst addPipelineVariable = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@pipelineVariables/add\");\nconst removePipelineVariable = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@pipelineVariables/remove\");\nconst renamePipelineVariable = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@pipelineVariables/rename\");\nconst changePipelineVariableMetric = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\n  \"@pipelineVariables/change_metric\"\n);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0J1Y2tldFNjcmlwdFNldHRpbmdzRWRpdG9yL3N0YXRlL2FjdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTZCO0FBRXRCLE1BQU0sc0JBQXNCLDhEQUFZLENBQUMsd0JBQXdCO0FBQ2pFLE1BQU0seUJBQXlCLDhEQUFZLENBQVMsMkJBQTJCO0FBRS9FLE1BQU0seUJBQXlCLDhEQUFZLENBQXFDLDJCQUEyQjtBQUUzRyxNQUFNLCtCQUErQiw4REFBWTtBQUFaLEVBQzFDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci9TZXR0aW5nc0VkaXRvci9CdWNrZXRTY3JpcHRTZXR0aW5nc0VkaXRvci9zdGF0ZS9hY3Rpb25zLnRzP2NjMDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQWN0aW9uIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5cbmV4cG9ydCBjb25zdCBhZGRQaXBlbGluZVZhcmlhYmxlID0gY3JlYXRlQWN0aW9uKCdAcGlwZWxpbmVWYXJpYWJsZXMvYWRkJyk7XG5leHBvcnQgY29uc3QgcmVtb3ZlUGlwZWxpbmVWYXJpYWJsZSA9IGNyZWF0ZUFjdGlvbjxudW1iZXI+KCdAcGlwZWxpbmVWYXJpYWJsZXMvcmVtb3ZlJyk7XG5cbmV4cG9ydCBjb25zdCByZW5hbWVQaXBlbGluZVZhcmlhYmxlID0gY3JlYXRlQWN0aW9uPHsgaW5kZXg6IG51bWJlcjsgbmV3TmFtZTogc3RyaW5nIH0+KCdAcGlwZWxpbmVWYXJpYWJsZXMvcmVuYW1lJyk7XG5cbmV4cG9ydCBjb25zdCBjaGFuZ2VQaXBlbGluZVZhcmlhYmxlTWV0cmljID0gY3JlYXRlQWN0aW9uPHsgaW5kZXg6IG51bWJlcjsgbmV3TWV0cmljOiBzdHJpbmcgfT4oXG4gICdAcGlwZWxpbmVWYXJpYWJsZXMvY2hhbmdlX21ldHJpYydcbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/state/actions.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/state/reducer.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reducer: () => (/* binding */ reducer)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/utils.ts\");\n/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/state/actions.ts\");\n\n\n\nconst reducer = (state = [], action) => {\n  if (_actions__WEBPACK_IMPORTED_MODULE_1__.addPipelineVariable.match(action)) {\n    return [...state, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.defaultPipelineVariable)((0,_utils__WEBPACK_IMPORTED_MODULE_0__.generatePipelineVariableName)(state))];\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_1__.removePipelineVariable.match(action)) {\n    return state.slice(0, action.payload).concat(state.slice(action.payload + 1));\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_1__.renamePipelineVariable.match(action)) {\n    return state.map((pipelineVariable, index) => {\n      if (index !== action.payload.index) {\n        return pipelineVariable;\n      }\n      return {\n        ...pipelineVariable,\n        name: action.payload.newName\n      };\n    });\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_1__.changePipelineVariableMetric.match(action)) {\n    return state.map((pipelineVariable, index) => {\n      if (index !== action.payload.index) {\n        return pipelineVariable;\n      }\n      return {\n        ...pipelineVariable,\n        pipelineAgg: action.payload.newMetric\n      };\n    });\n  }\n  return state;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0J1Y2tldFNjcmlwdFNldHRpbmdzRWRpdG9yL3N0YXRlL3JlZHVjZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdzRTtBQU8vRDtBQUVBLE1BQU0sVUFBVSxDQUFDLFFBQTRCLENBQUMsR0FBRyxXQUFtQjtBQUN6RSxNQUFJLHlEQUFtQixDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQ3JDLFdBQU8sQ0FBQyxHQUFHLE9BQU8sK0RBQXVCLENBQUMsb0VBQTRCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFBQSxFQUNoRjtBQUVBLE1BQUksNERBQXNCLENBQUMsTUFBTSxNQUFNLEdBQUc7QUFDeEMsV0FBTyxNQUFNLE1BQU0sR0FBRyxPQUFPLE9BQU8sRUFBRSxPQUFPLE1BQU0sTUFBTSxPQUFPLFVBQVUsQ0FBQyxDQUFDO0FBQUEsRUFDOUU7QUFFQSxNQUFJLDREQUFzQixDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQ3hDLFdBQU8sTUFBTSxJQUFJLENBQUMsa0JBQWtCLFVBQVU7QUFDNUMsVUFBSSxVQUFVLE9BQU8sUUFBUSxPQUFPO0FBQ2xDLGVBQU87QUFBQSxNQUNUO0FBRUEsYUFBTztBQUFBLFFBQ0wsR0FBRztBQUFBLFFBQ0gsTUFBTSxPQUFPLFFBQVE7QUFBQSxNQUN2QjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFFQSxNQUFJLGtFQUE0QixDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQzlDLFdBQU8sTUFBTSxJQUFJLENBQUMsa0JBQWtCLFVBQVU7QUFDNUMsVUFBSSxVQUFVLE9BQU8sUUFBUSxPQUFPO0FBQ2xDLGVBQU87QUFBQSxNQUNUO0FBRUEsYUFBTztBQUFBLFFBQ0wsR0FBRztBQUFBLFFBQ0gsYUFBYSxPQUFPLFFBQVE7QUFBQSxNQUM5QjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFFQSxTQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci9TZXR0aW5nc0VkaXRvci9CdWNrZXRTY3JpcHRTZXR0aW5nc0VkaXRvci9zdGF0ZS9yZWR1Y2VyLnRzPzc2NGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5cbmltcG9ydCB7IFBpcGVsaW5lVmFyaWFibGUgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBkZWZhdWx0UGlwZWxpbmVWYXJpYWJsZSwgZ2VuZXJhdGVQaXBlbGluZVZhcmlhYmxlTmFtZSB9IGZyb20gJy4uL3V0aWxzJztcblxuaW1wb3J0IHtcbiAgYWRkUGlwZWxpbmVWYXJpYWJsZSxcbiAgY2hhbmdlUGlwZWxpbmVWYXJpYWJsZU1ldHJpYyxcbiAgcmVtb3ZlUGlwZWxpbmVWYXJpYWJsZSxcbiAgcmVuYW1lUGlwZWxpbmVWYXJpYWJsZSxcbn0gZnJvbSAnLi9hY3Rpb25zJztcblxuZXhwb3J0IGNvbnN0IHJlZHVjZXIgPSAoc3RhdGU6IFBpcGVsaW5lVmFyaWFibGVbXSA9IFtdLCBhY3Rpb246IEFjdGlvbikgPT4ge1xuICBpZiAoYWRkUGlwZWxpbmVWYXJpYWJsZS5tYXRjaChhY3Rpb24pKSB7XG4gICAgcmV0dXJuIFsuLi5zdGF0ZSwgZGVmYXVsdFBpcGVsaW5lVmFyaWFibGUoZ2VuZXJhdGVQaXBlbGluZVZhcmlhYmxlTmFtZShzdGF0ZSkpXTtcbiAgfVxuXG4gIGlmIChyZW1vdmVQaXBlbGluZVZhcmlhYmxlLm1hdGNoKGFjdGlvbikpIHtcbiAgICByZXR1cm4gc3RhdGUuc2xpY2UoMCwgYWN0aW9uLnBheWxvYWQpLmNvbmNhdChzdGF0ZS5zbGljZShhY3Rpb24ucGF5bG9hZCArIDEpKTtcbiAgfVxuXG4gIGlmIChyZW5hbWVQaXBlbGluZVZhcmlhYmxlLm1hdGNoKGFjdGlvbikpIHtcbiAgICByZXR1cm4gc3RhdGUubWFwKChwaXBlbGluZVZhcmlhYmxlLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4ICE9PSBhY3Rpb24ucGF5bG9hZC5pbmRleCkge1xuICAgICAgICByZXR1cm4gcGlwZWxpbmVWYXJpYWJsZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGlwZWxpbmVWYXJpYWJsZSxcbiAgICAgICAgbmFtZTogYWN0aW9uLnBheWxvYWQubmV3TmFtZSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBpZiAoY2hhbmdlUGlwZWxpbmVWYXJpYWJsZU1ldHJpYy5tYXRjaChhY3Rpb24pKSB7XG4gICAgcmV0dXJuIHN0YXRlLm1hcCgocGlwZWxpbmVWYXJpYWJsZSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCAhPT0gYWN0aW9uLnBheWxvYWQuaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHBpcGVsaW5lVmFyaWFibGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnBpcGVsaW5lVmFyaWFibGUsXG4gICAgICAgIHBpcGVsaW5lQWdnOiBhY3Rpb24ucGF5bG9hZC5uZXdNZXRyaWMsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/state/reducer.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/utils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultPipelineVariable: () => (/* binding */ defaultPipelineVariable),\n/* harmony export */   generatePipelineVariableName: () => (/* binding */ generatePipelineVariableName)\n/* harmony export */ });\n\nconst defaultPipelineVariable = (name) => ({ name, pipelineAgg: \"\" });\nconst generatePipelineVariableName = (pipelineVars) => `var${Math.max(0, ...pipelineVars.map((v) => parseInt(v.name.match(\"^var(\\\\d+)$\")?.[1] || \"0\", 10))) + 1}`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL0J1Y2tldFNjcmlwdFNldHRpbmdzRWRpdG9yL3V0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUVPLE1BQU0sMEJBQTBCLENBQUMsVUFBb0MsRUFBRSxNQUFNLGFBQWEsR0FBRztBQU03RixNQUFNLCtCQUErQixDQUFDLGlCQUMzQyxNQUFNLEtBQUssSUFBSSxHQUFHLEdBQUcsYUFBYSxJQUFJLENBQUMsTUFBTSxTQUFTLEVBQUUsS0FBSyxNQUFNLGFBQWEsSUFBSSxDQUFDLEtBQUssS0FBSyxFQUFFLENBQUMsQ0FBQyxJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IvU2V0dGluZ3NFZGl0b3IvQnVja2V0U2NyaXB0U2V0dGluZ3NFZGl0b3IvdXRpbHMudHM/ZWY1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlbGluZVZhcmlhYmxlIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdFBpcGVsaW5lVmFyaWFibGUgPSAobmFtZTogc3RyaW5nKTogUGlwZWxpbmVWYXJpYWJsZSA9PiAoeyBuYW1lLCBwaXBlbGluZUFnZzogJycgfSk7XG5cbi8qKlxuICogR2l2ZW4gYW4gYXJyYXkgb2YgcGlwZWxpbmUgdmFyaWFibGVzIGdlbmVyYXRlcyBhIG5ldyB1bmlxdWUgcGlwZWxpbmUgdmFyaWFibGUgbmFtZSBpbiB0aGUgZm9ybSBvZiBgdmFye259YC5cbiAqIFRoZSB2YWx1ZSBmb3IgYG5gIGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gdGhlIHZhcmlhYmxlcyBuYW1lcyBpbiBwaXBlbGluZVZhcnMgbWF0Y2hpbmcgYHZhcntufWAuXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVBpcGVsaW5lVmFyaWFibGVOYW1lID0gKHBpcGVsaW5lVmFyczogUGlwZWxpbmVWYXJpYWJsZVtdKTogc3RyaW5nID0+XG4gIGB2YXIke01hdGgubWF4KDAsIC4uLnBpcGVsaW5lVmFycy5tYXAoKHYpID0+IHBhcnNlSW50KHYubmFtZS5tYXRjaCgnXnZhcihcXFxcZCspJCcpPy5bMV0gfHwgJzAnLCAxMCkpKSArIDF9YDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/utils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/MovingAverageSettingsEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MovingAverageSettingsEditor: () => (/* binding */ MovingAverageSettingsEditor)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Switch/Switch.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _queryDef__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/queryDef.ts\");\n/* harmony import */ var _aggregations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _SettingField__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/SettingField.tsx\");\n\n\n\n\n\n\n\n\n\nconst MovingAverageSettingsEditor = ({ metric }) => {\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n  const { current: baseId } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqueId)(\"es-moving-avg-\"));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Model\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Select,\n    {\n      inputId: `${baseId}-model`,\n      onChange: (value) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({ metric, settingName: \"model\", newValue: value.value })),\n      options: _queryDef__WEBPACK_IMPORTED_MODULE_3__.movingAvgModelOptions,\n      value: metric.settings?.model\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_6__.SettingField, { label: \"Window\", settingName: \"window\", metric, placeholder: \"5\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_6__.SettingField, { label: \"Predict\", settingName: \"predict\", metric }), ((0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isEWMAMovingAverage)(metric) || (0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isHoltMovingAverage)(metric) || (0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isHoltWintersMovingAverage)(metric)) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Alpha\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n    {\n      id: `${baseId}-alpha`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({\n          metric,\n          settingName: \"settings\",\n          newValue: {\n            ...metric.settings?.settings,\n            alpha: e.target.value\n          }\n        })\n      ),\n      defaultValue: metric.settings?.settings?.alpha\n    }\n  )), ((0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isHoltMovingAverage)(metric) || (0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isHoltWintersMovingAverage)(metric)) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Beta\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n    {\n      id: `${baseId}-beta`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({\n          metric,\n          settingName: \"settings\",\n          newValue: {\n            ...metric.settings?.settings,\n            beta: e.target.value\n          }\n        })\n      ),\n      defaultValue: metric.settings?.settings?.beta\n    }\n  )), (0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isHoltWintersMovingAverage)(metric) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Gamma\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n    {\n      id: `${baseId}-gamma`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({\n          metric,\n          settingName: \"settings\",\n          newValue: {\n            ...metric.settings?.settings,\n            gamma: e.target.value\n          }\n        })\n      ),\n      defaultValue: metric.settings?.settings?.gamma\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Period\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n    {\n      id: `${baseId}-period`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({\n          metric,\n          settingName: \"settings\",\n          newValue: {\n            ...metric.settings?.settings,\n            period: e.target.value\n          }\n        })\n      ),\n      defaultValue: metric.settings?.settings?.period\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Pad\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineSwitch,\n    {\n      id: `${baseId}-pad`,\n      onChange: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({\n          metric,\n          settingName: \"settings\",\n          newValue: { ...metric.settings?.settings, pad: e.target.checked }\n        })\n      ),\n      checked: !!metric.settings?.settings?.pad\n    }\n  ))), ((0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isEWMAMovingAverage)(metric) || (0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isHoltMovingAverage)(metric) || (0,_aggregations__WEBPACK_IMPORTED_MODULE_4__.isHoltWintersMovingAverage)(metric)) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.InlineField, { label: \"Minimize\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_10__.InlineSwitch,\n    {\n      id: `${baseId}-minimize`,\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({ metric, settingName: \"minimize\", newValue: e.target.checked })),\n      checked: !!metric.settings?.minimize\n    }\n  )));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL01vdmluZ0F2ZXJhZ2VTZXR0aW5nc0VkaXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlCO0FBQ0s7QUFFMkI7QUFFN0I7QUFDVTtBQUUrQztBQUNqRDtBQUVQO0FBU3RCLE1BQU0sOEJBQThCLENBQUMsRUFBRSxPQUFPLE1BQWE7QUFDaEUsUUFBTSxXQUFXLHVFQUFXLENBQUM7QUFDN0IsUUFBTSxFQUFFLFNBQVMsT0FBTyxJQUFJLDZDQUFNLENBQUMsZ0RBQVEsQ0FBQyxnQkFBZ0IsQ0FBQztBQUU3RCxTQUNFLDBJQUNFLDJFQUFDLG9EQUFXLElBQUMsT0FBTSxTQUFRLFlBQVksTUFDckM7QUFBQSxJQUFDLCtDQUFNO0FBQU47QUFBQSxNQUNDLFNBQVMsR0FBRztBQUFBLE1BQ1osVUFBVSxDQUFDLFVBQVUsU0FBUyxtRUFBbUIsQ0FBQyxFQUFFLFFBQVEsYUFBYSxTQUFTLFVBQVUsTUFBTSxNQUFNLENBQUMsQ0FBQztBQUFBLE1BQzFHLFNBQVMsNERBQXFCO0FBQXJCLE1BQ1QsT0FBTyxPQUFPLFVBQVU7QUFBQTtBQUFBLEVBQzFCLENBQ0YsR0FFQSwyRUFBQyx1REFBWSxJQUFDLE9BQU0sVUFBUyxhQUFZLFVBQVMsUUFBZ0IsYUFBWSxLQUFJLEdBRWxGLDJFQUFDLHVEQUFZLElBQUMsT0FBTSxXQUFVLGFBQVksV0FBVSxRQUFnQixJQUVsRSxrRUFBbUIsQ0FBQyxNQUFNLEtBQUssa0VBQW1CLENBQUMsTUFBTSxLQUFLLHlFQUEwQixDQUFDLE1BQU0sTUFDL0YsMkVBQUMsb0RBQVcsSUFBQyxPQUFNLFNBQVEsWUFBWSxNQUNyQztBQUFBLElBQUMsOENBQUs7QUFBTDtBQUFBLE1BQ0MsSUFBSSxHQUFHO0FBQUEsTUFDUCxRQUFRLENBQUMsTUFDUDtBQUFBLFFBQ0UsbUVBQW1CLENBQUM7QUFBQSxVQUNsQjtBQUFBLFVBQ0EsYUFBYTtBQUFBLFVBQ2IsVUFBVTtBQUFBLFlBQ1IsR0FBRyxPQUFPLFVBQVU7QUFBQSxZQUNwQixPQUFPLEVBQUUsT0FBTztBQUFBLFVBQ2xCO0FBQUEsUUFDRixDQUFDO0FBQUEsTUFDSDtBQUFBLE1BRUYsY0FBYyxPQUFPLFVBQVUsVUFBVTtBQUFBO0FBQUEsRUFDM0MsQ0FDRixJQUdBLGtFQUFtQixDQUFDLE1BQU0sS0FBSyx5RUFBMEIsQ0FBQyxNQUFNLE1BQ2hFLDJFQUFDLG9EQUFXLElBQUMsT0FBTSxRQUFPLFlBQVksTUFDcEM7QUFBQSxJQUFDLDhDQUFLO0FBQUw7QUFBQSxNQUNDLElBQUksR0FBRztBQUFBLE1BQ1AsUUFBUSxDQUFDLE1BQ1A7QUFBQSxRQUNFLG1FQUFtQixDQUFDO0FBQUEsVUFDbEI7QUFBQSxVQUNBLGFBQWE7QUFBQSxVQUNiLFVBQVU7QUFBQSxZQUNSLEdBQUcsT0FBTyxVQUFVO0FBQUEsWUFDcEIsTUFBTSxFQUFFLE9BQU87QUFBQSxVQUNqQjtBQUFBLFFBQ0YsQ0FBQztBQUFBLE1BQ0g7QUFBQSxNQUVGLGNBQWMsT0FBTyxVQUFVLFVBQVU7QUFBQTtBQUFBLEVBQzNDLENBQ0YsR0FHRCx5RUFBMEIsQ0FBQyxNQUFNLEtBQ2hDLDBJQUNFLDJFQUFDLG9EQUFXLElBQUMsT0FBTSxTQUFRLFlBQVksTUFDckM7QUFBQSxJQUFDLDhDQUFLO0FBQUw7QUFBQSxNQUNDLElBQUksR0FBRztBQUFBLE1BQ1AsUUFBUSxDQUFDLE1BQ1A7QUFBQSxRQUNFLG1FQUFtQixDQUFDO0FBQUEsVUFDbEI7QUFBQSxVQUNBLGFBQWE7QUFBQSxVQUNiLFVBQVU7QUFBQSxZQUNSLEdBQUcsT0FBTyxVQUFVO0FBQUEsWUFDcEIsT0FBTyxFQUFFLE9BQU87QUFBQSxVQUNsQjtBQUFBLFFBQ0YsQ0FBQztBQUFBLE1BQ0g7QUFBQSxNQUVGLGNBQWMsT0FBTyxVQUFVLFVBQVU7QUFBQTtBQUFBLEVBQzNDLENBQ0YsR0FDQSwyRUFBQyxvREFBVyxJQUFDLE9BQU0sVUFBUyxZQUFZLE1BQ3RDO0FBQUEsSUFBQyw4Q0FBSztBQUFMO0FBQUEsTUFDQyxJQUFJLEdBQUc7QUFBQSxNQUNQLFFBQVEsQ0FBQyxNQUNQO0FBQUEsUUFDRSxtRUFBbUIsQ0FBQztBQUFBLFVBQ2xCO0FBQUEsVUFDQSxhQUFhO0FBQUEsVUFDYixVQUFVO0FBQUEsWUFDUixHQUFHLE9BQU8sVUFBVTtBQUFBLFlBQ3BCLFFBQVEsRUFBRSxPQUFPO0FBQUEsVUFDbkI7QUFBQSxRQUNGLENBQUM7QUFBQSxNQUNIO0FBQUEsTUFFRixjQUFjLE9BQU8sVUFBVSxVQUFVO0FBQUE7QUFBQSxFQUMzQyxDQUNGLEdBRUEsMkVBQUMsb0RBQVcsSUFBQyxPQUFNLE9BQU0sWUFBWSxNQUNuQztBQUFBLElBQUMsc0RBQVk7QUFBWjtBQUFBLE1BQ0MsSUFBSSxHQUFHO0FBQUEsTUFDUCxVQUFVLENBQUMsTUFDVDtBQUFBLFFBQ0UsbUVBQW1CLENBQUM7QUFBQSxVQUNsQjtBQUFBLFVBQ0EsYUFBYTtBQUFBLFVBQ2IsVUFBVSxFQUFFLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxFQUFFLE9BQU8sUUFBUTtBQUFBLFFBQ2xFLENBQUM7QUFBQSxNQUNIO0FBQUEsTUFFRixTQUFTLENBQUMsQ0FBQyxPQUFPLFVBQVUsVUFBVTtBQUFBO0FBQUEsRUFDeEMsQ0FDRixDQUNGLElBR0Esa0VBQW1CLENBQUMsTUFBTSxLQUFLLGtFQUFtQixDQUFDLE1BQU0sS0FBSyx5RUFBMEIsQ0FBQyxNQUFNLE1BQy9GLDJFQUFDLG9EQUFXLElBQUMsT0FBTSxZQUFXLFlBQVksTUFDeEM7QUFBQSxJQUFDLHNEQUFZO0FBQVo7QUFBQSxNQUNDLElBQUksR0FBRztBQUFBLE1BQ1AsVUFBVSxDQUFDLE1BQ1QsU0FBUyxtRUFBbUIsQ0FBQyxFQUFFLFFBQVEsYUFBYSxZQUFZLFVBQVUsRUFBRSxPQUFPLFFBQVEsQ0FBQyxDQUFDO0FBQUEsTUFFL0YsU0FBUyxDQUFDLENBQUMsT0FBTyxVQUFVO0FBQUE7QUFBQSxFQUM5QixDQUNGLENBRUo7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL01vdmluZ0F2ZXJhZ2VTZXR0aW5nc0VkaXRvci50c3g/ZTZjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBJbnB1dCwgSW5saW5lRmllbGQsIFNlbGVjdCwgSW5saW5lU3dpdGNoIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJy4uLy4uLy4uLy4uL2hvb2tzL3VzZVN0YXRlbGVzc1JlZHVjZXInO1xuaW1wb3J0IHsgbW92aW5nQXZnTW9kZWxPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vcXVlcnlEZWYnO1xuaW1wb3J0IHsgTW92aW5nQXZlcmFnZSB9IGZyb20gJy4uLy4uLy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IGlzRVdNQU1vdmluZ0F2ZXJhZ2UsIGlzSG9sdE1vdmluZ0F2ZXJhZ2UsIGlzSG9sdFdpbnRlcnNNb3ZpbmdBdmVyYWdlIH0gZnJvbSAnLi4vYWdncmVnYXRpb25zJztcbmltcG9ydCB7IGNoYW5nZU1ldHJpY1NldHRpbmcgfSBmcm9tICcuLi9zdGF0ZS9hY3Rpb25zJztcblxuaW1wb3J0IHsgU2V0dGluZ0ZpZWxkIH0gZnJvbSAnLi9TZXR0aW5nRmllbGQnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBtZXRyaWM6IE1vdmluZ0F2ZXJhZ2U7XG59XG5cbi8vIFRoZSB3YXkgd2UgaGFuZGxlIGNoYW5nZXMgZm9yIHRob3NlIHNldHRpbmdzIGlzIG5vdCBpZGVhbCBjb21wYXJlZCB0byB0aGUgb3RoZXIgY29tcG9uZW50cyBpbiB0aGUgZWRpdG9yXG4vLyBGSVhNRTogdXNpbmcgYGNoYW5nZU1ldHJpY1NldHRpbmdgIHdpbGwgY2F1c2UgYW4gZXJyb3Igd2hlbiBzd2l0Y2hpbmcgZnJvbSBtb2RlbHMgdGhhdCBoYXZlIGRpZmZlcmVudCBvcHRpb25zXG4vLyBhcyB0aGV5IG1pZ2h0IGJlIGluY29tcGF0aWJsZS4gV2Ugc2hvdWxkIGNsZWFyIGFsbCBvdGhlciBvcHRpb25zIG9uIG1vZGVsIGNoYW5nZS5cbmV4cG9ydCBjb25zdCBNb3ZpbmdBdmVyYWdlU2V0dGluZ3NFZGl0b3IgPSAoeyBtZXRyaWMgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCB7IGN1cnJlbnQ6IGJhc2VJZCB9ID0gdXNlUmVmKHVuaXF1ZUlkKCdlcy1tb3ZpbmctYXZnLScpKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJNb2RlbFwiIGxhYmVsV2lkdGg9ezE2fT5cbiAgICAgICAgPFNlbGVjdFxuICAgICAgICAgIGlucHV0SWQ9e2Ake2Jhc2VJZH0tbW9kZWxgfVxuICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IGRpc3BhdGNoKGNoYW5nZU1ldHJpY1NldHRpbmcoeyBtZXRyaWMsIHNldHRpbmdOYW1lOiAnbW9kZWwnLCBuZXdWYWx1ZTogdmFsdWUudmFsdWUgfSkpfVxuICAgICAgICAgIG9wdGlvbnM9e21vdmluZ0F2Z01vZGVsT3B0aW9uc31cbiAgICAgICAgICB2YWx1ZT17bWV0cmljLnNldHRpbmdzPy5tb2RlbH1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgIDxTZXR0aW5nRmllbGQgbGFiZWw9XCJXaW5kb3dcIiBzZXR0aW5nTmFtZT1cIndpbmRvd1wiIG1ldHJpYz17bWV0cmljfSBwbGFjZWhvbGRlcj1cIjVcIiAvPlxuXG4gICAgICA8U2V0dGluZ0ZpZWxkIGxhYmVsPVwiUHJlZGljdFwiIHNldHRpbmdOYW1lPVwicHJlZGljdFwiIG1ldHJpYz17bWV0cmljfSAvPlxuXG4gICAgICB7KGlzRVdNQU1vdmluZ0F2ZXJhZ2UobWV0cmljKSB8fCBpc0hvbHRNb3ZpbmdBdmVyYWdlKG1ldHJpYykgfHwgaXNIb2x0V2ludGVyc01vdmluZ0F2ZXJhZ2UobWV0cmljKSkgJiYgKFxuICAgICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJBbHBoYVwiIGxhYmVsV2lkdGg9ezE2fT5cbiAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LWFscGhhYH1cbiAgICAgICAgICAgIG9uQmx1cj17KGUpID0+XG4gICAgICAgICAgICAgIGRpc3BhdGNoKFxuICAgICAgICAgICAgICAgIGNoYW5nZU1ldHJpY1NldHRpbmcoe1xuICAgICAgICAgICAgICAgICAgbWV0cmljLFxuICAgICAgICAgICAgICAgICAgc2V0dGluZ05hbWU6ICdzZXR0aW5ncycsXG4gICAgICAgICAgICAgICAgICBuZXdWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAuLi5tZXRyaWMuc2V0dGluZ3M/LnNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bWV0cmljLnNldHRpbmdzPy5zZXR0aW5ncz8uYWxwaGF9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICl9XG5cbiAgICAgIHsoaXNIb2x0TW92aW5nQXZlcmFnZShtZXRyaWMpIHx8IGlzSG9sdFdpbnRlcnNNb3ZpbmdBdmVyYWdlKG1ldHJpYykpICYmIChcbiAgICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiQmV0YVwiIGxhYmVsV2lkdGg9ezE2fT5cbiAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LWJldGFgfVxuICAgICAgICAgICAgb25CbHVyPXsoZSkgPT5cbiAgICAgICAgICAgICAgZGlzcGF0Y2goXG4gICAgICAgICAgICAgICAgY2hhbmdlTWV0cmljU2V0dGluZyh7XG4gICAgICAgICAgICAgICAgICBtZXRyaWMsXG4gICAgICAgICAgICAgICAgICBzZXR0aW5nTmFtZTogJ3NldHRpbmdzJyxcbiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm1ldHJpYy5zZXR0aW5ncz8uc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgIGJldGE6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU9e21ldHJpYy5zZXR0aW5ncz8uc2V0dGluZ3M/LmJldGF9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICl9XG5cbiAgICAgIHtpc0hvbHRXaW50ZXJzTW92aW5nQXZlcmFnZShtZXRyaWMpICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJHYW1tYVwiIGxhYmVsV2lkdGg9ezE2fT5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICBpZD17YCR7YmFzZUlkfS1nYW1tYWB9XG4gICAgICAgICAgICAgIG9uQmx1cj17KGUpID0+XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VNZXRyaWNTZXR0aW5nKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0cmljLFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nTmFtZTogJ3NldHRpbmdzJyxcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5tZXRyaWMuc2V0dGluZ3M/LnNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgIGdhbW1hOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bWV0cmljLnNldHRpbmdzPy5zZXR0aW5ncz8uZ2FtbWF9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiUGVyaW9kXCIgbGFiZWxXaWR0aD17MTZ9PlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LXBlcmlvZGB9XG4gICAgICAgICAgICAgIG9uQmx1cj17KGUpID0+XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VNZXRyaWNTZXR0aW5nKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0cmljLFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nTmFtZTogJ3NldHRpbmdzJyxcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5tZXRyaWMuc2V0dGluZ3M/LnNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgIHBlcmlvZDogZS50YXJnZXQudmFsdWUhLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttZXRyaWMuc2V0dGluZ3M/LnNldHRpbmdzPy5wZXJpb2R9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJQYWRcIiBsYWJlbFdpZHRoPXsxNn0+XG4gICAgICAgICAgICA8SW5saW5lU3dpdGNoXG4gICAgICAgICAgICAgIGlkPXtgJHtiYXNlSWR9LXBhZGB9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VNZXRyaWNTZXR0aW5nKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0cmljLFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nTmFtZTogJ3NldHRpbmdzJyxcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU6IHsgLi4ubWV0cmljLnNldHRpbmdzPy5zZXR0aW5ncywgcGFkOiBlLnRhcmdldC5jaGVja2VkIH0sXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjaGVja2VkPXshIW1ldHJpYy5zZXR0aW5ncz8uc2V0dGluZ3M/LnBhZH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICAgPC8+XG4gICAgICApfVxuXG4gICAgICB7KGlzRVdNQU1vdmluZ0F2ZXJhZ2UobWV0cmljKSB8fCBpc0hvbHRNb3ZpbmdBdmVyYWdlKG1ldHJpYykgfHwgaXNIb2x0V2ludGVyc01vdmluZ0F2ZXJhZ2UobWV0cmljKSkgJiYgKFxuICAgICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJNaW5pbWl6ZVwiIGxhYmVsV2lkdGg9ezE2fT5cbiAgICAgICAgICA8SW5saW5lU3dpdGNoXG4gICAgICAgICAgICBpZD17YCR7YmFzZUlkfS1taW5pbWl6ZWB9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PlxuICAgICAgICAgICAgICBkaXNwYXRjaChjaGFuZ2VNZXRyaWNTZXR0aW5nKHsgbWV0cmljLCBzZXR0aW5nTmFtZTogJ21pbmltaXplJywgbmV3VmFsdWU6IGUudGFyZ2V0LmNoZWNrZWQgfSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVja2VkPXshIW1ldHJpYy5zZXR0aW5ncz8ubWluaW1pemV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/MovingAverageSettingsEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/SettingField.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingField: () => (/* binding */ SettingField)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var app_plugins_datasource_elasticsearch_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n\n\n\n\n\n\n\nfunction SettingField({\n  label,\n  settingName,\n  metric,\n  placeholder,\n  tooltip\n}) {\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__.useDispatch)();\n  const [id] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqueId)(`es-field-id-`));\n  const settings = metric.settings;\n  let defaultValue = settings?.[settingName] || \"\";\n  if (settingName === \"script\") {\n    defaultValue = (0,app_plugins_datasource_elasticsearch_utils__WEBPACK_IMPORTED_MODULE_2__.getScriptValue)(metric);\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.InlineField, { label, labelWidth: 16, tooltip }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Input,\n    {\n      id,\n      placeholder,\n      onBlur: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.changeMetricSetting)({ metric, settingName, newValue: e.target.value })),\n      defaultValue\n    }\n  ));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL1NldHRpbmdGaWVsZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBeUI7QUFDdUI7QUFFYjtBQUNKO0FBRUg7QUFHUTtBQVU3QixTQUFTLGFBQWlGO0FBQUEsRUFDL0Y7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0YsR0FBZ0I7QUFDZCxRQUFNLFdBQVcsdUVBQVcsQ0FBQztBQUM3QixRQUFNLENBQUMsRUFBRSxJQUFJLCtDQUFRLENBQUMsZ0RBQVEsQ0FBQyxjQUFjLENBQUM7QUFDOUMsUUFBTSxXQUFXLE9BQU87QUFFeEIsTUFBSSxlQUFlLFdBQVcsV0FBb0MsS0FBSztBQUV2RSxNQUFJLGdCQUFnQixVQUFVO0FBQzVCLG1CQUFlLDBGQUFjLENBQUMsTUFBMkM7QUFBQSxFQUMzRTtBQUVBLFNBQ0UsMkVBQUMsb0RBQVcsSUFBQyxPQUFjLFlBQVksSUFBSSxXQUN6QztBQUFBLElBQUMsOENBQUs7QUFBTDtBQUFBLE1BQ0M7QUFBQSxNQUNBO0FBQUEsTUFDQSxRQUFRLENBQUMsTUFBTSxTQUFTLG1FQUFtQixDQUFDLEVBQUUsUUFBUSxhQUFhLFVBQVUsRUFBRSxPQUFPLE1BQU0sQ0FBQyxDQUFDO0FBQUEsTUFDOUY7QUFBQTtBQUFBLEVBQ0YsQ0FDRjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IvU2V0dGluZ3NFZGl0b3IvU2V0dGluZ0ZpZWxkLnRzeD80ZGMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVuaXF1ZUlkIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnRQcm9wcywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IElubGluZUZpZWxkLCBJbnB1dCB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IGdldFNjcmlwdFZhbHVlIH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL3V0aWxzJztcblxuaW1wb3J0IHsgdXNlRGlzcGF0Y2ggfSBmcm9tICcuLi8uLi8uLi8uLi9ob29rcy91c2VTdGF0ZWxlc3NSZWR1Y2VyJztcbmltcG9ydCB7IE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aElubGluZVNjcmlwdCwgTWV0cmljQWdncmVnYXRpb25XaXRoU2V0dGluZ3MgfSBmcm9tICcuLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBTZXR0aW5nS2V5T2YgfSBmcm9tICcuLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBjaGFuZ2VNZXRyaWNTZXR0aW5nIH0gZnJvbSAnLi4vc3RhdGUvYWN0aW9ucyc7XG5cbmludGVyZmFjZSBQcm9wczxUIGV4dGVuZHMgTWV0cmljQWdncmVnYXRpb25XaXRoU2V0dGluZ3MsIEsgZXh0ZW5kcyBTZXR0aW5nS2V5T2Y8VD4+IHtcbiAgbGFiZWw6IHN0cmluZztcbiAgc2V0dGluZ05hbWU6IEs7XG4gIG1ldHJpYzogVDtcbiAgcGxhY2Vob2xkZXI/OiBDb21wb25lbnRQcm9wczx0eXBlb2YgSW5wdXQ+WydwbGFjZWhvbGRlciddO1xuICB0b29sdGlwPzogQ29tcG9uZW50UHJvcHM8dHlwZW9mIElubGluZUZpZWxkPlsndG9vbHRpcCddO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU2V0dGluZ0ZpZWxkPFQgZXh0ZW5kcyBNZXRyaWNBZ2dyZWdhdGlvbldpdGhTZXR0aW5ncywgSyBleHRlbmRzIFNldHRpbmdLZXlPZjxUPj4oe1xuICBsYWJlbCxcbiAgc2V0dGluZ05hbWUsXG4gIG1ldHJpYyxcbiAgcGxhY2Vob2xkZXIsXG4gIHRvb2x0aXAsXG59OiBQcm9wczxULCBLPikge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IFtpZF0gPSB1c2VTdGF0ZSh1bmlxdWVJZChgZXMtZmllbGQtaWQtYCkpO1xuICBjb25zdCBzZXR0aW5ncyA9IG1ldHJpYy5zZXR0aW5ncztcblxuICBsZXQgZGVmYXVsdFZhbHVlID0gc2V0dGluZ3M/LltzZXR0aW5nTmFtZSBhcyBrZXlvZiB0eXBlb2Ygc2V0dGluZ3NdIHx8ICcnO1xuXG4gIGlmIChzZXR0aW5nTmFtZSA9PT0gJ3NjcmlwdCcpIHtcbiAgICBkZWZhdWx0VmFsdWUgPSBnZXRTY3JpcHRWYWx1ZShtZXRyaWMgYXMgTWV0cmljQWdncmVnYXRpb25XaXRoSW5saW5lU2NyaXB0KTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPElubGluZUZpZWxkIGxhYmVsPXtsYWJlbH0gbGFiZWxXaWR0aD17MTZ9IHRvb2x0aXA9e3Rvb2x0aXB9PlxuICAgICAgPElucHV0XG4gICAgICAgIGlkPXtpZH1cbiAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICBvbkJsdXI9eyhlKSA9PiBkaXNwYXRjaChjaGFuZ2VNZXRyaWNTZXR0aW5nKHsgbWV0cmljLCBzZXR0aW5nTmFtZSwgbmV3VmFsdWU6IGUudGFyZ2V0LnZhbHVlIH0pKX1cbiAgICAgICAgZGVmYXVsdFZhbHVlPXtkZWZhdWx0VmFsdWV9XG4gICAgICAvPlxuICAgIDwvSW5saW5lRmllbGQ+XG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/SettingField.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/TopMetricsSettingsEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TopMetricsSettingsEditor: () => (/* binding */ TopMetricsSettingsEditor)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Segment/SegmentAsync.tsx\");\n/* harmony import */ var _hooks_useFields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useFields.ts\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _BucketAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n\n\n\n\n\n\n\n\nconst toMultiSelectValue = (value) => ({ value, label: value });\nconst TopMetricsSettingsEditor = ({ metric }) => {\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__.useDispatch)();\n  const getOrderByOptions = (0,_hooks_useFields__WEBPACK_IMPORTED_MODULE_2__.useFields)([\"number\", \"date\"]);\n  const getMetricsOptions = (0,_hooks_useFields__WEBPACK_IMPORTED_MODULE_2__.useFields)(metric.type);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.InlineField, { label: \"Metrics\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.AsyncMultiSelect,\n    {\n      onChange: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({\n          metric,\n          settingName: \"metrics\",\n          newValue: e.map((v) => v.value)\n        })\n      ),\n      loadOptions: getMetricsOptions,\n      value: metric.settings?.metrics?.map(toMultiSelectValue),\n      closeMenuOnSelect: false,\n      defaultOptions: true\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.InlineField, { label: \"Order\", labelWidth: 16 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Select,\n    {\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({ metric, settingName: \"order\", newValue: e.value })),\n      options: _BucketAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_4__.orderOptions,\n      value: metric.settings?.order\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.InlineField,\n    {\n      label: \"Order By\",\n      labelWidth: 16,\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n          & > div {\n            width: 100%;\n          }\n        `\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.SegmentAsync,\n      {\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n            margin-right: 0;\n          `,\n        loadOptions: getOrderByOptions,\n        onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting)({ metric, settingName: \"orderBy\", newValue: e.value })),\n        placeholder: \"Select Field\",\n        value: metric.settings?.orderBy\n      }\n    )\n  ));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL1RvcE1ldHJpY3NTZXR0aW5nc0VkaXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ0Y7QUFHa0Q7QUFFMUM7QUFDRTtBQUVDO0FBQ087QUFNcEMsTUFBTSxxQkFBcUIsQ0FBQyxXQUE0QyxFQUFFLE9BQU8sT0FBTyxNQUFNO0FBRXZGLE1BQU0sMkJBQTJCLENBQUMsRUFBRSxPQUFPLE1BQWE7QUFDN0QsUUFBTSxXQUFXLHVFQUFXLENBQUM7QUFDN0IsUUFBTSxvQkFBb0IsMkRBQVMsQ0FBQyxDQUFDLFVBQVUsTUFBTSxDQUFDO0FBQ3RELFFBQU0sb0JBQW9CLDJEQUFTLENBQUMsT0FBTyxJQUFJO0FBRS9DLFNBQ0UsMElBQ0UsMkVBQUMsb0RBQVcsSUFBQyxPQUFNLFdBQVUsWUFBWSxNQUN2QztBQUFBLElBQUMseURBQWdCO0FBQWhCO0FBQUEsTUFDQyxVQUFVLENBQUMsTUFDVDtBQUFBLFFBQ0UsbUVBQW1CLENBQUM7QUFBQSxVQUNsQjtBQUFBLFVBQ0EsYUFBYTtBQUFBLFVBQ2IsVUFBVSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBTTtBQUFBLFFBQ2pDLENBQUM7QUFBQSxNQUNIO0FBQUEsTUFFRixhQUFhO0FBQUEsTUFDYixPQUFPLE9BQU8sVUFBVSxTQUFTLElBQUksa0JBQWtCO0FBQUEsTUFDdkQsbUJBQW1CO0FBQUEsTUFDbkIsZ0JBQWM7QUFBQTtBQUFBLEVBQ2hCLENBQ0YsR0FDQSwyRUFBQyxvREFBVyxJQUFDLE9BQU0sU0FBUSxZQUFZLE1BQ3JDO0FBQUEsSUFBQywrQ0FBTTtBQUFOO0FBQUEsTUFDQyxVQUFVLENBQUMsTUFBTSxTQUFTLG1FQUFtQixDQUFDLEVBQUUsUUFBUSxhQUFhLFNBQVMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQUEsTUFDbEcsU0FBUyx5RUFBWTtBQUFaLE1BQ1QsT0FBTyxPQUFPLFVBQVU7QUFBQTtBQUFBLEVBQzFCLENBQ0YsR0FDQTtBQUFBLElBQUMsb0RBQVc7QUFBWDtBQUFBLE1BQ0MsT0FBTTtBQUFBLE1BQ04sWUFBWTtBQUFBLE1BQ1osV0FBVyxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU1YO0FBQUEsTUFBQyxxREFBWTtBQUFaO0FBQUEsUUFDQyxXQUFXLGlEQUFHO0FBQUg7QUFBQTtBQUFBLFFBR1gsYUFBYTtBQUFBLFFBQ2IsVUFBVSxDQUFDLE1BQU0sU0FBUyxtRUFBbUIsQ0FBQyxFQUFFLFFBQVEsYUFBYSxXQUFXLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUFBLFFBQ3BHLGFBQVk7QUFBQSxRQUNaLE9BQU8sT0FBTyxVQUFVO0FBQUE7QUFBQSxJQUMxQjtBQUFBLEVBQ0YsQ0FDRjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IvU2V0dGluZ3NFZGl0b3IvVG9wTWV0cmljc1NldHRpbmdzRWRpdG9yLnRzeD85NDQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBTZWxlY3RhYmxlVmFsdWUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEFzeW5jTXVsdGlTZWxlY3QsIElubGluZUZpZWxkLCBTZWdtZW50QXN5bmMsIFNlbGVjdCB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgdXNlRmllbGRzIH0gZnJvbSAnLi4vLi4vLi4vLi4vaG9va3MvdXNlRmllbGRzJztcbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi4vLi4vLi4vLi4vaG9va3MvdXNlU3RhdGVsZXNzUmVkdWNlcic7XG5pbXBvcnQgeyBUb3BNZXRyaWNzIH0gZnJvbSAnLi4vLi4vLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgb3JkZXJPcHRpb25zIH0gZnJvbSAnLi4vLi4vQnVja2V0QWdncmVnYXRpb25zRWRpdG9yL3V0aWxzJztcbmltcG9ydCB7IGNoYW5nZU1ldHJpY1NldHRpbmcgfSBmcm9tICcuLi9zdGF0ZS9hY3Rpb25zJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgbWV0cmljOiBUb3BNZXRyaWNzO1xufVxuXG5jb25zdCB0b011bHRpU2VsZWN0VmFsdWUgPSAodmFsdWU6IHN0cmluZyk6IFNlbGVjdGFibGVWYWx1ZTxzdHJpbmc+ID0+ICh7IHZhbHVlLCBsYWJlbDogdmFsdWUgfSk7XG5cbmV4cG9ydCBjb25zdCBUb3BNZXRyaWNzU2V0dGluZ3NFZGl0b3IgPSAoeyBtZXRyaWMgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCBnZXRPcmRlckJ5T3B0aW9ucyA9IHVzZUZpZWxkcyhbJ251bWJlcicsICdkYXRlJ10pO1xuICBjb25zdCBnZXRNZXRyaWNzT3B0aW9ucyA9IHVzZUZpZWxkcyhtZXRyaWMudHlwZSk7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiTWV0cmljc1wiIGxhYmVsV2lkdGg9ezE2fT5cbiAgICAgICAgPEFzeW5jTXVsdGlTZWxlY3RcbiAgICAgICAgICBvbkNoYW5nZT17KGUpID0+XG4gICAgICAgICAgICBkaXNwYXRjaChcbiAgICAgICAgICAgICAgY2hhbmdlTWV0cmljU2V0dGluZyh7XG4gICAgICAgICAgICAgICAgbWV0cmljLFxuICAgICAgICAgICAgICAgIHNldHRpbmdOYW1lOiAnbWV0cmljcycsXG4gICAgICAgICAgICAgICAgbmV3VmFsdWU6IGUubWFwKCh2KSA9PiB2LnZhbHVlISksXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICAgIGxvYWRPcHRpb25zPXtnZXRNZXRyaWNzT3B0aW9uc31cbiAgICAgICAgICB2YWx1ZT17bWV0cmljLnNldHRpbmdzPy5tZXRyaWNzPy5tYXAodG9NdWx0aVNlbGVjdFZhbHVlKX1cbiAgICAgICAgICBjbG9zZU1lbnVPblNlbGVjdD17ZmFsc2V9XG4gICAgICAgICAgZGVmYXVsdE9wdGlvbnNcbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJPcmRlclwiIGxhYmVsV2lkdGg9ezE2fT5cbiAgICAgICAgPFNlbGVjdFxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gZGlzcGF0Y2goY2hhbmdlTWV0cmljU2V0dGluZyh7IG1ldHJpYywgc2V0dGluZ05hbWU6ICdvcmRlcicsIG5ld1ZhbHVlOiBlLnZhbHVlIH0pKX1cbiAgICAgICAgICBvcHRpb25zPXtvcmRlck9wdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e21ldHJpYy5zZXR0aW5ncz8ub3JkZXJ9XG4gICAgICAgIC8+XG4gICAgICA8L0lubGluZUZpZWxkPlxuICAgICAgPElubGluZUZpZWxkXG4gICAgICAgIGxhYmVsPVwiT3JkZXIgQnlcIlxuICAgICAgICBsYWJlbFdpZHRoPXsxNn1cbiAgICAgICAgY2xhc3NOYW1lPXtjc3NgXG4gICAgICAgICAgJiA+IGRpdiB7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICB9XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxTZWdtZW50QXN5bmNcbiAgICAgICAgICBjbGFzc05hbWU9e2Nzc2BcbiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICAgICAgICBgfVxuICAgICAgICAgIGxvYWRPcHRpb25zPXtnZXRPcmRlckJ5T3B0aW9uc31cbiAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGRpc3BhdGNoKGNoYW5nZU1ldHJpY1NldHRpbmcoeyBtZXRyaWMsIHNldHRpbmdOYW1lOiAnb3JkZXJCeScsIG5ld1ZhbHVlOiBlLnZhbHVlIH0pKX1cbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCBGaWVsZFwiXG4gICAgICAgICAgdmFsdWU9e21ldHJpYy5zZXR0aW5ncz8ub3JkZXJCeX1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgPC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/TopMetricsSettingsEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/index.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingsEditor: () => (/* binding */ SettingsEditor)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Switch/Switch.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _queryDef__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/queryDef.ts\");\n/* harmony import */ var _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _SettingsEditorContainer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/SettingsEditorContainer.tsx\");\n/* harmony import */ var _aggregations__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n/* harmony import */ var _BucketScriptSettingsEditor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/index.tsx\");\n/* harmony import */ var _MovingAverageSettingsEditor__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/MovingAverageSettingsEditor.tsx\");\n/* harmony import */ var _SettingField__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/SettingField.tsx\");\n/* harmony import */ var _TopMetricsSettingsEditor__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/TopMetricsSettingsEditor.tsx\");\n/* harmony import */ var _useDescription__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/useDescription.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst inlineFieldProps = {\n  labelWidth: 16\n};\nconst SettingsEditor = ({ metric, previousMetrics }) => {\n  const { current: baseId } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqueId)(\"es-setting-\"));\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n  const description = (0,_useDescription__WEBPACK_IMPORTED_MODULE_13__.useDescription)(metric);\n  const query = (0,_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_4__.useQuery)();\n  const rateAggUnitOptions = [\n    { value: \"second\", label: \"Second\" },\n    { value: \"minute\", label: \"Minute\" },\n    { value: \"hour\", label: \"Hour\" },\n    { value: \"day\", label: \"Day\" },\n    { value: \"week\", label: \"Week\" },\n    { value: \"month\", label: \"Month\" },\n    { value: \"quarter\", label: \"Quarter\" },\n    { value: \"Year\", label: \"Year\" }\n  ];\n  const rateAggModeOptions = [\n    { value: \"sum\", label: \"Sum\" },\n    { value: \"value_count\", label: \"Value count\" }\n  ];\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingsEditorContainer__WEBPACK_IMPORTED_MODULE_5__.SettingsEditorContainer, { label: description, hidden: metric.hide }, metric.type === \"derivative\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Unit\", metric, settingName: \"unit\" }), metric.type === \"serial_diff\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Lag\", metric, settingName: \"lag\", placeholder: \"1\" }), metric.type === \"cumulative_sum\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Format\", metric, settingName: \"format\" }), metric.type === \"moving_avg\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_MovingAverageSettingsEditor__WEBPACK_IMPORTED_MODULE_10__.MovingAverageSettingsEditor, { metric }), metric.type === \"moving_fn\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Window\", metric, settingName: \"window\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Script\", metric, settingName: \"script\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Shift\", metric, settingName: \"shift\" })), metric.type === \"top_metrics\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_TopMetricsSettingsEditor__WEBPACK_IMPORTED_MODULE_12__.TopMetricsSettingsEditor, { metric }), metric.type === \"bucket_script\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_BucketScriptSettingsEditor__WEBPACK_IMPORTED_MODULE_9__.BucketScriptSettingsEditor, { value: metric, previousMetrics }), (metric.type === \"raw_data\" || metric.type === \"raw_document\") && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.InlineField, { label: \"Size\", ...inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_15__.Input,\n    {\n      id: `ES-query-${query.refId}_metric-${metric.id}-size`,\n      onBlur: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeMetricSetting)({ metric, settingName: \"size\", newValue: e.target.value })),\n      defaultValue: metric.settings?.size ?? _utils__WEBPACK_IMPORTED_MODULE_8__.metricAggregationConfig[\"raw_data\"].defaults.settings?.size\n    }\n  )), metric.type === \"logs\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Limit\", metric, settingName: \"limit\", placeholder: \"500\" }), metric.type === \"cardinality\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Precision Threshold\", metric, settingName: \"precision_threshold\" }), metric.type === \"extended_stats\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, _queryDef__WEBPACK_IMPORTED_MODULE_3__.extendedStats.map((stat) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    ExtendedStatSetting,\n    {\n      key: stat.value,\n      stat,\n      onChange: (newValue) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeMetricMeta)({ metric, meta: stat.value, newValue })),\n      value: metric.meta?.[stat.value] !== void 0 ? !!metric.meta?.[stat.value] : !!_utils__WEBPACK_IMPORTED_MODULE_8__.metricAggregationConfig[\"extended_stats\"].defaults.meta?.[stat.value]\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Sigma\", metric, settingName: \"sigma\", placeholder: \"3\" })), metric.type === \"percentiles\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.InlineField, { label: \"Percentiles\", ...inlineFieldProps }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_15__.Input,\n    {\n      id: `${baseId}-percentiles-percents`,\n      onBlur: (e) => dispatch(\n        (0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeMetricSetting)({\n          metric,\n          settingName: \"percents\",\n          newValue: e.target.value.split(\",\").filter(Boolean)\n        })\n      ),\n      defaultValue: metric.settings?.percents || _utils__WEBPACK_IMPORTED_MODULE_8__.metricAggregationConfig[\"percentiles\"].defaults.settings?.percents,\n      placeholder: \"1,5,25,50,75,95,99\"\n    }\n  )), metric.type === \"rate\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.InlineField, { label: \"Unit\", ...inlineFieldProps, \"data-testid\": \"unit-select\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_16__.Select,\n    {\n      id: `ES-query-${query.refId}_metric-${metric.id}-unit`,\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeMetricSetting)({ metric, settingName: \"unit\", newValue: e.value })),\n      options: rateAggUnitOptions,\n      value: metric.settings?.unit\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.InlineField, { label: \"Mode\", ...inlineFieldProps, \"data-testid\": \"mode-select\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_16__.Select,\n    {\n      id: `ES-query-${query.refId}_metric-${metric.id}-mode`,\n      onChange: (e) => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_7__.changeMetricSetting)({ metric, settingName: \"mode\", newValue: e.value })),\n      options: rateAggModeOptions,\n      value: metric.settings?.unit\n    }\n  ))), (0,_aggregations__WEBPACK_IMPORTED_MODULE_6__.isMetricAggregationWithInlineScript)(metric) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField, { label: \"Script\", metric, settingName: \"script\", placeholder: \"_value * 1\" }), (0,_aggregations__WEBPACK_IMPORTED_MODULE_6__.isMetricAggregationWithMissingSupport)(metric) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _SettingField__WEBPACK_IMPORTED_MODULE_11__.SettingField,\n    {\n      label: \"Missing\",\n      metric,\n      settingName: \"missing\",\n      tooltip: \"The missing parameter defines how documents that are missing a value should be treated. By default\\n            they will be ignored but it is also possible to treat them as if they had a value\"\n    }\n  ));\n};\nconst ExtendedStatSetting = ({ stat, onChange, value }) => {\n  const [id] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqueId)(`es-field-id-`));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.InlineField, { label: stat.label, ...inlineFieldProps, key: stat.value }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_17__.InlineSwitch,\n    {\n      id,\n      onChange: (e) => onChange(e.target.checked),\n      value\n    }\n  ));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlCO0FBQytCO0FBRUM7QUFFN0I7QUFDRTtBQUVMO0FBQ2U7QUFDbUQ7QUFDckM7QUFDZDtBQUVHO0FBQ0M7QUFDZjtBQUNZO0FBQ1Y7QUFHL0IsTUFBTSxtQkFBZ0U7QUFBQSxFQUNwRSxZQUFZO0FBQ2Q7QUFPTyxNQUFNLGlCQUFpQixDQUFDLEVBQUUsUUFBUSxnQkFBZ0IsTUFBYTtBQUNwRSxRQUFNLEVBQUUsU0FBUyxPQUFPLElBQUksNkNBQU0sQ0FBQyxnREFBUSxDQUFDLGFBQWEsQ0FBQztBQUUxRCxRQUFNLFdBQVcsdUVBQVcsQ0FBQztBQUM3QixRQUFNLGNBQWMsZ0VBQWMsQ0FBQyxNQUFNO0FBQ3pDLFFBQU0sUUFBUSxvRUFBUSxDQUFDO0FBRXZCLFFBQU0scUJBQXFCO0FBQUEsSUFDekIsRUFBRSxPQUFPLFVBQVUsT0FBTyxTQUFTO0FBQUEsSUFDbkMsRUFBRSxPQUFPLFVBQVUsT0FBTyxTQUFTO0FBQUEsSUFDbkMsRUFBRSxPQUFPLFFBQVEsT0FBTyxPQUFPO0FBQUEsSUFDL0IsRUFBRSxPQUFPLE9BQU8sT0FBTyxNQUFNO0FBQUEsSUFDN0IsRUFBRSxPQUFPLFFBQVEsT0FBTyxPQUFPO0FBQUEsSUFDL0IsRUFBRSxPQUFPLFNBQVMsT0FBTyxRQUFRO0FBQUEsSUFDakMsRUFBRSxPQUFPLFdBQVcsT0FBTyxVQUFVO0FBQUEsSUFDckMsRUFBRSxPQUFPLFFBQVEsT0FBTyxPQUFPO0FBQUEsRUFDakM7QUFFQSxRQUFNLHFCQUFxQjtBQUFBLElBQ3pCLEVBQUUsT0FBTyxPQUFPLE9BQU8sTUFBTTtBQUFBLElBQzdCLEVBQUUsT0FBTyxlQUFlLE9BQU8sY0FBYztBQUFB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TyxLQUFLLE9BQVEsR0FBRyxrQkFBa0IsS0FBSyxLQUFLLFNBQzlEO0FBQUEsSUFBQyxzREFBWTtBQUFaO0FBQUEsTUFDQztBQUFBLE1BQ0EsVUFBVSxDQUFDLE1BQTJDLFNBQVMsRUFBRSxPQUFPLE9BQU87QUFBQSxNQUMvRTtBQUFBO0FBQUEsRUFDRixDQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci9TZXR0aW5nc0VkaXRvci9pbmRleC50c3g/ODRkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50UHJvcHMsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IElubGluZUZpZWxkLCBJbnB1dCwgSW5saW5lU3dpdGNoLCBTZWxlY3QgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi4vLi4vLi4vLi4vaG9va3MvdXNlU3RhdGVsZXNzUmVkdWNlcic7XG5pbXBvcnQgeyBleHRlbmRlZFN0YXRzIH0gZnJvbSAnLi4vLi4vLi4vLi4vcXVlcnlEZWYnO1xuaW1wb3J0IHsgTWV0cmljQWdncmVnYXRpb24sIEV4dGVuZGVkU3RhdCB9IGZyb20gJy4uLy4uLy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IHVzZVF1ZXJ5IH0gZnJvbSAnLi4vLi4vRWxhc3RpY3NlYXJjaFF1ZXJ5Q29udGV4dCc7XG5pbXBvcnQgeyBTZXR0aW5nc0VkaXRvckNvbnRhaW5lciB9IGZyb20gJy4uLy4uL1NldHRpbmdzRWRpdG9yQ29udGFpbmVyJztcbmltcG9ydCB7IGlzTWV0cmljQWdncmVnYXRpb25XaXRoSW5saW5lU2NyaXB0LCBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aE1pc3NpbmdTdXBwb3J0IH0gZnJvbSAnLi4vYWdncmVnYXRpb25zJztcbmltcG9ydCB7IGNoYW5nZU1ldHJpY01ldGEsIGNoYW5nZU1ldHJpY1NldHRpbmcgfSBmcm9tICcuLi9zdGF0ZS9hY3Rpb25zJztcbmltcG9ydCB7IG1ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5pbXBvcnQgeyBCdWNrZXRTY3JpcHRTZXR0aW5nc0VkaXRvciB9IGZyb20gJy4vQnVja2V0U2NyaXB0U2V0dGluZ3NFZGl0b3InO1xuaW1wb3J0IHsgTW92aW5nQXZlcmFnZVNldHRpbmdzRWRpdG9yIH0gZnJvbSAnLi9Nb3ZpbmdBdmVyYWdlU2V0dGluZ3NFZGl0b3InO1xuaW1wb3J0IHsgU2V0dGluZ0ZpZWxkIH0gZnJvbSAnLi9TZXR0aW5nRmllbGQnO1xuaW1wb3J0IHsgVG9wTWV0cmljc1NldHRpbmdzRWRpdG9yIH0gZnJvbSAnLi9Ub3BNZXRyaWNzU2V0dGluZ3NFZGl0b3InO1xuaW1wb3J0IHsgdXNlRGVzY3JpcHRpb24gfSBmcm9tICcuL3VzZURlc2NyaXB0aW9uJztcblxuLy8gVE9ETzogTW92ZSB0aGlzIHNvbWV3aGVyZSBhbmQgc2hhcmUgaXQgd2l0aCBCdWNrZXRzQWdncmVnYXRpb24gRWRpdG9yXG5jb25zdCBpbmxpbmVGaWVsZFByb3BzOiBQYXJ0aWFsPENvbXBvbmVudFByb3BzPHR5cGVvZiBJbmxpbmVGaWVsZD4+ID0ge1xuICBsYWJlbFdpZHRoOiAxNixcbn07XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIG1ldHJpYzogTWV0cmljQWdncmVnYXRpb247XG4gIHByZXZpb3VzTWV0cmljczogTWV0cmljQWdncmVnYXRpb25bXTtcbn1cblxuZXhwb3J0IGNvbnN0IFNldHRpbmdzRWRpdG9yID0gKHsgbWV0cmljLCBwcmV2aW91c01ldHJpY3MgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgeyBjdXJyZW50OiBiYXNlSWQgfSA9IHVzZVJlZih1bmlxdWVJZCgnZXMtc2V0dGluZy0nKSk7XG5cbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IHVzZURlc2NyaXB0aW9uKG1ldHJpYyk7XG4gIGNvbnN0IHF1ZXJ5ID0gdXNlUXVlcnkoKTtcblxuICBjb25zdCByYXRlQWdnVW5pdE9wdGlvbnMgPSBbXG4gICAgeyB2YWx1ZTogJ3NlY29uZCcsIGxhYmVsOiAnU2Vjb25kJyB9LFxuICAgIHsgdmFsdWU6ICdtaW51dGUnLCBsYWJlbDogJ01pbnV0ZScgfSxcbiAgICB7IHZhbHVlOiAnaG91cicsIGxhYmVsOiAnSG91cicgfSxcbiAgICB7IHZhbHVlOiAnZGF5JywgbGFiZWw6ICdEYXknIH0sXG4gICAgeyB2YWx1ZTogJ3dlZWsnLCBsYWJlbDogJ1dlZWsnIH0sXG4gICAgeyB2YWx1ZTogJ21vbnRoJywgbGFiZWw6ICdNb250aCcgfSxcbiAgICB7IHZhbHVlOiAncXVhcnRlcicsIGxhYmVsOiAnUXVhcnRlcicgfSxcbiAgICB7IHZhbHVlOiAnWWVhcicsIGxhYmVsOiAnWWVhcicgfSxcbiAgXTtcblxuICBjb25zdCByYXRlQWdnTW9kZU9wdGlvbnMgPSBbXG4gICAgeyB2YWx1ZTogJ3N1bScsIGxhYmVsOiAnU3VtJyB9LFxuICAgIHsgdmFsdWU6ICd2YWx1ZV9jb3VudCcsIGxhYmVsOiAnVmFsdWUgY291bnQnIH0sXG4gIF07XG5cbiAgcmV0dXJuIChcbiAgICA8U2V0dGluZ3NFZGl0b3JDb250YWluZXIgbGFiZWw9e2Rlc2NyaXB0aW9ufSBoaWRkZW49e21ldHJpYy5oaWRlfT5cbiAgICAgIHttZXRyaWMudHlwZSA9PT0gJ2Rlcml2YXRpdmUnICYmIDxTZXR0aW5nRmllbGQgbGFiZWw9XCJVbml0XCIgbWV0cmljPXttZXRyaWN9IHNldHRpbmdOYW1lPVwidW5pdFwiIC8+fVxuXG4gICAgICB7bWV0cmljLnR5cGUgPT09ICdzZXJpYWxfZGlmZicgJiYgPFNldHRpbmdGaWVsZCBsYWJlbD1cIkxhZ1wiIG1ldHJpYz17bWV0cmljfSBzZXR0aW5nTmFtZT1cImxhZ1wiIHBsYWNlaG9sZGVyPVwiMVwiIC8+fVxuXG4gICAgICB7bWV0cmljLnR5cGUgPT09ICdjdW11bGF0aXZlX3N1bScgJiYgPFNldHRpbmdGaWVsZCBsYWJlbD1cIkZvcm1hdFwiIG1ldHJpYz17bWV0cmljfSBzZXR0aW5nTmFtZT1cImZvcm1hdFwiIC8+fVxuXG4gICAgICB7bWV0cmljLnR5cGUgPT09ICdtb3ZpbmdfYXZnJyAmJiA8TW92aW5nQXZlcmFnZVNldHRpbmdzRWRpdG9yIG1ldHJpYz17bWV0cmljfSAvPn1cblxuICAgICAge21ldHJpYy50eXBlID09PSAnbW92aW5nX2ZuJyAmJiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPFNldHRpbmdGaWVsZCBsYWJlbD1cIldpbmRvd1wiIG1ldHJpYz17bWV0cmljfSBzZXR0aW5nTmFtZT1cIndpbmRvd1wiIC8+XG4gICAgICAgICAgPFNldHRpbmdGaWVsZCBsYWJlbD1cIlNjcmlwdFwiIG1ldHJpYz17bWV0cmljfSBzZXR0aW5nTmFtZT1cInNjcmlwdFwiIC8+XG4gICAgICAgICAgPFNldHRpbmdGaWVsZCBsYWJlbD1cIlNoaWZ0XCIgbWV0cmljPXttZXRyaWN9IHNldHRpbmdOYW1lPVwic2hpZnRcIiAvPlxuICAgICAgICA8Lz5cbiAgICAgICl9XG5cbiAgICAgIHttZXRyaWMudHlwZSA9PT0gJ3RvcF9tZXRyaWNzJyAmJiA8VG9wTWV0cmljc1NldHRpbmdzRWRpdG9yIG1ldHJpYz17bWV0cmljfSAvPn1cblxuICAgICAge21ldHJpYy50eXBlID09PSAnYnVja2V0X3NjcmlwdCcgJiYgKFxuICAgICAgICA8QnVja2V0U2NyaXB0U2V0dGluZ3NFZGl0b3IgdmFsdWU9e21ldHJpY30gcHJldmlvdXNNZXRyaWNzPXtwcmV2aW91c01ldHJpY3N9IC8+XG4gICAgICApfVxuXG4gICAgICB7KG1ldHJpYy50eXBlID09PSAncmF3X2RhdGEnIHx8IG1ldHJpYy50eXBlID09PSAncmF3X2RvY3VtZW50JykgJiYgKFxuICAgICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJTaXplXCIgey4uLmlubGluZUZpZWxkUHJvcHN9PlxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgaWQ9e2BFUy1xdWVyeS0ke3F1ZXJ5LnJlZklkfV9tZXRyaWMtJHttZXRyaWMuaWR9LXNpemVgfVxuICAgICAgICAgICAgb25CbHVyPXsoZSkgPT4gZGlzcGF0Y2goY2hhbmdlTWV0cmljU2V0dGluZyh7IG1ldHJpYywgc2V0dGluZ05hbWU6ICdzaXplJywgbmV3VmFsdWU6IGUudGFyZ2V0LnZhbHVlIH0pKX1cbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bWV0cmljLnNldHRpbmdzPy5zaXplID8/IG1ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnWydyYXdfZGF0YSddLmRlZmF1bHRzLnNldHRpbmdzPy5zaXplfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgICApfVxuXG4gICAgICB7bWV0cmljLnR5cGUgPT09ICdsb2dzJyAmJiA8U2V0dGluZ0ZpZWxkIGxhYmVsPVwiTGltaXRcIiBtZXRyaWM9e21ldHJpY30gc2V0dGluZ05hbWU9XCJsaW1pdFwiIHBsYWNlaG9sZGVyPVwiNTAwXCIgLz59XG5cbiAgICAgIHttZXRyaWMudHlwZSA9PT0gJ2NhcmRpbmFsaXR5JyAmJiAoXG4gICAgICAgIDxTZXR0aW5nRmllbGQgbGFiZWw9XCJQcmVjaXNpb24gVGhyZXNob2xkXCIgbWV0cmljPXttZXRyaWN9IHNldHRpbmdOYW1lPVwicHJlY2lzaW9uX3RocmVzaG9sZFwiIC8+XG4gICAgICApfVxuXG4gICAgICB7bWV0cmljLnR5cGUgPT09ICdleHRlbmRlZF9zdGF0cycgJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIHtleHRlbmRlZFN0YXRzLm1hcCgoc3RhdCkgPT4gKFxuICAgICAgICAgICAgPEV4dGVuZGVkU3RhdFNldHRpbmdcbiAgICAgICAgICAgICAga2V5PXtzdGF0LnZhbHVlfVxuICAgICAgICAgICAgICBzdGF0PXtzdGF0fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KG5ld1ZhbHVlKSA9PiBkaXNwYXRjaChjaGFuZ2VNZXRyaWNNZXRhKHsgbWV0cmljLCBtZXRhOiBzdGF0LnZhbHVlLCBuZXdWYWx1ZSB9KSl9XG4gICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICBtZXRyaWMubWV0YT8uW3N0YXQudmFsdWVdICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgID8gISFtZXRyaWMubWV0YT8uW3N0YXQudmFsdWVdXG4gICAgICAgICAgICAgICAgICA6ICEhbWV0cmljQWdncmVnYXRpb25Db25maWdbJ2V4dGVuZGVkX3N0YXRzJ10uZGVmYXVsdHMubWV0YT8uW3N0YXQudmFsdWVdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSl9XG5cbiAgICAgICAgICA8U2V0dGluZ0ZpZWxkIGxhYmVsPVwiU2lnbWFcIiBtZXRyaWM9e21ldHJpY30gc2V0dGluZ05hbWU9XCJzaWdtYVwiIHBsYWNlaG9sZGVyPVwiM1wiIC8+XG4gICAgICAgIDwvPlxuICAgICAgKX1cblxuICAgICAge21ldHJpYy50eXBlID09PSAncGVyY2VudGlsZXMnICYmIChcbiAgICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiUGVyY2VudGlsZXNcIiB7Li4uaW5saW5lRmllbGRQcm9wc30+XG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICBpZD17YCR7YmFzZUlkfS1wZXJjZW50aWxlcy1wZXJjZW50c2B9XG4gICAgICAgICAgICBvbkJsdXI9eyhlKSA9PlxuICAgICAgICAgICAgICBkaXNwYXRjaChcbiAgICAgICAgICAgICAgICBjaGFuZ2VNZXRyaWNTZXR0aW5nKHtcbiAgICAgICAgICAgICAgICAgIG1ldHJpYyxcbiAgICAgICAgICAgICAgICAgIHNldHRpbmdOYW1lOiAncGVyY2VudHMnLFxuICAgICAgICAgICAgICAgICAgbmV3VmFsdWU6IGUudGFyZ2V0LnZhbHVlLnNwbGl0KCcsJykuZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgIG1ldHJpYy5zZXR0aW5ncz8ucGVyY2VudHMgfHwgbWV0cmljQWdncmVnYXRpb25Db25maWdbJ3BlcmNlbnRpbGVzJ10uZGVmYXVsdHMuc2V0dGluZ3M/LnBlcmNlbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjEsNSwyNSw1MCw3NSw5NSw5OVwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICl9XG5cbiAgICAgIHttZXRyaWMudHlwZSA9PT0gJ3JhdGUnICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJVbml0XCIgey4uLmlubGluZUZpZWxkUHJvcHN9IGRhdGEtdGVzdGlkPVwidW5pdC1zZWxlY3RcIj5cbiAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgaWQ9e2BFUy1xdWVyeS0ke3F1ZXJ5LnJlZklkfV9tZXRyaWMtJHttZXRyaWMuaWR9LXVuaXRgfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGRpc3BhdGNoKGNoYW5nZU1ldHJpY1NldHRpbmcoeyBtZXRyaWMsIHNldHRpbmdOYW1lOiAndW5pdCcsIG5ld1ZhbHVlOiBlLnZhbHVlIH0pKX1cbiAgICAgICAgICAgICAgb3B0aW9ucz17cmF0ZUFnZ1VuaXRPcHRpb25zfVxuICAgICAgICAgICAgICB2YWx1ZT17bWV0cmljLnNldHRpbmdzPy51bml0fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0lubGluZUZpZWxkPlxuXG4gICAgICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiTW9kZVwiIHsuLi5pbmxpbmVGaWVsZFByb3BzfSBkYXRhLXRlc3RpZD1cIm1vZGUtc2VsZWN0XCI+XG4gICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgIGlkPXtgRVMtcXVlcnktJHtxdWVyeS5yZWZJZH1fbWV0cmljLSR7bWV0cmljLmlkfS1tb2RlYH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBkaXNwYXRjaChjaGFuZ2VNZXRyaWNTZXR0aW5nKHsgbWV0cmljLCBzZXR0aW5nTmFtZTogJ21vZGUnLCBuZXdWYWx1ZTogZS52YWx1ZSB9KSl9XG4gICAgICAgICAgICAgIG9wdGlvbnM9e3JhdGVBZ2dNb2RlT3B0aW9uc31cbiAgICAgICAgICAgICAgdmFsdWU9e21ldHJpYy5zZXR0aW5ncz8udW5pdH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICAgPC8+XG4gICAgICApfVxuXG4gICAgICB7aXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhJbmxpbmVTY3JpcHQobWV0cmljKSAmJiAoXG4gICAgICAgIDxTZXR0aW5nRmllbGQgbGFiZWw9XCJTY3JpcHRcIiBtZXRyaWM9e21ldHJpY30gc2V0dGluZ05hbWU9XCJzY3JpcHRcIiBwbGFjZWhvbGRlcj1cIl92YWx1ZSAqIDFcIiAvPlxuICAgICAgKX1cblxuICAgICAge2lzTWV0cmljQWdncmVnYXRpb25XaXRoTWlzc2luZ1N1cHBvcnQobWV0cmljKSAmJiAoXG4gICAgICAgIDxTZXR0aW5nRmllbGRcbiAgICAgICAgICBsYWJlbD1cIk1pc3NpbmdcIlxuICAgICAgICAgIG1ldHJpYz17bWV0cmljfVxuICAgICAgICAgIHNldHRpbmdOYW1lPVwibWlzc2luZ1wiXG4gICAgICAgICAgdG9vbHRpcD1cIlRoZSBtaXNzaW5nIHBhcmFtZXRlciBkZWZpbmVzIGhvdyBkb2N1bWVudHMgdGhhdCBhcmUgbWlzc2luZyBhIHZhbHVlIHNob3VsZCBiZSB0cmVhdGVkLiBCeSBkZWZhdWx0XG4gICAgICAgICAgICB0aGV5IHdpbGwgYmUgaWdub3JlZCBidXQgaXQgaXMgYWxzbyBwb3NzaWJsZSB0byB0cmVhdCB0aGVtIGFzIGlmIHRoZXkgaGFkIGEgdmFsdWVcIlxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICA8L1NldHRpbmdzRWRpdG9yQ29udGFpbmVyPlxuICApO1xufTtcblxuaW50ZXJmYWNlIEV4dGVuZGVkU3RhdFNldHRpbmdQcm9wcyB7XG4gIHN0YXQ6IEV4dGVuZGVkU3RhdDtcbiAgb25DaGFuZ2U6IChjaGVja2VkOiBib29sZWFuKSA9PiB2b2lkO1xuICB2YWx1ZTogYm9vbGVhbjtcbn1cbmNvbnN0IEV4dGVuZGVkU3RhdFNldHRpbmcgPSAoeyBzdGF0LCBvbkNoYW5nZSwgdmFsdWUgfTogRXh0ZW5kZWRTdGF0U2V0dGluZ1Byb3BzKSA9PiB7XG4gIC8vIHRoaXMgaXMgbmVlZGVkIGZvciB0aGUgaHRtbEZvciBwcm9wIGluIHRoZSBsYWJlbCBzbyB0aGF0IGNsaWNraW5nIHRoZSBsYWJlbCB3aWxsIHRvZ2dsZSB0aGUgc3dpdGNoIHN0YXRlLlxuICBjb25zdCBbaWRdID0gdXNlU3RhdGUodW5pcXVlSWQoYGVzLWZpZWxkLWlkLWApKTtcblxuICByZXR1cm4gKFxuICAgIDxJbmxpbmVGaWVsZCBsYWJlbD17c3RhdC5sYWJlbH0gey4uLmlubGluZUZpZWxkUHJvcHN9IGtleT17c3RhdC52YWx1ZX0+XG4gICAgICA8SW5saW5lU3dpdGNoXG4gICAgICAgIGlkPXtpZH1cbiAgICAgICAgb25DaGFuZ2U9eyhlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4gb25DaGFuZ2UoZS50YXJnZXQuY2hlY2tlZCl9XG4gICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgIC8+XG4gICAgPC9JbmxpbmVGaWVsZD5cbiAgKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/index.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/useDescription.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDescription: () => (/* binding */ useDescription)\n/* harmony export */ });\n/* harmony import */ var _queryDef__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/queryDef.ts\");\n\n\nconst hasValue = (value) => (object) => object.value === value;\nconst useDescription = (metric) => {\n  switch (metric.type) {\n    case \"cardinality\": {\n      const precisionThreshold = metric.settings?.precision_threshold || \"\";\n      return `Precision threshold: ${precisionThreshold}`;\n    }\n    case \"percentiles\":\n      if (metric.settings?.percents && metric.settings?.percents?.length >= 1) {\n        return `Values: ${metric.settings?.percents}`;\n      }\n      return \"Percents: Default\";\n    case \"extended_stats\": {\n      const selectedStats = Object.entries(metric.meta || {}).map(([key, value]) => value && _queryDef__WEBPACK_IMPORTED_MODULE_0__.extendedStats.find(hasValue(key))?.label).filter(Boolean);\n      return `Stats: ${selectedStats.length > 0 ? selectedStats.join(\", \") : \"None selected\"}`;\n    }\n    case \"raw_document\":\n    case \"raw_data\": {\n      const size = metric.settings?.size || 500;\n      return `Size: ${size}`;\n    }\n    default:\n      return \"Options\";\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL1NldHRpbmdzRWRpdG9yL3VzZURlc2NyaXB0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QjtBQUc5QixNQUFNLFdBQVcsQ0FBQyxVQUFrQixDQUFDLFdBQThCLE9BQU8sVUFBVTtBQUs3RSxNQUFNLGlCQUFpQixDQUFDLFdBQXNDO0FBQ25FLFVBQVEsT0FBTyxNQUFNO0FBQUEsSUFDbkIsS0FBSyxlQUFlO0FBQ2xCLFlBQU0scUJBQXFCLE9BQU8sVUFBVSx1QkFBdUI7QUFDbkUsYUFBTyx3QkFBd0I7QUFBQSxJQUNqQztBQUFBLElBRUEsS0FBSztBQUNILFVBQUksT0FBTyxVQUFVLFlBQVksT0FBTyxVQUFVLFVBQVUsVUFBVSxHQUFHO0FBQ3ZFLGVBQU8sV0FBVyxPQUFPLFVBQVU7QUFBQSxNQUNyQztBQUVBLGFBQU87QUFBQSxJQUVULEtBQUssa0JBQWtCO0FBQ3JCLFlBQU0sZ0JBQWdCLE9BQU8sUUFBUSxPQUFPLFFBQVEsQ0FBQyxDQUFDLEVBQ25ELElBQUksQ0FBQyxDQUFDLEtBQUssS0FBSyxNQUFNLFNBQVMsb0RBQWEsQ0FBQyxLQUFLLFNBQVMsR0FBRyxDQUFDLEdBQUcsS0FBSyxFQUN2RSxPQUFPLE9BQU87QUFFakIsYUFBTyxVQUFVLGNBQWMsU0FBUyxJQUFJLGNBQWMsS0FBSyxJQUFJLElBQUk7QUFBQSxJQUN6RTtBQUFBLElBRUEsS0FBSztBQUFBLElBQ0wsS0FBSyxZQUFZO0FBQ2YsWUFBTSxPQUFPLE9BQU8sVUFBVSxRQUFRO0FBQ3RDLGFBQU8sU0FBUztBQUFBLElBQ2xCO0FBQUEsSUFFQTtBQUNFLGFBQU87QUFBQSxFQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci9TZXR0aW5nc0VkaXRvci91c2VEZXNjcmlwdGlvbi50cz9lNDZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4dGVuZGVkU3RhdHMgfSBmcm9tICcuLi8uLi8uLi8uLi9xdWVyeURlZic7XG5pbXBvcnQgeyBNZXRyaWNBZ2dyZWdhdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uL3R5cGVzJztcblxuY29uc3QgaGFzVmFsdWUgPSAodmFsdWU6IHN0cmluZykgPT4gKG9iamVjdDogeyB2YWx1ZTogc3RyaW5nIH0pID0+IG9iamVjdC52YWx1ZSA9PT0gdmFsdWU7XG5cbi8vIEZJWE1FOiBBbGwgdGhlIGRlZmF1bHRzIGFuZCB2YWxpZGF0aW9ucyBkb3duIGhlcmUgc2hvdWxkIGJlIGRlZmluZWQgc29tZXdoZXJlIGVsc2Vcbi8vIGFzIHRoZXkgYXJlIGFsc28gdGhlIGRlZmF1bHRzIHRoYXQgYXJlIGdvbm5hIGJlIGFwcGxpZWQgdG8gdGhlIHF1ZXJ5LlxuLy8gSW4gdGhlIHByZXZpb3VzIHZlcnNpb24sIHRoZSBzYW1lIG1ldGhvZCB3YXMgdGFraW5nIGNhcmUgb2YgZGVzY3JpYmluZyB0aGUgc2V0dGluZ3MgYW5kIHNldHRpbmcgZGVmYXVsdHMuXG5leHBvcnQgY29uc3QgdXNlRGVzY3JpcHRpb24gPSAobWV0cmljOiBNZXRyaWNBZ2dyZWdhdGlvbik6IHN0cmluZyA9PiB7XG4gIHN3aXRjaCAobWV0cmljLnR5cGUpIHtcbiAgICBjYXNlICdjYXJkaW5hbGl0eSc6IHtcbiAgICAgIGNvbnN0IHByZWNpc2lvblRocmVzaG9sZCA9IG1ldHJpYy5zZXR0aW5ncz8ucHJlY2lzaW9uX3RocmVzaG9sZCB8fCAnJztcbiAgICAgIHJldHVybiBgUHJlY2lzaW9uIHRocmVzaG9sZDogJHtwcmVjaXNpb25UaHJlc2hvbGR9YDtcbiAgICB9XG5cbiAgICBjYXNlICdwZXJjZW50aWxlcyc6XG4gICAgICBpZiAobWV0cmljLnNldHRpbmdzPy5wZXJjZW50cyAmJiBtZXRyaWMuc2V0dGluZ3M/LnBlcmNlbnRzPy5sZW5ndGggPj0gMSkge1xuICAgICAgICByZXR1cm4gYFZhbHVlczogJHttZXRyaWMuc2V0dGluZ3M/LnBlcmNlbnRzfWA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAnUGVyY2VudHM6IERlZmF1bHQnO1xuXG4gICAgY2FzZSAnZXh0ZW5kZWRfc3RhdHMnOiB7XG4gICAgICBjb25zdCBzZWxlY3RlZFN0YXRzID0gT2JqZWN0LmVudHJpZXMobWV0cmljLm1ldGEgfHwge30pXG4gICAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gdmFsdWUgJiYgZXh0ZW5kZWRTdGF0cy5maW5kKGhhc1ZhbHVlKGtleSkpPy5sYWJlbClcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgICAgcmV0dXJuIGBTdGF0czogJHtzZWxlY3RlZFN0YXRzLmxlbmd0aCA+IDAgPyBzZWxlY3RlZFN0YXRzLmpvaW4oJywgJykgOiAnTm9uZSBzZWxlY3RlZCd9YDtcbiAgICB9XG5cbiAgICBjYXNlICdyYXdfZG9jdW1lbnQnOlxuICAgIGNhc2UgJ3Jhd19kYXRhJzoge1xuICAgICAgY29uc3Qgc2l6ZSA9IG1ldHJpYy5zZXR0aW5ncz8uc2l6ZSB8fCA1MDA7XG4gICAgICByZXR1cm4gYFNpemU6ICR7c2l6ZX1gO1xuICAgIH1cblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJ09wdGlvbnMnO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/useDescription.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   METRIC_AGGREGATION_TYPES: () => (/* binding */ METRIC_AGGREGATION_TYPES),\n/* harmony export */   isEWMAMovingAverage: () => (/* binding */ isEWMAMovingAverage),\n/* harmony export */   isHoltMovingAverage: () => (/* binding */ isHoltMovingAverage),\n/* harmony export */   isHoltWintersMovingAverage: () => (/* binding */ isHoltWintersMovingAverage),\n/* harmony export */   isMetricAggregationType: () => (/* binding */ isMetricAggregationType),\n/* harmony export */   isMetricAggregationWithField: () => (/* binding */ isMetricAggregationWithField),\n/* harmony export */   isMetricAggregationWithInlineScript: () => (/* binding */ isMetricAggregationWithInlineScript),\n/* harmony export */   isMetricAggregationWithMeta: () => (/* binding */ isMetricAggregationWithMeta),\n/* harmony export */   isMetricAggregationWithMissingSupport: () => (/* binding */ isMetricAggregationWithMissingSupport),\n/* harmony export */   isMetricAggregationWithSettings: () => (/* binding */ isMetricAggregationWithSettings),\n/* harmony export */   isMovingAverageWithModelSettings: () => (/* binding */ isMovingAverageWithModelSettings),\n/* harmony export */   isPipelineAggregation: () => (/* binding */ isPipelineAggregation),\n/* harmony export */   isPipelineAggregationWithMultipleBucketPaths: () => (/* binding */ isPipelineAggregationWithMultipleBucketPaths)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n\n\nconst isEWMAMovingAverage = (metric) => metric.settings?.model === \"ewma\";\nconst isHoltMovingAverage = (metric) => metric.settings?.model === \"holt\";\nconst isHoltWintersMovingAverage = (metric) => metric.settings?.model === \"holt_winters\";\nconst isMovingAverageWithModelSettings = (metric) => [\"holt\", \"ewma\", \"holt_winters\"].includes(metric.settings?.model || \"\");\nconst isMetricAggregationWithField = (metric) => _utils__WEBPACK_IMPORTED_MODULE_0__.metricAggregationConfig[metric.type].requiresField;\nconst isPipelineAggregation = (metric) => _utils__WEBPACK_IMPORTED_MODULE_0__.metricAggregationConfig[metric.type].isPipelineAgg;\nconst isPipelineAggregationWithMultipleBucketPaths = (metric) => _utils__WEBPACK_IMPORTED_MODULE_0__.metricAggregationConfig[metric.type].supportsMultipleBucketPaths;\nconst isMetricAggregationWithMissingSupport = (metric) => _utils__WEBPACK_IMPORTED_MODULE_0__.metricAggregationConfig[metric.type].supportsMissing;\nconst isMetricAggregationWithSettings = (metric) => _utils__WEBPACK_IMPORTED_MODULE_0__.metricAggregationConfig[metric.type].hasSettings;\nconst isMetricAggregationWithMeta = (metric) => _utils__WEBPACK_IMPORTED_MODULE_0__.metricAggregationConfig[metric.type].hasMeta;\nconst isMetricAggregationWithInlineScript = (metric) => _utils__WEBPACK_IMPORTED_MODULE_0__.metricAggregationConfig[metric.type].supportsInlineScript;\nconst METRIC_AGGREGATION_TYPES = [\n  \"count\",\n  \"avg\",\n  \"sum\",\n  \"min\",\n  \"max\",\n  \"extended_stats\",\n  \"percentiles\",\n  \"cardinality\",\n  \"raw_document\",\n  \"raw_data\",\n  \"logs\",\n  \"moving_avg\",\n  \"moving_fn\",\n  \"derivative\",\n  \"serial_diff\",\n  \"cumulative_sum\",\n  \"bucket_script\",\n  \"rate\",\n  \"top_metrics\"\n];\nconst isMetricAggregationType = (s) => METRIC_AGGREGATION_TYPES.includes(s);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL2FnZ3JlZ2F0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFhd0M7QUFFakMsTUFBTSxzQkFBc0IsQ0FBQyxXQUNsQyxPQUFPLFVBQVUsVUFBVTtBQUV0QixNQUFNLHNCQUFzQixDQUFDLFdBQ2xDLE9BQU8sVUFBVSxVQUFVO0FBRXRCLE1BQU0sNkJBQTZCLENBQ3hDLFdBQzRDLE9BQU8sVUFBVSxVQUFVO0FBRWxFLE1BQU0sbUNBQW1DLENBQzlDLFdBRUEsQ0FBQyxRQUFRLFFBQVEsY0FBYyxFQUFFLFNBQVMsT0FBTyxVQUFVLFNBQVMsRUFBRTtBQVdqRSxNQUFNLCtCQUErQixDQUMxQyxXQUN5QywyREFBdUIsQ0FBQyxPQUFPLElBQUksRUFBRTtBQUV6RSxNQUFNLHdCQUF3QixDQUNuQyxXQUN3QywyREFBdUIsQ0FBQyxPQUFPLElBQUksRUFBRTtBQUV4RSxNQUFNLCtDQUErQyxDQUMxRCxXQUVBLDJEQUF1QixDQUFDLE9BQU8sSUFBSSxFQUFFO0FBRWhDLE1BQU0sd0NBQXdDLENBQ25ELFdBQ2tELDJEQUF1QixDQUFDLE9BQU8sSUFBSSxFQUFFO0FBRWxGLE1BQU0sa0NBQWtDLENBQzdDLFdBQzRDLDJEQUF1QixDQUFDLE9BQU8sSUFBSSxFQUFFO0FBRTVFLE1BQU0sOEJBQThCLENBQ3pDLFdBQ3dDLDJEQUF1QixDQUFDLE9BQU8sSUFBSSxFQUFFO0FBRXhFLE1BQU0sc0NBQXNDLENBQ2pELFdBQ2dELDJEQUF1QixDQUFDLE9BQU8sSUFBSSxFQUFFO0FBRWhGLE1BQU0sMkJBQW9EO0FBQUEsRUFDL0Q7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRjtBQUVPLE1BQU0sMEJBQTBCLENBQUMsTUFDdEMseUJBQXlCLFNBQVMsQ0FBMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci9hZ2dyZWdhdGlvbnMudHM/NzZlZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBQaXBlbGluZU1ldHJpY0FnZ3JlZ2F0aW9uV2l0aE11bHRpcGxlQnVja2V0UGF0aHMsXG4gIE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aE1ldGEsXG4gIE1vdmluZ0F2ZXJhZ2UsXG4gIE1ldHJpY0FnZ3JlZ2F0aW9uVHlwZSxcbiAgQmFzZU1ldHJpY0FnZ3JlZ2F0aW9uLFxuICBNZXRyaWNBZ2dyZWdhdGlvbldpdGhGaWVsZCxcbiAgTWV0cmljQWdncmVnYXRpb25XaXRoTWlzc2luZ1N1cHBvcnQsXG4gIE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aElubGluZVNjcmlwdCxcbiAgUGlwZWxpbmVNZXRyaWNBZ2dyZWdhdGlvbixcbiAgTWV0cmljQWdncmVnYXRpb25XaXRoU2V0dGluZ3MsXG59IGZyb20gJy4uLy4uLy4uL3R5cGVzJztcblxuaW1wb3J0IHsgbWV0cmljQWdncmVnYXRpb25Db25maWcgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IGlzRVdNQU1vdmluZ0F2ZXJhZ2UgPSAobWV0cmljOiBNb3ZpbmdBdmVyYWdlIHwgTW92aW5nQXZlcmFnZTwnZXdtYSc+KTogbWV0cmljIGlzIE1vdmluZ0F2ZXJhZ2U8J2V3bWEnPiA9PlxuICBtZXRyaWMuc2V0dGluZ3M/Lm1vZGVsID09PSAnZXdtYSc7XG5cbmV4cG9ydCBjb25zdCBpc0hvbHRNb3ZpbmdBdmVyYWdlID0gKG1ldHJpYzogTW92aW5nQXZlcmFnZSB8IE1vdmluZ0F2ZXJhZ2U8J2hvbHQnPik6IG1ldHJpYyBpcyBNb3ZpbmdBdmVyYWdlPCdob2x0Jz4gPT5cbiAgbWV0cmljLnNldHRpbmdzPy5tb2RlbCA9PT0gJ2hvbHQnO1xuXG5leHBvcnQgY29uc3QgaXNIb2x0V2ludGVyc01vdmluZ0F2ZXJhZ2UgPSAoXG4gIG1ldHJpYzogTW92aW5nQXZlcmFnZSB8IE1vdmluZ0F2ZXJhZ2U8J2hvbHRfd2ludGVycyc+XG4pOiBtZXRyaWMgaXMgTW92aW5nQXZlcmFnZTwnaG9sdF93aW50ZXJzJz4gPT4gbWV0cmljLnNldHRpbmdzPy5tb2RlbCA9PT0gJ2hvbHRfd2ludGVycyc7XG5cbmV4cG9ydCBjb25zdCBpc01vdmluZ0F2ZXJhZ2VXaXRoTW9kZWxTZXR0aW5ncyA9IChcbiAgbWV0cmljOiBNb3ZpbmdBdmVyYWdlXG4pOiBtZXRyaWMgaXMgTW92aW5nQXZlcmFnZTwnZXdtYSc+IHwgTW92aW5nQXZlcmFnZTwnaG9sdCc+IHwgTW92aW5nQXZlcmFnZTwnaG9sdF93aW50ZXJzJz4gPT5cbiAgWydob2x0JywgJ2V3bWEnLCAnaG9sdF93aW50ZXJzJ10uaW5jbHVkZXMobWV0cmljLnNldHRpbmdzPy5tb2RlbCB8fCAnJyk7XG5cbi8vIEd1YXJkc1xuLy8gR2l2ZW4gdGhlIHN0cnVjdHVyZSBvZiB0aGUgYWdncmVnYXRpb25zIChpZS4gYHNldHRpbmdzYCBmaWVsZCBiZWluZyBhbHdheXMgb3B0aW9uYWwpIHdlIGNhbm5vdFxuLy8gZGV0ZXJtaW5lIHR5cGVzIGJhc2VkIHNvbGVseSBvbiBvYmplY3RzJyBwcm9wZXJ0aWVzLCB0aGVyZWZvcmUgd2UgdXNlIGBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZ2AgYXMgdGhlXG4vLyBzb3VyY2Ugb2YgdHJ1dGguXG5cbi8qKlxuICogQ2hlY2tzIGlmIGBtZXRyaWNgIHJlcXVpcmVzIGEgZmllbGQgKGVpdGhlciByZWZlcnJpbmcgdG8gYSBkb2N1bWVudCBvciBhbm90aGVyIGFnZ3JlZ2F0aW9uKVxuICogQHBhcmFtIG1ldHJpY1xuICovXG5leHBvcnQgY29uc3QgaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhGaWVsZCA9IChcbiAgbWV0cmljOiBCYXNlTWV0cmljQWdncmVnYXRpb24gfCBNZXRyaWNBZ2dyZWdhdGlvbldpdGhGaWVsZFxuKTogbWV0cmljIGlzIE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aEZpZWxkID0+IG1ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnW21ldHJpYy50eXBlXS5yZXF1aXJlc0ZpZWxkO1xuXG5leHBvcnQgY29uc3QgaXNQaXBlbGluZUFnZ3JlZ2F0aW9uID0gKFxuICBtZXRyaWM6IEJhc2VNZXRyaWNBZ2dyZWdhdGlvbiB8IFBpcGVsaW5lTWV0cmljQWdncmVnYXRpb25cbik6IG1ldHJpYyBpcyBQaXBlbGluZU1ldHJpY0FnZ3JlZ2F0aW9uID0+IG1ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnW21ldHJpYy50eXBlXS5pc1BpcGVsaW5lQWdnO1xuXG5leHBvcnQgY29uc3QgaXNQaXBlbGluZUFnZ3JlZ2F0aW9uV2l0aE11bHRpcGxlQnVja2V0UGF0aHMgPSAoXG4gIG1ldHJpYzogQmFzZU1ldHJpY0FnZ3JlZ2F0aW9uIHwgUGlwZWxpbmVNZXRyaWNBZ2dyZWdhdGlvbldpdGhNdWx0aXBsZUJ1Y2tldFBhdGhzXG4pOiBtZXRyaWMgaXMgUGlwZWxpbmVNZXRyaWNBZ2dyZWdhdGlvbldpdGhNdWx0aXBsZUJ1Y2tldFBhdGhzID0+XG4gIG1ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnW21ldHJpYy50eXBlXS5zdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM7XG5cbmV4cG9ydCBjb25zdCBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aE1pc3NpbmdTdXBwb3J0ID0gKFxuICBtZXRyaWM6IEJhc2VNZXRyaWNBZ2dyZWdhdGlvbiB8IE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aE1pc3NpbmdTdXBwb3J0XG4pOiBtZXRyaWMgaXMgTWV0cmljQWdncmVnYXRpb25XaXRoTWlzc2luZ1N1cHBvcnQgPT4gbWV0cmljQWdncmVnYXRpb25Db25maWdbbWV0cmljLnR5cGVdLnN1cHBvcnRzTWlzc2luZztcblxuZXhwb3J0IGNvbnN0IGlzTWV0cmljQWdncmVnYXRpb25XaXRoU2V0dGluZ3MgPSAoXG4gIG1ldHJpYzogQmFzZU1ldHJpY0FnZ3JlZ2F0aW9uIHwgTWV0cmljQWdncmVnYXRpb25XaXRoU2V0dGluZ3Ncbik6IG1ldHJpYyBpcyBNZXRyaWNBZ2dyZWdhdGlvbldpdGhTZXR0aW5ncyA9PiBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZ1ttZXRyaWMudHlwZV0uaGFzU2V0dGluZ3M7XG5cbmV4cG9ydCBjb25zdCBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aE1ldGEgPSAoXG4gIG1ldHJpYzogQmFzZU1ldHJpY0FnZ3JlZ2F0aW9uIHwgTWV0cmljQWdncmVnYXRpb25XaXRoTWV0YVxuKTogbWV0cmljIGlzIE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aE1ldGEgPT4gbWV0cmljQWdncmVnYXRpb25Db25maWdbbWV0cmljLnR5cGVdLmhhc01ldGE7XG5cbmV4cG9ydCBjb25zdCBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aElubGluZVNjcmlwdCA9IChcbiAgbWV0cmljOiBCYXNlTWV0cmljQWdncmVnYXRpb24gfCBNZXRyaWNBZ2dyZWdhdGlvbldpdGhJbmxpbmVTY3JpcHRcbik6IG1ldHJpYyBpcyBNZXRyaWNBZ2dyZWdhdGlvbldpdGhJbmxpbmVTY3JpcHQgPT4gbWV0cmljQWdncmVnYXRpb25Db25maWdbbWV0cmljLnR5cGVdLnN1cHBvcnRzSW5saW5lU2NyaXB0O1xuXG5leHBvcnQgY29uc3QgTUVUUklDX0FHR1JFR0FUSU9OX1RZUEVTOiBNZXRyaWNBZ2dyZWdhdGlvblR5cGVbXSA9IFtcbiAgJ2NvdW50JyxcbiAgJ2F2ZycsXG4gICdzdW0nLFxuICAnbWluJyxcbiAgJ21heCcsXG4gICdleHRlbmRlZF9zdGF0cycsXG4gICdwZXJjZW50aWxlcycsXG4gICdjYXJkaW5hbGl0eScsXG4gICdyYXdfZG9jdW1lbnQnLFxuICAncmF3X2RhdGEnLFxuICAnbG9ncycsXG4gICdtb3ZpbmdfYXZnJyxcbiAgJ21vdmluZ19mbicsXG4gICdkZXJpdmF0aXZlJyxcbiAgJ3NlcmlhbF9kaWZmJyxcbiAgJ2N1bXVsYXRpdmVfc3VtJyxcbiAgJ2J1Y2tldF9zY3JpcHQnLFxuICAncmF0ZScsXG4gICd0b3BfbWV0cmljcycsXG5dO1xuXG5leHBvcnQgY29uc3QgaXNNZXRyaWNBZ2dyZWdhdGlvblR5cGUgPSAoczogTWV0cmljQWdncmVnYXRpb25UeXBlIHwgc3RyaW5nKTogcyBpcyBNZXRyaWNBZ2dyZWdhdGlvblR5cGUgPT5cbiAgTUVUUklDX0FHR1JFR0FUSU9OX1RZUEVTLmluY2x1ZGVzKHMgYXMgTWV0cmljQWdncmVnYXRpb25UeXBlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/index.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetricAggregationsEditor: () => (/* binding */ MetricAggregationsEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Alert/Alert.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _QueryEditorRow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryEditorRow.tsx\");\n/* harmony import */ var _QueryEditorSpecialMetricRow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryEditorSpecialMetricRow.tsx\");\n/* harmony import */ var _MetricEditor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/MetricEditor.tsx\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n\n\n\n\n\n\n\n\n\n\nconst MetricAggregationsEditor = ({ nextId }) => {\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__.useDispatch)();\n  const { metrics } = (0,_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_2__.useQuery)();\n  const totalMetrics = metrics?.length || 0;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, metrics?.map((metric, index) => {\n    switch (metric.type) {\n      case \"logs\":\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_QueryEditorSpecialMetricRow__WEBPACK_IMPORTED_MODULE_4__.QueryEditorSpecialMetricRow, { key: `${metric.type}-${metric.id}`, name: \"Logs\", metric });\n      case \"raw_data\":\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_QueryEditorSpecialMetricRow__WEBPACK_IMPORTED_MODULE_4__.QueryEditorSpecialMetricRow, { key: `${metric.type}-${metric.id}`, name: \"Raw Data\", metric });\n      case \"raw_document\":\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_QueryEditorSpecialMetricRow__WEBPACK_IMPORTED_MODULE_4__.QueryEditorSpecialMetricRow, { key: `${metric.type}-${metric.id}`, name: \"Raw Document\", metric }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Alert, { severity: \"warning\", title: \"The 'Raw Document' query type is deprecated.\" }));\n      default:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n          _QueryEditorRow__WEBPACK_IMPORTED_MODULE_3__.QueryEditorRow,\n          {\n            key: `${metric.type}-${metric.id}`,\n            label: `Metric (${metric.id})`,\n            hidden: metric.hide,\n            onHideClick: () => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.toggleMetricVisibility)(metric.id)),\n            onRemoveClick: totalMetrics > 1 && (() => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.removeMetric)(metric.id)))\n          },\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_MetricEditor__WEBPACK_IMPORTED_MODULE_5__.MetricEditor, { value: metric }),\n          _utils__WEBPACK_IMPORTED_MODULE_7__.metricAggregationConfig[metric.type].impliedQueryType === \"metrics\" && index === 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n            _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Button,\n            {\n              variant: \"secondary\",\n              fill: \"text\",\n              icon: \"plus\",\n              onClick: () => dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_6__.addMetric)(nextId)),\n              tooltip: \"Add metric\",\n              \"aria-label\": \"Add metric\"\n            }\n          )\n        );\n    }\n  }));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQWtCO0FBRVk7QUFFRjtBQUNIO0FBQ007QUFDYTtBQUdmO0FBQ21DO0FBQ3hCO0FBTWpDLE1BQU0sMkJBQTJCLENBQUMsRUFBRSxPQUFPLE1BQWE7QUFDN0QsUUFBTSxXQUFXLHVFQUFXLENBQUM7QUFDN0IsUUFBTSxFQUFFLFFBQVEsSUFBSSxvRUFBUSxDQUFDO0FBQzdCLFFBQU0sZUFBZSxTQUFTLFVBQVU7QUFFeEMsU0FDRSwwSUFDRyxTQUFTLElBQUksQ0FBQyxRQUFRLFVBQVU7QUFDL0IsWUFBUSxPQUFPLE1BQU07QUFBQSxNQUNuQixLQUFLO0FBQ0gsZUFBTywyRUFBQyxxRkFBMkIsSUFBQyxLQUFLLEdBQUcsT0FBTyxRQUFRLE9BQU8sTUFBTSxNQUFLLFFBQU8sUUFBZ0I7QUFBQSxNQUN0RyxLQUFLO0FBQ0gsZUFBTywyRUFBQyxxRkFBMkIsSUFBQyxLQUFLLEdBQUcsT0FBTyxRQUFRLE9BQU8sTUFBTSxNQUFLLFlBQVcsUUFBZ0I7QUFBQSxNQUMxRyxLQUFLO0FBQ0gsZUFDRSwwSUFDRSwyRUFBQyxxRkFBMkIsSUFBQyxLQUFLLEdBQUcsT0FBTyxRQUFRLE9BQU8sTUFBTSxNQUFLLGdCQUFlLFFBQWdCLEdBQ3JHLDJFQUFDLDhDQUFLLElBQUMsVUFBUyxXQUFVLE9BQU0sZ0RBQStDLENBQ2pGO0FBQUEsTUFFSjtBQUNFLGVBQ0U7QUFBQSxVQUFDLDJEQUFjO0FBQWQ7QUFBQSxZQUNDLEtBQUssR0FBRyxPQUFPLFFBQVEsT0FBTztBQUFBLFlBQzlCLE9BQU8sV0FBVyxPQUFPO0FBQUEsWUFDekIsUUFBUSxPQUFPO0FBQUEsWUFDZixhQUFhLE1BQU0sU0FBUyxzRUFBc0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUFBLFlBQzdELGVBQWUsZUFBZSxNQUFNLE1BQU0sU0FBUyw0REFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQUE7QUFBQSxVQUUxRSwyRUFBQyx1REFBWSxJQUFDLE9BQU8sUUFBUTtBQUFBLFVBRTVCLDJEQUF1QixDQUFDLE9BQU8sSUFBSSxFQUFFLHFCQUFxQixhQUFhLFVBQVUsS0FDaEY7QUFBQSxZQUFDLCtDQUFNO0FBQU47QUFBQSxjQUNDLFNBQVE7QUFBQSxjQUNSLE1BQUs7QUFBQSxjQUNMLE1BQUs7QUFBQSxjQUNMLFNBQVMsTUFBTSxTQUFTLHlEQUFTLENBQUMsTUFBTSxDQUFDO0FBQUEsY0FDekMsU0FBUTtBQUFBLGNBQ1IsY0FBVztBQUFBO0FBQUEsVUFDYjtBQUFBLFFBRUo7QUFBQSxJQUVOO0FBQUEsRUFDRixDQUFDLENBQ0g7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL2luZGV4LnRzeD8yNDdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEFsZXJ0LCBCdXR0b24gfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlU3RhdGVsZXNzUmVkdWNlcic7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJy4uL0VsYXN0aWNzZWFyY2hRdWVyeUNvbnRleHQnO1xuaW1wb3J0IHsgUXVlcnlFZGl0b3JSb3cgfSBmcm9tICcuLi9RdWVyeUVkaXRvclJvdyc7XG5pbXBvcnQgeyBRdWVyeUVkaXRvclNwZWNpYWxNZXRyaWNSb3cgfSBmcm9tICcuLi9RdWVyeUVkaXRvclNwZWNpYWxNZXRyaWNSb3cnO1xuXG5pbXBvcnQgeyBNZXRyaWNBZ2dyZWdhdGlvbiB9IGZyb20gJy4vLi4vLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgTWV0cmljRWRpdG9yIH0gZnJvbSAnLi9NZXRyaWNFZGl0b3InO1xuaW1wb3J0IHsgYWRkTWV0cmljLCByZW1vdmVNZXRyaWMsIHRvZ2dsZU1ldHJpY1Zpc2liaWxpdHkgfSBmcm9tICcuL3N0YXRlL2FjdGlvbnMnO1xuaW1wb3J0IHsgbWV0cmljQWdncmVnYXRpb25Db25maWcgfSBmcm9tICcuL3V0aWxzJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgbmV4dElkOiBNZXRyaWNBZ2dyZWdhdGlvblsnaWQnXTtcbn1cblxuZXhwb3J0IGNvbnN0IE1ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvciA9ICh7IG5leHRJZCB9OiBQcm9wcykgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IHsgbWV0cmljcyB9ID0gdXNlUXVlcnkoKTtcbiAgY29uc3QgdG90YWxNZXRyaWNzID0gbWV0cmljcz8ubGVuZ3RoIHx8IDA7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAge21ldHJpY3M/Lm1hcCgobWV0cmljLCBpbmRleCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKG1ldHJpYy50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnbG9ncyc6XG4gICAgICAgICAgICByZXR1cm4gPFF1ZXJ5RWRpdG9yU3BlY2lhbE1ldHJpY1JvdyBrZXk9e2Ake21ldHJpYy50eXBlfS0ke21ldHJpYy5pZH1gfSBuYW1lPVwiTG9nc1wiIG1ldHJpYz17bWV0cmljfSAvPjtcbiAgICAgICAgICBjYXNlICdyYXdfZGF0YSc6XG4gICAgICAgICAgICByZXR1cm4gPFF1ZXJ5RWRpdG9yU3BlY2lhbE1ldHJpY1JvdyBrZXk9e2Ake21ldHJpYy50eXBlfS0ke21ldHJpYy5pZH1gfSBuYW1lPVwiUmF3IERhdGFcIiBtZXRyaWM9e21ldHJpY30gLz47XG4gICAgICAgICAgY2FzZSAncmF3X2RvY3VtZW50JzpcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPFF1ZXJ5RWRpdG9yU3BlY2lhbE1ldHJpY1JvdyBrZXk9e2Ake21ldHJpYy50eXBlfS0ke21ldHJpYy5pZH1gfSBuYW1lPVwiUmF3IERvY3VtZW50XCIgbWV0cmljPXttZXRyaWN9IC8+XG4gICAgICAgICAgICAgICAgPEFsZXJ0IHNldmVyaXR5PVwid2FybmluZ1wiIHRpdGxlPVwiVGhlICdSYXcgRG9jdW1lbnQnIHF1ZXJ5IHR5cGUgaXMgZGVwcmVjYXRlZC5cIiAvPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxRdWVyeUVkaXRvclJvd1xuICAgICAgICAgICAgICAgIGtleT17YCR7bWV0cmljLnR5cGV9LSR7bWV0cmljLmlkfWB9XG4gICAgICAgICAgICAgICAgbGFiZWw9e2BNZXRyaWMgKCR7bWV0cmljLmlkfSlgfVxuICAgICAgICAgICAgICAgIGhpZGRlbj17bWV0cmljLmhpZGV9XG4gICAgICAgICAgICAgICAgb25IaWRlQ2xpY2s9eygpID0+IGRpc3BhdGNoKHRvZ2dsZU1ldHJpY1Zpc2liaWxpdHkobWV0cmljLmlkKSl9XG4gICAgICAgICAgICAgICAgb25SZW1vdmVDbGljaz17dG90YWxNZXRyaWNzID4gMSAmJiAoKCkgPT4gZGlzcGF0Y2gocmVtb3ZlTWV0cmljKG1ldHJpYy5pZCkpKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxNZXRyaWNFZGl0b3IgdmFsdWU9e21ldHJpY30gLz5cblxuICAgICAgICAgICAgICAgIHttZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZ1ttZXRyaWMudHlwZV0uaW1wbGllZFF1ZXJ5VHlwZSA9PT0gJ21ldHJpY3MnICYmIGluZGV4ID09PSAwICYmIChcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgaWNvbj1cInBsdXNcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBkaXNwYXRjaChhZGRNZXRyaWMobmV4dElkKSl9XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA9XCJBZGQgbWV0cmljXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkFkZCBtZXRyaWNcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L1F1ZXJ5RWRpdG9yUm93PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSl9XG4gICAgPC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/index.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addMetric: () => (/* binding */ addMetric),\n/* harmony export */   changeMetricAttribute: () => (/* binding */ changeMetricAttribute),\n/* harmony export */   changeMetricField: () => (/* binding */ changeMetricField),\n/* harmony export */   changeMetricMeta: () => (/* binding */ changeMetricMeta),\n/* harmony export */   changeMetricSetting: () => (/* binding */ changeMetricSetting),\n/* harmony export */   changeMetricType: () => (/* binding */ changeMetricType),\n/* harmony export */   removeMetric: () => (/* binding */ removeMetric),\n/* harmony export */   toggleMetricVisibility: () => (/* binding */ toggleMetricVisibility)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@reduxjs-toolkit-virtual-75570b104b/0/cache/@reduxjs-toolkit-npm-1.9.3-cbad5da1de-d965fc6197.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js\");\n\n\nconst addMetric = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@metrics/add\");\nconst removeMetric = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@metrics/remove\");\nconst toggleMetricVisibility = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@metrics/toggle_visibility\");\nconst changeMetricField = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@metrics/change_field\");\nconst changeMetricType = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\n  \"@metrics/change_type\"\n);\nconst changeMetricAttribute = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\n  \"@metrics/change_attr\"\n);\nconst changeMetricSetting = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@metrics/change_setting\");\nconst changeMetricMeta = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"@metrics/change_meta\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3N0YXRlL2FjdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUE2QjtBQUl0QixNQUFNLFlBQVksOERBQVksQ0FBMEIsY0FBYztBQUN0RSxNQUFNLGVBQWUsOERBQVksQ0FBMEIsaUJBQWlCO0FBQzVFLE1BQU0seUJBQXlCLDhEQUFZLENBQTBCLDRCQUE0QjtBQUNqRyxNQUFNLG9CQUFvQiw4REFBWSxDQUFpRCx1QkFBdUI7QUFDOUcsTUFBTSxtQkFBbUIsOERBQVk7QUFBWixFQUM5QjtBQUNGO0FBQ08sTUFBTSx3QkFBd0IsOERBQVk7QUFBWixFQUNuQztBQUNGO0FBQ08sTUFBTSxzQkFBc0IsOERBQVksQ0FJNUMseUJBQXlCO0FBQ3JCLE1BQU0sbUJBQW1CLDhEQUFZLENBSXpDLHNCQUFzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3N0YXRlL2FjdGlvbnMudHM/YTZkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVBY3Rpb24gfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcblxuaW1wb3J0IHsgTWV0cmljQWdncmVnYXRpb25XaXRoTWV0YSwgTWV0cmljQWdncmVnYXRpb24sIE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aFNldHRpbmdzIH0gZnJvbSAnLi4vLi4vLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgYWRkTWV0cmljID0gY3JlYXRlQWN0aW9uPE1ldHJpY0FnZ3JlZ2F0aW9uWydpZCddPignQG1ldHJpY3MvYWRkJyk7XG5leHBvcnQgY29uc3QgcmVtb3ZlTWV0cmljID0gY3JlYXRlQWN0aW9uPE1ldHJpY0FnZ3JlZ2F0aW9uWydpZCddPignQG1ldHJpY3MvcmVtb3ZlJyk7XG5leHBvcnQgY29uc3QgdG9nZ2xlTWV0cmljVmlzaWJpbGl0eSA9IGNyZWF0ZUFjdGlvbjxNZXRyaWNBZ2dyZWdhdGlvblsnaWQnXT4oJ0BtZXRyaWNzL3RvZ2dsZV92aXNpYmlsaXR5Jyk7XG5leHBvcnQgY29uc3QgY2hhbmdlTWV0cmljRmllbGQgPSBjcmVhdGVBY3Rpb248eyBpZDogTWV0cmljQWdncmVnYXRpb25bJ2lkJ107IGZpZWxkOiBzdHJpbmcgfT4oJ0BtZXRyaWNzL2NoYW5nZV9maWVsZCcpO1xuZXhwb3J0IGNvbnN0IGNoYW5nZU1ldHJpY1R5cGUgPSBjcmVhdGVBY3Rpb248eyBpZDogTWV0cmljQWdncmVnYXRpb25bJ2lkJ107IHR5cGU6IE1ldHJpY0FnZ3JlZ2F0aW9uWyd0eXBlJ10gfT4oXG4gICdAbWV0cmljcy9jaGFuZ2VfdHlwZSdcbik7XG5leHBvcnQgY29uc3QgY2hhbmdlTWV0cmljQXR0cmlidXRlID0gY3JlYXRlQWN0aW9uPHsgbWV0cmljOiBNZXRyaWNBZ2dyZWdhdGlvbjsgYXR0cmlidXRlOiBzdHJpbmc7IG5ld1ZhbHVlOiBhbnkgfT4oXG4gICdAbWV0cmljcy9jaGFuZ2VfYXR0cidcbik7XG5leHBvcnQgY29uc3QgY2hhbmdlTWV0cmljU2V0dGluZyA9IGNyZWF0ZUFjdGlvbjx7XG4gIG1ldHJpYzogTWV0cmljQWdncmVnYXRpb25XaXRoU2V0dGluZ3M7XG4gIHNldHRpbmdOYW1lOiBzdHJpbmc7XG4gIG5ld1ZhbHVlOiBhbnk7XG59PignQG1ldHJpY3MvY2hhbmdlX3NldHRpbmcnKTtcbmV4cG9ydCBjb25zdCBjaGFuZ2VNZXRyaWNNZXRhID0gY3JlYXRlQWN0aW9uPHtcbiAgbWV0cmljOiBNZXRyaWNBZ2dyZWdhdGlvbldpdGhNZXRhO1xuICBtZXRhOiBzdHJpbmc7XG4gIG5ld1ZhbHVlOiBhbnk7XG59PignQG1ldHJpY3MvY2hhbmdlX21ldGEnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/reducer.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reducer: () => (/* binding */ reducer)\n/* harmony export */ });\n/* harmony import */ var _queryDef__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/queryDef.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/state.ts\");\n/* harmony import */ var _aggregations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n\n\n\n\n\n\n\nconst reducer = (state, action) => {\n  if (_actions__WEBPACK_IMPORTED_MODULE_5__.addMetric.match(action)) {\n    return [...state, (0,_queryDef__WEBPACK_IMPORTED_MODULE_0__.defaultMetricAgg)(action.payload)];\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_5__.removeMetric.match(action)) {\n    const metricToRemove = state.find((m) => m.id === action.payload);\n    const metricsToRemove = [metricToRemove, ...(0,_utils__WEBPACK_IMPORTED_MODULE_4__.getChildren)(metricToRemove, state)];\n    const resultingMetrics = state.filter((metric) => !metricsToRemove.some((toRemove) => toRemove.id === metric.id));\n    if (resultingMetrics.length === 0) {\n      return [(0,_queryDef__WEBPACK_IMPORTED_MODULE_0__.defaultMetricAgg)(\"1\")];\n    }\n    return resultingMetrics;\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricType.match(action)) {\n    return state.filter(\n      (metric) => (\n        // When the new query type is not `metrics` we remove all other metrics from the query\n        // leaving only the current one.\n        _utils__WEBPACK_IMPORTED_MODULE_4__.metricAggregationConfig[action.payload.type].impliedQueryType === \"metrics\" ? true : metric.id === action.payload.id\n      )\n    ).map((metric) => {\n      if (metric.id !== action.payload.id) {\n        return metric;\n      }\n      return {\n        id: metric.id,\n        type: action.payload.type,\n        ..._utils__WEBPACK_IMPORTED_MODULE_4__.metricAggregationConfig[action.payload.type].defaults\n      };\n    });\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricField.match(action)) {\n    return state.map((metric) => {\n      if (metric.id !== action.payload.id) {\n        return metric;\n      }\n      const newMetric = {\n        ...metric,\n        field: action.payload.field\n      };\n      if ((0,_aggregations__WEBPACK_IMPORTED_MODULE_3__.isPipelineAggregation)(metric)) {\n        return { ...newMetric, pipelineAgg: action.payload.field };\n      }\n      return newMetric;\n    });\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_5__.toggleMetricVisibility.match(action)) {\n    return state.map((metric) => {\n      if (metric.id !== action.payload) {\n        return metric;\n      }\n      return {\n        ...metric,\n        hide: !metric.hide\n      };\n    });\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricSetting.match(action)) {\n    return state.map((metric) => {\n      if (metric.id !== action.payload.metric.id) {\n        return metric;\n      }\n      if ((0,_aggregations__WEBPACK_IMPORTED_MODULE_3__.isMetricAggregationWithSettings)(metric)) {\n        const newSettings = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.removeEmpty)({\n          ...metric.settings,\n          [action.payload.settingName]: action.payload.newValue\n        });\n        return {\n          ...metric,\n          settings: {\n            ...newSettings\n          }\n        };\n      }\n      return metric;\n    });\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricMeta.match(action)) {\n    return state.map((metric) => {\n      if (metric.id !== action.payload.metric.id) {\n        return metric;\n      }\n      if ((0,_aggregations__WEBPACK_IMPORTED_MODULE_3__.isMetricAggregationWithMeta)(metric)) {\n        return {\n          ...metric,\n          meta: {\n            ...metric.meta,\n            [action.payload.meta]: action.payload.newValue\n          }\n        };\n      }\n      return metric;\n    });\n  }\n  if (_actions__WEBPACK_IMPORTED_MODULE_5__.changeMetricAttribute.match(action)) {\n    return state.map((metric) => {\n      if (metric.id !== action.payload.metric.id) {\n        return metric;\n      }\n      return {\n        ...metric,\n        [action.payload.attribute]: action.payload.newValue\n      };\n    });\n  }\n  if (_state__WEBPACK_IMPORTED_MODULE_2__.initQuery.match(action)) {\n    if (state && state.length > 0) {\n      return state;\n    }\n    return [(0,_queryDef__WEBPACK_IMPORTED_MODULE_0__.defaultMetricAgg)(\"1\")];\n  }\n  return state;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3N0YXRlL3JlZHVjZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFaUM7QUFFTDtBQUNGO0FBQzBFO0FBQy9DO0FBVzlDO0FBRUEsTUFBTSxVQUFVLENBQUMsT0FBc0MsV0FBa0Q7QUFDOUcsTUFBSSwrQ0FBUyxDQUFDLE1BQU0sTUFBTSxHQUFHO0FBQzNCLFdBQU8sQ0FBQyxHQUFHLE9BQVEsMkRBQWdCLENBQUMsT0FBTyxPQUFPLENBQUM7QUFBQSxFQUNyRDtBQUVBLE1BQUksa0RBQVksQ0FBQyxNQUFNLE1BQU0sR0FBRztBQUM5QixVQUFNLGlCQUFpQixNQUFPLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxPQUFPLE9BQU87QUFDakUsVUFBTSxrQkFBa0IsQ0FBQyxnQkFBZ0IsR0FBRyxtREFBVyxDQUFDLGdCQUFnQixLQUFNLENBQUM7QUFDL0UsVUFBTSxtQkFBbUIsTUFBTyxPQUFPLENBQUMsV0FBVyxDQUFDLGdCQUFnQixLQUFLLENBQUMsYUFBYSxTQUFTLE9BQU8sT0FBTyxFQUFFLENBQUM7QUFDakgsUUFBSSxpQkFBaUIsV0FBVyxHQUFHO0FBQ2pDLGFBQU8sQ0FBQywyREFBZ0IsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUMvQjtBQUNBLFdBQU87QUFBQSxFQUNUO0FBRUEsTUFBSSxzREFBZ0IsQ0FBQyxNQUFNLE1BQU0sR0FBRztBQUNsQyxXQUFPLE1BQ0o7QUFBQSxNQUFPLENBQUM7QUFBQTtBQUFBO0FBQUEsUUFHUCwyREFBdUIsQ0FBQyxPQUFPLFFBQVEsSUFBSSxFQUFFLHFCQUFxQixZQUM5RCxPQUNBLE9BQU8sT0FBTyxPQUFPLFFBQVE7QUFBQTtBQUFBLElBQ25DLEVBQ0MsSUFBSSxDQUFDLFdBQVc7QUFDZixVQUFJLE9BQU8sT0FBTyxPQUFPLFFBQVEsSUFBSTtBQUNu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Olsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3N0YXRlL3JlZHVjZXIudHM/Njg4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcblxuaW1wb3J0IHsgZGVmYXVsdE1ldHJpY0FnZyB9IGZyb20gJy4uLy4uLy4uLy4uL3F1ZXJ5RGVmJztcbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hRdWVyeSwgTWV0cmljQWdncmVnYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyByZW1vdmVFbXB0eSB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IGluaXRRdWVyeSB9IGZyb20gJy4uLy4uL3N0YXRlJztcbmltcG9ydCB7IGlzTWV0cmljQWdncmVnYXRpb25XaXRoTWV0YSwgaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhTZXR0aW5ncywgaXNQaXBlbGluZUFnZ3JlZ2F0aW9uIH0gZnJvbSAnLi4vYWdncmVnYXRpb25zJztcbmltcG9ydCB7IGdldENoaWxkcmVuLCBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZyB9IGZyb20gJy4uL3V0aWxzJztcblxuaW1wb3J0IHtcbiAgYWRkTWV0cmljLFxuICBjaGFuZ2VNZXRyaWNBdHRyaWJ1dGUsXG4gIGNoYW5nZU1ldHJpY0ZpZWxkLFxuICBjaGFuZ2VNZXRyaWNNZXRhLFxuICBjaGFuZ2VNZXRyaWNTZXR0aW5nLFxuICBjaGFuZ2VNZXRyaWNUeXBlLFxuICByZW1vdmVNZXRyaWMsXG4gIHRvZ2dsZU1ldHJpY1Zpc2liaWxpdHksXG59IGZyb20gJy4vYWN0aW9ucyc7XG5cbmV4cG9ydCBjb25zdCByZWR1Y2VyID0gKHN0YXRlOiBFbGFzdGljc2VhcmNoUXVlcnlbJ21ldHJpY3MnXSwgYWN0aW9uOiBBY3Rpb24pOiBFbGFzdGljc2VhcmNoUXVlcnlbJ21ldHJpY3MnXSA9PiB7XG4gIGlmIChhZGRNZXRyaWMubWF0Y2goYWN0aW9uKSkge1xuICAgIHJldHVybiBbLi4uc3RhdGUhLCBkZWZhdWx0TWV0cmljQWdnKGFjdGlvbi5wYXlsb2FkKV07XG4gIH1cblxuICBpZiAocmVtb3ZlTWV0cmljLm1hdGNoKGFjdGlvbikpIHtcbiAgICBjb25zdCBtZXRyaWNUb1JlbW92ZSA9IHN0YXRlIS5maW5kKChtKSA9PiBtLmlkID09PSBhY3Rpb24ucGF5bG9hZCkhO1xuICAgIGNvbnN0IG1ldHJpY3NUb1JlbW92ZSA9IFttZXRyaWNUb1JlbW92ZSwgLi4uZ2V0Q2hpbGRyZW4obWV0cmljVG9SZW1vdmUsIHN0YXRlISldO1xuICAgIGNvbnN0IHJlc3VsdGluZ01ldHJpY3MgPSBzdGF0ZSEuZmlsdGVyKChtZXRyaWMpID0+ICFtZXRyaWNzVG9SZW1vdmUuc29tZSgodG9SZW1vdmUpID0+IHRvUmVtb3ZlLmlkID09PSBtZXRyaWMuaWQpKTtcbiAgICBpZiAocmVzdWx0aW5nTWV0cmljcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbZGVmYXVsdE1ldHJpY0FnZygnMScpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdGluZ01ldHJpY3M7XG4gIH1cblxuICBpZiAoY2hhbmdlTWV0cmljVHlwZS5tYXRjaChhY3Rpb24pKSB7XG4gICAgcmV0dXJuIHN0YXRlIVxuICAgICAgLmZpbHRlcigobWV0cmljKSA9PlxuICAgICAgICAvLyBXaGVuIHRoZSBuZXcgcXVlcnkgdHlwZSBpcyBub3QgYG1ldHJpY3NgIHdlIHJlbW92ZSBhbGwgb3RoZXIgbWV0cmljcyBmcm9tIHRoZSBxdWVyeVxuICAgICAgICAvLyBsZWF2aW5nIG9ubHkgdGhlIGN1cnJlbnQgb25lLlxuICAgICAgICBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZ1thY3Rpb24ucGF5bG9hZC50eXBlXS5pbXBsaWVkUXVlcnlUeXBlID09PSAnbWV0cmljcydcbiAgICAgICAgICA/IHRydWVcbiAgICAgICAgICA6IG1ldHJpYy5pZCA9PT0gYWN0aW9uLnBheWxvYWQuaWRcbiAgICAgIClcbiAgICAgIC5tYXAoKG1ldHJpYykgPT4ge1xuICAgICAgICBpZiAobWV0cmljLmlkICE9PSBhY3Rpb24ucGF5bG9hZC5pZCkge1xuICAgICAgICAgIHJldHVybiBtZXRyaWM7XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICBUT0RPOiBUaGUgcHJldmlvdXMgdmVyc2lvbiBvZiB0aGUgcXVlcnkgZWRpdG9yIHdhcyBrZWVwaW5nIHNvbWUgb2YgdGhlIG9sZCBtZXRyaWMncyBjb25maWd1cmF0aW9uc1xuICAgICAgICBpbiB0aGUgbmV3IHNlbGVjdGVkIG9uZSAoc3VjaCBhcyBmaWVsZCBvciBzb21lIHNldHRpbmdzKS5cbiAgICAgICAgSXQgdGhlIGZ1dHVyZSB3b3VsZCBiZSBuaWNlIHRvIGhhdmUgdGhlIHNhbWUgYmVoYXZpb3IgYnV0IGl0J3MgaGFyZCB3aXRob3V0IGEgcHJvcGVyIGRlZmluaXRpb24sXG4gICAgICAgIGFzIEVsYXN0aWNzZWFyY2ggd2lsbCBlcnJvciBzb21ldGltZXMgaWYgc29tZSBzZXR0aW5ncyBhcmUgbm90IGNvbXBhdGlibGUuXG4gICAgICAqL1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBtZXRyaWMuaWQsXG4gICAgICAgICAgdHlwZTogYWN0aW9uLnBheWxvYWQudHlwZSxcbiAgICAgICAgICAuLi5tZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZ1thY3Rpb24ucGF5bG9hZC50eXBlXS5kZWZhdWx0cyxcbiAgICAgICAgfSBhcyBNZXRyaWNBZ2dyZWdhdGlvbjtcbiAgICAgIH0pO1xuICB9XG5cbiAgaWYgKGNoYW5nZU1ldHJpY0ZpZWxkLm1hdGNoKGFjdGlvbikpIHtcbiAgICByZXR1cm4gc3RhdGUhLm1hcCgobWV0cmljKSA9PiB7XG4gICAgICBpZiAobWV0cmljLmlkICE9PSBhY3Rpb24ucGF5bG9hZC5pZCkge1xuICAgICAgICByZXR1cm4gbWV0cmljO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXdNZXRyaWMgPSB7XG4gICAgICAgIC4uLm1ldHJpYyxcbiAgICAgICAgZmllbGQ6IGFjdGlvbi5wYXlsb2FkLmZpZWxkLFxuICAgICAgfTtcblxuICAgICAgaWYgKGlzUGlwZWxpbmVBZ2dyZWdhdGlvbihtZXRyaWMpKSB7XG4gICAgICAgIHJldHVybiB7IC4uLm5ld01ldHJpYywgcGlwZWxpbmVBZ2c6IGFjdGlvbi5wYXlsb2FkLmZpZWxkIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdNZXRyaWM7XG4gICAgfSk7XG4gIH1cblxuICBpZiAodG9nZ2xlTWV0cmljVmlzaWJpbGl0eS5tYXRjaChhY3Rpb24pKSB7XG4gICAgcmV0dXJuIHN0YXRlIS5tYXAoKG1ldHJpYykgPT4ge1xuICAgICAgaWYgKG1ldHJpYy5pZCAhPT0gYWN0aW9uLnBheWxvYWQpIHtcbiAgICAgICAgcmV0dXJuIG1ldHJpYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ubWV0cmljLFxuICAgICAgICBoaWRlOiAhbWV0cmljLmhpZGUsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGNoYW5nZU1ldHJpY1NldHRpbmcubWF0Y2goYWN0aW9uKSkge1xuICAgIHJldHVybiBzdGF0ZSEubWFwKChtZXRyaWMpID0+IHtcbiAgICAgIGlmIChtZXRyaWMuaWQgIT09IGFjdGlvbi5wYXlsb2FkLm1ldHJpYy5pZCkge1xuICAgICAgICByZXR1cm4gbWV0cmljO1xuICAgICAgfVxuXG4gICAgICAvLyBUT0RPOiBIZXJlLCBpbnN0ZWFkIG9mIHRoaXMgaWYgc3RhdGVtZW50LCB3ZSBzaG91bGQgYXNzZXJ0IHRoYXQgbWV0cmljIGlzIE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aFNldHRpbmdzXG4gICAgICBpZiAoaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhTZXR0aW5ncyhtZXRyaWMpKSB7XG4gICAgICAgIGNvbnN0IG5ld1NldHRpbmdzID0gcmVtb3ZlRW1wdHkoe1xuICAgICAgICAgIC4uLm1ldHJpYy5zZXR0aW5ncyxcbiAgICAgICAgICBbYWN0aW9uLnBheWxvYWQuc2V0dGluZ05hbWVdOiBhY3Rpb24ucGF5bG9hZC5uZXdWYWx1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5tZXRyaWMsXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIC4uLm5ld1NldHRpbmdzLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbi5cbiAgICAgIHJldHVybiBtZXRyaWM7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoY2hhbmdlTWV0cmljTWV0YS5tYXRjaChhY3Rpb24pKSB7XG4gICAgcmV0dXJuIHN0YXRlIS5tYXAoKG1ldHJpYykgPT4ge1xuICAgICAgaWYgKG1ldHJpYy5pZCAhPT0gYWN0aW9uLnBheWxvYWQubWV0cmljLmlkKSB7XG4gICAgICAgIHJldHVybiBtZXRyaWM7XG4gICAgICB9XG5cbiAgICAgIC8vIFRPRE86IEhlcmUsIGluc3RlYWQgb2YgdGhpcyBpZiBzdGF0ZW1lbnQsIHdlIHNob3VsZCBhc3NlcnQgdGhhdCBtZXRyaWMgaXMgTWV0cmljQWdncmVnYXRpb25XaXRoTWV0YVxuICAgICAgaWYgKGlzTWV0cmljQWdncmVnYXRpb25XaXRoTWV0YShtZXRyaWMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubWV0cmljLFxuICAgICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAgIC4uLm1ldHJpYy5tZXRhLFxuICAgICAgICAgICAgW2FjdGlvbi5wYXlsb2FkLm1ldGFdOiBhY3Rpb24ucGF5bG9hZC5uZXdWYWx1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4uXG4gICAgICByZXR1cm4gbWV0cmljO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGNoYW5nZU1ldHJpY0F0dHJpYnV0ZS5tYXRjaChhY3Rpb24pKSB7XG4gICAgcmV0dXJuIHN0YXRlIS5tYXAoKG1ldHJpYykgPT4ge1xuICAgICAgaWYgKG1ldHJpYy5pZCAhPT0gYWN0aW9uLnBheWxvYWQubWV0cmljLmlkKSB7XG4gICAgICAgIHJldHVybiBtZXRyaWM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm1ldHJpYyxcbiAgICAgICAgW2FjdGlvbi5wYXlsb2FkLmF0dHJpYnV0ZV06IGFjdGlvbi5wYXlsb2FkLm5ld1ZhbHVlLFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChpbml0UXVlcnkubWF0Y2goYWN0aW9uKSkge1xuICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICAgIHJldHVybiBbZGVmYXVsdE1ldHJpY0FnZygnMScpXTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/reducer.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/styles.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getStyles: () => (/* binding */ getStyles)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n\n\nconst getStyles = (theme, hidden) => {\n  return {\n    color: hidden && (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n        &,\n        &:hover,\n        label,\n        a {\n          color: ${hidden ? theme.colors.text.disabled : theme.colors.text.primary};\n        }\n      `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3N0eWxlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0I7QUFJYixNQUFNLFlBQVksQ0FBQyxPQUFzQixXQUFvQjtBQUNsRSxTQUFPO0FBQUEsSUFDTCxPQUNFLFVBQ0EsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQTtBQUFBLG1CQUthLFNBQVMsTUFBTSxPQUFPLEtBQUssV0FBVyxNQUFNLE9BQU8sS0FBSztBQUFBO0FBQUE7QUFBQSxFQUd6RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3Ivc3R5bGVzLnRzPzJjYzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuXG5leHBvcnQgY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyLCBoaWRkZW46IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIHtcbiAgICBjb2xvcjpcbiAgICAgIGhpZGRlbiAmJlxuICAgICAgY3NzYFxuICAgICAgICAmLFxuICAgICAgICAmOmhvdmVyLFxuICAgICAgICBsYWJlbCxcbiAgICAgICAgYSB7XG4gICAgICAgICAgY29sb3I6ICR7aGlkZGVuID8gdGhlbWUuY29sb3JzLnRleHQuZGlzYWJsZWQgOiB0aGVtZS5jb2xvcnMudGV4dC5wcmltYXJ5fTtcbiAgICAgICAgfVxuICAgICAgYCxcbiAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/styles.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getChildren: () => (/* binding */ getChildren),\n/* harmony export */   metricAggregationConfig: () => (/* binding */ metricAggregationConfig),\n/* harmony export */   pipelineOptions: () => (/* binding */ pipelineOptions)\n/* harmony export */ });\n/* harmony import */ var _SettingsEditor_BucketScriptSettingsEditor_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/BucketScriptSettingsEditor/utils.ts\");\n/* harmony import */ var _aggregations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n\n\n\nconst metricAggregationConfig = {\n  count: {\n    label: \"Count\",\n    impliedQueryType: \"metrics\",\n    requiresField: false,\n    isPipelineAgg: false,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: false,\n    hasMeta: false,\n    supportsInlineScript: false,\n    defaults: {}\n  },\n  avg: {\n    label: \"Average\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    supportsInlineScript: true,\n    supportsMissing: true,\n    isPipelineAgg: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    hasMeta: false,\n    defaults: {}\n  },\n  sum: {\n    label: \"Sum\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    supportsInlineScript: true,\n    supportsMissing: true,\n    isPipelineAgg: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    hasMeta: false,\n    defaults: {}\n  },\n  max: {\n    label: \"Max\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    supportsInlineScript: true,\n    supportsMissing: true,\n    isPipelineAgg: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    hasMeta: false,\n    defaults: {}\n  },\n  min: {\n    label: \"Min\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    supportsInlineScript: true,\n    supportsMissing: true,\n    isPipelineAgg: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    hasMeta: false,\n    defaults: {}\n  },\n  extended_stats: {\n    label: \"Extended Stats\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    supportsMissing: true,\n    supportsInlineScript: true,\n    isPipelineAgg: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    hasMeta: true,\n    defaults: {\n      meta: {\n        std_deviation_bounds_lower: true,\n        std_deviation_bounds_upper: true\n      }\n    }\n  },\n  percentiles: {\n    label: \"Percentiles\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    supportsMissing: true,\n    supportsInlineScript: true,\n    isPipelineAgg: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    hasMeta: false,\n    defaults: {\n      settings: {\n        percents: [\"25\", \"50\", \"75\", \"95\", \"99\"]\n      }\n    }\n  },\n  cardinality: {\n    label: \"Unique Count\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    supportsMissing: true,\n    isPipelineAgg: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {}\n  },\n  moving_avg: {\n    // deprecated in 6.4.0, removed in 8.0.0,\n    // recommended replacement is moving_fn\n    label: \"Moving Average\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    isPipelineAgg: true,\n    versionRange: \"<8.0.0\",\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {\n      settings: {\n        model: \"simple\",\n        window: \"5\"\n      }\n    }\n  },\n  moving_fn: {\n    // TODO: Check this\n    label: \"Moving Function\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    isPipelineAgg: true,\n    supportsMultipleBucketPaths: false,\n    supportsInlineScript: false,\n    supportsMissing: false,\n    hasMeta: false,\n    hasSettings: true,\n    defaults: {}\n  },\n  derivative: {\n    label: \"Derivative\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    isPipelineAgg: true,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {}\n  },\n  serial_diff: {\n    label: \"Serial Difference\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    isPipelineAgg: true,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {\n      settings: {\n        lag: \"1\"\n      }\n    }\n  },\n  cumulative_sum: {\n    label: \"Cumulative Sum\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    isPipelineAgg: true,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {}\n  },\n  bucket_script: {\n    label: \"Bucket Script\",\n    impliedQueryType: \"metrics\",\n    requiresField: false,\n    isPipelineAgg: true,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: true,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {\n      pipelineVariables: [(0,_SettingsEditor_BucketScriptSettingsEditor_utils__WEBPACK_IMPORTED_MODULE_0__.defaultPipelineVariable)((0,_SettingsEditor_BucketScriptSettingsEditor_utils__WEBPACK_IMPORTED_MODULE_0__.generatePipelineVariableName)([]))]\n    }\n  },\n  raw_document: {\n    label: \"Raw Document (deprecated)\",\n    requiresField: false,\n    impliedQueryType: \"raw_document\",\n    isPipelineAgg: false,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {\n      settings: {\n        size: \"500\"\n      }\n    }\n  },\n  raw_data: {\n    label: \"Raw Data\",\n    requiresField: false,\n    impliedQueryType: \"raw_data\",\n    isPipelineAgg: false,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {\n      settings: {\n        size: \"500\"\n      }\n    }\n  },\n  logs: {\n    label: \"Logs\",\n    requiresField: false,\n    isPipelineAgg: false,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    impliedQueryType: \"logs\",\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {\n      settings: {\n        limit: \"500\"\n      }\n    }\n  },\n  top_metrics: {\n    label: \"Top Metrics\",\n    impliedQueryType: \"metrics\",\n    requiresField: false,\n    isPipelineAgg: false,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: false,\n    hasMeta: false,\n    defaults: {\n      settings: {\n        order: \"desc\"\n      }\n    }\n  },\n  rate: {\n    label: \"Rate\",\n    impliedQueryType: \"metrics\",\n    requiresField: true,\n    isPipelineAgg: false,\n    supportsMissing: false,\n    supportsMultipleBucketPaths: false,\n    hasSettings: true,\n    supportsInlineScript: true,\n    hasMeta: false,\n    defaults: {}\n  }\n};\nconst pipelineOptions = {\n  moving_avg: [\n    { label: \"window\", default: 5 },\n    { label: \"model\", default: \"simple\" },\n    { label: \"predict\" },\n    { label: \"minimize\", default: false }\n  ],\n  moving_fn: [{ label: \"window\", default: 5 }, { label: \"script\" }],\n  derivative: [{ label: \"unit\" }],\n  serial_diff: [{ label: \"lag\" }],\n  cumulative_sum: [{ label: \"format\" }],\n  bucket_script: []\n};\nconst getChildren = (metric, metrics) => {\n  const children = metrics.filter((m) => {\n    if ((0,_aggregations__WEBPACK_IMPORTED_MODULE_1__.isPipelineAggregationWithMultipleBucketPaths)(m)) {\n      return m.pipelineVariables?.some((pv) => pv.pipelineAgg === metric.id);\n    }\n    return (0,_aggregations__WEBPACK_IMPORTED_MODULE_1__.isMetricAggregationWithField)(m) && metric.id === m.field;\n  });\n  return [...children, ...children.flatMap((child) => getChildren(child, metrics))];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3V0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUtPO0FBQ29GO0FBRXBGLE1BQU0sMEJBQWdEO0FBQUEsRUFDM0QsT0FBTztBQUFBLElBQ0wsT0FBTztBQUFBLElBQ1Asa0JBQWtCO0FBQUEsSUFDbEIsZUFBZTtBQUFBLElBQ2YsZUFBZTtBQUFBLElBQ2YsaUJBQWlCO0FBQUEsSUFDakIsNkJBQTZCO0FBQUEsSUFDN0IsYUFBYTtBQUFBLElBQ2IsU0FBUztBQUFBLElBQ1Qsc0JBQXNCO0FBQUEsSUFDdEIsVUFBVSxDQUFDO0FBQUEsRUFDYjtBQUFBLEVBQ0EsS0FBSztBQUFBLElBQ0gsT0FBTztBQUFBLElBQ1Asa0JBQWtCO0FBQUEsSUFDbEIsZUFBZTtBQUFBLElBQ2Ysc0JBQXNCO0FBQUEsSUFDdEIsaUJBQWlCO0FBQUEsSUFDakIsZUFBZTtBQUFBLElBQ2YsNkJBQTZCO0FBQUEsSUFDN0IsYUFBYTtBQUFBLElBQ2IsU0FBUztBQUFBLElBQ1QsVUFBVSxDQUFDO0FBQUEsRUFDYjtBQUFBLEVBQ0EsS0FBSztBQUFBLElBQ0gsT0FBTztBQUFBLElBQ1Asa0JBQWtCO0FBQUEsSUFDbEIsZUFBZTtBQUFBLElBQ2Ysc0JBQXNCO0FBQUEsSUFDdEIsaUJBQWlCO0FBQUEsSUFDakIsZUFBZTtBQUFBLElBQ2YsNkJBQTZCO0FBQUEsSUFDN0IsYUFBYTtBQUFBLElBQ2IsU0FBUztBQUFBLElBQ1QsVUFBVSxDQUFDO0FBQUEsRUFDYjtBQUFBLEVBQ0EsS0FBSztBQUFBLElBQ0gsT0FBTztBQUFBLElBQ1Asa0JBQWtCO0FBQUEsSUFDbEIsZUFBZTtBQUFBLElBQ2Ysc0JBQXNCO0FBQUEsSUFDdEIsaUJBQWlCO0FBQUEsSUFDakIsZUFBZTtBQUFBLElBQ2YsNkJBQTZCO0FBQUEsSUFDN0IsYUFBYTtB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bkIsRUFBRSxPQUFPLFlBQVksU0FBUyxNQUFNO0FBQUEsRUFDdEM7QUFBQSxFQUNBLFdBQVcsQ0FBQyxFQUFFLE9BQU8sVUFBVSxTQUFTLEVBQUUsR0FBRyxFQUFFLE9BQU8sU0FBUyxDQUFDO0FBQUEsRUFDaEUsWUFBWSxDQUFDLEVBQUUsT0FBTyxPQUFPLENBQUM7QUFBQSxFQUM5QixhQUFhLENBQUMsRUFBRSxPQUFPLE1BQU0sQ0FBQztBQUFBLEVBQzlCLGdCQUFnQixDQUFDLEVBQUUsT0FBTyxTQUFTLENBQUM7QUFBQSxFQUNwQyxlQUFlLENBQUM7QUFDbEI7QUFTTyxNQUFNLGNBQWMsQ0FBQyxRQUEyQixZQUFzRDtBQUMzRyxRQUFNLFdBQVcsUUFBUSxPQUFPLENBQUMsTUFBTTtBQUVyQyxRQUFJLDJGQUE0QyxDQUFDLENBQUMsR0FBRztBQUNuRCxhQUFPLEVBQUUsbUJBQW1CLEtBQUssQ0FBQyxPQUFPLEdBQUcsZ0JBQWdCLE9BQU8sRUFBRTtBQUFBLElBQ3ZFO0FBRUEsV0FBTywyRUFBNEIsQ0FBQyxDQUFDLEtBQUssT0FBTyxPQUFPLEVBQUU7QUFBQSxFQUM1RCxDQUFDO0FBRUQsU0FBTyxDQUFDLEdBQUcsVUFBVSxHQUFHLFNBQVMsUUFBUSxDQUFDLFVBQVUsWUFBWSxPQUFPLE9BQU8sQ0FBQyxDQUFDO0FBQ2xGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IvdXRpbHMudHM/YmJjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNZXRyaWNzQ29uZmlndXJhdGlvbiwgTWV0cmljQWdncmVnYXRpb24sIFBpcGVsaW5lTWV0cmljQWdncmVnYXRpb25UeXBlIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xuXG5pbXBvcnQge1xuICBkZWZhdWx0UGlwZWxpbmVWYXJpYWJsZSxcbiAgZ2VuZXJhdGVQaXBlbGluZVZhcmlhYmxlTmFtZSxcbn0gZnJvbSAnLi9TZXR0aW5nc0VkaXRvci9CdWNrZXRTY3JpcHRTZXR0aW5nc0VkaXRvci91dGlscyc7XG5pbXBvcnQgeyBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aEZpZWxkLCBpc1BpcGVsaW5lQWdncmVnYXRpb25XaXRoTXVsdGlwbGVCdWNrZXRQYXRocyB9IGZyb20gJy4vYWdncmVnYXRpb25zJztcblxuZXhwb3J0IGNvbnN0IG1ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnOiBNZXRyaWNzQ29uZmlndXJhdGlvbiA9IHtcbiAgY291bnQ6IHtcbiAgICBsYWJlbDogJ0NvdW50JyxcbiAgICBpbXBsaWVkUXVlcnlUeXBlOiAnbWV0cmljcycsXG4gICAgcmVxdWlyZXNGaWVsZDogZmFsc2UsXG4gICAgaXNQaXBlbGluZUFnZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNaXNzaW5nOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiBmYWxzZSxcbiAgICBoYXNNZXRhOiBmYWxzZSxcbiAgICBzdXBwb3J0c0lubGluZVNjcmlwdDogZmFsc2UsXG4gICAgZGVmYXVsdHM6IHt9LFxuICB9LFxuICBhdmc6IHtcbiAgICBsYWJlbDogJ0F2ZXJhZ2UnLFxuICAgIGltcGxpZWRRdWVyeVR5cGU6ICdtZXRyaWNzJyxcbiAgICByZXF1aXJlc0ZpZWxkOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiB0cnVlLFxuICAgIHN1cHBvcnRzTWlzc2luZzogdHJ1ZSxcbiAgICBpc1BpcGVsaW5lQWdnOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGRlZmF1bHRzOiB7fSxcbiAgfSxcbiAgc3VtOiB7XG4gICAgbGFiZWw6ICdTdW0nLFxuICAgIGltcGxpZWRRdWVyeVR5cGU6ICdtZXRyaWNzJyxcbiAgICByZXF1aXJlc0ZpZWxkOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiB0cnVlLFxuICAgIHN1cHBvcnRzTWlzc2luZzogdHJ1ZSxcbiAgICBpc1BpcGVsaW5lQWdnOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGRlZmF1bHRzOiB7fSxcbiAgfSxcbiAgbWF4OiB7XG4gICAgbGFiZWw6ICdNYXgnLFxuICAgIGltcGxpZWRRdWVyeVR5cGU6ICdtZXRyaWNzJyxcbiAgICByZXF1aXJlc0ZpZWxkOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiB0cnVlLFxuICAgIHN1cHBvcnRzTWlzc2luZzogdHJ1ZSxcbiAgICBpc1BpcGVsaW5lQWdnOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGRlZmF1bHRzOiB7fSxcbiAgfSxcbiAgbWluOiB7XG4gICAgbGFiZWw6ICdNaW4nLFxuICAgIGltcGxpZWRRdWVyeVR5cGU6ICdtZXRyaWNzJyxcbiAgICByZXF1aXJlc0ZpZWxkOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiB0cnVlLFxuICAgIHN1cHBvcnRzTWlzc2luZzogdHJ1ZSxcbiAgICBpc1BpcGVsaW5lQWdnOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGRlZmF1bHRzOiB7fSxcbiAgfSxcbiAgZXh0ZW5kZWRfc3RhdHM6IHtcbiAgICBsYWJlbDogJ0V4dGVuZGVkIFN0YXRzJyxcbiAgICBpbXBsaWVkUXVlcnlUeXBlOiAnbWV0cmljcycsXG4gICAgcmVxdWlyZXNGaWVsZDogdHJ1ZSxcbiAgICBzdXBwb3J0c01pc3Npbmc6IHRydWUsXG4gICAgc3VwcG9ydHNJbmxpbmVTY3JpcHQ6IHRydWUsXG4gICAgaXNQaXBlbGluZUFnZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNdWx0aXBsZUJ1Y2tldFBhdGhzOiBmYWxzZSxcbiAgICBoYXNTZXR0aW5nczogdHJ1ZSxcbiAgICBoYXNNZXRhOiB0cnVlLFxuICAgIGRlZmF1bHRzOiB7XG4gICAgICBtZXRhOiB7XG4gICAgICAgIHN0ZF9kZXZpYXRpb25fYm91bmRzX2xvd2VyOiB0cnVlLFxuICAgICAgICBzdGRfZGV2aWF0aW9uX2JvdW5kc191cHBlcjogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgcGVyY2VudGlsZXM6IHtcbiAgICBsYWJlbDogJ1BlcmNlbnRpbGVzJyxcbiAgICBpbXBsaWVkUXVlcnlUeXBlOiAnbWV0cmljcycsXG4gICAgcmVxdWlyZXNGaWVsZDogdHJ1ZSxcbiAgICBzdXBwb3J0c01pc3Npbmc6IHRydWUsXG4gICAgc3VwcG9ydHNJbmxpbmVTY3JpcHQ6IHRydWUsXG4gICAgaXNQaXBlbGluZUFnZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNdWx0aXBsZUJ1Y2tldFBhdGhzOiBmYWxzZSxcbiAgICBoYXNTZXR0aW5nczogdHJ1ZSxcbiAgICBoYXNNZXRhOiBmYWxzZSxcbiAgICBkZWZhdWx0czoge1xuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgcGVyY2VudHM6IFsnMjUnLCAnNTAnLCAnNzUnLCAnOTUnLCAnOTknXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgY2FyZGluYWxpdHk6IHtcbiAgICBsYWJlbDogJ1VuaXF1ZSBDb3VudCcsXG4gICAgaW1wbGllZFF1ZXJ5VHlwZTogJ21ldHJpY3MnLFxuICAgIHJlcXVpcmVzRmllbGQ6IHRydWUsXG4gICAgc3VwcG9ydHNNaXNzaW5nOiB0cnVlLFxuICAgIGlzUGlwZWxpbmVBZ2c6IGZhbHNlLFxuICAgIHN1cHBvcnRzTXVsdGlwbGVCdWNrZXRQYXRoczogZmFsc2UsXG4gICAgaGFzU2V0dGluZ3M6IHRydWUsXG4gICAgc3VwcG9ydHNJbmxpbmVTY3JpcHQ6IGZhbHNlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGRlZmF1bHRzOiB7fSxcbiAgfSxcbiAgbW92aW5nX2F2Zzoge1xuICAgIC8vIGRlcHJlY2F0ZWQgaW4gNi40LjAsIHJlbW92ZWQgaW4gOC4wLjAsXG4gICAgLy8gcmVjb21tZW5kZWQgcmVwbGFjZW1lbnQgaXMgbW92aW5nX2ZuXG4gICAgbGFiZWw6ICdNb3ZpbmcgQXZlcmFnZScsXG4gICAgaW1wbGllZFF1ZXJ5VHlwZTogJ21ldHJpY3MnLFxuICAgIHJlcXVpcmVzRmllbGQ6IHRydWUsXG4gICAgaXNQaXBlbGluZUFnZzogdHJ1ZSxcbiAgICB2ZXJzaW9uUmFuZ2U6ICc8OC4wLjAnLFxuICAgIHN1cHBvcnRzTWlzc2luZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNdWx0aXBsZUJ1Y2tldFBhdGhzOiBmYWxzZSxcbiAgICBoYXNTZXR0aW5nczogdHJ1ZSxcbiAgICBzdXBwb3J0c0lubGluZVNjcmlwdDogZmFsc2UsXG4gICAgaGFzTWV0YTogZmFsc2UsXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIG1vZGVsOiAnc2ltcGxlJyxcbiAgICAgICAgd2luZG93OiAnNScsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIG1vdmluZ19mbjoge1xuICAgIC8vIFRPRE86IENoZWNrIHRoaXNcbiAgICBsYWJlbDogJ01vdmluZyBGdW5jdGlvbicsXG4gICAgaW1wbGllZFF1ZXJ5VHlwZTogJ21ldHJpY3MnLFxuICAgIHJlcXVpcmVzRmllbGQ6IHRydWUsXG4gICAgaXNQaXBlbGluZUFnZzogdHJ1ZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiBmYWxzZSxcbiAgICBzdXBwb3J0c01pc3Npbmc6IGZhbHNlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIGRlZmF1bHRzOiB7fSxcbiAgfSxcbiAgZGVyaXZhdGl2ZToge1xuICAgIGxhYmVsOiAnRGVyaXZhdGl2ZScsXG4gICAgaW1wbGllZFF1ZXJ5VHlwZTogJ21ldHJpY3MnLFxuICAgIHJlcXVpcmVzRmllbGQ6IHRydWUsXG4gICAgaXNQaXBlbGluZUFnZzogdHJ1ZSxcbiAgICBzdXBwb3J0c01pc3Npbmc6IGZhbHNlLFxuICAgIHN1cHBvcnRzTXVsdGlwbGVCdWNrZXRQYXRoczogZmFsc2UsXG4gICAgaGFzU2V0dGluZ3M6IHRydWUsXG4gICAgc3VwcG9ydHNJbmxpbmVTY3JpcHQ6IGZhbHNlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGRlZmF1bHRzOiB7fSxcbiAgfSxcbiAgc2VyaWFsX2RpZmY6IHtcbiAgICBsYWJlbDogJ1NlcmlhbCBEaWZmZXJlbmNlJyxcbiAgICBpbXBsaWVkUXVlcnlUeXBlOiAnbWV0cmljcycsXG4gICAgcmVxdWlyZXNGaWVsZDogdHJ1ZSxcbiAgICBpc1BpcGVsaW5lQWdnOiB0cnVlLFxuICAgIHN1cHBvcnRzTWlzc2luZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNdWx0aXBsZUJ1Y2tldFBhdGhzOiBmYWxzZSxcbiAgICBoYXNTZXR0aW5nczogdHJ1ZSxcbiAgICBzdXBwb3J0c0lubGluZVNjcmlwdDogZmFsc2UsXG4gICAgaGFzTWV0YTogZmFsc2UsXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIGxhZzogJzEnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBjdW11bGF0aXZlX3N1bToge1xuICAgIGxhYmVsOiAnQ3VtdWxhdGl2ZSBTdW0nLFxuICAgIGltcGxpZWRRdWVyeVR5cGU6ICdtZXRyaWNzJyxcbiAgICByZXF1aXJlc0ZpZWxkOiB0cnVlLFxuICAgIGlzUGlwZWxpbmVBZ2c6IHRydWUsXG4gICAgc3VwcG9ydHNNaXNzaW5nOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiBmYWxzZSxcbiAgICBoYXNNZXRhOiBmYWxzZSxcbiAgICBkZWZhdWx0czoge30sXG4gIH0sXG4gIGJ1Y2tldF9zY3JpcHQ6IHtcbiAgICBsYWJlbDogJ0J1Y2tldCBTY3JpcHQnLFxuICAgIGltcGxpZWRRdWVyeVR5cGU6ICdtZXRyaWNzJyxcbiAgICByZXF1aXJlc0ZpZWxkOiBmYWxzZSxcbiAgICBpc1BpcGVsaW5lQWdnOiB0cnVlLFxuICAgIHN1cHBvcnRzTWlzc2luZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNdWx0aXBsZUJ1Y2tldFBhdGhzOiB0cnVlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiBmYWxzZSxcbiAgICBoYXNNZXRhOiBmYWxzZSxcbiAgICBkZWZhdWx0czoge1xuICAgICAgcGlwZWxpbmVWYXJpYWJsZXM6IFtkZWZhdWx0UGlwZWxpbmVWYXJpYWJsZShnZW5lcmF0ZVBpcGVsaW5lVmFyaWFibGVOYW1lKFtdKSldLFxuICAgIH0sXG4gIH0sXG4gIHJhd19kb2N1bWVudDoge1xuICAgIGxhYmVsOiAnUmF3IERvY3VtZW50IChkZXByZWNhdGVkKScsXG4gICAgcmVxdWlyZXNGaWVsZDogZmFsc2UsXG4gICAgaW1wbGllZFF1ZXJ5VHlwZTogJ3Jhd19kb2N1bWVudCcsXG4gICAgaXNQaXBlbGluZUFnZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNaXNzaW5nOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiBmYWxzZSxcbiAgICBoYXNNZXRhOiBmYWxzZSxcbiAgICBkZWZhdWx0czoge1xuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgc2l6ZTogJzUwMCcsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHJhd19kYXRhOiB7XG4gICAgbGFiZWw6ICdSYXcgRGF0YScsXG4gICAgcmVxdWlyZXNGaWVsZDogZmFsc2UsXG4gICAgaW1wbGllZFF1ZXJ5VHlwZTogJ3Jhd19kYXRhJyxcbiAgICBpc1BpcGVsaW5lQWdnOiBmYWxzZSxcbiAgICBzdXBwb3J0c01pc3Npbmc6IGZhbHNlLFxuICAgIHN1cHBvcnRzTXVsdGlwbGVCdWNrZXRQYXRoczogZmFsc2UsXG4gICAgaGFzU2V0dGluZ3M6IHRydWUsXG4gICAgc3VwcG9ydHNJbmxpbmVTY3JpcHQ6IGZhbHNlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGRlZmF1bHRzOiB7XG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICBzaXplOiAnNTAwJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgbG9nczoge1xuICAgIGxhYmVsOiAnTG9ncycsXG4gICAgcmVxdWlyZXNGaWVsZDogZmFsc2UsXG4gICAgaXNQaXBlbGluZUFnZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNaXNzaW5nOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIGltcGxpZWRRdWVyeVR5cGU6ICdsb2dzJyxcbiAgICBzdXBwb3J0c0lubGluZVNjcmlwdDogZmFsc2UsXG4gICAgaGFzTWV0YTogZmFsc2UsXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIGxpbWl0OiAnNTAwJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgdG9wX21ldHJpY3M6IHtcbiAgICBsYWJlbDogJ1RvcCBNZXRyaWNzJyxcbiAgICBpbXBsaWVkUXVlcnlUeXBlOiAnbWV0cmljcycsXG4gICAgcmVxdWlyZXNGaWVsZDogZmFsc2UsXG4gICAgaXNQaXBlbGluZUFnZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNaXNzaW5nOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiBmYWxzZSxcbiAgICBoYXNNZXRhOiBmYWxzZSxcbiAgICBkZWZhdWx0czoge1xuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgb3JkZXI6ICdkZXNjJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgcmF0ZToge1xuICAgIGxhYmVsOiAnUmF0ZScsXG4gICAgaW1wbGllZFF1ZXJ5VHlwZTogJ21ldHJpY3MnLFxuICAgIHJlcXVpcmVzRmllbGQ6IHRydWUsXG4gICAgaXNQaXBlbGluZUFnZzogZmFsc2UsXG4gICAgc3VwcG9ydHNNaXNzaW5nOiBmYWxzZSxcbiAgICBzdXBwb3J0c011bHRpcGxlQnVja2V0UGF0aHM6IGZhbHNlLFxuICAgIGhhc1NldHRpbmdzOiB0cnVlLFxuICAgIHN1cHBvcnRzSW5saW5lU2NyaXB0OiB0cnVlLFxuICAgIGhhc01ldGE6IGZhbHNlLFxuICAgIGRlZmF1bHRzOiB7fSxcbiAgfSxcbn07XG5cbmludGVyZmFjZSBQaXBlbGluZU9wdGlvbiB7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGRlZmF1bHQ/OiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuO1xufVxuXG50eXBlIFBpcGVsaW5lT3B0aW9ucyA9IHtcbiAgW0sgaW4gUGlwZWxpbmVNZXRyaWNBZ2dyZWdhdGlvblR5cGVdOiBQaXBlbGluZU9wdGlvbltdO1xufTtcblxuZXhwb3J0IGNvbnN0IHBpcGVsaW5lT3B0aW9uczogUGlwZWxpbmVPcHRpb25zID0ge1xuICBtb3ZpbmdfYXZnOiBbXG4gICAgeyBsYWJlbDogJ3dpbmRvdycsIGRlZmF1bHQ6IDUgfSxcbiAgICB7IGxhYmVsOiAnbW9kZWwnLCBkZWZhdWx0OiAnc2ltcGxlJyB9LFxuICAgIHsgbGFiZWw6ICdwcmVkaWN0JyB9LFxuICAgIHsgbGFiZWw6ICdtaW5pbWl6ZScsIGRlZmF1bHQ6IGZhbHNlIH0sXG4gIF0sXG4gIG1vdmluZ19mbjogW3sgbGFiZWw6ICd3aW5kb3cnLCBkZWZhdWx0OiA1IH0sIHsgbGFiZWw6ICdzY3JpcHQnIH1dLFxuICBkZXJpdmF0aXZlOiBbeyBsYWJlbDogJ3VuaXQnIH1dLFxuICBzZXJpYWxfZGlmZjogW3sgbGFiZWw6ICdsYWcnIH1dLFxuICBjdW11bGF0aXZlX3N1bTogW3sgbGFiZWw6ICdmb3JtYXQnIH1dLFxuICBidWNrZXRfc2NyaXB0OiBbXSxcbn07XG5cbi8qKlxuICogR2l2ZW4gYSBtZXRyaWMgYE1ldHJpY0FgIGFuZCBhbiBhcnJheSBvZiBtZXRyaWNzLCByZXR1cm5zIGFsbCBjaGlsZHJlbiBvZiBgTWV0cmljQWAuXG4gKiBgTWV0cmljQmAgaXMgY29uc2lkZXJlZCBhIGNoaWxkIG9mIGBNZXRyaWNBYCBpZiBgTWV0cmljQWAgaXMgcmVmZXJlbmNlZCBieSBgTWV0cmljQmAgaW4gaXRzIGBmaWVsZGAgYXR0cmlidXRlXG4gKiAoYE1ldHJpY0EuaWQgPT09IE1ldHJpY0IuZmllbGRgKSBvciBpbiBpdHMgcGlwZWxpbmUgYWdncmVnYXRpb24gdmFyaWFibGVzIChmb3IgYnVja2V0X3NjcmlwdHMpLlxuICogQHBhcmFtIG1ldHJpY1xuICogQHBhcmFtIG1ldHJpY3NcbiAqL1xuZXhwb3J0IGNvbnN0IGdldENoaWxkcmVuID0gKG1ldHJpYzogTWV0cmljQWdncmVnYXRpb24sIG1ldHJpY3M6IE1ldHJpY0FnZ3JlZ2F0aW9uW10pOiBNZXRyaWNBZ2dyZWdhdGlvbltdID0+IHtcbiAgY29uc3QgY2hpbGRyZW4gPSBtZXRyaWNzLmZpbHRlcigobSkgPT4ge1xuICAgIC8vIFRPRE86IENoZWNrIHRoaXMuXG4gICAgaWYgKGlzUGlwZWxpbmVBZ2dyZWdhdGlvbldpdGhNdWx0aXBsZUJ1Y2tldFBhdGhzKG0pKSB7XG4gICAgICByZXR1cm4gbS5waXBlbGluZVZhcmlhYmxlcz8uc29tZSgocHYpID0+IHB2LnBpcGVsaW5lQWdnID09PSBtZXRyaWMuaWQpO1xuICAgIH1cblxuICAgIHJldHVybiBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aEZpZWxkKG0pICYmIG1ldHJpYy5pZCA9PT0gbS5maWVsZDtcbiAgfSk7XG5cbiAgcmV0dXJuIFsuLi5jaGlsZHJlbiwgLi4uY2hpbGRyZW4uZmxhdE1hcCgoY2hpbGQpID0+IGdldENoaWxkcmVuKGNoaWxkLCBtZXRyaWNzKSldO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryEditorRow.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryEditorRow: () => (/* binding */ QueryEditorRow)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineFieldRow.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineSegmentGroup.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineLabel.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/IconButton/IconButton.tsx\");\n\n\n\n\n\nconst QueryEditorRow = ({\n  children,\n  label,\n  onRemoveClick,\n  onHideClick,\n  hidden = false\n}) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useStyles2)(getStyles);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.InlineFieldRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.InlineSegmentGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.InlineLabel, { width: 17, as: \"div\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, label), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: styles.iconWrapper }, onHideClick && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.IconButton,\n    {\n      name: hidden ? \"eye-slash\" : \"eye\",\n      onClick: onHideClick,\n      size: \"sm\",\n      \"aria-pressed\": hidden,\n      className: styles.icon,\n      tooltip: \"Hide row\"\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.IconButton,\n    {\n      name: \"trash-alt\",\n      size: \"sm\",\n      className: styles.icon,\n      onClick: onRemoveClick || lodash__WEBPACK_IMPORTED_MODULE_1__.noop,\n      disabled: !onRemoveClick,\n      tooltip: \"Remove row\"\n    }\n  )))), children);\n};\nconst getStyles = (theme) => {\n  return {\n    iconWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n    `,\n    icon: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      color: ${theme.colors.text.secondary};\n      margin-left: ${theme.spacing(0.25)};\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvUXVlcnlFZGl0b3JSb3cudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNDO0FBQ29CO0FBRytDO0FBU2pGLE1BQU0saUJBQWlCLENBQUM7QUFBQSxFQUM3QjtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0EsU0FBUztBQUNYLE1BQWdDO0FBQzlCLFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFFbkMsU0FDRSwyRUFBQyx1REFBYyxRQUNiLDJFQUFDLDJEQUFrQixRQUNqQiwyRUFBQyxvREFBVyxJQUFDLE9BQU8sSUFBSSxJQUFHLFNBQ3pCLDJFQUFDLGNBQU0sS0FBTSxHQUNiLDJFQUFDLFVBQUssV0FBVyxPQUFPLGVBQ3JCLGVBQ0M7QUFBQSxJQUFDLG1EQUFVO0FBQVY7QUFBQSxNQUNDLE1BQU0sU0FBUyxjQUFjO0FBQUEsTUFDN0IsU0FBUztBQUFBLE1BQ1QsTUFBSztBQUFBLE1BQ0wsZ0JBQWM7QUFBQSxNQUNkLFdBQVcsT0FBTztBQUFBLE1BQ2xCLFNBQVE7QUFBQTtBQUFBLEVBQ1YsR0FFRjtBQUFBLElBQUMsbURBQVU7QUFBVjtBQUFBLE1BQ0MsTUFBSztBQUFBLE1BQ0wsTUFBSztBQUFBLE1BQ0wsV0FBVyxPQUFPO0FBQUEsTUFDbEIsU0FBUyxpQkFBaUIsd0NBQUk7QUFBSixNQUMxQixVQUFVLENBQUM7QUFBQSxNQUNYLFNBQVE7QUFBQTtBQUFBLEVBQ1YsQ0FDRixDQUNGLENBQ0YsR0FDQyxRQUNIO0FBRUo7QUFFQSxNQUFNLFlBQVksQ0FBQyxVQUF5QjtBQUMxQyxTQUFPO0FBQUEsSUFDTCxhQUFhLGlEQUFHO0FBQUg7QUFBQTtBQUFBLElBR2IsTUFBTSxpREFBRztBQUFILGVBQ0ssTUFBTSxPQUFPLEtBQUs7QUFBQSxxQkFDWixNQUFNLFFBQVEsSUFBSTtBQUFBO0FBQUEsRUFFckM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvUXVlcnlFZGl0b3JSb3cudHN4PzNlMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFJlYWN0LCB7IFByb3BzV2l0aENoaWxkcmVuIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBHcmFmYW5hVGhlbWUyIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBJY29uQnV0dG9uLCBJbmxpbmVGaWVsZFJvdywgSW5saW5lTGFiZWwsIElubGluZVNlZ21lbnRHcm91cCwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgbGFiZWw6IHN0cmluZztcbiAgb25SZW1vdmVDbGljaz86IGZhbHNlIHwgKCgpID0+IHZvaWQpO1xuICBvbkhpZGVDbGljaz86IGZhbHNlIHwgKCgpID0+IHZvaWQpO1xuICBoaWRkZW4/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgUXVlcnlFZGl0b3JSb3cgPSAoe1xuICBjaGlsZHJlbixcbiAgbGFiZWwsXG4gIG9uUmVtb3ZlQ2xpY2ssXG4gIG9uSGlkZUNsaWNrLFxuICBoaWRkZW4gPSBmYWxzZSxcbn06IFByb3BzV2l0aENoaWxkcmVuPFByb3BzPikgPT4ge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG5cbiAgcmV0dXJuIChcbiAgICA8SW5saW5lRmllbGRSb3c+XG4gICAgICA8SW5saW5lU2VnbWVudEdyb3VwPlxuICAgICAgICA8SW5saW5lTGFiZWwgd2lkdGg9ezE3fSBhcz1cImRpdlwiPlxuICAgICAgICAgIDxzcGFuPntsYWJlbH08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMuaWNvbldyYXBwZXJ9PlxuICAgICAgICAgICAge29uSGlkZUNsaWNrICYmIChcbiAgICAgICAgICAgICAgPEljb25CdXR0b25cbiAgICAgICAgICAgICAgICBuYW1lPXtoaWRkZW4gPyAnZXllLXNsYXNoJyA6ICdleWUnfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uSGlkZUNsaWNrfVxuICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtoaWRkZW59XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuaWNvbn1cbiAgICAgICAgICAgICAgICB0b29sdGlwPVwiSGlkZSByb3dcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgICAgIG5hbWU9XCJ0cmFzaC1hbHRcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5pY29ufVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvblJlbW92ZUNsaWNrIHx8IG5vb3B9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXshb25SZW1vdmVDbGlja31cbiAgICAgICAgICAgICAgdG9vbHRpcD1cIlJlbW92ZSByb3dcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvSW5saW5lTGFiZWw+XG4gICAgICA8L0lubGluZVNlZ21lbnRHcm91cD5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0lubGluZUZpZWxkUm93PlxuICApO1xufTtcblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWNvbldyYXBwZXI6IGNzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYCxcbiAgICBpY29uOiBjc3NgXG4gICAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMudGV4dC5zZWNvbmRhcnl9O1xuICAgICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuc3BhY2luZygwLjI1KX07XG4gICAgYCxcbiAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryEditorRow.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryEditorSpecialMetricRow.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryEditorSpecialMetricRow: () => (/* binding */ QueryEditorSpecialMetricRow)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineFieldRow.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineSegmentGroup.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineLabel.tsx\");\n/* harmony import */ var _MetricAggregationsEditor_SettingsEditor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/SettingsEditor/index.tsx\");\n\n\n\n\nconst QueryEditorSpecialMetricRow = ({ name, metric }) => {\n  const previousMetrics = [];\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.InlineFieldRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineSegmentGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.InlineLabel, { width: 17, as: \"div\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, name))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_MetricAggregationsEditor_SettingsEditor__WEBPACK_IMPORTED_MODULE_1__.SettingsEditor, { metric, previousMetrics }));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvUXVlcnlFZGl0b3JTcGVjaWFsTWV0cmljUm93LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFrQjtBQUU4QztBQUlqQztBQU94QixNQUFNLDhCQUE4QixDQUFDLEVBQUUsTUFBTSxPQUFPLE1BQWE7QUFJdEUsUUFBTSxrQkFBdUMsQ0FBQztBQUU5QyxTQUNFLDJFQUFDLHVEQUFjLFFBQ2IsMkVBQUMsMkRBQWtCLFFBQ2pCLDJFQUFDLG9EQUFXLElBQUMsT0FBTyxJQUFJLElBQUcsU0FDekIsMkVBQUMsY0FBTSxJQUFLLENBQ2QsQ0FDRixHQUNBLDJFQUFDLG9GQUFjLElBQUMsUUFBZ0IsaUJBQWtDLENBQ3BFO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL1F1ZXJ5RWRpdG9yU3BlY2lhbE1ldHJpY1Jvdy50c3g/OTI3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBJbmxpbmVGaWVsZFJvdywgSW5saW5lTGFiZWwsIElubGluZVNlZ21lbnRHcm91cCB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgTWV0cmljQWdncmVnYXRpb24gfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmltcG9ydCB7IFNldHRpbmdzRWRpdG9yIH0gZnJvbSAnLi9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IvU2V0dGluZ3NFZGl0b3InO1xuXG50eXBlIFByb3BzID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIG1ldHJpYzogTWV0cmljQWdncmVnYXRpb247XG59O1xuXG5leHBvcnQgY29uc3QgUXVlcnlFZGl0b3JTcGVjaWFsTWV0cmljUm93ID0gKHsgbmFtZSwgbWV0cmljIH06IFByb3BzKSA9PiB7XG4gIC8vIHRoaXMgd2lkZ2V0IGlzIG9ubHkgdXNlZCBpbiBzY2VuYXJpb3Mgd2hlbiB0aGVyZSBpcyBvbmx5IGEgc2luZ2xlXG4gIC8vIG1ldHJpYywgc28gdGhlIGFycmF5IG9mIFwicHJldmlvdXNNZXRyaWNzXCIgKG1lYW5pbmcgYWxsIHRoZSBtZXRyaWNzXG4gIC8vIGJlZm9yZSB0aGUgY3VycmVudCBtZXRyaWMpLCBpcyBhbiBhbXB0eS1hcnJheVxuICBjb25zdCBwcmV2aW91c01ldHJpY3M6IE1ldHJpY0FnZ3JlZ2F0aW9uW10gPSBbXTtcblxuICByZXR1cm4gKFxuICAgIDxJbmxpbmVGaWVsZFJvdz5cbiAgICAgIDxJbmxpbmVTZWdtZW50R3JvdXA+XG4gICAgICAgIDxJbmxpbmVMYWJlbCB3aWR0aD17MTd9IGFzPVwiZGl2XCI+XG4gICAgICAgICAgPHNwYW4+e25hbWV9PC9zcGFuPlxuICAgICAgICA8L0lubGluZUxhYmVsPlxuICAgICAgPC9JbmxpbmVTZWdtZW50R3JvdXA+XG4gICAgICA8U2V0dGluZ3NFZGl0b3IgbWV0cmljPXttZXRyaWN9IHByZXZpb3VzTWV0cmljcz17cHJldmlvdXNNZXRyaWNzfSAvPlxuICAgIDwvSW5saW5lRmllbGRSb3c+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryEditorSpecialMetricRow.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryTypeSelector.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryTypeSelector: () => (/* binding */ QueryTypeSelector)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _MetricAggregationsEditor_state_actions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/state/actions.ts\");\n/* harmony import */ var _MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n\n\n\n\n\n\n\nconst OPTIONS = [\n  { value: \"metrics\", label: \"Metrics\" },\n  { value: \"logs\", label: \"Logs\" },\n  { value: \"raw_data\", label: \"Raw Data\" },\n  { value: \"raw_document\", label: \"Raw Document\" }\n];\nfunction queryTypeToMetricType(type) {\n  switch (type) {\n    case \"logs\":\n    case \"raw_data\":\n    case \"raw_document\":\n      return type;\n    case \"metrics\":\n      return \"count\";\n    default:\n      throw new Error(`invalid query type: ${type}`);\n  }\n}\nconst QueryTypeSelector = () => {\n  const query = (0,_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_2__.useQuery)();\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_1__.useDispatch)();\n  const firstMetric = query.metrics?.[0];\n  if (firstMetric == null) {\n    return null;\n  }\n  const queryType = _MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_4__.metricAggregationConfig[firstMetric.type].impliedQueryType;\n  const onChange = (newQueryType) => {\n    dispatch((0,_MetricAggregationsEditor_state_actions__WEBPACK_IMPORTED_MODULE_3__.changeMetricType)({ id: firstMetric.id, type: queryTypeToMetricType(newQueryType) }));\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.RadioButtonGroup, { fullWidth: false, options: OPTIONS, value: queryType, onChange });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvUXVlcnlUeXBlU2VsZWN0b3IudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFrQjtBQUdlO0FBRUw7QUFHSDtBQUNRO0FBQ087QUFFeEMsTUFBTSxVQUE2QztBQUFBLEVBQ2pELEVBQUUsT0FBTyxXQUFXLE9BQU8sVUFBVTtBQUFBLEVBQ3JDLEVBQUUsT0FBTyxRQUFRLE9BQU8sT0FBTztBQUFBLEVBQy9CLEVBQUUsT0FBTyxZQUFZLE9BQU8sV0FBVztBQUFBLEVBQ3ZDLEVBQUUsT0FBTyxnQkFBZ0IsT0FBTyxlQUFlO0FBQ2pEO0FBRUEsU0FBUyxzQkFBc0IsTUFBNEM7QUFDekUsVUFBUSxNQUFNO0FBQUEsSUFDWixLQUFLO0FBQUEsSUFDTCxLQUFLO0FBQUEsSUFDTCxLQUFLO0FBQ0gsYUFBTztBQUFBLElBQ1QsS0FBSztBQUNILGFBQU87QUFBQSxJQUNUO0FBRUUsWUFBTSxJQUFJLE1BQU0sdUJBQXVCLE1BQU07QUFBQSxFQUNqRDtBQUNGO0FBRU8sTUFBTSxvQkFBb0IsTUFBTTtBQUNyQyxRQUFNLFFBQVEsb0VBQVEsQ0FBQztBQUN2QixRQUFNLFdBQVcsdUVBQVcsQ0FBQztBQUU3QixRQUFNLGNBQWMsTUFBTSxVQUFVLENBQUM7QUFFckMsTUFBSSxlQUFlLE1BQU07QUFFdkIsV0FBTztBQUFBLEVBQ1Q7QUFFQSxRQUFNLFlBQVksb0ZBQXVCLENBQUMsWUFBWSxJQUFJLEVBQUU7QUFFNUQsUUFBTSxXQUFXLENBQUMsaUJBQTRCO0FBQzVDLGFBQVMseUZBQWdCLENBQUMsRUFBRSxJQUFJLFlBQVksSUFBSSxNQUFNLHNCQUFzQixZQUFZLEVBQUUsQ0FBQyxDQUFDO0FBQUEsRUFDOUY7QUFFQSxTQUFPLDJFQUFDLHlEQUFnQixJQUFZLFdBQVcsT0FBTyxTQUFTLFNBQVMsT0FBTyxXQUFXLFVBQW9CO0FBQ2hIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9RdWVyeVR5cGVTZWxlY3Rvci50c3g/YTczMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBTZWxlY3RhYmxlVmFsdWUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IFJhZGlvQnV0dG9uR3JvdXAgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi4vLi4vaG9va3MvdXNlU3RhdGVsZXNzUmVkdWNlcic7XG5pbXBvcnQgeyBNZXRyaWNBZ2dyZWdhdGlvbiwgUXVlcnlUeXBlIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJy4vRWxhc3RpY3NlYXJjaFF1ZXJ5Q29udGV4dCc7XG5pbXBvcnQgeyBjaGFuZ2VNZXRyaWNUeXBlIH0gZnJvbSAnLi9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3Ivc3RhdGUvYWN0aW9ucyc7XG5pbXBvcnQgeyBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZyB9IGZyb20gJy4vTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3V0aWxzJztcblxuY29uc3QgT1BUSU9OUzogQXJyYXk8U2VsZWN0YWJsZVZhbHVlPFF1ZXJ5VHlwZT4+ID0gW1xuICB7IHZhbHVlOiAnbWV0cmljcycsIGxhYmVsOiAnTWV0cmljcycgfSxcbiAgeyB2YWx1ZTogJ2xvZ3MnLCBsYWJlbDogJ0xvZ3MnIH0sXG4gIHsgdmFsdWU6ICdyYXdfZGF0YScsIGxhYmVsOiAnUmF3IERhdGEnIH0sXG4gIHsgdmFsdWU6ICdyYXdfZG9jdW1lbnQnLCBsYWJlbDogJ1JhdyBEb2N1bWVudCcgfSxcbl07XG5cbmZ1bmN0aW9uIHF1ZXJ5VHlwZVRvTWV0cmljVHlwZSh0eXBlOiBRdWVyeVR5cGUpOiBNZXRyaWNBZ2dyZWdhdGlvblsndHlwZSddIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnbG9ncyc6XG4gICAgY2FzZSAncmF3X2RhdGEnOlxuICAgIGNhc2UgJ3Jhd19kb2N1bWVudCc6XG4gICAgICByZXR1cm4gdHlwZTtcbiAgICBjYXNlICdtZXRyaWNzJzpcbiAgICAgIHJldHVybiAnY291bnQnO1xuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBzaG91bGQgbmV2ZXIgaGFwcGVuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgcXVlcnkgdHlwZTogJHt0eXBlfWApO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBRdWVyeVR5cGVTZWxlY3RvciA9ICgpID0+IHtcbiAgY29uc3QgcXVlcnkgPSB1c2VRdWVyeSgpO1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG5cbiAgY29uc3QgZmlyc3RNZXRyaWMgPSBxdWVyeS5tZXRyaWNzPy5bMF07XG5cbiAgaWYgKGZpcnN0TWV0cmljID09IG51bGwpIHtcbiAgICAvLyBub3Qgc3VyZSBpZiB0aGlzIGNhbiByZWFsbHkgaGFwcGVuLCBidXQgd2Ugc2hvdWxkIGhhbmRsZSBpdCBhbnl3YXlcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHF1ZXJ5VHlwZSA9IG1ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnW2ZpcnN0TWV0cmljLnR5cGVdLmltcGxpZWRRdWVyeVR5cGU7XG5cbiAgY29uc3Qgb25DaGFuZ2UgPSAobmV3UXVlcnlUeXBlOiBRdWVyeVR5cGUpID0+IHtcbiAgICBkaXNwYXRjaChjaGFuZ2VNZXRyaWNUeXBlKHsgaWQ6IGZpcnN0TWV0cmljLmlkLCB0eXBlOiBxdWVyeVR5cGVUb01ldHJpY1R5cGUobmV3UXVlcnlUeXBlKSB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIDxSYWRpb0J1dHRvbkdyb3VwPFF1ZXJ5VHlwZT4gZnVsbFdpZHRoPXtmYWxzZX0gb3B0aW9ucz17T1BUSU9OU30gdmFsdWU9e3F1ZXJ5VHlwZX0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPjtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryTypeSelector.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/SettingsEditorContainer.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingsEditorContainer: () => (/* binding */ SettingsEditorContainer)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineSegmentGroup.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/styles.ts\");\n\n\n\n\n\nconst getStyles = (theme, hidden) => {\n  return {\n    wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      max-width: 500px;\n      display: flex;\n      flex-direction: column;\n    `,\n    settingsWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      padding-top: ${theme.spacing(0.5)};\n    `,\n    icon: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-right: ${theme.spacing(0.5)};\n    `,\n    button: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      justify-content: start;\n      ${hidden && (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n        color: ${theme.colors.text.disabled};\n      `}\n    `\n  };\n};\nconst SettingsEditorContainer = ({ label, children, hidden = false }) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const theme = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useTheme2)();\n  const styles = getStyles(theme, hidden);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.InlineSegmentGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.wrapper) }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    \"button\",\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(\"gf-form-label query-part\", styles.button, _styles__WEBPACK_IMPORTED_MODULE_2__.segmentStyles),\n      onClick: () => setOpen(!open),\n      \"aria-expanded\": open,\n      type: \"button\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Icon, { name: open ? \"angle-down\" : \"angle-right\", \"aria-hidden\": \"true\", className: styles.icon }),\n    label\n  ), open && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.settingsWrapper }, children)));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvU2V0dGluZ3NFZGl0b3JDb250YWluZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF3QjtBQUMyQjtBQUdDO0FBRXRCO0FBRTlCLE1BQU0sWUFBWSxDQUFDLE9BQXNCLFdBQW9CO0FBQzNELFNBQU87QUFBQSxJQUNMLFNBQVMsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQTtBQUFBLElBS1QsaUJBQWlCLGlEQUFHO0FBQUgscUJBQ0EsTUFBTSxRQUFRLEdBQUc7QUFBQTtBQUFBLElBRWxDLE1BQU0saURBQUc7QUFBSCxzQkFDWSxNQUFNLFFBQVEsR0FBRztBQUFBO0FBQUEsSUFFbkMsUUFBUSxpREFBRztBQUFIO0FBQUEsUUFFSixVQUNGLGlEQUFHO0FBQUgsaUJBQ1csTUFBTSxPQUFPLEtBQUs7QUFBQTtBQUFBO0FBQUEsRUFHakM7QUFDRjtBQU9PLE1BQU0sMEJBQTBCLENBQUMsRUFBRSxPQUFPLFVBQVUsU0FBUyxNQUFNLE1BQWdDO0FBQ3hHLFFBQU0sQ0FBQyxNQUFNLE9BQU8sSUFBSSwrQ0FBUSxDQUFDLEtBQUs7QUFFdEMsUUFBTSxRQUFRLHNEQUFTLENBQUM7QUFDeEIsUUFBTSxTQUFTLFVBQVUsT0FBTyxNQUFNO0FBRXRDLFNBQ0UsMkVBQUMsMkRBQWtCLFFBQ2pCLDJFQUFDLFNBQUksV0FBVyxnREFBRSxDQUFDLE9BQU8sT0FBTyxLQUMvQjtBQUFBLElBQUM7QUFBQTtBQUFBLE1BQ0MsV0FBVyxnREFBRSxDQUFDLDRCQUE0QixPQUFPLFFBQVEsa0RBQWE7QUFBQSxNQUN0RSxTQUFTLE1BQU0sUUFBUSxDQUFDLElBQUk7QUFBQSxNQUM1QixpQkFBZTtBQUFBLE1BQ2YsTUFBSztBQUFBO0FBQUEsSUFFTCwyRUFBQyw2Q0FBSSxJQUFDLE1BQU0sT0FBTyxlQUFlLGVBQWUsZUFBWSxRQUFPLFdBQVcsT0FBTyxNQUFNO0FBQUEsSUFDM0Y7QUFBQSxFQUNILEdBRUMsUUFBUSwyRUFBQyxTQUFJLFdBQVcsT0FBTyxtQkFBa0IsUUFBUyxDQUM3RCxDQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL1NldHRpbmdzRWRpdG9yQ29udGFpbmVyLnRzeD81YmVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcywgY3ggfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0LCB7IFByb3BzV2l0aENoaWxkcmVuLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgSWNvbiwgSW5saW5lU2VnbWVudEdyb3VwLCB1c2VUaGVtZTIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IHNlZ21lbnRTdHlsZXMgfSBmcm9tICcuL3N0eWxlcyc7XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMiwgaGlkZGVuOiBib29sZWFuKSA9PiB7XG4gIHJldHVybiB7XG4gICAgd3JhcHBlcjogY3NzYFxuICAgICAgbWF4LXdpZHRoOiA1MDBweDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGAsXG4gICAgc2V0dGluZ3NXcmFwcGVyOiBjc3NgXG4gICAgICBwYWRkaW5nLXRvcDogJHt0aGVtZS5zcGFjaW5nKDAuNSl9O1xuICAgIGAsXG4gICAgaWNvbjogY3NzYFxuICAgICAgbWFyZ2luLXJpZ2h0OiAke3RoZW1lLnNwYWNpbmcoMC41KX07XG4gICAgYCxcbiAgICBidXR0b246IGNzc2BcbiAgICAgIGp1c3RpZnktY29udGVudDogc3RhcnQ7XG4gICAgICAke2hpZGRlbiAmJlxuICAgICAgY3NzYFxuICAgICAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMudGV4dC5kaXNhYmxlZH07XG4gICAgICBgfVxuICAgIGAsXG4gIH07XG59O1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBsYWJlbDogc3RyaW5nO1xuICBoaWRkZW4/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgU2V0dGluZ3NFZGl0b3JDb250YWluZXIgPSAoeyBsYWJlbCwgY2hpbGRyZW4sIGhpZGRlbiA9IGZhbHNlIH06IFByb3BzV2l0aENoaWxkcmVuPFByb3BzPikgPT4ge1xuICBjb25zdCBbb3Blbiwgc2V0T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZTIoKTtcbiAgY29uc3Qgc3R5bGVzID0gZ2V0U3R5bGVzKHRoZW1lLCBoaWRkZW4pO1xuXG4gIHJldHVybiAoXG4gICAgPElubGluZVNlZ21lbnRHcm91cD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjeChzdHlsZXMud3JhcHBlcil9PlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPXtjeCgnZ2YtZm9ybS1sYWJlbCBxdWVyeS1wYXJ0Jywgc3R5bGVzLmJ1dHRvbiwgc2VnbWVudFN0eWxlcyl9XG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0T3Blbighb3Blbil9XG4gICAgICAgICAgYXJpYS1leHBhbmRlZD17b3Blbn1cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxJY29uIG5hbWU9e29wZW4gPyAnYW5nbGUtZG93bicgOiAnYW5nbGUtcmlnaHQnfSBhcmlhLWhpZGRlbj1cInRydWVcIiBjbGFzc05hbWU9e3N0eWxlcy5pY29ufSAvPlxuICAgICAgICAgIHtsYWJlbH1cbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAge29wZW4gJiYgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5zZXR0aW5nc1dyYXBwZXJ9PntjaGlsZHJlbn08L2Rpdj59XG4gICAgICA8L2Rpdj5cbiAgICA8L0lubGluZVNlZ21lbnRHcm91cD5cbiAgKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/SettingsEditorContainer.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/index.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElasticSearchQueryField: () => (/* binding */ ElasticSearchQueryField),\n/* harmony export */   QueryEditor: () => (/* binding */ QueryEditor)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/time.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Alert/Alert.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/QueryField/QueryField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineLabel.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _hooks_useNextId__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useNextId.ts\");\n/* harmony import */ var _hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n/* harmony import */ var _BucketAggregationsEditor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/index.tsx\");\n/* harmony import */ var _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _MetricAggregationsEditor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/index.tsx\");\n/* harmony import */ var _MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n/* harmony import */ var _QueryTypeSelector__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/QueryTypeSelector.tsx\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/state.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction useElasticVersion(datasource) {\n  const [version, setVersion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    let canceled = false;\n    datasource.getDatabaseVersion().then(\n      (version2) => {\n        if (!canceled) {\n          setVersion(version2);\n        }\n      },\n      (error) => {\n        console.log(error);\n      }\n    );\n    return () => {\n      canceled = true;\n    };\n  }, [datasource]);\n  return version;\n}\nconst QueryEditor = ({ query, onChange, onRunQuery, datasource, range }) => {\n  const elasticVersion = useElasticVersion(datasource);\n  const showUnsupportedMessage = elasticVersion != null && !(0,_utils__WEBPACK_IMPORTED_MODULE_4__.isSupportedVersion)(elasticVersion);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_6__.ElasticsearchProvider,\n    {\n      datasource,\n      onChange,\n      onRunQuery,\n      query,\n      range: range || (0,_grafana_data__WEBPACK_IMPORTED_MODULE_11__.getDefaultTimeRange)()\n    },\n    showUnsupportedMessage && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Alert, { title: _utils__WEBPACK_IMPORTED_MODULE_4__.unsupportedVersionMessage }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(QueryEditorForm, { value: query })\n  );\n};\nconst getStyles = (theme) => ({\n  root: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: flex;\n  `,\n  queryItem: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex-grow: 1;\n    margin: 0 ${theme.spacing(0.5)} ${theme.spacing(0.5)} 0;\n  `\n});\nconst ElasticSearchQueryField = ({ value, onChange }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_13__.useStyles2)(getStyles);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.queryItem }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.QueryField, { query: value, onChange, placeholder: \"Enter a lucene query\", portalOrigin: \"elasticsearch\" }));\n};\nconst QueryEditorForm = ({ value }) => {\n  const dispatch = (0,_hooks_useStatelessReducer__WEBPACK_IMPORTED_MODULE_3__.useDispatch)();\n  const nextId = (0,_hooks_useNextId__WEBPACK_IMPORTED_MODULE_2__.useNextId)();\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_13__.useStyles2)(getStyles);\n  const isTimeSeries = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.isTimeSeriesQuery)(value);\n  const showBucketAggregationsEditor = value.metrics?.every(\n    (metric) => _MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_8__.metricAggregationConfig[metric.type].impliedQueryType === \"metrics\"\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.root }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_15__.InlineLabel, { width: 17 }, \"Query type\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.queryItem }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_QueryTypeSelector__WEBPACK_IMPORTED_MODULE_9__.QueryTypeSelector, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.root }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_15__.InlineLabel, { width: 17 }, \"Lucene Query\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(ElasticSearchQueryField, { onChange: (query) => dispatch((0,_state__WEBPACK_IMPORTED_MODULE_10__.changeQuery)(query)), value: value?.query }), isTimeSeries && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_16__.InlineField,\n    {\n      label: \"Alias\",\n      labelWidth: 15,\n      tooltip: \"Aliasing only works for timeseries queries (when the last group is 'Date Histogram'). For all other query types this field is ignored.\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_17__.Input,\n      {\n        id: `ES-query-${value.refId}_alias`,\n        placeholder: \"Alias Pattern\",\n        onBlur: (e) => dispatch((0,_state__WEBPACK_IMPORTED_MODULE_10__.changeAliasPattern)(e.currentTarget.value)),\n        defaultValue: value.alias\n      }\n    )\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_MetricAggregationsEditor__WEBPACK_IMPORTED_MODULE_7__.MetricAggregationsEditor, { nextId }), showBucketAggregationsEditor && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_BucketAggregationsEditor__WEBPACK_IMPORTED_MODULE_5__.BucketAggregationsEditor, { nextId }));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvaW5kZXgudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDdUI7QUFHMEI7QUFDVTtBQUdyRDtBQUNFO0FBRXFEO0FBRXhDO0FBQ0g7QUFDRztBQUNEO0FBQ047QUFDYztBQU1oRCxTQUFTLGtCQUFrQixZQUE4QztBQUN2RSxRQUFNLENBQUMsU0FBUyxVQUFVLElBQUksK0NBQVEsQ0FBZ0IsSUFBSTtBQUMxRCxrREFBUyxDQUFDLE1BQU07QUFDZCxRQUFJLFdBQVc7QUFDZixlQUFXLG1CQUFtQixFQUFFO0FBQUEsTUFDOUIsQ0FBQ0EsYUFBWTtBQUNYLFlBQUksQ0FBQyxVQUFVO0FBQ2IscUJBQVdBLFFBQU87QUFBQSxRQUNwQjtBQUFBLE1BQ0Y7QUFBQSxNQUNBLENBQUMsVUFBVTtBQUVULGdCQUFRLElBQUksS0FBSztBQUFBLE1BQ25CO0FBQUEsSUFDRjtBQUVBLFdBQU8sTUFBTTtBQUNYLGlCQUFXO0FBQUEsSUFDYjtBQUFBLEVBQ0YsR0FBRyxDQUFDLFVBQVUsQ0FBQztBQUVmLFNBQU87QUFDVDtBQUVPLE1BQU0sY0FBYyxDQUFDLEVBQUUsT0FBTyxVQUFVLFlBQVksWUFBWSxNQUFNLE1BQStCO0FBQzFHLFFBQU0saUJBQWlCLGtCQUFrQixVQUFVO0FBQ25ELFFBQU0seUJBQXlCLGtCQUFrQixRQUFRLENBQUMsMERBQWtCLENBQUMsY0FBYztBQUMzRixTQUNFO0FBQUEsSUFBQyw2RUFBcUI7QUFBckI7QUFBQSxNQUNDO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQSxPQUFPLFNBQVMsbUVBQW1CLENBQUM7QUFBQTtBQUFBLElBRW5DLDBCQUEwQiwyRUFBQywrQ0FBSyxJQUFDLE9BQU8sNkRBQXlCLEVBQUU7QUFBQSxJQUNwRSwyRUFBQyxtQkFBZ0IsT0FBTyxPQUFPO0FBQUEsRUFDakM7QUFFSjtBQUVBLE1BQU0sWUFBWSxDQUFDLFdBQTBCO0FBQUEsRUFDM0MsTUFBTSxpREFBRztBQUFIO0FBQUE7QUFBQSxFQUdOLFdBQVcsaURBQUc7QUFBSDtBQUFBLGdCQUVHLE1BQU0sUUFBUSxHQUFHLEtBQUssTUFBTSxRQUFRLEdBQUc7QUFBQTtBQUV2RDtBQU1PLE1BQU0sMEJBQTBCLENBQUMsRUFBRSxPQUFPLFNBQVMsTUFBeUQ7QUFDakgsUUFBTSxTQUFTLHdEQUFVLENBQUMsU0FBUztBQUVuQyxTQUNFLDJFQUFDLFNBQUksV0FBVyxPQUFPLGFBQ3JCLDJFQUFDLG9EQUFVLElBQUMsT0FBTyxPQUFPLFVBQW9CLGFBQVksd0JBQXVCLGNBQWEsaUJBQWdCLENBQ2hIO0FBRUo7QUFFQSxNQUFNLGtCQUFrQixDQUFDLEVBQUUsTUFBTSxNQUFhO0FBQzVDLFFBQU0sV0FBVyx1RUFBVyxDQUFDO0FBQzdCLFFBQU0sU0FBUywyREFBUyxDQUFDO0FBQ3pCLFFBQU0sU0FBUyx3REFBVSxDQUFDLFNBQVM7QUFFbkMsUUFBTSxlQUFlLHlEQUFpQixDQUFDLEtBQUs7QUFFNUMsUUFBTSwrQkFBK0IsTUFBTSxTQUFTO0FBQUEsSUFDbEQsQ0FBQyxXQUFXLG9GQUF1QixDQUFDLE9BQU8sSUFBSSxFQUFFLHFCQUFxQjtBQUFBLEVBQ3hFO0FBRUEsU0FDRSwwSUFDRSwyRUFBQyxTQUFJLFdBQVcsT0FBTyxRQUNyQiwyRUFBQyxxREFBVyxJQUFDLE9BQU8sTUFBSSxZQUFVLEdBQ2xDLDJFQUFDLFNBQUksV0FBVyxPQUFPLGFBQ3JCLDJFQUFDLGlFQUFpQixNQUFDLENBQ3JCLENBQ0YsR0FDQSwyRUFBQyxTQUFJLFdBQVcsT0FBTyxRQUNyQiwyRUFBQyxxREFBVyxJQUFDLE9BQU8sTUFBSSxjQUFZLEdBQ3BDLDJFQUFDLDJCQUF3QixVQUFVLENBQUMsVUFBVSxTQUFTLG9EQUFXLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxPQUFPLE9BQU8sR0FFaEcsZ0JBQ0M7QUFBQSxJQUFDLHFEQUFXO0FBQVg7QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNOLFlBQVk7QUFBQSxNQUNaLFNBQVE7QUFBQTtBQUFBLElBRVI7QUFBQSxNQUFDLCtDQUFLO0FBQUw7QUFBQSxRQUNDLElBQUksWUFBWSxNQUFNO0FBQUEsUUFDdEIsYUFBWTtBQUFBLFFBQ1osUUFBUSxDQUFDLE1BQU0sU0FBUywyREFBa0IsQ0FBQyxFQUFFLGNBQWMsS0FBSyxDQUFDO0FBQUEsUUFDakUsY0FBYyxNQUFNO0FBQUE7QUFBQSxJQUN0QjtBQUFBLEVBQ0YsQ0FFSixHQUVBLDJFQUFDLCtFQUF3QixJQUFDLFFBQWdCLEdBQ3pDLGdDQUFnQywyRUFBQywrRUFBd0IsSUFBQyxRQUFnQixDQUM3RTtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9pbmRleC50c3g/MTcwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTZW1WZXIgfSBmcm9tICdzZW12ZXInO1xuXG5pbXBvcnQgeyBnZXREZWZhdWx0VGltZVJhbmdlLCBHcmFmYW5hVGhlbWUyLCBRdWVyeUVkaXRvclByb3BzIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBBbGVydCwgSW5saW5lRmllbGQsIElubGluZUxhYmVsLCBJbnB1dCwgUXVlcnlGaWVsZCwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgRWxhc3RpY0RhdGFzb3VyY2UgfSBmcm9tICcuLi8uLi9kYXRhc291cmNlJztcbmltcG9ydCB7IHVzZU5leHRJZCB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZU5leHRJZCc7XG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZVN0YXRlbGVzc1JlZHVjZXInO1xuaW1wb3J0IHsgRWxhc3RpY3NlYXJjaE9wdGlvbnMsIEVsYXN0aWNzZWFyY2hRdWVyeSB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IGlzU3VwcG9ydGVkVmVyc2lvbiwgaXNUaW1lU2VyaWVzUXVlcnksIHVuc3VwcG9ydGVkVmVyc2lvbk1lc3NhZ2UgfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmltcG9ydCB7IEJ1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvciB9IGZyb20gJy4vQnVja2V0QWdncmVnYXRpb25zRWRpdG9yJztcbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hQcm92aWRlciB9IGZyb20gJy4vRWxhc3RpY3NlYXJjaFF1ZXJ5Q29udGV4dCc7XG5pbXBvcnQgeyBNZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IgfSBmcm9tICcuL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvcic7XG5pbXBvcnQgeyBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZyB9IGZyb20gJy4vTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3V0aWxzJztcbmltcG9ydCB7IFF1ZXJ5VHlwZVNlbGVjdG9yIH0gZnJvbSAnLi9RdWVyeVR5cGVTZWxlY3Rvcic7XG5pbXBvcnQgeyBjaGFuZ2VBbGlhc1BhdHRlcm4sIGNoYW5nZVF1ZXJ5IH0gZnJvbSAnLi9zdGF0ZSc7XG5cbmV4cG9ydCB0eXBlIEVsYXN0aWNRdWVyeUVkaXRvclByb3BzID0gUXVlcnlFZGl0b3JQcm9wczxFbGFzdGljRGF0YXNvdXJjZSwgRWxhc3RpY3NlYXJjaFF1ZXJ5LCBFbGFzdGljc2VhcmNoT3B0aW9ucz47XG5cbi8vIGEgcmVhY3QgaG9vayB0aGF0IHJldHVybnMgdGhlIGVsYXN0aWNzZWFyY2ggZGF0YWJhc2UgdmVyc2lvbixcbi8vIG9yIGBudWxsYCwgd2hpbGUgbG9hZGluZywgb3IgaWYgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGRldGVybWluZSB0aGUgdmFsdWUuXG5mdW5jdGlvbiB1c2VFbGFzdGljVmVyc2lvbihkYXRhc291cmNlOiBFbGFzdGljRGF0YXNvdXJjZSk6IFNlbVZlciB8IG51bGwge1xuICBjb25zdCBbdmVyc2lvbiwgc2V0VmVyc2lvbl0gPSB1c2VTdGF0ZTxTZW1WZXIgfCBudWxsPihudWxsKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgY2FuY2VsZWQgPSBmYWxzZTtcbiAgICBkYXRhc291cmNlLmdldERhdGFiYXNlVmVyc2lvbigpLnRoZW4oXG4gICAgICAodmVyc2lvbikgPT4ge1xuICAgICAgICBpZiAoIWNhbmNlbGVkKSB7XG4gICAgICAgICAgc2V0VmVyc2lvbih2ZXJzaW9uKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICAvLyB3ZSBkbyBub3RoaW5nXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNhbmNlbGVkID0gdHJ1ZTtcbiAgICB9O1xuICB9LCBbZGF0YXNvdXJjZV0pO1xuXG4gIHJldHVybiB2ZXJzaW9uO1xufVxuXG5leHBvcnQgY29uc3QgUXVlcnlFZGl0b3IgPSAoeyBxdWVyeSwgb25DaGFuZ2UsIG9uUnVuUXVlcnksIGRhdGFzb3VyY2UsIHJhbmdlIH06IEVsYXN0aWNRdWVyeUVkaXRvclByb3BzKSA9PiB7XG4gIGNvbnN0IGVsYXN0aWNWZXJzaW9uID0gdXNlRWxhc3RpY1ZlcnNpb24oZGF0YXNvdXJjZSk7XG4gIGNvbnN0IHNob3dVbnN1cHBvcnRlZE1lc3NhZ2UgPSBlbGFzdGljVmVyc2lvbiAhPSBudWxsICYmICFpc1N1cHBvcnRlZFZlcnNpb24oZWxhc3RpY1ZlcnNpb24pO1xuICByZXR1cm4gKFxuICAgIDxFbGFzdGljc2VhcmNoUHJvdmlkZXJcbiAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XG4gICAgICBvblJ1blF1ZXJ5PXtvblJ1blF1ZXJ5fVxuICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgcmFuZ2U9e3JhbmdlIHx8IGdldERlZmF1bHRUaW1lUmFuZ2UoKX1cbiAgICA+XG4gICAgICB7c2hvd1Vuc3VwcG9ydGVkTWVzc2FnZSAmJiA8QWxlcnQgdGl0bGU9e3Vuc3VwcG9ydGVkVmVyc2lvbk1lc3NhZ2V9IC8+fVxuICAgICAgPFF1ZXJ5RWRpdG9yRm9ybSB2YWx1ZT17cXVlcnl9IC8+XG4gICAgPC9FbGFzdGljc2VhcmNoUHJvdmlkZXI+XG4gICk7XG59O1xuXG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+ICh7XG4gIHJvb3Q6IGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICBgLFxuICBxdWVyeUl0ZW06IGNzc2BcbiAgICBmbGV4LWdyb3c6IDE7XG4gICAgbWFyZ2luOiAwICR7dGhlbWUuc3BhY2luZygwLjUpfSAke3RoZW1lLnNwYWNpbmcoMC41KX0gMDtcbiAgYCxcbn0pO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICB2YWx1ZTogRWxhc3RpY3NlYXJjaFF1ZXJ5O1xufVxuXG5leHBvcnQgY29uc3QgRWxhc3RpY1NlYXJjaFF1ZXJ5RmllbGQgPSAoeyB2YWx1ZSwgb25DaGFuZ2UgfTogeyB2YWx1ZT86IHN0cmluZzsgb25DaGFuZ2U6ICh2OiBzdHJpbmcpID0+IHZvaWQgfSkgPT4ge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnF1ZXJ5SXRlbX0+XG4gICAgICA8UXVlcnlGaWVsZCBxdWVyeT17dmFsdWV9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gcGxhY2Vob2xkZXI9XCJFbnRlciBhIGx1Y2VuZSBxdWVyeVwiIHBvcnRhbE9yaWdpbj1cImVsYXN0aWNzZWFyY2hcIiAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuY29uc3QgUXVlcnlFZGl0b3JGb3JtID0gKHsgdmFsdWUgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCBuZXh0SWQgPSB1c2VOZXh0SWQoKTtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRTdHlsZXMpO1xuXG4gIGNvbnN0IGlzVGltZVNlcmllcyA9IGlzVGltZVNlcmllc1F1ZXJ5KHZhbHVlKTtcblxuICBjb25zdCBzaG93QnVja2V0QWdncmVnYXRpb25zRWRpdG9yID0gdmFsdWUubWV0cmljcz8uZXZlcnkoXG4gICAgKG1ldHJpYykgPT4gbWV0cmljQWdncmVnYXRpb25Db25maWdbbWV0cmljLnR5cGVdLmltcGxpZWRRdWVyeVR5cGUgPT09ICdtZXRyaWNzJ1xuICApO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucm9vdH0+XG4gICAgICAgIDxJbmxpbmVMYWJlbCB3aWR0aD17MTd9PlF1ZXJ5IHR5cGU8L0lubGluZUxhYmVsPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnF1ZXJ5SXRlbX0+XG4gICAgICAgICAgPFF1ZXJ5VHlwZVNlbGVjdG9yIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnJvb3R9PlxuICAgICAgICA8SW5saW5lTGFiZWwgd2lkdGg9ezE3fT5MdWNlbmUgUXVlcnk8L0lubGluZUxhYmVsPlxuICAgICAgICA8RWxhc3RpY1NlYXJjaFF1ZXJ5RmllbGQgb25DaGFuZ2U9eyhxdWVyeSkgPT4gZGlzcGF0Y2goY2hhbmdlUXVlcnkocXVlcnkpKX0gdmFsdWU9e3ZhbHVlPy5xdWVyeX0gLz5cblxuICAgICAgICB7aXNUaW1lU2VyaWVzICYmIChcbiAgICAgICAgICA8SW5saW5lRmllbGRcbiAgICAgICAgICAgIGxhYmVsPVwiQWxpYXNcIlxuICAgICAgICAgICAgbGFiZWxXaWR0aD17MTV9XG4gICAgICAgICAgICB0b29sdGlwPVwiQWxpYXNpbmcgb25seSB3b3JrcyBmb3IgdGltZXNlcmllcyBxdWVyaWVzICh3aGVuIHRoZSBsYXN0IGdyb3VwIGlzICdEYXRlIEhpc3RvZ3JhbScpLiBGb3IgYWxsIG90aGVyIHF1ZXJ5IHR5cGVzIHRoaXMgZmllbGQgaXMgaWdub3JlZC5cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICBpZD17YEVTLXF1ZXJ5LSR7dmFsdWUucmVmSWR9X2FsaWFzYH1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBbGlhcyBQYXR0ZXJuXCJcbiAgICAgICAgICAgICAgb25CbHVyPXsoZSkgPT4gZGlzcGF0Y2goY2hhbmdlQWxpYXNQYXR0ZXJuKGUuY3VycmVudFRhcmdldC52YWx1ZSkpfVxuICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3ZhbHVlLmFsaWFzfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0lubGluZUZpZWxkPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxNZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IgbmV4dElkPXtuZXh0SWR9IC8+XG4gICAgICB7c2hvd0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvciAmJiA8QnVja2V0QWdncmVnYXRpb25zRWRpdG9yIG5leHRJZD17bmV4dElkfSAvPn1cbiAgICA8Lz5cbiAgKTtcbn07XG4iXSwibmFtZXMiOlsidmVyc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/index.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/state.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aliasPatternReducer: () => (/* binding */ aliasPatternReducer),\n/* harmony export */   changeAliasPattern: () => (/* binding */ changeAliasPattern),\n/* harmony export */   changeQuery: () => (/* binding */ changeQuery),\n/* harmony export */   initQuery: () => (/* binding */ initQuery),\n/* harmony export */   queryReducer: () => (/* binding */ queryReducer)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@reduxjs-toolkit-virtual-75570b104b/0/cache/@reduxjs-toolkit-npm-1.9.3-cbad5da1de-d965fc6197.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js\");\n\n\nconst initQuery = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"init\");\nconst changeQuery = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"change_query\");\nconst changeAliasPattern = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createAction)(\"change_alias_pattern\");\nconst queryReducer = (prevQuery, action) => {\n  if (changeQuery.match(action)) {\n    return action.payload;\n  }\n  if (initQuery.match(action)) {\n    return prevQuery || \"\";\n  }\n  return prevQuery;\n};\nconst aliasPatternReducer = (prevAliasPattern, action) => {\n  if (changeAliasPattern.match(action)) {\n    return action.payload;\n  }\n  if (initQuery.match(action)) {\n    return prevAliasPattern || \"\";\n  }\n  return prevAliasPattern;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3Ivc3RhdGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQVE5QixNQUFNLFlBQVksOERBQVksQ0FBQyxNQUFNO0FBRXJDLE1BQU0sY0FBYyw4REFBWSxDQUE4QixjQUFjO0FBRTVFLE1BQU0scUJBQXFCLDhEQUFZLENBQThCLHNCQUFzQjtBQUUzRixNQUFNLGVBQWUsQ0FBQyxXQUF3QyxXQUFtQjtBQUN0RixNQUFJLFlBQVksTUFBTSxNQUFNLEdBQUc7QUFDN0IsV0FBTyxPQUFPO0FBQUEsRUFDaEI7QUFFQSxNQUFJLFVBQVUsTUFBTSxNQUFNLEdBQUc7QUFDM0IsV0FBTyxhQUFhO0FBQUEsRUFDdEI7QUFFQSxTQUFPO0FBQ1Q7QUFFTyxNQUFNLHNCQUFzQixDQUFDLGtCQUErQyxXQUFtQjtBQUNwRyxNQUFJLG1CQUFtQixNQUFNLE1BQU0sR0FBRztBQUNwQyxXQUFPLE9BQU87QUFBQSxFQUNoQjtBQUVBLE1BQUksVUFBVSxNQUFNLE1BQU0sR0FBRztBQUMzQixXQUFPLG9CQUFvQjtBQUFBLEVBQzdCO0FBRUEsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9RdWVyeUVkaXRvci9zdGF0ZS50cz8zMzVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjdGlvbiwgY3JlYXRlQWN0aW9uIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5cbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hRdWVyeSB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuLyoqXG4gKiBXaGVuIHRoZSBgaW5pdFF1ZXJ5YCBBY3Rpb24gaXMgZGlzcGF0Y2hlZCwgdGhlIHF1ZXJ5IGdldHMgcG9wdWxhdGVkIHdpdGggZGVmYXVsdCB2YWx1ZXMgd2hlcmUgdmFsdWVzIGFyZSBub3QgcHJlc2VudC5cbiAqIFRoaXMgbWVhbnMgaXQgd29uJ3Qgb3ZlcnJpZGUgYW55IGV4aXN0aW5nIHZhbHVlIGluIHBsYWNlLCBidXQganVzdCBlbnN1cmUgdGhlIHF1ZXJ5IGlzIGluIGEgXCJydW5uYWJsZVwiIHN0YXRlLlxuICovXG5leHBvcnQgY29uc3QgaW5pdFF1ZXJ5ID0gY3JlYXRlQWN0aW9uKCdpbml0Jyk7XG5cbmV4cG9ydCBjb25zdCBjaGFuZ2VRdWVyeSA9IGNyZWF0ZUFjdGlvbjxFbGFzdGljc2VhcmNoUXVlcnlbJ3F1ZXJ5J10+KCdjaGFuZ2VfcXVlcnknKTtcblxuZXhwb3J0IGNvbnN0IGNoYW5nZUFsaWFzUGF0dGVybiA9IGNyZWF0ZUFjdGlvbjxFbGFzdGljc2VhcmNoUXVlcnlbJ2FsaWFzJ10+KCdjaGFuZ2VfYWxpYXNfcGF0dGVybicpO1xuXG5leHBvcnQgY29uc3QgcXVlcnlSZWR1Y2VyID0gKHByZXZRdWVyeTogRWxhc3RpY3NlYXJjaFF1ZXJ5WydxdWVyeSddLCBhY3Rpb246IEFjdGlvbikgPT4ge1xuICBpZiAoY2hhbmdlUXVlcnkubWF0Y2goYWN0aW9uKSkge1xuICAgIHJldHVybiBhY3Rpb24ucGF5bG9hZDtcbiAgfVxuXG4gIGlmIChpbml0UXVlcnkubWF0Y2goYWN0aW9uKSkge1xuICAgIHJldHVybiBwcmV2UXVlcnkgfHwgJyc7XG4gIH1cblxuICByZXR1cm4gcHJldlF1ZXJ5O1xufTtcblxuZXhwb3J0IGNvbnN0IGFsaWFzUGF0dGVyblJlZHVjZXIgPSAocHJldkFsaWFzUGF0dGVybjogRWxhc3RpY3NlYXJjaFF1ZXJ5WydhbGlhcyddLCBhY3Rpb246IEFjdGlvbikgPT4ge1xuICBpZiAoY2hhbmdlQWxpYXNQYXR0ZXJuLm1hdGNoKGFjdGlvbikpIHtcbiAgICByZXR1cm4gYWN0aW9uLnBheWxvYWQ7XG4gIH1cblxuICBpZiAoaW5pdFF1ZXJ5Lm1hdGNoKGFjdGlvbikpIHtcbiAgICByZXR1cm4gcHJldkFsaWFzUGF0dGVybiB8fCAnJztcbiAgfVxuXG4gIHJldHVybiBwcmV2QWxpYXNQYXR0ZXJuO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/state.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/QueryEditor/styles.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   segmentStyles: () => (/* binding */ segmentStyles)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n\n\nconst segmentStyles = (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n  min-width: 150px;\n`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3Ivc3R5bGVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvQjtBQUViLE1BQU0sZ0JBQWdCLGlEQUFHO0FBQUg7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvUXVlcnlFZGl0b3Ivc3R5bGVzLnRzPzU0YjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcblxuZXhwb3J0IGNvbnN0IHNlZ21lbnRTdHlsZXMgPSBjc3NgXG4gIG1pbi13aWR0aDogMTUwcHg7XG5gO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/QueryEditor/styles.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/components/hooks/useCreatableSelectPersistedBehaviour.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCreatableSelectPersistedBehaviour: () => (/* binding */ useCreatableSelectPersistedBehaviour)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst hasValue = (searchValue) => ({ value }) => value === searchValue;\nconst getInitialState = (initialOptions, initialValue) => {\n  if (initialValue === void 0 || initialOptions.some(hasValue(initialValue))) {\n    return initialOptions;\n  }\n  return [\n    ...initialOptions,\n    {\n      value: initialValue,\n      label: initialValue\n    }\n  ];\n};\nconst useCreatableSelectPersistedBehaviour = ({ options: initialOptions, value, onChange }) => {\n  const [options, setOptions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getInitialState(initialOptions, value));\n  const addOption = (newValue) => setOptions([...options, { value: newValue, label: newValue }]);\n  return {\n    onCreateOption: (value2) => {\n      addOption(value2);\n      onChange({ value: value2 });\n    },\n    onChange,\n    allowCustomValue: true,\n    options,\n    value\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbXBvbmVudHMvaG9va3MvdXNlQ3JlYXRhYmxlU2VsZWN0UGVyc2lzdGVkQmVoYXZpb3VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBeUI7QUFJekIsTUFBTSxXQUNKLENBQTRCLGdCQUM1QixDQUFDLEVBQUUsTUFBTSxNQUNQLFVBQVU7QUFFZCxNQUFNLGtCQUFrQixDQUFDLGdCQUFtQyxpQkFBNkM7QUFDdkcsTUFBSSxpQkFBaUIsVUFBYSxlQUFlLEtBQUssU0FBUyxZQUFZLENBQUMsR0FBRztBQUM3RSxXQUFPO0FBQUEsRUFDVDtBQUVBLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNIO0FBQUEsTUFDRSxPQUFPO0FBQUEsTUFDUCxPQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0Y7QUFDRjtBQVlPLE1BQU0sdUNBQXVDLENBQUMsRUFBRSxTQUFTLGdCQUFnQixPQUFPLFNBQVMsTUFBYztBQUM1RyxRQUFNLENBQUMsU0FBUyxVQUFVLElBQUksK0NBQVEsQ0FBQyxnQkFBZ0IsZ0JBQWdCLEtBQUssQ0FBQztBQUU3RSxRQUFNLFlBQVksQ0FBQyxhQUFxQixXQUFXLENBQUMsR0FBRyxTQUFTLEVBQUUsT0FBTyxVQUFVLE9BQU8sU0FBUyxDQUFDLENBQUM7QUFFckcsU0FBTztBQUFBLElBQ0wsZ0JBQWdCLENBQUNBLFdBQWtCO0FBQ2pDLGdCQUFVQSxNQUFLO0FBQ2YsZUFBUyxFQUFFLE9BQUFBLE9BQU0sQ0FBQztBQUFBLElBQ3BCO0FBQUEsSUFDQTtBQUFBLElBQ0Esa0JBQWtCO0FBQUEsSUFDbEI7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29tcG9uZW50cy9ob29rcy91c2VDcmVhdGFibGVTZWxlY3RQZXJzaXN0ZWRCZWhhdmlvdXIudHM/MzhlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmNvbnN0IGhhc1ZhbHVlID1cbiAgPFQgZXh0ZW5kcyBTZWxlY3RhYmxlVmFsdWU+KHNlYXJjaFZhbHVlOiBUWyd2YWx1ZSddKSA9PlxuICAoeyB2YWx1ZSB9OiBUKSA9PlxuICAgIHZhbHVlID09PSBzZWFyY2hWYWx1ZTtcblxuY29uc3QgZ2V0SW5pdGlhbFN0YXRlID0gKGluaXRpYWxPcHRpb25zOiBTZWxlY3RhYmxlVmFsdWVbXSwgaW5pdGlhbFZhbHVlPzogc3RyaW5nKTogU2VsZWN0YWJsZVZhbHVlW10gPT4ge1xuICBpZiAoaW5pdGlhbFZhbHVlID09PSB1bmRlZmluZWQgfHwgaW5pdGlhbE9wdGlvbnMuc29tZShoYXNWYWx1ZShpbml0aWFsVmFsdWUpKSkge1xuICAgIHJldHVybiBpbml0aWFsT3B0aW9ucztcbiAgfVxuXG4gIHJldHVybiBbXG4gICAgLi4uaW5pdGlhbE9wdGlvbnMsXG4gICAge1xuICAgICAgdmFsdWU6IGluaXRpYWxWYWx1ZSxcbiAgICAgIGxhYmVsOiBpbml0aWFsVmFsdWUsXG4gICAgfSxcbiAgXTtcbn07XG5cbmludGVyZmFjZSBQYXJhbXMge1xuICBvcHRpb25zOiBTZWxlY3RhYmxlVmFsdWVbXTtcbiAgdmFsdWU/OiBzdHJpbmc7XG4gIG9uQ2hhbmdlOiAoczogU2VsZWN0YWJsZVZhbHVlPHN0cmluZz4pID0+IHZvaWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgUHJvcHMgbmVlZGVkIGJ5IFNlbGVjdCB0byBoYW5kbGUgY3VzdG9tIHZhbHVlcyBhbmQgaGFuZGxlcyBjdXN0b20gdmFsdWUgY3JlYXRpb25cbiAqIGFuZCB0aGUgaW5pdGlhbCB2YWx1ZSB3aGVuIGl0IGlzIG5vdCBwcmVzZW50IGluIHRoZSBvcHRpb24gYXJyYXkuXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VDcmVhdGFibGVTZWxlY3RQZXJzaXN0ZWRCZWhhdmlvdXIgPSAoeyBvcHRpb25zOiBpbml0aWFsT3B0aW9ucywgdmFsdWUsIG9uQ2hhbmdlIH06IFBhcmFtcykgPT4ge1xuICBjb25zdCBbb3B0aW9ucywgc2V0T3B0aW9uc10gPSB1c2VTdGF0ZShnZXRJbml0aWFsU3RhdGUoaW5pdGlhbE9wdGlvbnMsIHZhbHVlKSk7XG5cbiAgY29uc3QgYWRkT3B0aW9uID0gKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHNldE9wdGlvbnMoWy4uLm9wdGlvbnMsIHsgdmFsdWU6IG5ld1ZhbHVlLCBsYWJlbDogbmV3VmFsdWUgfV0pO1xuXG4gIHJldHVybiB7XG4gICAgb25DcmVhdGVPcHRpb246ICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBhZGRPcHRpb24odmFsdWUpO1xuICAgICAgb25DaGFuZ2UoeyB2YWx1ZSB9KTtcbiAgICB9LFxuICAgIG9uQ2hhbmdlLFxuICAgIGFsbG93Q3VzdG9tVmFsdWU6IHRydWUsXG4gICAgb3B0aW9ucyxcbiAgICB2YWx1ZSxcbiAgfTtcbn07XG4iXSwibmFtZXMiOlsidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/components/hooks/useCreatableSelectPersistedBehaviour.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/configuration/ConfigEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigEditor: () => (/* binding */ ConfigEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_aws_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/@grafana-aws-sdk-npm-0.0.44-2a90d3a12b-54955767af.zip/node_modules/@grafana/aws-sdk/dist/index.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/DataSourceDescription.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSection.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Alert/Alert.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/DataSourceSettings/DataSourceHttpSettings.tsx\");\n/* harmony import */ var app_core_components_Divider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/components/Divider.tsx\");\n/* harmony import */ var app_core_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/core/config.ts\");\n/* harmony import */ var _DataLinks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/configuration/DataLinks.tsx\");\n/* harmony import */ var _ElasticDetails__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/configuration/ElasticDetails.tsx\");\n/* harmony import */ var _LogsConfig__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/configuration/LogsConfig.tsx\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/configuration/utils.ts\");\n\n\n\n\n\n\n\n\n\n\n\nconst ConfigEditor = (props) => {\n  const showAccessOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(props.options.access === \"direct\");\n  const { options, onOptionsChange } = props;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_7__.isValidOptions)(options)) {\n      onOptionsChange((0,_utils__WEBPACK_IMPORTED_MODULE_7__.coerceOptions)(options));\n    }\n  }, [onOptionsChange, options]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, options.access === \"direct\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Alert, { title: \"Error\", severity: \"error\" }, \"Browser access mode in the Elasticsearch datasource is no longer available. Switch to server access mode.\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_9__.DataSourceDescription,\n    {\n      dataSourceName: \"Elasticsearch\",\n      docsLink: \"https://grafana.com/docs/grafana/latest/datasources/elasticsearch\",\n      hasRequiredFields: false\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_Divider__WEBPACK_IMPORTED_MODULE_2__.Divider, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_10__.DataSourceHttpSettings,\n    {\n      defaultUrl: \"http://localhost:9200\",\n      dataSourceConfig: options,\n      showAccessOptions: showAccessOptions.current,\n      onChange: onOptionsChange,\n      sigV4AuthToggleEnabled: app_core_config__WEBPACK_IMPORTED_MODULE_3__.config.sigV4AuthEnabled,\n      renderSigV4Editor: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_aws_sdk__WEBPACK_IMPORTED_MODULE_1__.SIGV4ConnectionConfig, { ...props }),\n      secureSocksDSProxyEnabled: app_core_config__WEBPACK_IMPORTED_MODULE_3__.config.secureSocksDSProxyEnabled\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_Divider__WEBPACK_IMPORTED_MODULE_2__.Divider, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_11__.ConfigSection,\n    {\n      title: \"Additional settings\",\n      description: \"Additional settings are optional settings that can be configured for more control over your data source.\",\n      isCollapsible: true,\n      isInitiallyOpen: true\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ElasticDetails__WEBPACK_IMPORTED_MODULE_5__.ElasticDetails, { value: options, onChange: onOptionsChange }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_Divider__WEBPACK_IMPORTED_MODULE_2__.Divider, { hideLine: true }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _LogsConfig__WEBPACK_IMPORTED_MODULE_6__.LogsConfig,\n      {\n        value: options.jsonData,\n        onChange: (newValue) => onOptionsChange({\n          ...options,\n          jsonData: newValue\n        })\n      }\n    ),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_Divider__WEBPACK_IMPORTED_MODULE_2__.Divider, { hideLine: true }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _DataLinks__WEBPACK_IMPORTED_MODULE_4__.DataLinks,\n      {\n        value: options.jsonData.dataLinks,\n        onChange: (newValue) => {\n          onOptionsChange({\n            ...options,\n            jsonData: {\n              ...options.jsonData,\n              dataLinks: newValue\n            }\n          });\n        }\n      }\n    )\n  ));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbmZpZ3VyYXRpb24vQ29uZmlnRWRpdG9yLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUM7QUFFSDtBQUVlO0FBQ1A7QUFDdEI7QUFDRDtBQUlHO0FBQ0s7QUFDSjtBQUNtQjtBQUl2QyxNQUFNLGVBQWUsQ0FBQyxVQUFpQjtBQUs1QyxRQUFNLG9CQUFvQiw2Q0FBTSxDQUFDLE1BQU0sUUFBUSxXQUFXLFFBQVE7QUFFbEUsUUFBTSxFQUFFLFNBQVMsZ0JBQWdCLElBQUk7QUFFckMsa0RBQVMsQ0FBQyxNQUFNO0FBQ2QsUUFBSSxDQUFDLHNEQUFjLENBQUMsT0FBTyxHQUFHO0FBQzVCLHNCQUFnQixxREFBYSxDQUFDLE9BQU8sQ0FBQztBQUFBLElBQ3hDO0FBQUEsRUFDRixHQUFHLENBQUMsaUJBQWlCLE9BQU8sQ0FBQztBQUU3QixTQUNFLDBJQUNHLFFBQVEsV0FBVyxZQUNsQiwyRUFBQyw4Q0FBSyxJQUFDLE9BQU0sU0FBUSxVQUFTLFdBQVEsMkdBRXRDLEdBRUY7QUFBQSxJQUFDLHdFQUFxQjtBQUFyQjtBQUFBLE1BQ0MsZ0JBQWU7QUFBQSxNQUNmLFVBQVM7QUFBQSxNQUNULG1CQUFtQjtBQUFBO0FBQUEsRUFDckIsR0FFQSwyRUFBQyxnRUFBTyxNQUFDLEdBRVQ7QUFBQSxJQUFDLGdFQUFzQjtBQUF0QjtBQUFBLE1BQ0MsWUFBVztBQUFBLE1BQ1gsa0JBQWtCO0FBQUEsTUFDbEIsbUJBQW1CLGtCQUFrQjtBQUFBLE1BQ3JDLFVBQVU7QUFBQSxNQUNWLHdCQUF3QixtREFBTSxDQUFDO0FBQUEsTUFDL0IsbUJBQW1CLDJFQUFDLG1FQUFxQixJQUFFLEdBQUcsT0FBTztBQUFBLE1BQ3JELDJCQUEyQixtREFBTSxDQUFDO0FBQUE7QUFBQSxFQUNwQyxHQUVBLDJFQUFDLGdFQUFPLE1BQUMsR0FFVDtBQUFBLElBQUMsaUVBQWE7QUFBYjtBQUFBLE1BQ0MsT0FBTTtBQUFBLE1BQ04sYUFBWTtBQUFBLE1BQ1osZUFBZTtBQUFBLE1BQ2YsaUJBQWU7QUFBQTtBQUFBLElBRWYsMkVBQUMsMkRBQWMsSUFBQyxPQUFPLFNBQVMsVUFBVSxpQkFBaUI7QUFBQSxJQUMzRCwyRUFBQyxnRUFBTyxJQUFDLFVBQVEsTUFBQztBQUFBLElBQ2xCO0FBQUEsTUFBQyxtREFBVTtBQUFWO0FBQUEsUUFDQyxPQUFPLFFBQVE7QUFBQSxRQUNmLFVBQVUsQ0FBQyxhQUNULGdCQUFnQjtBQUFBLFVBQ2QsR0FBRztBQUFBLFVBQ0gsVUFBVTtBQUFBLFFBQ1osQ0FBQztBQUFBO0FBQUEsSUFFTDtBQUFBLElBQ0EsMkVBQUMsZ0VBQU8sSUFBQyxVQUFRLE1BQUM7QUFBQSxJQUNsQjtBQUFBLE1BQUMsaURBQVM7QUFBVDtBQUFBLFFBQ0MsT0FBTyxRQUFRLFNBQVM7QUFBQSxRQUN4QixVQUFVLENBQUMsYUFBYTtBQUN0QiwwQkFBZ0I7QUFBQSxZQUNkLEdBQUc7QUFBQSxZQUNILFVBQVU7QUFBQSxjQUNSLEdBQUcsUUFBUTtBQUFBLGNBQ1gsV0FBVztBQUFBLFlBQ2I7QUFBQSxVQUNGLENBQUM7QUFBQSxRQUNIO0FBQUE7QUFBQSxJQUNGO0FBQUEsRUFDRixDQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb25maWd1cmF0aW9uL0NvbmZpZ0VkaXRvci50c3g/NTc2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IFNJR1Y0Q29ubmVjdGlvbkNvbmZpZyB9IGZyb20gJ0BncmFmYW5hL2F3cy1zZGsnO1xuaW1wb3J0IHsgRGF0YVNvdXJjZVBsdWdpbk9wdGlvbnNFZGl0b3JQcm9wcyB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgQ29uZmlnU2VjdGlvbiwgRGF0YVNvdXJjZURlc2NyaXB0aW9uIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IEFsZXJ0LCBEYXRhU291cmNlSHR0cFNldHRpbmdzIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgRGl2aWRlciB9IGZyb20gJ2FwcC9jb3JlL2NvbXBvbmVudHMvRGl2aWRlcic7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICdhcHAvY29yZS9jb25maWcnO1xuXG5pbXBvcnQgeyBFbGFzdGljc2VhcmNoT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJztcblxuaW1wb3J0IHsgRGF0YUxpbmtzIH0gZnJvbSAnLi9EYXRhTGlua3MnO1xuaW1wb3J0IHsgRWxhc3RpY0RldGFpbHMgfSBmcm9tICcuL0VsYXN0aWNEZXRhaWxzJztcbmltcG9ydCB7IExvZ3NDb25maWcgfSBmcm9tICcuL0xvZ3NDb25maWcnO1xuaW1wb3J0IHsgY29lcmNlT3B0aW9ucywgaXNWYWxpZE9wdGlvbnMgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgUHJvcHMgPSBEYXRhU291cmNlUGx1Z2luT3B0aW9uc0VkaXRvclByb3BzPEVsYXN0aWNzZWFyY2hPcHRpb25zPjtcblxuZXhwb3J0IGNvbnN0IENvbmZpZ0VkaXRvciA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgLy8gd2UgZGVjaWRlIG9uIHdoZXRoZXIgdG8gc2hvdyBhY2Nlc3Mgb3B0aW9ucyBvciBub3QgYXQgdGhlIHBvaW50IHdoZW4gdGhlIGNvbmZpZyBwYWdlIG9wZW5zLlxuICAvLyB3aGF0ZXZlciBoYXBwZW5zIHdoaWxlIHRoZSBwYWdlIGlzIG9wZW4sIHRoaXMgZGVjaXNpb24gZG9lcyBub3QgY2hhbmdlLlxuICAvLyAod2UgZG8gdGhpcyB0byBhdm9pZCBzaXR1YXRpb25zIHdoZXJlIHlvdSBzd2l0Y2ggYWNjZXNzLW1vZGUgYW5kIHN1ZGRlbmx5XG4gIC8vIHRoZSBhY2Nlc3MtbW9kZS1zZWxlY3QtYm94IHZhbmlzaGVzKVxuICBjb25zdCBzaG93QWNjZXNzT3B0aW9ucyA9IHVzZVJlZihwcm9wcy5vcHRpb25zLmFjY2VzcyA9PT0gJ2RpcmVjdCcpO1xuXG4gIGNvbnN0IHsgb3B0aW9ucywgb25PcHRpb25zQ2hhbmdlIH0gPSBwcm9wcztcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNWYWxpZE9wdGlvbnMob3B0aW9ucykpIHtcbiAgICAgIG9uT3B0aW9uc0NoYW5nZShjb2VyY2VPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9XG4gIH0sIFtvbk9wdGlvbnNDaGFuZ2UsIG9wdGlvbnNdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7b3B0aW9ucy5hY2Nlc3MgPT09ICdkaXJlY3QnICYmIChcbiAgICAgICAgPEFsZXJ0IHRpdGxlPVwiRXJyb3JcIiBzZXZlcml0eT1cImVycm9yXCI+XG4gICAgICAgICAgQnJvd3NlciBhY2Nlc3MgbW9kZSBpbiB0aGUgRWxhc3RpY3NlYXJjaCBkYXRhc291cmNlIGlzIG5vIGxvbmdlciBhdmFpbGFibGUuIFN3aXRjaCB0byBzZXJ2ZXIgYWNjZXNzIG1vZGUuXG4gICAgICAgIDwvQWxlcnQ+XG4gICAgICApfVxuICAgICAgPERhdGFTb3VyY2VEZXNjcmlwdGlvblxuICAgICAgICBkYXRhU291cmNlTmFtZT1cIkVsYXN0aWNzZWFyY2hcIlxuICAgICAgICBkb2NzTGluaz1cImh0dHBzOi8vZ3JhZmFuYS5jb20vZG9jcy9ncmFmYW5hL2xhdGVzdC9kYXRhc291cmNlcy9lbGFzdGljc2VhcmNoXCJcbiAgICAgICAgaGFzUmVxdWlyZWRGaWVsZHM9e2ZhbHNlfVxuICAgICAgLz5cblxuICAgICAgPERpdmlkZXIgLz5cblxuICAgICAgPERhdGFTb3VyY2VIdHRwU2V0dGluZ3NcbiAgICAgICAgZGVmYXVsdFVybD1cImh0dHA6Ly9sb2NhbGhvc3Q6OTIwMFwiXG4gICAgICAgIGRhdGFTb3VyY2VDb25maWc9e29wdGlvbnN9XG4gICAgICAgIHNob3dBY2Nlc3NPcHRpb25zPXtzaG93QWNjZXNzT3B0aW9ucy5jdXJyZW50fVxuICAgICAgICBvbkNoYW5nZT17b25PcHRpb25zQ2hhbmdlfVxuICAgICAgICBzaWdWNEF1dGhUb2dnbGVFbmFibGVkPXtjb25maWcuc2lnVjRBdXRoRW5hYmxlZH1cbiAgICAgICAgcmVuZGVyU2lnVjRFZGl0b3I9ezxTSUdWNENvbm5lY3Rpb25Db25maWcgey4uLnByb3BzfT48L1NJR1Y0Q29ubmVjdGlvbkNvbmZpZz59XG4gICAgICAgIHNlY3VyZVNvY2tzRFNQcm94eUVuYWJsZWQ9e2NvbmZpZy5zZWN1cmVTb2Nrc0RTUHJveHlFbmFibGVkfVxuICAgICAgLz5cblxuICAgICAgPERpdmlkZXIgLz5cblxuICAgICAgPENvbmZpZ1NlY3Rpb25cbiAgICAgICAgdGl0bGU9XCJBZGRpdGlvbmFsIHNldHRpbmdzXCJcbiAgICAgICAgZGVzY3JpcHRpb249XCJBZGRpdGlvbmFsIHNldHRpbmdzIGFyZSBvcHRpb25hbCBzZXR0aW5ncyB0aGF0IGNhbiBiZSBjb25maWd1cmVkIGZvciBtb3JlIGNvbnRyb2wgb3ZlciB5b3VyIGRhdGEgc291cmNlLlwiXG4gICAgICAgIGlzQ29sbGFwc2libGU9e3RydWV9XG4gICAgICAgIGlzSW5pdGlhbGx5T3BlblxuICAgICAgPlxuICAgICAgICA8RWxhc3RpY0RldGFpbHMgdmFsdWU9e29wdGlvbnN9IG9uQ2hhbmdlPXtvbk9wdGlvbnNDaGFuZ2V9IC8+XG4gICAgICAgIDxEaXZpZGVyIGhpZGVMaW5lIC8+XG4gICAgICAgIDxMb2dzQ29uZmlnXG4gICAgICAgICAgdmFsdWU9e29wdGlvbnMuanNvbkRhdGF9XG4gICAgICAgICAgb25DaGFuZ2U9eyhuZXdWYWx1ZSkgPT5cbiAgICAgICAgICAgIG9uT3B0aW9uc0NoYW5nZSh7XG4gICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgIGpzb25EYXRhOiBuZXdWYWx1ZSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgICA8RGl2aWRlciBoaWRlTGluZSAvPlxuICAgICAgICA8RGF0YUxpbmtzXG4gICAgICAgICAgdmFsdWU9e29wdGlvbnMuanNvbkRhdGEuZGF0YUxpbmtzfVxuICAgICAgICAgIG9uQ2hhbmdlPXsobmV3VmFsdWUpID0+IHtcbiAgICAgICAgICAgIG9uT3B0aW9uc0NoYW5nZSh7XG4gICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgIGpzb25EYXRhOiB7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5qc29uRGF0YSxcbiAgICAgICAgICAgICAgICBkYXRhTGlua3M6IG5ld1ZhbHVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvQ29uZmlnU2VjdGlvbj5cbiAgICA8Lz5cbiAgKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/configuration/ConfigEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/configuration/DataLink.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataLink: () => (/* binding */ DataLink)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/usePrevious.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/index.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/stylesFactory.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/DataLinks/DataLinkInput.tsx\");\n/* harmony import */ var app_features_datasources_components_picker_DataSourcePicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/datasources/components/picker/DataSourcePicker.tsx\");\n\n\n\n\n\n\nconst { FormField, Switch } = _grafana_ui__WEBPACK_IMPORTED_MODULE_3__.LegacyForms;\nconst getStyles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.stylesFactory)(() => ({\n  firstRow: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: flex;\n  `,\n  nameField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 2;\n  `,\n  regexField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 3;\n  `,\n  row: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: flex;\n    align-items: baseline;\n  `,\n  urlField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 1;\n  `,\n  urlDisplayLabelField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 1;\n  `\n}));\nconst DataLink = (props) => {\n  const { value, onChange, onDelete, suggestions, className } = props;\n  const styles = getStyles();\n  const [showInternalLink, setShowInternalLink] = useInternalLink(value.datasourceUid);\n  const handleChange = (field) => (event) => {\n    onChange({\n      ...value,\n      [field]: event.currentTarget.value\n    });\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.firstRow + \" gf-form\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    FormField,\n    {\n      className: styles.nameField,\n      labelWidth: 6,\n      inputWidth: null,\n      label: \"Field\",\n      type: \"text\",\n      value: value.field,\n      tooltip: \"Can be exact field name or a regex pattern that will match on the field name.\",\n      onChange: handleChange(\"field\")\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Button,\n    {\n      variant: \"destructive\",\n      title: \"Remove field\",\n      icon: \"times\",\n      onClick: (event) => {\n        event.preventDefault();\n        onDelete();\n      }\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"gf-form\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    FormField,\n    {\n      label: showInternalLink ? \"Query\" : \"URL\",\n      labelWidth: 6,\n      inputEl: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.DataLinkInput,\n        {\n          placeholder: showInternalLink ? \"${__value.raw}\" : \"http://example.com/${__value.raw}\",\n          value: value.url || \"\",\n          onChange: (newValue) => onChange({\n            ...value,\n            url: newValue\n          }),\n          suggestions\n        }\n      ),\n      className: styles.urlField\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    FormField,\n    {\n      className: styles.urlDisplayLabelField,\n      inputWidth: null,\n      labelWidth: 7,\n      label: \"URL Label\",\n      type: \"text\",\n      value: value.urlDisplayLabel,\n      onChange: handleChange(\"urlDisplayLabel\"),\n      tooltip: \"Use to override the button label.\"\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.row }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    Switch,\n    {\n      labelClass: \"width-6\",\n      label: \"Internal link\",\n      checked: showInternalLink,\n      onChange: () => {\n        if (showInternalLink) {\n          onChange({\n            ...value,\n            datasourceUid: void 0\n          });\n        }\n        setShowInternalLink(!showInternalLink);\n      }\n    }\n  ), showInternalLink && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    app_features_datasources_components_picker_DataSourcePicker__WEBPACK_IMPORTED_MODULE_2__.DataSourcePicker,\n    {\n      tracing: true,\n      onChange: (ds) => {\n        onChange({\n          ...value,\n          datasourceUid: ds.uid\n        });\n      },\n      current: value.datasourceUid\n    }\n  )));\n};\nfunction useInternalLink(datasourceUid) {\n  const [showInternalLink, setShowInternalLink] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!!datasourceUid);\n  const previousUid = (0,react_use__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(datasourceUid);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!previousUid && datasourceUid && !showInternalLink) {\n      setShowInternalLink(true);\n    }\n    if (previousUid && !datasourceUid && showInternalLink) {\n      setShowInternalLink(false);\n    }\n  }, [previousUid, datasourceUid, showInternalLink]);\n  return [showInternalLink, setShowInternalLink];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbmZpZ3VyYXRpb24vRGF0YUxpbmsudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ2lEO0FBQ3pDO0FBR3NDO0FBQ2pDO0FBSWpDLE1BQU0sRUFBRSxXQUFXLE9BQU8sSUFBSSxvREFBVztBQUV6QyxNQUFNLFlBQVksMERBQWEsQ0FBQyxPQUFPO0FBQUEsRUFDckMsVUFBVSxpREFBRztBQUFIO0FBQUE7QUFBQSxFQUdWLFdBQVcsaURBQUc7QUFBSDtBQUFBO0FBQUEsRUFHWCxZQUFZLGlEQUFHO0FBQUg7QUFBQTtBQUFBLEVBR1osS0FBSyxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBLEVBSUwsVUFBVSxpREFBRztBQUFIO0FBQUE7QUFBQSxFQUdWLHNCQUFzQixpREFBRztBQUFIO0FBQUE7QUFHeEIsRUFBRTtBQVNLLE1BQU0sV0FBVyxDQUFDLFVBQWlCO0FBQ3hDLFFBQU0sRUFBRSxPQUFPLFVBQVUsVUFBVSxhQUFhLFVBQVUsSUFBSTtBQUM5RCxRQUFNLFNBQVMsVUFBVTtBQUN6QixRQUFNLENBQUMsa0JBQWtCLG1CQUFtQixJQUFJLGdCQUFnQixNQUFNLGFBQWE7QUFFbkYsUUFBTSxlQUFlLENBQUMsVUFBOEIsQ0FBQyxVQUErQztBQUNsRyxhQUFTO0FBQUEsTUFDUCxHQUFHO0FBQUEsTUFDSCxDQUFDLEtBQUssR0FBRyxNQUFNLGNBQWM7QUFBQSxJQUMvQixDQUFDO0FBQUEsRUFDSDtBQUVBLFNBQ0UsMkVBQUMsU0FBSSxhQUNILDJFQUFDLFNBQUksV0FBVyxPQUFPLFdBQVcsY0FDaEM7QUFBQSxJQUFDO0FBQUE7QUFBQSxNQUNDLFdBQVcsT0FBTztBQUFBLE1BQ2xCLFlBQVk7QUFBQSxNQUVaLFlBQVk7QUFBQSxNQUNaLE9BQU07QUFBQSxNQUNOLE1BQUs7QUFBQSxNQUNMLE9BQU8sTUFBTTtBQUFBLE1BQ2IsU0FBUztBQUFBLE1BQ1QsVUFBVSxhQUFhLE9BQU87QUFBQTtBQUFBLEVBQ2hDLEdBQ0E7QUFBQSxJQUFDLCtDQUFNO0FBQU47QUFBQSxNQUNDLFNBQVM7QUFBQSxNQUNULE9BQU07QUFBQSxNQUNOLE1BQUs7QUFBQSxNQUNMLFNBQVMsQ0FBQyxVQUFVO0FBQ2xCLGNBQU0sZUFBZTtBQUNyQixpQkFBUztBQUFBLE1BQ1g7QUFBQTtBQUFBLEVBQ0YsQ0FDRixHQUNBLDJFQUFDLFNBQUksV0FBVSxhQUNiO0FBQUEsSUFBQztBQUFBO0FBQUEsTUFDQyxPQUFPLG1CQUFtQixVQUFVO0FBQUEsTUFDcEMsWUFBWTtBQUFBLE1BQ1osU0FDRTtBQUFBLFFBQUMsc0RBQWE7QUFBYjtBQUFBLFVBQ0MsYUFBYSxtQkFBbUIsbUJBQW1CO0FBQUEsVUFDbkQsT0FBTyxNQUFNLE9BQU87QUFBQSxVQUNwQixVQUFVLENBQUMsYUFDVCxTQUFTO0FBQUEsWUFDUCxHQUFHO0FBQUEsWUFDSCxLQUFLO0FBQUEsVUFDUCxDQUFDO0FBQUEsVUFFSDtBQUFBO0FBQUEsTUFDRjtBQUFBLE1BRUYsV0FBVyxPQUFPO0FBQUE7QUFBQSxFQUNwQixHQUNBO0FBQUEsSUFBQztBQUFBO0FBQUEsTUFDQyxXQUFXLE9BQU87QUFBQSxNQUNsQixZQUFZO0FBQUEsTUFDWixZQUFZO0FBQUEsTUFDWixPQUFNO0FBQUEsTUFDTixNQUFLO0FBQUEsTUFDTCxPQUFPLE1BQU07QUFBQSxNQUNiLFVBQVUsYUFBYSxpQkFBaUI7QUFBQSxNQUN4QyxTQUFTO0FBQUE7QUFBQSxFQUNYLENBQ0YsR0FFQSwyRUFBQyxTQUFJLFdBQVcsT0FBTyxPQUNyQjtBQUFBLElBQUM7QUFBQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsVUFBVSxNQUFNO0FBQ2QsWUFBSSxrQkFBa0I7QUFDcEIsbUJBQVM7QUFBQSxZQUNQLEdBQUc7QUFBQSxZQUNILGVBQWU7QUFBQSxVQUNqQixDQUFDO0FBQUEsUUFDSDtBQUNBLDRCQUFvQixDQUFDLGdCQUFnQjtBQUFBLE1BQ3ZDO0FBQUE7QUFBQSxFQUNGLEdBRUMsb0JBQ0M7QUFBQSxJQUFDLHlHQUFnQjtBQUFoQjtBQUFBLE1BQ0MsU0FBUztBQUFBLE1BRVQsVUFBVSxDQUFDLE9BQW1DO0FBQzVDLGlCQUFTO0FBQUEsVUFDUCxHQUFHO0FBQUEsVUFDSCxlQUFlLEdBQUc7QUFBQSxRQUNwQixDQUFDO0FBQUEsTUFDSDtBQUFBLE1BQ0EsU0FBUyxNQUFNO0FBQUE7QUFBQSxFQUNqQixDQUVKLENBQ0Y7QUFFSjtBQUVBLFNBQVMsZ0JBQWdCLGVBQXNFO0FBQzdGLFFBQU0sQ0FBQyxrQkFBa0IsbUJBQW1CLElBQUksK0NBQVEsQ0FBVSxDQUFDLENBQUMsYUFBYTtBQUNqRixRQUFNLGNBQWMscURBQVcsQ0FBQyxhQUFhO0FBRzdDLGtEQUFTLENBQUMsTUFBTTtBQUNkLFFBQUksQ0FBQyxlQUFlLGlCQUFpQixDQUFDLGtCQUFrQjtBQUN0RCwwQkFBb0IsSUFBSTtBQUFBLElBQzFCO0FBQ0EsUUFBSSxlQUFlLENBQUMsaUJBQWlCLGtCQUFrQjtBQUNyRCwwQkFBb0IsS0FBSztBQUFBLElBQzNCO0FBQUEsRUFDRixHQUFHLENBQUMsYUFBYSxlQUFlLGdCQUFnQixDQUFDO0FBRWpELFNBQU8sQ0FBQyxrQkFBa0IsbUJBQW1CO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29uZmlndXJhdGlvbi9EYXRhTGluay50c3g/NjgxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0LCB7IERpc3BhdGNoLCBTZXRTdGF0ZUFjdGlvbiwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVByZXZpb3VzIH0gZnJvbSAncmVhY3QtdXNlJztcblxuaW1wb3J0IHsgRGF0YVNvdXJjZUluc3RhbmNlU2V0dGluZ3MsIFZhcmlhYmxlU3VnZ2VzdGlvbiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgQnV0dG9uLCBMZWdhY3lGb3JtcywgRGF0YUxpbmtJbnB1dCwgc3R5bGVzRmFjdG9yeSB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IERhdGFTb3VyY2VQaWNrZXIgfSBmcm9tICdhcHAvZmVhdHVyZXMvZGF0YXNvdXJjZXMvY29tcG9uZW50cy9waWNrZXIvRGF0YVNvdXJjZVBpY2tlcic7XG5cbmltcG9ydCB7IERhdGFMaW5rQ29uZmlnIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCB7IEZvcm1GaWVsZCwgU3dpdGNoIH0gPSBMZWdhY3lGb3JtcztcblxuY29uc3QgZ2V0U3R5bGVzID0gc3R5bGVzRmFjdG9yeSgoKSA9PiAoe1xuICBmaXJzdFJvdzogY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gIGAsXG4gIG5hbWVGaWVsZDogY3NzYFxuICAgIGZsZXg6IDI7XG4gIGAsXG4gIHJlZ2V4RmllbGQ6IGNzc2BcbiAgICBmbGV4OiAzO1xuICBgLFxuICByb3c6IGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBiYXNlbGluZTtcbiAgYCxcbiAgdXJsRmllbGQ6IGNzc2BcbiAgICBmbGV4OiAxO1xuICBgLFxuICB1cmxEaXNwbGF5TGFiZWxGaWVsZDogY3NzYFxuICAgIGZsZXg6IDE7XG4gIGAsXG59KSk7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHZhbHVlOiBEYXRhTGlua0NvbmZpZztcbiAgb25DaGFuZ2U6ICh2YWx1ZTogRGF0YUxpbmtDb25maWcpID0+IHZvaWQ7XG4gIG9uRGVsZXRlOiAoKSA9PiB2b2lkO1xuICBzdWdnZXN0aW9uczogVmFyaWFibGVTdWdnZXN0aW9uW107XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbn07XG5leHBvcnQgY29uc3QgRGF0YUxpbmsgPSAocHJvcHM6IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdmFsdWUsIG9uQ2hhbmdlLCBvbkRlbGV0ZSwgc3VnZ2VzdGlvbnMsIGNsYXNzTmFtZSB9ID0gcHJvcHM7XG4gIGNvbnN0IHN0eWxlcyA9IGdldFN0eWxlcygpO1xuICBjb25zdCBbc2hvd0ludGVybmFsTGluaywgc2V0U2hvd0ludGVybmFsTGlua10gPSB1c2VJbnRlcm5hbExpbmsodmFsdWUuZGF0YXNvdXJjZVVpZCk7XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGZpZWxkOiBrZXlvZiB0eXBlb2YgdmFsdWUpID0+IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBvbkNoYW5nZSh7XG4gICAgICAuLi52YWx1ZSxcbiAgICAgIFtmaWVsZF06IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZmlyc3RSb3cgKyAnIGdmLWZvcm0nfT5cbiAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLm5hbWVGaWVsZH1cbiAgICAgICAgICBsYWJlbFdpZHRoPXs2fVxuICAgICAgICAgIC8vIEEgYml0IG9mIGEgaGFjayB0byBwcmV2ZW50IHVzaW5nIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSB3aWR0aCBmcm9tIEZvcm1GaWVsZFxuICAgICAgICAgIGlucHV0V2lkdGg9e251bGx9XG4gICAgICAgICAgbGFiZWw9XCJGaWVsZFwiXG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHZhbHVlPXt2YWx1ZS5maWVsZH1cbiAgICAgICAgICB0b29sdGlwPXsnQ2FuIGJlIGV4YWN0IGZpZWxkIG5hbWUgb3IgYSByZWdleCBwYXR0ZXJuIHRoYXQgd2lsbCBtYXRjaCBvbiB0aGUgZmllbGQgbmFtZS4nfVxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2UoJ2ZpZWxkJyl9XG4gICAgICAgIC8+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB2YXJpYW50PXsnZGVzdHJ1Y3RpdmUnfVxuICAgICAgICAgIHRpdGxlPVwiUmVtb3ZlIGZpZWxkXCJcbiAgICAgICAgICBpY29uPVwidGltZXNcIlxuICAgICAgICAgIG9uQ2xpY2s9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIG9uRGVsZXRlKCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZi1mb3JtXCI+XG4gICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICBsYWJlbD17c2hvd0ludGVybmFsTGluayA/ICdRdWVyeScgOiAnVVJMJ31cbiAgICAgICAgICBsYWJlbFdpZHRoPXs2fVxuICAgICAgICAgIGlucHV0RWw9e1xuICAgICAgICAgICAgPERhdGFMaW5rSW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3Nob3dJbnRlcm5hbExpbmsgPyAnJHtfX3ZhbHVlLnJhd30nIDogJ2h0dHA6Ly9leGFtcGxlLmNvbS8ke19fdmFsdWUucmF3fSd9XG4gICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZS51cmwgfHwgJyd9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsobmV3VmFsdWUpID0+XG4gICAgICAgICAgICAgICAgb25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICAgICAgICB1cmw6IG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM9e3N1Z2dlc3Rpb25zfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMudXJsRmllbGR9XG4gICAgICAgIC8+XG4gICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy51cmxEaXNwbGF5TGFiZWxGaWVsZH1cbiAgICAgICAgICBpbnB1dFdpZHRoPXtudWxsfVxuICAgICAgICAgIGxhYmVsV2lkdGg9ezd9XG4gICAgICAgICAgbGFiZWw9XCJVUkwgTGFiZWxcIlxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICB2YWx1ZT17dmFsdWUudXJsRGlzcGxheUxhYmVsfVxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2UoJ3VybERpc3BsYXlMYWJlbCcpfVxuICAgICAgICAgIHRvb2x0aXA9eydVc2UgdG8gb3ZlcnJpZGUgdGhlIGJ1dHRvbiBsYWJlbC4nfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucm93fT5cbiAgICAgICAgPFN3aXRjaFxuICAgICAgICAgIGxhYmVsQ2xhc3M9eyd3aWR0aC02J31cbiAgICAgICAgICBsYWJlbD1cIkludGVybmFsIGxpbmtcIlxuICAgICAgICAgIGNoZWNrZWQ9e3Nob3dJbnRlcm5hbExpbmt9XG4gICAgICAgICAgb25DaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgIGlmIChzaG93SW50ZXJuYWxMaW5rKSB7XG4gICAgICAgICAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgICAgICAgICBkYXRhc291cmNlVWlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0U2hvd0ludGVybmFsTGluayghc2hvd0ludGVybmFsTGluayk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cblxuICAgICAgICB7c2hvd0ludGVybmFsTGluayAmJiAoXG4gICAgICAgICAgPERhdGFTb3VyY2VQaWNrZXJcbiAgICAgICAgICAgIHRyYWNpbmc9e3RydWV9XG4gICAgICAgICAgICAvLyBVaWQgYW5kIHZhbHVlIHNob3VsZCBiZSBhbHdheXMgc2V0IGluIHRoZSBkYiBhbmQgc28gaW4gdGhlIGl0ZW1zLlxuICAgICAgICAgICAgb25DaGFuZ2U9eyhkczogRGF0YVNvdXJjZUluc3RhbmNlU2V0dGluZ3MpID0+IHtcbiAgICAgICAgICAgICAgb25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VVaWQ6IGRzLnVpZCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY3VycmVudD17dmFsdWUuZGF0YXNvdXJjZVVpZH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5mdW5jdGlvbiB1c2VJbnRlcm5hbExpbmsoZGF0YXNvdXJjZVVpZD86IHN0cmluZyk6IFtib29sZWFuLCBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxib29sZWFuPj5dIHtcbiAgY29uc3QgW3Nob3dJbnRlcm5hbExpbmssIHNldFNob3dJbnRlcm5hbExpbmtdID0gdXNlU3RhdGU8Ym9vbGVhbj4oISFkYXRhc291cmNlVWlkKTtcbiAgY29uc3QgcHJldmlvdXNVaWQgPSB1c2VQcmV2aW91cyhkYXRhc291cmNlVWlkKTtcblxuICAvLyBGb3JjZSBpbnRlcm5hbCBsaW5rIHZpc2liaWxpdHkgY2hhbmdlIGlmIHVpZCBjaGFuZ2VkIG91dHNpZGUgb2YgdGhpcyBjb21wb25lbnQuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwcmV2aW91c1VpZCAmJiBkYXRhc291cmNlVWlkICYmICFzaG93SW50ZXJuYWxMaW5rKSB7XG4gICAgICBzZXRTaG93SW50ZXJuYWxMaW5rKHRydWUpO1xuICAgIH1cbiAgICBpZiAocHJldmlvdXNVaWQgJiYgIWRhdGFzb3VyY2VVaWQgJiYgc2hvd0ludGVybmFsTGluaykge1xuICAgICAgc2V0U2hvd0ludGVybmFsTGluayhmYWxzZSk7XG4gICAgfVxuICB9LCBbcHJldmlvdXNVaWQsIGRhdGFzb3VyY2VVaWQsIHNob3dJbnRlcm5hbExpbmtdKTtcblxuICByZXR1cm4gW3Nob3dJbnRlcm5hbExpbmssIHNldFNob3dJbnRlcm5hbExpbmtdO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/configuration/DataLink.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/configuration/DataLinks.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataLinks: () => (/* binding */ DataLinks)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/dataLinks.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataLink.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSubSection.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/components/ConfigDescriptionLink.tsx\");\n/* harmony import */ var _DataLink__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/configuration/DataLink.tsx\");\n\n\n\n\n\n\n\n\nconst getStyles = (theme) => {\n  return {\n    addButton: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-right: 10px;\n    `,\n    container: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-bottom: ${theme.spacing(2)};\n    `,\n    dataLink: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-bottom: ${theme.spacing(1)};\n    `\n  };\n};\nconst DataLinks = (props) => {\n  const { value, onChange } = props;\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.useStyles2)(getStyles);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_5__.ConfigSubSection,\n    {\n      title: \"Data links\",\n      description: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_2__.ConfigDescriptionLink,\n        {\n          description: \"Add links to existing fields. Links will be shown in log row details next to the field value.\",\n          suffix: \"elasticsearch/#data-links\",\n          feature: \"Elasticsearch data links\"\n        }\n      )\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.container }, value && value.length > 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"gf-form-group\" }, value.map((field, index) => {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _DataLink__WEBPACK_IMPORTED_MODULE_3__.DataLink,\n        {\n          className: styles.dataLink,\n          key: index,\n          value: field,\n          onChange: (newField) => {\n            const newDataLinks = [...value];\n            newDataLinks.splice(index, 1, newField);\n            onChange(newDataLinks);\n          },\n          onDelete: () => {\n            const newDataLinks = [...value];\n            newDataLinks.splice(index, 1);\n            onChange(newDataLinks);\n          },\n          suggestions: [\n            {\n              value: _grafana_data__WEBPACK_IMPORTED_MODULE_6__.DataLinkBuiltInVars.valueRaw,\n              label: \"Raw value\",\n              documentation: \"Raw value of the field\",\n              origin: _grafana_data__WEBPACK_IMPORTED_MODULE_7__.VariableOrigin.Value\n            }\n          ]\n        }\n      );\n    })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Button,\n      {\n        type: \"button\",\n        variant: \"secondary\",\n        className: styles.addButton,\n        icon: \"plus\",\n        onClick: (event) => {\n          event.preventDefault();\n          const newDataLinks = [...value || [], { field: \"\", url: \"\" }];\n          onChange(newDataLinks);\n        }\n      },\n      \"Add\"\n    ))\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbmZpZ3VyYXRpb24vRGF0YUxpbmtzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDRjtBQUVpRDtBQUNsQztBQUNFO0FBQ0c7QUFJYjtBQUV6QixNQUFNLFlBQVksQ0FBQyxVQUF5QjtBQUMxQyxTQUFPO0FBQUEsSUFDTCxXQUFXLGlEQUFHO0FBQUg7QUFBQTtBQUFBLElBR1gsV0FBVyxpREFBRztBQUFILHVCQUNRLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQSxJQUVsQyxVQUFVLGlEQUFHO0FBQUgsdUJBQ1MsTUFBTSxRQUFRLENBQUM7QUFBQTtBQUFBLEVBRXBDO0FBQ0Y7QUFNTyxNQUFNLFlBQVksQ0FBQyxVQUFpQjtBQUN6QyxRQUFNLEVBQUUsT0FBTyxTQUFTLElBQUk7QUFDNUIsUUFBTSxTQUFTLHVEQUFVLENBQUMsU0FBUztBQUVuQyxTQUNFO0FBQUEsSUFBQyxtRUFBZ0I7QUFBaEI7QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNOLGFBQ0U7QUFBQSxRQUFDLDRGQUFxQjtBQUFyQjtBQUFBLFVBQ0MsYUFBWTtBQUFBLFVBQ1osUUFBTztBQUFBLFVBQ1AsU0FBUTtBQUFBO0FBQUEsTUFDVjtBQUFBO0FBQUEsSUFHRiwyRUFBQyxTQUFJLFdBQVcsT0FBTyxhQUNwQixTQUFTLE1BQU0sU0FBUyxLQUN2QiwyRUFBQyxTQUFJLFdBQVUsbUJBQ1osTUFBTSxJQUFJLENBQUMsT0FBTyxVQUFVO0FBQzNCLGFBQ0U7QUFBQSxRQUFDLCtDQUFRO0FBQVI7QUFBQSxVQUNDLFdBQVcsT0FBTztBQUFBLFVBQ2xCLEtBQUs7QUFBQSxVQUNMLE9BQU87QUFBQSxVQUNQLFVBQVUsQ0FBQyxhQUFhO0FBQ3RCLGtCQUFNLGVBQWUsQ0FBQyxHQUFHLEtBQUs7QUFDOUIseUJBQWEsT0FBTyxPQUFPLEdBQUcsUUFBUTtBQUN0QyxxQkFBUyxZQUFZO0FBQUEsVUFDdkI7QUFBQSxVQUNBLFVBQVUsTUFBTTtBQUNkLGtCQUFNLGVBQWUsQ0FBQyxHQUFHLEtBQUs7QUFDOUIseUJBQWEsT0FBTyxPQUFPLENBQUM7QUFDNUIscUJBQVMsWUFBWTtBQUFBLFVBQ3ZCO0FBQUEsVUFDQSxhQUFhO0FBQUEsWUFDWDtBQUFBLGNBQ0UsT0FBTyw4REFBbUIsQ0FBQztBQUFBLGNBQzNCLE9BQU87QUFBQSxjQUNQLGVBQWU7QUFBQSxjQUNmLFFBQVEseURBQWMsQ0FBQztBQUFBLFlBQ3pCO0FBQUEsVUFDRjtBQUFBO0FBQUEsTUFDRjtBQUFBLElBRUosQ0FBQyxDQUNILEdBR0Y7QUFBQSxNQUFDLCtDQUFNO0FBQU47QUFBQSxRQUNDLE1BQUs7QUFBQSxRQUNMLFNBQVM7QUFBQSxRQUNULFdBQVcsT0FBTztBQUFBLFFBQ2xCLE1BQUs7QUFBQSxRQUNMLFNBQVMsQ0FBQyxVQUFVO0FBQ2xCLGdCQUFNLGVBQWU7QUFDckIsZ0JBQU0sZUFBZSxDQUFDLEdBQUksU0FBUyxDQUFDLEdBQUksRUFBRSxPQUFPLElBQUksS0FBSyxHQUFHLENBQUM7QUFDOUQsbUJBQVMsWUFBWTtBQUFBLFFBQ3ZCO0FBQUE7QUFBQSxNQUNEO0FBQUEsSUFFRCxDQUNGO0FBQUEsRUFDRjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvY29uZmlndXJhdGlvbi9EYXRhTGlua3MudHN4PzZhODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEdyYWZhbmFUaGVtZTIsIFZhcmlhYmxlT3JpZ2luLCBEYXRhTGlua0J1aWx0SW5WYXJzIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBDb25maWdTdWJTZWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IEJ1dHRvbiwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IENvbmZpZ0Rlc2NyaXB0aW9uTGluayB9IGZyb20gJ2FwcC9jb3JlL2NvbXBvbmVudHMvQ29uZmlnRGVzY3JpcHRpb25MaW5rJztcblxuaW1wb3J0IHsgRGF0YUxpbmtDb25maWcgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7IERhdGFMaW5rIH0gZnJvbSAnLi9EYXRhTGluayc7XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIGFkZEJ1dHRvbjogY3NzYFxuICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgIGAsXG4gICAgY29udGFpbmVyOiBjc3NgXG4gICAgICBtYXJnaW4tYm90dG9tOiAke3RoZW1lLnNwYWNpbmcoMil9O1xuICAgIGAsXG4gICAgZGF0YUxpbms6IGNzc2BcbiAgICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgYCxcbiAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIFByb3BzID0ge1xuICB2YWx1ZT86IERhdGFMaW5rQ29uZmlnW107XG4gIG9uQ2hhbmdlOiAodmFsdWU6IERhdGFMaW5rQ29uZmlnW10pID0+IHZvaWQ7XG59O1xuZXhwb3J0IGNvbnN0IERhdGFMaW5rcyA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgY29uc3QgeyB2YWx1ZSwgb25DaGFuZ2UgfSA9IHByb3BzO1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q29uZmlnU3ViU2VjdGlvblxuICAgICAgdGl0bGU9XCJEYXRhIGxpbmtzXCJcbiAgICAgIGRlc2NyaXB0aW9uPXtcbiAgICAgICAgPENvbmZpZ0Rlc2NyaXB0aW9uTGlua1xuICAgICAgICAgIGRlc2NyaXB0aW9uPVwiQWRkIGxpbmtzIHRvIGV4aXN0aW5nIGZpZWxkcy4gTGlua3Mgd2lsbCBiZSBzaG93biBpbiBsb2cgcm93IGRldGFpbHMgbmV4dCB0byB0aGUgZmllbGQgdmFsdWUuXCJcbiAgICAgICAgICBzdWZmaXg9XCJlbGFzdGljc2VhcmNoLyNkYXRhLWxpbmtzXCJcbiAgICAgICAgICBmZWF0dXJlPVwiRWxhc3RpY3NlYXJjaCBkYXRhIGxpbmtzXCJcbiAgICAgICAgLz5cbiAgICAgIH1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gICAgICAgIHt2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdmLWZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgIHt2YWx1ZS5tYXAoKGZpZWxkLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxEYXRhTGlua1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuZGF0YUxpbmt9XG4gICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpZWxkfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhuZXdGaWVsZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdEYXRhTGlua3MgPSBbLi4udmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICBuZXdEYXRhTGlua3Muc3BsaWNlKGluZGV4LCAxLCBuZXdGaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKG5ld0RhdGFMaW5rcyk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgb25EZWxldGU9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RGF0YUxpbmtzID0gWy4uLnZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgbmV3RGF0YUxpbmtzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKG5ld0RhdGFMaW5rcyk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM9e1tcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBEYXRhTGlua0J1aWx0SW5WYXJzLnZhbHVlUmF3LFxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnUmF3IHZhbHVlJyxcbiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudGF0aW9uOiAnUmF3IHZhbHVlIG9mIHRoZSBmaWVsZCcsXG4gICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBWYXJpYWJsZU9yaWdpbi5WYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICB2YXJpYW50PXsnc2Vjb25kYXJ5J31cbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5hZGRCdXR0b259XG4gICAgICAgICAgaWNvbj1cInBsdXNcIlxuICAgICAgICAgIG9uQ2xpY2s9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RhdGFMaW5rcyA9IFsuLi4odmFsdWUgfHwgW10pLCB7IGZpZWxkOiAnJywgdXJsOiAnJyB9XTtcbiAgICAgICAgICAgIG9uQ2hhbmdlKG5ld0RhdGFMaW5rcyk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIEFkZFxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvQ29uZmlnU3ViU2VjdGlvbj5cbiAgKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/configuration/DataLinks.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/configuration/ElasticDetails.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElasticDetails: () => (/* binding */ ElasticDetails),\n/* harmony export */   defaultMaxConcurrentShardRequests: () => (/* binding */ defaultMaxConcurrentShardRequests)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSubSection.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Switch/Switch.tsx\");\n/* harmony import */ var app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/components/ConfigDescriptionLink.tsx\");\n\n\n\n\n\nconst indexPatternTypes = [\n  { label: \"No pattern\", value: \"none\" },\n  { label: \"Hourly\", value: \"Hourly\", example: \"[logstash-]YYYY.MM.DD.HH\" },\n  { label: \"Daily\", value: \"Daily\", example: \"[logstash-]YYYY.MM.DD\" },\n  { label: \"Weekly\", value: \"Weekly\", example: \"[logstash-]GGGG.WW\" },\n  { label: \"Monthly\", value: \"Monthly\", example: \"[logstash-]YYYY.MM\" },\n  { label: \"Yearly\", value: \"Yearly\", example: \"[logstash-]YYYY\" }\n];\nconst ElasticDetails = ({ value, onChange }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_2__.ConfigSubSection,\n    {\n      title: \"Elasticsearch details\",\n      description: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n        app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_1__.ConfigDescriptionLink,\n        {\n          description: \"Specific settings for the Elasticsearch data source.\",\n          suffix: \"elasticsearch/#index-settings\",\n          feature: \"Elasticsearch details\"\n        }\n      )\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField, { label: \"Index name\", htmlFor: \"es_config_indexName\", labelWidth: 26 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n      {\n        id: \"es_config_indexName\",\n        value: value.jsonData.index ?? (value.database || \"\"),\n        onChange: indexChangeHandler(value, onChange),\n        width: 24,\n        placeholder: \"es-index-name\",\n        required: true\n      }\n    )),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField, { label: \"Pattern\", htmlFor: \"es_config_indexPattern\", labelWidth: 26 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Select,\n      {\n        inputId: \"es_config_indexPattern\",\n        value: indexPatternTypes.find(\n          (pattern) => pattern.value === (value.jsonData.interval === void 0 ? \"none\" : value.jsonData.interval)\n        ),\n        options: indexPatternTypes,\n        onChange: intervalHandler(value, onChange),\n        width: 24\n      }\n    )),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField, { label: \"Time field name\", htmlFor: \"es_config_timeField\", labelWidth: 26 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n      {\n        id: \"es_config_timeField\",\n        value: value.jsonData.timeField || \"\",\n        onChange: jsonDataChangeHandler(\"timeField\", value, onChange),\n        width: 24,\n        placeholder: \"@timestamp\",\n        required: true\n      }\n    )),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField, { label: \"Max concurrent Shard Requests\", htmlFor: \"es_config_shardRequests\", labelWidth: 26 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n      {\n        id: \"es_config_shardRequests\",\n        value: value.jsonData.maxConcurrentShardRequests || \"\",\n        onChange: jsonDataChangeHandler(\"maxConcurrentShardRequests\", value, onChange),\n        width: 24\n      }\n    )),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField,\n      {\n        label: \"Min time interval\",\n        htmlFor: \"es_config_minTimeInterval\",\n        labelWidth: 26,\n        tooltip: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, \"A lower limit for the auto group by time interval. Recommended to be set to write frequency, for example\", \" \", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"code\", null, \"1m\"), \" if your data is written every minute.\"),\n        error: \"Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s\",\n        invalid: !!value.jsonData.timeInterval && !/^\\d+(ms|[Mwdhmsy])$/.test(value.jsonData.timeInterval)\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n        {\n          id: \"es_config_minTimeInterval\",\n          value: value.jsonData.timeInterval || \"\",\n          onChange: jsonDataChangeHandler(\"timeInterval\", value, onChange),\n          width: 24,\n          placeholder: \"10s\"\n        }\n      )\n    ),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField, { label: \"X-Pack enabled\", labelWidth: 26 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.InlineSwitch,\n      {\n        id: \"es_config_xpackEnabled\",\n        value: value.jsonData.xpack || false,\n        onChange: jsonDataSwitchChangeHandler(\"xpack\", value, onChange)\n      }\n    )),\n    value.jsonData.xpack && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField, { label: \"Include Frozen Indices\", htmlFor: \"es_config_frozenIndices\", labelWidth: 26 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.InlineSwitch,\n      {\n        id: \"es_config_frozenIndices\",\n        value: value.jsonData.includeFrozen ?? false,\n        onChange: jsonDataSwitchChangeHandler(\"includeFrozen\", value, onChange)\n      }\n    ))\n  );\n};\nconst indexChangeHandler = (value, onChange) => (event) => {\n  onChange({\n    ...value,\n    database: \"\",\n    jsonData: {\n      ...value.jsonData,\n      index: event.currentTarget.value\n    }\n  });\n};\nconst jsonDataChangeHandler = (key, value, onChange) => (event) => {\n  onChange({\n    ...value,\n    jsonData: {\n      ...value.jsonData,\n      [key]: event.currentTarget.value\n    }\n  });\n};\nconst jsonDataSwitchChangeHandler = (key, value, onChange) => (event) => {\n  onChange({\n    ...value,\n    jsonData: {\n      ...value.jsonData,\n      [key]: event.currentTarget.checked\n    }\n  });\n};\nconst intervalHandler = (value, onChange) => (option) => {\n  const newInterval = option.value === \"none\" ? void 0 : option.value;\n  const currentIndex = value.jsonData.index ?? value.database;\n  if (!currentIndex || currentIndex.length === 0 || currentIndex.startsWith(\"[logstash-]\")) {\n    let newDatabase = \"\";\n    if (newInterval !== void 0) {\n      const pattern = indexPatternTypes.find((pattern2) => pattern2.value === newInterval);\n      if (pattern) {\n        newDatabase = pattern.example ?? \"\";\n      }\n    }\n    onChange({\n      ...value,\n      database: \"\",\n      jsonData: {\n        ...value.jsonData,\n        index: newDatabase,\n        interval: newInterval\n      }\n    });\n  } else {\n    onChange({\n      ...value,\n      jsonData: {\n        ...value.jsonData,\n        interval: newInterval\n      }\n    });\n  }\n};\nfunction defaultMaxConcurrentShardRequests() {\n  return 5;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbmZpZ3VyYXRpb24vRWxhc3RpY0RldGFpbHMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWtCO0FBR2U7QUFDd0I7QUFDbkI7QUFJdEMsTUFBTSxvQkFBK0Q7QUFBQSxFQUNuRSxFQUFFLE9BQU8sY0FBYyxPQUFPLE9BQU87QUFBQSxFQUNyQyxFQUFFLE9BQU8sVUFBVSxPQUFPLFVBQVUsU0FBUywyQkFBMkI7QUFBQSxFQUN4RSxFQUFFLE9BQU8sU0FBUyxPQUFPLFNBQVMsU0FBUyx3QkFBd0I7QUFBQSxFQUNuRSxFQUFFLE9BQU8sVUFBVSxPQUFPLFVBQVUsU0FBUyxxQkFBcUI7QUFBQSxFQUNsRSxFQUFFLE9BQU8sV0FBVyxPQUFPLFdBQVcsU0FBUyxxQkFBcUI7QUFBQSxFQUNwRSxFQUFFLE9BQU8sVUFBVSxPQUFPLFVBQVUsU0FBUyxrQkFBa0I7QUFDakU7QUFNTyxNQUFNLGlCQUFpQixDQUFDLEVBQUUsT0FBTyxTQUFTLE1BQWE7QUFDNUQsU0FDRTtBQUFBLElBQUMsbUVBQWdCO0FBQWhCO0FBQUEsTUFDQyxPQUFNO0FBQUEsTUFDTixhQUNFO0FBQUEsUUFBQyw0RkFBcUI7QUFBckI7QUFBQSxVQUNDLGFBQVk7QUFBQSxVQUNaLFFBQU87QUFBQSxVQUNQLFNBQVE7QUFBQTtBQUFBLE1BQ1Y7QUFBQTtBQUFBLElBR0YsMkVBQUMsb0RBQVcsSUFBQyxPQUFNLGNBQWEsU0FBUSx1QkFBc0IsWUFBWSxNQUN4RTtBQUFBLE1BQUMsOENBQUs7QUFBTDtBQUFBLFFBQ0MsSUFBRztBQUFBLFFBQ0gsT0FBTyxNQUFNLFNBQVMsVUFBVSxNQUFNLFlBQVk7QUFBQSxRQUNsRCxVQUFVLG1CQUFtQixPQUFPLFFBQVE7QUFBQSxRQUM1QyxPQUFPO0FBQUEsUUFDUCxhQUFZO0FBQUEsUUFDWixVQUFRO0FBQUE7QUFBQSxJQUNWLENBQ0Y7QUFBQSxJQUVBLDJFQUFDLG9EQUFX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aW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb25maWd1cmF0aW9uL0VsYXN0aWNEZXRhaWxzLnRzeD9mZGQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IERhdGFTb3VyY2VTZXR0aW5ncywgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBDb25maWdTdWJTZWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IElubGluZUZpZWxkLCBJbnB1dCwgU2VsZWN0LCBJbmxpbmVTd2l0Y2ggfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBDb25maWdEZXNjcmlwdGlvbkxpbmsgfSBmcm9tICdhcHAvY29yZS9jb21wb25lbnRzL0NvbmZpZ0Rlc2NyaXB0aW9uTGluayc7XG5cbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hPcHRpb25zLCBJbnRlcnZhbCB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgaW5kZXhQYXR0ZXJuVHlwZXM6IEFycmF5PFNlbGVjdGFibGVWYWx1ZTwnbm9uZScgfCBJbnRlcnZhbD4+ID0gW1xuICB7IGxhYmVsOiAnTm8gcGF0dGVybicsIHZhbHVlOiAnbm9uZScgfSxcbiAgeyBsYWJlbDogJ0hvdXJseScsIHZhbHVlOiAnSG91cmx5JywgZXhhbXBsZTogJ1tsb2dzdGFzaC1dWVlZWS5NTS5ERC5ISCcgfSxcbiAgeyBsYWJlbDogJ0RhaWx5JywgdmFsdWU6ICdEYWlseScsIGV4YW1wbGU6ICdbbG9nc3Rhc2gtXVlZWVkuTU0uREQnIH0sXG4gIHsgbGFiZWw6ICdXZWVrbHknLCB2YWx1ZTogJ1dlZWtseScsIGV4YW1wbGU6ICdbbG9nc3Rhc2gtXUdHR0cuV1cnIH0sXG4gIHsgbGFiZWw6ICdNb250aGx5JywgdmFsdWU6ICdNb250aGx5JywgZXhhbXBsZTogJ1tsb2dzdGFzaC1dWVlZWS5NTScgfSxcbiAgeyBsYWJlbDogJ1llYXJseScsIHZhbHVlOiAnWWVhcmx5JywgZXhhbXBsZTogJ1tsb2dzdGFzaC1dWVlZWScgfSxcbl07XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHZhbHVlOiBEYXRhU291cmNlU2V0dGluZ3M8RWxhc3RpY3NlYXJjaE9wdGlvbnM+O1xuICBvbkNoYW5nZTogKHZhbHVlOiBEYXRhU291cmNlU2V0dGluZ3M8RWxhc3RpY3NlYXJjaE9wdGlvbnM+KSA9PiB2b2lkO1xufTtcbmV4cG9ydCBjb25zdCBFbGFzdGljRGV0YWlscyA9ICh7IHZhbHVlLCBvbkNoYW5nZSB9OiBQcm9wcykgPT4ge1xuICByZXR1cm4gKFxuICAgIDxDb25maWdTdWJTZWN0aW9uXG4gICAgICB0aXRsZT1cIkVsYXN0aWNzZWFyY2ggZGV0YWlsc1wiXG4gICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgIDxDb25maWdEZXNjcmlwdGlvbkxpbmtcbiAgICAgICAgICBkZXNjcmlwdGlvbj1cIlNwZWNpZmljIHNldHRpbmdzIGZvciB0aGUgRWxhc3RpY3NlYXJjaCBkYXRhIHNvdXJjZS5cIlxuICAgICAgICAgIHN1ZmZpeD1cImVsYXN0aWNzZWFyY2gvI2luZGV4LXNldHRpbmdzXCJcbiAgICAgICAgICBmZWF0dXJlPVwiRWxhc3RpY3NlYXJjaCBkZXRhaWxzXCJcbiAgICAgICAgLz5cbiAgICAgIH1cbiAgICA+XG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJJbmRleCBuYW1lXCIgaHRtbEZvcj1cImVzX2NvbmZpZ19pbmRleE5hbWVcIiBsYWJlbFdpZHRoPXsyNn0+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPVwiZXNfY29uZmlnX2luZGV4TmFtZVwiXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlLmpzb25EYXRhLmluZGV4ID8/ICh2YWx1ZS5kYXRhYmFzZSB8fCAnJyl9XG4gICAgICAgICAgb25DaGFuZ2U9e2luZGV4Q2hhbmdlSGFuZGxlcih2YWx1ZSwgb25DaGFuZ2UpfVxuICAgICAgICAgIHdpZHRoPXsyNH1cbiAgICAgICAgICBwbGFjZWhvbGRlcj1cImVzLWluZGV4LW5hbWVcIlxuICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgIC8+XG4gICAgICA8L0lubGluZUZpZWxkPlxuXG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJQYXR0ZXJuXCIgaHRtbEZvcj1cImVzX2NvbmZpZ19pbmRleFBhdHRlcm5cIiBsYWJlbFdpZHRoPXsyNn0+XG4gICAgICAgIDxTZWxlY3RcbiAgICAgICAgICBpbnB1dElkPVwiZXNfY29uZmlnX2luZGV4UGF0dGVyblwiXG4gICAgICAgICAgdmFsdWU9e2luZGV4UGF0dGVyblR5cGVzLmZpbmQoXG4gICAgICAgICAgICAocGF0dGVybikgPT4gcGF0dGVybi52YWx1ZSA9PT0gKHZhbHVlLmpzb25EYXRhLmludGVydmFsID09PSB1bmRlZmluZWQgPyAnbm9uZScgOiB2YWx1ZS5qc29uRGF0YS5pbnRlcnZhbClcbiAgICAgICAgICApfVxuICAgICAgICAgIG9wdGlvbnM9e2luZGV4UGF0dGVyblR5cGVzfVxuICAgICAgICAgIG9uQ2hhbmdlPXtpbnRlcnZhbEhhbmRsZXIodmFsdWUsIG9uQ2hhbmdlKX1cbiAgICAgICAgICB3aWR0aD17MjR9XG4gICAgICAgIC8+XG4gICAgICA8L0lubGluZUZpZWxkPlxuXG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJUaW1lIGZpZWxkIG5hbWVcIiBodG1sRm9yPVwiZXNfY29uZmlnX3RpbWVGaWVsZFwiIGxhYmVsV2lkdGg9ezI2fT5cbiAgICAgICAgPElucHV0XG4gICAgICAgICAgaWQ9XCJlc19jb25maWdfdGltZUZpZWxkXCJcbiAgICAgICAgICB2YWx1ZT17dmFsdWUuanNvbkRhdGEudGltZUZpZWxkIHx8ICcnfVxuICAgICAgICAgIG9uQ2hhbmdlPXtqc29uRGF0YUNoYW5nZUhhbmRsZXIoJ3RpbWVGaWVsZCcsIHZhbHVlLCBvbkNoYW5nZSl9XG4gICAgICAgICAgd2lkdGg9ezI0fVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQHRpbWVzdGFtcFwiXG4gICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIk1heCBjb25jdXJyZW50IFNoYXJkIFJlcXVlc3RzXCIgaHRtbEZvcj1cImVzX2NvbmZpZ19zaGFyZFJlcXVlc3RzXCIgbGFiZWxXaWR0aD17MjZ9PlxuICAgICAgICA8SW5wdXRcbiAgICAgICAgICBpZD1cImVzX2NvbmZpZ19zaGFyZFJlcXVlc3RzXCJcbiAgICAgICAgICB2YWx1ZT17dmFsdWUuanNvbkRhdGEubWF4Q29uY3VycmVudFNoYXJkUmVxdWVzdHMgfHwgJyd9XG4gICAgICAgICAgb25DaGFuZ2U9e2pzb25EYXRhQ2hhbmdlSGFuZGxlcignbWF4Q29uY3VycmVudFNoYXJkUmVxdWVzdHMnLCB2YWx1ZSwgb25DaGFuZ2UpfVxuICAgICAgICAgIHdpZHRoPXsyNH1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgIDxJbmxpbmVGaWVsZFxuICAgICAgICBsYWJlbD1cIk1pbiB0aW1lIGludGVydmFsXCJcbiAgICAgICAgaHRtbEZvcj1cImVzX2NvbmZpZ19taW5UaW1lSW50ZXJ2YWxcIlxuICAgICAgICBsYWJlbFdpZHRoPXsyNn1cbiAgICAgICAgdG9vbHRpcD17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIEEgbG93ZXIgbGltaXQgZm9yIHRoZSBhdXRvIGdyb3VwIGJ5IHRpbWUgaW50ZXJ2YWwuIFJlY29tbWVuZGVkIHRvIGJlIHNldCB0byB3cml0ZSBmcmVxdWVuY3ksIGZvciBleGFtcGxleycgJ31cbiAgICAgICAgICAgIDxjb2RlPjFtPC9jb2RlPiBpZiB5b3VyIGRhdGEgaXMgd3JpdHRlbiBldmVyeSBtaW51dGUuXG4gICAgICAgICAgPC8+XG4gICAgICAgIH1cbiAgICAgICAgZXJyb3I9XCJWYWx1ZSBpcyBub3QgdmFsaWQsIHlvdSBjYW4gdXNlIG51bWJlciB3aXRoIHRpbWUgdW5pdCBzcGVjaWZpZXI6IHksIE0sIHcsIGQsIGgsIG0sIHNcIlxuICAgICAgICBpbnZhbGlkPXshIXZhbHVlLmpzb25EYXRhLnRpbWVJbnRlcnZhbCAmJiAhL15cXGQrKG1zfFtNd2RobXN5XSkkLy50ZXN0KHZhbHVlLmpzb25EYXRhLnRpbWVJbnRlcnZhbCl9XG4gICAgICA+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPVwiZXNfY29uZmlnX21pblRpbWVJbnRlcnZhbFwiXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlLmpzb25EYXRhLnRpbWVJbnRlcnZhbCB8fCAnJ31cbiAgICAgICAgICBvbkNoYW5nZT17anNvbkRhdGFDaGFuZ2VIYW5kbGVyKCd0aW1lSW50ZXJ2YWwnLCB2YWx1ZSwgb25DaGFuZ2UpfVxuICAgICAgICAgIHdpZHRoPXsyNH1cbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIjEwc1wiXG4gICAgICAgIC8+XG4gICAgICA8L0lubGluZUZpZWxkPlxuXG4gICAgICA8SW5saW5lRmllbGQgbGFiZWw9XCJYLVBhY2sgZW5hYmxlZFwiIGxhYmVsV2lkdGg9ezI2fT5cbiAgICAgICAgPElubGluZVN3aXRjaFxuICAgICAgICAgIGlkPVwiZXNfY29uZmlnX3hwYWNrRW5hYmxlZFwiXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlLmpzb25EYXRhLnhwYWNrIHx8IGZhbHNlfVxuICAgICAgICAgIG9uQ2hhbmdlPXtqc29uRGF0YVN3aXRjaENoYW5nZUhhbmRsZXIoJ3hwYWNrJywgdmFsdWUsIG9uQ2hhbmdlKX1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG5cbiAgICAgIHt2YWx1ZS5qc29uRGF0YS54cGFjayAmJiAoXG4gICAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIkluY2x1ZGUgRnJvemVuIEluZGljZXNcIiBodG1sRm9yPVwiZXNfY29uZmlnX2Zyb3plbkluZGljZXNcIiBsYWJlbFdpZHRoPXsyNn0+XG4gICAgICAgICAgPElubGluZVN3aXRjaFxuICAgICAgICAgICAgaWQ9XCJlc19jb25maWdfZnJvemVuSW5kaWNlc1wiXG4gICAgICAgICAgICB2YWx1ZT17dmFsdWUuanNvbkRhdGEuaW5jbHVkZUZyb3plbiA/PyBmYWxzZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtqc29uRGF0YVN3aXRjaENoYW5nZUhhbmRsZXIoJ2luY2x1ZGVGcm96ZW4nLCB2YWx1ZSwgb25DaGFuZ2UpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgICApfVxuICAgIDwvQ29uZmlnU3ViU2VjdGlvbj5cbiAgKTtcbn07XG5cbmNvbnN0IGluZGV4Q2hhbmdlSGFuZGxlciA9XG4gICh2YWx1ZTogUHJvcHNbJ3ZhbHVlJ10sIG9uQ2hhbmdlOiBQcm9wc1snb25DaGFuZ2UnXSkgPT5cbiAgKGV2ZW50OiBSZWFjdC5TeW50aGV0aWNFdmVudDxIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgb25DaGFuZ2Uoe1xuICAgICAgLi4udmFsdWUsXG4gICAgICBkYXRhYmFzZTogJycsXG4gICAgICBqc29uRGF0YToge1xuICAgICAgICAuLi52YWx1ZS5qc29uRGF0YSxcbiAgICAgICAgaW5kZXg6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xuXG4vLyBUT0RPOiBVc2UgY2hhbmdlIGhhbmRsZXJzIGZyb20gQGdyYWZhbmEvZGF0YVxuY29uc3QganNvbkRhdGFDaGFuZ2VIYW5kbGVyID1cbiAgKGtleToga2V5b2YgRWxhc3RpY3NlYXJjaE9wdGlvbnMsIHZhbHVlOiBQcm9wc1sndmFsdWUnXSwgb25DaGFuZ2U6IFByb3BzWydvbkNoYW5nZSddKSA9PlxuICAoZXZlbnQ6IFJlYWN0LlN5bnRoZXRpY0V2ZW50PEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICBvbkNoYW5nZSh7XG4gICAgICAuLi52YWx1ZSxcbiAgICAgIGpzb25EYXRhOiB7XG4gICAgICAgIC4uLnZhbHVlLmpzb25EYXRhLFxuICAgICAgICBba2V5XTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH07XG5cbmNvbnN0IGpzb25EYXRhU3dpdGNoQ2hhbmdlSGFuZGxlciA9XG4gIChrZXk6IGtleW9mIEVsYXN0aWNzZWFyY2hPcHRpb25zLCB2YWx1ZTogUHJvcHNbJ3ZhbHVlJ10sIG9uQ2hhbmdlOiBQcm9wc1snb25DaGFuZ2UnXSkgPT5cbiAgKGV2ZW50OiBSZWFjdC5TeW50aGV0aWNFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIG9uQ2hhbmdlKHtcbiAgICAgIC4uLnZhbHVlLFxuICAgICAganNvbkRhdGE6IHtcbiAgICAgICAgLi4udmFsdWUuanNvbkRhdGEsXG4gICAgICAgIFtrZXldOiBldmVudC5jdXJyZW50VGFyZ2V0LmNoZWNrZWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xuXG5jb25zdCBpbnRlcnZhbEhhbmRsZXIgPVxuICAodmFsdWU6IFByb3BzWyd2YWx1ZSddLCBvbkNoYW5nZTogUHJvcHNbJ29uQ2hhbmdlJ10pID0+IChvcHRpb246IFNlbGVjdGFibGVWYWx1ZTxJbnRlcnZhbCB8ICdub25lJz4pID0+IHtcbiAgICAvLyBJZiBvcHRpb24gdmFsdWUgaXMgdW5kZWZpbmVkIGl0IHdpbGwgc2VuZCBpdHMgbGFiZWwgaW5zdGVhZCBzbyB3ZSBoYXZlIHRvIGNvbnZlcnQgbWFkZSB1cCB2YWx1ZSB0byB1bmRlZmluZWQgaGVyZS5cbiAgICBjb25zdCBuZXdJbnRlcnZhbCA9IG9wdGlvbi52YWx1ZSA9PT0gJ25vbmUnID8gdW5kZWZpbmVkIDogb3B0aW9uLnZhbHVlO1xuXG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gdmFsdWUuanNvbkRhdGEuaW5kZXggPz8gdmFsdWUuZGF0YWJhc2U7XG4gICAgaWYgKCFjdXJyZW50SW5kZXggfHwgY3VycmVudEluZGV4Lmxlbmd0aCA9PT0gMCB8fCBjdXJyZW50SW5kZXguc3RhcnRzV2l0aCgnW2xvZ3N0YXNoLV0nKSkge1xuICAgICAgbGV0IG5ld0RhdGFiYXNlID0gJyc7XG5cbiAgICAgIGlmIChuZXdJbnRlcnZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSBpbmRleFBhdHRlcm5UeXBlcy5maW5kKChwYXR0ZXJuKSA9PiBwYXR0ZXJuLnZhbHVlID09PSBuZXdJbnRlcnZhbCk7XG5cbiAgICAgICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgICAgICBuZXdEYXRhYmFzZSA9IHBhdHRlcm4uZXhhbXBsZSA/PyAnJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBvbkNoYW5nZSh7XG4gICAgICAgIC4uLnZhbHVlLFxuICAgICAgICBkYXRhYmFzZTogJycsXG4gICAgICAgIGpzb25EYXRhOiB7XG4gICAgICAgICAgLi4udmFsdWUuanNvbkRhdGEsXG4gICAgICAgICAgaW5kZXg6IG5ld0RhdGFiYXNlLFxuICAgICAgICAgIGludGVydmFsOiBuZXdJbnRlcnZhbCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbkNoYW5nZSh7XG4gICAgICAgIC4uLnZhbHVlLFxuICAgICAgICBqc29uRGF0YToge1xuICAgICAgICAgIC4uLnZhbHVlLmpzb25EYXRhLFxuICAgICAgICAgIGludGVydmFsOiBuZXdJbnRlcnZhbCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRNYXhDb25jdXJyZW50U2hhcmRSZXF1ZXN0cygpIHtcbiAgcmV0dXJuIDU7XG59XG4iXSwibmFtZXMiOlsicGF0dGVybiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/configuration/ElasticDetails.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/configuration/LogsConfig.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogsConfig: () => (/* binding */ LogsConfig)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSubSection.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/components/ConfigDescriptionLink.tsx\");\n\n\n\n\n\nconst LogsConfig = (props) => {\n  const { value, onChange } = props;\n  const changeHandler = (key) => (event) => {\n    onChange({\n      ...value,\n      [key]: event.currentTarget.value\n    });\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_2__.ConfigSubSection,\n    {\n      title: \"Logs\",\n      description: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n        app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_1__.ConfigDescriptionLink,\n        {\n          description: \"Configure which fields the data source uses for log messages and log levels.\",\n          suffix: \"elasticsearch/#logs\",\n          feature: \"Elasticsearch log fields\"\n        }\n      )\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField, { label: \"Message field name\", labelWidth: 22 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n      {\n        id: \"es_logs-config_logMessageField\",\n        value: value.logMessageField,\n        onChange: changeHandler(\"logMessageField\"),\n        placeholder: \"_source\",\n        width: 24\n      }\n    )),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineField, { label: \"Level field name\", labelWidth: 22 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Input,\n      {\n        id: \"es_logs-config_logLevelField\",\n        value: value.logLevelField,\n        onChange: changeHandler(\"logLevelField\"),\n        width: 24\n      }\n    ))\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbmZpZ3VyYXRpb24vTG9nc0NvbmZpZy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0I7QUFFZTtBQUNFO0FBQ0c7QUFRL0IsTUFBTSxhQUFhLENBQUMsVUFBaUI7QUFDMUMsUUFBTSxFQUFFLE9BQU8sU0FBUyxJQUFJO0FBQzVCLFFBQU0sZ0JBQ0osQ0FBQyxRQUFvQyxDQUFDLFVBQXNFO0FBQzFHLGFBQVM7QUFBQSxNQUNQLEdBQUc7QUFBQSxNQUNILENBQUMsR0FBRyxHQUFHLE1BQU0sY0FBYztBQUFBLElBQzdCLENBQUM7QUFBQSxFQUNIO0FBRUYsU0FDRTtBQUFBLElBQUMsbUVBQWdCO0FBQWhCO0FBQUEsTUFDQyxPQUFNO0FBQUEsTUFDTixhQUNFO0FBQUEsUUFBQyw0RkFBcUI7QUFBckI7QUFBQSxVQUNDLGFBQVk7QUFBQSxVQUNaLFFBQU87QUFBQSxVQUNQLFNBQVE7QUFBQTtBQUFBLE1BQ1Y7QUFBQTtBQUFBLElBR0YsMkVBQUMsb0RBQVcsSUFBQyxPQUFNLHNCQUFxQixZQUFZLE1BQ2xEO0FBQUEsTUFBQyw4Q0FBSztBQUFMO0FBQUEsUUFDQyxJQUFHO0FBQUEsUUFDSCxPQUFPLE1BQU07QUFBQSxRQUNiLFVBQVUsY0FBYyxpQkFBaUI7QUFBQSxRQUN6QyxhQUFZO0FBQUEsUUFDWixPQUFPO0FBQUE7QUFBQSxJQUNULENBQ0Y7QUFBQSxJQUVBLDJFQUFDLG9EQUFXLElBQUMsT0FBTSxvQkFBbUIsWUFBWSxNQUNoRDtBQUFBLE1BQUMsOENBQUs7QUFBTDtBQUFBLFFBQ0MsSUFBRztBQUFBLFFBQ0gsT0FBTyxNQUFNO0FBQUEsUUFDYixVQUFVLGNBQWMsZUFBZTtBQUFBLFFBQ3ZDLE9BQU87QUFBQTtBQUFBLElBQ1QsQ0FDRjtBQUFBLEVBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbmZpZ3VyYXRpb24vTG9nc0NvbmZpZy50c3g/MmIxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBDb25maWdTdWJTZWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IElucHV0LCBJbmxpbmVGaWVsZCB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IENvbmZpZ0Rlc2NyaXB0aW9uTGluayB9IGZyb20gJ2FwcC9jb3JlL2NvbXBvbmVudHMvQ29uZmlnRGVzY3JpcHRpb25MaW5rJztcblxuaW1wb3J0IHsgRWxhc3RpY3NlYXJjaE9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHZhbHVlOiBFbGFzdGljc2VhcmNoT3B0aW9ucztcbiAgb25DaGFuZ2U6ICh2YWx1ZTogRWxhc3RpY3NlYXJjaE9wdGlvbnMpID0+IHZvaWQ7XG59O1xuZXhwb3J0IGNvbnN0IExvZ3NDb25maWcgPSAocHJvcHM6IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdmFsdWUsIG9uQ2hhbmdlIH0gPSBwcm9wcztcbiAgY29uc3QgY2hhbmdlSGFuZGxlciA9XG4gICAgKGtleToga2V5b2YgRWxhc3RpY3NlYXJjaE9wdGlvbnMpID0+IChldmVudDogUmVhY3QuU3ludGhldGljRXZlbnQ8SFRNTElucHV0RWxlbWVudCB8IEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgICAgb25DaGFuZ2Uoe1xuICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgW2tleV06IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gIHJldHVybiAoXG4gICAgPENvbmZpZ1N1YlNlY3Rpb25cbiAgICAgIHRpdGxlPVwiTG9nc1wiXG4gICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgIDxDb25maWdEZXNjcmlwdGlvbkxpbmtcbiAgICAgICAgICBkZXNjcmlwdGlvbj1cIkNvbmZpZ3VyZSB3aGljaCBmaWVsZHMgdGhlIGRhdGEgc291cmNlIHVzZXMgZm9yIGxvZyBtZXNzYWdlcyBhbmQgbG9nIGxldmVscy5cIlxuICAgICAgICAgIHN1ZmZpeD1cImVsYXN0aWNzZWFyY2gvI2xvZ3NcIlxuICAgICAgICAgIGZlYXR1cmU9XCJFbGFzdGljc2VhcmNoIGxvZyBmaWVsZHNcIlxuICAgICAgICAvPlxuICAgICAgfVxuICAgID5cbiAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIk1lc3NhZ2UgZmllbGQgbmFtZVwiIGxhYmVsV2lkdGg9ezIyfT5cbiAgICAgICAgPElucHV0XG4gICAgICAgICAgaWQ9XCJlc19sb2dzLWNvbmZpZ19sb2dNZXNzYWdlRmllbGRcIlxuICAgICAgICAgIHZhbHVlPXt2YWx1ZS5sb2dNZXNzYWdlRmllbGR9XG4gICAgICAgICAgb25DaGFuZ2U9e2NoYW5nZUhhbmRsZXIoJ2xvZ01lc3NhZ2VGaWVsZCcpfVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiX3NvdXJjZVwiXG4gICAgICAgICAgd2lkdGg9ezI0fVxuICAgICAgICAvPlxuICAgICAgPC9JbmxpbmVGaWVsZD5cblxuICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiTGV2ZWwgZmllbGQgbmFtZVwiIGxhYmVsV2lkdGg9ezIyfT5cbiAgICAgICAgPElucHV0XG4gICAgICAgICAgaWQ9XCJlc19sb2dzLWNvbmZpZ19sb2dMZXZlbEZpZWxkXCJcbiAgICAgICAgICB2YWx1ZT17dmFsdWUubG9nTGV2ZWxGaWVsZH1cbiAgICAgICAgICBvbkNoYW5nZT17Y2hhbmdlSGFuZGxlcignbG9nTGV2ZWxGaWVsZCcpfVxuICAgICAgICAgIHdpZHRoPXsyNH1cbiAgICAgICAgLz5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgPC9Db25maWdTdWJTZWN0aW9uPlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/configuration/LogsConfig.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/configuration/utils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   coerceOptions: () => (/* binding */ coerceOptions),\n/* harmony export */   isValidOptions: () => (/* binding */ isValidOptions)\n/* harmony export */ });\n/* harmony import */ var _ElasticDetails__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/configuration/ElasticDetails.tsx\");\n\n\nconst coerceOptions = (options) => {\n  return {\n    ...options,\n    jsonData: {\n      ...options.jsonData,\n      timeField: options.jsonData.timeField || \"@timestamp\",\n      maxConcurrentShardRequests: options.jsonData.maxConcurrentShardRequests || (0,_ElasticDetails__WEBPACK_IMPORTED_MODULE_0__.defaultMaxConcurrentShardRequests)(),\n      logMessageField: options.jsonData.logMessageField || \"\",\n      logLevelField: options.jsonData.logLevelField || \"\",\n      includeFrozen: options.jsonData.includeFrozen ?? false\n    }\n  };\n};\nconst isValidOptions = (options) => {\n  return (\n    // timeField should not be empty or nullish\n    !!options.jsonData.timeField && // maxConcurrentShardRequests should be a number AND greater than 0\n    !!options.jsonData.maxConcurrentShardRequests && // message & level fields should be defined\n    options.jsonData.logMessageField !== void 0 && options.jsonData.logLevelField !== void 0\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2NvbmZpZ3VyYXRpb24vdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUlrRDtBQUUzQyxNQUFNLGdCQUFnQixDQUMzQixZQUNpRDtBQUNqRCxTQUFPO0FBQUEsSUFDTCxHQUFHO0FBQUEsSUFDSCxVQUFVO0FBQUEsTUFDUixHQUFHLFFBQVE7QUFBQSxNQUNYLFdBQVcsUUFBUSxTQUFTLGFBQWE7QUFBQSxNQUN6Qyw0QkFBNEIsUUFBUSxTQUFTLDhCQUE4QixrRkFBaUMsQ0FBQztBQUFBLE1BQzdHLGlCQUFpQixRQUFRLFNBQVMsbUJBQW1CO0FBQUEsTUFDckQsZUFBZSxRQUFRLFNBQVMsaUJBQWlCO0FBQUEsTUFDakQsZUFBZSxRQUFRLFNBQVMsaUJBQWlCO0FBQUEsSUFDbkQ7QUFBQSxFQUNGO0FBQ0Y7QUFFTyxNQUFNLGlCQUFpQixDQUFDLFlBQW1FO0FBQ2hHO0FBQUE7QUFBQSxJQUVFLENBQUMsQ0FBQyxRQUFRLFNBQVM7QUFBQSxJQUVuQixDQUFDLENBQUMsUUFBUSxTQUFTO0FBQUEsSUFFbkIsUUFBUSxTQUFTLG9CQUFvQixVQUNyQyxRQUFRLFNBQVMsa0JBQWtCO0FBQUE7QUFFdkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9jb25maWd1cmF0aW9uL3V0aWxzLnRzPzVkYzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YVNvdXJjZVNldHRpbmdzIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBkZWZhdWx0TWF4Q29uY3VycmVudFNoYXJkUmVxdWVzdHMgfSBmcm9tICcuL0VsYXN0aWNEZXRhaWxzJztcblxuZXhwb3J0IGNvbnN0IGNvZXJjZU9wdGlvbnMgPSAoXG4gIG9wdGlvbnM6IERhdGFTb3VyY2VTZXR0aW5nczxFbGFzdGljc2VhcmNoT3B0aW9ucywge30+XG4pOiBEYXRhU291cmNlU2V0dGluZ3M8RWxhc3RpY3NlYXJjaE9wdGlvbnMsIHt9PiA9PiB7XG4gIHJldHVybiB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBqc29uRGF0YToge1xuICAgICAgLi4ub3B0aW9ucy5qc29uRGF0YSxcbiAgICAgIHRpbWVGaWVsZDogb3B0aW9ucy5qc29uRGF0YS50aW1lRmllbGQgfHwgJ0B0aW1lc3RhbXAnLFxuICAgICAgbWF4Q29uY3VycmVudFNoYXJkUmVxdWVzdHM6IG9wdGlvbnMuanNvbkRhdGEubWF4Q29uY3VycmVudFNoYXJkUmVxdWVzdHMgfHwgZGVmYXVsdE1heENvbmN1cnJlbnRTaGFyZFJlcXVlc3RzKCksXG4gICAgICBsb2dNZXNzYWdlRmllbGQ6IG9wdGlvbnMuanNvbkRhdGEubG9nTWVzc2FnZUZpZWxkIHx8ICcnLFxuICAgICAgbG9nTGV2ZWxGaWVsZDogb3B0aW9ucy5qc29uRGF0YS5sb2dMZXZlbEZpZWxkIHx8ICcnLFxuICAgICAgaW5jbHVkZUZyb3plbjogb3B0aW9ucy5qc29uRGF0YS5pbmNsdWRlRnJvemVuID8/IGZhbHNlLFxuICAgIH0sXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgaXNWYWxpZE9wdGlvbnMgPSAob3B0aW9uczogRGF0YVNvdXJjZVNldHRpbmdzPEVsYXN0aWNzZWFyY2hPcHRpb25zLCB7fT4pOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIChcbiAgICAvLyB0aW1lRmllbGQgc2hvdWxkIG5vdCBiZSBlbXB0eSBvciBudWxsaXNoXG4gICAgISFvcHRpb25zLmpzb25EYXRhLnRpbWVGaWVsZCAmJlxuICAgIC8vIG1heENvbmN1cnJlbnRTaGFyZFJlcXVlc3RzIHNob3VsZCBiZSBhIG51bWJlciBBTkQgZ3JlYXRlciB0aGFuIDBcbiAgICAhIW9wdGlvbnMuanNvbkRhdGEubWF4Q29uY3VycmVudFNoYXJkUmVxdWVzdHMgJiZcbiAgICAvLyBtZXNzYWdlICYgbGV2ZWwgZmllbGRzIHNob3VsZCBiZSBkZWZpbmVkXG4gICAgb3B0aW9ucy5qc29uRGF0YS5sb2dNZXNzYWdlRmllbGQgIT09IHVuZGVmaW5lZCAmJlxuICAgIG9wdGlvbnMuanNvbkRhdGEubG9nTGV2ZWxGaWVsZCAhPT0gdW5kZWZpbmVkXG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/configuration/utils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/datasource.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElasticDatasource: () => (/* binding */ ElasticDatasource),\n/* harmony export */   REF_ID_STARTER_LOG_SAMPLE: () => (/* binding */ REF_ID_STARTER_LOG_SAMPLE),\n/* harmony export */   REF_ID_STARTER_LOG_VOLUME: () => (/* binding */ REF_ID_STARTER_LOG_VOLUME),\n/* harmony export */   enhanceDataFrameWithDataLinks: () => (/* binding */ enhanceDataFrameWithDataLinks)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/generate.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/skipWhile.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/throwIfEmpty.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/first.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/tap.js\");\n/* harmony import */ var semver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/semver-npm-7.5.4-c4ad957fcd-12d8ad952f.zip/node_modules/semver/index.js\");\n/* harmony import */ var semver__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(semver__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/logs.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/rangeutil.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/app.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/time.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/utils/DataSourceWithBackend.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/dataSourceSrv.ts\");\n/* harmony import */ var app_features_dashboard_services_TimeSrv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/dashboard/services/TimeSrv.ts\");\n/* harmony import */ var app_features_templating_template_srv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/templating/template_srv.ts\");\n/* harmony import */ var _features_logs_logsModel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/logs/logsModel.ts\");\n/* harmony import */ var _features_logs_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/logs/utils.ts\");\n/* harmony import */ var _IndexPattern__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/IndexPattern.ts\");\n/* harmony import */ var _LanguageProvider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/LanguageProvider.ts\");\n/* harmony import */ var _LegacyQueryRunner__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/LegacyQueryRunner.ts\");\n/* harmony import */ var _QueryBuilder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/QueryBuilder.ts\");\n/* harmony import */ var _components_QueryEditor_AnnotationQueryEditor__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/AnnotationQueryEditor.tsx\");\n/* harmony import */ var _components_QueryEditor_BucketAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _components_QueryEditor_BucketAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/utils.ts\");\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n/* harmony import */ var _guards__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/guards.ts\");\n/* harmony import */ var _modifyQuery__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/modifyQuery.ts\");\n/* harmony import */ var _tracking__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/tracking.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/utils.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst REF_ID_STARTER_LOG_VOLUME = \"log-volume-\";\nconst REF_ID_STARTER_LOG_SAMPLE = \"log-sample-\";\nconst ELASTIC_META_FIELDS = [\n  \"_index\",\n  \"_type\",\n  \"_id\",\n  \"_source\",\n  \"_size\",\n  \"_field_names\",\n  \"_ignored\",\n  \"_routing\",\n  \"_meta\"\n];\nclass ElasticDatasource extends _grafana_runtime__WEBPACK_IMPORTED_MODULE_19__.DataSourceWithBackend {\n  constructor(instanceSettings, templateSrv = (0,app_features_templating_template_srv__WEBPACK_IMPORTED_MODULE_3__.getTemplateSrv)()) {\n    super(instanceSettings);\n    this.templateSrv = templateSrv;\n    this.getLogRowContext = async (row, options) => {\n      const { enableElasticsearchBackendQuerying } = _grafana_runtime__WEBPACK_IMPORTED_MODULE_20__.config.featureToggles;\n      if (enableElasticsearchBackendQuerying) {\n        const contextRequest = this.makeLogContextDataRequest(row, options);\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.lastValueFrom)(\n          this.query(contextRequest).pipe(\n            (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.catchError)((err) => {\n              const error = {\n                message: \"Error during context query. Please check JS console logs.\",\n                status: err.status,\n                statusText: err.statusText\n              };\n              throw error;\n            })\n          )\n        );\n      } else {\n        return this.legacyQueryRunner.logContextQuery(row, options);\n      }\n    };\n    this.makeLogContextDataRequest = (row, options) => {\n      const direction = options?.direction || _grafana_data__WEBPACK_IMPORTED_MODULE_23__.LogRowContextQueryDirection.Backward;\n      const logQuery = {\n        type: \"logs\",\n        id: \"1\",\n        settings: {\n          limit: options?.limit ? options?.limit.toString() : \"10\",\n          // Sorting of results in the context query\n          sortDirection: direction === _grafana_data__WEBPACK_IMPORTED_MODULE_23__.LogRowContextQueryDirection.Backward ? \"desc\" : \"asc\",\n          // Used to get the next log lines before/after the current log line using sort field of selected log line\n          searchAfter: row.dataFrame.fields.find((f) => f.name === \"sort\")?.values[row.rowIndex] ?? [row.timeEpochMs]\n        }\n      };\n      const query = {\n        refId: `log-context-${row.dataFrame.refId}-${direction}`,\n        metrics: [logQuery],\n        query: \"\"\n      };\n      const timeRange = createContextTimeRange(row.timeEpochMs, direction, this.intervalPattern);\n      const range = {\n        from: timeRange.from,\n        to: timeRange.to,\n        raw: timeRange\n      };\n      const interval = _grafana_data__WEBPACK_IMPORTED_MODULE_24__.calculateInterval(range, 1);\n      const contextRequest = {\n        requestId: `log-context-request-${row.dataFrame.refId}-${options?.direction}`,\n        targets: [query],\n        interval: interval.interval,\n        intervalMs: interval.intervalMs,\n        range,\n        scopedVars: {},\n        timezone: \"UTC\",\n        app: _grafana_data__WEBPACK_IMPORTED_MODULE_25__.CoreApp.Explore,\n        startTime: Date.now(),\n        hideFromInspector: true\n      };\n      return contextRequest;\n    };\n    this.basicAuth = instanceSettings.basicAuth;\n    this.withCredentials = instanceSettings.withCredentials;\n    this.url = instanceSettings.url;\n    this.name = instanceSettings.name;\n    this.isProxyAccess = instanceSettings.access === \"proxy\";\n    const settingsData = instanceSettings.jsonData || {};\n    this.index = settingsData.index ?? instanceSettings.database ?? \"\";\n    this.timeField = settingsData.timeField;\n    this.xpack = Boolean(settingsData.xpack);\n    this.indexPattern = new _IndexPattern__WEBPACK_IMPORTED_MODULE_6__.IndexPattern(this.index, settingsData.interval);\n    this.intervalPattern = settingsData.interval;\n    this.interval = settingsData.timeInterval;\n    this.maxConcurrentShardRequests = settingsData.maxConcurrentShardRequests;\n    this.queryBuilder = new _QueryBuilder__WEBPACK_IMPORTED_MODULE_9__.ElasticQueryBuilder({\n      timeField: this.timeField\n    });\n    this.logMessageField = settingsData.logMessageField || \"\";\n    this.logLevelField = settingsData.logLevelField || \"\";\n    this.dataLinks = settingsData.dataLinks || [];\n    this.includeFrozen = settingsData.includeFrozen ?? false;\n    this.databaseVersion = null;\n    this.annotations = {\n      QueryEditor: _components_QueryEditor_AnnotationQueryEditor__WEBPACK_IMPORTED_MODULE_10__.ElasticsearchAnnotationsQueryEditor\n    };\n    if (this.logMessageField === \"\") {\n      this.logMessageField = void 0;\n    }\n    if (this.logLevelField === \"\") {\n      this.logLevelField = void 0;\n    }\n    this.languageProvider = new _LanguageProvider__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this);\n    this.timeSrv = (0,app_features_dashboard_services_TimeSrv__WEBPACK_IMPORTED_MODULE_2__.getTimeSrv)();\n    this.legacyQueryRunner = new _LegacyQueryRunner__WEBPACK_IMPORTED_MODULE_8__.LegacyQueryRunner(this, this.templateSrv);\n  }\n  getResourceRequest(path, params, options) {\n    return this.getResource(path, params, options);\n  }\n  postResourceRequest(path, data, options) {\n    const resourceOptions = options ?? {};\n    resourceOptions.headers = resourceOptions.headers ?? {};\n    resourceOptions.headers[\"content-type\"] = \"application/x-ndjson\";\n    return this.postResource(path, data, resourceOptions);\n  }\n  async importFromAbstractQueries(abstractQueries) {\n    return abstractQueries.map((abstractQuery) => this.languageProvider.importFromAbstractQuery(abstractQuery));\n  }\n  /**\n   * Sends a GET request to the specified url on the newest matching and available index.\n   *\n   * When multiple indices span the provided time range, the request is sent starting from the newest index,\n   * and then going backwards until an index is found.\n   *\n   * @param url the url to query the index on, for example `/_mapping`.\n   */\n  requestAllIndices(url, range = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_26__.getDefaultTimeRange)()) {\n    let indexList = this.indexPattern.getIndexList(range.from, range.to);\n    if (!Array.isArray(indexList)) {\n      indexList = [this.indexPattern.getIndexForToday()];\n    }\n    const indexUrlList = indexList.map((index) => index + url);\n    const maxTraversals = 7;\n    const listLen = indexUrlList.length;\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_27__.generate)({\n      initialState: 0,\n      condition: (i) => i < Math.min(listLen, maxTraversals),\n      iterate: (i) => i + 1\n    }).pipe(\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_28__.mergeMap)((index) => {\n        const path = indexUrlList[listLen - index - 1];\n        const requestObservable = _grafana_runtime__WEBPACK_IMPORTED_MODULE_20__.config.featureToggles.enableElasticsearchBackendQuerying ? (0,rxjs__WEBPACK_IMPORTED_MODULE_29__.from)(this.getResource(path)) : this.legacyQueryRunner.request(\"GET\", path);\n        return requestObservable.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.catchError)((err) => (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)({ err })));\n      }),\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_31__.skipWhile)((resp) => resp?.err?.status === 404),\n      // skip all requests that fail because missing Elastic index\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_32__.throwIfEmpty)(() => \"Could not find an available index for this time range.\"),\n      // when i === Math.min(listLen, maxTraversals) generate will complete but without emitting any values which means we didn't find a valid index\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.first)(),\n      // take the first value that isn't skipped\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_34__.map)((resp) => {\n        if (resp.err) {\n          throw resp.err;\n        }\n        return resp;\n      })\n    );\n  }\n  annotationQuery(options) {\n    const payload = this.prepareAnnotationRequest(options);\n    (0,_tracking__WEBPACK_IMPORTED_MODULE_17__.trackAnnotationQuery)(options.annotation);\n    const annotationObservable = _grafana_runtime__WEBPACK_IMPORTED_MODULE_20__.config.featureToggles.enableElasticsearchBackendQuerying ? (\n      // TODO: We should migrate this to use query and not resource call\n      // The plan is to look at this when we start to work on raw query editor for ES\n      // as we will have to explore how to handle any query\n      (0,rxjs__WEBPACK_IMPORTED_MODULE_29__.from)(this.postResourceRequest(\"_msearch\", payload))\n    ) : this.legacyQueryRunner.request(\"POST\", \"_msearch\", payload);\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.lastValueFrom)(\n      annotationObservable.pipe(\n        (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_34__.map)((res) => {\n          const hits = res.responses[0].hits.hits;\n          return this.processHitsToAnnotationEvents(options.annotation, hits);\n        })\n      )\n    );\n  }\n  prepareAnnotationRequest(options) {\n    const annotation = options.annotation;\n    const timeField = annotation.timeField || \"@timestamp\";\n    const timeEndField = annotation.timeEndField || null;\n    const queryString = annotation.query ?? annotation.target?.query ?? \"\";\n    const dateRanges = [];\n    const rangeStart = {};\n    rangeStart[timeField] = {\n      from: options.range.from.valueOf(),\n      to: options.range.to.valueOf(),\n      format: \"epoch_millis\"\n    };\n    dateRanges.push({ range: rangeStart });\n    if (timeEndField) {\n      const rangeEnd = {};\n      rangeEnd[timeEndField] = {\n        from: options.range.from.valueOf(),\n        to: options.range.to.valueOf(),\n        format: \"epoch_millis\"\n      };\n      dateRanges.push({ range: rangeEnd });\n    }\n    const queryInterpolated = this.interpolateLuceneQuery(queryString);\n    const query = {\n      bool: {\n        filter: [\n          {\n            bool: {\n              should: dateRanges,\n              minimum_should_match: 1\n            }\n          }\n        ]\n      }\n    };\n    if (queryInterpolated) {\n      query.bool.filter.push({\n        query_string: {\n          query: queryInterpolated\n        }\n      });\n    }\n    const data = {\n      query,\n      size: 1e4\n    };\n    const header = {\n      search_type: \"query_then_fetch\",\n      ignore_unavailable: true\n    };\n    if (annotation.index) {\n      header.index = annotation.index;\n    } else {\n      header.index = this.indexPattern.getIndexList(options.range.from, options.range.to);\n    }\n    const payload = JSON.stringify(header) + \"\\n\" + JSON.stringify(data) + \"\\n\";\n    return payload;\n  }\n  processHitsToAnnotationEvents(annotation, hits) {\n    const timeField = annotation.timeField || \"@timestamp\";\n    const timeEndField = annotation.timeEndField || null;\n    const textField = annotation.textField || \"tags\";\n    const tagsField = annotation.tagsField || null;\n    const list = [];\n    const getFieldFromSource = (source, fieldName) => {\n      if (!fieldName) {\n        return;\n      }\n      const fieldNames = fieldName.split(\".\");\n      let fieldValue = source;\n      for (let i = 0; i < fieldNames.length; i++) {\n        fieldValue = fieldValue[fieldNames[i]];\n        if (!fieldValue) {\n          return \"\";\n        }\n      }\n      return fieldValue;\n    };\n    for (let i = 0; i < hits.length; i++) {\n      const source = hits[i]._source;\n      let time = getFieldFromSource(source, timeField);\n      if (typeof hits[i].fields !== \"undefined\") {\n        const fields = hits[i].fields;\n        if (typeof fields === \"object\" && ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isString)(fields[timeField]) || (0,lodash__WEBPACK_IMPORTED_MODULE_0__.isNumber)(fields[timeField]))) {\n          time = fields[timeField];\n        }\n      }\n      const event = {\n        annotation,\n        time: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.toUtc)(time).valueOf(),\n        text: getFieldFromSource(source, textField)\n      };\n      if (timeEndField) {\n        const timeEnd = getFieldFromSource(source, timeEndField);\n        if (timeEnd) {\n          event.timeEnd = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.toUtc)(timeEnd).valueOf();\n        }\n      }\n      if (annotation.titleField) {\n        const title = getFieldFromSource(source, annotation.titleField);\n        if (title) {\n          event.text = title + \"\\n\" + event.text;\n        }\n      }\n      const tags = getFieldFromSource(source, tagsField);\n      if (typeof tags === \"string\") {\n        event.tags = tags.split(\",\");\n      } else {\n        event.tags = tags;\n      }\n      list.push(event);\n    }\n    return list;\n  }\n  interpolateLuceneQuery(queryString, scopedVars) {\n    return this.templateSrv.replace(queryString, scopedVars, \"lucene\");\n  }\n  interpolateVariablesInQueries(queries, scopedVars) {\n    return queries.map((q) => this.applyTemplateVariables(q, scopedVars));\n  }\n  async testDatasource() {\n    const dbVersion = await this.getDatabaseVersion(false);\n    const isSupported = dbVersion != null ? (0,_utils__WEBPACK_IMPORTED_MODULE_18__.isSupportedVersion)(dbVersion) : true;\n    const versionMessage = isSupported ? \"\" : `WARNING: ${_utils__WEBPACK_IMPORTED_MODULE_18__.unsupportedVersionMessage} `;\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.lastValueFrom)(\n      this.getFields([\"date\"]).pipe(\n        (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_28__.mergeMap)((dateFields) => {\n          const timeField = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.find)(dateFields, { text: this.timeField });\n          if (!timeField) {\n            return (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)({\n              status: \"error\",\n              message: \"No date field named \" + this.timeField + \" found\"\n            });\n          }\n          return (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)({ status: \"success\", message: `${versionMessage}Data source successfully connected.` });\n        }),\n        (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.catchError)((err) => {\n          const infoInParentheses = err.message ? ` (${err.message})` : \"\";\n          const message = `Unable to connect with Elasticsearch${infoInParentheses}. Please check the server logs for more details.`;\n          return (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)({ status: \"error\", message });\n        })\n      )\n    );\n  }\n  getQueryHeader(searchType, timeFrom, timeTo) {\n    const queryHeader = {\n      search_type: searchType,\n      ignore_unavailable: true,\n      index: this.indexPattern.getIndexList(timeFrom, timeTo)\n    };\n    return JSON.stringify(queryHeader);\n  }\n  getQueryDisplayText(query) {\n    const metricAggs = query.metrics;\n    const bucketAggs = query.bucketAggs;\n    let text = \"\";\n    if (query.query) {\n      text += \"Query: \" + query.query + \", \";\n    }\n    text += \"Metrics: \";\n    text += metricAggs?.reduce((acc, metric) => {\n      const metricConfig = _components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_14__.metricAggregationConfig[metric.type];\n      let text2 = metricConfig.label + \"(\";\n      if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_13__.isMetricAggregationWithField)(metric)) {\n        text2 += metric.field;\n      }\n      if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_13__.isPipelineAggregationWithMultipleBucketPaths)(metric)) {\n        text2 += (0,_utils__WEBPACK_IMPORTED_MODULE_18__.getScriptValue)(metric).replace(new RegExp(\"params.\", \"g\"), \"\");\n      }\n      text2 += \"), \";\n      return `${acc} ${text2}`;\n    }, \"\");\n    text += bucketAggs?.reduce((acc, bucketAgg, index) => {\n      const bucketConfig = _components_QueryEditor_BucketAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_12__.bucketAggregationConfig[bucketAgg.type];\n      let text2 = \"\";\n      if (index === 0) {\n        text2 += \" Group by: \";\n      }\n      text2 += bucketConfig.label + \"(\";\n      if ((0,_components_QueryEditor_BucketAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_11__.isBucketAggregationWithField)(bucketAgg)) {\n        text2 += bucketAgg.field;\n      }\n      return `${acc} ${text2}), `;\n    }, \"\");\n    if (query.alias) {\n      text += \"Alias: \" + query.alias;\n    }\n    return text;\n  }\n  showContextToggle() {\n    return true;\n  }\n  getDataProvider(type, request) {\n    if (!this.getSupportedSupplementaryQueryTypes().includes(type)) {\n      return void 0;\n    }\n    switch (type) {\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_23__.SupplementaryQueryType.LogsVolume:\n        return this.getLogsVolumeDataProvider(request);\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_23__.SupplementaryQueryType.LogsSample:\n        return this.getLogsSampleDataProvider(request);\n      default:\n        return void 0;\n    }\n  }\n  getSupportedSupplementaryQueryTypes() {\n    return [_grafana_data__WEBPACK_IMPORTED_MODULE_23__.SupplementaryQueryType.LogsVolume, _grafana_data__WEBPACK_IMPORTED_MODULE_23__.SupplementaryQueryType.LogsSample];\n  }\n  getSupplementaryQuery(options, query) {\n    if (!this.getSupportedSupplementaryQueryTypes().includes(options.type)) {\n      return void 0;\n    }\n    let isQuerySuitable = false;\n    switch (options.type) {\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_23__.SupplementaryQueryType.LogsVolume:\n        isQuerySuitable = !!(query.metrics?.length === 1 && query.metrics[0].type === \"logs\");\n        if (!isQuerySuitable) {\n          return void 0;\n        }\n        const bucketAggs = [];\n        const timeField = this.timeField ?? \"@timestamp\";\n        if (this.logLevelField) {\n          bucketAggs.push({\n            id: \"2\",\n            type: \"terms\",\n            settings: {\n              min_doc_count: \"0\",\n              size: \"0\",\n              order: \"desc\",\n              orderBy: \"_count\",\n              missing: _grafana_data__WEBPACK_IMPORTED_MODULE_23__.LogLevel.unknown\n            },\n            field: this.logLevelField\n          });\n        }\n        bucketAggs.push({\n          id: \"3\",\n          type: \"date_histogram\",\n          settings: {\n            interval: \"auto\",\n            min_doc_count: \"0\",\n            trimEdges: \"0\"\n          },\n          field: timeField\n        });\n        return {\n          refId: `${REF_ID_STARTER_LOG_VOLUME}${query.refId}`,\n          query: query.query,\n          metrics: [{ type: \"count\", id: \"1\" }],\n          timeField,\n          bucketAggs\n        };\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_23__.SupplementaryQueryType.LogsSample:\n        isQuerySuitable = (0,_utils__WEBPACK_IMPORTED_MODULE_18__.isTimeSeriesQuery)(query);\n        if (!isQuerySuitable) {\n          return void 0;\n        }\n        if (options.limit) {\n          return {\n            refId: `${REF_ID_STARTER_LOG_SAMPLE}${query.refId}`,\n            query: query.query,\n            metrics: [{ type: \"logs\", id: \"1\", settings: { limit: options.limit.toString() } }]\n          };\n        }\n        return {\n          refId: `${REF_ID_STARTER_LOG_SAMPLE}${query.refId}`,\n          query: query.query,\n          metrics: [{ type: \"logs\", id: \"1\" }]\n        };\n      default:\n        return void 0;\n    }\n  }\n  getLogsVolumeDataProvider(request) {\n    const logsVolumeRequest = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.cloneDeep)(request);\n    const targets = logsVolumeRequest.targets.map((target) => this.getSupplementaryQuery({ type: _grafana_data__WEBPACK_IMPORTED_MODULE_23__.SupplementaryQueryType.LogsVolume }, target)).filter((query) => !!query);\n    if (!targets.length) {\n      return void 0;\n    }\n    return (0,_features_logs_logsModel__WEBPACK_IMPORTED_MODULE_4__.queryLogsVolume)(\n      this,\n      { ...logsVolumeRequest, targets },\n      {\n        range: request.range,\n        targets: request.targets,\n        extractLevel\n      }\n    );\n  }\n  getLogsSampleDataProvider(request) {\n    const logsSampleRequest = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.cloneDeep)(request);\n    const targets = logsSampleRequest.targets;\n    const queries = targets.map((query) => {\n      return this.getSupplementaryQuery({ type: _grafana_data__WEBPACK_IMPORTED_MODULE_23__.SupplementaryQueryType.LogsSample, limit: 100 }, query);\n    });\n    const elasticQueries = queries.filter((query) => !!query);\n    if (!elasticQueries.length) {\n      return void 0;\n    }\n    return (0,_features_logs_logsModel__WEBPACK_IMPORTED_MODULE_4__.queryLogsSample)(this, { ...logsSampleRequest, targets: elasticQueries });\n  }\n  query(request) {\n    const { enableElasticsearchBackendQuerying } = _grafana_runtime__WEBPACK_IMPORTED_MODULE_20__.config.featureToggles;\n    if (enableElasticsearchBackendQuerying) {\n      const start = /* @__PURE__ */ new Date();\n      return super.query(request).pipe(\n        (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_36__.tap)((response) => (0,_tracking__WEBPACK_IMPORTED_MODULE_17__.trackQuery)(response, request, start)),\n        (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_34__.map)((response) => {\n          response.data.forEach((dataFrame) => {\n            enhanceDataFrameWithDataLinks(dataFrame, this.dataLinks);\n          });\n          return response;\n        })\n      );\n    }\n    return this.legacyQueryRunner.query(request);\n  }\n  filterQuery(query) {\n    if (query.hide) {\n      return false;\n    }\n    return true;\n  }\n  isMetadataField(fieldName) {\n    return ELASTIC_META_FIELDS.includes(fieldName);\n  }\n  // TODO: instead of being a string, this could be a custom type representing all the elastic types\n  // FIXME: This doesn't seem to return actual MetricFindValues, we should either change the return type\n  // or fix the implementation.\n  getFields(type, range) {\n    const typeMap = {\n      float: \"number\",\n      double: \"number\",\n      integer: \"number\",\n      long: \"number\",\n      date: \"date\",\n      date_nanos: \"date\",\n      string: \"string\",\n      text: \"string\",\n      scaled_float: \"number\",\n      nested: \"nested\",\n      histogram: \"number\"\n    };\n    return this.requestAllIndices(\"/_mapping\", range).pipe(\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_34__.map)((result) => {\n        const shouldAddField = (obj, key) => {\n          if (this.isMetadataField(key)) {\n            return false;\n          }\n          if (!type || type.length === 0) {\n            return true;\n          }\n          return type.includes(obj.type) || type.includes(typeMap[obj.type]);\n        };\n        const fieldNameParts = [];\n        const fields = {};\n        function getFieldsRecursively(obj) {\n          for (const key in obj) {\n            const subObj = obj[key];\n            if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isObject)(subObj.properties)) {\n              fieldNameParts.push(key);\n              getFieldsRecursively(subObj.properties);\n            }\n            if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isObject)(subObj.fields)) {\n              fieldNameParts.push(key);\n              getFieldsRecursively(subObj.fields);\n            }\n            if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isString)(subObj.type)) {\n              const fieldName = fieldNameParts.concat(key).join(\".\");\n              if (shouldAddField(subObj, key)) {\n                fields[fieldName] = {\n                  text: fieldName,\n                  type: subObj.type\n                };\n              }\n            }\n          }\n          fieldNameParts.pop();\n        }\n        for (const indexName in result) {\n          const index = result[indexName];\n          if (index && index.mappings) {\n            const mappings = index.mappings;\n            const properties = mappings.properties;\n            getFieldsRecursively(properties);\n          }\n        }\n        return (0,lodash__WEBPACK_IMPORTED_MODULE_0__.map)(fields, (value) => {\n          return value;\n        });\n      })\n    );\n  }\n  getTerms(queryDef, range = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_26__.getDefaultTimeRange)()) {\n    const searchType = \"query_then_fetch\";\n    const header = this.getQueryHeader(searchType, range.from, range.to);\n    let esQuery = JSON.stringify(this.queryBuilder.getTermsQuery(queryDef));\n    esQuery = esQuery.replace(/\\$timeFrom/g, range.from.valueOf().toString());\n    esQuery = esQuery.replace(/\\$timeTo/g, range.to.valueOf().toString());\n    esQuery = header + \"\\n\" + esQuery + \"\\n\";\n    const url = this.getMultiSearchUrl();\n    const termsObservable = _grafana_runtime__WEBPACK_IMPORTED_MODULE_20__.config.featureToggles.enableElasticsearchBackendQuerying ? (\n      // TODO: This is run through resource call, but maybe should run through query\n      (0,rxjs__WEBPACK_IMPORTED_MODULE_29__.from)(this.postResourceRequest(url, esQuery))\n    ) : this.legacyQueryRunner.request(\"POST\", url, esQuery);\n    return termsObservable.pipe(\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_34__.map)((res) => {\n        if (!res.responses[0].aggregations) {\n          return [];\n        }\n        const buckets = res.responses[0].aggregations[\"1\"].buckets;\n        return (0,lodash__WEBPACK_IMPORTED_MODULE_0__.map)(buckets, (bucket) => {\n          return {\n            text: bucket.key_as_string || bucket.key,\n            value: bucket.key\n          };\n        });\n      })\n    );\n  }\n  getMultiSearchUrl() {\n    const searchParams = new URLSearchParams();\n    if (this.maxConcurrentShardRequests) {\n      searchParams.append(\"max_concurrent_shard_requests\", `${this.maxConcurrentShardRequests}`);\n    }\n    if (this.xpack && this.includeFrozen) {\n      searchParams.append(\"ignore_throttled\", \"false\");\n    }\n    return (\"_msearch?\" + searchParams.toString()).replace(/\\?$/, \"\");\n  }\n  metricFindQuery(query, options) {\n    const range = options?.range;\n    const parsedQuery = JSON.parse(query);\n    if (query) {\n      if (parsedQuery.find === \"fields\") {\n        parsedQuery.type = this.interpolateLuceneQuery(parsedQuery.type);\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.lastValueFrom)(this.getFields(parsedQuery.type, range));\n      }\n      if (parsedQuery.find === \"terms\") {\n        parsedQuery.field = this.interpolateLuceneQuery(parsedQuery.field);\n        parsedQuery.query = this.interpolateLuceneQuery(parsedQuery.query);\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.lastValueFrom)(this.getTerms(parsedQuery, range));\n      }\n    }\n    return Promise.resolve([]);\n  }\n  getTagKeys() {\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.lastValueFrom)(this.getFields());\n  }\n  getTagValues(options) {\n    const range = this.timeSrv.timeRange();\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.lastValueFrom)(this.getTerms({ field: options.key }, range));\n  }\n  targetContainsTemplate(target) {\n    if (this.templateSrv.containsTemplate(target.query) || this.templateSrv.containsTemplate(target.alias)) {\n      return true;\n    }\n    if (target.bucketAggs) {\n      for (const bucketAgg of target.bucketAggs) {\n        if ((0,_components_QueryEditor_BucketAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_11__.isBucketAggregationWithField)(bucketAgg) && this.templateSrv.containsTemplate(bucketAgg.field)) {\n          return true;\n        }\n        if (this.objectContainsTemplate(bucketAgg.settings)) {\n          return true;\n        }\n      }\n    }\n    if (target.metrics) {\n      for (const metric of target.metrics) {\n        if (!(0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_13__.isMetricAggregationWithField)(metric)) {\n          continue;\n        }\n        if (metric.field && this.templateSrv.containsTemplate(metric.field)) {\n          return true;\n        }\n        if (metric.settings && this.objectContainsTemplate(metric.settings)) {\n          return true;\n        }\n        if ((0,_guards__WEBPACK_IMPORTED_MODULE_15__.isMetricAggregationWithMeta)(metric) && this.objectContainsTemplate(metric.meta)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  objectContainsTemplate(obj) {\n    if (typeof obj === \"string\") {\n      return this.templateSrv.containsTemplate(obj);\n    }\n    if (!obj || typeof obj !== \"object\") {\n      return false;\n    }\n    for (const key of Object.keys(obj)) {\n      if (Array.isArray(obj[key])) {\n        for (const item of obj[key]) {\n          if (this.objectContainsTemplate(item)) {\n            return true;\n          }\n        }\n      } else if (this.objectContainsTemplate(obj[key])) {\n        return true;\n      }\n    }\n    return false;\n  }\n  toggleQueryFilter(query, filter) {\n    let expression = query.query ?? \"\";\n    switch (filter.type) {\n      case \"FILTER_FOR\": {\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.queryHasFilter)(expression, filter.options.key, filter.options.value) ? (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.removeFilterFromQuery)(expression, filter.options.key, filter.options.value) : (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addFilterToQuery)(expression, filter.options.key, filter.options.value);\n        break;\n      }\n      case \"FILTER_OUT\": {\n        if ((0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.queryHasFilter)(expression, filter.options.key, filter.options.value)) {\n          expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.removeFilterFromQuery)(expression, filter.options.key, filter.options.value);\n        }\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addFilterToQuery)(expression, filter.options.key, filter.options.value, \"-\");\n        break;\n      }\n    }\n    return { ...query, query: expression };\n  }\n  queryHasFilter(query, options) {\n    let expression = query.query ?? \"\";\n    return (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.queryHasFilter)(expression, options.key, options.value);\n  }\n  modifyQuery(query, action) {\n    if (!action.options) {\n      return query;\n    }\n    let expression = query.query ?? \"\";\n    switch (action.type) {\n      case \"ADD_FILTER\": {\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addFilterToQuery)(expression, action.options.key, action.options.value);\n        break;\n      }\n      case \"ADD_FILTER_OUT\": {\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addFilterToQuery)(expression, action.options.key, action.options.value, \"-\");\n        break;\n      }\n    }\n    return { ...query, query: expression };\n  }\n  addAdHocFilters(query) {\n    const adhocFilters = this.templateSrv.getAdhocFilters(this.name);\n    if (adhocFilters.length === 0) {\n      return query;\n    }\n    const esFilters = adhocFilters.map((filter) => {\n      let { key, operator, value } = filter;\n      if (!key || !value) {\n        return;\n      }\n      key = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.escapeFilter)(key);\n      switch (operator) {\n        case \"=\":\n          return `${key}:\"${value}\"`;\n        case \"!=\":\n          return `-${key}:\"${value}\"`;\n        case \"=~\":\n          return `${key}:/${value}/`;\n        case \"!~\":\n          return `-${key}:/${value}/`;\n        case \">\":\n          return `${key}:>${value}`;\n        case \"<\":\n          return `${key}:<${value}`;\n      }\n      return;\n    });\n    const finalQuery = [query, ...esFilters].filter((f) => f).join(\" AND \");\n    return finalQuery;\n  }\n  // Used when running queries through backend\n  applyTemplateVariables(query, scopedVars) {\n    const interpolateBucketAgg = (bucketAgg) => {\n      if (bucketAgg.type === \"filters\") {\n        return {\n          ...bucketAgg,\n          settings: {\n            ...bucketAgg.settings,\n            filters: bucketAgg.settings?.filters?.map((filter) => ({\n              ...filter,\n              query: this.interpolateLuceneQuery(filter.query, scopedVars) || \"*\"\n            }))\n          }\n        };\n      }\n      return bucketAgg;\n    };\n    const expandedQuery = {\n      ...query,\n      datasource: this.getRef(),\n      query: this.addAdHocFilters(this.interpolateLuceneQuery(query.query || \"\", scopedVars)),\n      bucketAggs: query.bucketAggs?.map(interpolateBucketAgg)\n    };\n    const finalQuery = JSON.parse(this.templateSrv.replace(JSON.stringify(expandedQuery), scopedVars));\n    return finalQuery;\n  }\n  getDatabaseVersionUncached() {\n    const getDbVersionObservable = _grafana_runtime__WEBPACK_IMPORTED_MODULE_20__.config.featureToggles.enableElasticsearchBackendQuerying ? (0,rxjs__WEBPACK_IMPORTED_MODULE_29__.from)(this.getResourceRequest(\"\")) : this.legacyQueryRunner.request(\"GET\", \"/\");\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.lastValueFrom)(getDbVersionObservable).then(\n      (data) => {\n        const versionNumber = data?.version?.number;\n        if (typeof versionNumber !== \"string\") {\n          return null;\n        }\n        try {\n          return new semver__WEBPACK_IMPORTED_MODULE_1__.SemVer(versionNumber);\n        } catch (error) {\n          console.error(error);\n          return null;\n        }\n      },\n      (error) => {\n        console.error(error);\n        return null;\n      }\n    );\n  }\n  async getDatabaseVersion(useCachedData = true) {\n    if (useCachedData) {\n      const cached = this.databaseVersion;\n      if (cached != null) {\n        return cached;\n      }\n    }\n    const freshDatabaseVersion = await this.getDatabaseVersionUncached();\n    this.databaseVersion = freshDatabaseVersion;\n    return freshDatabaseVersion;\n  }\n}\nfunction enhanceDataFrameWithDataLinks(dataFrame, dataLinks) {\n  if (!dataLinks.length) {\n    return;\n  }\n  for (const field of dataFrame.fields) {\n    const linksToApply = dataLinks.filter((dataLink) => new RegExp(dataLink.field).test(field.name));\n    if (linksToApply.length === 0) {\n      continue;\n    }\n    field.config = field.config || {};\n    field.config.links = [...(field.config.links || [], linksToApply.map(generateDataLink))];\n  }\n}\nfunction generateDataLink(linkConfig) {\n  const dataSourceSrv = (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_37__.getDataSourceSrv)();\n  if (linkConfig.datasourceUid) {\n    const dsSettings = dataSourceSrv.getInstanceSettings(linkConfig.datasourceUid);\n    return {\n      title: linkConfig.urlDisplayLabel || \"\",\n      url: \"\",\n      internal: {\n        query: { query: linkConfig.url },\n        datasourceUid: linkConfig.datasourceUid,\n        datasourceName: dsSettings?.name ?? \"Data source not found\"\n      }\n    };\n  } else {\n    return {\n      title: linkConfig.urlDisplayLabel || \"\",\n      url: linkConfig.url\n    };\n  }\n}\nfunction createContextTimeRange(rowTimeEpochMs, direction, intervalPattern) {\n  const offset = 7;\n  if (intervalPattern) {\n    const intervalInfo = _IndexPattern__WEBPACK_IMPORTED_MODULE_6__.intervalMap[intervalPattern];\n    if (direction === _grafana_data__WEBPACK_IMPORTED_MODULE_23__.LogRowContextQueryDirection.Forward) {\n      return {\n        from: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.dateTime)(rowTimeEpochMs).utc(),\n        to: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.dateTime)(rowTimeEpochMs).add(offset, intervalInfo.amount).utc().startOf(intervalInfo.startOf)\n      };\n    } else {\n      return {\n        from: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.dateTime)(rowTimeEpochMs).subtract(offset, intervalInfo.amount).utc().startOf(intervalInfo.startOf),\n        to: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.dateTime)(rowTimeEpochMs).utc()\n      };\n    }\n  } else {\n    if (direction === _grafana_data__WEBPACK_IMPORTED_MODULE_23__.LogRowContextQueryDirection.Forward) {\n      return {\n        from: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.dateTime)(rowTimeEpochMs).utc(),\n        to: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.dateTime)(rowTimeEpochMs).add(offset, \"hours\").utc()\n      };\n    } else {\n      return {\n        from: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.dateTime)(rowTimeEpochMs).subtract(offset, \"hours\").utc(),\n        to: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_35__.dateTime)(rowTimeEpochMs).utc()\n      };\n    }\n  }\n}\nfunction extractLevel(dataFrame) {\n  const valueField = dataFrame.fields.find((f) => f.type === _grafana_data__WEBPACK_IMPORTED_MODULE_38__.FieldType.number);\n  const name = valueField?.labels?.[\"level\"] ?? \"\";\n  return (0,_features_logs_utils__WEBPACK_IMPORTED_MODULE_5__.getLogLevelFromKey)(name);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2RhdGFzb3VyY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE0RjtBQUM5QjtBQUNpQjtBQUN4RDtBQWtDaEI7QUFDNEU7QUFDL0M7QUFDUTtBQUVLO0FBQ2Q7QUFFTztBQUNiO0FBQ0s7QUFDRTtBQUNnQjtBQUNQO0FBQ0w7QUFJakM7QUFDaUM7QUFDSTtBQUMwQztBQUNyQztBQVlnRDtBQUUxRixNQUFNLDRCQUE0QjtBQUNsQyxNQUFNLDRCQUE0QjtBQUl6QyxNQUFNLHNCQUFzQjtBQUFBLEVBQzFCO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRjtBQUVPLE1BQU0sMEJBQ0gsb0VBQXFCLENBTS9CO0FBQUEsRUF1QkUsWUFDRSxrQkFDaUIsY0FBMkIsb0ZBQWMsQ0FBQyxHQUMzRDtBQUNBLFVBQU0sZ0JBQWdCO0FBRkw7QUF3WG5CLDRCQUFtQixPQUFPLEtBQWtCLFlBQW1FO0FBQzdHLFlBQU0sRUFBRSxtQ0FBbUMsSUFBSSxxREFBTSxDQUFDO0FBQ3RELFVBQUksb0NBQW9DO0FBQ3RDLGNBQU0saUJBQWlCLEtBQUssMEJBQTBCLEtBQUssT0FBTztBQUVsRSxlQUFPLG9EQUFhO0FBQWIsVUFDTCxLQUFLLE1BQU0sY0FBYyxFQUFFO0FBQUEsWUFDekIsMkRBQVUsQ0FBQyxDQUFDLFFBQVE7QUFDbEIsb0JBQU0sUUFBd0I7QUFBQSxnQkFDNUIsU0FBUztBQUFBLGdCQUNULFFBQVEsSUFBSTtBQUFBLGdCQUNaLFlBQVksSUFBSTtBQUFBLGNBQ2xCO0FBQ0Esb0JBQU07QUFBQSxZQUNSLENBQUM7QUFBQSxVQUNIO0FBQUEsUUFDRjtBQUFBLE1BQ0YsT0FBTztBQUNMLGVBQU8sS0FBSyxrQkFBa0IsZ0JB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LFFBQVEsYUFBYSxNQUFNLEVBQUUsSUFBSSxFQUFFLFFBQVEsYUFBYSxPQUFPO0FBQUEsUUFDdkcsSUFBSSx3REFBUSxDQUFDLGNBQWMsRUFBRSxJQUFJO0FBQUEsTUFDbkM7QUFBQSxJQUNGO0FBQUEsRUFFRixPQUFPO0FBQ0wsUUFBSSxjQUFjLHVFQUEyQixDQUFDLFNBQVM7QUFDckQsYUFBTztBQUFBLFFBQ0wsTUFBTSx3REFBUSxDQUFDLGNBQWMsRUFBRSxJQUFJO0FBQUEsUUFDbkMsSUFBSSx3REFBUSxDQUFDLGNBQWMsRUFBRSxJQUFJLFFBQVEsT0FBTyxFQUFFLElBQUk7QUFBQSxNQUN4RDtBQUFBLElBQ0YsT0FBTztBQUNMLGFBQU87QUFBQSxRQUNMLE1BQU0sd0RBQVEsQ0FBQyxjQUFjLEVBQUUsU0FBUyxRQUFRLE9BQU8sRUFBRSxJQUFJO0FBQUEsUUFDN0QsSUFBSSx3REFBUSxDQUFDLGNBQWMsRUFBRSxJQUFJO0FBQUEsTUFDbkM7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGO0FBRUEsU0FBUyxhQUFhLFdBQWdDO0FBQ3BELFFBQU0sYUFBYSxVQUFVLE9BQU8sS0FBSyxDQUFDLE1BQU0sRUFBRSxTQUFTLHFEQUFTLENBQUMsTUFBTTtBQUMzRSxRQUFNLE9BQU8sWUFBWSxTQUFTLE9BQU8sS0FBSztBQUM5QyxTQUFPLHdFQUFrQixDQUFDLElBQUk7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9kYXRhc291cmNlLnRzPzljZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xvbmVEZWVwLCBmaW5kLCBmaXJzdCBhcyBfZmlyc3QsIGlzTnVtYmVyLCBpc09iamVjdCwgaXNTdHJpbmcsIG1hcCBhcyBfbWFwIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGZyb20sIGdlbmVyYXRlLCBsYXN0VmFsdWVGcm9tLCBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgZmlyc3QsIG1hcCwgbWVyZ2VNYXAsIHNraXBXaGlsZSwgdGhyb3dJZkVtcHR5LCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBTZW1WZXIgfSBmcm9tICdzZW12ZXInO1xuXG5pbXBvcnQge1xuICBEYXRhRnJhbWUsXG4gIERhdGFMaW5rLFxuICBEYXRhUXVlcnlSZXF1ZXN0LFxuICBEYXRhUXVlcnlSZXNwb25zZSxcbiAgRGF0YVNvdXJjZUluc3RhbmNlU2V0dGluZ3MsXG4gIERhdGFTb3VyY2VXaXRoTG9nc0NvbnRleHRTdXBwb3J0LFxuICBEYXRhU291cmNlV2l0aFF1ZXJ5SW1wb3J0U3VwcG9ydCxcbiAgRGF0YVNvdXJjZVdpdGhTdXBwbGVtZW50YXJ5UXVlcmllc1N1cHBvcnQsXG4gIERhdGVUaW1lLFxuICBkYXRlVGltZSxcbiAgZ2V0RGVmYXVsdFRpbWVSYW5nZSxcbiAgQWJzdHJhY3RRdWVyeSxcbiAgTG9nTGV2ZWwsXG4gIExvZ1Jvd01vZGVsLFxuICBNZXRyaWNGaW5kVmFsdWUsXG4gIFNjb3BlZFZhcnMsXG4gIFRpbWVSYW5nZSxcbiAgUXVlcnlGaXhBY3Rpb24sXG4gIENvcmVBcHAsXG4gIFN1cHBsZW1lbnRhcnlRdWVyeVR5cGUsXG4gIERhdGFRdWVyeUVycm9yLFxuICByYW5nZVV0aWwsXG4gIExvZ1Jvd0NvbnRleHRRdWVyeURpcmVjdGlvbixcbiAgTG9nUm93Q29udGV4dE9wdGlvbnMsXG4gIFN1cHBsZW1lbnRhcnlRdWVyeU9wdGlvbnMsXG4gIHRvVXRjLFxuICBBbm5vdGF0aW9uRXZlbnQsXG4gIEZpZWxkVHlwZSxcbiAgRGF0YVNvdXJjZVdpdGhUb2dnbGVhYmxlUXVlcnlGaWx0ZXJzU3VwcG9ydCxcbiAgUXVlcnlGaWx0ZXJPcHRpb25zLFxuICBUb2dnbGVGaWx0ZXJBY3Rpb24sXG59IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgRGF0YVNvdXJjZVdpdGhCYWNrZW5kLCBnZXREYXRhU291cmNlU3J2LCBjb25maWcsIEJhY2tlbmRTcnZSZXF1ZXN0IH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyBnZXRUaW1lU3J2LCBUaW1lU3J2IH0gZnJvbSAnYXBwL2ZlYXR1cmVzL2Rhc2hib2FyZC9zZXJ2aWNlcy9UaW1lU3J2JztcbmltcG9ydCB7IGdldFRlbXBsYXRlU3J2LCBUZW1wbGF0ZVNydiB9IGZyb20gJ2FwcC9mZWF0dXJlcy90ZW1wbGF0aW5nL3RlbXBsYXRlX3Nydic7XG5cbmltcG9ydCB7IHF1ZXJ5TG9nc1NhbXBsZSwgcXVlcnlMb2dzVm9sdW1lIH0gZnJvbSAnLi4vLi4vLi4vZmVhdHVyZXMvbG9ncy9sb2dzTW9kZWwnO1xuaW1wb3J0IHsgZ2V0TG9nTGV2ZWxGcm9tS2V5IH0gZnJvbSAnLi4vLi4vLi4vZmVhdHVyZXMvbG9ncy91dGlscyc7XG5cbmltcG9ydCB7IEluZGV4UGF0dGVybiwgaW50ZXJ2YWxNYXAgfSBmcm9tICcuL0luZGV4UGF0dGVybic7XG5pbXBvcnQgTGFuZ3VhZ2VQcm92aWRlciBmcm9tICcuL0xhbmd1YWdlUHJvdmlkZXInO1xuaW1wb3J0IHsgTGVnYWN5UXVlcnlSdW5uZXIgfSBmcm9tICcuL0xlZ2FjeVF1ZXJ5UnVubmVyJztcbmltcG9ydCB7IEVsYXN0aWNRdWVyeUJ1aWxkZXIgfSBmcm9tICcuL1F1ZXJ5QnVpbGRlcic7XG5pbXBvcnQgeyBFbGFzdGljc2VhcmNoQW5ub3RhdGlvbnNRdWVyeUVkaXRvciB9IGZyb20gJy4vY29tcG9uZW50cy9RdWVyeUVkaXRvci9Bbm5vdGF0aW9uUXVlcnlFZGl0b3InO1xuaW1wb3J0IHsgaXNCdWNrZXRBZ2dyZWdhdGlvbldpdGhGaWVsZCB9IGZyb20gJy4vY29tcG9uZW50cy9RdWVyeUVkaXRvci9CdWNrZXRBZ2dyZWdhdGlvbnNFZGl0b3IvYWdncmVnYXRpb25zJztcbmltcG9ydCB7IGJ1Y2tldEFnZ3JlZ2F0aW9uQ29uZmlnIH0gZnJvbSAnLi9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0J1Y2tldEFnZ3JlZ2F0aW9uc0VkaXRvci91dGlscyc7XG5pbXBvcnQge1xuICBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aEZpZWxkLFxuICBpc1BpcGVsaW5lQWdncmVnYXRpb25XaXRoTXVsdGlwbGVCdWNrZXRQYXRocyxcbn0gZnJvbSAnLi9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci9hZ2dyZWdhdGlvbnMnO1xuaW1wb3J0IHsgbWV0cmljQWdncmVnYXRpb25Db25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3V0aWxzJztcbmltcG9ydCB7IGlzTWV0cmljQWdncmVnYXRpb25XaXRoTWV0YSB9IGZyb20gJy4vZ3VhcmRzJztcbmltcG9ydCB7IGFkZEZpbHRlclRvUXVlcnksIGVzY2FwZUZpbHRlciwgcXVlcnlIYXNGaWx0ZXIsIHJlbW92ZUZpbHRlckZyb21RdWVyeSB9IGZyb20gJy4vbW9kaWZ5UXVlcnknO1xuaW1wb3J0IHsgdHJhY2tBbm5vdGF0aW9uUXVlcnksIHRyYWNrUXVlcnkgfSBmcm9tICcuL3RyYWNraW5nJztcbmltcG9ydCB7XG4gIExvZ3MsXG4gIEJ1Y2tldEFnZ3JlZ2F0aW9uLFxuICBEYXRhTGlua0NvbmZpZyxcbiAgRWxhc3RpY3NlYXJjaE9wdGlvbnMsXG4gIEVsYXN0aWNzZWFyY2hRdWVyeSxcbiAgVGVybXNRdWVyeSxcbiAgSW50ZXJ2YWwsXG4gIEVsYXN0aWNzZWFyY2hBbm5vdGF0aW9uUXVlcnksXG4gIFJhbmdlTWFwLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGdldFNjcmlwdFZhbHVlLCBpc1N1cHBvcnRlZFZlcnNpb24sIGlzVGltZVNlcmllc1F1ZXJ5LCB1bnN1cHBvcnRlZFZlcnNpb25NZXNzYWdlIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBjb25zdCBSRUZfSURfU1RBUlRFUl9MT0dfVk9MVU1FID0gJ2xvZy12b2x1bWUtJztcbmV4cG9ydCBjb25zdCBSRUZfSURfU1RBUlRFUl9MT0dfU0FNUExFID0gJ2xvZy1zYW1wbGUtJztcblxuLy8gVGhvc2UgYXJlIG1ldGFkYXRhIGZpZWxkcyBhcyBkZWZpbmVkIGluIGh0dHBzOi8vd3d3LmVsYXN0aWMuY28vZ3VpZGUvZW4vZWxhc3RpY3NlYXJjaC9yZWZlcmVuY2UvY3VycmVudC9tYXBwaW5nLWZpZWxkcy5odG1sI19pZGVudGl0eV9tZXRhZGF0YV9maWVsZHMuXG4vLyBjdXN0b20gZmllbGRzIGNhbiBzdGFydCB3aXRoIHVuZGVyc2NvcmVzLCB0aGVyZWZvcmUgaXMgbm90IHNhZmUgdG8gZXhjbHVkZSBhbnl0aGluZyB0aGF0IHN0YXJ0cyB3aXRoIG9uZS5cbmNvbnN0IEVMQVNUSUNfTUVUQV9GSUVMRFMgPSBbXG4gICdfaW5kZXgnLFxuICAnX3R5cGUnLFxuICAnX2lkJyxcbiAgJ19zb3VyY2UnLFxuICAnX3NpemUnLFxuICAnX2ZpZWxkX25hbWVzJyxcbiAgJ19pZ25vcmVkJyxcbiAgJ19yb3V0aW5nJyxcbiAgJ19tZXRhJyxcbl07XG5cbmV4cG9ydCBjbGFzcyBFbGFzdGljRGF0YXNvdXJjZVxuICBleHRlbmRzIERhdGFTb3VyY2VXaXRoQmFja2VuZDxFbGFzdGljc2VhcmNoUXVlcnksIEVsYXN0aWNzZWFyY2hPcHRpb25zPlxuICBpbXBsZW1lbnRzXG4gICAgRGF0YVNvdXJjZVdpdGhMb2dzQ29udGV4dFN1cHBvcnQsXG4gICAgRGF0YVNvdXJjZVdpdGhRdWVyeUltcG9ydFN1cHBvcnQ8RWxhc3RpY3NlYXJjaFF1ZXJ5PixcbiAgICBEYXRhU291cmNlV2l0aFN1cHBsZW1lbnRhcnlRdWVyaWVzU3VwcG9ydDxFbGFzdGljc2VhcmNoUXVlcnk+LFxuICAgIERhdGFTb3VyY2VXaXRoVG9nZ2xlYWJsZVF1ZXJ5RmlsdGVyc1N1cHBvcnQ8RWxhc3RpY3NlYXJjaFF1ZXJ5Plxue1xuICBiYXNpY0F1dGg/OiBzdHJpbmc7XG4gIHdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gIHVybDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGluZGV4OiBzdHJpbmc7XG4gIHRpbWVGaWVsZDogc3RyaW5nO1xuICB4cGFjazogYm9vbGVhbjtcbiAgaW50ZXJ2YWw6IHN0cmluZztcbiAgbWF4Q29uY3VycmVudFNoYXJkUmVxdWVzdHM/OiBudW1iZXI7XG4gIHF1ZXJ5QnVpbGRlcjogRWxhc3RpY1F1ZXJ5QnVpbGRlcjtcbiAgaW5kZXhQYXR0ZXJuOiBJbmRleFBhdHRlcm47XG4gIGludGVydmFsUGF0dGVybj86IEludGVydmFsO1xuICBsb2dNZXNzYWdlRmllbGQ/OiBzdHJpbmc7XG4gIGxvZ0xldmVsRmllbGQ/OiBzdHJpbmc7XG4gIGRhdGFMaW5rczogRGF0YUxpbmtDb25maWdbXTtcbiAgbGFuZ3VhZ2VQcm92aWRlcjogTGFuZ3VhZ2VQcm92aWRlcjtcbiAgaW5jbHVkZUZyb3plbjogYm9vbGVhbjtcbiAgaXNQcm94eUFjY2VzczogYm9vbGVhbjtcbiAgdGltZVNydjogVGltZVNydjtcbiAgZGF0YWJhc2VWZXJzaW9uOiBTZW1WZXIgfCBudWxsO1xuICBsZWdhY3lRdWVyeVJ1bm5lcjogTGVnYWN5UXVlcnlSdW5uZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaW5zdGFuY2VTZXR0aW5nczogRGF0YVNvdXJjZUluc3RhbmNlU2V0dGluZ3M8RWxhc3RpY3NlYXJjaE9wdGlvbnM+LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgdGVtcGxhdGVTcnY6IFRlbXBsYXRlU3J2ID0gZ2V0VGVtcGxhdGVTcnYoKVxuICApIHtcbiAgICBzdXBlcihpbnN0YW5jZVNldHRpbmdzKTtcbiAgICB0aGlzLmJhc2ljQXV0aCA9IGluc3RhbmNlU2V0dGluZ3MuYmFzaWNBdXRoO1xuICAgIHRoaXMud2l0aENyZWRlbnRpYWxzID0gaW5zdGFuY2VTZXR0aW5ncy53aXRoQ3JlZGVudGlhbHM7XG4gICAgdGhpcy51cmwgPSBpbnN0YW5jZVNldHRpbmdzLnVybCE7XG4gICAgdGhpcy5uYW1lID0gaW5zdGFuY2VTZXR0aW5ncy5uYW1lO1xuICAgIHRoaXMuaXNQcm94eUFjY2VzcyA9IGluc3RhbmNlU2V0dGluZ3MuYWNjZXNzID09PSAncHJveHknO1xuICAgIGNvbnN0IHNldHRpbmdzRGF0YSA9IGluc3RhbmNlU2V0dGluZ3MuanNvbkRhdGEgfHwgKHt9IGFzIEVsYXN0aWNzZWFyY2hPcHRpb25zKTtcblxuICAgIHRoaXMuaW5kZXggPSBzZXR0aW5nc0RhdGEuaW5kZXggPz8gaW5zdGFuY2VTZXR0aW5ncy5kYXRhYmFzZSA/PyAnJztcbiAgICB0aGlzLnRpbWVGaWVsZCA9IHNldHRpbmdzRGF0YS50aW1lRmllbGQ7XG4gICAgdGhpcy54cGFjayA9IEJvb2xlYW4oc2V0dGluZ3NEYXRhLnhwYWNrKTtcbiAgICB0aGlzLmluZGV4UGF0dGVybiA9IG5ldyBJbmRleFBhdHRlcm4odGhpcy5pbmRleCwgc2V0dGluZ3NEYXRhLmludGVydmFsKTtcbiAgICB0aGlzLmludGVydmFsUGF0dGVybiA9IHNldHRpbmdzRGF0YS5pbnRlcnZhbDtcbiAgICB0aGlzLmludGVydmFsID0gc2V0dGluZ3NEYXRhLnRpbWVJbnRlcnZhbDtcbiAgICB0aGlzLm1heENvbmN1cnJlbnRTaGFyZFJlcXVlc3RzID0gc2V0dGluZ3NEYXRhLm1heENvbmN1cnJlbnRTaGFyZFJlcXVlc3RzO1xuICAgIHRoaXMucXVlcnlCdWlsZGVyID0gbmV3IEVsYXN0aWNRdWVyeUJ1aWxkZXIoe1xuICAgICAgdGltZUZpZWxkOiB0aGlzLnRpbWVGaWVsZCxcbiAgICB9KTtcbiAgICB0aGlzLmxvZ01lc3NhZ2VGaWVsZCA9IHNldHRpbmdzRGF0YS5sb2dNZXNzYWdlRmllbGQgfHwgJyc7XG4gICAgdGhpcy5sb2dMZXZlbEZpZWxkID0gc2V0dGluZ3NEYXRhLmxvZ0xldmVsRmllbGQgfHwgJyc7XG4gICAgdGhpcy5kYXRhTGlua3MgPSBzZXR0aW5nc0RhdGEuZGF0YUxpbmtzIHx8IFtdO1xuICAgIHRoaXMuaW5jbHVkZUZyb3plbiA9IHNldHRpbmdzRGF0YS5pbmNsdWRlRnJvemVuID8/IGZhbHNlO1xuICAgIHRoaXMuZGF0YWJhc2VWZXJzaW9uID0gbnVsbDtcbiAgICB0aGlzLmFubm90YXRpb25zID0ge1xuICAgICAgUXVlcnlFZGl0b3I6IEVsYXN0aWNzZWFyY2hBbm5vdGF0aW9uc1F1ZXJ5RWRpdG9yLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5sb2dNZXNzYWdlRmllbGQgPT09ICcnKSB7XG4gICAgICB0aGlzLmxvZ01lc3NhZ2VGaWVsZCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb2dMZXZlbEZpZWxkID09PSAnJykge1xuICAgICAgdGhpcy5sb2dMZXZlbEZpZWxkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLmxhbmd1YWdlUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VQcm92aWRlcih0aGlzKTtcbiAgICB0aGlzLnRpbWVTcnYgPSBnZXRUaW1lU3J2KCk7XG4gICAgdGhpcy5sZWdhY3lRdWVyeVJ1bm5lciA9IG5ldyBMZWdhY3lRdWVyeVJ1bm5lcih0aGlzLCB0aGlzLnRlbXBsYXRlU3J2KTtcbiAgfVxuXG4gIGdldFJlc291cmNlUmVxdWVzdChwYXRoOiBzdHJpbmcsIHBhcmFtcz86IEJhY2tlbmRTcnZSZXF1ZXN0WydwYXJhbXMnXSwgb3B0aW9ucz86IFBhcnRpYWw8QmFja2VuZFNydlJlcXVlc3Q+KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb3VyY2UocGF0aCwgcGFyYW1zLCBvcHRpb25zKTtcbiAgfVxuXG4gIHBvc3RSZXNvdXJjZVJlcXVlc3QocGF0aDogc3RyaW5nLCBkYXRhPzogQmFja2VuZFNydlJlcXVlc3RbJ2RhdGEnXSwgb3B0aW9ucz86IFBhcnRpYWw8QmFja2VuZFNydlJlcXVlc3Q+KSB7XG4gICAgY29uc3QgcmVzb3VyY2VPcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICByZXNvdXJjZU9wdGlvbnMuaGVhZGVycyA9IHJlc291cmNlT3B0aW9ucy5oZWFkZXJzID8/IHt9O1xuICAgIHJlc291cmNlT3B0aW9ucy5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LW5kanNvbic7XG5cbiAgICByZXR1cm4gdGhpcy5wb3N0UmVzb3VyY2UocGF0aCwgZGF0YSwgcmVzb3VyY2VPcHRpb25zKTtcbiAgfVxuXG4gIGFzeW5jIGltcG9ydEZyb21BYnN0cmFjdFF1ZXJpZXMoYWJzdHJhY3RRdWVyaWVzOiBBYnN0cmFjdFF1ZXJ5W10pOiBQcm9taXNlPEVsYXN0aWNzZWFyY2hRdWVyeVtdPiB7XG4gICAgcmV0dXJuIGFic3RyYWN0UXVlcmllcy5tYXAoKGFic3RyYWN0UXVlcnkpID0+IHRoaXMubGFuZ3VhZ2VQcm92aWRlci5pbXBvcnRGcm9tQWJzdHJhY3RRdWVyeShhYnN0cmFjdFF1ZXJ5KSk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBHRVQgcmVxdWVzdCB0byB0aGUgc3BlY2lmaWVkIHVybCBvbiB0aGUgbmV3ZXN0IG1hdGNoaW5nIGFuZCBhdmFpbGFibGUgaW5kZXguXG4gICAqXG4gICAqIFdoZW4gbXVsdGlwbGUgaW5kaWNlcyBzcGFuIHRoZSBwcm92aWRlZCB0aW1lIHJhbmdlLCB0aGUgcmVxdWVzdCBpcyBzZW50IHN0YXJ0aW5nIGZyb20gdGhlIG5ld2VzdCBpbmRleCxcbiAgICogYW5kIHRoZW4gZ29pbmcgYmFja3dhcmRzIHVudGlsIGFuIGluZGV4IGlzIGZvdW5kLlxuICAgKlxuICAgKiBAcGFyYW0gdXJsIHRoZSB1cmwgdG8gcXVlcnkgdGhlIGluZGV4IG9uLCBmb3IgZXhhbXBsZSBgL19tYXBwaW5nYC5cbiAgICovXG5cbiAgcHJpdmF0ZSByZXF1ZXN0QWxsSW5kaWNlcyh1cmw6IHN0cmluZywgcmFuZ2UgPSBnZXREZWZhdWx0VGltZVJhbmdlKCkpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGxldCBpbmRleExpc3QgPSB0aGlzLmluZGV4UGF0dGVybi5nZXRJbmRleExpc3QocmFuZ2UuZnJvbSwgcmFuZ2UudG8pO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShpbmRleExpc3QpKSB7XG4gICAgICBpbmRleExpc3QgPSBbdGhpcy5pbmRleFBhdHRlcm4uZ2V0SW5kZXhGb3JUb2RheSgpXTtcbiAgICB9XG5cbiAgICBjb25zdCBpbmRleFVybExpc3QgPSBpbmRleExpc3QubWFwKChpbmRleCkgPT4gaW5kZXggKyB1cmwpO1xuXG4gICAgY29uc3QgbWF4VHJhdmVyc2FscyA9IDc7IC8vIGRvIG5vdCBnbyBiZXlvbmQgb25lIHdlZWsgKGZvciBhIGRhaWx5IHBhdHRlcm4pXG4gICAgY29uc3QgbGlzdExlbiA9IGluZGV4VXJsTGlzdC5sZW5ndGg7XG5cbiAgICByZXR1cm4gZ2VuZXJhdGUoe1xuICAgICAgaW5pdGlhbFN0YXRlOiAwLFxuICAgICAgY29uZGl0aW9uOiAoaSkgPT4gaSA8IE1hdGgubWluKGxpc3RMZW4sIG1heFRyYXZlcnNhbHMpLFxuICAgICAgaXRlcmF0ZTogKGkpID0+IGkgKyAxLFxuICAgIH0pLnBpcGUoXG4gICAgICBtZXJnZU1hcCgoaW5kZXgpID0+IHtcbiAgICAgICAgLy8gY2F0Y2ggYWxsIGVycm9ycyBhbmQgZW1pdCBhbiBvYmplY3Qgd2l0aCBhbiBlcnIgcHJvcGVydHkgdG8gc2ltcGxpZnkgY2hlY2tzIGxhdGVyIGluIHRoZSBwaXBlbGluZVxuICAgICAgICBjb25zdCBwYXRoID0gaW5kZXhVcmxMaXN0W2xpc3RMZW4gLSBpbmRleCAtIDFdO1xuICAgICAgICBjb25zdCByZXF1ZXN0T2JzZXJ2YWJsZSA9IGNvbmZpZy5mZWF0dXJlVG9nZ2xlcy5lbmFibGVFbGFzdGljc2VhcmNoQmFja2VuZFF1ZXJ5aW5nXG4gICAgICAgICAgPyBmcm9tKHRoaXMuZ2V0UmVzb3VyY2UocGF0aCkpXG4gICAgICAgICAgOiB0aGlzLmxlZ2FjeVF1ZXJ5UnVubmVyLnJlcXVlc3QoJ0dFVCcsIHBhdGgpO1xuXG4gICAgICAgIHJldHVybiByZXF1ZXN0T2JzZXJ2YWJsZS5waXBlKGNhdGNoRXJyb3IoKGVycikgPT4gb2YoeyBlcnIgfSkpKTtcbiAgICAgIH0pLFxuICAgICAgc2tpcFdoaWxlKChyZXNwKSA9PiByZXNwPy5lcnI/LnN0YXR1cyA9PT0gNDA0KSwgLy8gc2tpcCBhbGwgcmVxdWVzdHMgdGhhdCBmYWlsIGJlY2F1c2UgbWlzc2luZyBFbGFzdGljIGluZGV4XG4gICAgICB0aHJvd0lmRW1wdHkoKCkgPT4gJ0NvdWxkIG5vdCBmaW5kIGFuIGF2YWlsYWJsZSBpbmRleCBmb3IgdGhpcyB0aW1lIHJhbmdlLicpLCAvLyB3aGVuIGkgPT09IE1hdGgubWluKGxpc3RMZW4sIG1heFRyYXZlcnNhbHMpIGdlbmVyYXRlIHdpbGwgY29tcGxldGUgYnV0IHdpdGhvdXQgZW1pdHRpbmcgYW55IHZhbHVlcyB3aGljaCBtZWFucyB3ZSBkaWRuJ3QgZmluZCBhIHZhbGlkIGluZGV4XG4gICAgICBmaXJzdCgpLCAvLyB0YWtlIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IGlzbid0IHNraXBwZWRcbiAgICAgIG1hcCgocmVzcCkgPT4ge1xuICAgICAgICBpZiAocmVzcC5lcnIpIHtcbiAgICAgICAgICB0aHJvdyByZXNwLmVycjsgLy8gaWYgdGhlcmUgaXMgc29tZSBvdGhlciBlcnJvciBleGNlcHQgNDA0IHRoZW4gd2UgbXVzdCB0aHJvdyBpdFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3A7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBhbm5vdGF0aW9uUXVlcnkob3B0aW9uczogYW55KTogUHJvbWlzZTxBbm5vdGF0aW9uRXZlbnRbXT4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSB0aGlzLnByZXBhcmVBbm5vdGF0aW9uUmVxdWVzdChvcHRpb25zKTtcbiAgICB0cmFja0Fubm90YXRpb25RdWVyeShvcHRpb25zLmFubm90YXRpb24pO1xuICAgIGNvbnN0IGFubm90YXRpb25PYnNlcnZhYmxlID0gY29uZmlnLmZlYXR1cmVUb2dnbGVzLmVuYWJsZUVsYXN0aWNzZWFyY2hCYWNrZW5kUXVlcnlpbmdcbiAgICAgID8gLy8gVE9ETzogV2Ugc2hvdWxkIG1pZ3JhdGUgdGhpcyB0byB1c2UgcXVlcnkgYW5kIG5vdCByZXNvdXJjZSBjYWxsXG4gICAgICAgIC8vIFRoZSBwbGFuIGlzIHRvIGxvb2sgYXQgdGhpcyB3aGVuIHdlIHN0YXJ0IHRvIHdvcmsgb24gcmF3IHF1ZXJ5IGVkaXRvciBmb3IgRVNcbiAgICAgICAgLy8gYXMgd2Ugd2lsbCBoYXZlIHRvIGV4cGxvcmUgaG93IHRvIGhhbmRsZSBhbnkgcXVlcnlcbiAgICAgICAgZnJvbSh0aGlzLnBvc3RSZXNvdXJjZVJlcXVlc3QoJ19tc2VhcmNoJywgcGF5bG9hZCkpXG4gICAgICA6IHRoaXMubGVnYWN5UXVlcnlSdW5uZXIucmVxdWVzdCgnUE9TVCcsICdfbXNlYXJjaCcsIHBheWxvYWQpO1xuXG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oXG4gICAgICBhbm5vdGF0aW9uT2JzZXJ2YWJsZS5waXBlKFxuICAgICAgICBtYXAoKHJlcykgPT4ge1xuICAgICAgICAgIGNvbnN0IGhpdHMgPSByZXMucmVzcG9uc2VzWzBdLmhpdHMuaGl0cztcbiAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzSGl0c1RvQW5ub3RhdGlvbkV2ZW50cyhvcHRpb25zLmFubm90YXRpb24sIGhpdHMpO1xuICAgICAgICB9KVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHByZXBhcmVBbm5vdGF0aW9uUmVxdWVzdChvcHRpb25zOiB7IGFubm90YXRpb246IEVsYXN0aWNzZWFyY2hBbm5vdGF0aW9uUXVlcnk7IHJhbmdlOiBUaW1lUmFuZ2UgfSkge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSBvcHRpb25zLmFubm90YXRpb247XG4gICAgY29uc3QgdGltZUZpZWxkID0gYW5ub3RhdGlvbi50aW1lRmllbGQgfHwgJ0B0aW1lc3RhbXAnO1xuICAgIGNvbnN0IHRpbWVFbmRGaWVsZCA9IGFubm90YXRpb24udGltZUVuZEZpZWxkIHx8IG51bGw7XG5cbiAgICAvLyB0aGUgYHRhcmdldC5xdWVyeWAgaXMgdGhlIFwibmV3XCIgbG9jYXRpb24gZm9yIHRoZSBxdWVyeS5cbiAgICAvLyBub3JtYWxseSB3ZSB3b3VsZCB3cml0ZSB0aGlzIGNvZGUgYXNcbiAgICAvLyB0cnktdGhlLW5ldy1wbGFjZS10aGVuLXRyeS10aGUtb2xkLXBsYWNlLFxuICAgIC8vIGJ1dCB3ZSBoYWQgdGhlIGJ1ZyBhdFxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFmYW5hL2dyYWZhbmEvaXNzdWVzLzYxMTA3XG4gICAgLy8gdGhhdCBtYXkgaGF2ZSBzdG9yZWQgYW5ub3RhdGlvbnMgd2hlcmVcbiAgICAvLyBib3RoIHRoZSBvbGQgYW5kIHRoZSBuZXcgcGxhY2UgYXJlIHNldCxcbiAgICAvLyBhbmQgaW4gdGhhdCBzY2VuYXJpbyB0aGUgb2xkIHBsYWNlIG5lZWRzXG4gICAgLy8gdG8gaGF2ZSBwcmlvcml0eS5cbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGFubm90YXRpb24ucXVlcnkgPz8gYW5ub3RhdGlvbi50YXJnZXQ/LnF1ZXJ5ID8/ICcnO1xuXG4gICAgY29uc3QgZGF0ZVJhbmdlcyA9IFtdO1xuICAgIGNvbnN0IHJhbmdlU3RhcnQ6IFJhbmdlTWFwID0ge307XG4gICAgcmFuZ2VTdGFydFt0aW1lRmllbGRdID0ge1xuICAgICAgZnJvbTogb3B0aW9ucy5yYW5nZS5mcm9tLnZhbHVlT2YoKSxcbiAgICAgIHRvOiBvcHRpb25zLnJhbmdlLnRvLnZhbHVlT2YoKSxcbiAgICAgIGZvcm1hdDogJ2Vwb2NoX21pbGxpcycsXG4gICAgfTtcbiAgICBkYXRlUmFuZ2VzLnB1c2goeyByYW5nZTogcmFuZ2VTdGFydCB9KTtcblxuICAgIGlmICh0aW1lRW5kRmllbGQpIHtcbiAgICAgIGNvbnN0IHJhbmdlRW5kOiBSYW5nZU1hcCA9IHt9O1xuICAgICAgcmFuZ2VFbmRbdGltZUVuZEZpZWxkXSA9IHtcbiAgICAgICAgZnJvbTogb3B0aW9ucy5yYW5nZS5mcm9tLnZhbHVlT2YoKSxcbiAgICAgICAgdG86IG9wdGlvbnMucmFuZ2UudG8udmFsdWVPZigpLFxuICAgICAgICBmb3JtYXQ6ICdlcG9jaF9taWxsaXMnLFxuICAgICAgfTtcbiAgICAgIGRhdGVSYW5nZXMucHVzaCh7IHJhbmdlOiByYW5nZUVuZCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeUludGVycG9sYXRlZCA9IHRoaXMuaW50ZXJwb2xhdGVMdWNlbmVRdWVyeShxdWVyeVN0cmluZyk7XG4gICAgY29uc3QgcXVlcnk6IHtcbiAgICAgIGJvb2w6IHsgZmlsdGVyOiBBcnJheTxSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBBcnJheTx7IHJhbmdlOiBSYW5nZU1hcCB9Pj4+PiB9O1xuICAgIH0gPSB7XG4gICAgICBib29sOiB7XG4gICAgICAgIGZpbHRlcjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGJvb2w6IHtcbiAgICAgICAgICAgICAgc2hvdWxkOiBkYXRlUmFuZ2VzLFxuICAgICAgICAgICAgICBtaW5pbXVtX3Nob3VsZF9tYXRjaDogMSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGlmIChxdWVyeUludGVycG9sYXRlZCkge1xuICAgICAgcXVlcnkuYm9vbC5maWx0ZXIucHVzaCh7XG4gICAgICAgIHF1ZXJ5X3N0cmluZzoge1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeUludGVycG9sYXRlZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgcXVlcnksXG4gICAgICBzaXplOiAxMDAwMCxcbiAgICB9O1xuXG4gICAgY29uc3QgaGVhZGVyOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXSB8IGJvb2xlYW4+ID0ge1xuICAgICAgc2VhcmNoX3R5cGU6ICdxdWVyeV90aGVuX2ZldGNoJyxcbiAgICAgIGlnbm9yZV91bmF2YWlsYWJsZTogdHJ1ZSxcbiAgICB9O1xuXG4gICAgLy8gQGRlcHJlY2F0ZWRcbiAgICAvLyBGaWVsZCBhbm5vdGF0aW9uLmluZGV4IGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlXG4gICAgaWYgKGFubm90YXRpb24uaW5kZXgpIHtcbiAgICAgIGhlYWRlci5pbmRleCA9IGFubm90YXRpb24uaW5kZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWRlci5pbmRleCA9IHRoaXMuaW5kZXhQYXR0ZXJuLmdldEluZGV4TGlzdChvcHRpb25zLnJhbmdlLmZyb20sIG9wdGlvbnMucmFuZ2UudG8pO1xuICAgIH1cblxuICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShoZWFkZXIpICsgJ1xcbicgKyBKU09OLnN0cmluZ2lmeShkYXRhKSArICdcXG4nO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9XG5cbiAgcHJpdmF0ZSBwcm9jZXNzSGl0c1RvQW5ub3RhdGlvbkV2ZW50cyhcbiAgICBhbm5vdGF0aW9uOiBFbGFzdGljc2VhcmNoQW5ub3RhdGlvblF1ZXJ5LFxuICAgIGhpdHM6IEFycmF5PFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IFJlY29yZDxzdHJpbmcgfCBudW1iZXIsIHN0cmluZyB8IG51bWJlcj4+PlxuICApIHtcbiAgICBjb25zdCB0aW1lRmllbGQgPSBhbm5vdGF0aW9uLnRpbWVGaWVsZCB8fCAnQHRpbWVzdGFtcCc7XG4gICAgY29uc3QgdGltZUVuZEZpZWxkID0gYW5ub3RhdGlvbi50aW1lRW5kRmllbGQgfHwgbnVsbDtcbiAgICBjb25zdCB0ZXh0RmllbGQgPSBhbm5vdGF0aW9uLnRleHRGaWVsZCB8fCAndGFncyc7XG4gICAgY29uc3QgdGFnc0ZpZWxkID0gYW5ub3RhdGlvbi50YWdzRmllbGQgfHwgbnVsbDtcbiAgICBjb25zdCBsaXN0OiBBbm5vdGF0aW9uRXZlbnRbXSA9IFtdO1xuXG4gICAgY29uc3QgZ2V0RmllbGRGcm9tU291cmNlID0gKHNvdXJjZTogYW55LCBmaWVsZE5hbWU6IHN0cmluZyB8IG51bGwpID0+IHtcbiAgICAgIGlmICghZmllbGROYW1lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmllbGROYW1lcyA9IGZpZWxkTmFtZS5zcGxpdCgnLicpO1xuICAgICAgbGV0IGZpZWxkVmFsdWUgPSBzb3VyY2U7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGROYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmaWVsZFZhbHVlID0gZmllbGRWYWx1ZVtmaWVsZE5hbWVzW2ldXTtcbiAgICAgICAgaWYgKCFmaWVsZFZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmaWVsZFZhbHVlO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGhpdHNbaV0uX3NvdXJjZTtcbiAgICAgIGxldCB0aW1lID0gZ2V0RmllbGRGcm9tU291cmNlKHNvdXJjZSwgdGltZUZpZWxkKTtcbiAgICAgIGlmICh0eXBlb2YgaGl0c1tpXS5maWVsZHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IGhpdHNbaV0uZmllbGRzO1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gJ29iamVjdCcgJiYgKGlzU3RyaW5nKGZpZWxkc1t0aW1lRmllbGRdKSB8fCBpc051bWJlcihmaWVsZHNbdGltZUZpZWxkXSkpKSB7XG4gICAgICAgICAgdGltZSA9IGZpZWxkc1t0aW1lRmllbGRdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGV2ZW50OiBBbm5vdGF0aW9uRXZlbnQgPSB7XG4gICAgICAgIGFubm90YXRpb246IGFubm90YXRpb24sXG4gICAgICAgIHRpbWU6IHRvVXRjKHRpbWUpLnZhbHVlT2YoKSxcbiAgICAgICAgdGV4dDogZ2V0RmllbGRGcm9tU291cmNlKHNvdXJjZSwgdGV4dEZpZWxkKSxcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aW1lRW5kRmllbGQpIHtcbiAgICAgICAgY29uc3QgdGltZUVuZCA9IGdldEZpZWxkRnJvbVNvdXJjZShzb3VyY2UsIHRpbWVFbmRGaWVsZCk7XG4gICAgICAgIGlmICh0aW1lRW5kKSB7XG4gICAgICAgICAgZXZlbnQudGltZUVuZCA9IHRvVXRjKHRpbWVFbmQpLnZhbHVlT2YoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBsZWdhY3kgc3VwcG9ydCBmb3IgdGl0bGUgZmllbGRcbiAgICAgIGlmIChhbm5vdGF0aW9uLnRpdGxlRmllbGQpIHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBnZXRGaWVsZEZyb21Tb3VyY2Uoc291cmNlLCBhbm5vdGF0aW9uLnRpdGxlRmllbGQpO1xuICAgICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgICBldmVudC50ZXh0ID0gdGl0bGUgKyAnXFxuJyArIGV2ZW50LnRleHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFncyA9IGdldEZpZWxkRnJvbVNvdXJjZShzb3VyY2UsIHRhZ3NGaWVsZCk7XG4gICAgICBpZiAodHlwZW9mIHRhZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGV2ZW50LnRhZ3MgPSB0YWdzLnNwbGl0KCcsJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudC50YWdzID0gdGFncztcbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGV2ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3Q7XG4gIH1cblxuICBpbnRlcnBvbGF0ZUx1Y2VuZVF1ZXJ5KHF1ZXJ5U3RyaW5nOiBzdHJpbmcsIHNjb3BlZFZhcnM/OiBTY29wZWRWYXJzKSB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGVTcnYucmVwbGFjZShxdWVyeVN0cmluZywgc2NvcGVkVmFycywgJ2x1Y2VuZScpO1xuICB9XG5cbiAgaW50ZXJwb2xhdGVWYXJpYWJsZXNJblF1ZXJpZXMocXVlcmllczogRWxhc3RpY3NlYXJjaFF1ZXJ5W10sIHNjb3BlZFZhcnM6IFNjb3BlZFZhcnMgfCB7fSk6IEVsYXN0aWNzZWFyY2hRdWVyeVtdIHtcbiAgICByZXR1cm4gcXVlcmllcy5tYXAoKHEpID0+IHRoaXMuYXBwbHlUZW1wbGF0ZVZhcmlhYmxlcyhxLCBzY29wZWRWYXJzKSk7XG4gIH1cblxuICBhc3luYyB0ZXN0RGF0YXNvdXJjZSgpIHtcbiAgICAvLyB3ZSBleHBsaWNpdGx5IGFzayBmb3IgdW5jYWNoZWQsIFwiZnJlc2hcIiBkYXRhIGhlcmVcbiAgICBjb25zdCBkYlZlcnNpb24gPSBhd2FpdCB0aGlzLmdldERhdGFiYXNlVmVyc2lvbihmYWxzZSk7XG4gICAgLy8gaWYgd2UgYXJlIG5vdCBhYmxlIHRvIGRldGVybWluZSB0aGUgZWxhc3RpYy12ZXJzaW9uLCB3ZSBhc3N1bWUgaXQgaXMgYSBnb29kIHZlcnNpb24uXG4gICAgY29uc3QgaXNTdXBwb3J0ZWQgPSBkYlZlcnNpb24gIT0gbnVsbCA/IGlzU3VwcG9ydGVkVmVyc2lvbihkYlZlcnNpb24pIDogdHJ1ZTtcbiAgICBjb25zdCB2ZXJzaW9uTWVzc2FnZSA9IGlzU3VwcG9ydGVkID8gJycgOiBgV0FSTklORzogJHt1bnN1cHBvcnRlZFZlcnNpb25NZXNzYWdlfSBgO1xuICAgIC8vIHZhbGlkYXRlIHRoYXQgdGhlIGluZGV4IGV4aXN0IGFuZCBoYXMgZGF0ZSBmaWVsZFxuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKFxuICAgICAgdGhpcy5nZXRGaWVsZHMoWydkYXRlJ10pLnBpcGUoXG4gICAgICAgIG1lcmdlTWFwKChkYXRlRmllbGRzKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGltZUZpZWxkID0gZmluZChkYXRlRmllbGRzLCB7IHRleHQ6IHRoaXMudGltZUZpZWxkIH0pO1xuICAgICAgICAgIGlmICghdGltZUZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gb2Yoe1xuICAgICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdObyBkYXRlIGZpZWxkIG5hbWVkICcgKyB0aGlzLnRpbWVGaWVsZCArICcgZm91bmQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBvZih7IHN0YXR1czogJ3N1Y2Nlc3MnLCBtZXNzYWdlOiBgJHt2ZXJzaW9uTWVzc2FnZX1EYXRhIHNvdXJjZSBzdWNjZXNzZnVsbHkgY29ubmVjdGVkLmAgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICBjYXRjaEVycm9yKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zdCBpbmZvSW5QYXJlbnRoZXNlcyA9IGVyci5tZXNzYWdlID8gYCAoJHtlcnIubWVzc2FnZX0pYCA6ICcnO1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgVW5hYmxlIHRvIGNvbm5lY3Qgd2l0aCBFbGFzdGljc2VhcmNoJHtpbmZvSW5QYXJlbnRoZXNlc30uIFBsZWFzZSBjaGVjayB0aGUgc2VydmVyIGxvZ3MgZm9yIG1vcmUgZGV0YWlscy5gO1xuICAgICAgICAgIHJldHVybiBvZih7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZSB9KTtcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgZ2V0UXVlcnlIZWFkZXIoc2VhcmNoVHlwZTogc3RyaW5nLCB0aW1lRnJvbT86IERhdGVUaW1lLCB0aW1lVG8/OiBEYXRlVGltZSk6IHN0cmluZyB7XG4gICAgY29uc3QgcXVlcnlIZWFkZXIgPSB7XG4gICAgICBzZWFyY2hfdHlwZTogc2VhcmNoVHlwZSxcbiAgICAgIGlnbm9yZV91bmF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgIGluZGV4OiB0aGlzLmluZGV4UGF0dGVybi5nZXRJbmRleExpc3QodGltZUZyb20sIHRpbWVUbyksXG4gICAgfTtcblxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShxdWVyeUhlYWRlcik7XG4gIH1cblxuICBnZXRRdWVyeURpc3BsYXlUZXh0KHF1ZXJ5OiBFbGFzdGljc2VhcmNoUXVlcnkpIHtcbiAgICAvLyBUT0RPOiBUaGlzIG1pZ2h0IGJlIHJlZmFjdG9yZWQgYSBiaXQuXG4gICAgY29uc3QgbWV0cmljQWdncyA9IHF1ZXJ5Lm1ldHJpY3M7XG4gICAgY29uc3QgYnVja2V0QWdncyA9IHF1ZXJ5LmJ1Y2tldEFnZ3M7XG4gICAgbGV0IHRleHQgPSAnJztcblxuICAgIGlmIChxdWVyeS5xdWVyeSkge1xuICAgICAgdGV4dCArPSAnUXVlcnk6ICcgKyBxdWVyeS5xdWVyeSArICcsICc7XG4gICAgfVxuXG4gICAgdGV4dCArPSAnTWV0cmljczogJztcblxuICAgIHRleHQgKz0gbWV0cmljQWdncz8ucmVkdWNlKChhY2MsIG1ldHJpYykgPT4ge1xuICAgICAgY29uc3QgbWV0cmljQ29uZmlnID0gbWV0cmljQWdncmVnYXRpb25Db25maWdbbWV0cmljLnR5cGVdO1xuXG4gICAgICBsZXQgdGV4dCA9IG1ldHJpY0NvbmZpZy5sYWJlbCArICcoJztcblxuICAgICAgaWYgKGlzTWV0cmljQWdncmVnYXRpb25XaXRoRmllbGQobWV0cmljKSkge1xuICAgICAgICB0ZXh0ICs9IG1ldHJpYy5maWVsZDtcbiAgICAgIH1cbiAgICAgIGlmIChpc1BpcGVsaW5lQWdncmVnYXRpb25XaXRoTXVsdGlwbGVCdWNrZXRQYXRocyhtZXRyaWMpKSB7XG4gICAgICAgIHRleHQgKz0gZ2V0U2NyaXB0VmFsdWUobWV0cmljKS5yZXBsYWNlKG5ldyBSZWdFeHAoJ3BhcmFtcy4nLCAnZycpLCAnJyk7XG4gICAgICB9XG4gICAgICB0ZXh0ICs9ICcpLCAnO1xuXG4gICAgICByZXR1cm4gYCR7YWNjfSAke3RleHR9YDtcbiAgICB9LCAnJyk7XG5cbiAgICB0ZXh0ICs9IGJ1Y2tldEFnZ3M/LnJlZHVjZSgoYWNjLCBidWNrZXRBZ2csIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBidWNrZXRDb25maWcgPSBidWNrZXRBZ2dyZWdhdGlvbkNvbmZpZ1tidWNrZXRBZ2cudHlwZV07XG5cbiAgICAgIGxldCB0ZXh0ID0gJyc7XG4gICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgdGV4dCArPSAnIEdyb3VwIGJ5OiAnO1xuICAgICAgfVxuXG4gICAgICB0ZXh0ICs9IGJ1Y2tldENvbmZpZy5sYWJlbCArICcoJztcbiAgICAgIGlmIChpc0J1Y2tldEFnZ3JlZ2F0aW9uV2l0aEZpZWxkKGJ1Y2tldEFnZykpIHtcbiAgICAgICAgdGV4dCArPSBidWNrZXRBZ2cuZmllbGQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBgJHthY2N9ICR7dGV4dH0pLCBgO1xuICAgIH0sICcnKTtcblxuICAgIGlmIChxdWVyeS5hbGlhcykge1xuICAgICAgdGV4dCArPSAnQWxpYXM6ICcgKyBxdWVyeS5hbGlhcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIHNob3dDb250ZXh0VG9nZ2xlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0TG9nUm93Q29udGV4dCA9IGFzeW5jIChyb3c6IExvZ1Jvd01vZGVsLCBvcHRpb25zPzogTG9nUm93Q29udGV4dE9wdGlvbnMpOiBQcm9taXNlPHsgZGF0YTogRGF0YUZyYW1lW10gfT4gPT4ge1xuICAgIGNvbnN0IHsgZW5hYmxlRWxhc3RpY3NlYXJjaEJhY2tlbmRRdWVyeWluZyB9ID0gY29uZmlnLmZlYXR1cmVUb2dnbGVzO1xuICAgIGlmIChlbmFibGVFbGFzdGljc2VhcmNoQmFja2VuZFF1ZXJ5aW5nKSB7XG4gICAgICBjb25zdCBjb250ZXh0UmVxdWVzdCA9IHRoaXMubWFrZUxvZ0NvbnRleHREYXRhUmVxdWVzdChyb3csIG9wdGlvbnMpO1xuXG4gICAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShcbiAgICAgICAgdGhpcy5xdWVyeShjb250ZXh0UmVxdWVzdCkucGlwZShcbiAgICAgICAgICBjYXRjaEVycm9yKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yOiBEYXRhUXVlcnlFcnJvciA9IHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGR1cmluZyBjb250ZXh0IHF1ZXJ5LiBQbGVhc2UgY2hlY2sgSlMgY29uc29sZSBsb2dzLicsXG4gICAgICAgICAgICAgIHN0YXR1czogZXJyLnN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhdHVzVGV4dDogZXJyLnN0YXR1c1RleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMubGVnYWN5UXVlcnlSdW5uZXIubG9nQ29udGV4dFF1ZXJ5KHJvdywgb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuXG4gIGdldERhdGFQcm92aWRlcihcbiAgICB0eXBlOiBTdXBwbGVtZW50YXJ5UXVlcnlUeXBlLFxuICAgIHJlcXVlc3Q6IERhdGFRdWVyeVJlcXVlc3Q8RWxhc3RpY3NlYXJjaFF1ZXJ5PlxuICApOiBPYnNlcnZhYmxlPERhdGFRdWVyeVJlc3BvbnNlPiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCF0aGlzLmdldFN1cHBvcnRlZFN1cHBsZW1lbnRhcnlRdWVyeVR5cGVzKCkuaW5jbHVkZXModHlwZSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBTdXBwbGVtZW50YXJ5UXVlcnlUeXBlLkxvZ3NWb2x1bWU6XG4gICAgICAgIHJldHVybiB0aGlzLmdldExvZ3NWb2x1bWVEYXRhUHJvdmlkZXIocmVxdWVzdCk7XG4gICAgICBjYXNlIFN1cHBsZW1lbnRhcnlRdWVyeVR5cGUuTG9nc1NhbXBsZTpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TG9nc1NhbXBsZURhdGFQcm92aWRlcihyZXF1ZXN0KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3VwcG9ydGVkU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZXMoKTogU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZVtdIHtcbiAgICByZXR1cm4gW1N1cHBsZW1lbnRhcnlRdWVyeVR5cGUuTG9nc1ZvbHVtZSwgU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZS5Mb2dzU2FtcGxlXTtcbiAgfVxuXG4gIGdldFN1cHBsZW1lbnRhcnlRdWVyeShvcHRpb25zOiBTdXBwbGVtZW50YXJ5UXVlcnlPcHRpb25zLCBxdWVyeTogRWxhc3RpY3NlYXJjaFF1ZXJ5KTogRWxhc3RpY3NlYXJjaFF1ZXJ5IHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMuZ2V0U3VwcG9ydGVkU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZXMoKS5pbmNsdWRlcyhvcHRpb25zLnR5cGUpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGxldCBpc1F1ZXJ5U3VpdGFibGUgPSBmYWxzZTtcblxuICAgIHN3aXRjaCAob3B0aW9ucy50eXBlKSB7XG4gICAgICBjYXNlIFN1cHBsZW1lbnRhcnlRdWVyeVR5cGUuTG9nc1ZvbHVtZTpcbiAgICAgICAgLy8gaXQgaGFzIHRvIGJlIGEgbG9ncy1wcm9kdWNpbmcgcmFuZ2UtcXVlcnlcbiAgICAgICAgaXNRdWVyeVN1aXRhYmxlID0gISEocXVlcnkubWV0cmljcz8ubGVuZ3RoID09PSAxICYmIHF1ZXJ5Lm1ldHJpY3NbMF0udHlwZSA9PT0gJ2xvZ3MnKTtcbiAgICAgICAgaWYgKCFpc1F1ZXJ5U3VpdGFibGUpIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1Y2tldEFnZ3M6IEJ1Y2tldEFnZ3JlZ2F0aW9uW10gPSBbXTtcbiAgICAgICAgY29uc3QgdGltZUZpZWxkID0gdGhpcy50aW1lRmllbGQgPz8gJ0B0aW1lc3RhbXAnO1xuXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsRmllbGQpIHtcbiAgICAgICAgICBidWNrZXRBZ2dzLnB1c2goe1xuICAgICAgICAgICAgaWQ6ICcyJyxcbiAgICAgICAgICAgIHR5cGU6ICd0ZXJtcycsXG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICBtaW5fZG9jX2NvdW50OiAnMCcsXG4gICAgICAgICAgICAgIHNpemU6ICcwJyxcbiAgICAgICAgICAgICAgb3JkZXI6ICdkZXNjJyxcbiAgICAgICAgICAgICAgb3JkZXJCeTogJ19jb3VudCcsXG4gICAgICAgICAgICAgIG1pc3Npbmc6IExvZ0xldmVsLnVua25vd24sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmllbGQ6IHRoaXMubG9nTGV2ZWxGaWVsZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBidWNrZXRBZ2dzLnB1c2goe1xuICAgICAgICAgIGlkOiAnMycsXG4gICAgICAgICAgdHlwZTogJ2RhdGVfaGlzdG9ncmFtJyxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgaW50ZXJ2YWw6ICdhdXRvJyxcbiAgICAgICAgICAgIG1pbl9kb2NfY291bnQ6ICcwJyxcbiAgICAgICAgICAgIHRyaW1FZGdlczogJzAnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmllbGQ6IHRpbWVGaWVsZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZWZJZDogYCR7UkVGX0lEX1NUQVJURVJfTE9HX1ZPTFVNRX0ke3F1ZXJ5LnJlZklkfWAsXG4gICAgICAgICAgcXVlcnk6IHF1ZXJ5LnF1ZXJ5LFxuICAgICAgICAgIG1ldHJpY3M6IFt7IHR5cGU6ICdjb3VudCcsIGlkOiAnMScgfV0sXG4gICAgICAgICAgdGltZUZpZWxkLFxuICAgICAgICAgIGJ1Y2tldEFnZ3MsXG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZS5Mb2dzU2FtcGxlOlxuICAgICAgICBpc1F1ZXJ5U3VpdGFibGUgPSBpc1RpbWVTZXJpZXNRdWVyeShxdWVyeSk7XG5cbiAgICAgICAgaWYgKCFpc1F1ZXJ5U3VpdGFibGUpIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMubGltaXQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVmSWQ6IGAke1JFRl9JRF9TVEFSVEVSX0xPR19TQU1QTEV9JHtxdWVyeS5yZWZJZH1gLFxuICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LnF1ZXJ5LFxuICAgICAgICAgICAgbWV0cmljczogW3sgdHlwZTogJ2xvZ3MnLCBpZDogJzEnLCBzZXR0aW5nczogeyBsaW1pdDogb3B0aW9ucy5saW1pdC50b1N0cmluZygpIH0gfV0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVmSWQ6IGAke1JFRl9JRF9TVEFSVEVSX0xPR19TQU1QTEV9JHtxdWVyeS5yZWZJZH1gLFxuICAgICAgICAgIHF1ZXJ5OiBxdWVyeS5xdWVyeSxcbiAgICAgICAgICBtZXRyaWNzOiBbeyB0eXBlOiAnbG9ncycsIGlkOiAnMScgfV0sXG4gICAgICAgIH07XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0TG9nc1ZvbHVtZURhdGFQcm92aWRlcihyZXF1ZXN0OiBEYXRhUXVlcnlSZXF1ZXN0PEVsYXN0aWNzZWFyY2hRdWVyeT4pOiBPYnNlcnZhYmxlPERhdGFRdWVyeVJlc3BvbnNlPiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgbG9nc1ZvbHVtZVJlcXVlc3QgPSBjbG9uZURlZXAocmVxdWVzdCk7XG4gICAgY29uc3QgdGFyZ2V0cyA9IGxvZ3NWb2x1bWVSZXF1ZXN0LnRhcmdldHNcbiAgICAgIC5tYXAoKHRhcmdldCkgPT4gdGhpcy5nZXRTdXBwbGVtZW50YXJ5UXVlcnkoeyB0eXBlOiBTdXBwbGVtZW50YXJ5UXVlcnlUeXBlLkxvZ3NWb2x1bWUgfSwgdGFyZ2V0KSlcbiAgICAgIC5maWx0ZXIoKHF1ZXJ5KTogcXVlcnkgaXMgRWxhc3RpY3NlYXJjaFF1ZXJ5ID0+ICEhcXVlcnkpO1xuXG4gICAgaWYgKCF0YXJnZXRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gcXVlcnlMb2dzVm9sdW1lKFxuICAgICAgdGhpcyxcbiAgICAgIHsgLi4ubG9nc1ZvbHVtZVJlcXVlc3QsIHRhcmdldHMgfSxcbiAgICAgIHtcbiAgICAgICAgcmFuZ2U6IHJlcXVlc3QucmFuZ2UsXG4gICAgICAgIHRhcmdldHM6IHJlcXVlc3QudGFyZ2V0cyxcbiAgICAgICAgZXh0cmFjdExldmVsLFxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBnZXRMb2dzU2FtcGxlRGF0YVByb3ZpZGVyKHJlcXVlc3Q6IERhdGFRdWVyeVJlcXVlc3Q8RWxhc3RpY3NlYXJjaFF1ZXJ5Pik6IE9ic2VydmFibGU8RGF0YVF1ZXJ5UmVzcG9uc2U+IHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBsb2dzU2FtcGxlUmVxdWVzdCA9IGNsb25lRGVlcChyZXF1ZXN0KTtcbiAgICBjb25zdCB0YXJnZXRzID0gbG9nc1NhbXBsZVJlcXVlc3QudGFyZ2V0cztcbiAgICBjb25zdCBxdWVyaWVzID0gdGFyZ2V0cy5tYXAoKHF1ZXJ5KSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTdXBwbGVtZW50YXJ5UXVlcnkoeyB0eXBlOiBTdXBwbGVtZW50YXJ5UXVlcnlUeXBlLkxvZ3NTYW1wbGUsIGxpbWl0OiAxMDAgfSwgcXVlcnkpO1xuICAgIH0pO1xuICAgIGNvbnN0IGVsYXN0aWNRdWVyaWVzID0gcXVlcmllcy5maWx0ZXIoKHF1ZXJ5KTogcXVlcnkgaXMgRWxhc3RpY3NlYXJjaFF1ZXJ5ID0+ICEhcXVlcnkpO1xuXG4gICAgaWYgKCFlbGFzdGljUXVlcmllcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBxdWVyeUxvZ3NTYW1wbGUodGhpcywgeyAuLi5sb2dzU2FtcGxlUmVxdWVzdCwgdGFyZ2V0czogZWxhc3RpY1F1ZXJpZXMgfSk7XG4gIH1cblxuICBxdWVyeShyZXF1ZXN0OiBEYXRhUXVlcnlSZXF1ZXN0PEVsYXN0aWNzZWFyY2hRdWVyeT4pOiBPYnNlcnZhYmxlPERhdGFRdWVyeVJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyBlbmFibGVFbGFzdGljc2VhcmNoQmFja2VuZFF1ZXJ5aW5nIH0gPSBjb25maWcuZmVhdHVyZVRvZ2dsZXM7XG4gICAgaWYgKGVuYWJsZUVsYXN0aWNzZWFyY2hCYWNrZW5kUXVlcnlpbmcpIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoKTtcbiAgICAgIHJldHVybiBzdXBlci5xdWVyeShyZXF1ZXN0KS5waXBlKFxuICAgICAgICB0YXAoKHJlc3BvbnNlKSA9PiB0cmFja1F1ZXJ5KHJlc3BvbnNlLCByZXF1ZXN0LCBzdGFydCkpLFxuICAgICAgICBtYXAoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKChkYXRhRnJhbWUpID0+IHtcbiAgICAgICAgICAgIGVuaGFuY2VEYXRhRnJhbWVXaXRoRGF0YUxpbmtzKGRhdGFGcmFtZSwgdGhpcy5kYXRhTGlua3MpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxlZ2FjeVF1ZXJ5UnVubmVyLnF1ZXJ5KHJlcXVlc3QpO1xuICB9XG5cbiAgZmlsdGVyUXVlcnkocXVlcnk6IEVsYXN0aWNzZWFyY2hRdWVyeSk6IGJvb2xlYW4ge1xuICAgIGlmIChxdWVyeS5oaWRlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaXNNZXRhZGF0YUZpZWxkKGZpZWxkTmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIEVMQVNUSUNfTUVUQV9GSUVMRFMuaW5jbHVkZXMoZmllbGROYW1lKTtcbiAgfVxuXG4gIC8vIFRPRE86IGluc3RlYWQgb2YgYmVpbmcgYSBzdHJpbmcsIHRoaXMgY291bGQgYmUgYSBjdXN0b20gdHlwZSByZXByZXNlbnRpbmcgYWxsIHRoZSBlbGFzdGljIHR5cGVzXG4gIC8vIEZJWE1FOiBUaGlzIGRvZXNuJ3Qgc2VlbSB0byByZXR1cm4gYWN0dWFsIE1ldHJpY0ZpbmRWYWx1ZXMsIHdlIHNob3VsZCBlaXRoZXIgY2hhbmdlIHRoZSByZXR1cm4gdHlwZVxuICAvLyBvciBmaXggdGhlIGltcGxlbWVudGF0aW9uLlxuICBnZXRGaWVsZHModHlwZT86IHN0cmluZ1tdLCByYW5nZT86IFRpbWVSYW5nZSk6IE9ic2VydmFibGU8TWV0cmljRmluZFZhbHVlW10+IHtcbiAgICBjb25zdCB0eXBlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgZmxvYXQ6ICdudW1iZXInLFxuICAgICAgZG91YmxlOiAnbnVtYmVyJyxcbiAgICAgIGludGVnZXI6ICdudW1iZXInLFxuICAgICAgbG9uZzogJ251bWJlcicsXG4gICAgICBkYXRlOiAnZGF0ZScsXG4gICAgICBkYXRlX25hbm9zOiAnZGF0ZScsXG4gICAgICBzdHJpbmc6ICdzdHJpbmcnLFxuICAgICAgdGV4dDogJ3N0cmluZycsXG4gICAgICBzY2FsZWRfZmxvYXQ6ICdudW1iZXInLFxuICAgICAgbmVzdGVkOiAnbmVzdGVkJyxcbiAgICAgIGhpc3RvZ3JhbTogJ251bWJlcicsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0QWxsSW5kaWNlcygnL19tYXBwaW5nJywgcmFuZ2UpLnBpcGUoXG4gICAgICBtYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBzaG91bGRBZGRGaWVsZCA9IChvYmo6IGFueSwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5pc01ldGFkYXRhRmllbGQoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghdHlwZSB8fCB0eXBlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZXF1YWwgcXVlcnkgdHlwZSBmaWx0ZXIsIG9yIHZpYSB0eXBlIG1hcCB0cmFuc2xhdGlvblxuICAgICAgICAgIHJldHVybiB0eXBlLmluY2x1ZGVzKG9iai50eXBlKSB8fCB0eXBlLmluY2x1ZGVzKHR5cGVNYXBbb2JqLnR5cGVdKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTdG9yZSBzdWJmaWVsZCBuYW1lczogW3N5c3RlbSwgcHJvY2VzcywgY3B1LCB0b3RhbF0gLT4gc3lzdGVtLnByb2Nlc3MuY3B1LnRvdGFsXG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZVBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBmaWVsZHM6IFJlY29yZDxzdHJpbmcsIHsgdGV4dDogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT4gPSB7fTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRGaWVsZHNSZWN1cnNpdmVseShvYmo6IGFueSkge1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICAgICAgY29uc3Qgc3ViT2JqID0gb2JqW2tleV07XG5cbiAgICAgICAgICAgIC8vIENoZWNrIG1hcHBpbmcgZmllbGQgZm9yIG5lc3RlZCBmaWVsZHNcbiAgICAgICAgICAgIGlmIChpc09iamVjdChzdWJPYmoucHJvcGVydGllcykpIHtcbiAgICAgICAgICAgICAgZmllbGROYW1lUGFydHMucHVzaChrZXkpO1xuICAgICAgICAgICAgICBnZXRGaWVsZHNSZWN1cnNpdmVseShzdWJPYmoucHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc09iamVjdChzdWJPYmouZmllbGRzKSkge1xuICAgICAgICAgICAgICBmaWVsZE5hbWVQYXJ0cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgIGdldEZpZWxkc1JlY3Vyc2l2ZWx5KHN1Yk9iai5maWVsZHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcoc3ViT2JqLnR5cGUpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZVBhcnRzLmNvbmNhdChrZXkpLmpvaW4oJy4nKTtcblxuICAgICAgICAgICAgICAvLyBIaWRlIG1ldGEtZmllbGRzIGFuZCBjaGVjayBmaWVsZCB0eXBlXG4gICAgICAgICAgICAgIGlmIChzaG91bGRBZGRGaWVsZChzdWJPYmosIGtleSkpIHtcbiAgICAgICAgICAgICAgICBmaWVsZHNbZmllbGROYW1lXSA9IHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgICAgIHR5cGU6IHN1Yk9iai50eXBlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZmllbGROYW1lUGFydHMucG9wKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IGluZGV4TmFtZSBpbiByZXN1bHQpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHJlc3VsdFtpbmRleE5hbWVdO1xuICAgICAgICAgIGlmIChpbmRleCAmJiBpbmRleC5tYXBwaW5ncykge1xuICAgICAgICAgICAgY29uc3QgbWFwcGluZ3MgPSBpbmRleC5tYXBwaW5ncztcblxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IG1hcHBpbmdzLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBnZXRGaWVsZHNSZWN1cnNpdmVseShwcm9wZXJ0aWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0cmFuc2Zvcm0gdG8gYXJyYXlcbiAgICAgICAgcmV0dXJuIF9tYXAoZmllbGRzLCAodmFsdWUpID0+IHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgZ2V0VGVybXMocXVlcnlEZWY6IFRlcm1zUXVlcnksIHJhbmdlID0gZ2V0RGVmYXVsdFRpbWVSYW5nZSgpKTogT2JzZXJ2YWJsZTxNZXRyaWNGaW5kVmFsdWVbXT4ge1xuICAgIGNvbnN0IHNlYXJjaFR5cGUgPSAncXVlcnlfdGhlbl9mZXRjaCc7XG4gICAgY29uc3QgaGVhZGVyID0gdGhpcy5nZXRRdWVyeUhlYWRlcihzZWFyY2hUeXBlLCByYW5nZS5mcm9tLCByYW5nZS50byk7XG4gICAgbGV0IGVzUXVlcnkgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnF1ZXJ5QnVpbGRlci5nZXRUZXJtc1F1ZXJ5KHF1ZXJ5RGVmKSk7XG5cbiAgICBlc1F1ZXJ5ID0gZXNRdWVyeS5yZXBsYWNlKC9cXCR0aW1lRnJvbS9nLCByYW5nZS5mcm9tLnZhbHVlT2YoKS50b1N0cmluZygpKTtcbiAgICBlc1F1ZXJ5ID0gZXNRdWVyeS5yZXBsYWNlKC9cXCR0aW1lVG8vZywgcmFuZ2UudG8udmFsdWVPZigpLnRvU3RyaW5nKCkpO1xuICAgIGVzUXVlcnkgPSBoZWFkZXIgKyAnXFxuJyArIGVzUXVlcnkgKyAnXFxuJztcblxuICAgIGNvbnN0IHVybCA9IHRoaXMuZ2V0TXVsdGlTZWFyY2hVcmwoKTtcblxuICAgIGNvbnN0IHRlcm1zT2JzZXJ2YWJsZSA9IGNvbmZpZy5mZWF0dXJlVG9nZ2xlcy5lbmFibGVFbGFzdGljc2VhcmNoQmFja2VuZFF1ZXJ5aW5nXG4gICAgICA/IC8vIFRPRE86IFRoaXMgaXMgcnVuIHRocm91Z2ggcmVzb3VyY2UgY2FsbCwgYnV0IG1heWJlIHNob3VsZCBydW4gdGhyb3VnaCBxdWVyeVxuICAgICAgICBmcm9tKHRoaXMucG9zdFJlc291cmNlUmVxdWVzdCh1cmwsIGVzUXVlcnkpKVxuICAgICAgOiB0aGlzLmxlZ2FjeVF1ZXJ5UnVubmVyLnJlcXVlc3QoJ1BPU1QnLCB1cmwsIGVzUXVlcnkpO1xuXG4gICAgcmV0dXJuIHRlcm1zT2JzZXJ2YWJsZS5waXBlKFxuICAgICAgbWFwKChyZXMpID0+IHtcbiAgICAgICAgaWYgKCFyZXMucmVzcG9uc2VzWzBdLmFnZ3JlZ2F0aW9ucykge1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ1Y2tldHMgPSByZXMucmVzcG9uc2VzWzBdLmFnZ3JlZ2F0aW9uc1snMSddLmJ1Y2tldHM7XG4gICAgICAgIHJldHVybiBfbWFwKGJ1Y2tldHMsIChidWNrZXQpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGV4dDogYnVja2V0LmtleV9hc19zdHJpbmcgfHwgYnVja2V0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiBidWNrZXQua2V5LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgZ2V0TXVsdGlTZWFyY2hVcmwoKSB7XG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXG4gICAgaWYgKHRoaXMubWF4Q29uY3VycmVudFNoYXJkUmVxdWVzdHMpIHtcbiAgICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ21heF9jb25jdXJyZW50X3NoYXJkX3JlcXVlc3RzJywgYCR7dGhpcy5tYXhDb25jdXJyZW50U2hhcmRSZXF1ZXN0c31gKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy54cGFjayAmJiB0aGlzLmluY2x1ZGVGcm96ZW4pIHtcbiAgICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ2lnbm9yZV90aHJvdHRsZWQnLCAnZmFsc2UnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCdfbXNlYXJjaD8nICsgc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCkpLnJlcGxhY2UoL1xcPyQvLCAnJyk7XG4gIH1cblxuICBtZXRyaWNGaW5kUXVlcnkocXVlcnk6IHN0cmluZywgb3B0aW9ucz86IHsgcmFuZ2U6IFRpbWVSYW5nZSB9KTogUHJvbWlzZTxNZXRyaWNGaW5kVmFsdWVbXT4ge1xuICAgIGNvbnN0IHJhbmdlID0gb3B0aW9ucz8ucmFuZ2U7XG4gICAgY29uc3QgcGFyc2VkUXVlcnkgPSBKU09OLnBhcnNlKHF1ZXJ5KTtcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIGlmIChwYXJzZWRRdWVyeS5maW5kID09PSAnZmllbGRzJykge1xuICAgICAgICBwYXJzZWRRdWVyeS50eXBlID0gdGhpcy5pbnRlcnBvbGF0ZUx1Y2VuZVF1ZXJ5KHBhcnNlZFF1ZXJ5LnR5cGUpO1xuICAgICAgICByZXR1cm4gbGFzdFZhbHVlRnJvbSh0aGlzLmdldEZpZWxkcyhwYXJzZWRRdWVyeS50eXBlLCByYW5nZSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VkUXVlcnkuZmluZCA9PT0gJ3Rlcm1zJykge1xuICAgICAgICBwYXJzZWRRdWVyeS5maWVsZCA9IHRoaXMuaW50ZXJwb2xhdGVMdWNlbmVRdWVyeShwYXJzZWRRdWVyeS5maWVsZCk7XG4gICAgICAgIHBhcnNlZFF1ZXJ5LnF1ZXJ5ID0gdGhpcy5pbnRlcnBvbGF0ZUx1Y2VuZVF1ZXJ5KHBhcnNlZFF1ZXJ5LnF1ZXJ5KTtcbiAgICAgICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20odGhpcy5nZXRUZXJtcyhwYXJzZWRRdWVyeSwgcmFuZ2UpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgfVxuXG4gIGdldFRhZ0tleXMoKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20odGhpcy5nZXRGaWVsZHMoKSk7XG4gIH1cblxuICBnZXRUYWdWYWx1ZXMob3B0aW9uczogeyBrZXk6IHN0cmluZyB9KSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnRpbWVTcnYudGltZVJhbmdlKCk7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20odGhpcy5nZXRUZXJtcyh7IGZpZWxkOiBvcHRpb25zLmtleSB9LCByYW5nZSkpO1xuICB9XG5cbiAgdGFyZ2V0Q29udGFpbnNUZW1wbGF0ZSh0YXJnZXQ6IEVsYXN0aWNzZWFyY2hRdWVyeSkge1xuICAgIGlmICh0aGlzLnRlbXBsYXRlU3J2LmNvbnRhaW5zVGVtcGxhdGUodGFyZ2V0LnF1ZXJ5KSB8fCB0aGlzLnRlbXBsYXRlU3J2LmNvbnRhaW5zVGVtcGxhdGUodGFyZ2V0LmFsaWFzKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldC5idWNrZXRBZ2dzKSB7XG4gICAgICBmb3IgKGNvbnN0IGJ1Y2tldEFnZyBvZiB0YXJnZXQuYnVja2V0QWdncykge1xuICAgICAgICBpZiAoaXNCdWNrZXRBZ2dyZWdhdGlvbldpdGhGaWVsZChidWNrZXRBZ2cpICYmIHRoaXMudGVtcGxhdGVTcnYuY29udGFpbnNUZW1wbGF0ZShidWNrZXRBZ2cuZmllbGQpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2JqZWN0Q29udGFpbnNUZW1wbGF0ZShidWNrZXRBZ2cuc2V0dGluZ3MpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0Lm1ldHJpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgbWV0cmljIG9mIHRhcmdldC5tZXRyaWNzKSB7XG4gICAgICAgIGlmICghaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhGaWVsZChtZXRyaWMpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldHJpYy5maWVsZCAmJiB0aGlzLnRlbXBsYXRlU3J2LmNvbnRhaW5zVGVtcGxhdGUobWV0cmljLmZpZWxkKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXRyaWMuc2V0dGluZ3MgJiYgdGhpcy5vYmplY3RDb250YWluc1RlbXBsYXRlKG1ldHJpYy5zZXR0aW5ncykpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhNZXRhKG1ldHJpYykgJiYgdGhpcy5vYmplY3RDb250YWluc1RlbXBsYXRlKG1ldHJpYy5tZXRhKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBvYmplY3RDb250YWluc1RlbXBsYXRlKG9iajogYW55KSB7XG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVNydi5jb250YWluc1RlbXBsYXRlKG9iaik7XG4gICAgfVxuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMob2JqKSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqW2tleV0pKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvYmpba2V5XSkge1xuICAgICAgICAgIGlmICh0aGlzLm9iamVjdENvbnRhaW5zVGVtcGxhdGUoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdENvbnRhaW5zVGVtcGxhdGUob2JqW2tleV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHRvZ2dsZVF1ZXJ5RmlsdGVyKHF1ZXJ5OiBFbGFzdGljc2VhcmNoUXVlcnksIGZpbHRlcjogVG9nZ2xlRmlsdGVyQWN0aW9uKTogRWxhc3RpY3NlYXJjaFF1ZXJ5IHtcbiAgICBsZXQgZXhwcmVzc2lvbiA9IHF1ZXJ5LnF1ZXJ5ID8/ICcnO1xuICAgIHN3aXRjaCAoZmlsdGVyLnR5cGUpIHtcbiAgICAgIGNhc2UgJ0ZJTFRFUl9GT1InOiB7XG4gICAgICAgIC8vIFRoaXMgZ2l2ZXMgdGhlIHVzZXIgdGhlIGFiaWxpdHkgdG8gdG9nZ2xlIGEgZmlsdGVyIG9uIGFuZCBvZmYuXG4gICAgICAgIGV4cHJlc3Npb24gPSBxdWVyeUhhc0ZpbHRlcihleHByZXNzaW9uLCBmaWx0ZXIub3B0aW9ucy5rZXksIGZpbHRlci5vcHRpb25zLnZhbHVlKVxuICAgICAgICAgID8gcmVtb3ZlRmlsdGVyRnJvbVF1ZXJ5KGV4cHJlc3Npb24sIGZpbHRlci5vcHRpb25zLmtleSwgZmlsdGVyLm9wdGlvbnMudmFsdWUpXG4gICAgICAgICAgOiBhZGRGaWx0ZXJUb1F1ZXJ5KGV4cHJlc3Npb24sIGZpbHRlci5vcHRpb25zLmtleSwgZmlsdGVyLm9wdGlvbnMudmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ0ZJTFRFUl9PVVQnOiB7XG4gICAgICAgIC8vIElmIHRoZSBvcHBvc2l0ZSBmaWx0ZXIgaXMgcHJlc2VudCwgcmVtb3ZlIGl0IGJlZm9yZSBhZGRpbmcgdGhlIG5ldyBvbmUuXG4gICAgICAgIGlmIChxdWVyeUhhc0ZpbHRlcihleHByZXNzaW9uLCBmaWx0ZXIub3B0aW9ucy5rZXksIGZpbHRlci5vcHRpb25zLnZhbHVlKSkge1xuICAgICAgICAgIGV4cHJlc3Npb24gPSByZW1vdmVGaWx0ZXJGcm9tUXVlcnkoZXhwcmVzc2lvbiwgZmlsdGVyLm9wdGlvbnMua2V5LCBmaWx0ZXIub3B0aW9ucy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZXhwcmVzc2lvbiA9IGFkZEZpbHRlclRvUXVlcnkoZXhwcmVzc2lvbiwgZmlsdGVyLm9wdGlvbnMua2V5LCBmaWx0ZXIub3B0aW9ucy52YWx1ZSwgJy0nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgLi4ucXVlcnksIHF1ZXJ5OiBleHByZXNzaW9uIH07XG4gIH1cblxuICBxdWVyeUhhc0ZpbHRlcihxdWVyeTogRWxhc3RpY3NlYXJjaFF1ZXJ5LCBvcHRpb25zOiBRdWVyeUZpbHRlck9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBsZXQgZXhwcmVzc2lvbiA9IHF1ZXJ5LnF1ZXJ5ID8/ICcnO1xuICAgIHJldHVybiBxdWVyeUhhc0ZpbHRlcihleHByZXNzaW9uLCBvcHRpb25zLmtleSwgb3B0aW9ucy52YWx1ZSk7XG4gIH1cblxuICBtb2RpZnlRdWVyeShxdWVyeTogRWxhc3RpY3NlYXJjaFF1ZXJ5LCBhY3Rpb246IFF1ZXJ5Rml4QWN0aW9uKTogRWxhc3RpY3NlYXJjaFF1ZXJ5IHtcbiAgICBpZiAoIWFjdGlvbi5vcHRpb25zKSB7XG4gICAgICByZXR1cm4gcXVlcnk7XG4gICAgfVxuXG4gICAgbGV0IGV4cHJlc3Npb24gPSBxdWVyeS5xdWVyeSA/PyAnJztcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICBjYXNlICdBRERfRklMVEVSJzoge1xuICAgICAgICBleHByZXNzaW9uID0gYWRkRmlsdGVyVG9RdWVyeShleHByZXNzaW9uLCBhY3Rpb24ub3B0aW9ucy5rZXksIGFjdGlvbi5vcHRpb25zLnZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdBRERfRklMVEVSX09VVCc6IHtcbiAgICAgICAgZXhwcmVzc2lvbiA9IGFkZEZpbHRlclRvUXVlcnkoZXhwcmVzc2lvbiwgYWN0aW9uLm9wdGlvbnMua2V5LCBhY3Rpb24ub3B0aW9ucy52YWx1ZSwgJy0nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgLi4ucXVlcnksIHF1ZXJ5OiBleHByZXNzaW9uIH07XG4gIH1cblxuICBhZGRBZEhvY0ZpbHRlcnMocXVlcnk6IHN0cmluZykge1xuICAgIGNvbnN0IGFkaG9jRmlsdGVycyA9IHRoaXMudGVtcGxhdGVTcnYuZ2V0QWRob2NGaWx0ZXJzKHRoaXMubmFtZSk7XG4gICAgaWYgKGFkaG9jRmlsdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBxdWVyeTtcbiAgICB9XG4gICAgY29uc3QgZXNGaWx0ZXJzID0gYWRob2NGaWx0ZXJzLm1hcCgoZmlsdGVyKSA9PiB7XG4gICAgICBsZXQgeyBrZXksIG9wZXJhdG9yLCB2YWx1ZSB9ID0gZmlsdGVyO1xuICAgICAgaWYgKCFrZXkgfHwgIXZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogS2V5cyBhbmQgdmFsdWVzIGluIGFkIGhvYyBmaWx0ZXJzIG1heSBjb250YWluIGNoYXJhY3RlcnMgc3VjaCBhc1xuICAgICAgICogY29sb25zLCB3aGljaCBuZWVkcyB0byBiZSBlc2NhcGVkLlxuICAgICAgICovXG4gICAgICBrZXkgPSBlc2NhcGVGaWx0ZXIoa2V5KTtcbiAgICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICAgICAgY2FzZSAnPSc6XG4gICAgICAgICAgcmV0dXJuIGAke2tleX06XCIke3ZhbHVlfVwiYDtcbiAgICAgICAgY2FzZSAnIT0nOlxuICAgICAgICAgIHJldHVybiBgLSR7a2V5fTpcIiR7dmFsdWV9XCJgO1xuICAgICAgICBjYXNlICc9fic6XG4gICAgICAgICAgcmV0dXJuIGAke2tleX06LyR7dmFsdWV9L2A7XG4gICAgICAgIGNhc2UgJyF+JzpcbiAgICAgICAgICByZXR1cm4gYC0ke2tleX06LyR7dmFsdWV9L2A7XG4gICAgICAgIGNhc2UgJz4nOlxuICAgICAgICAgIHJldHVybiBgJHtrZXl9Oj4ke3ZhbHVlfWA7XG4gICAgICAgIGNhc2UgJzwnOlxuICAgICAgICAgIHJldHVybiBgJHtrZXl9Ojwke3ZhbHVlfWA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSk7XG5cbiAgICBjb25zdCBmaW5hbFF1ZXJ5ID0gW3F1ZXJ5LCAuLi5lc0ZpbHRlcnNdLmZpbHRlcigoZikgPT4gZikuam9pbignIEFORCAnKTtcbiAgICByZXR1cm4gZmluYWxRdWVyeTtcbiAgfVxuXG4gIC8vIFVzZWQgd2hlbiBydW5uaW5nIHF1ZXJpZXMgdGhyb3VnaCBiYWNrZW5kXG4gIGFwcGx5VGVtcGxhdGVWYXJpYWJsZXMocXVlcnk6IEVsYXN0aWNzZWFyY2hRdWVyeSwgc2NvcGVkVmFyczogU2NvcGVkVmFycyk6IEVsYXN0aWNzZWFyY2hRdWVyeSB7XG4gICAgLy8gV2UgbmVlZCBhIHNlcGFyYXRlIGludGVycG9sYXRpb24gZm9ybWF0IGZvciBsdWNlbmUgcXVlcmllcywgdGhlcmVmb3JlIHdlIGZpcnN0IGludGVycG9sYXRlIGFueVxuICAgIC8vIGx1Y2VuZSBxdWVyeSBzdHJpbmcgYW5kIHRoZW4gZXZlcnl0aGluZyBlbHNlXG4gICAgY29uc3QgaW50ZXJwb2xhdGVCdWNrZXRBZ2cgPSAoYnVja2V0QWdnOiBCdWNrZXRBZ2dyZWdhdGlvbik6IEJ1Y2tldEFnZ3JlZ2F0aW9uID0+IHtcbiAgICAgIGlmIChidWNrZXRBZ2cudHlwZSA9PT0gJ2ZpbHRlcnMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uYnVja2V0QWdnLFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAuLi5idWNrZXRBZ2cuc2V0dGluZ3MsXG4gICAgICAgICAgICBmaWx0ZXJzOiBidWNrZXRBZ2cuc2V0dGluZ3M/LmZpbHRlcnM/Lm1hcCgoZmlsdGVyKSA9PiAoe1xuICAgICAgICAgICAgICAuLi5maWx0ZXIsXG4gICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLmludGVycG9sYXRlTHVjZW5lUXVlcnkoZmlsdGVyLnF1ZXJ5LCBzY29wZWRWYXJzKSB8fCAnKicsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1Y2tldEFnZztcbiAgICB9O1xuXG4gICAgY29uc3QgZXhwYW5kZWRRdWVyeSA9IHtcbiAgICAgIC4uLnF1ZXJ5LFxuICAgICAgZGF0YXNvdXJjZTogdGhpcy5nZXRSZWYoKSxcbiAgICAgIHF1ZXJ5OiB0aGlzLmFkZEFkSG9jRmlsdGVycyh0aGlzLmludGVycG9sYXRlTHVjZW5lUXVlcnkocXVlcnkucXVlcnkgfHwgJycsIHNjb3BlZFZhcnMpKSxcbiAgICAgIGJ1Y2tldEFnZ3M6IHF1ZXJ5LmJ1Y2tldEFnZ3M/Lm1hcChpbnRlcnBvbGF0ZUJ1Y2tldEFnZyksXG4gICAgfTtcblxuICAgIGNvbnN0IGZpbmFsUXVlcnkgPSBKU09OLnBhcnNlKHRoaXMudGVtcGxhdGVTcnYucmVwbGFjZShKU09OLnN0cmluZ2lmeShleHBhbmRlZFF1ZXJ5KSwgc2NvcGVkVmFycykpO1xuICAgIHJldHVybiBmaW5hbFF1ZXJ5O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREYXRhYmFzZVZlcnNpb25VbmNhY2hlZCgpOiBQcm9taXNlPFNlbVZlciB8IG51bGw+IHtcbiAgICAvLyB3ZSB3YW50IHRoaXMgZnVuY3Rpb24gdG8gbmV2ZXIgZmFpbFxuICAgIGNvbnN0IGdldERiVmVyc2lvbk9ic2VydmFibGUgPSBjb25maWcuZmVhdHVyZVRvZ2dsZXMuZW5hYmxlRWxhc3RpY3NlYXJjaEJhY2tlbmRRdWVyeWluZ1xuICAgICAgPyBmcm9tKHRoaXMuZ2V0UmVzb3VyY2VSZXF1ZXN0KCcnKSlcbiAgICAgIDogdGhpcy5sZWdhY3lRdWVyeVJ1bm5lci5yZXF1ZXN0KCdHRVQnLCAnLycpO1xuXG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oZ2V0RGJWZXJzaW9uT2JzZXJ2YWJsZSkudGhlbihcbiAgICAgIChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IHZlcnNpb25OdW1iZXIgPSBkYXRhPy52ZXJzaW9uPy5udW1iZXI7XG4gICAgICAgIGlmICh0eXBlb2YgdmVyc2lvbk51bWJlciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBuZXcgU2VtVmVyKHZlcnNpb25OdW1iZXIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YWJhc2VWZXJzaW9uKHVzZUNhY2hlZERhdGEgPSB0cnVlKTogUHJvbWlzZTxTZW1WZXIgfCBudWxsPiB7XG4gICAgaWYgKHVzZUNhY2hlZERhdGEpIHtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZGF0YWJhc2VWZXJzaW9uO1xuICAgICAgaWYgKGNhY2hlZCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZnJlc2hEYXRhYmFzZVZlcnNpb24gPSBhd2FpdCB0aGlzLmdldERhdGFiYXNlVmVyc2lvblVuY2FjaGVkKCk7XG4gICAgdGhpcy5kYXRhYmFzZVZlcnNpb24gPSBmcmVzaERhdGFiYXNlVmVyc2lvbjtcbiAgICByZXR1cm4gZnJlc2hEYXRhYmFzZVZlcnNpb247XG4gIH1cblxuICBwcml2YXRlIG1ha2VMb2dDb250ZXh0RGF0YVJlcXVlc3QgPSAocm93OiBMb2dSb3dNb2RlbCwgb3B0aW9ucz86IExvZ1Jvd0NvbnRleHRPcHRpb25zKSA9PiB7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gb3B0aW9ucz8uZGlyZWN0aW9uIHx8IExvZ1Jvd0NvbnRleHRRdWVyeURpcmVjdGlvbi5CYWNrd2FyZDtcbiAgICBjb25zdCBsb2dRdWVyeTogTG9ncyA9IHtcbiAgICAgIHR5cGU6ICdsb2dzJyxcbiAgICAgIGlkOiAnMScsXG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICBsaW1pdDogb3B0aW9ucz8ubGltaXQgPyBvcHRpb25zPy5saW1pdC50b1N0cmluZygpIDogJzEwJyxcbiAgICAgICAgLy8gU29ydGluZyBvZiByZXN1bHRzIGluIHRoZSBjb250ZXh0IHF1ZXJ5XG4gICAgICAgIHNvcnREaXJlY3Rpb246IGRpcmVjdGlvbiA9PT0gTG9nUm93Q29udGV4dFF1ZXJ5RGlyZWN0aW9uLkJhY2t3YXJkID8gJ2Rlc2MnIDogJ2FzYycsXG4gICAgICAgIC8vIFVzZWQgdG8gZ2V0IHRoZSBuZXh0IGxvZyBsaW5lcyBiZWZvcmUvYWZ0ZXIgdGhlIGN1cnJlbnQgbG9nIGxpbmUgdXNpbmcgc29ydCBmaWVsZCBvZiBzZWxlY3RlZCBsb2cgbGluZVxuICAgICAgICBzZWFyY2hBZnRlcjogcm93LmRhdGFGcmFtZS5maWVsZHMuZmluZCgoZikgPT4gZi5uYW1lID09PSAnc29ydCcpPy52YWx1ZXNbcm93LnJvd0luZGV4XSA/PyBbcm93LnRpbWVFcG9jaE1zXSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGNvbnN0IHF1ZXJ5OiBFbGFzdGljc2VhcmNoUXVlcnkgPSB7XG4gICAgICByZWZJZDogYGxvZy1jb250ZXh0LSR7cm93LmRhdGFGcmFtZS5yZWZJZH0tJHtkaXJlY3Rpb259YCxcbiAgICAgIG1ldHJpY3M6IFtsb2dRdWVyeV0sXG4gICAgICBxdWVyeTogJycsXG4gICAgfTtcblxuICAgIGNvbnN0IHRpbWVSYW5nZSA9IGNyZWF0ZUNvbnRleHRUaW1lUmFuZ2Uocm93LnRpbWVFcG9jaE1zLCBkaXJlY3Rpb24sIHRoaXMuaW50ZXJ2YWxQYXR0ZXJuKTtcbiAgICBjb25zdCByYW5nZSA9IHtcbiAgICAgIGZyb206IHRpbWVSYW5nZS5mcm9tLFxuICAgICAgdG86IHRpbWVSYW5nZS50byxcbiAgICAgIHJhdzogdGltZVJhbmdlLFxuICAgIH07XG5cbiAgICBjb25zdCBpbnRlcnZhbCA9IHJhbmdlVXRpbC5jYWxjdWxhdGVJbnRlcnZhbChyYW5nZSwgMSk7XG5cbiAgICBjb25zdCBjb250ZXh0UmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxFbGFzdGljc2VhcmNoUXVlcnk+ID0ge1xuICAgICAgcmVxdWVzdElkOiBgbG9nLWNvbnRleHQtcmVxdWVzdC0ke3Jvdy5kYXRhRnJhbWUucmVmSWR9LSR7b3B0aW9ucz8uZGlyZWN0aW9ufWAsXG4gICAgICB0YXJnZXRzOiBbcXVlcnldLFxuICAgICAgaW50ZXJ2YWw6IGludGVydmFsLmludGVydmFsLFxuICAgICAgaW50ZXJ2YWxNczogaW50ZXJ2YWwuaW50ZXJ2YWxNcyxcbiAgICAgIHJhbmdlLFxuICAgICAgc2NvcGVkVmFyczoge30sXG4gICAgICB0aW1lem9uZTogJ1VUQycsXG4gICAgICBhcHA6IENvcmVBcHAuRXhwbG9yZSxcbiAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgICAgIGhpZGVGcm9tSW5zcGVjdG9yOiB0cnVlLFxuICAgIH07XG4gICAgcmV0dXJuIGNvbnRleHRSZXF1ZXN0O1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5oYW5jZURhdGFGcmFtZVdpdGhEYXRhTGlua3MoZGF0YUZyYW1lOiBEYXRhRnJhbWUsIGRhdGFMaW5rczogRGF0YUxpbmtDb25maWdbXSkge1xuICBpZiAoIWRhdGFMaW5rcy5sZW5ndGgpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKGNvbnN0IGZpZWxkIG9mIGRhdGFGcmFtZS5maWVsZHMpIHtcbiAgICBjb25zdCBsaW5rc1RvQXBwbHkgPSBkYXRhTGlua3MuZmlsdGVyKChkYXRhTGluaykgPT4gbmV3IFJlZ0V4cChkYXRhTGluay5maWVsZCkudGVzdChmaWVsZC5uYW1lKSk7XG5cbiAgICBpZiAobGlua3NUb0FwcGx5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgZmllbGQuY29uZmlnID0gZmllbGQuY29uZmlnIHx8IHt9O1xuICAgIGZpZWxkLmNvbmZpZy5saW5rcyA9IFsuLi4oZmllbGQuY29uZmlnLmxpbmtzIHx8IFtdLCBsaW5rc1RvQXBwbHkubWFwKGdlbmVyYXRlRGF0YUxpbmspKV07XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVEYXRhTGluayhsaW5rQ29uZmlnOiBEYXRhTGlua0NvbmZpZyk6IERhdGFMaW5rIHtcbiAgY29uc3QgZGF0YVNvdXJjZVNydiA9IGdldERhdGFTb3VyY2VTcnYoKTtcblxuICBpZiAobGlua0NvbmZpZy5kYXRhc291cmNlVWlkKSB7XG4gICAgY29uc3QgZHNTZXR0aW5ncyA9IGRhdGFTb3VyY2VTcnYuZ2V0SW5zdGFuY2VTZXR0aW5ncyhsaW5rQ29uZmlnLmRhdGFzb3VyY2VVaWQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiBsaW5rQ29uZmlnLnVybERpc3BsYXlMYWJlbCB8fCAnJyxcbiAgICAgIHVybDogJycsXG4gICAgICBpbnRlcm5hbDoge1xuICAgICAgICBxdWVyeTogeyBxdWVyeTogbGlua0NvbmZpZy51cmwgfSxcbiAgICAgICAgZGF0YXNvdXJjZVVpZDogbGlua0NvbmZpZy5kYXRhc291cmNlVWlkLFxuICAgICAgICBkYXRhc291cmNlTmFtZTogZHNTZXR0aW5ncz8ubmFtZSA/PyAnRGF0YSBzb3VyY2Ugbm90IGZvdW5kJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IGxpbmtDb25maWcudXJsRGlzcGxheUxhYmVsIHx8ICcnLFxuICAgICAgdXJsOiBsaW5rQ29uZmlnLnVybCxcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHRUaW1lUmFuZ2Uocm93VGltZUVwb2NoTXM6IG51bWJlciwgZGlyZWN0aW9uOiBzdHJpbmcsIGludGVydmFsUGF0dGVybjogSW50ZXJ2YWwgfCB1bmRlZmluZWQpIHtcbiAgY29uc3Qgb2Zmc2V0ID0gNztcbiAgLy8gRm9yIGxvZyBjb250ZXh0LCB3ZSB3YW50IHRvIHJlcXVlc3QgZGF0YSBmcm9tIDcgc3Vic2VxdWVudC9wcmV2aW91cyBpbmRpY2VzXG4gIGlmIChpbnRlcnZhbFBhdHRlcm4pIHtcbiAgICBjb25zdCBpbnRlcnZhbEluZm8gPSBpbnRlcnZhbE1hcFtpbnRlcnZhbFBhdHRlcm5dO1xuICAgIGlmIChkaXJlY3Rpb24gPT09IExvZ1Jvd0NvbnRleHRRdWVyeURpcmVjdGlvbi5Gb3J3YXJkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBmcm9tOiBkYXRlVGltZShyb3dUaW1lRXBvY2hNcykudXRjKCksXG4gICAgICAgIHRvOiBkYXRlVGltZShyb3dUaW1lRXBvY2hNcykuYWRkKG9mZnNldCwgaW50ZXJ2YWxJbmZvLmFtb3VudCkudXRjKCkuc3RhcnRPZihpbnRlcnZhbEluZm8uc3RhcnRPZiksXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBmcm9tOiBkYXRlVGltZShyb3dUaW1lRXBvY2hNcykuc3VidHJhY3Qob2Zmc2V0LCBpbnRlcnZhbEluZm8uYW1vdW50KS51dGMoKS5zdGFydE9mKGludGVydmFsSW5mby5zdGFydE9mKSxcbiAgICAgICAgdG86IGRhdGVUaW1lKHJvd1RpbWVFcG9jaE1zKS51dGMoKSxcbiAgICAgIH07XG4gICAgfVxuICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gaW50ZXJ2YWwgcGF0dGVybiwgd2UgY2FuJ3QgZG8gdGhpcywgc28gd2UganVzdCByZXF1ZXN0IGRhdGEgZnJvbSA3aCBiZWZvcmUvYWZ0ZXJcbiAgfSBlbHNlIHtcbiAgICBpZiAoZGlyZWN0aW9uID09PSBMb2dSb3dDb250ZXh0UXVlcnlEaXJlY3Rpb24uRm9yd2FyZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbTogZGF0ZVRpbWUocm93VGltZUVwb2NoTXMpLnV0YygpLFxuICAgICAgICB0bzogZGF0ZVRpbWUocm93VGltZUVwb2NoTXMpLmFkZChvZmZzZXQsICdob3VycycpLnV0YygpLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbTogZGF0ZVRpbWUocm93VGltZUVwb2NoTXMpLnN1YnRyYWN0KG9mZnNldCwgJ2hvdXJzJykudXRjKCksXG4gICAgICAgIHRvOiBkYXRlVGltZShyb3dUaW1lRXBvY2hNcykudXRjKCksXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0TGV2ZWwoZGF0YUZyYW1lOiBEYXRhRnJhbWUpOiBMb2dMZXZlbCB7XG4gIGNvbnN0IHZhbHVlRmllbGQgPSBkYXRhRnJhbWUuZmllbGRzLmZpbmQoKGYpID0+IGYudHlwZSA9PT0gRmllbGRUeXBlLm51bWJlcik7XG4gIGNvbnN0IG5hbWUgPSB2YWx1ZUZpZWxkPy5sYWJlbHM/LlsnbGV2ZWwnXSA/PyAnJztcbiAgcmV0dXJuIGdldExvZ0xldmVsRnJvbUtleShuYW1lKTtcbn1cbiJdLCJuYW1lcyI6WyJ0ZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/datasource.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/guards.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isMetricAggregationWithMeta: () => (/* binding */ isMetricAggregationWithMeta)\n/* harmony export */ });\n\nfunction isMetricAggregationWithMeta(metric) {\n  if (!metric || typeof metric !== \"object\") {\n    return false;\n  }\n  return \"meta\" in metric;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2d1YXJkcy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUVPLFNBQVMsNEJBQTRCLFFBQW9EO0FBQzlGLE1BQUksQ0FBQyxVQUFVLE9BQU8sV0FBVyxVQUFVO0FBQ3pDLFdBQU87QUFBQSxFQUNUO0FBQ0EsU0FBTyxVQUFVO0FBQ25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvZ3VhcmRzLnRzPzJiZTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXh0ZW5kZWRTdGF0cywgTWV0cmljQWdncmVnYXRpb24gfSBmcm9tICcuL2RhdGFxdWVyeS5nZW4nO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNNZXRyaWNBZ2dyZWdhdGlvbldpdGhNZXRhKG1ldHJpYzogTWV0cmljQWdncmVnYXRpb24pOiBtZXRyaWMgaXMgRXh0ZW5kZWRTdGF0cyB7XG4gIGlmICghbWV0cmljIHx8IHR5cGVvZiBtZXRyaWMgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAnbWV0YScgaW4gbWV0cmljO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/guards.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/hooks/useFields.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFields: () => (/* binding */ useFields)\n/* harmony export */ });\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js\");\n/* harmony import */ var _components_QueryEditor_BucketAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/BucketAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _components_QueryEditor_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n\n\n\n\n\nconst getFilter = (type) => {\n  if ((0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_2__.isMetricAggregationType)(type)) {\n    switch (type) {\n      case \"cardinality\":\n        return [];\n      case \"top_metrics\":\n        return [\"number\"];\n      default:\n        return [\"number\"];\n    }\n  }\n  if ((0,_components_QueryEditor_BucketAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_0__.isBucketAggregationType)(type)) {\n    switch (type) {\n      case \"date_histogram\":\n        return [\"date\"];\n      case \"geohash_grid\":\n        return [\"geo_point\"];\n      case \"histogram\":\n        return [\"number\"];\n      default:\n        return [];\n    }\n  }\n  return [];\n};\nconst toSelectableValue = ({ text }) => ({\n  label: text,\n  value: text\n});\nconst useFields = (type) => {\n  const datasource = (0,_components_QueryEditor_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_1__.useDatasource)();\n  const range = (0,_components_QueryEditor_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_1__.useRange)();\n  const filter = Array.isArray(type) ? type : getFilter(type);\n  let rawFields;\n  return async (q) => {\n    if (!rawFields) {\n      rawFields = await (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.lastValueFrom)(datasource.getFields(filter, range));\n    }\n    return rawFields.filter(({ text }) => q === void 0 || text.includes(q)).map(toSelectableValue);\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2hvb2tzL3VzZUZpZWxkcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBOEI7QUFJVTtBQUNBO0FBQ0E7QUFLeEMsTUFBTSxZQUFZLENBQUMsU0FBMEI7QUFDM0MsTUFBSSxzSEFBdUIsQ0FBQyxJQUFJLEdBQUc7QUFDakMsWUFBUSxNQUFNO0FBQUEsTUFDWixLQUFLO0FBQ0gsZUFBTyxDQUFDO0FBQUEsTUFDVixLQUFLO0FBS0gsZUFBTyxDQUFDLFFBQVE7QUFBQSxNQUNsQjtBQUNFLGVBQU8sQ0FBQyxRQUFRO0FBQUEsSUFDcEI7QUFBQSxFQUNGO0FBRUEsTUFBSSxzSEFBdUIsQ0FBQyxJQUFJLEdBQUc7QUFDakMsWUFBUSxNQUFNO0FBQUEsTUFDWixLQUFLO0FBQ0gsZUFBTyxDQUFDLE1BQU07QUFBQSxNQUNoQixLQUFLO0FBQ0gsZUFBTyxDQUFDLFdBQVc7QUFBQSxNQUNyQixLQUFLO0FBQ0gsZUFBTyxDQUFDLFFBQVE7QUFBQSxNQUNsQjtBQUNFLGVBQU8sQ0FBQztBQUFBLElBQ1o7QUFBQSxFQUNGO0FBRUEsU0FBTyxDQUFDO0FBQ1Y7QUFFQSxNQUFNLG9CQUFvQixDQUFDLEVBQUUsS0FBSyxPQUFpRDtBQUFBLEVBQ2pGLE9BQU87QUFBQSxFQUNQLE9BQU87QUFDVDtBQVNPLE1BQU0sWUFBWSxDQUFDLFNBQXFDO0FBQzdELFFBQU0sYUFBYSxnR0FBYSxDQUFDO0FBQ2pDLFFBQU0sUUFBUSwyRkFBUSxDQUFDO0FBQ3ZCLFFBQU0sU0FBUyxNQUFNLFFBQVEsSUFBSSxJQUFJLE9BQU8sVUFBVSxJQUFJO0FBQzFELE1BQUk7QUFFSixTQUFPLE9BQU8sTUFBZTtBQUUzQixRQUFJLENBQUMsV0FBVztBQUNkLGtCQUFZLE1BQU0sbURBQWEsQ0FBQyxXQUFXLFVBQVUsUUFBUSxLQUFLLENBQUM7QUFBQSxJQUNyRTtBQUVBLFdBQU8sVUFBVSxPQUFPLENBQUMsRUFBRSxLQUFLLE1BQU0sTUFBTSxVQUFhLEtBQUssU0FBUyxDQUFDLENBQUMsRUFBRSxJQUFJLGlCQUFpQjtBQUFBLEVBQ2xHO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9ob29rcy91c2VGaWVsZHMudHM/YTRkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsYXN0VmFsdWVGcm9tIH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IE1ldHJpY0ZpbmRWYWx1ZSwgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmltcG9ydCB7IGlzQnVja2V0QWdncmVnYXRpb25UeXBlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9RdWVyeUVkaXRvci9CdWNrZXRBZ2dyZWdhdGlvbnNFZGl0b3IvYWdncmVnYXRpb25zJztcbmltcG9ydCB7IHVzZURhdGFzb3VyY2UsIHVzZVJhbmdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9RdWVyeUVkaXRvci9FbGFzdGljc2VhcmNoUXVlcnlDb250ZXh0JztcbmltcG9ydCB7IGlzTWV0cmljQWdncmVnYXRpb25UeXBlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9RdWVyeUVkaXRvci9NZXRyaWNBZ2dyZWdhdGlvbnNFZGl0b3IvYWdncmVnYXRpb25zJztcbmltcG9ydCB7IE1ldHJpY0FnZ3JlZ2F0aW9uVHlwZSwgQnVja2V0QWdncmVnYXRpb25UeXBlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG50eXBlIEFnZ3JlZ2F0aW9uVHlwZSA9IEJ1Y2tldEFnZ3JlZ2F0aW9uVHlwZSB8IE1ldHJpY0FnZ3JlZ2F0aW9uVHlwZTtcblxuY29uc3QgZ2V0RmlsdGVyID0gKHR5cGU6IEFnZ3JlZ2F0aW9uVHlwZSkgPT4ge1xuICBpZiAoaXNNZXRyaWNBZ2dyZWdhdGlvblR5cGUodHlwZSkpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2NhcmRpbmFsaXR5JzpcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgY2FzZSAndG9wX21ldHJpY3MnOlxuICAgICAgICAvLyB0b3BfbWV0cmljcyB3YXMgaW50cm9kdWNlZCBpbiA3Ljcgd2hlcmUgYG1ldHJpY3NgIG9ubHkgc3VwcG9ydGVkIG51bWJlcjpcbiAgICAgICAgLy8gaHR0cHM6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS83Ljcvc2VhcmNoLWFnZ3JlZ2F0aW9ucy1tZXRyaWNzLXRvcC1tZXRyaWNzLmh0bWwjX21ldHJpY3NcbiAgICAgICAgLy8gVE9ETzogc3RhcnRpbmcgZnJvbSA3LjExIGl0IHN1cHBvcnRzIGlwcyBhbmQga2V5d29yZHMgYXMgd2VsbDpcbiAgICAgICAgLy8gaHR0cHM6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL3JlZmVyZW5jZS83LjExL3NlYXJjaC1hZ2dyZWdhdGlvbnMtbWV0cmljcy10b3AtbWV0cmljcy5odG1sI19tZXRyaWNzXG4gICAgICAgIHJldHVybiBbJ251bWJlciddO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFsnbnVtYmVyJ107XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzQnVja2V0QWdncmVnYXRpb25UeXBlKHR5cGUpKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdkYXRlX2hpc3RvZ3JhbSc6XG4gICAgICAgIHJldHVybiBbJ2RhdGUnXTtcbiAgICAgIGNhc2UgJ2dlb2hhc2hfZ3JpZCc6XG4gICAgICAgIHJldHVybiBbJ2dlb19wb2ludCddO1xuICAgICAgY2FzZSAnaGlzdG9ncmFtJzpcbiAgICAgICAgcmV0dXJuIFsnbnVtYmVyJ107XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtdO1xufTtcblxuY29uc3QgdG9TZWxlY3RhYmxlVmFsdWUgPSAoeyB0ZXh0IH06IE1ldHJpY0ZpbmRWYWx1ZSk6IFNlbGVjdGFibGVWYWx1ZTxzdHJpbmc+ID0+ICh7XG4gIGxhYmVsOiB0ZXh0LFxuICB2YWx1ZTogdGV4dCxcbn0pO1xuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byBxdWVyeSB0aGUgY29uZmlndXJlZCBkYXRhc291cmNlIGZvciBhdXRvY29tcGxldGUgdmFsdWVzIGZvciB0aGUgc3BlY2lmaWVkIGFnZ3JlZ2F0aW9uIHR5cGUgb3IgZGF0YSB0eXBlcy5cbiAqIEVhY2ggYWdncmVnYXRpb24gY2FuIGJlIHJ1biBvbiBkaWZmZXJlbnQgdHlwZXMsIGZvciBleGFtcGxlIGF2ZyBvbmx5IG9wZXJhdGVzIG9uIG51bWVyaWMgZmllbGRzLCBnZW9oYXNoX2dyaWQgb25seSBvbiBnZW9fcG9pbnQgZmllbGRzLlxuICogSWYgYW4gYWdncmVnYXRpb24gdHlwZSBpcyBwcm92aWRlZCwgdGhlIHByb21pc2Ugd2lsbCByZXNvbHZlIHdpdGggYWxsIGZpZWxkcyBzdWl0YWJsZSB0byBiZSB1c2VkIGFzIGEgZmllbGQgZm9yIHRoZSBnaXZlbiBhZ2dyZWdhdGlvbi5cbiAqIElmIGFuIGFycmF5IG9mIHR5cGVzIGlzIHByb3ZpZGVtIHRoZSBwcm9taXNlIHdpbGwgcmVzb2x2ZSB3aXRoIGFsbCB0aGUgZmllbGRzIG1hdGNoaW5nIHRoZSBwcm92aWRlZCB0eXBlcy5cbiAqIEBwYXJhbSBhZ2dyZWdhdGlvblR5cGUgdGhlIHR5cGUgb2YgYWdncmVnYXRpb24gdG8gZ2V0IGZpZWxkcyBmb3JcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUZpZWxkcyA9ICh0eXBlOiBBZ2dyZWdhdGlvblR5cGUgfCBzdHJpbmdbXSkgPT4ge1xuICBjb25zdCBkYXRhc291cmNlID0gdXNlRGF0YXNvdXJjZSgpO1xuICBjb25zdCByYW5nZSA9IHVzZVJhbmdlKCk7XG4gIGNvbnN0IGZpbHRlciA9IEFycmF5LmlzQXJyYXkodHlwZSkgPyB0eXBlIDogZ2V0RmlsdGVyKHR5cGUpO1xuICBsZXQgcmF3RmllbGRzOiBNZXRyaWNGaW5kVmFsdWVbXTtcblxuICByZXR1cm4gYXN5bmMgKHE/OiBzdHJpbmcpID0+IHtcbiAgICAvLyBfbWFwcGluZyBkb2Vzbid0IHN1cHBvcnQgZmlsdGVyaW5nLCB3ZSBhdm9pZCBzZW5kaW5nIGEgcmVxdWVzdCBldmVyeXRpbWUgcSBjaGFuZ2VzXG4gICAgaWYgKCFyYXdGaWVsZHMpIHtcbiAgICAgIHJhd0ZpZWxkcyA9IGF3YWl0IGxhc3RWYWx1ZUZyb20oZGF0YXNvdXJjZS5nZXRGaWVsZHMoZmlsdGVyLCByYW5nZSkpO1xuICAgIH1cblxuICAgIHJldHVybiByYXdGaWVsZHMuZmlsdGVyKCh7IHRleHQgfSkgPT4gcSA9PT0gdW5kZWZpbmVkIHx8IHRleHQuaW5jbHVkZXMocSkpLm1hcCh0b1NlbGVjdGFibGVWYWx1ZSk7XG4gIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/hooks/useFields.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/hooks/useNextId.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useNextId: () => (/* binding */ useNextId)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_QueryEditor_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/ElasticsearchQueryContext.tsx\");\n\n\n\nconst toId = (e) => e.id;\nconst toInt = (idString) => parseInt(idString, 10);\nconst useNextId = () => {\n  const { metrics, bucketAggs } = (0,_components_QueryEditor_ElasticsearchQueryContext__WEBPACK_IMPORTED_MODULE_1__.useQuery)();\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => (Math.max(...[...metrics?.map(toId) || [\"0\"], ...bucketAggs?.map(toId) || [\"0\"]].map(toInt)) + 1).toString(),\n    [metrics, bucketAggs]\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2hvb2tzL3VzZU5leHRJZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QjtBQUVDO0FBR3pCLE1BQU0sT0FBTyxDQUE0QixNQUFrQixFQUFFO0FBRTdELE1BQU0sUUFBUSxDQUFDLGFBQXFCLFNBQVMsVUFBVSxFQUFFO0FBRWxELE1BQU0sWUFBWSxNQUF5RDtBQUNoRixRQUFNLEVBQUUsU0FBUyxXQUFXLElBQUksMkZBQVEsQ0FBQztBQUV6QyxTQUFPLDhDQUFPO0FBQVAsSUFDTCxPQUNHLEtBQUssSUFBSSxHQUFHLENBQUMsR0FBSSxTQUFTLElBQUksSUFBSSxLQUFLLENBQUMsR0FBRyxHQUFJLEdBQUksWUFBWSxJQUFJLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBRSxFQUFFLElBQUksS0FBSyxDQUFDLElBQUksR0FBRyxTQUFTO0FBQUEsSUFDakgsQ0FBQyxTQUFTLFVBQVU7QUFBQSxFQUN0QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvaG9va3MvdXNlTmV4dElkLnRzP2JmYjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgdXNlUXVlcnkgfSBmcm9tICcuLi9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL0VsYXN0aWNzZWFyY2hRdWVyeUNvbnRleHQnO1xuaW1wb3J0IHsgTWV0cmljQWdncmVnYXRpb24sIEJ1Y2tldEFnZ3JlZ2F0aW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCB0b0lkID0gPFQgZXh0ZW5kcyB7IGlkOiB1bmtub3duIH0+KGU6IFQpOiBUWydpZCddID0+IGUuaWQ7XG5cbmNvbnN0IHRvSW50ID0gKGlkU3RyaW5nOiBzdHJpbmcpID0+IHBhcnNlSW50KGlkU3RyaW5nLCAxMCk7XG5cbmV4cG9ydCBjb25zdCB1c2VOZXh0SWQgPSAoKTogTWV0cmljQWdncmVnYXRpb25bJ2lkJ10gfCBCdWNrZXRBZ2dyZWdhdGlvblsnaWQnXSA9PiB7XG4gIGNvbnN0IHsgbWV0cmljcywgYnVja2V0QWdncyB9ID0gdXNlUXVlcnkoKTtcblxuICByZXR1cm4gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgKE1hdGgubWF4KC4uLlsuLi4obWV0cmljcz8ubWFwKHRvSWQpIHx8IFsnMCddKSwgLi4uKGJ1Y2tldEFnZ3M/Lm1hcCh0b0lkKSB8fCBbJzAnXSldLm1hcCh0b0ludCkpICsgMSkudG9TdHJpbmcoKSxcbiAgICBbbWV0cmljcywgYnVja2V0QWdnc11cbiAgKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/hooks/useNextId.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DispatchContext: () => (/* binding */ DispatchContext),\n/* harmony export */   combineReducers: () => (/* binding */ combineReducers),\n/* harmony export */   useDispatch: () => (/* binding */ useDispatch),\n/* harmony export */   useStatelessReducer: () => (/* binding */ useStatelessReducer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst combineReducers = (reducers) => (state, action) => {\n  const newState = {};\n  for (const key in reducers) {\n    newState[key] = reducers[key](state[key], action);\n  }\n  return newState;\n};\nconst useStatelessReducer = (onChange, state, reducer) => {\n  const dispatch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (action) => {\n      onChange(reducer(state, action));\n    },\n    [onChange, state, reducer]\n  );\n  return dispatch;\n};\nconst DispatchContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nconst useDispatch = () => {\n  const dispatch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DispatchContext);\n  if (!dispatch) {\n    throw new Error(\"Use DispatchContext first.\");\n  }\n  return dispatch;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2hvb2tzL3VzZVN0YXRlbGVzc1JlZHVjZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUN1RDtBQUloRCxNQUFNLGtCQUNYLENBQStCLGFBQy9CLENBQUMsT0FBVSxXQUEwQjtBQUNuQyxRQUFNLFdBQVcsQ0FBQztBQUNsQixhQUFXLE9BQU8sVUFBVTtBQUMxQixhQUFTLEdBQUcsSUFBSSxTQUFTLEdBQUcsRUFBRSxNQUFNLEdBQUcsR0FBRyxNQUFNO0FBQUEsRUFDbEQ7QUFDQSxTQUFPO0FBQ1Q7QUFFSyxNQUFNLHNCQUFzQixDQUNqQyxVQUNBLE9BQ0EsWUFDRztBQUNILFFBQU0sV0FBVyxrREFBVztBQUFYLElBQ2YsQ0FBQyxXQUFjO0FBQ2IsZUFBUyxRQUFRLE9BQU8sTUFBTSxDQUFDO0FBQUEsSUFDakM7QUFBQSxJQUNBLENBQUMsVUFBVSxPQUFPLE9BQU87QUFBQSxFQUMzQjtBQUVBLFNBQU87QUFDVDtBQUVPLE1BQU0sa0JBQWtCLG9EQUFhLENBQXlDLE1BQVM7QUFFdkYsTUFBTSxjQUFjLE1BQXdEO0FBQ2pGLFFBQU0sV0FBVyxpREFBVSxDQUFDLGVBQWU7QUFFM0MsTUFBSSxDQUFDLFVBQVU7QUFDYixVQUFNLElBQUksTUFBTSw0QkFBNEI7QUFBQSxFQUM5QztBQUVBLFNBQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL2hvb2tzL3VzZVN0YXRlbGVzc1JlZHVjZXIudHM/ZjdmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNhbGxiYWNrLCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgdHlwZSBSZWR1Y2VyPFMsIEEgZXh0ZW5kcyBBY3Rpb24+ID0gKHN0YXRlOiBTLCBhY3Rpb246IEEpID0+IFM7XG5cbmV4cG9ydCBjb25zdCBjb21iaW5lUmVkdWNlcnMgPVxuICA8UywgQSBleHRlbmRzIEFjdGlvbiA9IEFjdGlvbj4ocmVkdWNlcnM6IHsgW1AgaW4ga2V5b2YgU106IFJlZHVjZXI8U1tQXSwgQT4gfSkgPT5cbiAgKHN0YXRlOiBTLCBhY3Rpb246IEEpOiBQYXJ0aWFsPFM+ID0+IHtcbiAgICBjb25zdCBuZXdTdGF0ZSA9IHt9IGFzIFM7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmVkdWNlcnMpIHtcbiAgICAgIG5ld1N0YXRlW2tleV0gPSByZWR1Y2Vyc1trZXldKHN0YXRlW2tleV0sIGFjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgfTtcblxuZXhwb3J0IGNvbnN0IHVzZVN0YXRlbGVzc1JlZHVjZXIgPSA8U3RhdGUsIEEgPSBBY3Rpb24+KFxuICBvbkNoYW5nZTogKHZhbHVlOiBTdGF0ZSkgPT4gdm9pZCxcbiAgc3RhdGU6IFN0YXRlLFxuICByZWR1Y2VyOiAoc3RhdGU6IFN0YXRlLCBhY3Rpb246IEEpID0+IFN0YXRlXG4pID0+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VDYWxsYmFjayhcbiAgICAoYWN0aW9uOiBBKSA9PiB7XG4gICAgICBvbkNoYW5nZShyZWR1Y2VyKHN0YXRlLCBhY3Rpb24pKTtcbiAgICB9LFxuICAgIFtvbkNoYW5nZSwgc3RhdGUsIHJlZHVjZXJdXG4gICk7XG5cbiAgcmV0dXJuIGRpc3BhdGNoO1xufTtcblxuZXhwb3J0IGNvbnN0IERpc3BhdGNoQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8KChhY3Rpb246IEFjdGlvbikgPT4gdm9pZCkgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbmV4cG9ydCBjb25zdCB1c2VEaXNwYXRjaCA9IDxUIGV4dGVuZHMgQWN0aW9uID0gQWN0aW9uPigpOiAoKGFjdGlvbjogVCkgPT4gdm9pZCkgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZUNvbnRleHQoRGlzcGF0Y2hDb250ZXh0KTtcblxuICBpZiAoIWRpc3BhdGNoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVc2UgRGlzcGF0Y2hDb250ZXh0IGZpcnN0LicpO1xuICB9XG5cbiAgcmV0dXJuIGRpc3BhdGNoO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/hooks/useStatelessReducer.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/modifyQuery.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addFilterToQuery: () => (/* binding */ addFilterToQuery),\n/* harmony export */   escapeFilter: () => (/* binding */ escapeFilter),\n/* harmony export */   queryHasFilter: () => (/* binding */ queryHasFilter),\n/* harmony export */   removeFilterFromQuery: () => (/* binding */ removeFilterFromQuery)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/text/string.ts\");\n\n\nfunction queryHasFilter(query, key, value, modifier = \"\") {\n  key = escapeFilter(key);\n  const regex = getFilterRegex(key, value);\n  const matches = query.matchAll(regex);\n  for (const match of matches) {\n    if (modifier === \"-\" && match[0].startsWith(modifier)) {\n      return true;\n    }\n    if (modifier === \"\" && !match[0].startsWith(\"-\")) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction addFilterToQuery(query, key, value, modifier = \"\") {\n  if (queryHasFilter(query, key, value, modifier)) {\n    return query;\n  }\n  key = escapeFilter(key);\n  const filter = `${modifier}${key}:\"${value}\"`;\n  return query === \"\" ? filter : `${query} AND ${filter}`;\n}\nfunction getFilterRegex(key, value) {\n  return new RegExp(`[-]{0,1}\\\\s*${(0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.escapeRegex)(key)}\\\\s*:\\\\s*[\"']{0,1}${(0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.escapeRegex)(value)}[\"']{0,1}`, \"ig\");\n}\nfunction removeFilterFromQuery(query, key, value, modifier = \"\") {\n  key = escapeFilter(key);\n  const regex = getFilterRegex(key, value);\n  const matches = query.matchAll(regex);\n  const opRegex = new RegExp(`\\\\s+(?:AND|OR)\\\\s*$|^\\\\s*(?:AND|OR)\\\\s+`, \"ig\");\n  for (const match of matches) {\n    if (modifier === \"-\" && match[0].startsWith(modifier)) {\n      query = query.replace(regex, \"\").replace(opRegex, \"\");\n    }\n    if (modifier === \"\" && !match[0].startsWith(\"-\")) {\n      query = query.replace(regex, \"\").replace(opRegex, \"\");\n    }\n  }\n  query = query.replace(/AND\\s+OR/gi, \"OR\");\n  query = query.replace(/OR\\s+AND/gi, \"AND\");\n  return query;\n}\nfunction escapeFilter(value) {\n  return value.replace(/:/g, \"\\\\:\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL21vZGlmeVF1ZXJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0QjtBQU9yQixTQUFTLGVBQWUsT0FBZSxLQUFhLE9BQWUsV0FBeUIsSUFBYTtBQUM5RyxRQUFNLGFBQWEsR0FBRztBQUN0QixRQUFNLFFBQVEsZUFBZSxLQUFLLEtBQUs7QUFDdkMsUUFBTSxVQUFVLE1BQU0sU0FBUyxLQUFLO0FBQ3BDLGFBQVcsU0FBUyxTQUFTO0FBQzNCLFFBQUksYUFBYSxPQUFPLE1BQU0sQ0FBQyxFQUFFLFdBQVcsUUFBUSxHQUFHO0FBQ3JELGFBQU87QUFBQSxJQUNUO0FBQ0EsUUFBSSxhQUFhLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxXQUFXLEdBQUcsR0FBRztBQUNoRCxhQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0Y7QUFDQSxTQUFPO0FBQ1Q7QUFLTyxTQUFTLGlCQUFpQixPQUFlLEtBQWEsT0FBZSxXQUF5QixJQUFZO0FBQy9HLE1BQUksZUFBZSxPQUFPLEtBQUssT0FBTyxRQUFRLEdBQUc7QUFDL0MsV0FBTztBQUFBLEVBQ1Q7QUFFQSxRQUFNLGFBQWEsR0FBRztBQUN0QixRQUFNLFNBQVMsR0FBRyxXQUFXLFFBQVE7QUFFckMsU0FBTyxVQUFVLEtBQUssU0FBUyxHQUFHLGFBQWE7QUFDakQ7QUFFQSxTQUFTLGVBQWUsS0FBYSxPQUFlO0FBQ2xELFNBQU8sSUFBSSxPQUFPLGVBQWUsMERBQVcsQ0FBQyxHQUFHLHNCQUFzQiwwREFBVyxDQUFDLEtBQUssY0FBYyxJQUFJO0FBQzNHO0FBS08sU0FBUyxzQkFBc0IsT0FBZSxLQUFhLE9BQWUsV0FBeUIsSUFBWTtBQUNwSCxRQUFNLGFBQWEsR0FBRztBQUN0QixRQUFNLFFBQVEsZUFBZSxLQUFLLEtBQUs7QUFDdkMsUUFBTSxVQUFVLE1BQU0sU0FBUyxLQUFLO0FBQ3BDLFFBQU0sVUFBVSxJQUFJLE9BQU8sMkNBQTJDLElBQUk7QUFDMUUsYUFBVyxTQUFTLFNBQVM7QUFDM0IsUUFBSSxhQUFhLE9BQU8sTUFBTSxDQUFDLEVBQUUsV0FBVyxRQUFRLEdBQUc7QUFDckQsY0FBUSxNQUFNLFFBQVEsT0FBTyxFQUFFLEVBQUUsUUFBUSxTQUFTLEVBQUU7QUFBQSxJQUN0RDtBQUNBLFFBQUksYUFBYSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsV0FBVyxHQUFHLEdBQUc7QUFDaEQsY0FBUSxNQUFNLFFBQVEsT0FBTyxFQUFFLEVBQUUsUUFBUSxTQUFTLEVBQUU7QUFBQSxJQUN0RDtBQUFBLEVBQ0Y7QUFDQSxVQUFRLE1BQU0sUUFBUSxjQUFjLElBQUk7QUFDeEMsVUFBUSxNQUFNLFFBQVEsY0FBYyxLQUFLO0FBQ3pDLFNBQU87QUFDVDtBQU1PLFNBQVMsYUFBYSxPQUFlO0FBQzFDLFNBQU8sTUFBTSxRQUFRLE1BQU0sS0FBSztBQUNsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL21vZGlmeVF1ZXJ5LnRzPzJhMDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXNjYXBlUmVnZXggfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxudHlwZSBNb2RpZmllclR5cGUgPSAnJyB8ICctJztcblxuLyoqXG4gKiBDaGVja3MgZm9yIHRoZSBwcmVzZW5jZSBvZiBhIGdpdmVuIGxhYmVsOlwidmFsdWVcIiBmaWx0ZXIgaW4gdGhlIHF1ZXJ5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlIYXNGaWx0ZXIocXVlcnk6IHN0cmluZywga2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG1vZGlmaWVyOiBNb2RpZmllclR5cGUgPSAnJyk6IGJvb2xlYW4ge1xuICBrZXkgPSBlc2NhcGVGaWx0ZXIoa2V5KTtcbiAgY29uc3QgcmVnZXggPSBnZXRGaWx0ZXJSZWdleChrZXksIHZhbHVlKTtcbiAgY29uc3QgbWF0Y2hlcyA9IHF1ZXJ5Lm1hdGNoQWxsKHJlZ2V4KTtcbiAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzKSB7XG4gICAgaWYgKG1vZGlmaWVyID09PSAnLScgJiYgbWF0Y2hbMF0uc3RhcnRzV2l0aChtb2RpZmllcikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobW9kaWZpZXIgPT09ICcnICYmICFtYXRjaFswXS5zdGFydHNXaXRoKCctJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQWRkcyBhIGxhYmVsOlwidmFsdWVcIiBleHByZXNzaW9uIHRvIHRoZSBxdWVyeS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEZpbHRlclRvUXVlcnkocXVlcnk6IHN0cmluZywga2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG1vZGlmaWVyOiBNb2RpZmllclR5cGUgPSAnJyk6IHN0cmluZyB7XG4gIGlmIChxdWVyeUhhc0ZpbHRlcihxdWVyeSwga2V5LCB2YWx1ZSwgbW9kaWZpZXIpKSB7XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAga2V5ID0gZXNjYXBlRmlsdGVyKGtleSk7XG4gIGNvbnN0IGZpbHRlciA9IGAke21vZGlmaWVyfSR7a2V5fTpcIiR7dmFsdWV9XCJgO1xuXG4gIHJldHVybiBxdWVyeSA9PT0gJycgPyBmaWx0ZXIgOiBgJHtxdWVyeX0gQU5EICR7ZmlsdGVyfWA7XG59XG5cbmZ1bmN0aW9uIGdldEZpbHRlclJlZ2V4KGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKGBbLV17MCwxfVxcXFxzKiR7ZXNjYXBlUmVnZXgoa2V5KX1cXFxccyo6XFxcXHMqW1wiJ117MCwxfSR7ZXNjYXBlUmVnZXgodmFsdWUpfVtcIiddezAsMX1gLCAnaWcnKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgbGFiZWw6XCJ2YWx1ZVwiIGV4cHJlc3Npb24gZnJvbSB0aGUgcXVlcnkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWx0ZXJGcm9tUXVlcnkocXVlcnk6IHN0cmluZywga2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG1vZGlmaWVyOiBNb2RpZmllclR5cGUgPSAnJyk6IHN0cmluZyB7XG4gIGtleSA9IGVzY2FwZUZpbHRlcihrZXkpO1xuICBjb25zdCByZWdleCA9IGdldEZpbHRlclJlZ2V4KGtleSwgdmFsdWUpO1xuICBjb25zdCBtYXRjaGVzID0gcXVlcnkubWF0Y2hBbGwocmVnZXgpO1xuICBjb25zdCBvcFJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXHMrKD86QU5EfE9SKVxcXFxzKiR8XlxcXFxzKig/OkFORHxPUilcXFxccytgLCAnaWcnKTtcbiAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzKSB7XG4gICAgaWYgKG1vZGlmaWVyID09PSAnLScgJiYgbWF0Y2hbMF0uc3RhcnRzV2l0aChtb2RpZmllcikpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkucmVwbGFjZShyZWdleCwgJycpLnJlcGxhY2Uob3BSZWdleCwgJycpO1xuICAgIH1cbiAgICBpZiAobW9kaWZpZXIgPT09ICcnICYmICFtYXRjaFswXS5zdGFydHNXaXRoKCctJykpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkucmVwbGFjZShyZWdleCwgJycpLnJlcGxhY2Uob3BSZWdleCwgJycpO1xuICAgIH1cbiAgfVxuICBxdWVyeSA9IHF1ZXJ5LnJlcGxhY2UoL0FORFxccytPUi9naSwgJ09SJyk7XG4gIHF1ZXJ5ID0gcXVlcnkucmVwbGFjZSgvT1JcXHMrQU5EL2dpLCAnQU5EJyk7XG4gIHJldHVybiBxdWVyeTtcbn1cblxuLyoqXG4gKiBGaWx0ZXJzIGNhbiBwb3NzaWJseSBjb250YWluIGNvbG9ucywgd2hpY2ggYXJlIHVzZWQgYXMgYSBzZXBhcmF0b3IgaW4gdGhlIHF1ZXJ5LlxuICogVXNlIHRoaXMgZnVuY3Rpb24gdG8gZXNjYXBlIGZpbHRlciBrZXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlRmlsdGVyKHZhbHVlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoLzovZywgJ1xcXFw6Jyk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/modifyQuery.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/module.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   plugin: () => (/* binding */ plugin)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/datasource.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/common.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/appEvents.ts\");\n/* harmony import */ var _components_QueryEditor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/index.tsx\");\n/* harmony import */ var _configuration_ConfigEditor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/configuration/ConfigEditor.tsx\");\n/* harmony import */ var _datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/datasource.ts\");\n/* harmony import */ var _tracking__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/tracking.ts\");\n\n\n\n\n\n\n\nconst plugin = new _grafana_data__WEBPACK_IMPORTED_MODULE_4__.DataSourcePlugin(_datasource__WEBPACK_IMPORTED_MODULE_2__.ElasticDatasource).setQueryEditor(_components_QueryEditor__WEBPACK_IMPORTED_MODULE_0__.QueryEditor).setConfigEditor(_configuration_ConfigEditor__WEBPACK_IMPORTED_MODULE_1__.ConfigEditor);\n(0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_5__.getAppEvents)().subscribe(_grafana_data__WEBPACK_IMPORTED_MODULE_6__.DashboardLoadedEvent, _tracking__WEBPACK_IMPORTED_MODULE_3__.onDashboardLoadedHandler);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL21vZHVsZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDMUI7QUFFRDtBQUNDO0FBQ0s7QUFDTztBQUdsQyxNQUFNLFNBQVMsSUFBSSwyREFBZ0IsQ0FBQywwREFBaUIsRUFBRSxlQUFlLGdFQUFXLEVBQUUsZ0JBQWdCLHFFQUFZO0FBR3RILDhEQUFZLENBQUMsRUFBRSxVQUFvRCwrREFBb0IsRUFBRSwrREFBd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvZWxhc3RpY3NlYXJjaC9tb2R1bGUudHM/MTI3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXNoYm9hcmRMb2FkZWRFdmVudCwgRGF0YVNvdXJjZVBsdWdpbiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgZ2V0QXBwRXZlbnRzIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5cbmltcG9ydCB7IFF1ZXJ5RWRpdG9yIH0gZnJvbSAnLi9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yJztcbmltcG9ydCB7IENvbmZpZ0VkaXRvciB9IGZyb20gJy4vY29uZmlndXJhdGlvbi9Db25maWdFZGl0b3InO1xuaW1wb3J0IHsgRWxhc3RpY0RhdGFzb3VyY2UgfSBmcm9tICcuL2RhdGFzb3VyY2UnO1xuaW1wb3J0IHsgb25EYXNoYm9hcmRMb2FkZWRIYW5kbGVyIH0gZnJvbSAnLi90cmFja2luZyc7XG5pbXBvcnQgeyBFbGFzdGljc2VhcmNoUXVlcnkgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IHBsdWdpbiA9IG5ldyBEYXRhU291cmNlUGx1Z2luKEVsYXN0aWNEYXRhc291cmNlKS5zZXRRdWVyeUVkaXRvcihRdWVyeUVkaXRvcikuc2V0Q29uZmlnRWRpdG9yKENvbmZpZ0VkaXRvcik7XG5cbi8vIFN1YnNjcmliZSB0byBvbiBkYXNoYm9hcmQgbG9hZGVkIGV2ZW50IHNvIHRoYXQgd2UgY2FuIHRyYWNrIHBsdWdpbiBhZG9wdGlvblxuZ2V0QXBwRXZlbnRzKCkuc3Vic2NyaWJlPERhc2hib2FyZExvYWRlZEV2ZW50PEVsYXN0aWNzZWFyY2hRdWVyeT4+KERhc2hib2FyZExvYWRlZEV2ZW50LCBvbkRhc2hib2FyZExvYWRlZEhhbmRsZXIpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/module.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/queryDef.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultBucketAgg: () => (/* binding */ defaultBucketAgg),\n/* harmony export */   defaultMetricAgg: () => (/* binding */ defaultMetricAgg),\n/* harmony export */   extendedStats: () => (/* binding */ extendedStats),\n/* harmony export */   findMetricById: () => (/* binding */ findMetricById),\n/* harmony export */   hasMetricOfType: () => (/* binding */ hasMetricOfType),\n/* harmony export */   highlightTags: () => (/* binding */ highlightTags),\n/* harmony export */   isPipelineAgg: () => (/* binding */ isPipelineAgg),\n/* harmony export */   isPipelineAggWithMultipleBucketPaths: () => (/* binding */ isPipelineAggWithMultipleBucketPaths),\n/* harmony export */   movingAvgModelOptions: () => (/* binding */ movingAvgModelOptions)\n/* harmony export */ });\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n\n\nconst extendedStats = [\n  { label: \"Avg\", value: \"avg\" },\n  { label: \"Min\", value: \"min\" },\n  { label: \"Max\", value: \"max\" },\n  { label: \"Sum\", value: \"sum\" },\n  { label: \"Count\", value: \"count\" },\n  { label: \"Std Dev\", value: \"std_deviation\" },\n  { label: \"Std Dev Upper\", value: \"std_deviation_bounds_upper\" },\n  { label: \"Std Dev Lower\", value: \"std_deviation_bounds_lower\" }\n];\nconst movingAvgModelOptions = [\n  { label: \"Simple\", value: \"simple\" },\n  { label: \"Linear\", value: \"linear\" },\n  { label: \"Exponentially Weighted\", value: \"ewma\" },\n  { label: \"Holt Linear\", value: \"holt\" },\n  { label: \"Holt Winters\", value: \"holt_winters\" }\n];\nconst highlightTags = {\n  pre: \"@HIGHLIGHT@\",\n  post: \"@/HIGHLIGHT@\"\n};\nfunction defaultMetricAgg(id = \"1\") {\n  return { type: \"count\", id };\n}\nfunction defaultBucketAgg(id = \"1\") {\n  return { type: \"date_histogram\", id, settings: { interval: \"auto\" } };\n}\nconst findMetricById = (metrics, id) => metrics.find((metric) => metric.id === id);\nfunction hasMetricOfType(target, type) {\n  return !!target?.metrics?.some((m) => m.type === type);\n}\nfunction isPipelineAgg(metricType) {\n  return metricType in _components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_0__.pipelineOptions;\n}\nfunction isPipelineAggWithMultipleBucketPaths(metricType) {\n  return !!_components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_0__.metricAggregationConfig[metricType].supportsMultipleBucketPaths;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL3F1ZXJ5RGVmLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXlEO0FBVWxELE1BQU0sZ0JBQWdDO0FBQUEsRUFDM0MsRUFBRSxPQUFPLE9BQU8sT0FBTyxNQUFNO0FBQUEsRUFDN0IsRUFBRSxPQUFPLE9BQU8sT0FBTyxNQUFNO0FBQUEsRUFDN0IsRUFBRSxPQUFPLE9BQU8sT0FBTyxNQUFNO0FBQUEsRUFDN0IsRUFBRSxPQUFPLE9BQU8sT0FBTyxNQUFNO0FBQUEsRUFDN0IsRUFBRSxPQUFPLFNBQVMsT0FBTyxRQUFRO0FBQUEsRUFDakMsRUFBRSxPQUFPLFdBQVcsT0FBTyxnQkFBZ0I7QUFBQSxFQUMzQyxFQUFFLE9BQU8saUJBQWlCLE9BQU8sNkJBQTZCO0FBQUEsRUFDOUQsRUFBRSxPQUFPLGlCQUFpQixPQUFPLDZCQUE2QjtBQUNoRTtBQUVPLE1BQU0sd0JBQW9EO0FBQUEsRUFDL0QsRUFBRSxPQUFPLFVBQVUsT0FBTyxTQUFTO0FBQUEsRUFDbkMsRUFBRSxPQUFPLFVBQVUsT0FBTyxTQUFTO0FBQUEsRUFDbkMsRUFBRSxPQUFPLDBCQUEwQixPQUFPLE9BQU87QUFBQSxFQUNqRCxFQUFFLE9BQU8sZUFBZSxPQUFPLE9BQU87QUFBQSxFQUN0QyxFQUFFLE9BQU8sZ0JBQWdCLE9BQU8sZUFBZTtBQUNqRDtBQUVPLE1BQU0sZ0JBQWdCO0FBQUEsRUFDM0IsS0FBSztBQUFBLEVBQ0wsTUFBTTtBQUNSO0FBRU8sU0FBUyxpQkFBaUIsS0FBSyxLQUF3QjtBQUM1RCxTQUFPLEVBQUUsTUFBTSxTQUFTLEdBQUc7QUFDN0I7QUFFTyxTQUFTLGlCQUFpQixLQUFLLEtBQW9CO0FBQ3hELFNBQU8sRUFBRSxNQUFNLGtCQUFrQixJQUFJLFVBQVUsRUFBRSxVQUFVLE9BQU8sRUFBRTtBQUN0RTtBQUVPLE1BQU0saUJBQWlCLENBQUMsU0FBOEIsT0FDM0QsUUFBUSxLQUFLLENBQUMsV0FBVyxPQUFPLE9BQU8sRUFBRTtBQUVwQyxTQUFTLGdCQUFnQixRQUE0QixNQUFzQztBQUNoRyxTQUFPLENBQUMsQ0FBQyxRQUFRLFNBQVMsS0FBSyxDQUFDLE1BQU0sRUFBRSxTQUFTLElBQUk7QUFDdkQ7QUFJTyxTQUFTLGNBQWMsWUFBbUM7QUFDL0QsU0FBTyxjQUFjLG1HQUFlO0FBQ3RDO0FBRU8sU0FBUyxxQ0FBcUMsWUFBbUM7QUFDdEYsU0FBTyxDQUFDLENBQUMsMkdBQXVCLENBQUMsVUFBVSxFQUFFO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2VsYXN0aWNzZWFyY2gvcXVlcnlEZWYudHM/ZjA1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZywgcGlwZWxpbmVPcHRpb25zIH0gZnJvbSAnLi9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci91dGlscyc7XG5pbXBvcnQge1xuICBFbGFzdGljc2VhcmNoUXVlcnksXG4gIEV4dGVuZGVkU3RhdCxcbiAgTWV0cmljQWdncmVnYXRpb24sXG4gIE1vdmluZ0F2ZXJhZ2VNb2RlbE9wdGlvbixcbiAgTWV0cmljQWdncmVnYXRpb25UeXBlLFxuICBEYXRlSGlzdG9ncmFtLFxufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGV4dGVuZGVkU3RhdHM6IEV4dGVuZGVkU3RhdFtdID0gW1xuICB7IGxhYmVsOiAnQXZnJywgdmFsdWU6ICdhdmcnIH0sXG4gIHsgbGFiZWw6ICdNaW4nLCB2YWx1ZTogJ21pbicgfSxcbiAgeyBsYWJlbDogJ01heCcsIHZhbHVlOiAnbWF4JyB9LFxuICB7IGxhYmVsOiAnU3VtJywgdmFsdWU6ICdzdW0nIH0sXG4gIHsgbGFiZWw6ICdDb3VudCcsIHZhbHVlOiAnY291bnQnIH0sXG4gIHsgbGFiZWw6ICdTdGQgRGV2JywgdmFsdWU6ICdzdGRfZGV2aWF0aW9uJyB9LFxuICB7IGxhYmVsOiAnU3RkIERldiBVcHBlcicsIHZhbHVlOiAnc3RkX2RldmlhdGlvbl9ib3VuZHNfdXBwZXInIH0sXG4gIHsgbGFiZWw6ICdTdGQgRGV2IExvd2VyJywgdmFsdWU6ICdzdGRfZGV2aWF0aW9uX2JvdW5kc19sb3dlcicgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBtb3ZpbmdBdmdNb2RlbE9wdGlvbnM6IE1vdmluZ0F2ZXJhZ2VNb2RlbE9wdGlvbltdID0gW1xuICB7IGxhYmVsOiAnU2ltcGxlJywgdmFsdWU6ICdzaW1wbGUnIH0sXG4gIHsgbGFiZWw6ICdMaW5lYXInLCB2YWx1ZTogJ2xpbmVhcicgfSxcbiAgeyBsYWJlbDogJ0V4cG9uZW50aWFsbHkgV2VpZ2h0ZWQnLCB2YWx1ZTogJ2V3bWEnIH0sXG4gIHsgbGFiZWw6ICdIb2x0IExpbmVhcicsIHZhbHVlOiAnaG9sdCcgfSxcbiAgeyBsYWJlbDogJ0hvbHQgV2ludGVycycsIHZhbHVlOiAnaG9sdF93aW50ZXJzJyB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGhpZ2hsaWdodFRhZ3MgPSB7XG4gIHByZTogJ0BISUdITElHSFRAJyxcbiAgcG9zdDogJ0AvSElHSExJR0hUQCcsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdE1ldHJpY0FnZyhpZCA9ICcxJyk6IE1ldHJpY0FnZ3JlZ2F0aW9uIHtcbiAgcmV0dXJuIHsgdHlwZTogJ2NvdW50JywgaWQgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRCdWNrZXRBZ2coaWQgPSAnMScpOiBEYXRlSGlzdG9ncmFtIHtcbiAgcmV0dXJuIHsgdHlwZTogJ2RhdGVfaGlzdG9ncmFtJywgaWQsIHNldHRpbmdzOiB7IGludGVydmFsOiAnYXV0bycgfSB9O1xufVxuXG5leHBvcnQgY29uc3QgZmluZE1ldHJpY0J5SWQgPSAobWV0cmljczogTWV0cmljQWdncmVnYXRpb25bXSwgaWQ6IE1ldHJpY0FnZ3JlZ2F0aW9uWydpZCddKSA9PlxuICBtZXRyaWNzLmZpbmQoKG1ldHJpYykgPT4gbWV0cmljLmlkID09PSBpZCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNNZXRyaWNPZlR5cGUodGFyZ2V0OiBFbGFzdGljc2VhcmNoUXVlcnksIHR5cGU6IE1ldHJpY0FnZ3JlZ2F0aW9uVHlwZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gISF0YXJnZXQ/Lm1ldHJpY3M/LnNvbWUoKG0pID0+IG0udHlwZSA9PT0gdHlwZSk7XG59XG5cbi8vIEV2ZW4gaWYgd2UgaGF2ZSB0eXBlIGd1YXJkcyB3aGVuIGJ1aWxkaW5nIGEgcXVlcnksIHdlIGN1cnJlbnRseSBoYXZlIG5vIHdheSBvZiBnZXR0aW5nIHRoaXMgaW5mb3JtYXRpb24gZnJvbSB0aGUgcmVzcG9uc2UuXG4vLyBXZSBzaG91bGQgdHJ5IHRvIGZpbmQgYSBiZXR0ZXIgKHR5cGUgc2FmZSkgd2F5IG9mIGRvaW5nIHRoZSBmb2xsb3dpbmcgMi5cbmV4cG9ydCBmdW5jdGlvbiBpc1BpcGVsaW5lQWdnKG1ldHJpY1R5cGU6IE1ldHJpY0FnZ3JlZ2F0aW9uVHlwZSkge1xuICByZXR1cm4gbWV0cmljVHlwZSBpbiBwaXBlbGluZU9wdGlvbnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BpcGVsaW5lQWdnV2l0aE11bHRpcGxlQnVja2V0UGF0aHMobWV0cmljVHlwZTogTWV0cmljQWdncmVnYXRpb25UeXBlKSB7XG4gIHJldHVybiAhIW1ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnW21ldHJpY1R5cGVdLnN1cHBvcnRzTXVsdGlwbGVCdWNrZXRQYXRocztcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/queryDef.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/tracking.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onDashboardLoadedHandler: () => (/* binding */ onDashboardLoadedHandler),\n/* harmony export */   trackAnnotationQuery: () => (/* binding */ trackAnnotationQuery),\n/* harmony export */   trackQuery: () => (/* binding */ trackQuery)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/app.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var app_features_variables_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/features/variables/utils.ts\");\n/* harmony import */ var _datasource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/datasource.ts\");\n/* harmony import */ var _plugin_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/plugin.json\");\n\n\n\n\n\n\nconst onDashboardLoadedHandler = ({\n  payload: { dashboardId, orgId, grafanaVersion, queries }\n}) => {\n  try {\n    const elasticsearchQueries = queries[_plugin_json__WEBPACK_IMPORTED_MODULE_2__.id].filter((query) => !query.hide);\n    if (!elasticsearchQueries?.length) {\n      return;\n    }\n    const queriesWithTemplateVariables = elasticsearchQueries.filter(isQueryWithTemplateVariables);\n    const queriesWithLuceneQuery = elasticsearchQueries.filter((query) => !!query.query);\n    const logsQueries = elasticsearchQueries.filter((query) => getQueryType(query) === \"logs\");\n    const metricQueries = elasticsearchQueries.filter((query) => getQueryType(query) === \"metric\");\n    const rawDataQueries = elasticsearchQueries.filter((query) => getQueryType(query) === \"raw_data\");\n    const rawDocumentQueries = elasticsearchQueries.filter((query) => getQueryType(query) === \"raw_document\");\n    const queriesWithChangedLineLimit = elasticsearchQueries.filter(isQueryWithChangedLineLimit);\n    const event = {\n      grafana_version: grafanaVersion,\n      dashboard_id: dashboardId,\n      org_id: orgId,\n      queries_count: elasticsearchQueries.length,\n      logs_queries_count: logsQueries.length,\n      metric_queries_count: metricQueries.length,\n      raw_data_queries_count: rawDataQueries.length,\n      raw_document_queries_count: rawDocumentQueries.length,\n      queries_with_template_variables_count: queriesWithTemplateVariables.length,\n      queries_with_changed_line_limit_count: queriesWithChangedLineLimit.length,\n      queries_with_lucene_query_count: queriesWithLuceneQuery.length\n    };\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__.reportInteraction)(\"grafana_elasticsearch_dashboard_loaded\", event);\n  } catch (error) {\n    console.error(\"error in elasticsearch tracking handler\", error);\n  }\n};\nconst getQueryType = (query) => {\n  if (!query.metrics || !query.metrics.length) {\n    return void 0;\n  }\n  const nonMetricQueryTypes = [\"logs\", \"raw_data\", \"raw_document\"];\n  if (nonMetricQueryTypes.includes(query.metrics[0].type)) {\n    return query.metrics[0].type;\n  }\n  return \"metric\";\n};\nconst getLineLimit = (query) => {\n  if (query.metrics?.[0]?.type !== \"logs\") {\n    return void 0;\n  }\n  const lineLimit = query.metrics?.[0].settings?.limit;\n  return lineLimit ? parseInt(lineLimit, 10) : void 0;\n};\nconst isQueryWithChangedLineLimit = (query) => {\n  const lineLimit = getLineLimit(query);\n  return lineLimit !== void 0 && lineLimit !== 500;\n};\nconst isQueryWithTemplateVariables = (query) => {\n  return app_features_variables_utils__WEBPACK_IMPORTED_MODULE_0__.variableRegex.test(query.query ?? \"\");\n};\nconst shouldNotReportBasedOnRefId = (refId) => {\n  if (refId.startsWith(_datasource__WEBPACK_IMPORTED_MODULE_1__.REF_ID_STARTER_LOG_VOLUME)) {\n    return true;\n  }\n  return false;\n};\nfunction trackQuery(response, request, startTime) {\n  const { targets: queries, app } = request;\n  if (app === _grafana_data__WEBPACK_IMPORTED_MODULE_4__.CoreApp.Dashboard || app === _grafana_data__WEBPACK_IMPORTED_MODULE_4__.CoreApp.PanelViewer) {\n    return;\n  }\n  for (const query of queries) {\n    if (shouldNotReportBasedOnRefId(query.refId)) {\n      return;\n    }\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__.reportInteraction)(\"grafana_elasticsearch_query_executed\", {\n      app,\n      grafana_version: _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__.config.buildInfo.version,\n      with_lucene_query: query.query ? true : false,\n      query_type: getQueryType(query),\n      line_limit: getLineLimit(query),\n      alias: query.alias,\n      has_error: response.error !== void 0,\n      has_data: response.data.some((frame) => frame.length > 0),\n      simultaneously_sent_query_count: queries.length,\n      time_range_from: request?.range?.from?.toISOString(),\n      time_range_to: request?.range?.to?.toISOString(),\n      time_taken: Date.now() - startTime.getTime()\n    });\n  }\n}\nfunction trackAnnotationQuery(annotation) {\n  (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__.reportInteraction)(\"grafana_elasticsearch_annotation_query_executed\", {\n    grafana_version: _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__.config.buildInfo.version,\n    has_target_query: !!annotation.target?.query,\n    has_query: !!annotation.query,\n    has_time_field: !!annotation.timeField,\n    has_time_end_field: !!annotation.timeEndField,\n    has_tags_field: !!annotation.tagsField,\n    has_text_field: !!annotation.textField,\n    has_index: !!annotation.index\n  });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL3RyYWNraW5nLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBbUY7QUFDekM7QUFDWjtBQUVZO0FBQ25CO0FBaUNoQixNQUFNLDJCQUEyQixDQUFDO0FBQUEsRUFDdkMsU0FBUyxFQUFFLGFBQWEsT0FBTyxnQkFBZ0IsUUFBUTtBQUN6RCxNQUFnRDtBQUM5QyxNQUFJO0FBRUYsVUFBTSx1QkFBdUIsUUFBUSw0Q0FBYSxFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUMsTUFBTSxJQUFJO0FBQ2pGLFFBQUksQ0FBQyxzQkFBc0IsUUFBUTtBQUNqQztBQUFBLElBQ0Y7QUFFQSxVQUFNLCtCQUErQixxQkFBcUIsT0FBTyw0QkFBNEI7QUFDN0YsVUFBTSx5QkFBeUIscUJBQXFCLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLEtBQUs7QUFDbkYsVUFBTSxjQUFjLHFCQUFxQixPQUFPLENBQUMsVUFBVSxhQUFhLEtBQUssTUFBTSxNQUFNO0FBQ3pGLFVBQU0sZ0JBQWdCLHFCQUFxQixPQUFPLENBQUMsVUFBVSxhQUFhLEtBQUssTUFBTSxRQUFRO0FBQzdGLFVBQU0saUJBQWlCLHFCQUFxQixPQUFPLENBQUMsVUFBVSxhQUFhLEtBQUssTUFBTSxVQUFVO0FBQ2hHLFVBQU0scUJBQXFCLHFCQUFxQixPQUFPLENBQUMsVUFBVSxhQUFhLEtBQUssTUFBTSxjQUFjO0FBQ3hHLFVBQU0sOEJBQThCLHFCQUFxQixPQUFPLDJCQUEyQjtBQUUzRixVQUFNLFFBQXFEO0FBQUEsTUFDekQsaUJBQWlCO0FBQUEsTUFDakIsY0FBYztBQUFBLE1BQ2QsUUFBUTtBQUFBLE1BQ1IsZUFBZSxxQkFBcUI7QUFBQSxNQUNwQyxvQkFBb0IsWUFBWTtBQUFBLE1BQ2hDLHNCQUFzQixjQUFjO0FBQUEsTUFDcEMsd0JBQXdCLGVBQWU7QUFBQSxNQUN2Qyw0QkFBNEIsbUJBQW1CO0FBQUEsTUFDL0MsdUNBQXVD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ZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL3RyYWNraW5nLnRzPzMwODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29yZUFwcCwgRGFzaGJvYXJkTG9hZGVkRXZlbnQsIERhdGFRdWVyeVJlcXVlc3QsIERhdGFRdWVyeVJlc3BvbnNlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBjb25maWcsIHJlcG9ydEludGVyYWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyB2YXJpYWJsZVJlZ2V4IH0gZnJvbSAnYXBwL2ZlYXR1cmVzL3ZhcmlhYmxlcy91dGlscyc7XG5cbmltcG9ydCB7IFJFRl9JRF9TVEFSVEVSX0xPR19WT0xVTUUgfSBmcm9tICcuL2RhdGFzb3VyY2UnO1xuaW1wb3J0IHBsdWdpbkpzb24gZnJvbSAnLi9wbHVnaW4uanNvbic7XG5pbXBvcnQgeyBFbGFzdGljc2VhcmNoQW5ub3RhdGlvblF1ZXJ5LCBFbGFzdGljc2VhcmNoUXVlcnkgfSBmcm9tICcuL3R5cGVzJztcblxudHlwZSBFbGFzdGljU2VhcmNoT25EYXNoYm9hcmRMb2FkZWRUcmFja2luZ0V2ZW50ID0ge1xuICBncmFmYW5hX3ZlcnNpb24/OiBzdHJpbmc7XG4gIGRhc2hib2FyZF9pZD86IHN0cmluZztcbiAgb3JnX2lkPzogbnVtYmVyO1xuXG4gIC8qIFRoZSBudW1iZXIgb2YgRWxhc3RpY3NlYXJjaCBxdWVyaWVzIHByZXNlbnQgaW4gdGhlIGRhc2hib2FyZCovXG4gIHF1ZXJpZXNfY291bnQ6IG51bWJlcjtcblxuICAvKiBUaGUgbnVtYmVyIG9mIEVsYXN0aWNzZWFyY2ggbG9ncyBxdWVyaWVzIHByZXNlbnQgaW4gdGhlIGRhc2hib2FyZCovXG4gIGxvZ3NfcXVlcmllc19jb3VudDogbnVtYmVyO1xuXG4gIC8qIFRoZSBudW1iZXIgb2YgRWxhc3RpY3NlYXJjaCBtZXRyaWMgcXVlcmllcyBwcmVzZW50IGluIHRoZSBkYXNoYm9hcmQqL1xuICBtZXRyaWNfcXVlcmllc19jb3VudDogbnVtYmVyO1xuXG4gIC8qIFRoZSBudW1iZXIgb2YgRWxhc3RpY3NlYXJjaCByYXcgZGF0YSBxdWVyaWVzIHByZXNlbnQgaW4gdGhlIGRhc2hib2FyZCovXG4gIHJhd19kYXRhX3F1ZXJpZXNfY291bnQ6IG51bWJlcjtcblxuICAvKiBUaGUgbnVtYmVyIG9mIEVsYXN0aWNzZWFyY2ggcmF3IGRvY3VtZW50cyBxdWVyaWVzIHByZXNlbnQgaW4gdGhlIGRhc2hib2FyZCovXG4gIHJhd19kb2N1bWVudF9xdWVyaWVzX2NvdW50OiBudW1iZXI7XG5cbiAgLyogVGhlIG51bWJlciBvZiBFbGFzdGljc2VhcmNoIHF1ZXJpZXMgd2l0aCB1c2VkIHRlbXBsYXRlIHZhcmlhYmxlcyBwcmVzZW50IGluIHRoZSBkYXNoYm9hcmQqL1xuICBxdWVyaWVzX3dpdGhfdGVtcGxhdGVfdmFyaWFibGVzX2NvdW50OiBudW1iZXI7XG5cbiAgLyogVGhlIG51bWJlciBvZiBFbGFzdGljc2VhcmNoIHF1ZXJpZXMgd2l0aCBjaGFuZ2VkIGxpbmUgbGltaXQgcHJlc2VudCBpbiB0aGUgZGFzaGJvYXJkKi9cbiAgcXVlcmllc193aXRoX2NoYW5nZWRfbGluZV9saW1pdF9jb3VudDogbnVtYmVyO1xuXG4gIC8qIFRoZSBudW1iZXIgb2YgRWxhc3RpY3NlYXJjaCBxdWVyaWVzIHdpdGggbHVjZW5lIHF1ZXJ5IHByZXNlbnQgaW4gdGhlIGRhc2hib2FyZCovXG4gIHF1ZXJpZXNfd2l0aF9sdWNlbmVfcXVlcnlfY291bnQ6IG51bWJlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBvbkRhc2hib2FyZExvYWRlZEhhbmRsZXIgPSAoe1xuICBwYXlsb2FkOiB7IGRhc2hib2FyZElkLCBvcmdJZCwgZ3JhZmFuYVZlcnNpb24sIHF1ZXJpZXMgfSxcbn06IERhc2hib2FyZExvYWRlZEV2ZW50PEVsYXN0aWNzZWFyY2hRdWVyeT4pID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdHJhY2sgdmlzaWJsZSBFbGFzdGljU2VhcmNoIHF1ZXJpZXNcbiAgICBjb25zdCBlbGFzdGljc2VhcmNoUXVlcmllcyA9IHF1ZXJpZXNbcGx1Z2luSnNvbi5pZF0uZmlsdGVyKChxdWVyeSkgPT4gIXF1ZXJ5LmhpZGUpO1xuICAgIGlmICghZWxhc3RpY3NlYXJjaFF1ZXJpZXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHF1ZXJpZXNXaXRoVGVtcGxhdGVWYXJpYWJsZXMgPSBlbGFzdGljc2VhcmNoUXVlcmllcy5maWx0ZXIoaXNRdWVyeVdpdGhUZW1wbGF0ZVZhcmlhYmxlcyk7XG4gICAgY29uc3QgcXVlcmllc1dpdGhMdWNlbmVRdWVyeSA9IGVsYXN0aWNzZWFyY2hRdWVyaWVzLmZpbHRlcigocXVlcnkpID0+ICEhcXVlcnkucXVlcnkpO1xuICAgIGNvbnN0IGxvZ3NRdWVyaWVzID0gZWxhc3RpY3NlYXJjaFF1ZXJpZXMuZmlsdGVyKChxdWVyeSkgPT4gZ2V0UXVlcnlUeXBlKHF1ZXJ5KSA9PT0gJ2xvZ3MnKTtcbiAgICBjb25zdCBtZXRyaWNRdWVyaWVzID0gZWxhc3RpY3NlYXJjaFF1ZXJpZXMuZmlsdGVyKChxdWVyeSkgPT4gZ2V0UXVlcnlUeXBlKHF1ZXJ5KSA9PT0gJ21ldHJpYycpO1xuICAgIGNvbnN0IHJhd0RhdGFRdWVyaWVzID0gZWxhc3RpY3NlYXJjaFF1ZXJpZXMuZmlsdGVyKChxdWVyeSkgPT4gZ2V0UXVlcnlUeXBlKHF1ZXJ5KSA9PT0gJ3Jhd19kYXRhJyk7XG4gICAgY29uc3QgcmF3RG9jdW1lbnRRdWVyaWVzID0gZWxhc3RpY3NlYXJjaFF1ZXJpZXMuZmlsdGVyKChxdWVyeSkgPT4gZ2V0UXVlcnlUeXBlKHF1ZXJ5KSA9PT0gJ3Jhd19kb2N1bWVudCcpO1xuICAgIGNvbnN0IHF1ZXJpZXNXaXRoQ2hhbmdlZExpbmVMaW1pdCA9IGVsYXN0aWNzZWFyY2hRdWVyaWVzLmZpbHRlcihpc1F1ZXJ5V2l0aENoYW5nZWRMaW5lTGltaXQpO1xuXG4gICAgY29uc3QgZXZlbnQ6IEVsYXN0aWNTZWFyY2hPbkRhc2hib2FyZExvYWRlZFRyYWNraW5nRXZlbnQgPSB7XG4gICAgICBncmFmYW5hX3ZlcnNpb246IGdyYWZhbmFWZXJzaW9uLFxuICAgICAgZGFzaGJvYXJkX2lkOiBkYXNoYm9hcmRJZCxcbiAgICAgIG9yZ19pZDogb3JnSWQsXG4gICAgICBxdWVyaWVzX2NvdW50OiBlbGFzdGljc2VhcmNoUXVlcmllcy5sZW5ndGgsXG4gICAgICBsb2dzX3F1ZXJpZXNfY291bnQ6IGxvZ3NRdWVyaWVzLmxlbmd0aCxcbiAgICAgIG1ldHJpY19xdWVyaWVzX2NvdW50OiBtZXRyaWNRdWVyaWVzLmxlbmd0aCxcbiAgICAgIHJhd19kYXRhX3F1ZXJpZXNfY291bnQ6IHJhd0RhdGFRdWVyaWVzLmxlbmd0aCxcbiAgICAgIHJhd19kb2N1bWVudF9xdWVyaWVzX2NvdW50OiByYXdEb2N1bWVudFF1ZXJpZXMubGVuZ3RoLFxuICAgICAgcXVlcmllc193aXRoX3RlbXBsYXRlX3ZhcmlhYmxlc19jb3VudDogcXVlcmllc1dpdGhUZW1wbGF0ZVZhcmlhYmxlcy5sZW5ndGgsXG4gICAgICBxdWVyaWVzX3dpdGhfY2hhbmdlZF9saW5lX2xpbWl0X2NvdW50OiBxdWVyaWVzV2l0aENoYW5nZWRMaW5lTGltaXQubGVuZ3RoLFxuICAgICAgcXVlcmllc193aXRoX2x1Y2VuZV9xdWVyeV9jb3VudDogcXVlcmllc1dpdGhMdWNlbmVRdWVyeS5sZW5ndGgsXG4gICAgfTtcblxuICAgIHJlcG9ydEludGVyYWN0aW9uKCdncmFmYW5hX2VsYXN0aWNzZWFyY2hfZGFzaGJvYXJkX2xvYWRlZCcsIGV2ZW50KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdlcnJvciBpbiBlbGFzdGljc2VhcmNoIHRyYWNraW5nIGhhbmRsZXInLCBlcnJvcik7XG4gIH1cbn07XG5cbmNvbnN0IGdldFF1ZXJ5VHlwZSA9IChxdWVyeTogRWxhc3RpY3NlYXJjaFF1ZXJ5KTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKCFxdWVyeS5tZXRyaWNzIHx8ICFxdWVyeS5tZXRyaWNzLmxlbmd0aCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgY29uc3Qgbm9uTWV0cmljUXVlcnlUeXBlcyA9IFsnbG9ncycsICdyYXdfZGF0YScsICdyYXdfZG9jdW1lbnQnXTtcbiAgaWYgKG5vbk1ldHJpY1F1ZXJ5VHlwZXMuaW5jbHVkZXMocXVlcnkubWV0cmljc1swXS50eXBlKSkge1xuICAgIHJldHVybiBxdWVyeS5tZXRyaWNzWzBdLnR5cGU7XG4gIH1cbiAgcmV0dXJuICdtZXRyaWMnO1xufTtcblxuY29uc3QgZ2V0TGluZUxpbWl0ID0gKHF1ZXJ5OiBFbGFzdGljc2VhcmNoUXVlcnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAocXVlcnkubWV0cmljcz8uWzBdPy50eXBlICE9PSAnbG9ncycpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgbGluZUxpbWl0ID0gcXVlcnkubWV0cmljcz8uWzBdLnNldHRpbmdzPy5saW1pdDtcbiAgcmV0dXJuIGxpbmVMaW1pdCA/IHBhcnNlSW50KGxpbmVMaW1pdCwgMTApIDogdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaXNRdWVyeVdpdGhDaGFuZ2VkTGluZUxpbWl0ID0gKHF1ZXJ5OiBFbGFzdGljc2VhcmNoUXVlcnkpOiBib29sZWFuID0+IHtcbiAgY29uc3QgbGluZUxpbWl0ID0gZ2V0TGluZUxpbWl0KHF1ZXJ5KTtcbiAgcmV0dXJuIGxpbmVMaW1pdCAhPT0gdW5kZWZpbmVkICYmIGxpbmVMaW1pdCAhPT0gNTAwO1xufTtcblxuY29uc3QgaXNRdWVyeVdpdGhUZW1wbGF0ZVZhcmlhYmxlcyA9IChxdWVyeTogRWxhc3RpY3NlYXJjaFF1ZXJ5KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiB2YXJpYWJsZVJlZ2V4LnRlc3QocXVlcnkucXVlcnkgPz8gJycpO1xufTtcblxuY29uc3Qgc2hvdWxkTm90UmVwb3J0QmFzZWRPblJlZklkID0gKHJlZklkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgaWYgKHJlZklkLnN0YXJ0c1dpdGgoUkVGX0lEX1NUQVJURVJfTE9HX1ZPTFVNRSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhY2tRdWVyeShcbiAgcmVzcG9uc2U6IERhdGFRdWVyeVJlc3BvbnNlLFxuICByZXF1ZXN0OiBEYXRhUXVlcnlSZXF1ZXN0PEVsYXN0aWNzZWFyY2hRdWVyeT4gJiB7IHRhcmdldHM6IEVsYXN0aWNzZWFyY2hRdWVyeVtdIH0sXG4gIHN0YXJ0VGltZTogRGF0ZVxuKTogdm9pZCB7XG4gIGNvbnN0IHsgdGFyZ2V0czogcXVlcmllcywgYXBwIH0gPSByZXF1ZXN0O1xuICBpZiAoYXBwID09PSBDb3JlQXBwLkRhc2hib2FyZCB8fCBhcHAgPT09IENvcmVBcHAuUGFuZWxWaWV3ZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKGNvbnN0IHF1ZXJ5IG9mIHF1ZXJpZXMpIHtcbiAgICBpZiAoc2hvdWxkTm90UmVwb3J0QmFzZWRPblJlZklkKHF1ZXJ5LnJlZklkKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9lbGFzdGljc2VhcmNoX3F1ZXJ5X2V4ZWN1dGVkJywge1xuICAgICAgYXBwLFxuICAgICAgZ3JhZmFuYV92ZXJzaW9uOiBjb25maWcuYnVpbGRJbmZvLnZlcnNpb24sXG4gICAgICB3aXRoX2x1Y2VuZV9xdWVyeTogcXVlcnkucXVlcnkgPyB0cnVlIDogZmFsc2UsXG4gICAgICBxdWVyeV90eXBlOiBnZXRRdWVyeVR5cGUocXVlcnkpLFxuICAgICAgbGluZV9saW1pdDogZ2V0TGluZUxpbWl0KHF1ZXJ5KSxcbiAgICAgIGFsaWFzOiBxdWVyeS5hbGlhcyxcbiAgICAgIGhhc19lcnJvcjogcmVzcG9uc2UuZXJyb3IgIT09IHVuZGVmaW5lZCxcbiAgICAgIGhhc19kYXRhOiByZXNwb25zZS5kYXRhLnNvbWUoKGZyYW1lKSA9PiBmcmFtZS5sZW5ndGggPiAwKSxcbiAgICAgIHNpbXVsdGFuZW91c2x5X3NlbnRfcXVlcnlfY291bnQ6IHF1ZXJpZXMubGVuZ3RoLFxuICAgICAgdGltZV9yYW5nZV9mcm9tOiByZXF1ZXN0Py5yYW5nZT8uZnJvbT8udG9JU09TdHJpbmcoKSxcbiAgICAgIHRpbWVfcmFuZ2VfdG86IHJlcXVlc3Q/LnJhbmdlPy50bz8udG9JU09TdHJpbmcoKSxcbiAgICAgIHRpbWVfdGFrZW46IERhdGUubm93KCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFja0Fubm90YXRpb25RdWVyeShhbm5vdGF0aW9uOiBFbGFzdGljc2VhcmNoQW5ub3RhdGlvblF1ZXJ5KTogdm9pZCB7XG4gIHJlcG9ydEludGVyYWN0aW9uKCdncmFmYW5hX2VsYXN0aWNzZWFyY2hfYW5ub3RhdGlvbl9xdWVyeV9leGVjdXRlZCcsIHtcbiAgICBncmFmYW5hX3ZlcnNpb246IGNvbmZpZy5idWlsZEluZm8udmVyc2lvbixcbiAgICBoYXNfdGFyZ2V0X3F1ZXJ5OiAhIWFubm90YXRpb24udGFyZ2V0Py5xdWVyeSxcbiAgICBoYXNfcXVlcnk6ICEhYW5ub3RhdGlvbi5xdWVyeSxcbiAgICBoYXNfdGltZV9maWVsZDogISFhbm5vdGF0aW9uLnRpbWVGaWVsZCxcbiAgICBoYXNfdGltZV9lbmRfZmllbGQ6ICEhYW5ub3RhdGlvbi50aW1lRW5kRmllbGQsXG4gICAgaGFzX3RhZ3NfZmllbGQ6ICEhYW5ub3RhdGlvbi50YWdzRmllbGQsXG4gICAgaGFzX3RleHRfZmllbGQ6ICEhYW5ub3RhdGlvbi50ZXh0RmllbGQsXG4gICAgaGFzX2luZGV4OiAhIWFubm90YXRpb24uaW5kZXgsXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/tracking.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/utils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertOrderByToMetricId: () => (/* binding */ convertOrderByToMetricId),\n/* harmony export */   describeMetric: () => (/* binding */ describeMetric),\n/* harmony export */   getScriptValue: () => (/* binding */ getScriptValue),\n/* harmony export */   isSupportedVersion: () => (/* binding */ isSupportedVersion),\n/* harmony export */   isTimeSeriesQuery: () => (/* binding */ isTimeSeriesQuery),\n/* harmony export */   removeEmpty: () => (/* binding */ removeEmpty),\n/* harmony export */   unsupportedVersionMessage: () => (/* binding */ unsupportedVersionMessage)\n/* harmony export */ });\n/* harmony import */ var semver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/semver-npm-7.5.4-c4ad957fcd-12d8ad952f.zip/node_modules/semver/index.js\");\n/* harmony import */ var semver__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(semver__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/aggregations.ts\");\n/* harmony import */ var _components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/elasticsearch/components/QueryEditor/MetricAggregationsEditor/utils.ts\");\n\n\n\n\nconst describeMetric = (metric) => {\n  if (!(0,_components_QueryEditor_MetricAggregationsEditor_aggregations__WEBPACK_IMPORTED_MODULE_1__.isMetricAggregationWithField)(metric)) {\n    return _components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_2__.metricAggregationConfig[metric.type].label;\n  }\n  return `${_components_QueryEditor_MetricAggregationsEditor_utils__WEBPACK_IMPORTED_MODULE_2__.metricAggregationConfig[metric.type].label} ${metric.field}`;\n};\nconst removeEmpty = (obj) => Object.entries(obj).reduce((acc, [key, value]) => {\n  if (value == null) {\n    return { ...acc };\n  }\n  if (Array.isArray(value) && value.length === 0) {\n    return { ...acc };\n  }\n  if (typeof value === \"string\" && value.length === 0) {\n    return { ...acc };\n  }\n  if (!Array.isArray(value) && typeof value === \"object\") {\n    const cleanObj = removeEmpty(value);\n    if (Object.keys(cleanObj).length === 0) {\n      return { ...acc };\n    }\n    return { ...acc, [key]: cleanObj };\n  }\n  return {\n    ...acc,\n    [key]: value\n  };\n}, {});\nconst convertOrderByToMetricId = (orderBy) => {\n  const metricIdMatches = orderBy.match(/^(\\d+)/);\n  return metricIdMatches ? metricIdMatches[1] : void 0;\n};\nconst getScriptValue = (metric) => (typeof metric.settings?.script === \"object\" ? metric.settings?.script?.inline : metric.settings?.script) || \"\";\nconst isSupportedVersion = (version) => {\n  if ((0,semver__WEBPACK_IMPORTED_MODULE_0__.gte)(version, \"7.16.0\")) {\n    return true;\n  }\n  return false;\n};\nconst unsupportedVersionMessage = \"Support for Elasticsearch versions after their end-of-life (currently versions < 7.16) was removed. Using unsupported version of Elasticsearch may lead to unexpected and incorrect results.\";\nconst isTimeSeriesQuery = (query) => {\n  return query?.bucketAggs?.slice(-1)[0]?.type === \"date_histogram\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL3V0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE0QjtBQUVpQjtBQUNMO0FBR2pDLE1BQU0saUJBQWlCLENBQUMsV0FBOEI7QUFDM0QsTUFBSSxDQUFDLDJIQUE0QixDQUFDLE1BQU0sR0FBRztBQUN6QyxXQUFPLDJHQUF1QixDQUFDLE9BQU8sSUFBSSxFQUFFO0FBQUEsRUFDOUM7QUFHQSxTQUFPLEdBQUcsMkdBQXVCLENBQUMsT0FBTyxJQUFJLEVBQUUsU0FBUyxPQUFPO0FBQ2pFO0FBUU8sTUFBTSxjQUFjLENBQWUsUUFDeEMsT0FBTyxRQUFRLEdBQUcsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxNQUFNO0FBRWhELE1BQUksU0FBUyxNQUFNO0FBQ2pCLFdBQU8sRUFBRSxHQUFHLElBQUk7QUFBQSxFQUNsQjtBQUdBLE1BQUksTUFBTSxRQUFRLEtBQUssS0FBSyxNQUFNLFdBQVcsR0FBRztBQUM5QyxXQUFPLEVBQUUsR0FBRyxJQUFJO0FBQUEsRUFDbEI7QUFHQSxNQUFJLE9BQU8sVUFBVSxZQUFZLE1BQU0sV0FBVyxHQUFHO0FBQ25ELFdBQU8sRUFBRSxHQUFHLElBQUk7QUFBQSxFQUNsQjtBQUdBLE1BQUksQ0FBQyxNQUFNLFFBQVEsS0FBSyxLQUFLLE9BQU8sVUFBVSxVQUFVO0FBQ3RELFVBQU0sV0FBVyxZQUFZLEtBQUs7QUFFbEMsUUFBSSxPQUFPLEtBQUssUUFBUSxFQUFFLFdBQVcsR0FBRztBQUN0QyxhQUFPLEVBQUUsR0FBRyxJQUFJO0FBQUEsSUFDbEI7QUFFQSxXQUFPLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBRyxHQUFHLFNBQVM7QUFBQSxFQUNuQztBQUVBLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNILENBQUMsR0FBRyxHQUFHO0FBQUEsRUFDVDtBQUNGLEdBQUcsQ0FBQyxDQUFDO0FBT0EsTUFBTSwyQkFBMkIsQ0FBQyxZQUF3QztBQUMvRSxRQUFNLGtCQUFrQixRQUFRLE1BQU0sUUFBUTtBQUM5QyxTQUFPLGtCQUFrQixnQkFBZ0IsQ0FBQyxJQUFJO0FBQ2hEO0FBMkJPLE1BQU0saUJBQWlCLENBQUMsWUFDNUIsT0FBTyxPQUFPLFVBQVUsV0FBVyxXQUFXLE9BQU8sVUFBVSxRQUFRLFNBQVMsT0FBTyxVQUFVLFdBQVc7QUFFeEcsTUFBTSxxQkFBcUIsQ0FBQyxZQUE2QjtBQUM5RCxNQUFJLDJDQUFHLENBQUMsU0FBUyxRQUFRLEdBQUc7QUFDMUIsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPO0FBQ1Q7QUFFTyxNQUFNLDRCQUNYO0FBR0ssTUFBTSxvQkFBb0IsQ0FBQyxVQUF1QztBQUN2RSxTQUFPLE9BQU8sWUFBWSxNQUFNLEVBQUUsRUFBRSxDQUFDLEdBQUcsU0FBUztBQUNuRCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9lbGFzdGljc2VhcmNoL3V0aWxzLnRzPzRhZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ3RlLCBTZW1WZXIgfSBmcm9tICdzZW12ZXInO1xuXG5pbXBvcnQgeyBpc01ldHJpY0FnZ3JlZ2F0aW9uV2l0aEZpZWxkIH0gZnJvbSAnLi9jb21wb25lbnRzL1F1ZXJ5RWRpdG9yL01ldHJpY0FnZ3JlZ2F0aW9uc0VkaXRvci9hZ2dyZWdhdGlvbnMnO1xuaW1wb3J0IHsgbWV0cmljQWdncmVnYXRpb25Db25maWcgfSBmcm9tICcuL2NvbXBvbmVudHMvUXVlcnlFZGl0b3IvTWV0cmljQWdncmVnYXRpb25zRWRpdG9yL3V0aWxzJztcbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hRdWVyeSwgTWV0cmljQWdncmVnYXRpb24sIE1ldHJpY0FnZ3JlZ2F0aW9uV2l0aElubGluZVNjcmlwdCB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgZGVzY3JpYmVNZXRyaWMgPSAobWV0cmljOiBNZXRyaWNBZ2dyZWdhdGlvbikgPT4ge1xuICBpZiAoIWlzTWV0cmljQWdncmVnYXRpb25XaXRoRmllbGQobWV0cmljKSkge1xuICAgIHJldHVybiBtZXRyaWNBZ2dyZWdhdGlvbkNvbmZpZ1ttZXRyaWMudHlwZV0ubGFiZWw7XG4gIH1cblxuICAvLyBUT0RPOiBmaWVsZCBtaWdodCBiZSB1bmRlZmluZWRcbiAgcmV0dXJuIGAke21ldHJpY0FnZ3JlZ2F0aW9uQ29uZmlnW21ldHJpYy50eXBlXS5sYWJlbH0gJHttZXRyaWMuZmllbGR9YDtcbn07XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBjbGVhbiB1cCBhZ2dyZWdhdGlvbnMgc2V0dGluZ3Mgb2JqZWN0cy5cbiAqIEl0IHJlbW92ZXMgbnVsbGlzaCB2YWx1ZXMgYW5kIGVtcHR5IHN0cmluZ3MsIGFycmF5IGFuZCBvYmplY3RzXG4gKiByZWN1cnNpbmcgb3ZlciBuZXN0ZWQgb2JqZWN0cyAobm90IGFycmF5cykuXG4gKiBAcGFyYW0gb2JqXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVFbXB0eSA9IDxUIGV4dGVuZHMge30+KG9iajogVCk6IFBhcnRpYWw8VD4gPT5cbiAgT2JqZWN0LmVudHJpZXMob2JqKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgLy8gUmVtb3ZpbmcgbnVsbGlzaCB2YWx1ZXMgKG51bGwgJiB1bmRlZmluZWQpXG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgIHJldHVybiB7IC4uLmFjYyB9O1xuICAgIH1cblxuICAgIC8vIFJlbW92aW5nIGVtcHR5IGFycmF5cyAoVGhpcyB3b24ndCByZWN1cnNlIHRoZSBhcnJheSlcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyAuLi5hY2MgfTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmluZyBlbXB0eSBzdHJpbmdzXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyAuLi5hY2MgfTtcbiAgICB9XG5cbiAgICAvLyBSZWN1cnNpbmcgb3ZlciBuZXN0ZWQgb2JqZWN0c1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3QgY2xlYW5PYmogPSByZW1vdmVFbXB0eSh2YWx1ZSk7XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhjbGVhbk9iaikubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7IC4uLmFjYyB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyAuLi5hY2MsIFtrZXldOiBjbGVhbk9iaiB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAuLi5hY2MsXG4gICAgICBba2V5XTogdmFsdWUsXG4gICAgfTtcbiAgfSwge30pO1xuXG4vKipcbiAqICBUaGlzIGZ1bmN0aW9uIGNvbnZlcnRzIGFuIG9yZGVyIGJ5IHN0cmluZyB0byB0aGUgY29ycmVjdCBtZXRyaWMgaWQgRm9yIGV4YW1wbGUsXG4gKiAgaWYgdGhlIHVzZXIgdXNlcyB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uIGV4dGVuZGVkIHN0YXQgZm9yIHRoZSBvcmRlciBieSxcbiAqICB0aGUgdmFsdWUgd291bGQgYmUgXCIxW3N0ZF9kZXZpYXRpb25dXCIgYW5kIHRoaXMgd291bGQgcmV0dXJuIFwiMVwiXG4gKi9cbmV4cG9ydCBjb25zdCBjb252ZXJ0T3JkZXJCeVRvTWV0cmljSWQgPSAob3JkZXJCeTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3QgbWV0cmljSWRNYXRjaGVzID0gb3JkZXJCeS5tYXRjaCgvXihcXGQrKS8pO1xuICByZXR1cm4gbWV0cmljSWRNYXRjaGVzID8gbWV0cmljSWRNYXRjaGVzWzFdIDogdm9pZCAwO1xufTtcblxuLyoqIEdldHMgdGhlIGFjdHVhbCBzY3JpcHQgdmFsdWUgZm9yIG1ldHJpY3MgdGhhdCBzdXBwb3J0IGlubGluZSBzY3JpcHRzLlxuICpcbiAqICBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSBgc2NyaXB0YCBpcyBhIGJpdCBwb2x5bW9ycGhpYy5cbiAqICB3aGVuIGNyZWF0aW5nIGEgcXVlcnkgd2l0aCBHcmFmYW5hIDwgNy40IGl0IHdhcyBzdG9yZWQgYXM6XG4gKiBgYGBqc29uXG4gKiB7XG4gKiAgICBcInNldHRpbmdzXCI6IHtcbiAqICAgICAgXCJzY3JpcHRcIjoge1xuICogICAgICAgIFwiaW5saW5lXCI6IFwidmFsdWVcIlxuICogICAgICB9XG4gKiAgICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiB3aGlsZSBmcm9tIDcuNCBpdCdzIHN0b3JlZCBhc1xuICogYGBganNvblxuICoge1xuICogICAgXCJzZXR0aW5nc1wiOiB7XG4gKiAgICAgIFwic2NyaXB0XCI6IFwidmFsdWVcIlxuICogICAgfVxuICogfVxuICogYGBgXG4gKlxuICogVGhpcyBhbGxvd3MgdXMgdG8gYWNjZXNzIGJvdGggZm9ybWF0cyBhbmQgc3VwcG9ydCBib3RoIHF1ZXJpZXMgY3JlYXRlZCBiZWZvcmUgNy40IGFuZCBhZnRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFNjcmlwdFZhbHVlID0gKG1ldHJpYzogTWV0cmljQWdncmVnYXRpb25XaXRoSW5saW5lU2NyaXB0KSA9PlxuICAodHlwZW9mIG1ldHJpYy5zZXR0aW5ncz8uc2NyaXB0ID09PSAnb2JqZWN0JyA/IG1ldHJpYy5zZXR0aW5ncz8uc2NyaXB0Py5pbmxpbmUgOiBtZXRyaWMuc2V0dGluZ3M/LnNjcmlwdCkgfHwgJyc7XG5cbmV4cG9ydCBjb25zdCBpc1N1cHBvcnRlZFZlcnNpb24gPSAodmVyc2lvbjogU2VtVmVyKTogYm9vbGVhbiA9PiB7XG4gIGlmIChndGUodmVyc2lvbiwgJzcuMTYuMCcpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5leHBvcnQgY29uc3QgdW5zdXBwb3J0ZWRWZXJzaW9uTWVzc2FnZSA9XG4gICdTdXBwb3J0IGZvciBFbGFzdGljc2VhcmNoIHZlcnNpb25zIGFmdGVyIHRoZWlyIGVuZC1vZi1saWZlIChjdXJyZW50bHkgdmVyc2lvbnMgPCA3LjE2KSB3YXMgcmVtb3ZlZC4gVXNpbmcgdW5zdXBwb3J0ZWQgdmVyc2lvbiBvZiBFbGFzdGljc2VhcmNoIG1heSBsZWFkIHRvIHVuZXhwZWN0ZWQgYW5kIGluY29ycmVjdCByZXN1bHRzLic7XG5cbi8vIFRvIGJlIGNvbnNpZGVyZWQgYSB0aW1lIHNlcmllcyBxdWVyeSwgdGhlIGxhc3QgYnVja2VkIGFnZ3JlZ2F0aW9uIG11c3QgYmUgYSBEYXRlIEhpc3RvZ3JhbVxuZXhwb3J0IGNvbnN0IGlzVGltZVNlcmllc1F1ZXJ5ID0gKHF1ZXJ5OiBFbGFzdGljc2VhcmNoUXVlcnkpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHF1ZXJ5Py5idWNrZXRBZ2dzPy5zbGljZSgtMSlbMF0/LnR5cGUgPT09ICdkYXRlX2hpc3RvZ3JhbSc7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/elasticsearch/utils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/elasticsearch/plugin.json":
/***/ ((module) => {

module.exports = JSON.parse('{"type":"datasource","name":"Elasticsearch","id":"elasticsearch","category":"logging","info":{"description":"Open source logging & analytics database","author":{"name":"Grafana Labs","url":"https://grafana.com"},"keywords":["elasticsearch"],"logos":{"small":"img/elasticsearch.svg","large":"img/elasticsearch.svg"},"links":[{"name":"Learn more","url":"https://grafana.com/docs/features/datasources/elasticsearch/"}]},"alerting":true,"annotations":true,"metrics":true,"logs":true,"backend":true,"queryOptions":{"minInterval":true}}');

/***/ })

}]);