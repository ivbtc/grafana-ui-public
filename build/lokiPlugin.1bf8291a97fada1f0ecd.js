"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkgrafana"] = self["webpackChunkgrafana"] || []).push([["lokiPlugin"],{

/***/ "./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorHeader.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EditorHeader: () => (/* binding */ EditorHeader)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n\n\n\n\nconst EditorHeader = ({ children }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useStyles2)(getStyles);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.root }, children);\n};\nconst getStyles = (theme) => ({\n  root: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n    gap: theme.spacing(3),\n    minHeight: theme.spacing(4)\n  })\n});\n\n\n//# sourceMappingURL=EditorHeader.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9fX3ZpcnR1YWxfXy9AZ3JhZmFuYS1leHBlcmltZW50YWwtdmlydHVhbC1iYTc2NzU1MmZlLzAvY2FjaGUvQGdyYWZhbmEtZXhwZXJpbWVudGFsLW5wbS0xLjYuMS1mMDUyZDJhZTUxLTY0YzMyYmM5ZTMuemlwL25vZGVfbW9kdWxlcy9AZ3JhZmFuYS9leHBlcmltZW50YWwvZGlzdC9lc20vUXVlcnlFZGl0b3IvRWRpdG9ySGVhZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW1DO0FBQ0E7QUFDTTs7QUFFekMsd0JBQXdCLFVBQVU7QUFDbEMsaUJBQWlCLHVEQUFVO0FBQzNCLHlCQUF5QiwwREFBNEIsVUFBVSx3QkFBd0I7QUFDdkY7QUFDQTtBQUNBLFFBQVEsaURBQUc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7O0FBRXVCO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uLy55YXJuL19fdmlydHVhbF9fL0BncmFmYW5hLWV4cGVyaW1lbnRhbC12aXJ0dWFsLWJhNzY3NTUyZmUvMC9jYWNoZS9AZ3JhZmFuYS1leHBlcmltZW50YWwtbnBtLTEuNi4xLWYwNTJkMmFlNTEtNjRjMzJiYzllMy56aXAvbm9kZV9tb2R1bGVzL0BncmFmYW5hL2V4cGVyaW1lbnRhbC9kaXN0L2VzbS9RdWVyeUVkaXRvci9FZGl0b3JIZWFkZXIuanM/MDRjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0X19kZWZhdWx0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmNvbnN0IEVkaXRvckhlYWRlciA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRTdHlsZXMpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHN0eWxlcy5yb290IH0sIGNoaWxkcmVuKTtcbn07XG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWUpID0+ICh7XG4gIHJvb3Q6IGNzcyh7XG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgZmxleFdyYXA6IFwid3JhcFwiLFxuICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgZ2FwOiB0aGVtZS5zcGFjaW5nKDMpLFxuICAgIG1pbkhlaWdodDogdGhlbWUuc3BhY2luZyg0KVxuICB9KVxufSk7XG5cbmV4cG9ydCB7IEVkaXRvckhlYWRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWRpdG9ySGVhZGVyLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorHeader.js\n");

/***/ }),

/***/ "./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/FlexItem.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FlexItem: () => (/* binding */ FlexItem)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst FlexItem = ({ grow, shrink }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { style: { display: \"block\", flexGrow: grow, flexShrink: shrink } });\n};\n\n\n//# sourceMappingURL=FlexItem.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9fX3ZpcnR1YWxfXy9AZ3JhZmFuYS1leHBlcmltZW50YWwtdmlydHVhbC1iYTc2NzU1MmZlLzAvY2FjaGUvQGdyYWZhbmEtZXhwZXJpbWVudGFsLW5wbS0xLjYuMS1mMDUyZDJhZTUxLTY0YzMyYmM5ZTMuemlwL25vZGVfbW9kdWxlcy9AZ3JhZmFuYS9leHBlcmltZW50YWwvZGlzdC9lc20vUXVlcnlFZGl0b3IvRmxleEl0ZW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DOztBQUVuQyxvQkFBb0IsY0FBYztBQUNsQyx5QkFBeUIsMERBQTRCLFVBQVUsU0FBUyx3REFBd0Q7QUFDaEk7O0FBRW9CO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uLy55YXJuL19fdmlydHVhbF9fL0BncmFmYW5hLWV4cGVyaW1lbnRhbC12aXJ0dWFsLWJhNzY3NTUyZmUvMC9jYWNoZS9AZ3JhZmFuYS1leHBlcmltZW50YWwtbnBtLTEuNi4xLWYwNTJkMmFlNTEtNjRjMzJiYzllMy56aXAvbm9kZV9tb2R1bGVzL0BncmFmYW5hL2V4cGVyaW1lbnRhbC9kaXN0L2VzbS9RdWVyeUVkaXRvci9GbGV4SXRlbS5qcz9lOWM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdF9fZGVmYXVsdCBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IEZsZXhJdGVtID0gKHsgZ3Jvdywgc2hyaW5rIH0pID0+IHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgZGlzcGxheTogXCJibG9ja1wiLCBmbGV4R3JvdzogZ3JvdywgZmxleFNocmluazogc2hyaW5rIH0gfSk7XG59O1xuXG5leHBvcnQgeyBGbGV4SXRlbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmxleEl0ZW0uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/FlexItem.js\n");

/***/ }),

/***/ "./public/app/core/components/Divider.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Divider: () => (/* binding */ Divider)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n\n\n\n\nconst Divider = ({ hideLine = false }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useStyles2)(getStyles);\n  if (hideLine) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"hr\", { className: styles.dividerHideLine });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"hr\", { className: styles.divider });\n};\nconst getStyles = (theme) => ({\n  divider: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin: ${theme.spacing(4, 0)};\n  `,\n  dividerHideLine: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    border: none;\n    margin: ${theme.spacing(3, 0)};\n  `\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2NvcmUvY29tcG9uZW50cy9EaXZpZGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBb0I7QUFDRjtBQUdTO0FBRXBCLE1BQU0sVUFBVSxDQUFDLEVBQUUsV0FBVyxNQUFNLE1BQU07QUFDL0MsUUFBTSxTQUFTLHVEQUFVLENBQUMsU0FBUztBQUVuQyxNQUFJLFVBQVU7QUFDWixXQUFPLDJFQUFDLFFBQUcsV0FBVyxPQUFPLGlCQUFpQjtBQUFBLEVBQ2hEO0FBRUEsU0FBTywyRUFBQyxRQUFHLFdBQVcsT0FBTyxTQUFTO0FBQ3hDO0FBRUEsTUFBTSxZQUFZLENBQUMsV0FBMEI7QUFBQSxFQUMzQyxTQUFTLGlEQUFHO0FBQUgsY0FDRyxNQUFNLFFBQVEsR0FBRyxDQUFDO0FBQUE7QUFBQSxFQUU5QixpQkFBaUIsaURBQUc7QUFBSDtBQUFBLGNBRUwsTUFBTSxRQUFRLEdBQUcsQ0FBQztBQUFBO0FBRWhDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvY29yZS9jb21wb25lbnRzL0RpdmlkZXIudHN4Pzc1NGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEdyYWZhbmFUaGVtZTIgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmV4cG9ydCBjb25zdCBEaXZpZGVyID0gKHsgaGlkZUxpbmUgPSBmYWxzZSB9KSA9PiB7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcblxuICBpZiAoaGlkZUxpbmUpIHtcbiAgICByZXR1cm4gPGhyIGNsYXNzTmFtZT17c3R5bGVzLmRpdmlkZXJIaWRlTGluZX0gLz47XG4gIH1cblxuICByZXR1cm4gPGhyIGNsYXNzTmFtZT17c3R5bGVzLmRpdmlkZXJ9IC8+O1xufTtcblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICBkaXZpZGVyOiBjc3NgXG4gICAgbWFyZ2luOiAke3RoZW1lLnNwYWNpbmcoNCwgMCl9O1xuICBgLFxuICBkaXZpZGVySGlkZUxpbmU6IGNzc2BcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgbWFyZ2luOiAke3RoZW1lLnNwYWNpbmcoMywgMCl9O1xuICBgLFxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/core/components/Divider.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/LanguageProvider.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LABEL_REFRESH_INTERVAL: () => (/* binding */ LABEL_REFRESH_INTERVAL),\n/* harmony export */   addHistoryMetadata: () => (/* binding */ addHistoryMetadata),\n/* harmony export */   \"default\": () => (/* binding */ LokiLanguageProvider)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lru_cache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lru-cache-npm-10.0.0-256d74bb20-18f101675f.zip/node_modules/lru-cache/dist/mjs/index.js\");\n/* harmony import */ var prismjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/prismjs-npm-1.29.0-6faa5b04b8-007a8869d4.zip/node_modules/prismjs/prism.js\");\n/* harmony import */ var prismjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prismjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/datasource.ts\");\n/* harmony import */ var app_plugins_datasource_prometheus_language_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/language_utils.ts\");\n/* harmony import */ var _responseUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/responseUtils.ts\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/syntax.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\n\n\n\n\n\nconst DEFAULT_KEYS = [\"job\", \"namespace\"];\nconst EMPTY_SELECTOR = \"{}\";\nconst HISTORY_ITEM_COUNT = 10;\nconst HISTORY_COUNT_CUTOFF = 1e3 * 60 * 60 * 24;\nconst NS_IN_MS = 1e6;\nconst RATE_RANGES = [\n  { label: \"$__interval\", sortValue: \"$__interval\" },\n  { label: \"$__range\", sortValue: \"$__range\" },\n  { label: \"1m\", sortValue: \"00:01:00\" },\n  { label: \"5m\", sortValue: \"00:05:00\" },\n  { label: \"10m\", sortValue: \"00:10:00\" },\n  { label: \"30m\", sortValue: \"00:30:00\" },\n  { label: \"1h\", sortValue: \"01:00:00\" },\n  { label: \"1d\", sortValue: \"24:00:00\" }\n];\nconst LABEL_REFRESH_INTERVAL = 1e3 * 30;\nconst wrapLabel = (label) => ({ label, filterText: `\"${label}\"` });\nfunction addHistoryMetadata(item, history) {\n  const cutoffTs = Date.now() - HISTORY_COUNT_CUTOFF;\n  const historyForItem = history.filter((h) => h.ts > cutoffTs && h.query.expr === item.label);\n  let hint = `Queried ${historyForItem.length} times in the last 24h.`;\n  const recent = historyForItem[0];\n  if (recent) {\n    const lastQueried = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.dateTime)(recent.ts).fromNow();\n    hint = `${hint} Last queried ${lastQueried}.`;\n  }\n  return {\n    ...item,\n    documentation: hint\n  };\n}\nclass LokiLanguageProvider extends _grafana_data__WEBPACK_IMPORTED_MODULE_8__.LanguageProvider {\n  constructor(datasource, initialValues) {\n    super();\n    this.started = false;\n    this.lookupsDisabled = false;\n    // Dynamically set to true for big/slow instances\n    /**\n     *  Cache for labels of series. This is bit simplistic in the sense that it just counts responses each as a 1 and does\n     *  not account for different size of a response. If that is needed a `length` function can be added in the options.\n     *  10 as a max size is totally arbitrary right now.\n     */\n    this.seriesCache = new lru_cache__WEBPACK_IMPORTED_MODULE_1__.LRUCache({ max: 10 });\n    this.labelsCache = new lru_cache__WEBPACK_IMPORTED_MODULE_1__.LRUCache({ max: 10 });\n    // Strip syntax chars\n    this.cleanText = (s) => s.replace(/[{}[\\]=\"(),!~+\\-*/^%\\|]/g, \"\").trim();\n    this.request = async (url, params) => {\n      try {\n        return await this.datasource.metadataRequest(url, params);\n      } catch (error) {\n        console.error(error);\n      }\n      return void 0;\n    };\n    /**\n     * Initialise the language provider by fetching set of labels. Without this initialisation the provider would return\n     * just a set of hardcoded default labels on provideCompletionItems or a recent queries from history.\n     */\n    this.start = () => {\n      if (!this.startTask) {\n        this.startTask = this.fetchLabels().then(() => {\n          this.started = true;\n          return [];\n        });\n      }\n      return this.startTask;\n    };\n    this.getBeginningCompletionItems = (context) => {\n      return {\n        suggestions: [...this.getEmptyCompletionItems(context).suggestions, ...this.getTermCompletionItems().suggestions]\n      };\n    };\n    this.getTermCompletionItems = () => {\n      const suggestions = [];\n      suggestions.push({\n        prefixMatch: true,\n        label: \"Functions\",\n        items: _syntax__WEBPACK_IMPORTED_MODULE_5__.FUNCTIONS.map((suggestion) => ({ ...suggestion, kind: \"function\" }))\n      });\n      return { suggestions };\n    };\n    this.getPipeCompletionItem = () => {\n      const suggestions = [];\n      suggestions.push({\n        label: \"Operators\",\n        items: _syntax__WEBPACK_IMPORTED_MODULE_5__.PIPE_OPERATORS.map((suggestion) => ({ ...suggestion, kind: \"operators\" }))\n      });\n      suggestions.push({\n        label: \"Parsers\",\n        items: _syntax__WEBPACK_IMPORTED_MODULE_5__.PIPE_PARSERS.map((suggestion) => ({ ...suggestion, kind: \"parsers\" }))\n      });\n      return { suggestions };\n    };\n    /**\n     * Fetch labels for a selector. This is cached by its args but also by the global timeRange currently selected as\n     * they can change over requested time.\n     * @param name\n     */\n    this.fetchSeriesLabels = async (match) => {\n      const interpolatedMatch = this.datasource.interpolateString(match);\n      const url = \"series\";\n      const { start, end } = this.datasource.getTimeRangeParams();\n      const cacheKey = this.generateCacheKey(url, start, end, interpolatedMatch);\n      let value = this.seriesCache.get(cacheKey);\n      if (!value) {\n        const params = { \"match[]\": interpolatedMatch, start, end };\n        const data = await this.request(url, params);\n        const { values } = (0,app_plugins_datasource_prometheus_language_utils__WEBPACK_IMPORTED_MODULE_3__.processLabels)(data);\n        value = values;\n        this.seriesCache.set(cacheKey, value);\n      }\n      return value;\n    };\n    /**\n     * Fetch series for a selector. Use this for raw results. Use fetchSeriesLabels() to get labels.\n     * @param match\n     */\n    this.fetchSeries = async (match) => {\n      const url = \"series\";\n      const { start, end } = this.datasource.getTimeRangeParams();\n      const params = { \"match[]\": match, start, end };\n      return await this.request(url, params);\n    };\n    this.datasource = datasource;\n    this.labelKeys = [];\n    this.labelFetchTs = 0;\n    Object.assign(this, initialValues);\n  }\n  getSyntax() {\n    return _syntax__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n  }\n  getLabelKeys() {\n    return this.labelKeys;\n  }\n  /**\n   * Return suggestions based on input that can be then plugged into a typeahead dropdown.\n   * Keep this DOM-free for testing\n   * @param input\n   * @param context Is optional in types but is required in case we are doing getLabelCompletionItems\n   * @param context.absoluteRange Required in case we are doing getLabelCompletionItems\n   * @param context.history Optional used only in getEmptyCompletionItems\n   */\n  async provideCompletionItems(input, context) {\n    const { wrapperClasses, value, prefix, text } = input;\n    const emptyResult = { suggestions: [] };\n    if (!value) {\n      return emptyResult;\n    }\n    const empty = value?.document.text.length === 0;\n    const selectedLines = value.document.getTextsAtRange(value.selection);\n    const currentLine = selectedLines.size === 1 ? selectedLines.first().getText() : null;\n    const nextCharacter = currentLine ? currentLine[value.selection.anchor.offset] : null;\n    const tokenRecognized = wrapperClasses.length > 3;\n    const prefixUnrecognized = prefix && !tokenRecognized;\n    const noSuffix = !nextCharacter || nextCharacter === \")\";\n    const safePrefix = prefix && !text.match(/^['\"~=\\]})\\s]+$/) && noSuffix;\n    const operatorsPattern = /[+\\-*/^%]/;\n    const isNextOperand = text.match(operatorsPattern);\n    if (wrapperClasses.includes(\"context-range\")) {\n      return this.getRangeCompletionItems();\n    } else if (wrapperClasses.includes(\"context-labels\")) {\n      return await this.getLabelCompletionItems(input);\n    } else if (wrapperClasses.includes(\"context-pipe\")) {\n      return this.getPipeCompletionItem();\n    } else if (empty) {\n      return this.getEmptyCompletionItems(context);\n    } else if (prefixUnrecognized && noSuffix && !isNextOperand) {\n      return this.getBeginningCompletionItems(context);\n    } else if (prefixUnrecognized && safePrefix) {\n      return this.getTermCompletionItems();\n    }\n    return emptyResult;\n  }\n  getEmptyCompletionItems(context) {\n    const history = context?.history;\n    const suggestions = [];\n    if (history?.length) {\n      const historyItems = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.chain)(history).map((h) => h.query.expr).filter().uniq().take(HISTORY_ITEM_COUNT).map(wrapLabel).map((item) => addHistoryMetadata(item, history)).value();\n      suggestions.push({\n        prefixMatch: true,\n        skipSort: true,\n        label: \"History\",\n        items: historyItems\n      });\n    }\n    return { suggestions };\n  }\n  getRangeCompletionItems() {\n    return {\n      context: \"context-range\",\n      suggestions: [\n        {\n          label: \"Range vector\",\n          items: [...RATE_RANGES]\n        }\n      ]\n    };\n  }\n  async getLabelCompletionItems({ text, wrapperClasses, labelKey, value }) {\n    let context = \"context-labels\";\n    const suggestions = [];\n    if (!value) {\n      return { context, suggestions: [] };\n    }\n    const line = value.anchorBlock.getText();\n    const cursorOffset = value.selection.anchor.offset;\n    const isValueStart = text.match(/^(=|=~|!=|!~)/);\n    let selector;\n    let parsedSelector;\n    try {\n      parsedSelector = (0,app_plugins_datasource_prometheus_language_utils__WEBPACK_IMPORTED_MODULE_3__.parseSelector)(line, cursorOffset);\n      selector = parsedSelector.selector;\n    } catch {\n      selector = EMPTY_SELECTOR;\n    }\n    if (!labelKey && selector === EMPTY_SELECTOR) {\n      await this.start();\n      const allLabels = this.getLabelKeys();\n      return { context, suggestions: [{ label: `Labels`, items: allLabels.map(wrapLabel) }] };\n    }\n    const existingKeys = parsedSelector ? parsedSelector.labelKeys : [];\n    let labelValues;\n    if (selector) {\n      if (selector === EMPTY_SELECTOR && labelKey) {\n        const labelValuesForKey = await this.getLabelValues(labelKey);\n        labelValues = { [labelKey]: labelValuesForKey };\n      } else {\n        labelValues = await this.getSeriesLabels(selector);\n      }\n    }\n    if (!labelValues) {\n      console.warn(`Server did not return any values for selector = ${selector}`);\n      return { context, suggestions };\n    }\n    if (text && isValueStart || wrapperClasses.includes(\"attr-value\")) {\n      if (labelKey && labelValues[labelKey]) {\n        context = \"context-label-values\";\n        suggestions.push({\n          label: `Label values for \"${labelKey}\"`,\n          // Filter to prevent previously selected values from being repeatedly suggested\n          items: labelValues[labelKey].map(wrapLabel).filter(({ filterText }) => filterText !== text)\n        });\n      }\n    } else {\n      const labelKeys = labelValues ? Object.keys(labelValues) : DEFAULT_KEYS;\n      if (labelKeys) {\n        const possibleKeys = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.difference)(labelKeys, existingKeys);\n        if (possibleKeys.length) {\n          const newItems = possibleKeys.map((key) => ({ label: key }));\n          const newSuggestion = { label: `Labels`, items: newItems };\n          suggestions.push(newSuggestion);\n        }\n      }\n    }\n    return { context, suggestions };\n  }\n  importFromAbstractQuery(labelBasedQuery) {\n    return {\n      refId: labelBasedQuery.refId,\n      expr: (0,app_plugins_datasource_prometheus_language_utils__WEBPACK_IMPORTED_MODULE_3__.toPromLikeExpr)(labelBasedQuery),\n      queryType: _types__WEBPACK_IMPORTED_MODULE_6__.LokiQueryType.Range\n    };\n  }\n  exportToAbstractQuery(query) {\n    const lokiQuery = query.expr;\n    if (!lokiQuery || lokiQuery.length === 0) {\n      return { refId: query.refId, labelMatchers: [] };\n    }\n    const tokens = prismjs__WEBPACK_IMPORTED_MODULE_2___default().tokenize(lokiQuery, _syntax__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n    return {\n      refId: query.refId,\n      labelMatchers: (0,app_plugins_datasource_prometheus_language_utils__WEBPACK_IMPORTED_MODULE_3__.extractLabelMatchers)(tokens)\n    };\n  }\n  async getSeriesLabels(selector) {\n    if (this.lookupsDisabled) {\n      return void 0;\n    }\n    try {\n      return await this.fetchSeriesLabels(selector);\n    } catch (error) {\n      console.error(error);\n      return void 0;\n    }\n  }\n  /**\n   * Fetches all label keys\n   */\n  async fetchLabels() {\n    const url = \"labels\";\n    const timeRange = this.datasource.getTimeRangeParams();\n    this.labelFetchTs = Date.now().valueOf();\n    const res = await this.request(url, timeRange);\n    if (Array.isArray(res)) {\n      const labels = res.slice().sort().filter((label) => label !== \"__name__\");\n      this.labelKeys = labels;\n      return this.labelKeys;\n    }\n    return [];\n  }\n  // Cache key is a bit different here. We round up to a minute the intervals.\n  // The rounding may seem strange but makes relative intervals like now-1h less prone to need separate request every\n  // millisecond while still actually getting all the keys for the correct interval. This still can create problems\n  // when user does not the newest values for a minute if already cached.\n  generateCacheKey(url, start, end, param) {\n    return [url, this.roundTime(start), this.roundTime(end), param].join();\n  }\n  // Round nanos epoch to nearest 5 minute interval\n  roundTime(nanos) {\n    return nanos ? Math.floor(nanos / NS_IN_MS / 1e3 / 60 / 5) : 0;\n  }\n  async getLabelValues(key) {\n    return await this.fetchLabelValues(key);\n  }\n  async fetchLabelValues(key) {\n    const interpolatedKey = encodeURIComponent(this.datasource.interpolateString(key));\n    const url = `label/${interpolatedKey}/values`;\n    const rangeParams = this.datasource.getTimeRangeParams();\n    const { start, end } = rangeParams;\n    const cacheKey = this.generateCacheKey(url, start, end, interpolatedKey);\n    const params = { start, end };\n    let labelValues = this.labelsCache.get(cacheKey);\n    if (!labelValues) {\n      this.labelsCache.set(cacheKey, []);\n      const res = await this.request(url, params);\n      if (Array.isArray(res)) {\n        labelValues = res.slice().sort();\n        this.labelsCache.set(cacheKey, labelValues);\n      }\n    }\n    return labelValues ?? [];\n  }\n  async getParserAndLabelKeys(selector) {\n    const series = await this.datasource.getDataSamples({ expr: selector, refId: \"data-samples\" });\n    if (!series.length) {\n      return { extractedLabelKeys: [], unwrapLabelKeys: [], hasJSON: false, hasLogfmt: false, hasPack: false };\n    }\n    const { hasLogfmt, hasJSON, hasPack } = (0,_responseUtils__WEBPACK_IMPORTED_MODULE_4__.extractLogParserFromDataFrame)(series[0]);\n    return {\n      extractedLabelKeys: (0,_responseUtils__WEBPACK_IMPORTED_MODULE_4__.extractLabelKeysFromDataFrame)(series[0]),\n      unwrapLabelKeys: (0,_responseUtils__WEBPACK_IMPORTED_MODULE_4__.extractUnwrapLabelKeysFromDataFrame)(series[0]),\n      hasJSON,\n      hasPack,\n      hasLogfmt\n    };\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL0xhbmd1YWdlUHJvdmlkZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtDO0FBQ1Q7QUFDTTtBQUUyRDtBQU9uRjtBQU9BO0FBQ3lEO0FBQ3ZCO0FBRXpDLE1BQU0sZUFBZSxDQUFDLE9BQU8sV0FBVztBQUN4QyxNQUFNLGlCQUFpQjtBQUN2QixNQUFNLHFCQUFxQjtBQUMzQixNQUFNLHVCQUF1QixNQUFPLEtBQUssS0FBSztBQUM5QyxNQUFNLFdBQVc7QUFJakIsTUFBTSxjQUFnQztBQUFBLEVBQ3BDLEVBQUUsT0FBTyxlQUFlLFdBQVcsY0FBYztBQUFBLEVBQ2pELEVBQUUsT0FBTyxZQUFZLFdBQVcsV0FBVztBQUFBLEVBQzNDLEVBQUUsT0FBTyxNQUFNLFdBQVcsV0FBVztBQUFBLEVBQ3JDLEVBQUUsT0FBTyxNQUFNLFdBQVcsV0FBVztBQUFBLEVBQ3JDLEVBQUUsT0FBTyxPQUFPLFdBQVcsV0FBVztBQUFBLEVBQ3RDLEVBQUUsT0FBTyxPQUFPLFdBQVcsV0FBVztBQUFBLEVBQ3RDLEVBQUUsT0FBTyxNQUFNLFdBQVcsV0FBVztBQUFBLEVBQ3JDLEVBQUUsT0FBTyxNQUFNLFdBQVcsV0FBVztBQUN2QztBQUVPLE1BQU0seUJBQXlCLE1BQU87QUFFN0MsTUFBTSxZQUFZLENBQUMsV0FBbUIsRUFBRSxPQUFPLFlBQVksSUFBSyxTQUFVO0FBU25FLFNBQVMsbUJBQW1CLE1BQXNCLFNBQTRDO0FBQ25HLFFBQU0sV0FBVyxLQUFLLElBQUksSUFBSTtBQUM5QixRQUFNLGlCQUFpQixRQUFRLE9BQU8sQ0FBQyxNQUFNLEVBQUUsS0FBSyxZQUFZLEVBQUUsTUFBTSxTQUFTLEtBQUssS0FBSztBQUMzRixNQUFJLE9BQU8sV0FBVyxlQUFlO0FBQ3JDLFFBQU0sU0FBUyxlQUFlLENBQUM7QUFFL0IsTUFBSSxRQUFRO0FBQ1YsVUFBTSxjQUFjLHVEQUFRLENBQUMsT0FBTyxFQUFFLEVB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QUFpQixtRkFBbUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUFBLE1BQzlEO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvTGFuZ3VhZ2VQcm92aWRlci50cz9mNDU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNoYWluLCBkaWZmZXJlbmNlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IExSVUNhY2hlIH0gZnJvbSAnbHJ1LWNhY2hlJztcbmltcG9ydCBQcmlzbSwgeyBHcmFtbWFyIH0gZnJvbSAncHJpc21qcyc7XG5cbmltcG9ydCB7IGRhdGVUaW1lLCBBYnNvbHV0ZVRpbWVSYW5nZSwgTGFuZ3VhZ2VQcm92aWRlciwgSGlzdG9yeUl0ZW0sIEFic3RyYWN0UXVlcnkgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IENvbXBsZXRpb25JdGVtLCBUeXBlYWhlYWRJbnB1dCwgVHlwZWFoZWFkT3V0cHV0LCBDb21wbGV0aW9uSXRlbUdyb3VwIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHtcbiAgZXh0cmFjdExhYmVsTWF0Y2hlcnMsXG4gIHBhcnNlU2VsZWN0b3IsXG4gIHByb2Nlc3NMYWJlbHMsXG4gIHRvUHJvbUxpa2VFeHByLFxufSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvbGFuZ3VhZ2VfdXRpbHMnO1xuXG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSB9IGZyb20gJy4vZGF0YXNvdXJjZSc7XG5pbXBvcnQge1xuICBleHRyYWN0TGFiZWxLZXlzRnJvbURhdGFGcmFtZSxcbiAgZXh0cmFjdExvZ1BhcnNlckZyb21EYXRhRnJhbWUsXG4gIGV4dHJhY3RVbndyYXBMYWJlbEtleXNGcm9tRGF0YUZyYW1lLFxufSBmcm9tICcuL3Jlc3BvbnNlVXRpbHMnO1xuaW1wb3J0IHN5bnRheCwgeyBGVU5DVElPTlMsIFBJUEVfUEFSU0VSUywgUElQRV9PUEVSQVRPUlMgfSBmcm9tICcuL3N5bnRheCc7XG5pbXBvcnQgeyBMb2tpUXVlcnksIExva2lRdWVyeVR5cGUgfSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgREVGQVVMVF9LRVlTID0gWydqb2InLCAnbmFtZXNwYWNlJ107XG5jb25zdCBFTVBUWV9TRUxFQ1RPUiA9ICd7fSc7XG5jb25zdCBISVNUT1JZX0lURU1fQ09VTlQgPSAxMDtcbmNvbnN0IEhJU1RPUllfQ09VTlRfQ1VUT0ZGID0gMTAwMCAqIDYwICogNjAgKiAyNDsgLy8gMjRoXG5jb25zdCBOU19JTl9NUyA9IDEwMDAwMDA7XG5cbi8vIFdoZW4gY2hhbmdpbmcgUkFURV9SQU5HRVMsIGNoZWNrIGlmIFByb21ldGhldXMvUHJvbVFMIHJhbmdlcyBzaG91bGQgYmUgY2hhbmdlZCB0b29cbi8vIEBzZWUgcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9wcm9tcWwudHNcbmNvbnN0IFJBVEVfUkFOR0VTOiBDb21wbGV0aW9uSXRlbVtdID0gW1xuICB7IGxhYmVsOiAnJF9faW50ZXJ2YWwnLCBzb3J0VmFsdWU6ICckX19pbnRlcnZhbCcgfSxcbiAgeyBsYWJlbDogJyRfX3JhbmdlJywgc29ydFZhbHVlOiAnJF9fcmFuZ2UnIH0sXG4gIHsgbGFiZWw6ICcxbScsIHNvcnRWYWx1ZTogJzAwOjAxOjAwJyB9LFxuICB7IGxhYmVsOiAnNW0nLCBzb3J0VmFsdWU6ICcwMDowNTowMCcgfSxcbiAgeyBsYWJlbDogJzEwbScsIHNvcnRWYWx1ZTogJzAwOjEwOjAwJyB9LFxuICB7IGxhYmVsOiAnMzBtJywgc29ydFZhbHVlOiAnMDA6MzA6MDAnIH0sXG4gIHsgbGFiZWw6ICcxaCcsIHNvcnRWYWx1ZTogJzAxOjAwOjAwJyB9LFxuICB7IGxhYmVsOiAnMWQnLCBzb3J0VmFsdWU6ICcyNDowMDowMCcgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBMQUJFTF9SRUZSRVNIX0lOVEVSVkFMID0gMTAwMCAqIDMwOyAvLyAzMHNlY1xuXG5jb25zdCB3cmFwTGFiZWwgPSAobGFiZWw6IHN0cmluZykgPT4gKHsgbGFiZWwsIGZpbHRlclRleHQ6IGBcXFwiJHtsYWJlbH1cXFwiYCB9KTtcblxuZXhwb3J0IHR5cGUgTG9raUhpc3RvcnlJdGVtID0gSGlzdG9yeUl0ZW08TG9raVF1ZXJ5PjtcblxudHlwZSBUeXBlYWhlYWRDb250ZXh0ID0ge1xuICBoaXN0b3J5PzogTG9raUhpc3RvcnlJdGVtW107XG4gIGFic29sdXRlUmFuZ2U/OiBBYnNvbHV0ZVRpbWVSYW5nZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRIaXN0b3J5TWV0YWRhdGEoaXRlbTogQ29tcGxldGlvbkl0ZW0sIGhpc3Rvcnk6IExva2lIaXN0b3J5SXRlbVtdKTogQ29tcGxldGlvbkl0ZW0ge1xuICBjb25zdCBjdXRvZmZUcyA9IERhdGUubm93KCkgLSBISVNUT1JZX0NPVU5UX0NVVE9GRjtcbiAgY29uc3QgaGlzdG9yeUZvckl0ZW0gPSBoaXN0b3J5LmZpbHRlcigoaCkgPT4gaC50cyA+IGN1dG9mZlRzICYmIGgucXVlcnkuZXhwciA9PT0gaXRlbS5sYWJlbCk7XG4gIGxldCBoaW50ID0gYFF1ZXJpZWQgJHtoaXN0b3J5Rm9ySXRlbS5sZW5ndGh9IHRpbWVzIGluIHRoZSBsYXN0IDI0aC5gO1xuICBjb25zdCByZWNlbnQgPSBoaXN0b3J5Rm9ySXRlbVswXTtcblxuICBpZiAocmVjZW50KSB7XG4gICAgY29uc3QgbGFzdFF1ZXJpZWQgPSBkYXRlVGltZShyZWNlbnQudHMpLmZyb21Ob3coKTtcbiAgICBoaW50ID0gYCR7aGludH0gTGFzdCBxdWVyaWVkICR7bGFzdFF1ZXJpZWR9LmA7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIC4uLml0ZW0sXG4gICAgZG9jdW1lbnRhdGlvbjogaGludCxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9raUxhbmd1YWdlUHJvdmlkZXIgZXh0ZW5kcyBMYW5ndWFnZVByb3ZpZGVyIHtcbiAgbGFiZWxLZXlzOiBzdHJpbmdbXTtcbiAgbGFiZWxGZXRjaFRzOiBudW1iZXI7XG4gIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgZGF0YXNvdXJjZTogTG9raURhdGFzb3VyY2U7XG4gIGxvb2t1cHNEaXNhYmxlZCA9IGZhbHNlOyAvLyBEeW5hbWljYWxseSBzZXQgdG8gdHJ1ZSBmb3IgYmlnL3Nsb3cgaW5zdGFuY2VzXG5cbiAgLyoqXG4gICAqICBDYWNoZSBmb3IgbGFiZWxzIG9mIHNlcmllcy4gVGhpcyBpcyBiaXQgc2ltcGxpc3RpYyBpbiB0aGUgc2Vuc2UgdGhhdCBpdCBqdXN0IGNvdW50cyByZXNwb25zZXMgZWFjaCBhcyBhIDEgYW5kIGRvZXNcbiAgICogIG5vdCBhY2NvdW50IGZvciBkaWZmZXJlbnQgc2l6ZSBvZiBhIHJlc3BvbnNlLiBJZiB0aGF0IGlzIG5lZWRlZCBhIGBsZW5ndGhgIGZ1bmN0aW9uIGNhbiBiZSBhZGRlZCBpbiB0aGUgb3B0aW9ucy5cbiAgICogIDEwIGFzIGEgbWF4IHNpemUgaXMgdG90YWxseSBhcmJpdHJhcnkgcmlnaHQgbm93LlxuICAgKi9cbiAgcHJpdmF0ZSBzZXJpZXNDYWNoZSA9IG5ldyBMUlVDYWNoZTxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPj4oeyBtYXg6IDEwIH0pO1xuICBwcml2YXRlIGxhYmVsc0NhY2hlID0gbmV3IExSVUNhY2hlPHN0cmluZywgc3RyaW5nW10+KHsgbWF4OiAxMCB9KTtcblxuICBjb25zdHJ1Y3RvcihkYXRhc291cmNlOiBMb2tpRGF0YXNvdXJjZSwgaW5pdGlhbFZhbHVlcz86IGFueSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmRhdGFzb3VyY2UgPSBkYXRhc291cmNlO1xuICAgIHRoaXMubGFiZWxLZXlzID0gW107XG4gICAgdGhpcy5sYWJlbEZldGNoVHMgPSAwO1xuXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbml0aWFsVmFsdWVzKTtcbiAgfVxuXG4gIC8vIFN0cmlwIHN5bnRheCBjaGFyc1xuICBjbGVhblRleHQgPSAoczogc3RyaW5nKSA9PiBzLnJlcGxhY2UoL1t7fVtcXF09XCIoKSwhfitcXC0qL14lXFx8XS9nLCAnJykudHJpbSgpO1xuXG4gIGdldFN5bnRheCgpOiBHcmFtbWFyIHtcbiAgICByZXR1cm4gc3ludGF4O1xuICB9XG5cbiAgcmVxdWVzdCA9IGFzeW5jICh1cmw6IHN0cmluZywgcGFyYW1zPzogYW55KTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZGF0YXNvdXJjZS5tZXRhZGF0YVJlcXVlc3QodXJsLCBwYXJhbXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXNlIHRoZSBsYW5ndWFnZSBwcm92aWRlciBieSBmZXRjaGluZyBzZXQgb2YgbGFiZWxzLiBXaXRob3V0IHRoaXMgaW5pdGlhbGlzYXRpb24gdGhlIHByb3ZpZGVyIHdvdWxkIHJldHVyblxuICAgKiBqdXN0IGEgc2V0IG9mIGhhcmRjb2RlZCBkZWZhdWx0IGxhYmVscyBvbiBwcm92aWRlQ29tcGxldGlvbkl0ZW1zIG9yIGEgcmVjZW50IHF1ZXJpZXMgZnJvbSBoaXN0b3J5LlxuICAgKi9cbiAgc3RhcnQgPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0VGFzaykge1xuICAgICAgdGhpcy5zdGFydFRhc2sgPSB0aGlzLmZldGNoTGFiZWxzKCkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN0YXJ0VGFzaztcbiAgfTtcblxuICBnZXRMYWJlbEtleXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLmxhYmVsS2V5cztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gc3VnZ2VzdGlvbnMgYmFzZWQgb24gaW5wdXQgdGhhdCBjYW4gYmUgdGhlbiBwbHVnZ2VkIGludG8gYSB0eXBlYWhlYWQgZHJvcGRvd24uXG4gICAqIEtlZXAgdGhpcyBET00tZnJlZSBmb3IgdGVzdGluZ1xuICAgKiBAcGFyYW0gaW5wdXRcbiAgICogQHBhcmFtIGNvbnRleHQgSXMgb3B0aW9uYWwgaW4gdHlwZXMgYnV0IGlzIHJlcXVpcmVkIGluIGNhc2Ugd2UgYXJlIGRvaW5nIGdldExhYmVsQ29tcGxldGlvbkl0ZW1zXG4gICAqIEBwYXJhbSBjb250ZXh0LmFic29sdXRlUmFuZ2UgUmVxdWlyZWQgaW4gY2FzZSB3ZSBhcmUgZG9pbmcgZ2V0TGFiZWxDb21wbGV0aW9uSXRlbXNcbiAgICogQHBhcmFtIGNvbnRleHQuaGlzdG9yeSBPcHRpb25hbCB1c2VkIG9ubHkgaW4gZ2V0RW1wdHlDb21wbGV0aW9uSXRlbXNcbiAgICovXG4gIGFzeW5jIHByb3ZpZGVDb21wbGV0aW9uSXRlbXMoaW5wdXQ6IFR5cGVhaGVhZElucHV0LCBjb250ZXh0PzogVHlwZWFoZWFkQ29udGV4dCk6IFByb21pc2U8VHlwZWFoZWFkT3V0cHV0PiB7XG4gICAgY29uc3QgeyB3cmFwcGVyQ2xhc3NlcywgdmFsdWUsIHByZWZpeCwgdGV4dCB9ID0gaW5wdXQ7XG4gICAgY29uc3QgZW1wdHlSZXN1bHQ6IFR5cGVhaGVhZE91dHB1dCA9IHsgc3VnZ2VzdGlvbnM6IFtdIH07XG5cbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICByZXR1cm4gZW1wdHlSZXN1bHQ7XG4gICAgfVxuXG4gICAgLy8gTG9jYWwgdGV4dCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgZW1wdHkgPSB2YWx1ZT8uZG9jdW1lbnQudGV4dC5sZW5ndGggPT09IDA7XG4gICAgY29uc3Qgc2VsZWN0ZWRMaW5lcyA9IHZhbHVlLmRvY3VtZW50LmdldFRleHRzQXRSYW5nZSh2YWx1ZS5zZWxlY3Rpb24pO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gc2VsZWN0ZWRMaW5lcy5zaXplID09PSAxID8gc2VsZWN0ZWRMaW5lcy5maXJzdCgpLmdldFRleHQoKSA6IG51bGw7XG5cbiAgICBjb25zdCBuZXh0Q2hhcmFjdGVyID0gY3VycmVudExpbmUgPyBjdXJyZW50TGluZVt2YWx1ZS5zZWxlY3Rpb24uYW5jaG9yLm9mZnNldF0gOiBudWxsO1xuXG4gICAgLy8gU3ludGF4IHNwYW5zIGhhdmUgMyBjbGFzc2VzIGJ5IGRlZmF1bHQuIE1vcmUgaW5kaWNhdGUgYSByZWNvZ25pemVkIHRva2VuXG4gICAgY29uc3QgdG9rZW5SZWNvZ25pemVkID0gd3JhcHBlckNsYXNzZXMubGVuZ3RoID4gMztcblxuICAgIC8vIE5vbi1lbXB0eSBwcmVmaXgsIGJ1dCBub3QgaW5zaWRlIGtub3duIHRva2VuXG4gICAgY29uc3QgcHJlZml4VW5yZWNvZ25pemVkID0gcHJlZml4ICYmICF0b2tlblJlY29nbml6ZWQ7XG5cbiAgICAvLyBQcmV2ZW50IHN1Z2dlc3Rpb25zIGluIGBmdW5jdGlvbih8c3VmZml4KWBcbiAgICBjb25zdCBub1N1ZmZpeCA9ICFuZXh0Q2hhcmFjdGVyIHx8IG5leHRDaGFyYWN0ZXIgPT09ICcpJztcblxuICAgIC8vIFByZWZpeCBpcyBzYWZlIGlmIGl0IGRvZXMgbm90IGltbWVkaWF0ZWx5IGZvbGxvdyBhIGNvbXBsZXRlIGV4cHJlc3Npb24gYW5kIGhhcyBubyB0ZXh0IGFmdGVyIGl0XG4gICAgY29uc3Qgc2FmZVByZWZpeCA9IHByZWZpeCAmJiAhdGV4dC5tYXRjaCgvXlsnXCJ+PVxcXX0pXFxzXSskLykgJiYgbm9TdWZmaXg7XG5cbiAgICAvLyBBYm91dCB0byB0eXBlIG5leHQgb3BlcmFuZCBpZiBwcmVjZWRlZCBieSBiaW5hcnkgb3BlcmF0b3JcbiAgICBjb25zdCBvcGVyYXRvcnNQYXR0ZXJuID0gL1srXFwtKi9eJV0vO1xuICAgIGNvbnN0IGlzTmV4dE9wZXJhbmQgPSB0ZXh0Lm1hdGNoKG9wZXJhdG9yc1BhdHRlcm4pO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGNhbmRpZGF0ZXMgYnkgQ1NTIGNvbnRleHRcbiAgICBpZiAod3JhcHBlckNsYXNzZXMuaW5jbHVkZXMoJ2NvbnRleHQtcmFuZ2UnKSkge1xuICAgICAgLy8gU3VnZ2VzdGlvbnMgZm9yIG1ldHJpY1t8XVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0UmFuZ2VDb21wbGV0aW9uSXRlbXMoKTtcbiAgICB9IGVsc2UgaWYgKHdyYXBwZXJDbGFzc2VzLmluY2x1ZGVzKCdjb250ZXh0LWxhYmVscycpKSB7XG4gICAgICAvLyBTdWdnZXN0aW9ucyBmb3Ige3x9IGFuZCB7Zm9vPXx9XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRMYWJlbENvbXBsZXRpb25JdGVtcyhpbnB1dCk7XG4gICAgfSBlbHNlIGlmICh3cmFwcGVyQ2xhc3Nlcy5pbmNsdWRlcygnY29udGV4dC1waXBlJykpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFBpcGVDb21wbGV0aW9uSXRlbSgpO1xuICAgIH0gZWxzZSBpZiAoZW1wdHkpIHtcbiAgICAgIC8vIFN1Z2dlc3Rpb25zIGZvciBlbXB0eSBxdWVyeSBmaWVsZFxuICAgICAgcmV0dXJuIHRoaXMuZ2V0RW1wdHlDb21wbGV0aW9uSXRlbXMoY29udGV4dCk7XG4gICAgfSBlbHNlIGlmIChwcmVmaXhVbnJlY29nbml6ZWQgJiYgbm9TdWZmaXggJiYgIWlzTmV4dE9wZXJhbmQpIHtcbiAgICAgIC8vIFNob3cgdGVybSBzdWdnZXN0aW9ucyBpbiBhIGNvdXBsZSBvZiBzY2VuYXJpb3NcbiAgICAgIHJldHVybiB0aGlzLmdldEJlZ2lubmluZ0NvbXBsZXRpb25JdGVtcyhjb250ZXh0KTtcbiAgICB9IGVsc2UgaWYgKHByZWZpeFVucmVjb2duaXplZCAmJiBzYWZlUHJlZml4KSB7XG4gICAgICAvLyBTaG93IHRlcm0gc3VnZ2VzdGlvbnMgaW4gYSBjb3VwbGUgb2Ygc2NlbmFyaW9zXG4gICAgICByZXR1cm4gdGhpcy5nZXRUZXJtQ29tcGxldGlvbkl0ZW1zKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVtcHR5UmVzdWx0O1xuICB9XG5cbiAgZ2V0QmVnaW5uaW5nQ29tcGxldGlvbkl0ZW1zID0gKGNvbnRleHQ/OiBUeXBlYWhlYWRDb250ZXh0KTogVHlwZWFoZWFkT3V0cHV0ID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VnZ2VzdGlvbnM6IFsuLi50aGlzLmdldEVtcHR5Q29tcGxldGlvbkl0ZW1zKGNvbnRleHQpLnN1Z2dlc3Rpb25zLCAuLi50aGlzLmdldFRlcm1Db21wbGV0aW9uSXRlbXMoKS5zdWdnZXN0aW9uc10sXG4gICAgfTtcbiAgfTtcblxuICBnZXRFbXB0eUNvbXBsZXRpb25JdGVtcyhjb250ZXh0PzogVHlwZWFoZWFkQ29udGV4dCk6IFR5cGVhaGVhZE91dHB1dCB7XG4gICAgY29uc3QgaGlzdG9yeSA9IGNvbnRleHQ/Lmhpc3Rvcnk7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBbXTtcblxuICAgIGlmIChoaXN0b3J5Py5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGhpc3RvcnlJdGVtcyA9IGNoYWluKGhpc3RvcnkpXG4gICAgICAgIC5tYXAoKGgpID0+IGgucXVlcnkuZXhwcilcbiAgICAgICAgLmZpbHRlcigpXG4gICAgICAgIC51bmlxKClcbiAgICAgICAgLnRha2UoSElTVE9SWV9JVEVNX0NPVU5UKVxuICAgICAgICAubWFwKHdyYXBMYWJlbClcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gYWRkSGlzdG9yeU1ldGFkYXRhKGl0ZW0sIGhpc3RvcnkpKVxuICAgICAgICAudmFsdWUoKTtcblxuICAgICAgc3VnZ2VzdGlvbnMucHVzaCh7XG4gICAgICAgIHByZWZpeE1hdGNoOiB0cnVlLFxuICAgICAgICBza2lwU29ydDogdHJ1ZSxcbiAgICAgICAgbGFiZWw6ICdIaXN0b3J5JyxcbiAgICAgICAgaXRlbXM6IGhpc3RvcnlJdGVtcyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Z2dlc3Rpb25zIH07XG4gIH1cblxuICBnZXRUZXJtQ29tcGxldGlvbkl0ZW1zID0gKCk6IFR5cGVhaGVhZE91dHB1dCA9PiB7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBbXTtcblxuICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgcHJlZml4TWF0Y2g6IHRydWUsXG4gICAgICBsYWJlbDogJ0Z1bmN0aW9ucycsXG4gICAgICBpdGVtczogRlVOQ1RJT05TLm1hcCgoc3VnZ2VzdGlvbikgPT4gKHsgLi4uc3VnZ2VzdGlvbiwga2luZDogJ2Z1bmN0aW9uJyB9KSksXG4gICAgfSk7XG5cbiAgICByZXR1cm4geyBzdWdnZXN0aW9ucyB9O1xuICB9O1xuXG4gIGdldFBpcGVDb21wbGV0aW9uSXRlbSA9ICgpOiBUeXBlYWhlYWRPdXRwdXQgPT4ge1xuICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gW107XG5cbiAgICBzdWdnZXN0aW9ucy5wdXNoKHtcbiAgICAgIGxhYmVsOiAnT3BlcmF0b3JzJyxcbiAgICAgIGl0ZW1zOiBQSVBFX09QRVJBVE9SUy5tYXAoKHN1Z2dlc3Rpb24pID0+ICh7IC4uLnN1Z2dlc3Rpb24sIGtpbmQ6ICdvcGVyYXRvcnMnIH0pKSxcbiAgICB9KTtcblxuICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgbGFiZWw6ICdQYXJzZXJzJyxcbiAgICAgIGl0ZW1zOiBQSVBFX1BBUlNFUlMubWFwKChzdWdnZXN0aW9uKSA9PiAoeyAuLi5zdWdnZXN0aW9uLCBraW5kOiAncGFyc2VycycgfSkpLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgc3VnZ2VzdGlvbnMgfTtcbiAgfTtcblxuICBnZXRSYW5nZUNvbXBsZXRpb25JdGVtcygpOiBUeXBlYWhlYWRPdXRwdXQge1xuICAgIHJldHVybiB7XG4gICAgICBjb250ZXh0OiAnY29udGV4dC1yYW5nZScsXG4gICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6ICdSYW5nZSB2ZWN0b3InLFxuICAgICAgICAgIGl0ZW1zOiBbLi4uUkFURV9SQU5HRVNdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgZ2V0TGFiZWxDb21wbGV0aW9uSXRlbXMoeyB0ZXh0LCB3cmFwcGVyQ2xhc3NlcywgbGFiZWxLZXksIHZhbHVlIH06IFR5cGVhaGVhZElucHV0KTogUHJvbWlzZTxUeXBlYWhlYWRPdXRwdXQ+IHtcbiAgICBsZXQgY29udGV4dCA9ICdjb250ZXh0LWxhYmVscyc7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IENvbXBsZXRpb25JdGVtR3JvdXBbXSA9IFtdO1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybiB7IGNvbnRleHQsIHN1Z2dlc3Rpb25zOiBbXSB9O1xuICAgIH1cbiAgICBjb25zdCBsaW5lID0gdmFsdWUuYW5jaG9yQmxvY2suZ2V0VGV4dCgpO1xuICAgIGNvbnN0IGN1cnNvck9mZnNldCA9IHZhbHVlLnNlbGVjdGlvbi5hbmNob3Iub2Zmc2V0O1xuICAgIGNvbnN0IGlzVmFsdWVTdGFydCA9IHRleHQubWF0Y2goL14oPXw9fnwhPXwhfikvKTtcblxuICAgIC8vIEdldCBub3JtYWxpemVkIHNlbGVjdG9yXG4gICAgbGV0IHNlbGVjdG9yO1xuICAgIGxldCBwYXJzZWRTZWxlY3RvcjtcbiAgICB0cnkge1xuICAgICAgcGFyc2VkU2VsZWN0b3IgPSBwYXJzZVNlbGVjdG9yKGxpbmUsIGN1cnNvck9mZnNldCk7XG4gICAgICBzZWxlY3RvciA9IHBhcnNlZFNlbGVjdG9yLnNlbGVjdG9yO1xuICAgIH0gY2F0Y2gge1xuICAgICAgc2VsZWN0b3IgPSBFTVBUWV9TRUxFQ1RPUjtcbiAgICB9XG5cbiAgICBpZiAoIWxhYmVsS2V5ICYmIHNlbGVjdG9yID09PSBFTVBUWV9TRUxFQ1RPUikge1xuICAgICAgLy8gc3RhcnQgdGFzayBnZXRzIGFsbCBsYWJlbHNcbiAgICAgIGF3YWl0IHRoaXMuc3RhcnQoKTtcbiAgICAgIGNvbnN0IGFsbExhYmVscyA9IHRoaXMuZ2V0TGFiZWxLZXlzKCk7XG4gICAgICByZXR1cm4geyBjb250ZXh0LCBzdWdnZXN0aW9uczogW3sgbGFiZWw6IGBMYWJlbHNgLCBpdGVtczogYWxsTGFiZWxzLm1hcCh3cmFwTGFiZWwpIH1dIH07XG4gICAgfVxuXG4gICAgY29uc3QgZXhpc3RpbmdLZXlzID0gcGFyc2VkU2VsZWN0b3IgPyBwYXJzZWRTZWxlY3Rvci5sYWJlbEtleXMgOiBbXTtcblxuICAgIGxldCBsYWJlbFZhbHVlcztcbiAgICAvLyBRdWVyeSBsYWJlbHMgZm9yIHNlbGVjdG9yXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBpZiAoc2VsZWN0b3IgPT09IEVNUFRZX1NFTEVDVE9SICYmIGxhYmVsS2V5KSB7XG4gICAgICAgIGNvbnN0IGxhYmVsVmFsdWVzRm9yS2V5ID0gYXdhaXQgdGhpcy5nZXRMYWJlbFZhbHVlcyhsYWJlbEtleSk7XG4gICAgICAgIGxhYmVsVmFsdWVzID0geyBbbGFiZWxLZXldOiBsYWJlbFZhbHVlc0ZvcktleSB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGFiZWxWYWx1ZXMgPSBhd2FpdCB0aGlzLmdldFNlcmllc0xhYmVscyhzZWxlY3Rvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFsYWJlbFZhbHVlcykge1xuICAgICAgY29uc29sZS53YXJuKGBTZXJ2ZXIgZGlkIG5vdCByZXR1cm4gYW55IHZhbHVlcyBmb3Igc2VsZWN0b3IgPSAke3NlbGVjdG9yfWApO1xuICAgICAgcmV0dXJuIHsgY29udGV4dCwgc3VnZ2VzdGlvbnMgfTtcbiAgICB9XG5cbiAgICBpZiAoKHRleHQgJiYgaXNWYWx1ZVN0YXJ0KSB8fCB3cmFwcGVyQ2xhc3Nlcy5pbmNsdWRlcygnYXR0ci12YWx1ZScpKSB7XG4gICAgICAvLyBMYWJlbCB2YWx1ZXNcbiAgICAgIGlmIChsYWJlbEtleSAmJiBsYWJlbFZhbHVlc1tsYWJlbEtleV0pIHtcbiAgICAgICAgY29udGV4dCA9ICdjb250ZXh0LWxhYmVsLXZhbHVlcyc7XG4gICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgICAgIGxhYmVsOiBgTGFiZWwgdmFsdWVzIGZvciBcIiR7bGFiZWxLZXl9XCJgLFxuICAgICAgICAgIC8vIEZpbHRlciB0byBwcmV2ZW50IHByZXZpb3VzbHkgc2VsZWN0ZWQgdmFsdWVzIGZyb20gYmVpbmcgcmVwZWF0ZWRseSBzdWdnZXN0ZWRcbiAgICAgICAgICBpdGVtczogbGFiZWxWYWx1ZXNbbGFiZWxLZXldLm1hcCh3cmFwTGFiZWwpLmZpbHRlcigoeyBmaWx0ZXJUZXh0IH0pID0+IGZpbHRlclRleHQgIT09IHRleHQpLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTGFiZWwga2V5c1xuICAgICAgY29uc3QgbGFiZWxLZXlzID0gbGFiZWxWYWx1ZXMgPyBPYmplY3Qua2V5cyhsYWJlbFZhbHVlcykgOiBERUZBVUxUX0tFWVM7XG4gICAgICBpZiAobGFiZWxLZXlzKSB7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlS2V5cyA9IGRpZmZlcmVuY2UobGFiZWxLZXlzLCBleGlzdGluZ0tleXMpO1xuICAgICAgICBpZiAocG9zc2libGVLZXlzLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IG5ld0l0ZW1zID0gcG9zc2libGVLZXlzLm1hcCgoa2V5KSA9PiAoeyBsYWJlbDoga2V5IH0pKTtcbiAgICAgICAgICBjb25zdCBuZXdTdWdnZXN0aW9uOiBDb21wbGV0aW9uSXRlbUdyb3VwID0geyBsYWJlbDogYExhYmVsc2AsIGl0ZW1zOiBuZXdJdGVtcyB9O1xuICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2gobmV3U3VnZ2VzdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBjb250ZXh0LCBzdWdnZXN0aW9ucyB9O1xuICB9XG5cbiAgaW1wb3J0RnJvbUFic3RyYWN0UXVlcnkobGFiZWxCYXNlZFF1ZXJ5OiBBYnN0cmFjdFF1ZXJ5KTogTG9raVF1ZXJ5IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVmSWQ6IGxhYmVsQmFzZWRRdWVyeS5yZWZJZCxcbiAgICAgIGV4cHI6IHRvUHJvbUxpa2VFeHByKGxhYmVsQmFzZWRRdWVyeSksXG4gICAgICBxdWVyeVR5cGU6IExva2lRdWVyeVR5cGUuUmFuZ2UsXG4gICAgfTtcbiAgfVxuXG4gIGV4cG9ydFRvQWJzdHJhY3RRdWVyeShxdWVyeTogTG9raVF1ZXJ5KTogQWJzdHJhY3RRdWVyeSB7XG4gICAgY29uc3QgbG9raVF1ZXJ5ID0gcXVlcnkuZXhwcjtcbiAgICBpZiAoIWxva2lRdWVyeSB8fCBsb2tpUXVlcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyByZWZJZDogcXVlcnkucmVmSWQsIGxhYmVsTWF0Y2hlcnM6IFtdIH07XG4gICAgfVxuICAgIGNvbnN0IHRva2VucyA9IFByaXNtLnRva2VuaXplKGxva2lRdWVyeSwgc3ludGF4KTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVmSWQ6IHF1ZXJ5LnJlZklkLFxuICAgICAgbGFiZWxNYXRjaGVyczogZXh0cmFjdExhYmVsTWF0Y2hlcnModG9rZW5zKSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgZ2V0U2VyaWVzTGFiZWxzKHNlbGVjdG9yOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5sb29rdXBzRGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaFNlcmllc0xhYmVscyhzZWxlY3Rvcik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFRPRE86IGJldHRlciBlcnJvciBoYW5kbGluZ1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGFsbCBsYWJlbCBrZXlzXG4gICAqL1xuICBhc3luYyBmZXRjaExhYmVscygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgdXJsID0gJ2xhYmVscyc7XG4gICAgY29uc3QgdGltZVJhbmdlID0gdGhpcy5kYXRhc291cmNlLmdldFRpbWVSYW5nZVBhcmFtcygpO1xuICAgIHRoaXMubGFiZWxGZXRjaFRzID0gRGF0ZS5ub3coKS52YWx1ZU9mKCk7XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3QodXJsLCB0aW1lUmFuZ2UpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJlcykpIHtcbiAgICAgIGNvbnN0IGxhYmVscyA9IHJlc1xuICAgICAgICAuc2xpY2UoKVxuICAgICAgICAuc29ydCgpXG4gICAgICAgIC5maWx0ZXIoKGxhYmVsKSA9PiBsYWJlbCAhPT0gJ19fbmFtZV9fJyk7XG4gICAgICB0aGlzLmxhYmVsS2V5cyA9IGxhYmVscztcbiAgICAgIHJldHVybiB0aGlzLmxhYmVsS2V5cztcbiAgICB9XG5cbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggbGFiZWxzIGZvciBhIHNlbGVjdG9yLiBUaGlzIGlzIGNhY2hlZCBieSBpdHMgYXJncyBidXQgYWxzbyBieSB0aGUgZ2xvYmFsIHRpbWVSYW5nZSBjdXJyZW50bHkgc2VsZWN0ZWQgYXNcbiAgICogdGhleSBjYW4gY2hhbmdlIG92ZXIgcmVxdWVzdGVkIHRpbWUuXG4gICAqIEBwYXJhbSBuYW1lXG4gICAqL1xuICBmZXRjaFNlcmllc0xhYmVscyA9IGFzeW5jIChtYXRjaDogc3RyaW5nKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4+ID0+IHtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRNYXRjaCA9IHRoaXMuZGF0YXNvdXJjZS5pbnRlcnBvbGF0ZVN0cmluZyhtYXRjaCk7XG4gICAgY29uc3QgdXJsID0gJ3Nlcmllcyc7XG4gICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSB0aGlzLmRhdGFzb3VyY2UuZ2V0VGltZVJhbmdlUGFyYW1zKCk7XG5cbiAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2VuZXJhdGVDYWNoZUtleSh1cmwsIHN0YXJ0LCBlbmQsIGludGVycG9sYXRlZE1hdGNoKTtcbiAgICBsZXQgdmFsdWUgPSB0aGlzLnNlcmllc0NhY2hlLmdldChjYWNoZUtleSk7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgY29uc3QgcGFyYW1zID0geyAnbWF0Y2hbXSc6IGludGVycG9sYXRlZE1hdGNoLCBzdGFydCwgZW5kIH07XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHVybCwgcGFyYW1zKTtcbiAgICAgIGNvbnN0IHsgdmFsdWVzIH0gPSBwcm9jZXNzTGFiZWxzKGRhdGEpO1xuICAgICAgdmFsdWUgPSB2YWx1ZXM7XG4gICAgICB0aGlzLnNlcmllc0NhY2hlLnNldChjYWNoZUtleSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZldGNoIHNlcmllcyBmb3IgYSBzZWxlY3Rvci4gVXNlIHRoaXMgZm9yIHJhdyByZXN1bHRzLiBVc2UgZmV0Y2hTZXJpZXNMYWJlbHMoKSB0byBnZXQgbGFiZWxzLlxuICAgKiBAcGFyYW0gbWF0Y2hcbiAgICovXG4gIGZldGNoU2VyaWVzID0gYXN5bmMgKG1hdGNoOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PFJlY29yZDxzdHJpbmcsIHN0cmluZz4+PiA9PiB7XG4gICAgY29uc3QgdXJsID0gJ3Nlcmllcyc7XG4gICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSB0aGlzLmRhdGFzb3VyY2UuZ2V0VGltZVJhbmdlUGFyYW1zKCk7XG4gICAgY29uc3QgcGFyYW1zID0geyAnbWF0Y2hbXSc6IG1hdGNoLCBzdGFydCwgZW5kIH07XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVxdWVzdCh1cmwsIHBhcmFtcyk7XG4gIH07XG5cbiAgLy8gQ2FjaGUga2V5IGlzIGEgYml0IGRpZmZlcmVudCBoZXJlLiBXZSByb3VuZCB1cCB0byBhIG1pbnV0ZSB0aGUgaW50ZXJ2YWxzLlxuICAvLyBUaGUgcm91bmRpbmcgbWF5IHNlZW0gc3RyYW5nZSBidXQgbWFrZXMgcmVsYXRpdmUgaW50ZXJ2YWxzIGxpa2Ugbm93LTFoIGxlc3MgcHJvbmUgdG8gbmVlZCBzZXBhcmF0ZSByZXF1ZXN0IGV2ZXJ5XG4gIC8vIG1pbGxpc2Vjb25kIHdoaWxlIHN0aWxsIGFjdHVhbGx5IGdldHRpbmcgYWxsIHRoZSBrZXlzIGZvciB0aGUgY29ycmVjdCBpbnRlcnZhbC4gVGhpcyBzdGlsbCBjYW4gY3JlYXRlIHByb2JsZW1zXG4gIC8vIHdoZW4gdXNlciBkb2VzIG5vdCB0aGUgbmV3ZXN0IHZhbHVlcyBmb3IgYSBtaW51dGUgaWYgYWxyZWFkeSBjYWNoZWQuXG4gIGdlbmVyYXRlQ2FjaGVLZXkodXJsOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBwYXJhbTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gW3VybCwgdGhpcy5yb3VuZFRpbWUoc3RhcnQpLCB0aGlzLnJvdW5kVGltZShlbmQpLCBwYXJhbV0uam9pbigpO1xuICB9XG5cbiAgLy8gUm91bmQgbmFub3MgZXBvY2ggdG8gbmVhcmVzdCA1IG1pbnV0ZSBpbnRlcnZhbFxuICByb3VuZFRpbWUobmFub3M6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIG5hbm9zID8gTWF0aC5mbG9vcihuYW5vcyAvIE5TX0lOX01TIC8gMTAwMCAvIDYwIC8gNSkgOiAwO1xuICB9XG5cbiAgYXN5bmMgZ2V0TGFiZWxWYWx1ZXMoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2hMYWJlbFZhbHVlcyhrZXkpO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hMYWJlbFZhbHVlcyhrZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRLZXkgPSBlbmNvZGVVUklDb21wb25lbnQodGhpcy5kYXRhc291cmNlLmludGVycG9sYXRlU3RyaW5nKGtleSkpO1xuXG4gICAgY29uc3QgdXJsID0gYGxhYmVsLyR7aW50ZXJwb2xhdGVkS2V5fS92YWx1ZXNgO1xuICAgIGNvbnN0IHJhbmdlUGFyYW1zID0gdGhpcy5kYXRhc291cmNlLmdldFRpbWVSYW5nZVBhcmFtcygpO1xuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gcmFuZ2VQYXJhbXM7XG5cbiAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2VuZXJhdGVDYWNoZUtleSh1cmwsIHN0YXJ0LCBlbmQsIGludGVycG9sYXRlZEtleSk7XG4gICAgY29uc3QgcGFyYW1zID0geyBzdGFydCwgZW5kIH07XG5cbiAgICBsZXQgbGFiZWxWYWx1ZXMgPSB0aGlzLmxhYmVsc0NhY2hlLmdldChjYWNoZUtleSk7XG4gICAgaWYgKCFsYWJlbFZhbHVlcykge1xuICAgICAgLy8gQ2xlYXIgdmFsdWUgd2hlbiByZXF1ZXN0aW5nIG5ldyBvbmUuIEVtcHR5IG9iamVjdCBiZWluZyB0cnV0aHkgYWxzbyBtYWtlcyBzdXJlIHdlIGRvbid0IHJlcXVlc3QgdHdpY2UuXG4gICAgICB0aGlzLmxhYmVsc0NhY2hlLnNldChjYWNoZUtleSwgW10pO1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHVybCwgcGFyYW1zKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlcykpIHtcbiAgICAgICAgbGFiZWxWYWx1ZXMgPSByZXMuc2xpY2UoKS5zb3J0KCk7XG4gICAgICAgIHRoaXMubGFiZWxzQ2FjaGUuc2V0KGNhY2hlS2V5LCBsYWJlbFZhbHVlcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhYmVsVmFsdWVzID8/IFtdO1xuICB9XG5cbiAgYXN5bmMgZ2V0UGFyc2VyQW5kTGFiZWxLZXlzKHNlbGVjdG9yOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICBleHRyYWN0ZWRMYWJlbEtleXM6IHN0cmluZ1tdO1xuICAgIGhhc0pTT046IGJvb2xlYW47XG4gICAgaGFzTG9nZm10OiBib29sZWFuO1xuICAgIGhhc1BhY2s6IGJvb2xlYW47XG4gICAgdW53cmFwTGFiZWxLZXlzOiBzdHJpbmdbXTtcbiAgfT4ge1xuICAgIGNvbnN0IHNlcmllcyA9IGF3YWl0IHRoaXMuZGF0YXNvdXJjZS5nZXREYXRhU2FtcGxlcyh7IGV4cHI6IHNlbGVjdG9yLCByZWZJZDogJ2RhdGEtc2FtcGxlcycgfSk7XG5cbiAgICBpZiAoIXNlcmllcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7IGV4dHJhY3RlZExhYmVsS2V5czogW10sIHVud3JhcExhYmVsS2V5czogW10sIGhhc0pTT046IGZhbHNlLCBoYXNMb2dmbXQ6IGZhbHNlLCBoYXNQYWNrOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgaGFzTG9nZm10LCBoYXNKU09OLCBoYXNQYWNrIH0gPSBleHRyYWN0TG9nUGFyc2VyRnJvbURhdGFGcmFtZShzZXJpZXNbMF0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGV4dHJhY3RlZExhYmVsS2V5czogZXh0cmFjdExhYmVsS2V5c0Zyb21EYXRhRnJhbWUoc2VyaWVzWzBdKSxcbiAgICAgIHVud3JhcExhYmVsS2V5czogZXh0cmFjdFVud3JhcExhYmVsS2V5c0Zyb21EYXRhRnJhbWUoc2VyaWVzWzBdKSxcbiAgICAgIGhhc0pTT04sXG4gICAgICBoYXNQYWNrLFxuICAgICAgaGFzTG9nZm10LFxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/LanguageProvider.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/LiveStreams.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LiveStreams: () => (/* binding */ LiveStreams)\n/* harmony export */ });\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/timer.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/throwError.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/retryWhen.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/finalize.js\");\n/* harmony import */ var rxjs_webSocket__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/dom/webSocket.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/CircularDataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _liveStreamsResultTransformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/loki/liveStreamsResultTransformer.ts\");\n\n\n\n\n\n\nclass LiveStreams {\n  constructor() {\n    this.streams = {};\n  }\n  getStream(target, retryInterval = 5e3) {\n    let stream = this.streams[target.url];\n    if (stream) {\n      return stream;\n    }\n    const data = new _grafana_data__WEBPACK_IMPORTED_MODULE_1__.CircularDataFrame({ capacity: target.size });\n    data.addField({ name: \"Time\", type: _grafana_data__WEBPACK_IMPORTED_MODULE_2__.FieldType.time, config: {} });\n    data.addField({ name: \"Line\", type: _grafana_data__WEBPACK_IMPORTED_MODULE_2__.FieldType.string });\n    data.addField({ name: \"id\", type: _grafana_data__WEBPACK_IMPORTED_MODULE_2__.FieldType.string });\n    data.meta = { ...data.meta, preferredVisualisationType: \"logs\" };\n    data.refId = target.refId;\n    stream = (0,rxjs_webSocket__WEBPACK_IMPORTED_MODULE_3__.webSocket)(target.url).pipe(\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)((response) => {\n        (0,_liveStreamsResultTransformer__WEBPACK_IMPORTED_MODULE_0__.appendResponseToBufferedData)(response, data);\n        return [data];\n      }),\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.retryWhen)(\n        (attempts) => attempts.pipe(\n          (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.mergeMap)((error, i) => {\n            const retryAttempt = i + 1;\n            if (error.code === 1006 && retryAttempt < 30) {\n              if (retryAttempt > 10) {\n                console.warn(\n                  `Websocket connection is being disrupted. We keep reconnecting but consider starting new live tailing again. Error: ${error.reason}`\n                );\n              }\n              return (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.timer)(retryInterval);\n            }\n            return (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.throwError)(error);\n          })\n        )\n      ),\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.finalize)(() => {\n        delete this.streams[target.url];\n      })\n    );\n    this.streams[target.url] = stream;\n    return stream;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL0xpdmVTdHJlYW1zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE4QztBQUNLO0FBQ3pCO0FBRXdDO0FBRXJCO0FBaUJ0QyxNQUFNLFlBQVk7QUFBQSxFQUFsQjtBQUNMLFNBQVEsVUFBNkMsQ0FBQztBQUFBO0FBQUEsRUFFdEQsVUFBVSxRQUF3QixnQkFBZ0IsS0FBK0I7QUFDL0UsUUFBSSxTQUFTLEtBQUssUUFBUSxPQUFPLEdBQUc7QUFFcEMsUUFBSSxRQUFRO0FBQ1YsYUFBTztBQUFBLElBQ1Q7QUFFQSxVQUFNLE9BQU8sSUFBSSw0REFBaUIsQ0FBQyxFQUFFLFVBQVUsT0FBTyxLQUFLLENBQUM7QUFDNUQsU0FBSyxTQUFTLEVBQUUsTUFBTSxRQUFRLE1BQU0sb0RBQVMsQ0FBQyxNQUFNLFFBQVEsQ0FBQyxFQUFFLENBQUM7QUFDaEUsU0FBSyxTQUFTLEVBQUUsTUFBTSxRQUFRLE1BQU0sb0RBQVMsQ0FBQyxPQUFPLENBQUM7QUFDdEQsU0FBSyxTQUFTLEVBQUUsTUFBTSxNQUFNLE1BQU0sb0RBQVMsQ0FBQyxPQUFPLENBQUM7QUFDcEQsU0FBSyxPQUFPLEVBQUUsR0FBRyxLQUFLLE1BQU0sNEJBQTRCLE9BQU87QUFDL0QsU0FBSyxRQUFRLE9BQU87QUFFcEIsYUFBUyx5REFBUyxDQUFtQixPQUFPLEdBQUcsRUFBRTtBQUFBLE1BQy9DLG1EQUFHLENBQUMsQ0FBQyxhQUErQjtBQUNsQyxtR0FBNEIsQ0FBQyxVQUFVLElBQUk7QUFDM0MsZUFBTyxDQUFDLElBQUk7QUFBQSxNQUNkLENBQUM7QUFBQSxNQUNELHlEQUFTO0FBQVQsUUFBVSxDQUFDLGFBQ1QsU0FBUztBQUFBLFVBQ1Asd0RBQVEsQ0FBQyxDQUFDLE9BQU8sTUFBTTtBQUNyQixrQkFBTSxlQUFlLElBQUk7QUFJekIsZ0JBQUksTUFBTSxTQUFTLFFBQVEsZUFBZSxJQUFJO0FBQzVDLGtCQUFJLGVBQWUsSUFBSTtBQUVyQix3QkFBUTtBQUFBLGtCQUNOLHNIQUFzSCxNQUFNO0FBQUEsZ0JBQzlIO0FBQUEsY0FDRjtBQUVBLHFCQUFPLDJDQUFLLENBQUMsYUFBYTtBQUFBLFlBQzVCO0FBQ0EsbUJBQU8sZ0RBQVUsQ0FBQyxLQUFLO0FBQUEsVUFDekIsQ0FBQztBQUFBLFFBQ0g7QUFBQSxNQUNGO0FBQUEsTUFDQSx3REFBUSxDQUFDLE1BQU07QUFDYixlQUFPLEtBQUssUUFBUSxPQUFPLEdBQUc7QUFBQSxNQUNoQyxDQUFDO0FBQUEsSUFDSDtBQUNBLFNBQUssUUFBUSxPQUFPLEdBQUcsSUFBSTtBQUUzQixXQUFPO0FBQUEsRUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvTGl2ZVN0cmVhbXMudHM/YWJiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlLCB0aHJvd0Vycm9yLCB0aW1lciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmluYWxpemUsIG1hcCwgcmV0cnlXaGVuLCBtZXJnZU1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IHdlYlNvY2tldCB9IGZyb20gJ3J4anMvd2ViU29ja2V0JztcblxuaW1wb3J0IHsgRGF0YUZyYW1lLCBGaWVsZFR5cGUsIEtleVZhbHVlLCBDaXJjdWxhckRhdGFGcmFtZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuXG5pbXBvcnQgeyBhcHBlbmRSZXNwb25zZVRvQnVmZmVyZWREYXRhIH0gZnJvbSAnLi9saXZlU3RyZWFtc1Jlc3VsdFRyYW5zZm9ybWVyJztcbmltcG9ydCB7IExva2lUYWlsUmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJztcblxuLyoqXG4gKiBNYXBzIGRpcmVjdGx5IHRvIGEgcXVlcnkgaW4gdGhlIFVJIChyZWZJZCBpcyBrZXkpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9raUxpdmVUYXJnZXQge1xuICBxdWVyeTogc3RyaW5nO1xuICB1cmw6IHN0cmluZztcbiAgcmVmSWQ6IHN0cmluZztcbiAgc2l6ZTogbnVtYmVyO1xufVxuXG4vKipcbiAqIENhY2hlIG9mIHdlYnNvY2tldCBzdHJlYW1zIHRoYXQgY2FuIGJlIHJldHVybmVkIGFzIG9ic2VydmFibGUuIEluIGNhc2UgdGhlcmUgYWxyZWFkeSBpcyBhIHN0cmVhbSBmb3IgcGFydGljdWxhclxuICogdGFyZ2V0IGl0IGlzIHJldHVybmVkIGFuZCBvbiBzdWJzY3JpcHRpb24gcmV0dXJucyB0aGUgbGF0ZXN0IGRhdGFGcmFtZS5cbiAqL1xuZXhwb3J0IGNsYXNzIExpdmVTdHJlYW1zIHtcbiAgcHJpdmF0ZSBzdHJlYW1zOiBLZXlWYWx1ZTxPYnNlcnZhYmxlPERhdGFGcmFtZVtdPj4gPSB7fTtcblxuICBnZXRTdHJlYW0odGFyZ2V0OiBMb2tpTGl2ZVRhcmdldCwgcmV0cnlJbnRlcnZhbCA9IDUwMDApOiBPYnNlcnZhYmxlPERhdGFGcmFtZVtdPiB7XG4gICAgbGV0IHN0cmVhbSA9IHRoaXMuc3RyZWFtc1t0YXJnZXQudXJsXTtcblxuICAgIGlmIChzdHJlYW0pIHtcbiAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IG5ldyBDaXJjdWxhckRhdGFGcmFtZSh7IGNhcGFjaXR5OiB0YXJnZXQuc2l6ZSB9KTtcbiAgICBkYXRhLmFkZEZpZWxkKHsgbmFtZTogJ1RpbWUnLCB0eXBlOiBGaWVsZFR5cGUudGltZSwgY29uZmlnOiB7fSB9KTtcbiAgICBkYXRhLmFkZEZpZWxkKHsgbmFtZTogJ0xpbmUnLCB0eXBlOiBGaWVsZFR5cGUuc3RyaW5nIH0pO1xuICAgIGRhdGEuYWRkRmllbGQoeyBuYW1lOiAnaWQnLCB0eXBlOiBGaWVsZFR5cGUuc3RyaW5nIH0pO1xuICAgIGRhdGEubWV0YSA9IHsgLi4uZGF0YS5tZXRhLCBwcmVmZXJyZWRWaXN1YWxpc2F0aW9uVHlwZTogJ2xvZ3MnIH07XG4gICAgZGF0YS5yZWZJZCA9IHRhcmdldC5yZWZJZDtcblxuICAgIHN0cmVhbSA9IHdlYlNvY2tldDxMb2tpVGFpbFJlc3BvbnNlPih0YXJnZXQudXJsKS5waXBlKFxuICAgICAgbWFwKChyZXNwb25zZTogTG9raVRhaWxSZXNwb25zZSkgPT4ge1xuICAgICAgICBhcHBlbmRSZXNwb25zZVRvQnVmZmVyZWREYXRhKHJlc3BvbnNlLCBkYXRhKTtcbiAgICAgICAgcmV0dXJuIFtkYXRhXTtcbiAgICAgIH0pLFxuICAgICAgcmV0cnlXaGVuKChhdHRlbXB0czogT2JzZXJ2YWJsZTxhbnk+KSA9PlxuICAgICAgICBhdHRlbXB0cy5waXBlKFxuICAgICAgICAgIG1lcmdlTWFwKChlcnJvciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmV0cnlBdHRlbXB0ID0gaSArIDE7XG4gICAgICAgICAgICAvLyBDb2RlIDEwMDYgaXMgdXNlZCB0byBpbmRpY2F0ZSB0aGF0IGEgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGFibm9ybWFsbHkuXG4gICAgICAgICAgICAvLyBBZGRlZCBoYXJkIGxpbWl0IG9mIDMwIG9uIG51bWJlciBvZiByZXRyaWVzLlxuICAgICAgICAgICAgLy8gSWYgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGFibm9ybWFsbHksIGFuZCB3ZSB3aXNoIHRvIHJldHJ5LCBvdGhlcndpc2UgdGhyb3cgZXJyb3IuXG4gICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gMTAwNiAmJiByZXRyeUF0dGVtcHQgPCAzMCkge1xuICAgICAgICAgICAgICBpZiAocmV0cnlBdHRlbXB0ID4gMTApIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBtb3JlIHRoYW4gMTAgdGltZXMgcmV0cmllZCwgY29uc29sLndhcm4sIGJ1dCBrZWVwIHJlY29ubmVjdGluZ1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgIGBXZWJzb2NrZXQgY29ubmVjdGlvbiBpcyBiZWluZyBkaXNydXB0ZWQuIFdlIGtlZXAgcmVjb25uZWN0aW5nIGJ1dCBjb25zaWRlciBzdGFydGluZyBuZXcgbGl2ZSB0YWlsaW5nIGFnYWluLiBFcnJvcjogJHtlcnJvci5yZWFzb259YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gUmV0cnkgZXZlcnkgNXNcbiAgICAgICAgICAgICAgcmV0dXJuIHRpbWVyKHJldHJ5SW50ZXJ2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICksXG4gICAgICBmaW5hbGl6ZSgoKSA9PiB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0cmVhbXNbdGFyZ2V0LnVybF07XG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5zdHJlYW1zW3RhcmdldC51cmxdID0gc3RyZWFtO1xuXG4gICAgcmV0dXJuIHN0cmVhbTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/LiveStreams.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/LogContextProvider.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LOKI_LOG_CONTEXT_PRESERVED_LABELS: () => (/* binding */ LOKI_LOG_CONTEXT_PRESERVED_LABELS),\n/* harmony export */   LogContextProvider: () => (/* binding */ LogContextProvider),\n/* harmony export */   SHOULD_INCLUDE_PIPELINE_OPERATIONS: () => (/* binding */ SHOULD_INCLUDE_PIPELINE_OPERATIONS)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/logs.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/app.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/FieldCache.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n/* harmony import */ var _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-lezer-logql-virtual-0b75aafe9e/0/cache/@grafana-lezer-logql-npm-0.1.11-91e9d74a76-6a624b9a8d.zip/node_modules/@grafana/lezer-logql/index.es.js\");\n/* harmony import */ var app_core_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/actions/index.ts\");\n/* harmony import */ var app_core_copy_appNotification__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/core/copy/appNotification.ts\");\n/* harmony import */ var app_core_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/core/store.ts\");\n/* harmony import */ var app_store_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/store/store.ts\");\n/* harmony import */ var _components_LokiContextUi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiContextUi.tsx\");\n/* harmony import */ var _datasource__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/loki/datasource.ts\");\n/* harmony import */ var _languageUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/loki/languageUtils.ts\");\n/* harmony import */ var _modifyQuery__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/loki/modifyQuery.ts\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _sortDataFrame__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/plugins/datasource/loki/sortDataFrame.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst LOKI_LOG_CONTEXT_PRESERVED_LABELS = \"lokiLogContextPreservedLabels\";\nconst SHOULD_INCLUDE_PIPELINE_OPERATIONS = \"lokiLogContextShouldIncludePipelineOperations\";\nclass LogContextProvider {\n  constructor(datasource) {\n    this.getLogRowContextQuery = async (row, options, origQuery) => {\n      const { query } = await this.getQueryAndRange(row, options, origQuery);\n      return query;\n    };\n    this.getLogRowContext = async (row, options, origQuery) => {\n      const direction = options && options.direction || _grafana_data__WEBPACK_IMPORTED_MODULE_13__.LogRowContextQueryDirection.Backward;\n      const { query, range } = await this.getQueryAndRange(row, options, origQuery);\n      const processResults = (result) => {\n        const frames = result.data;\n        const processedFrames = frames.map((frame) => (0,_sortDataFrame__WEBPACK_IMPORTED_MODULE_11__.sortDataFrameByTime)(frame, _sortDataFrame__WEBPACK_IMPORTED_MODULE_11__.SortDirection.Descending));\n        return {\n          ...result,\n          data: processedFrames\n        };\n      };\n      const app = _grafana_data__WEBPACK_IMPORTED_MODULE_14__.CoreApp.Explore;\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.lastValueFrom)(\n        this.datasource.query((0,_datasource__WEBPACK_IMPORTED_MODULE_7__.makeRequest)(query, range, app, `${_datasource__WEBPACK_IMPORTED_MODULE_7__.REF_ID_STARTER_LOG_ROW_CONTEXT}${direction}`)).pipe(\n          (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.catchError)((err) => {\n            const error = {\n              message: \"Error during context query. Please check JS console logs.\",\n              status: err.status,\n              statusText: err.statusText\n            };\n            throw error;\n          }),\n          (0,rxjs__WEBPACK_IMPORTED_MODULE_17__.switchMap)((res) => (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)(processResults(res)))\n        )\n      );\n    };\n    this.processContextFiltersToExpr = (contextFilters, query) => {\n      const labelFilters = contextFilters.map((filter) => {\n        if (!filter.fromParser && filter.enabled) {\n          return `${filter.label}=\"${(0,_languageUtils__WEBPACK_IMPORTED_MODULE_8__.escapeLabelValueInExactSelector)(filter.value)}\"`;\n        }\n        return \"\";\n      }).filter((label) => !!label).join(\",\");\n      let expr = `{${labelFilters}}`;\n      if (query && (0,_queryUtils__WEBPACK_IMPORTED_MODULE_10__.isQueryWithParser)(query.expr).parserCount === 1) {\n        const parser = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_10__.getParserFromQuery)(query.expr);\n        if (parser) {\n          expr = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_9__.addParserToQuery)(expr, parser);\n          const parsedLabels = contextFilters.filter((filter) => filter.fromParser && filter.enabled);\n          for (const parsedLabel of parsedLabels) {\n            if (parsedLabel.enabled) {\n              expr = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_9__.addLabelToQuery)(expr, parsedLabel.label, \"=\", parsedLabel.value);\n            }\n          }\n        }\n      }\n      return expr;\n    };\n    this.processPipelineStagesToExpr = (currentExpr, query) => {\n      let newExpr = currentExpr;\n      const origExpr = query?.expr ?? \"\";\n      if ((0,_queryUtils__WEBPACK_IMPORTED_MODULE_10__.isQueryWithParser)(origExpr).parserCount > 1) {\n        return newExpr;\n      }\n      const allNodePositions = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_10__.getNodePositionsFromQuery)(origExpr, [\n        _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineStage,\n        _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelParser,\n        _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LineFilters,\n        _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFilter\n      ]);\n      const pipelineStagePositions = allNodePositions.filter((position) => position.type?.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineStage);\n      const otherNodePositions = allNodePositions.filter((position) => position.type?.id !== _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineStage);\n      for (const pipelineStagePosition of pipelineStagePositions) {\n        if (otherNodePositions.some((position) => pipelineStagePosition.contains(position))) {\n          continue;\n        }\n        newExpr += ` ${pipelineStagePosition.getExpression(origExpr)}`;\n      }\n      return newExpr;\n    };\n    this.queryContainsValidPipelineStages = (query) => {\n      const origExpr = query?.expr ?? \"\";\n      const allNodePositions = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_10__.getNodePositionsFromQuery)(origExpr, [\n        _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineStage,\n        _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelParser,\n        _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LineFilters,\n        _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFilter\n      ]);\n      const pipelineStagePositions = allNodePositions.filter((position) => position.type?.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineStage);\n      const otherNodePositions = allNodePositions.filter((position) => position.type?.id !== _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineStage);\n      return pipelineStagePositions.some(\n        (pipelineStagePosition) => otherNodePositions.every((position) => pipelineStagePosition.contains(position) === false)\n      );\n    };\n    this.getInitContextFilters = async (labels, query) => {\n      if (!query || (0,lodash__WEBPACK_IMPORTED_MODULE_0__.isEmpty)(labels)) {\n        return [];\n      }\n      let allLabels = [];\n      if (!(0,_queryUtils__WEBPACK_IMPORTED_MODULE_10__.isQueryWithParser)(query.expr).queryWithParser) {\n        await this.datasource.languageProvider.start();\n        allLabels = this.datasource.languageProvider.getLabelKeys();\n      } else {\n        const stream = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_10__.getStreamSelectorsFromQuery)(query.expr);\n        const series = await this.datasource.languageProvider.fetchSeriesLabels(stream[0]);\n        allLabels = Object.keys(series);\n      }\n      const contextFilters = [];\n      Object.entries(labels).forEach(([label, value]) => {\n        const filter = {\n          label,\n          value,\n          enabled: allLabels.includes(label),\n          fromParser: !allLabels.includes(label)\n        };\n        contextFilters.push(filter);\n      });\n      let preservedLabels = void 0;\n      try {\n        preservedLabels = JSON.parse(app_core_store__WEBPACK_IMPORTED_MODULE_4__[\"default\"].get(LOKI_LOG_CONTEXT_PRESERVED_LABELS));\n      } catch (e) {\n      }\n      if (!preservedLabels) {\n        return contextFilters;\n      } else {\n        let arePreservedLabelsUsed = false;\n        const newContextFilters = contextFilters.map((contextFilter) => {\n          if (preservedLabels.removedLabels.includes(contextFilter.label)) {\n            arePreservedLabelsUsed = true;\n            return { ...contextFilter, enabled: false };\n          }\n          if (preservedLabels.selectedExtractedLabels.includes(contextFilter.label)) {\n            arePreservedLabelsUsed = true;\n            return { ...contextFilter, enabled: true };\n          }\n          return { ...contextFilter };\n        });\n        const isAtLeastOneRealLabelEnabled = newContextFilters.some(({ enabled, fromParser }) => enabled && !fromParser);\n        if (!isAtLeastOneRealLabelEnabled) {\n          return contextFilters;\n        } else {\n          if (arePreservedLabelsUsed) {\n            (0,app_store_store__WEBPACK_IMPORTED_MODULE_5__.dispatch)((0,app_core_actions__WEBPACK_IMPORTED_MODULE_2__.notifyApp)((0,app_core_copy_appNotification__WEBPACK_IMPORTED_MODULE_3__.createSuccessNotification)(\"Previously used log context filters have been applied.\")));\n          }\n          return newContextFilters;\n        }\n      }\n    };\n    this.datasource = datasource;\n    this.appliedContextFilters = [];\n  }\n  async getQueryAndRange(row, options, origQuery) {\n    const direction = options && options.direction || _grafana_data__WEBPACK_IMPORTED_MODULE_13__.LogRowContextQueryDirection.Backward;\n    const limit = options && options.limit || this.datasource.maxLines;\n    if (this.appliedContextFilters.length === 0) {\n      const filters = (await this.getInitContextFilters(row.labels, origQuery)).filter((filter) => filter.enabled);\n      this.appliedContextFilters = filters;\n    }\n    return await this.prepareLogRowContextQueryTarget(row, limit, direction, origQuery);\n  }\n  async prepareLogRowContextQueryTarget(row, limit, direction, origQuery) {\n    const expr = this.prepareExpression(this.appliedContextFilters, origQuery);\n    const contextTimeBuffer = 2 * 60 * 60 * 1e3;\n    const queryDirection = direction === _grafana_data__WEBPACK_IMPORTED_MODULE_13__.LogRowContextQueryDirection.Forward ? _types__WEBPACK_IMPORTED_MODULE_12__.LokiQueryDirection.Forward : _types__WEBPACK_IMPORTED_MODULE_12__.LokiQueryDirection.Backward;\n    const query = {\n      expr,\n      queryType: _types__WEBPACK_IMPORTED_MODULE_12__.LokiQueryType.Range,\n      // refId has to be:\n      // - always different (temporarily, will be fixed later)\n      // - not increase in size\n      // because it may be called many times from logs-context\n      refId: `${_datasource__WEBPACK_IMPORTED_MODULE_7__.REF_ID_STARTER_LOG_ROW_CONTEXT}_${Math.random().toString()}`,\n      maxLines: limit,\n      direction: queryDirection,\n      datasource: { uid: this.datasource.uid, type: this.datasource.type }\n    };\n    const fieldCache = new _grafana_data__WEBPACK_IMPORTED_MODULE_19__.FieldCache(row.dataFrame);\n    const tsField = fieldCache.getFirstFieldOfType(_grafana_data__WEBPACK_IMPORTED_MODULE_20__.FieldType.time);\n    if (tsField === void 0) {\n      throw new Error(\"loki: data frame missing time-field, should never happen\");\n    }\n    const tsValue = tsField.values[row.rowIndex];\n    const timestamp = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_21__.toUtc)(tsValue);\n    const range = queryDirection === _types__WEBPACK_IMPORTED_MODULE_12__.LokiQueryDirection.Forward ? {\n      // start param in Loki API is inclusive so we'll have to filter out the row that this request is based from\n      // and any other that were logged in the same ns but before the row. Right now these rows will be lost\n      // because the are before but came it he response that should return only rows after.\n      from: timestamp,\n      // convert to ns, we lose some precision here but it is not that important at the far points of the context\n      to: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_21__.toUtc)(row.timeEpochMs + contextTimeBuffer)\n    } : {\n      // convert to ns, we lose some precision here but it is not that important at the far points of the context\n      from: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_21__.toUtc)(row.timeEpochMs - contextTimeBuffer),\n      to: timestamp\n    };\n    return {\n      query,\n      range: {\n        from: range.from,\n        to: range.to,\n        raw: range\n      }\n    };\n  }\n  getLogRowContextUi(row, runContextQuery, origQuery) {\n    const updateFilter = (contextFilters) => {\n      this.appliedContextFilters = contextFilters;\n      if (runContextQuery) {\n        runContextQuery();\n      }\n    };\n    this.onContextClose = this.onContextClose ?? (() => {\n      this.appliedContextFilters = [];\n    });\n    return (0,_components_LokiContextUi__WEBPACK_IMPORTED_MODULE_6__.LokiContextUi)({\n      row,\n      origQuery,\n      updateFilter,\n      onClose: this.onContextClose,\n      logContextProvider: this,\n      runContextQuery\n    });\n  }\n  prepareExpression(contextFilters, query) {\n    let preparedExpression = this.processContextFiltersToExpr(contextFilters, query);\n    if (app_core_store__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getBool(SHOULD_INCLUDE_PIPELINE_OPERATIONS, false)) {\n      preparedExpression = this.processPipelineStagesToExpr(preparedExpression, query);\n    }\n    return preparedExpression;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL0xvZ0NvbnRleHRQcm92aWRlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFDaUM7QUFjbEQ7QUFDOEQ7QUFFM0M7QUFDZ0I7QUFDeEI7QUFDTztBQUVLO0FBQzhDO0FBQzVCO0FBQ0U7QUFNM0M7QUFDNEM7QUFDeUI7QUFFckUsTUFBTSxvQ0FBb0M7QUFDMUMsTUFBTSxxQ0FBcUM7QUFPM0MsTUFBTSxtQkFBbUI7QUFBQSxFQUs5QixZQUFZLFlBQTRCO0FBa0J4QyxpQ0FBd0IsT0FDdEIsS0FDQSxTQUNBLGNBQ3VCO0FBQ3ZCLFlBQU0sRUFBRSxNQUFNLElBQUksTUFBTSxLQUFLLGlCQUFpQixLQUFLLFNBQVMsU0FBUztBQUVyRSxhQUFPO0FBQUEsSUFDVDtBQUVBLDRCQUFtQixPQUNqQixLQUNBLFNBQ0EsY0FDbUM7QUFDbkMsWUFBTSxZQUFhLFdBQVcsUUFBUSxhQUFjLHVFQUEyQixDQUFDO0FBQ2hGLFlBQU0sRUFBRSxPQUFPLE1BQU0sSUFBSSxNQUFNLEtBQUssaUJBQWlCLEtBQUssU0FBUyxTQUFTO0FBRTVFLFlBQU0saUJBQWlCLENBQUMsV0FBaUQ7QUFDdkUsY0FBTSxTQUFzQixPQUFPO0FBQ25DLGNBQU0sa0JBQWtCLE9BQU8sSUFBSSxDQUFDLFVBQVUsb0VBQW1CLENBQUMsT0FBTywwREFBYSxDQUFDLFVBQVUsQ0FBQztBQUVsRyxlQUFPO0FBQUEsVUFDTCxHQUFHO0FBQUEsVUFDSCxNQUFNO0FBQUEsUUFDUjtBQUFBLE1BQ0Y7QUFHQSxZQUFNLE1BQU0sbURBQU8sQ0FBQztBQUVwQixhQUFPLG9EQUFhO0FBQWIsUUFDTCxLQUFLLFdBQVcsTUFBTSx3REFBVyxDQUFDLE9BQU8sT0FBTyxLQUFLLEdBQUcsdUVBQThCLEdBQUcsV0FBVyxDQUFDLEVBQUU7QUFBQSxVQUNyRyxpREFBVSxDQUFDLENBQUMsUUFBUTtBQUNsQixrQkFBTSxR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QkFBZ0I7QUFBQSxNQUNsQjtBQUFBLElBQ0Y7QUFHQSxTQUFLLGlCQUNILEtBQUssbUJBQ0osTUFBTTtBQUNMLFdBQUssd0JBQXdCLENBQUM7QUFBQSxJQUNoQztBQUVGLFdBQU8sd0VBQWEsQ0FBQztBQUFBLE1BQ25CO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBLFNBQVMsS0FBSztBQUFBLE1BQ2Qsb0JBQW9CO0FBQUEsTUFDcEI7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFQSxrQkFBa0IsZ0JBQWlDLE9BQXNDO0FBQ3ZGLFFBQUkscUJBQXFCLEtBQUssNEJBQTRCLGdCQUFnQixLQUFLO0FBQy9FLFFBQUksc0RBQUssQ0FBQyxRQUFRLG9DQUFvQyxLQUFLLEdBQUc7QUFDNUQsMkJBQXFCLEtBQUssNEJBQTRCLG9CQUFvQixLQUFLO0FBQUEsSUFDakY7QUFDQSxXQUFPO0FBQUEsRUFDVDtBQXlKRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL0xvZ0NvbnRleHRQcm92aWRlci50cz9hYzg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgbGFzdFZhbHVlRnJvbSwgb2YsIHN3aXRjaE1hcCB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQge1xuICBDb3JlQXBwLFxuICBEYXRhRnJhbWUsXG4gIERhdGFRdWVyeUVycm9yLFxuICBEYXRhUXVlcnlSZXNwb25zZSxcbiAgRmllbGRDYWNoZSxcbiAgRmllbGRUeXBlLFxuICBMb2dSb3dNb2RlbCxcbiAgVGltZVJhbmdlLFxuICB0b1V0YyxcbiAgTG9nUm93Q29udGV4dFF1ZXJ5RGlyZWN0aW9uLFxuICBMb2dSb3dDb250ZXh0T3B0aW9ucyxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBMYWJlbFBhcnNlciwgTGFiZWxGaWx0ZXIsIExpbmVGaWx0ZXJzLCBQaXBlbGluZVN0YWdlIH0gZnJvbSAnQGdyYWZhbmEvbGV6ZXItbG9ncWwnO1xuaW1wb3J0IHsgTGFiZWxzIH0gZnJvbSAnQGdyYWZhbmEvc2NoZW1hJztcbmltcG9ydCB7IG5vdGlmeUFwcCB9IGZyb20gJ2FwcC9jb3JlL2FjdGlvbnMnO1xuaW1wb3J0IHsgY3JlYXRlU3VjY2Vzc05vdGlmaWNhdGlvbiB9IGZyb20gJ2FwcC9jb3JlL2NvcHkvYXBwTm90aWZpY2F0aW9uJztcbmltcG9ydCBzdG9yZSBmcm9tICdhcHAvY29yZS9zdG9yZSc7XG5pbXBvcnQgeyBkaXNwYXRjaCB9IGZyb20gJ2FwcC9zdG9yZS9zdG9yZSc7XG5cbmltcG9ydCB7IExva2lDb250ZXh0VWkgfSBmcm9tICcuL2NvbXBvbmVudHMvTG9raUNvbnRleHRVaSc7XG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSwgbWFrZVJlcXVlc3QsIFJFRl9JRF9TVEFSVEVSX0xPR19ST1dfQ09OVEVYVCB9IGZyb20gJy4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBlc2NhcGVMYWJlbFZhbHVlSW5FeGFjdFNlbGVjdG9yIH0gZnJvbSAnLi9sYW5ndWFnZVV0aWxzJztcbmltcG9ydCB7IGFkZExhYmVsVG9RdWVyeSwgYWRkUGFyc2VyVG9RdWVyeSB9IGZyb20gJy4vbW9kaWZ5UXVlcnknO1xuaW1wb3J0IHtcbiAgZ2V0Tm9kZVBvc2l0aW9uc0Zyb21RdWVyeSxcbiAgZ2V0UGFyc2VyRnJvbVF1ZXJ5LFxuICBnZXRTdHJlYW1TZWxlY3RvcnNGcm9tUXVlcnksXG4gIGlzUXVlcnlXaXRoUGFyc2VyLFxufSBmcm9tICcuL3F1ZXJ5VXRpbHMnO1xuaW1wb3J0IHsgc29ydERhdGFGcmFtZUJ5VGltZSwgU29ydERpcmVjdGlvbiB9IGZyb20gJy4vc29ydERhdGFGcmFtZSc7XG5pbXBvcnQgeyBDb250ZXh0RmlsdGVyLCBMb2tpUXVlcnksIExva2lRdWVyeURpcmVjdGlvbiwgTG9raVF1ZXJ5VHlwZSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgTE9LSV9MT0dfQ09OVEVYVF9QUkVTRVJWRURfTEFCRUxTID0gJ2xva2lMb2dDb250ZXh0UHJlc2VydmVkTGFiZWxzJztcbmV4cG9ydCBjb25zdCBTSE9VTERfSU5DTFVERV9QSVBFTElORV9PUEVSQVRJT05TID0gJ2xva2lMb2dDb250ZXh0U2hvdWxkSW5jbHVkZVBpcGVsaW5lT3BlcmF0aW9ucyc7XG5cbmV4cG9ydCB0eXBlIFByZXNlcnZlZExhYmVscyA9IHtcbiAgcmVtb3ZlZExhYmVsczogc3RyaW5nW107XG4gIHNlbGVjdGVkRXh0cmFjdGVkTGFiZWxzOiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBjbGFzcyBMb2dDb250ZXh0UHJvdmlkZXIge1xuICBkYXRhc291cmNlOiBMb2tpRGF0YXNvdXJjZTtcbiAgYXBwbGllZENvbnRleHRGaWx0ZXJzOiBDb250ZXh0RmlsdGVyW107XG4gIG9uQ29udGV4dENsb3NlOiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoZGF0YXNvdXJjZTogTG9raURhdGFzb3VyY2UpIHtcbiAgICB0aGlzLmRhdGFzb3VyY2UgPSBkYXRhc291cmNlO1xuICAgIHRoaXMuYXBwbGllZENvbnRleHRGaWx0ZXJzID0gW107XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFF1ZXJ5QW5kUmFuZ2Uocm93OiBMb2dSb3dNb2RlbCwgb3B0aW9ucz86IExvZ1Jvd0NvbnRleHRPcHRpb25zLCBvcmlnUXVlcnk/OiBMb2tpUXVlcnkpIHtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSAob3B0aW9ucyAmJiBvcHRpb25zLmRpcmVjdGlvbikgfHwgTG9nUm93Q29udGV4dFF1ZXJ5RGlyZWN0aW9uLkJhY2t3YXJkO1xuICAgIGNvbnN0IGxpbWl0ID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5saW1pdCkgfHwgdGhpcy5kYXRhc291cmNlLm1heExpbmVzO1xuICAgIC8vIFRoaXMgaGFwcGVucyBvbmx5IG9uIGluaXRpYWwgbG9hZCwgd2hlbiB1c2VyIGhhdmVuJ3QgYXBwbGllZCBhbnkgZmlsdGVycyB5ZXRcbiAgICAvLyBXZSBuZWVkIHRvIGdldCB0aGUgaW5pdGlhbCBmaWx0ZXJzIGZyb20gdGhlIHJvdyBsYWJlbHNcbiAgICBpZiAodGhpcy5hcHBsaWVkQ29udGV4dEZpbHRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0gKGF3YWl0IHRoaXMuZ2V0SW5pdENvbnRleHRGaWx0ZXJzKHJvdy5sYWJlbHMsIG9yaWdRdWVyeSkpLmZpbHRlcigoZmlsdGVyKSA9PiBmaWx0ZXIuZW5hYmxlZCk7XG4gICAgICB0aGlzLmFwcGxpZWRDb250ZXh0RmlsdGVycyA9IGZpbHRlcnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJlcGFyZUxvZ1Jvd0NvbnRleHRRdWVyeVRhcmdldChyb3csIGxpbWl0LCBkaXJlY3Rpb24sIG9yaWdRdWVyeSk7XG4gIH1cblxuICBnZXRMb2dSb3dDb250ZXh0UXVlcnkgPSBhc3luYyAoXG4gICAgcm93OiBMb2dSb3dNb2RlbCxcbiAgICBvcHRpb25zPzogTG9nUm93Q29udGV4dE9wdGlvbnMsXG4gICAgb3JpZ1F1ZXJ5PzogTG9raVF1ZXJ5XG4gICk6IFByb21pc2U8TG9raVF1ZXJ5PiA9PiB7XG4gICAgY29uc3QgeyBxdWVyeSB9ID0gYXdhaXQgdGhpcy5nZXRRdWVyeUFuZFJhbmdlKHJvdywgb3B0aW9ucywgb3JpZ1F1ZXJ5KTtcblxuICAgIHJldHVybiBxdWVyeTtcbiAgfTtcblxuICBnZXRMb2dSb3dDb250ZXh0ID0gYXN5bmMgKFxuICAgIHJvdzogTG9nUm93TW9kZWwsXG4gICAgb3B0aW9ucz86IExvZ1Jvd0NvbnRleHRPcHRpb25zLFxuICAgIG9yaWdRdWVyeT86IExva2lRdWVyeVxuICApOiBQcm9taXNlPHsgZGF0YTogRGF0YUZyYW1lW10gfT4gPT4ge1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IChvcHRpb25zICYmIG9wdGlvbnMuZGlyZWN0aW9uKSB8fCBMb2dSb3dDb250ZXh0UXVlcnlEaXJlY3Rpb24uQmFja3dhcmQ7XG4gICAgY29uc3QgeyBxdWVyeSwgcmFuZ2UgfSA9IGF3YWl0IHRoaXMuZ2V0UXVlcnlBbmRSYW5nZShyb3csIG9wdGlvbnMsIG9yaWdRdWVyeSk7XG5cbiAgICBjb25zdCBwcm9jZXNzUmVzdWx0cyA9IChyZXN1bHQ6IERhdGFRdWVyeVJlc3BvbnNlKTogRGF0YVF1ZXJ5UmVzcG9uc2UgPT4ge1xuICAgICAgY29uc3QgZnJhbWVzOiBEYXRhRnJhbWVbXSA9IHJlc3VsdC5kYXRhO1xuICAgICAgY29uc3QgcHJvY2Vzc2VkRnJhbWVzID0gZnJhbWVzLm1hcCgoZnJhbWUpID0+IHNvcnREYXRhRnJhbWVCeVRpbWUoZnJhbWUsIFNvcnREaXJlY3Rpb24uRGVzY2VuZGluZykpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgIGRhdGE6IHByb2Nlc3NlZEZyYW1lcyxcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIHRoaXMgY2FuIG9ubHkgYmUgY2FsbGVkIGZyb20gZXhwbG9yZSBjdXJyZW50bHlcbiAgICBjb25zdCBhcHAgPSBDb3JlQXBwLkV4cGxvcmU7XG5cbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShcbiAgICAgIHRoaXMuZGF0YXNvdXJjZS5xdWVyeShtYWtlUmVxdWVzdChxdWVyeSwgcmFuZ2UsIGFwcCwgYCR7UkVGX0lEX1NUQVJURVJfTE9HX1JPV19DT05URVhUfSR7ZGlyZWN0aW9ufWApKS5waXBlKFxuICAgICAgICBjYXRjaEVycm9yKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zdCBlcnJvcjogRGF0YVF1ZXJ5RXJyb3IgPSB7XG4gICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgZHVyaW5nIGNvbnRleHQgcXVlcnkuIFBsZWFzZSBjaGVjayBKUyBjb25zb2xlIGxvZ3MuJyxcbiAgICAgICAgICAgIHN0YXR1czogZXJyLnN0YXR1cyxcbiAgICAgICAgICAgIHN0YXR1c1RleHQ6IGVyci5zdGF0dXNUZXh0LFxuICAgICAgICAgIH07XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pLFxuICAgICAgICBzd2l0Y2hNYXAoKHJlcykgPT4gb2YocHJvY2Vzc1Jlc3VsdHMocmVzKSkpXG4gICAgICApXG4gICAgKTtcbiAgfTtcblxuICBhc3luYyBwcmVwYXJlTG9nUm93Q29udGV4dFF1ZXJ5VGFyZ2V0KFxuICAgIHJvdzogTG9nUm93TW9kZWwsXG4gICAgbGltaXQ6IG51bWJlcixcbiAgICBkaXJlY3Rpb246IExvZ1Jvd0NvbnRleHRRdWVyeURpcmVjdGlvbixcbiAgICBvcmlnUXVlcnk/OiBMb2tpUXVlcnlcbiAgKTogUHJvbWlzZTx7IHF1ZXJ5OiBMb2tpUXVlcnk7IHJhbmdlOiBUaW1lUmFuZ2UgfT4ge1xuICAgIGNvbnN0IGV4cHIgPSB0aGlzLnByZXBhcmVFeHByZXNzaW9uKHRoaXMuYXBwbGllZENvbnRleHRGaWx0ZXJzLCBvcmlnUXVlcnkpO1xuXG4gICAgY29uc3QgY29udGV4dFRpbWVCdWZmZXIgPSAyICogNjAgKiA2MCAqIDEwMDA7IC8vIDJoIGJ1ZmZlclxuXG4gICAgY29uc3QgcXVlcnlEaXJlY3Rpb24gPVxuICAgICAgZGlyZWN0aW9uID09PSBMb2dSb3dDb250ZXh0UXVlcnlEaXJlY3Rpb24uRm9yd2FyZCA/IExva2lRdWVyeURpcmVjdGlvbi5Gb3J3YXJkIDogTG9raVF1ZXJ5RGlyZWN0aW9uLkJhY2t3YXJkO1xuXG4gICAgY29uc3QgcXVlcnk6IExva2lRdWVyeSA9IHtcbiAgICAgIGV4cHIsXG4gICAgICBxdWVyeVR5cGU6IExva2lRdWVyeVR5cGUuUmFuZ2UsXG4gICAgICAvLyByZWZJZCBoYXMgdG8gYmU6XG4gICAgICAvLyAtIGFsd2F5cyBkaWZmZXJlbnQgKHRlbXBvcmFyaWx5LCB3aWxsIGJlIGZpeGVkIGxhdGVyKVxuICAgICAgLy8gLSBub3QgaW5jcmVhc2UgaW4gc2l6ZVxuICAgICAgLy8gYmVjYXVzZSBpdCBtYXkgYmUgY2FsbGVkIG1hbnkgdGltZXMgZnJvbSBsb2dzLWNvbnRleHRcbiAgICAgIHJlZklkOiBgJHtSRUZfSURfU1RBUlRFUl9MT0dfUk9XX0NPTlRFWFR9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygpfWAsXG4gICAgICBtYXhMaW5lczogbGltaXQsXG4gICAgICBkaXJlY3Rpb246IHF1ZXJ5RGlyZWN0aW9uLFxuICAgICAgZGF0YXNvdXJjZTogeyB1aWQ6IHRoaXMuZGF0YXNvdXJjZS51aWQsIHR5cGU6IHRoaXMuZGF0YXNvdXJjZS50eXBlIH0sXG4gICAgfTtcblxuICAgIGNvbnN0IGZpZWxkQ2FjaGUgPSBuZXcgRmllbGRDYWNoZShyb3cuZGF0YUZyYW1lKTtcbiAgICBjb25zdCB0c0ZpZWxkID0gZmllbGRDYWNoZS5nZXRGaXJzdEZpZWxkT2ZUeXBlKEZpZWxkVHlwZS50aW1lKTtcbiAgICBpZiAodHNGaWVsZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2xva2k6IGRhdGEgZnJhbWUgbWlzc2luZyB0aW1lLWZpZWxkLCBzaG91bGQgbmV2ZXIgaGFwcGVuJyk7XG4gICAgfVxuICAgIGNvbnN0IHRzVmFsdWUgPSB0c0ZpZWxkLnZhbHVlc1tyb3cucm93SW5kZXhdO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRvVXRjKHRzVmFsdWUpO1xuXG4gICAgY29uc3QgcmFuZ2UgPVxuICAgICAgcXVlcnlEaXJlY3Rpb24gPT09IExva2lRdWVyeURpcmVjdGlvbi5Gb3J3YXJkXG4gICAgICAgID8ge1xuICAgICAgICAgICAgLy8gc3RhcnQgcGFyYW0gaW4gTG9raSBBUEkgaXMgaW5jbHVzaXZlIHNvIHdlJ2xsIGhhdmUgdG8gZmlsdGVyIG91dCB0aGUgcm93IHRoYXQgdGhpcyByZXF1ZXN0IGlzIGJhc2VkIGZyb21cbiAgICAgICAgICAgIC8vIGFuZCBhbnkgb3RoZXIgdGhhdCB3ZXJlIGxvZ2dlZCBpbiB0aGUgc2FtZSBucyBidXQgYmVmb3JlIHRoZSByb3cuIFJpZ2h0IG5vdyB0aGVzZSByb3dzIHdpbGwgYmUgbG9zdFxuICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgYXJlIGJlZm9yZSBidXQgY2FtZSBpdCBoZSByZXNwb25zZSB0aGF0IHNob3VsZCByZXR1cm4gb25seSByb3dzIGFmdGVyLlxuICAgICAgICAgICAgZnJvbTogdGltZXN0YW1wLFxuICAgICAgICAgICAgLy8gY29udmVydCB0byBucywgd2UgbG9zZSBzb21lIHByZWNpc2lvbiBoZXJlIGJ1dCBpdCBpcyBub3QgdGhhdCBpbXBvcnRhbnQgYXQgdGhlIGZhciBwb2ludHMgb2YgdGhlIGNvbnRleHRcbiAgICAgICAgICAgIHRvOiB0b1V0Yyhyb3cudGltZUVwb2NoTXMgKyBjb250ZXh0VGltZUJ1ZmZlciksXG4gICAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdG8gbnMsIHdlIGxvc2Ugc29tZSBwcmVjaXNpb24gaGVyZSBidXQgaXQgaXMgbm90IHRoYXQgaW1wb3J0YW50IGF0IHRoZSBmYXIgcG9pbnRzIG9mIHRoZSBjb250ZXh0XG4gICAgICAgICAgICBmcm9tOiB0b1V0Yyhyb3cudGltZUVwb2NoTXMgLSBjb250ZXh0VGltZUJ1ZmZlciksXG4gICAgICAgICAgICB0bzogdGltZXN0YW1wLFxuICAgICAgICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcXVlcnksXG4gICAgICByYW5nZToge1xuICAgICAgICBmcm9tOiByYW5nZS5mcm9tLFxuICAgICAgICB0bzogcmFuZ2UudG8sXG4gICAgICAgIHJhdzogcmFuZ2UsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBnZXRMb2dSb3dDb250ZXh0VWkocm93OiBMb2dSb3dNb2RlbCwgcnVuQ29udGV4dFF1ZXJ5PzogKCkgPT4gdm9pZCwgb3JpZ1F1ZXJ5PzogTG9raVF1ZXJ5KTogUmVhY3QuUmVhY3ROb2RlIHtcbiAgICBjb25zdCB1cGRhdGVGaWx0ZXIgPSAoY29udGV4dEZpbHRlcnM6IENvbnRleHRGaWx0ZXJbXSkgPT4ge1xuICAgICAgdGhpcy5hcHBsaWVkQ29udGV4dEZpbHRlcnMgPSBjb250ZXh0RmlsdGVycztcblxuICAgICAgaWYgKHJ1bkNvbnRleHRRdWVyeSkge1xuICAgICAgICBydW5Db250ZXh0UXVlcnkoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gd2UgbmVlZCB0byBjYWNoZSB0aGlzIGZ1bmN0aW9uIHNvIHRoYXQgaXQgZG9lc24ndCBnZXQgcmVjcmVhdGVkIG9uIGV2ZXJ5IHJlbmRlclxuICAgIHRoaXMub25Db250ZXh0Q2xvc2UgPVxuICAgICAgdGhpcy5vbkNvbnRleHRDbG9zZSA/P1xuICAgICAgKCgpID0+IHtcbiAgICAgICAgdGhpcy5hcHBsaWVkQ29udGV4dEZpbHRlcnMgPSBbXTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIExva2lDb250ZXh0VWkoe1xuICAgICAgcm93LFxuICAgICAgb3JpZ1F1ZXJ5LFxuICAgICAgdXBkYXRlRmlsdGVyLFxuICAgICAgb25DbG9zZTogdGhpcy5vbkNvbnRleHRDbG9zZSxcbiAgICAgIGxvZ0NvbnRleHRQcm92aWRlcjogdGhpcyxcbiAgICAgIHJ1bkNvbnRleHRRdWVyeSxcbiAgICB9KTtcbiAgfVxuXG4gIHByZXBhcmVFeHByZXNzaW9uKGNvbnRleHRGaWx0ZXJzOiBDb250ZXh0RmlsdGVyW10sIHF1ZXJ5OiBMb2tpUXVlcnkgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICAgIGxldCBwcmVwYXJlZEV4cHJlc3Npb24gPSB0aGlzLnByb2Nlc3NDb250ZXh0RmlsdGVyc1RvRXhwcihjb250ZXh0RmlsdGVycywgcXVlcnkpO1xuICAgIGlmIChzdG9yZS5nZXRCb29sKFNIT1VMRF9JTkNMVURFX1BJUEVMSU5FX09QRVJBVElPTlMsIGZhbHNlKSkge1xuICAgICAgcHJlcGFyZWRFeHByZXNzaW9uID0gdGhpcy5wcm9jZXNzUGlwZWxpbmVTdGFnZXNUb0V4cHIocHJlcGFyZWRFeHByZXNzaW9uLCBxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBwcmVwYXJlZEV4cHJlc3Npb247XG4gIH1cblxuICBwcm9jZXNzQ29udGV4dEZpbHRlcnNUb0V4cHIgPSAoY29udGV4dEZpbHRlcnM6IENvbnRleHRGaWx0ZXJbXSwgcXVlcnk6IExva2lRdWVyeSB8IHVuZGVmaW5lZCk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgbGFiZWxGaWx0ZXJzID0gY29udGV4dEZpbHRlcnNcbiAgICAgIC5tYXAoKGZpbHRlcikgPT4ge1xuICAgICAgICBpZiAoIWZpbHRlci5mcm9tUGFyc2VyICYmIGZpbHRlci5lbmFibGVkKSB7XG4gICAgICAgICAgLy8gZXNjYXBlIGJhY2tzbGFzaGVzIGluIGxhYmVsIGFzIHVzZXJzIGNhbid0IGVzY2FwZSB0aGVtIGJ5IHRoZW1zZWx2ZXNcbiAgICAgICAgICByZXR1cm4gYCR7ZmlsdGVyLmxhYmVsfT1cIiR7ZXNjYXBlTGFiZWxWYWx1ZUluRXhhY3RTZWxlY3RvcihmaWx0ZXIudmFsdWUpfVwiYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9KVxuICAgICAgLy8gRmlsdGVyIGVtcHR5IHN0cmluZ3NcbiAgICAgIC5maWx0ZXIoKGxhYmVsKSA9PiAhIWxhYmVsKVxuICAgICAgLmpvaW4oJywnKTtcblxuICAgIGxldCBleHByID0gYHske2xhYmVsRmlsdGVyc319YDtcblxuICAgIC8vIFdlIG5lZWQgdG8gaGF2ZSBvcmlnaW5hbCBxdWVyeSB0byBnZXQgcGFyc2VyIGFuZCBpbmNsdWRlIHBhcnNlZCBsYWJlbHNcbiAgICAvLyBXZSBvbmx5IGFkZCBwYXJzZXIgYW5kIHBhcnNlZCBsYWJlbHMgaWYgdGhlcmUgaXMgb25seSBvbmUgcGFyc2VyIGluIHF1ZXJ5XG4gICAgaWYgKHF1ZXJ5ICYmIGlzUXVlcnlXaXRoUGFyc2VyKHF1ZXJ5LmV4cHIpLnBhcnNlckNvdW50ID09PSAxKSB7XG4gICAgICBjb25zdCBwYXJzZXIgPSBnZXRQYXJzZXJGcm9tUXVlcnkocXVlcnkuZXhwcik7XG4gICAgICBpZiAocGFyc2VyKSB7XG4gICAgICAgIGV4cHIgPSBhZGRQYXJzZXJUb1F1ZXJ5KGV4cHIsIHBhcnNlcik7XG4gICAgICAgIGNvbnN0IHBhcnNlZExhYmVscyA9IGNvbnRleHRGaWx0ZXJzLmZpbHRlcigoZmlsdGVyKSA9PiBmaWx0ZXIuZnJvbVBhcnNlciAmJiBmaWx0ZXIuZW5hYmxlZCk7XG4gICAgICAgIGZvciAoY29uc3QgcGFyc2VkTGFiZWwgb2YgcGFyc2VkTGFiZWxzKSB7XG4gICAgICAgICAgaWYgKHBhcnNlZExhYmVsLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIGV4cHIgPSBhZGRMYWJlbFRvUXVlcnkoZXhwciwgcGFyc2VkTGFiZWwubGFiZWwsICc9JywgcGFyc2VkTGFiZWwudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBleHByO1xuICB9O1xuXG4gIHByb2Nlc3NQaXBlbGluZVN0YWdlc1RvRXhwciA9IChjdXJyZW50RXhwcjogc3RyaW5nLCBxdWVyeTogTG9raVF1ZXJ5IHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgICBsZXQgbmV3RXhwciA9IGN1cnJlbnRFeHByO1xuICAgIGNvbnN0IG9yaWdFeHByID0gcXVlcnk/LmV4cHIgPz8gJyc7XG5cbiAgICBpZiAoaXNRdWVyeVdpdGhQYXJzZXIob3JpZ0V4cHIpLnBhcnNlckNvdW50ID4gMSkge1xuICAgICAgcmV0dXJuIG5ld0V4cHI7XG4gICAgfVxuXG4gICAgY29uc3QgYWxsTm9kZVBvc2l0aW9ucyA9IGdldE5vZGVQb3NpdGlvbnNGcm9tUXVlcnkob3JpZ0V4cHIsIFtcbiAgICAgIFBpcGVsaW5lU3RhZ2UsXG4gICAgICBMYWJlbFBhcnNlcixcbiAgICAgIExpbmVGaWx0ZXJzLFxuICAgICAgTGFiZWxGaWx0ZXIsXG4gICAgXSk7XG4gICAgY29uc3QgcGlwZWxpbmVTdGFnZVBvc2l0aW9ucyA9IGFsbE5vZGVQb3NpdGlvbnMuZmlsdGVyKChwb3NpdGlvbikgPT4gcG9zaXRpb24udHlwZT8uaWQgPT09IFBpcGVsaW5lU3RhZ2UpO1xuICAgIGNvbnN0IG90aGVyTm9kZVBvc2l0aW9ucyA9IGFsbE5vZGVQb3NpdGlvbnMuZmlsdGVyKChwb3NpdGlvbikgPT4gcG9zaXRpb24udHlwZT8uaWQgIT09IFBpcGVsaW5lU3RhZ2UpO1xuXG4gICAgZm9yIChjb25zdCBwaXBlbGluZVN0YWdlUG9zaXRpb24gb2YgcGlwZWxpbmVTdGFnZVBvc2l0aW9ucykge1xuICAgICAgLy8gd2UgZG9uJ3QgcHJvY2VzcyBwaXBlbGluZSBzdGFnZXMgdGhhdCBjb250YWluIGxhYmVsIHBhcnNlcnMsIGxpbmUgZmlsdGVycyBvciBsYWJlbCBmaWx0ZXJzXG4gICAgICBpZiAob3RoZXJOb2RlUG9zaXRpb25zLnNvbWUoKHBvc2l0aW9uKSA9PiBwaXBlbGluZVN0YWdlUG9zaXRpb24uY29udGFpbnMocG9zaXRpb24pKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbmV3RXhwciArPSBgICR7cGlwZWxpbmVTdGFnZVBvc2l0aW9uLmdldEV4cHJlc3Npb24ob3JpZ0V4cHIpfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0V4cHI7XG4gIH07XG5cbiAgcXVlcnlDb250YWluc1ZhbGlkUGlwZWxpbmVTdGFnZXMgPSAocXVlcnk6IExva2lRdWVyeSB8IHVuZGVmaW5lZCk6IGJvb2xlYW4gPT4ge1xuICAgIGNvbnN0IG9yaWdFeHByID0gcXVlcnk/LmV4cHIgPz8gJyc7XG4gICAgY29uc3QgYWxsTm9kZVBvc2l0aW9ucyA9IGdldE5vZGVQb3NpdGlvbnNGcm9tUXVlcnkob3JpZ0V4cHIsIFtcbiAgICAgIFBpcGVsaW5lU3RhZ2UsXG4gICAgICBMYWJlbFBhcnNlcixcbiAgICAgIExpbmVGaWx0ZXJzLFxuICAgICAgTGFiZWxGaWx0ZXIsXG4gICAgXSk7XG4gICAgY29uc3QgcGlwZWxpbmVTdGFnZVBvc2l0aW9ucyA9IGFsbE5vZGVQb3NpdGlvbnMuZmlsdGVyKChwb3NpdGlvbikgPT4gcG9zaXRpb24udHlwZT8uaWQgPT09IFBpcGVsaW5lU3RhZ2UpO1xuICAgIGNvbnN0IG90aGVyTm9kZVBvc2l0aW9ucyA9IGFsbE5vZGVQb3NpdGlvbnMuZmlsdGVyKChwb3NpdGlvbikgPT4gcG9zaXRpb24udHlwZT8uaWQgIT09IFBpcGVsaW5lU3RhZ2UpO1xuXG4gICAgcmV0dXJuIHBpcGVsaW5lU3RhZ2VQb3NpdGlvbnMuc29tZSgocGlwZWxpbmVTdGFnZVBvc2l0aW9uKSA9PlxuICAgICAgb3RoZXJOb2RlUG9zaXRpb25zLmV2ZXJ5KChwb3NpdGlvbikgPT4gcGlwZWxpbmVTdGFnZVBvc2l0aW9uLmNvbnRhaW5zKHBvc2l0aW9uKSA9PT0gZmFsc2UpXG4gICAgKTtcbiAgfTtcblxuICBnZXRJbml0Q29udGV4dEZpbHRlcnMgPSBhc3luYyAobGFiZWxzOiBMYWJlbHMsIHF1ZXJ5PzogTG9raVF1ZXJ5KSA9PiB7XG4gICAgaWYgKCFxdWVyeSB8fCBpc0VtcHR5KGxhYmVscykpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvLyAxLiBGaXJzdCB3ZSBuZWVkIHRvIGdldCBhbGwgbGFiZWxzIGZyb20gdGhlIGxvZyByb3cncyBsYWJlbFxuICAgIC8vIGFuZCBjb3JyZWN0bHkgc2V0IHBhcnNlZCBhbmQgbm90IHBhcnNlZCBsYWJlbHNcbiAgICBsZXQgYWxsTGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmICghaXNRdWVyeVdpdGhQYXJzZXIocXVlcnkuZXhwcikucXVlcnlXaXRoUGFyc2VyKSB7XG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBwYXJzZXIsIHdlIHVzZSBnZXRMYWJlbEtleXMgYmVjYXVzZSBpdCBoYXMgYmV0dGVyIGNhY2hpbmdcbiAgICAgIC8vIGFuZCBhbGwgbGFiZWxzIHNob3VsZCBhbHJlYWR5IGJlIGZldGNoZWRcbiAgICAgIGF3YWl0IHRoaXMuZGF0YXNvdXJjZS5sYW5ndWFnZVByb3ZpZGVyLnN0YXJ0KCk7XG4gICAgICBhbGxMYWJlbHMgPSB0aGlzLmRhdGFzb3VyY2UubGFuZ3VhZ2VQcm92aWRlci5nZXRMYWJlbEtleXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgd2UgaGF2ZSBwYXJzZXIsIHdlIHVzZSBmZXRjaFNlcmllc0xhYmVscyB0byBmZXRjaCBhY3R1YWwgbGFiZWxzIGZvciBzZWxlY3RlZCBzdHJlYW1cbiAgICAgIGNvbnN0IHN0cmVhbSA9IGdldFN0cmVhbVNlbGVjdG9yc0Zyb21RdWVyeShxdWVyeS5leHByKTtcbiAgICAgIC8vIFdlIGFyZSB1c2luZyBzdHJlYW1bMF0gYXMgbG9nIHF1ZXJ5IGNhbiBhbHdheXMgaGF2ZSBqdXN0IDEgc3RyZWFtIHNlbGVjdG9yXG4gICAgICBjb25zdCBzZXJpZXMgPSBhd2FpdCB0aGlzLmRhdGFzb3VyY2UubGFuZ3VhZ2VQcm92aWRlci5mZXRjaFNlcmllc0xhYmVscyhzdHJlYW1bMF0pO1xuICAgICAgYWxsTGFiZWxzID0gT2JqZWN0LmtleXMoc2VyaWVzKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZXh0RmlsdGVyczogQ29udGV4dEZpbHRlcltdID0gW107XG4gICAgT2JqZWN0LmVudHJpZXMobGFiZWxzKS5mb3JFYWNoKChbbGFiZWwsIHZhbHVlXSkgPT4ge1xuICAgICAgY29uc3QgZmlsdGVyOiBDb250ZXh0RmlsdGVyID0ge1xuICAgICAgICBsYWJlbCxcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBlbmFibGVkOiBhbGxMYWJlbHMuaW5jbHVkZXMobGFiZWwpLFxuICAgICAgICBmcm9tUGFyc2VyOiAhYWxsTGFiZWxzLmluY2x1ZGVzKGxhYmVsKSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnRleHRGaWx0ZXJzLnB1c2goZmlsdGVyKTtcbiAgICB9KTtcblxuICAgIC8vIFNlY29uZGx5IHdlIGNoZWNrIGZvciBwcmVzZXJ2ZWQgbGFiZWxzIGFuZCB1cGRhdGUgZW5hYmxlZCBzdGF0ZSBvZiBmaWx0ZXJzIGJhc2VkIG9uIHRoYXRcbiAgICBsZXQgcHJlc2VydmVkTGFiZWxzOiB1bmRlZmluZWQgfCBQcmVzZXJ2ZWRMYWJlbHMgPSB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIHByZXNlcnZlZExhYmVscyA9IEpTT04ucGFyc2Uoc3RvcmUuZ2V0KExPS0lfTE9HX0NPTlRFWFRfUFJFU0VSVkVEX0xBQkVMUykpO1xuICAgICAgLy8gRG8gbm90aGluZyB3aGVuIGVycm9yIG9jY3Vyc1xuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICBpZiAoIXByZXNlcnZlZExhYmVscykge1xuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBwcmVzZXJ2ZWRMYWJlbHMsIHdlIHJldHVybiBjb250ZXh0RmlsdGVycyBhcyB0aGV5IGFyZVxuICAgICAgcmV0dXJuIGNvbnRleHRGaWx0ZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPdGhlcndpc2UsIHdlIG5lZWQgdG8gdXBkYXRlIGZpbHRlcnMgYmFzZWQgb24gcHJlc2VydmVkIGxhYmVsc1xuICAgICAgbGV0IGFyZVByZXNlcnZlZExhYmVsc1VzZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG5ld0NvbnRleHRGaWx0ZXJzID0gY29udGV4dEZpbHRlcnMubWFwKChjb250ZXh0RmlsdGVyKSA9PiB7XG4gICAgICAgIC8vIFdlIGNoZWNrZWQgZm9yIHVuZGVmaW5lZCBhYm92ZVxuICAgICAgICBpZiAocHJlc2VydmVkTGFiZWxzIS5yZW1vdmVkTGFiZWxzLmluY2x1ZGVzKGNvbnRleHRGaWx0ZXIubGFiZWwpKSB7XG4gICAgICAgICAgYXJlUHJlc2VydmVkTGFiZWxzVXNlZCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHsgLi4uY29udGV4dEZpbHRlciwgZW5hYmxlZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBjaGVja2VkIGZvciB1bmRlZmluZWQgYWJvdmVcbiAgICAgICAgaWYgKHByZXNlcnZlZExhYmVscyEuc2VsZWN0ZWRFeHRyYWN0ZWRMYWJlbHMuaW5jbHVkZXMoY29udGV4dEZpbHRlci5sYWJlbCkpIHtcbiAgICAgICAgICBhcmVQcmVzZXJ2ZWRMYWJlbHNVc2VkID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4geyAuLi5jb250ZXh0RmlsdGVyLCBlbmFibGVkOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4uY29udGV4dEZpbHRlciB9O1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGlzQXRMZWFzdE9uZVJlYWxMYWJlbEVuYWJsZWQgPSBuZXdDb250ZXh0RmlsdGVycy5zb21lKCh7IGVuYWJsZWQsIGZyb21QYXJzZXIgfSkgPT4gZW5hYmxlZCAmJiAhZnJvbVBhcnNlcik7XG4gICAgICBpZiAoIWlzQXRMZWFzdE9uZVJlYWxMYWJlbEVuYWJsZWQpIHtcbiAgICAgICAgLy8gSWYgd2UgZW5kIHVwIHdpdGggbm8gcmVhbCBsYWJlbHMgZW5hYmxlZCwgd2UgbmVlZCB0byByZXNldCB0aGUgaW5pdCBmaWx0ZXJzXG4gICAgICAgIHJldHVybiBjb250ZXh0RmlsdGVycztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSB1c2UgbmV3IGZpbHRlcnNcbiAgICAgICAgaWYgKGFyZVByZXNlcnZlZExhYmVsc1VzZWQpIHtcbiAgICAgICAgICBkaXNwYXRjaChub3RpZnlBcHAoY3JlYXRlU3VjY2Vzc05vdGlmaWNhdGlvbignUHJldmlvdXNseSB1c2VkIGxvZyBjb250ZXh0IGZpbHRlcnMgaGF2ZSBiZWVuIGFwcGxpZWQuJykpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3Q29udGV4dEZpbHRlcnM7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/LogContextProvider.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/backendResultTransformer.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transformBackendResult: () => (/* binding */ transformBackendResult)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts\");\n/* harmony import */ var _getDerivedFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/loki/getDerivedFields.ts\");\n/* harmony import */ var _makeTableFrames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/makeTableFrames.ts\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _responseUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/responseUtils.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\n\n\n\nfunction isMetricFrame(frame) {\n  return frame.fields.every((field) => field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_5__.FieldType.time || field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_5__.FieldType.number);\n}\nfunction setFrameMeta(frame, meta) {\n  const { meta: oldMeta, ...rest } = frame;\n  const newMeta = { ...oldMeta, ...meta };\n  return {\n    ...rest,\n    meta: newMeta\n  };\n}\nfunction processStreamFrame(frame, query, derivedFieldConfigs) {\n  const custom = {\n    ...frame.meta?.custom,\n    // keep the original meta.custom\n    // used by logsModel\n    lokiQueryStatKey: \"Summary: total bytes processed\"\n  };\n  if ((0,_responseUtils__WEBPACK_IMPORTED_MODULE_3__.dataFrameHasLokiError)(frame)) {\n    custom.error = \"Error when parsing some of the logs\";\n  }\n  const meta = {\n    preferredVisualisationType: \"logs\",\n    limit: query?.maxLines,\n    searchWords: query !== void 0 ? (0,_queryUtils__WEBPACK_IMPORTED_MODULE_2__.getHighlighterExpressionsFromQuery)((0,_queryUtils__WEBPACK_IMPORTED_MODULE_2__.formatQuery)(query.expr)) : void 0,\n    custom\n  };\n  const newFrame = setFrameMeta(frame, meta);\n  const derivedFields = (0,_getDerivedFields__WEBPACK_IMPORTED_MODULE_0__.getDerivedFields)(newFrame, derivedFieldConfigs);\n  return {\n    ...newFrame,\n    fields: [...newFrame.fields, ...derivedFields]\n  };\n}\nfunction processStreamsFrames(frames, queryMap, derivedFieldConfigs) {\n  return frames.map((frame) => {\n    const query = frame.refId !== void 0 ? queryMap.get(frame.refId) : void 0;\n    return processStreamFrame(frame, query, derivedFieldConfigs);\n  });\n}\nfunction processMetricInstantFrames(frames) {\n  return frames.length > 0 ? (0,_makeTableFrames__WEBPACK_IMPORTED_MODULE_1__.makeTableFrames)(frames) : [];\n}\nfunction processMetricRangeFrames(frames) {\n  const meta = { preferredVisualisationType: \"graph\" };\n  return frames.map((frame) => setFrameMeta(frame, meta));\n}\nfunction groupFrames(frames, queryMap) {\n  const streamsFrames = [];\n  const metricInstantFrames = [];\n  const metricRangeFrames = [];\n  frames.forEach((frame) => {\n    if (!isMetricFrame(frame)) {\n      streamsFrames.push(frame);\n    } else {\n      const isInstantFrame = frame.refId != null && queryMap.get(frame.refId)?.queryType === _types__WEBPACK_IMPORTED_MODULE_4__.LokiQueryType.Instant;\n      if (isInstantFrame) {\n        metricInstantFrames.push(frame);\n      } else {\n        metricRangeFrames.push(frame);\n      }\n    }\n  });\n  return { streamsFrames, metricInstantFrames, metricRangeFrames };\n}\nfunction improveError(error, queryMap) {\n  if (error === void 0) {\n    return error;\n  }\n  const { refId, message } = error;\n  if (refId === void 0 || message === void 0) {\n    return error;\n  }\n  const query = queryMap.get(refId);\n  if (query === void 0) {\n    return error;\n  }\n  if (message.includes(\"escape\") && query.expr.includes(\"\\\\\")) {\n    return {\n      ...error,\n      message: `${message}. Make sure that all special characters are escaped with \\\\. For more information on escaping of special characters visit LogQL documentation at https://grafana.com/docs/loki/latest/logql/.`\n    };\n  }\n  return error;\n}\nfunction transformBackendResult(response, queries, derivedFieldConfigs) {\n  const { data, error, ...rest } = response;\n  const dataFrames = data.map((d) => {\n    if (!(0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.isDataFrame)(d)) {\n      throw new Error(\"transformation only supports dataframe responses\");\n    }\n    return d;\n  });\n  const queryMap = new Map(queries.map((query) => [query.refId, query]));\n  const { streamsFrames, metricInstantFrames, metricRangeFrames } = groupFrames(dataFrames, queryMap);\n  return {\n    ...rest,\n    error: improveError(error, queryMap),\n    data: [\n      ...processMetricRangeFrames(metricRangeFrames),\n      ...processMetricInstantFrames(metricInstantFrames),\n      ...processStreamsFrames(streamsFrames, queryMap, derivedFieldConfigs)\n    ]\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2JhY2tlbmRSZXN1bHRUcmFuc2Zvcm1lci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBc0c7QUFFckU7QUFDRDtBQUNnQztBQUMxQjtBQUN1QjtBQUU3RCxTQUFTLGNBQWMsT0FBMkI7QUFDaEQsU0FBTyxNQUFNLE9BQU8sTUFBTSxDQUFDLFVBQVUsTUFBTSxTQUFTLG9EQUFTLENBQUMsUUFBUSxNQUFNLFNBQVMsb0RBQVMsQ0FBQyxNQUFNO0FBQ3ZHO0FBR0EsU0FBUyxhQUFhLE9BQWtCLE1BQWtDO0FBQ3hFLFFBQU0sRUFBRSxNQUFNLFNBQVMsR0FBRyxLQUFLLElBQUk7QUFFbkMsUUFBTSxVQUFVLEVBQUUsR0FBRyxTQUFTLEdBQUcsS0FBSztBQUN0QyxTQUFPO0FBQUEsSUFDTCxHQUFHO0FBQUEsSUFDSCxNQUFNO0FBQUEsRUFDUjtBQUNGO0FBRUEsU0FBUyxtQkFDUCxPQUNBLE9BQ0EscUJBQ1c7QUFDWCxRQUFNLFNBQWlDO0FBQUEsSUFDckMsR0FBRyxNQUFNLE1BQU07QUFBQTtBQUFBO0FBQUEsSUFFZixrQkFBa0I7QUFBQSxFQUNwQjtBQUVBLE1BQUkscUVBQXFCLENBQUMsS0FBSyxHQUFHO0FBQ2hDLFdBQU8sUUFBUTtBQUFBLEVBQ2pCO0FBRUEsUUFBTSxPQUF3QjtBQUFBLElBQzVCLDRCQUE0QjtBQUFBLElBQzVCLE9BQU8sT0FBTztBQUFBLElBQ2QsYUFBYSxVQUFVLFNBQVksK0VBQWtDLENBQUMsd0RBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJO0FBQUEsSUFDakc7QUFBQSxFQUNGO0FBRUEsUUFBTSxXQUFXLGFBQWEsT0FBTyxJQUFJO0FBQ3pDLFFBQU0sZ0JBQWdCLG1FQUFnQixDQUFDLFVBQVUsbUJBQW1CO0FBQ3BFLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNILFFBQVEsQ0FBQyxHQUFHLFNBQVMsUUFBUSxHQUFHLGFBQWE7QUFBQSxFQUMvQztBQUNGO0FBRUEsU0FBUyxxQkFDUCxRQUNBLFVBQ0EscUJBQ2E7QUFDYixTQUFPLE9BQU8sSUFBSSxDQUFDLFVBQVU7QUFDM0IsVUFBTSxRQUFRLE1BQU0sVUFBVSxTQUFZLFNBQVMsSUFBSSxNQUFNLEtBQUssSUFBSTtBQUN0RSxXQUFPLG1CQUFtQixPQUFPLE9BQU8sbUJBQW1CO0FBQUEsRUFDN0QsQ0FBQztBQUNIO0FBRUEsU0FBUywyQkFBMkIsUUFBa0M7QUFDcEUsU0FBTyxPQUFPLFNBQVMsSUFBSSxpRUFBZSxDQUFDLE1BQU0sSUFBSSxDQUFDO0FBQ3hEO0FBRUEsU0FBUyx5QkFBeUIsUUFBa0M7QUFDbEUsUUFBTSxPQUF3QixFQUFFLDRCQUE0QixRQUFRO0FBQ3BFLFNBQU8sT0FBTyxJQUFJLENBQUMsVUFBVSxhQUFhLE9BQU8sSUFBSSxDQUFDO0FBQ3hEO0FBSUEsU0FBUyxZQUNQLFFBQ0EsVUFLQTtBQUNBLFFBQU0sZ0JBQTZCLENBQUM7QUFDcEMsUUFBTSxzQkFBbUMsQ0FBQztBQUMxQyxRQUFNLG9CQUFpQyxDQUFDO0FBRXhDLFNBQU8sUUFBUSxDQUFDLFVBQVU7QUFDeEIsUUFBSSxDQUFDLGNBQWMsS0FBSyxHQUFHO0FBQ3pCLG9CQUFjLEtBQUssS0FBSztBQUFBLElBQzFCLE9BQU87QUFDTCxZQUFNLGlCQUFpQixNQUFNLFNBQVMsUUFBUSxTQUFTLElBQUksTUFBTSxLQUFLLEdBQUcsY0FBYyxpREFBYSxDQUFDO0FBQ3JHLFVBQUksZ0JBQWdCO0FBQ2xCLDRCQUFvQixLQUFLLEtBQUs7QUFBQSxNQUNoQyxPQUFPO0FBQ0wsMEJBQWtCLEtBQUssS0FBSztBQUFBLE1BQzlCO0FBQUEsSUFDRjtBQUFBLEVBQ0YsQ0FBQztBQUVELFNBQU8sRUFBRSxlQUFlLHFCQUFxQixrQkFBa0I7QUFDakU7QUFFQSxTQUFTLGFBQWEsT0FBbUMsVUFBOEQ7QUFHckgsTUFBSSxVQUFVLFFBQVc7QUFDdkIsV0FBTztBQUFBLEVBQ1Q7QUFFQSxRQUFNLEVBQUUsT0FBTyxRQUFRLElBQUk7QUFDM0IsTUFBSSxVQUFVLFVBQWEsWUFBWSxRQUFXO0FBQ2hELFdBQU87QUFBQSxFQUNUO0FBRUEsUUFBTSxRQUFRLFNBQVMsSUFBSSxLQUFLO0FBQ2hDLE1BQUksVUFBVSxRQUFXO0FBQ3ZCLFdBQU87QUFBQSxFQUNUO0FBRUEsTUFBSSxRQUFRLFNBQVMsUUFBUSxLQUFLLE1BQU0sS0FBSyxTQUFTLElBQUksR0FBRztBQUMzRCxXQUFPO0FBQUEsTUFDTCxHQUFHO0FBQUEsTUFDSCxTQUFTLEdBQUc7QUFBQSxJQUNkO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFDVDtBQUVPLFNBQVMsdUJBQ2QsVUFDQSxTQUNBLHFCQUNtQjtBQUNuQixRQUFNLEVBQUUsTUFBTSxPQUFPLEdBQUcsS0FBSyxJQUFJO0FBS2pDLFFBQU0sYUFBYSxLQUFLLElBQUksQ0FBQyxNQUFNO0FBQ2pDLFFBQUksQ0FBQywwREFBVyxDQUFDLENBQUMsR0FBRztBQUNuQixZQUFNLElBQUksTUFBTSxrREFBa0Q7QUFBQSxJQUNwRTtBQUNBLFdBQU87QUFBQSxFQUNULENBQUM7QUFFRCxRQUFNLFdBQVcsSUFBSSxJQUFJLFFBQVEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLE9BQU8sS0FBSyxDQUFDLENBQUM7QUFFckUsUUFBTSxFQUFFLGVBQWUscUJBQXFCLGtCQUFrQixJQUFJLFlBQVksWUFBWSxRQUFRO0FBRWxHLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNILE9BQU8sYUFBYSxPQUFPLFFBQVE7QUFBQSxJQUNuQyxNQUFNO0FBQUEsTUFDSixHQUFHLHlCQUF5QixpQkFBaUI7QUFBQSxNQUM3QyxHQUFHLDJCQUEyQixtQkFBbUI7QUFBQSxNQUNqRCxHQUFHLHFCQUFxQixlQUFlLFVBQVUsbUJBQW1CO0FBQUEsSUFDdEU7QUFBQSxFQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9iYWNrZW5kUmVzdWx0VHJhbnNmb3JtZXIudHM/MThmMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhUXVlcnlSZXNwb25zZSwgRGF0YUZyYW1lLCBpc0RhdGFGcmFtZSwgRmllbGRUeXBlLCBRdWVyeVJlc3VsdE1ldGEsIERhdGFRdWVyeUVycm9yIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmltcG9ydCB7IGdldERlcml2ZWRGaWVsZHMgfSBmcm9tICcuL2dldERlcml2ZWRGaWVsZHMnO1xuaW1wb3J0IHsgbWFrZVRhYmxlRnJhbWVzIH0gZnJvbSAnLi9tYWtlVGFibGVGcmFtZXMnO1xuaW1wb3J0IHsgZm9ybWF0UXVlcnksIGdldEhpZ2hsaWdodGVyRXhwcmVzc2lvbnNGcm9tUXVlcnkgfSBmcm9tICcuL3F1ZXJ5VXRpbHMnO1xuaW1wb3J0IHsgZGF0YUZyYW1lSGFzTG9raUVycm9yIH0gZnJvbSAnLi9yZXNwb25zZVV0aWxzJztcbmltcG9ydCB7IERlcml2ZWRGaWVsZENvbmZpZywgTG9raVF1ZXJ5LCBMb2tpUXVlcnlUeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmZ1bmN0aW9uIGlzTWV0cmljRnJhbWUoZnJhbWU6IERhdGFGcmFtZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gZnJhbWUuZmllbGRzLmV2ZXJ5KChmaWVsZCkgPT4gZmllbGQudHlwZSA9PT0gRmllbGRUeXBlLnRpbWUgfHwgZmllbGQudHlwZSA9PT0gRmllbGRUeXBlLm51bWJlcik7XG59XG5cbi8vIHJldHVybnMgYSBuZXcgZnJhbWUsIHdpdGggbWV0YSBzaGFsbG93IG1lcmdlZCB3aXRoIGl0cyBvcmlnaW5hbCBtZXRhXG5mdW5jdGlvbiBzZXRGcmFtZU1ldGEoZnJhbWU6IERhdGFGcmFtZSwgbWV0YTogUXVlcnlSZXN1bHRNZXRhKTogRGF0YUZyYW1lIHtcbiAgY29uc3QgeyBtZXRhOiBvbGRNZXRhLCAuLi5yZXN0IH0gPSBmcmFtZTtcbiAgLy8gbWV0YSBtYXliZSBiZSB1bmRlZmluZWQsIHdlIG5lZWQgdG8gaGFuZGxlIHRoYXRcbiAgY29uc3QgbmV3TWV0YSA9IHsgLi4ub2xkTWV0YSwgLi4ubWV0YSB9O1xuICByZXR1cm4ge1xuICAgIC4uLnJlc3QsXG4gICAgbWV0YTogbmV3TWV0YSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1N0cmVhbUZyYW1lKFxuICBmcmFtZTogRGF0YUZyYW1lLFxuICBxdWVyeTogTG9raVF1ZXJ5IHwgdW5kZWZpbmVkLFxuICBkZXJpdmVkRmllbGRDb25maWdzOiBEZXJpdmVkRmllbGRDb25maWdbXVxuKTogRGF0YUZyYW1lIHtcbiAgY29uc3QgY3VzdG9tOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIC4uLmZyYW1lLm1ldGE/LmN1c3RvbSwgLy8ga2VlcCB0aGUgb3JpZ2luYWwgbWV0YS5jdXN0b21cbiAgICAvLyB1c2VkIGJ5IGxvZ3NNb2RlbFxuICAgIGxva2lRdWVyeVN0YXRLZXk6ICdTdW1tYXJ5OiB0b3RhbCBieXRlcyBwcm9jZXNzZWQnLFxuICB9O1xuXG4gIGlmIChkYXRhRnJhbWVIYXNMb2tpRXJyb3IoZnJhbWUpKSB7XG4gICAgY3VzdG9tLmVycm9yID0gJ0Vycm9yIHdoZW4gcGFyc2luZyBzb21lIG9mIHRoZSBsb2dzJztcbiAgfVxuXG4gIGNvbnN0IG1ldGE6IFF1ZXJ5UmVzdWx0TWV0YSA9IHtcbiAgICBwcmVmZXJyZWRWaXN1YWxpc2F0aW9uVHlwZTogJ2xvZ3MnLFxuICAgIGxpbWl0OiBxdWVyeT8ubWF4TGluZXMsXG4gICAgc2VhcmNoV29yZHM6IHF1ZXJ5ICE9PSB1bmRlZmluZWQgPyBnZXRIaWdobGlnaHRlckV4cHJlc3Npb25zRnJvbVF1ZXJ5KGZvcm1hdFF1ZXJ5KHF1ZXJ5LmV4cHIpKSA6IHVuZGVmaW5lZCxcbiAgICBjdXN0b20sXG4gIH07XG5cbiAgY29uc3QgbmV3RnJhbWUgPSBzZXRGcmFtZU1ldGEoZnJhbWUsIG1ldGEpO1xuICBjb25zdCBkZXJpdmVkRmllbGRzID0gZ2V0RGVyaXZlZEZpZWxkcyhuZXdGcmFtZSwgZGVyaXZlZEZpZWxkQ29uZmlncyk7XG4gIHJldHVybiB7XG4gICAgLi4ubmV3RnJhbWUsXG4gICAgZmllbGRzOiBbLi4ubmV3RnJhbWUuZmllbGRzLCAuLi5kZXJpdmVkRmllbGRzXSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1N0cmVhbXNGcmFtZXMoXG4gIGZyYW1lczogRGF0YUZyYW1lW10sXG4gIHF1ZXJ5TWFwOiBNYXA8c3RyaW5nLCBMb2tpUXVlcnk+LFxuICBkZXJpdmVkRmllbGRDb25maWdzOiBEZXJpdmVkRmllbGRDb25maWdbXVxuKTogRGF0YUZyYW1lW10ge1xuICByZXR1cm4gZnJhbWVzLm1hcCgoZnJhbWUpID0+IHtcbiAgICBjb25zdCBxdWVyeSA9IGZyYW1lLnJlZklkICE9PSB1bmRlZmluZWQgPyBxdWVyeU1hcC5nZXQoZnJhbWUucmVmSWQpIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBwcm9jZXNzU3RyZWFtRnJhbWUoZnJhbWUsIHF1ZXJ5LCBkZXJpdmVkRmllbGRDb25maWdzKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NNZXRyaWNJbnN0YW50RnJhbWVzKGZyYW1lczogRGF0YUZyYW1lW10pOiBEYXRhRnJhbWVbXSB7XG4gIHJldHVybiBmcmFtZXMubGVuZ3RoID4gMCA/IG1ha2VUYWJsZUZyYW1lcyhmcmFtZXMpIDogW107XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NNZXRyaWNSYW5nZUZyYW1lcyhmcmFtZXM6IERhdGFGcmFtZVtdKTogRGF0YUZyYW1lW10ge1xuICBjb25zdCBtZXRhOiBRdWVyeVJlc3VsdE1ldGEgPSB7IHByZWZlcnJlZFZpc3VhbGlzYXRpb25UeXBlOiAnZ3JhcGgnIH07XG4gIHJldHVybiBmcmFtZXMubWFwKChmcmFtZSkgPT4gc2V0RnJhbWVNZXRhKGZyYW1lLCBtZXRhKSk7XG59XG5cbi8vIHdlIHNwbGl0IHRoZSBmcmFtZXMgaW50byAzIGdyb3VwcywgYmVjYXVzZSB3ZSB3aWxsIGhhbmRsZVxuLy8gZWFjaCBncm91cCBzbGlnaHRseSBkaWZmZXJlbnRseVxuZnVuY3Rpb24gZ3JvdXBGcmFtZXMoXG4gIGZyYW1lczogRGF0YUZyYW1lW10sXG4gIHF1ZXJ5TWFwOiBNYXA8c3RyaW5nLCBMb2tpUXVlcnk+XG4pOiB7XG4gIHN0cmVhbXNGcmFtZXM6IERhdGFGcmFtZVtdO1xuICBtZXRyaWNJbnN0YW50RnJhbWVzOiBEYXRhRnJhbWVbXTtcbiAgbWV0cmljUmFuZ2VGcmFtZXM6IERhdGFGcmFtZVtdO1xufSB7XG4gIGNvbnN0IHN0cmVhbXNGcmFtZXM6IERhdGFGcmFtZVtdID0gW107XG4gIGNvbnN0IG1ldHJpY0luc3RhbnRGcmFtZXM6IERhdGFGcmFtZVtdID0gW107XG4gIGNvbnN0IG1ldHJpY1JhbmdlRnJhbWVzOiBEYXRhRnJhbWVbXSA9IFtdO1xuXG4gIGZyYW1lcy5mb3JFYWNoKChmcmFtZSkgPT4ge1xuICAgIGlmICghaXNNZXRyaWNGcmFtZShmcmFtZSkpIHtcbiAgICAgIHN0cmVhbXNGcmFtZXMucHVzaChmcmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGlzSW5zdGFudEZyYW1lID0gZnJhbWUucmVmSWQgIT0gbnVsbCAmJiBxdWVyeU1hcC5nZXQoZnJhbWUucmVmSWQpPy5xdWVyeVR5cGUgPT09IExva2lRdWVyeVR5cGUuSW5zdGFudDtcbiAgICAgIGlmIChpc0luc3RhbnRGcmFtZSkge1xuICAgICAgICBtZXRyaWNJbnN0YW50RnJhbWVzLnB1c2goZnJhbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWV0cmljUmFuZ2VGcmFtZXMucHVzaChmcmFtZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4geyBzdHJlYW1zRnJhbWVzLCBtZXRyaWNJbnN0YW50RnJhbWVzLCBtZXRyaWNSYW5nZUZyYW1lcyB9O1xufVxuXG5mdW5jdGlvbiBpbXByb3ZlRXJyb3IoZXJyb3I6IERhdGFRdWVyeUVycm9yIHwgdW5kZWZpbmVkLCBxdWVyeU1hcDogTWFwPHN0cmluZywgTG9raVF1ZXJ5Pik6IERhdGFRdWVyeUVycm9yIHwgdW5kZWZpbmVkIHtcbiAgLy8gbWFueSB0aGluZ3MgYXJlIG9wdGlvbmFsIGluIGFuIGVycm9yLW9iamVjdCwgd2UgbmVlZCBhbiBlcnJvci1tZXNzYWdlIHRvIGV4aXN0LFxuICAvLyBhbmQgd2UgbmVlZCB0byBmaW5kIHRoZSBsb2tpLXF1ZXJ5LCBiYXNlZCBvbiB0aGUgcmVmSWQgaW4gdGhlIGVycm9yLW9iamVjdC5cbiAgaWYgKGVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICBjb25zdCB7IHJlZklkLCBtZXNzYWdlIH0gPSBlcnJvcjtcbiAgaWYgKHJlZklkID09PSB1bmRlZmluZWQgfHwgbWVzc2FnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgY29uc3QgcXVlcnkgPSBxdWVyeU1hcC5nZXQocmVmSWQpO1xuICBpZiAocXVlcnkgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdlc2NhcGUnKSAmJiBxdWVyeS5leHByLmluY2x1ZGVzKCdcXFxcJykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZXJyb3IsXG4gICAgICBtZXNzYWdlOiBgJHttZXNzYWdlfS4gTWFrZSBzdXJlIHRoYXQgYWxsIHNwZWNpYWwgY2hhcmFjdGVycyBhcmUgZXNjYXBlZCB3aXRoIFxcXFwuIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGVzY2FwaW5nIG9mIHNwZWNpYWwgY2hhcmFjdGVycyB2aXNpdCBMb2dRTCBkb2N1bWVudGF0aW9uIGF0IGh0dHBzOi8vZ3JhZmFuYS5jb20vZG9jcy9sb2tpL2xhdGVzdC9sb2dxbC8uYCxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtQmFja2VuZFJlc3VsdChcbiAgcmVzcG9uc2U6IERhdGFRdWVyeVJlc3BvbnNlLFxuICBxdWVyaWVzOiBMb2tpUXVlcnlbXSxcbiAgZGVyaXZlZEZpZWxkQ29uZmlnczogRGVyaXZlZEZpZWxkQ29uZmlnW11cbik6IERhdGFRdWVyeVJlc3BvbnNlIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciwgLi4ucmVzdCB9ID0gcmVzcG9uc2U7XG5cbiAgLy8gaW4gdGhlIHR5cGVzY3JpcHQgdHlwZSwgZGF0YSBpcyBhbiBhcnJheSBvZiBiYXNpY2FsbHkgYW55dGhpbmcuXG4gIC8vIHdlIGRvIGtub3cgdGhhdCB0aGV5IGhhdmUgdG8gYmUgZGF0YWZyYW1lcywgc28gd2UgbWFrZSBhIHF1aWNrIGNoZWNrLFxuICAvLyB0aGlzIHdheSB3ZSBjYW4gYmUgc3VyZSwgYW5kIGFsc28gdHlwZXNjcmlwdCBpcyBoYXBweS5cbiAgY29uc3QgZGF0YUZyYW1lcyA9IGRhdGEubWFwKChkKSA9PiB7XG4gICAgaWYgKCFpc0RhdGFGcmFtZShkKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0cmFuc2Zvcm1hdGlvbiBvbmx5IHN1cHBvcnRzIGRhdGFmcmFtZSByZXNwb25zZXMnKTtcbiAgICB9XG4gICAgcmV0dXJuIGQ7XG4gIH0pO1xuXG4gIGNvbnN0IHF1ZXJ5TWFwID0gbmV3IE1hcChxdWVyaWVzLm1hcCgocXVlcnkpID0+IFtxdWVyeS5yZWZJZCwgcXVlcnldKSk7XG5cbiAgY29uc3QgeyBzdHJlYW1zRnJhbWVzLCBtZXRyaWNJbnN0YW50RnJhbWVzLCBtZXRyaWNSYW5nZUZyYW1lcyB9ID0gZ3JvdXBGcmFtZXMoZGF0YUZyYW1lcywgcXVlcnlNYXApO1xuXG4gIHJldHVybiB7XG4gICAgLi4ucmVzdCxcbiAgICBlcnJvcjogaW1wcm92ZUVycm9yKGVycm9yLCBxdWVyeU1hcCksXG4gICAgZGF0YTogW1xuICAgICAgLi4ucHJvY2Vzc01ldHJpY1JhbmdlRnJhbWVzKG1ldHJpY1JhbmdlRnJhbWVzKSxcbiAgICAgIC4uLnByb2Nlc3NNZXRyaWNJbnN0YW50RnJhbWVzKG1ldHJpY0luc3RhbnRGcmFtZXMpLFxuICAgICAgLi4ucHJvY2Vzc1N0cmVhbXNGcmFtZXMoc3RyZWFtc0ZyYW1lcywgcXVlcnlNYXAsIGRlcml2ZWRGaWVsZENvbmZpZ3MpLFxuICAgIF0sXG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/backendResultTransformer.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/AnnotationsQueryEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiAnnotationsQueryEditor: () => (/* binding */ LokiAnnotationsQueryEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRow.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorField.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n/* harmony import */ var _LokiOptionFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiOptionFields.tsx\");\n/* harmony import */ var _LokiQueryField__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryField.tsx\");\n\n\n\n\n\n\n\n\nconst LokiAnnotationsQueryEditor = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(function LokiAnnotationQueryEditor(props) {\n  const { annotation, onAnnotationChange, history } = props;\n  if (annotation === void 0 || onAnnotationChange === void 0) {\n    return null;\n  }\n  const onChangeQuery = (query) => {\n    const instant = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_1__.getNormalizedLokiQuery)(query).queryType === _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryType.Instant;\n    onAnnotationChange({\n      ...annotation,\n      expr: query.expr,\n      maxLines: query.maxLines,\n      instant\n    });\n  };\n  const queryWithRefId = {\n    refId: \"\",\n    expr: annotation.expr,\n    maxLines: annotation.maxLines,\n    instant: annotation.instant,\n    queryType: annotation.queryType\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"gf-form-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _LokiQueryField__WEBPACK_IMPORTED_MODULE_4__.LokiQueryField,\n    {\n      datasource: props.datasource,\n      query: queryWithRefId,\n      onChange: onChangeQuery,\n      onRunQuery: () => {\n      },\n      history,\n      ExtraFieldElement: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n        _LokiOptionFields__WEBPACK_IMPORTED_MODULE_3__.LokiOptionFields,\n        {\n          lineLimitValue: queryWithRefId?.maxLines?.toString() || \"\",\n          resolution: queryWithRefId.resolution || 1,\n          query: queryWithRefId,\n          onRunQuery: () => {\n          },\n          onChange: onChangeQuery\n        }\n      )\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_5__.EditorRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__.EditorField,\n    {\n      label: \"Title\",\n      tooltip: \"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance.\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Input,\n      {\n        type: \"text\",\n        placeholder: \"alertname\",\n        value: annotation.titleFormat,\n        onChange: (event) => {\n          onAnnotationChange({\n            ...annotation,\n            titleFormat: event.currentTarget.value\n          });\n        }\n      }\n    )\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_6__.EditorField, { label: \"Tags\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Input,\n    {\n      type: \"text\",\n      placeholder: \"label1,label2\",\n      value: annotation.tagKeys,\n      onChange: (event) => {\n        onAnnotationChange({\n          ...annotation,\n          tagKeys: event.currentTarget.value\n        });\n      }\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__.EditorField,\n    {\n      label: \"Text\",\n      tooltip: \"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance.\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Input,\n      {\n        type: \"text\",\n        placeholder: \"instance\",\n        value: annotation.textFormat,\n        onChange: (event) => {\n          onAnnotationChange({\n            ...annotation,\n            textFormat: event.currentTarget.value\n          });\n        }\n      }\n    )\n  )));\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvQW5ub3RhdGlvbnNRdWVyeUVkaXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDNEI7QUFHVztBQUNqQjtBQUdpQjtBQUNFO0FBRVI7QUFDRjtBQVF4QixNQUFNLDZCQUE2QiwyQ0FBSSxDQUFDLFNBQVMsMEJBQTBCLE9BQWM7QUFDOUYsUUFBTSxFQUFFLFlBQVksb0JBQW9CLFFBQVEsSUFBSTtBQUdwRCxNQUFJLGVBQWUsVUFBYSx1QkFBdUIsUUFBVztBQUNoRSxXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sZ0JBQWdCLENBQUMsVUFBcUI7QUFNMUMsVUFBTSxVQUFVLG1FQUFzQixDQUFDLEtBQUssRUFBRSxjQUFjLGlEQUFhLENBQUM7QUFDMUUsdUJBQW1CO0FBQUEsTUFDakIsR0FBRztBQUFBLE1BQ0gsTUFBTSxNQUFNO0FBQUEsTUFDWixVQUFVLE1BQU07QUFBQSxNQUNoQjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFFQSxRQUFNLGlCQUE0QjtBQUFBLElBQ2hDLE9BQU87QUFBQSxJQUNQLE1BQU0sV0FBVztBQUFBLElBQ2pCLFVBQVUsV0FBVztBQUFBLElBQ3JCLFNBQVMsV0FBVztBQUFBLElBQ3BCLFdBQVcsV0FBVztBQUFBLEVBQ3hCO0FBQ0EsU0FDRSwwSUFDRSwyRUFBQyxTQUFJLFdBQVUsbUJBQ2I7QUFBQSxJQUFDLDJEQUFjO0FBQWQ7QUFBQSxNQUNDLFlBQVksTUFBTTtBQUFBLE1BQ2xCLE9BQU87QUFBQSxNQUNQLFVBQVU7QUFBQSxNQUNWLFlBQVksTUFBTTtBQUFBLE1BQUM7QUFBQSxNQUNuQjtBQUFBLE1BQ0EsbUJBQ0U7QUFBQSxRQUFDLCtEQUFnQjtBQUFoQjtBQUFBLFVBQ0MsZ0JBQWdCLGdCQUFnQixVQUFVLFNBQVMsS0FBSztBQUFBLFVBQ3hELFlBQVksZUFBZSxjQUFjO0FBQUEsVUFDekMsT0FBTztBQUFBLFVBQ1AsWUFBWSxNQUFNO0FBQUEsVUFBQztBQUFBLFVBQ25CLFVBQVU7QUFBQTtBQUFBLE1BQ1o7QUFBQTtBQUFBLEVBRUosQ0FDRixHQUVBLDJFQUFDLDREQUFTLFFBQ1I7QUFBQSxJQUFDLDhEQUFXO0FBQVg7QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNOLFNBQ0U7QUFBQTtBQUFBLElBR0Y7QUFBQSxNQUFDLDhDQUFLO0FBQUw7QUFBQSxRQUNDLE1BQUs7QUFBQSxRQUNMLGFBQVk7QUFBQSxRQUNaLE9BQU8sV0FBVztBQUFBLFFBQ2xCLFVBQVUsQ0FBQyxVQUFVO0FBQ25CLDZCQUFtQjtBQUFBLFlBQ2pCLEdBQUc7QUFBQSxZQUNILGFBQWEsTUFBTSxjQUFjO0FBQUEsVUFDbkMsQ0FBQztBQUFBLFFBQ0g7QUFBQTtBQUFBLElBQ0Y7QUFBQSxFQUNGLEdBQ0EsMkVBQUMsOERBQVcsSUFBQyxPQUFNLFVBQ2pCO0FBQUEsSUFBQyw4Q0FBSztBQUFMO0FBQUEsTUFDQyxNQUFLO0FBQUEsTUFDTCxhQUFZO0FBQUEsTUFDWixPQUFPLFdBQVc7QUFBQSxNQUNsQixVQUFVLENBQUMsVUFBVTtBQUNuQiwyQkFBbUI7QUFBQSxVQUNqQixHQUFHO0FBQUEsVUFDSCxTQUFTLE1BQU0sY0FBYztBQUFBLFFBQy9CLENBQUM7QUFBQSxNQUNIO0FBQUE7QUFBQSxFQUNGLENBQ0YsR0FDQTtBQUFBLElBQUMsOERBQVc7QUFBWDtBQUFBLE1BQ0MsT0FBTTtBQUFBLE1BQ04sU0FDRTtBQUFBO0FBQUEsSUFHRjtBQUFBLE1BQUMsOENBQUs7QUFBTDtBQUFBLFFBQ0MsTUFBSztBQUFBLFFBQ0wsYUFBWTtBQUFBLFFBQ1osT0FBTyxXQUFXO0FBQUEsUUFDbEIsVUFBVSxDQUFDLFVBQVU7QUFDbkIsNkJBQW1CO0FBQUEsWUFDakIsR0FBRztBQUFBLFlBQ0gsWUFBWSxNQUFNLGNBQWM7QUFBQSxVQUNsQyxDQUFDO0FBQUEsUUFDSDtBQUFBO0FBQUEsSUFDRjtBQUFBLEVBQ0YsQ0FDRixDQUNGO0FBRUosQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvQW5ub3RhdGlvbnNRdWVyeUVkaXRvci50c3g/YjJmMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaWJyYXJpZXNcbmltcG9ydCBSZWFjdCwgeyBtZW1vIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBBbm5vdGF0aW9uUXVlcnkgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEVkaXRvckZpZWxkLCBFZGl0b3JSb3cgfSBmcm9tICdAZ3JhZmFuYS9leHBlcmltZW50YWwnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbi8vIFR5cGVzXG5pbXBvcnQgeyBnZXROb3JtYWxpemVkTG9raVF1ZXJ5IH0gZnJvbSAnLi4vcXVlcnlVdGlscyc7XG5pbXBvcnQgeyBMb2tpUXVlcnksIExva2lRdWVyeVR5cGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7IExva2lPcHRpb25GaWVsZHMgfSBmcm9tICcuL0xva2lPcHRpb25GaWVsZHMnO1xuaW1wb3J0IHsgTG9raVF1ZXJ5RmllbGQgfSBmcm9tICcuL0xva2lRdWVyeUZpZWxkJztcbmltcG9ydCB7IExva2lRdWVyeUVkaXRvclByb3BzIH0gZnJvbSAnLi90eXBlcyc7XG5cbnR5cGUgUHJvcHMgPSBMb2tpUXVlcnlFZGl0b3JQcm9wcyAmIHtcbiAgYW5ub3RhdGlvbj86IEFubm90YXRpb25RdWVyeTxMb2tpUXVlcnk+O1xuICBvbkFubm90YXRpb25DaGFuZ2U/OiAoYW5ub3RhdGlvbjogQW5ub3RhdGlvblF1ZXJ5PExva2lRdWVyeT4pID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgY29uc3QgTG9raUFubm90YXRpb25zUXVlcnlFZGl0b3IgPSBtZW1vKGZ1bmN0aW9uIExva2lBbm5vdGF0aW9uUXVlcnlFZGl0b3IocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgYW5ub3RhdGlvbiwgb25Bbm5vdGF0aW9uQ2hhbmdlLCBoaXN0b3J5IH0gPSBwcm9wcztcblxuICAvLyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW4sIGJ1dCB3ZSB3YW50IHRvIGtlZXAgdHlwZXNjcmlwdCBoYXBweVxuICBpZiAoYW5ub3RhdGlvbiA9PT0gdW5kZWZpbmVkIHx8IG9uQW5ub3RhdGlvbkNoYW5nZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBvbkNoYW5nZVF1ZXJ5ID0gKHF1ZXJ5OiBMb2tpUXVlcnkpID0+IHtcbiAgICAvLyB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIGFubm90YXRpb25zIG9ubHkgc3RvcmVzIGFuIG9wdGlvbmFsIGJvb2xlYW5cbiAgICAvLyBmaWVsZCBgaW5zdGFudGAgdG8gaGFuZGxlIHRoZSBpbnN0YW50L3JhbmdlIHN3aXRjaC5cbiAgICAvLyB3ZSBuZWVkIHRvIG1haW50YWluIGNvbXBhdGliaWxpdHkgZm9yIG5vdywgc28gd2UgZG8gdGhlIHNhbWUuXG4gICAgLy8gd2UgZXhwbGljaXRseSBjYWxsIGBnZXROb3JtYWxpemVkTG9raVF1ZXJ5YCB0byBtYWtlIHN1cmUgYHF1ZXJ5VHlwZWBcbiAgICAvLyBpcyBzZXQgdXAgY29ycmVjdGx5LlxuICAgIGNvbnN0IGluc3RhbnQgPSBnZXROb3JtYWxpemVkTG9raVF1ZXJ5KHF1ZXJ5KS5xdWVyeVR5cGUgPT09IExva2lRdWVyeVR5cGUuSW5zdGFudDtcbiAgICBvbkFubm90YXRpb25DaGFuZ2Uoe1xuICAgICAgLi4uYW5ub3RhdGlvbixcbiAgICAgIGV4cHI6IHF1ZXJ5LmV4cHIsXG4gICAgICBtYXhMaW5lczogcXVlcnkubWF4TGluZXMsXG4gICAgICBpbnN0YW50LFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHF1ZXJ5V2l0aFJlZklkOiBMb2tpUXVlcnkgPSB7XG4gICAgcmVmSWQ6ICcnLFxuICAgIGV4cHI6IGFubm90YXRpb24uZXhwcixcbiAgICBtYXhMaW5lczogYW5ub3RhdGlvbi5tYXhMaW5lcyxcbiAgICBpbnN0YW50OiBhbm5vdGF0aW9uLmluc3RhbnQsXG4gICAgcXVlcnlUeXBlOiBhbm5vdGF0aW9uLnF1ZXJ5VHlwZSxcbiAgfTtcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZi1mb3JtLWdyb3VwXCI+XG4gICAgICAgIDxMb2tpUXVlcnlGaWVsZFxuICAgICAgICAgIGRhdGFzb3VyY2U9e3Byb3BzLmRhdGFzb3VyY2V9XG4gICAgICAgICAgcXVlcnk9e3F1ZXJ5V2l0aFJlZklkfVxuICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZVF1ZXJ5fVxuICAgICAgICAgIG9uUnVuUXVlcnk9eygpID0+IHt9fVxuICAgICAgICAgIGhpc3Rvcnk9e2hpc3Rvcnl9XG4gICAgICAgICAgRXh0cmFGaWVsZEVsZW1lbnQ9e1xuICAgICAgICAgICAgPExva2lPcHRpb25GaWVsZHNcbiAgICAgICAgICAgICAgbGluZUxpbWl0VmFsdWU9e3F1ZXJ5V2l0aFJlZklkPy5tYXhMaW5lcz8udG9TdHJpbmcoKSB8fCAnJ31cbiAgICAgICAgICAgICAgcmVzb2x1dGlvbj17cXVlcnlXaXRoUmVmSWQucmVzb2x1dGlvbiB8fCAxfVxuICAgICAgICAgICAgICBxdWVyeT17cXVlcnlXaXRoUmVmSWR9XG4gICAgICAgICAgICAgIG9uUnVuUXVlcnk9eygpID0+IHt9fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VRdWVyeX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxFZGl0b3JSb3c+XG4gICAgICAgIDxFZGl0b3JGaWVsZFxuICAgICAgICAgIGxhYmVsPVwiVGl0bGVcIlxuICAgICAgICAgIHRvb2x0aXA9e1xuICAgICAgICAgICAgJ1VzZSBlaXRoZXIgdGhlIG5hbWUgb3IgYSBwYXR0ZXJuLiBGb3IgZXhhbXBsZSwge3tpbnN0YW5jZX19IGlzIHJlcGxhY2VkIHdpdGggbGFiZWwgdmFsdWUgZm9yIHRoZSBsYWJlbCBpbnN0YW5jZS4nXG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cImFsZXJ0bmFtZVwiXG4gICAgICAgICAgICB2YWx1ZT17YW5ub3RhdGlvbi50aXRsZUZvcm1hdH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgb25Bbm5vdGF0aW9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAuLi5hbm5vdGF0aW9uLFxuICAgICAgICAgICAgICAgIHRpdGxlRm9ybWF0OiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9FZGl0b3JGaWVsZD5cbiAgICAgICAgPEVkaXRvckZpZWxkIGxhYmVsPVwiVGFnc1wiPlxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJsYWJlbDEsbGFiZWwyXCJcbiAgICAgICAgICAgIHZhbHVlPXthbm5vdGF0aW9uLnRhZ0tleXN9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIG9uQW5ub3RhdGlvbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgLi4uYW5ub3RhdGlvbixcbiAgICAgICAgICAgICAgICB0YWdLZXlzOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9FZGl0b3JGaWVsZD5cbiAgICAgICAgPEVkaXRvckZpZWxkXG4gICAgICAgICAgbGFiZWw9XCJUZXh0XCJcbiAgICAgICAgICB0b29sdGlwPXtcbiAgICAgICAgICAgICdVc2UgZWl0aGVyIHRoZSBuYW1lIG9yIGEgcGF0dGVybi4gRm9yIGV4YW1wbGUsIHt7aW5zdGFuY2V9fSBpcyByZXBsYWNlZCB3aXRoIGxhYmVsIHZhbHVlIGZvciB0aGUgbGFiZWwgaW5zdGFuY2UuJ1xuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJpbnN0YW5jZVwiXG4gICAgICAgICAgICB2YWx1ZT17YW5ub3RhdGlvbi50ZXh0Rm9ybWF0fVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICBvbkFubm90YXRpb25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgIC4uLmFubm90YXRpb24sXG4gICAgICAgICAgICAgICAgdGV4dEZvcm1hdDogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRWRpdG9yRmllbGQ+XG4gICAgICA8L0VkaXRvclJvdz5cbiAgICA8Lz5cbiAgKTtcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/AnnotationsQueryEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/LokiCheatSheet.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LokiCheatSheet)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n\n\n\n\nconst DEFAULT_EXAMPLES = ['{job=\"default/prometheus\"}'];\nconst PREFERRED_LABELS = [\"job\", \"app\", \"k8s_app\"];\nconst EXAMPLES_LIMIT = 5;\nconst LOGQL_EXAMPLES = [\n  {\n    title: \"Log pipeline\",\n    expression: '{job=\"mysql\"} |= \"metrics\" | logfmt | duration > 10s',\n    label: 'This query targets the MySQL job, keeps logs that contain the substring \"metrics\", and then parses and filters the logs further.'\n  },\n  {\n    title: \"Count over time\",\n    expression: 'count_over_time({job=\"mysql\"}[5m])',\n    label: \"This query counts all the log lines within the last five minutes for the MySQL job.\"\n  },\n  {\n    title: \"Rate\",\n    expression: 'rate(({job=\"mysql\"} |= \"error\" != \"timeout\")[10s])',\n    label: \"This query gets the per-second rate of all non-timeout errors within the last ten seconds for the MySQL job.\"\n  },\n  {\n    title: \"Aggregate, count, and group\",\n    expression: 'sum(count_over_time({job=\"mysql\"}[5m])) by (level)',\n    label: \"Get the count of logs during the last five minutes, grouping by level.\"\n  }\n];\nclass LokiCheatSheet extends react__WEBPACK_IMPORTED_MODULE_1__.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      userExamples: []\n    };\n    this.checkUserLabels = async () => {\n      const provider = this.props.datasource?.languageProvider;\n      if (provider.started) {\n        const labels = provider.getLabelKeys() || [];\n        const preferredLabel = PREFERRED_LABELS.find((l) => labels.includes(l));\n        if (preferredLabel) {\n          const values = await provider.getLabelValues(preferredLabel);\n          const userExamples = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.shuffle)(values).slice(0, EXAMPLES_LIMIT).map((value) => `{${preferredLabel}=\"${value}\"}`);\n          this.setState({ userExamples });\n        }\n      } else {\n        this.scheduleUserLabelChecking();\n      }\n    };\n  }\n  componentDidMount() {\n    this.scheduleUserLabelChecking();\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_2__.reportInteraction)(\"grafana_loki_cheatsheet_opened\", {});\n  }\n  componentWillUnmount() {\n    clearTimeout(this.userLabelTimer);\n  }\n  scheduleUserLabelChecking() {\n    this.userLabelTimer = setTimeout(this.checkUserLabels, 1e3);\n  }\n  renderExpression(expr) {\n    const { onClickExample } = this.props;\n    const onClick = (query) => {\n      onClickExample(query);\n      (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_2__.reportInteraction)(\"grafana_loki_cheatsheet_example_clicked\", {});\n    };\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      \"button\",\n      {\n        type: \"button\",\n        className: \"cheat-sheet-item__example\",\n        key: expr,\n        onClick: (e) => onClick({ refId: \"A\", expr })\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"code\", null, expr)\n    );\n  }\n  render() {\n    const { userExamples } = this.state;\n    const hasUserExamples = userExamples.length > 0;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"h2\", null, \"Loki Cheat Sheet\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__title\" }, \"See your logs\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__label\" }, \"Start by selecting a log stream from the Label browser, or alternatively you can write a stream selector into the query field.\"), hasUserExamples ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__label\" }, \"Here are some example streams from your logs:\"), userExamples.map((example) => this.renderExpression(example))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__label\" }, \"Here is an example of a log stream:\"), this.renderExpression(DEFAULT_EXAMPLES[0]))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__title\" }, \"Combine stream selectors\"), this.renderExpression('{app=\"cassandra\",namespace=\"prod\"}'), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__label\" }, \"Returns all log lines from streams that have both labels.\")), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__title\" }, \"Filtering for search terms.\"), this.renderExpression('{app=\"cassandra\"} |~ \"(duration|latency)s*(=|is|of)s*[d.]+\"'), this.renderExpression('{app=\"cassandra\"} |= \"exact match\"'), this.renderExpression('{app=\"cassandra\"} != \"do not match\"'), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__label\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"a\", { href: \"https://grafana.com/docs/loki/latest/logql/#log-pipeline\", target: \"logql\" }, \"LogQL\"), \" \", \"supports exact and regular expression filters.\")), LOGQL_EXAMPLES.map((item) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item\", key: item.expression }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__title\" }, item.title), this.renderExpression(item.expression), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"cheat-sheet-item__label\" }, item.label))));\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raUNoZWF0U2hlZXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0I7QUFDYTtBQUdIO0FBS2xDLE1BQU0sbUJBQW1CLENBQUMsNEJBQTRCO0FBQ3RELE1BQU0sbUJBQW1CLENBQUMsT0FBTyxPQUFPLFNBQVM7QUFDakQsTUFBTSxpQkFBaUI7QUFFdkIsTUFBTSxpQkFBaUI7QUFBQSxFQUNyQjtBQUFBLElBQ0UsT0FBTztBQUFBLElBQ1AsWUFBWTtBQUFBLElBQ1osT0FDRTtBQUFBLEVBQ0o7QUFBQSxFQUNBO0FBQUEsSUFDRSxPQUFPO0FBQUEsSUFDUCxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsRUFDVDtBQUFBLEVBQ0E7QUFBQSxJQUNFLE9BQU87QUFBQSxJQUNQLFlBQVk7QUFBQSxJQUNaLE9BQ0U7QUFBQSxFQUNKO0FBQUEsRUFDQTtBQUFBLElBQ0UsT0FBTztBQUFBLElBQ1AsWUFBWTtBQUFBLElBQ1osT0FBTztBQUFBLEVBQ1Q7QUFDRjtBQUVlLE1BQU0sdUJBQXVCLGdEQUFhLENBQThEO0FBQUEsRUFBdkg7QUFBQTtBQUVFLGlCQUFRO0FBQUEsTUFDTixjQUFjLENBQUM7QUFBQSxJQUNqQjtBQWVBLDJCQUFrQixZQUFZO0FBRTVCLFlBQU0sV0FBaUMsS0FBSyxNQUFNLFlBQVk7QUFDOUQsVUFBSSxTQUFTLFNBQVM7QUFDcEIsY0FBTSxTQUFTLFNBQVMsYUFBYSxLQUFLLENBQUM7QUFDM0MsY0FBTSxpQkFBaUIsaUJBQWlCLEtBQUssQ0FBQyxNQUFNLE9BQU8sU0FBUyxDQUFDLENBQUM7QUFDdEUsWUFBSSxnQkFBZ0I7QUFDbEIsZ0JBQU0sU0FBUyxNQUFNLFNBQVMsZUFBZSxjQUFjO0FBQzNELGdCQUFNLGVBQWUsK0NBQU8sQ0FBQyxNQUFNLEVBQ2hDLE1BQU0sR0FBRyxjQUFjLEVBQ3ZCLElBQUksQ0FBQyxVQUFVLElBQUksbUJBQW1CLFNBQVM7QUFDbEQsZUFBSyxTQUFTLEVBQUUsYUFBYSxDQUFDO0FBQUEsUUFDaEM7QUFBQSxNQUNGLE9BQU87QUFDTCxhQUFLLDBCQUEwQjtBQUFBLE1BQ2pDO0FBQUEsSUFDRjtBQUFBO0FBQUEsRUE3QkEsb0JBQW9CO0FBQ2xCLFNBQUssMEJBQTBCO0FBQy9CLHVFQUFpQixDQUFDLGtDQUFrQyxDQUFDLENBQUM7QUFBQSxFQUN4RDtBQUFBLEVBRUEsdUJBQXVCO0FBQ3JCLGlCQUFhLEtBQUssY0FBYztBQUFBLEVBQ2xDO0FBQUEsRUFFQSw0QkFBNEI7QUFDMUIsU0FBSyxpQkFBaUIsV0FBVyxLQUFLLGlCQUFpQixHQUFJO0FBQUEsRUFDN0Q7QUFBQSxFQW9CQSxpQkFBaUIsTUFBYztBQUM3QixVQUFNLEVBQUUsZUFBZSxJQUFJLEtBQUs7QUFDaEMsVUFBTSxVQUFVLENBQUMsVUFBcUI7QUFDcEMscUJBQWUsS0FBSztBQUNwQix5RUFBaUIsQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDO0FBQUEsSUFDakU7QUFFQSxXQUNFO0FBQUEsTUFBQztBQUFBO0FBQUEsUUFDQyxNQUFLO0FBQUEsUUFDTCxXQUFVO0FBQUEsUUFDVixLQUFLO0FBQUEsUUFDTCxTQUFTLENBQUMsTUFBTSxRQUFRLEVBQUUsT0FBTyxLQUFLLEtBQUssQ0FBQztBQUFBO0FBQUEsTUFFNUMsMkVBQUMsY0FBTSxJQUFLO0FBQUEsSUFDZDtBQUFBLEVBRUo7QUFBQSxFQUVBLFNBQVM7QUFDUCxVQUFNLEVBQUUsYUFBYSxJQUFJLEtBQUs7QUFDOUIsVUFBTSxrQkFBa0IsYUFBYSxTQUFTO0FBRTlDLFdBQ0UsMkVBQUMsYUFDQywyRUFBQyxZQUFHLGtCQUFnQixHQUNwQiwyRUFBQyxTQUFJLFdBQVUsc0JBQ2IsMkVBQUMsU0FBSSxXQUFVLDZCQUEwQixlQUFhLEdBQ3RELDJFQUFDLFNBQUksV0FBVSw2QkFBMEIsZ0lBR3pDLEdBQ0Msa0JBQ0MsMkVBQUMsYUFDQywyRUFBQyxTQUFJLFdBQVUsNkJBQTBCLCtDQUE2QyxHQUNyRixhQUFhLElBQUksQ0FBQyxZQUFZLEtBQUssaUJBQWlCLE9BQU8sQ0FBQyxDQUMvRCxJQUVBLDJFQUFDLGFBQ0MsMkVBQUMsU0FBSSxXQUFVLDZCQUEwQixxQ0FBbUMsR0FDM0UsS0FBSyxpQkFBaUIsaUJBQWlCLENBQUMsQ0FBQyxDQUM1QyxDQUVKLEdBQ0EsMkVBQUMsU0FBSSxXQUFVLHNCQUNiLDJFQUFDLFNBQUksV0FBVSw2QkFBMEIsMEJBQXdCLEdBQ2hFLEtBQUssaUJBQWlCLG9DQUFvQyxHQUMzRCwyRUFBQyxTQUFJLFdBQVUsNkJBQTBCLDJEQUF5RCxDQUNwRyxHQUVBLDJFQUFDLFNBQUksV0FBVSxzQkFDYiwyRUFBQyxTQUFJLFdBQVUsNkJBQTBCLDZCQUEyQixHQUNuRSxLQUFLLGlCQUFpQiw2REFBNkQsR0FDbkYsS0FBSyxpQkFBaUIsb0NBQW9DLEdBQzFELEtBQUssaUJBQWlCLHFDQUFxQyxHQUM1RCwyRUFBQyxTQUFJLFdBQVUsNkJBQ2IsMkVBQUMsT0FBRSxNQUFLLDREQUEyRCxRQUFPLFdBQVEsT0FFbEYsR0FBSyxLQUFJLGdEQUVYLENBQ0YsR0FDQyxlQUFlLElBQUksQ0FBQyxTQUNuQiwyRUFBQyxTQUFJLFdBQVUsb0JBQW1CLEtBQUssS0FBSyxjQUMxQywyRUFBQyxTQUFJLFdBQVUsNkJBQTJCLEtBQUssS0FBTSxHQUNwRCxLQUFLLGlCQUFpQixLQUFLLFVBQVUsR0FDdEMsMkVBQUMsU0FBSSxXQUFVLDZCQUEyQixLQUFLLEtBQU0sQ0FDdkQsQ0FDRCxDQUNIO0FBQUEsRUFFSjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvY29tcG9uZW50cy9Mb2tpQ2hlYXRTaGVldC50c3g/OGY1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzaHVmZmxlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyBQdXJlQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBRdWVyeUVkaXRvckhlbHBQcm9wcyB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgcmVwb3J0SW50ZXJhY3Rpb24gfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcblxuaW1wb3J0IExva2lMYW5ndWFnZVByb3ZpZGVyIGZyb20gJy4uL0xhbmd1YWdlUHJvdmlkZXInO1xuaW1wb3J0IHsgTG9raVF1ZXJ5IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCBERUZBVUxUX0VYQU1QTEVTID0gWyd7am9iPVwiZGVmYXVsdC9wcm9tZXRoZXVzXCJ9J107XG5jb25zdCBQUkVGRVJSRURfTEFCRUxTID0gWydqb2InLCAnYXBwJywgJ2s4c19hcHAnXTtcbmNvbnN0IEVYQU1QTEVTX0xJTUlUID0gNTtcblxuY29uc3QgTE9HUUxfRVhBTVBMRVMgPSBbXG4gIHtcbiAgICB0aXRsZTogJ0xvZyBwaXBlbGluZScsXG4gICAgZXhwcmVzc2lvbjogJ3tqb2I9XCJteXNxbFwifSB8PSBcIm1ldHJpY3NcIiB8IGxvZ2ZtdCB8IGR1cmF0aW9uID4gMTBzJyxcbiAgICBsYWJlbDpcbiAgICAgICdUaGlzIHF1ZXJ5IHRhcmdldHMgdGhlIE15U1FMIGpvYiwga2VlcHMgbG9ncyB0aGF0IGNvbnRhaW4gdGhlIHN1YnN0cmluZyBcIm1ldHJpY3NcIiwgYW5kIHRoZW4gcGFyc2VzIGFuZCBmaWx0ZXJzIHRoZSBsb2dzIGZ1cnRoZXIuJyxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnQ291bnQgb3ZlciB0aW1lJyxcbiAgICBleHByZXNzaW9uOiAnY291bnRfb3Zlcl90aW1lKHtqb2I9XCJteXNxbFwifVs1bV0pJyxcbiAgICBsYWJlbDogJ1RoaXMgcXVlcnkgY291bnRzIGFsbCB0aGUgbG9nIGxpbmVzIHdpdGhpbiB0aGUgbGFzdCBmaXZlIG1pbnV0ZXMgZm9yIHRoZSBNeVNRTCBqb2IuJyxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnUmF0ZScsXG4gICAgZXhwcmVzc2lvbjogJ3JhdGUoKHtqb2I9XCJteXNxbFwifSB8PSBcImVycm9yXCIgIT0gXCJ0aW1lb3V0XCIpWzEwc10pJyxcbiAgICBsYWJlbDpcbiAgICAgICdUaGlzIHF1ZXJ5IGdldHMgdGhlIHBlci1zZWNvbmQgcmF0ZSBvZiBhbGwgbm9uLXRpbWVvdXQgZXJyb3JzIHdpdGhpbiB0aGUgbGFzdCB0ZW4gc2Vjb25kcyBmb3IgdGhlIE15U1FMIGpvYi4nLFxuICB9LFxuICB7XG4gICAgdGl0bGU6ICdBZ2dyZWdhdGUsIGNvdW50LCBhbmQgZ3JvdXAnLFxuICAgIGV4cHJlc3Npb246ICdzdW0oY291bnRfb3Zlcl90aW1lKHtqb2I9XCJteXNxbFwifVs1bV0pKSBieSAobGV2ZWwpJyxcbiAgICBsYWJlbDogJ0dldCB0aGUgY291bnQgb2YgbG9ncyBkdXJpbmcgdGhlIGxhc3QgZml2ZSBtaW51dGVzLCBncm91cGluZyBieSBsZXZlbC4nLFxuICB9LFxuXTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9raUNoZWF0U2hlZXQgZXh0ZW5kcyBQdXJlQ29tcG9uZW50PFF1ZXJ5RWRpdG9ySGVscFByb3BzPExva2lRdWVyeT4sIHsgdXNlckV4YW1wbGVzOiBzdHJpbmdbXSB9PiB7XG4gIGRlY2xhcmUgdXNlckxhYmVsVGltZXI6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xuICBzdGF0ZSA9IHtcbiAgICB1c2VyRXhhbXBsZXM6IFtdLFxuICB9O1xuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2NoZWR1bGVVc2VyTGFiZWxDaGVja2luZygpO1xuICAgIHJlcG9ydEludGVyYWN0aW9uKCdncmFmYW5hX2xva2lfY2hlYXRzaGVldF9vcGVuZWQnLCB7fSk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy51c2VyTGFiZWxUaW1lcik7XG4gIH1cblxuICBzY2hlZHVsZVVzZXJMYWJlbENoZWNraW5nKCkge1xuICAgIHRoaXMudXNlckxhYmVsVGltZXIgPSBzZXRUaW1lb3V0KHRoaXMuY2hlY2tVc2VyTGFiZWxzLCAxMDAwKTtcbiAgfVxuXG4gIGNoZWNrVXNlckxhYmVscyA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBTZXQgZXhhbXBsZSBmcm9tIHVzZXIgbGFiZWxzXG4gICAgY29uc3QgcHJvdmlkZXI6IExva2lMYW5ndWFnZVByb3ZpZGVyID0gdGhpcy5wcm9wcy5kYXRhc291cmNlPy5sYW5ndWFnZVByb3ZpZGVyO1xuICAgIGlmIChwcm92aWRlci5zdGFydGVkKSB7XG4gICAgICBjb25zdCBsYWJlbHMgPSBwcm92aWRlci5nZXRMYWJlbEtleXMoKSB8fCBbXTtcbiAgICAgIGNvbnN0IHByZWZlcnJlZExhYmVsID0gUFJFRkVSUkVEX0xBQkVMUy5maW5kKChsKSA9PiBsYWJlbHMuaW5jbHVkZXMobCkpO1xuICAgICAgaWYgKHByZWZlcnJlZExhYmVsKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IHByb3ZpZGVyLmdldExhYmVsVmFsdWVzKHByZWZlcnJlZExhYmVsKTtcbiAgICAgICAgY29uc3QgdXNlckV4YW1wbGVzID0gc2h1ZmZsZSh2YWx1ZXMpXG4gICAgICAgICAgLnNsaWNlKDAsIEVYQU1QTEVTX0xJTUlUKVxuICAgICAgICAgIC5tYXAoKHZhbHVlKSA9PiBgeyR7cHJlZmVycmVkTGFiZWx9PVwiJHt2YWx1ZX1cIn1gKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHVzZXJFeGFtcGxlcyB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zY2hlZHVsZVVzZXJMYWJlbENoZWNraW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIHJlbmRlckV4cHJlc3Npb24oZXhwcjogc3RyaW5nKSB7XG4gICAgY29uc3QgeyBvbkNsaWNrRXhhbXBsZSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBvbkNsaWNrID0gKHF1ZXJ5OiBMb2tpUXVlcnkpID0+IHtcbiAgICAgIG9uQ2xpY2tFeGFtcGxlKHF1ZXJ5KTtcbiAgICAgIHJlcG9ydEludGVyYWN0aW9uKCdncmFmYW5hX2xva2lfY2hlYXRzaGVldF9leGFtcGxlX2NsaWNrZWQnLCB7fSk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8YnV0dG9uXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICBjbGFzc05hbWU9XCJjaGVhdC1zaGVldC1pdGVtX19leGFtcGxlXCJcbiAgICAgICAga2V5PXtleHByfVxuICAgICAgICBvbkNsaWNrPXsoZSkgPT4gb25DbGljayh7IHJlZklkOiAnQScsIGV4cHIgfSl9XG4gICAgICA+XG4gICAgICAgIDxjb2RlPntleHByfTwvY29kZT5cbiAgICAgIDwvYnV0dG9uPlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB1c2VyRXhhbXBsZXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgaGFzVXNlckV4YW1wbGVzID0gdXNlckV4YW1wbGVzLmxlbmd0aCA+IDA7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGgyPkxva2kgQ2hlYXQgU2hlZXQ8L2gyPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1fX3RpdGxlXCI+U2VlIHlvdXIgbG9nczwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlYXQtc2hlZXQtaXRlbV9fbGFiZWxcIj5cbiAgICAgICAgICAgIFN0YXJ0IGJ5IHNlbGVjdGluZyBhIGxvZyBzdHJlYW0gZnJvbSB0aGUgTGFiZWwgYnJvd3Nlciwgb3IgYWx0ZXJuYXRpdmVseSB5b3UgY2FuIHdyaXRlIGEgc3RyZWFtIHNlbGVjdG9yXG4gICAgICAgICAgICBpbnRvIHRoZSBxdWVyeSBmaWVsZC5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7aGFzVXNlckV4YW1wbGVzID8gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGVhdC1zaGVldC1pdGVtX19sYWJlbFwiPkhlcmUgYXJlIHNvbWUgZXhhbXBsZSBzdHJlYW1zIGZyb20geW91ciBsb2dzOjwvZGl2PlxuICAgICAgICAgICAgICB7dXNlckV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4gdGhpcy5yZW5kZXJFeHByZXNzaW9uKGV4YW1wbGUpKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1fX2xhYmVsXCI+SGVyZSBpcyBhbiBleGFtcGxlIG9mIGEgbG9nIHN0cmVhbTo8L2Rpdj5cbiAgICAgICAgICAgICAge3RoaXMucmVuZGVyRXhwcmVzc2lvbihERUZBVUxUX0VYQU1QTEVTWzBdKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1fX3RpdGxlXCI+Q29tYmluZSBzdHJlYW0gc2VsZWN0b3JzPC9kaXY+XG4gICAgICAgICAge3RoaXMucmVuZGVyRXhwcmVzc2lvbigne2FwcD1cImNhc3NhbmRyYVwiLG5hbWVzcGFjZT1cInByb2RcIn0nKX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1fX2xhYmVsXCI+UmV0dXJucyBhbGwgbG9nIGxpbmVzIGZyb20gc3RyZWFtcyB0aGF0IGhhdmUgYm90aCBsYWJlbHMuPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlYXQtc2hlZXQtaXRlbVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlYXQtc2hlZXQtaXRlbV9fdGl0bGVcIj5GaWx0ZXJpbmcgZm9yIHNlYXJjaCB0ZXJtcy48L2Rpdj5cbiAgICAgICAgICB7dGhpcy5yZW5kZXJFeHByZXNzaW9uKCd7YXBwPVwiY2Fzc2FuZHJhXCJ9IHx+IFwiKGR1cmF0aW9ufGxhdGVuY3kpcyooPXxpc3xvZilzKltkLl0rXCInKX1cbiAgICAgICAgICB7dGhpcy5yZW5kZXJFeHByZXNzaW9uKCd7YXBwPVwiY2Fzc2FuZHJhXCJ9IHw9IFwiZXhhY3QgbWF0Y2hcIicpfVxuICAgICAgICAgIHt0aGlzLnJlbmRlckV4cHJlc3Npb24oJ3thcHA9XCJjYXNzYW5kcmFcIn0gIT0gXCJkbyBub3QgbWF0Y2hcIicpfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlYXQtc2hlZXQtaXRlbV9fbGFiZWxcIj5cbiAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dyYWZhbmEuY29tL2RvY3MvbG9raS9sYXRlc3QvbG9ncWwvI2xvZy1waXBlbGluZVwiIHRhcmdldD1cImxvZ3FsXCI+XG4gICAgICAgICAgICAgIExvZ1FMXG4gICAgICAgICAgICA8L2E+eycgJ31cbiAgICAgICAgICAgIHN1cHBvcnRzIGV4YWN0IGFuZCByZWd1bGFyIGV4cHJlc3Npb24gZmlsdGVycy5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtMT0dRTF9FWEFNUExFUy5tYXAoKGl0ZW0pID0+IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1cIiBrZXk9e2l0ZW0uZXhwcmVzc2lvbn0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1fX3RpdGxlXCI+e2l0ZW0udGl0bGV9PC9kaXY+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJFeHByZXNzaW9uKGl0ZW0uZXhwcmVzc2lvbil9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWF0LXNoZWV0LWl0ZW1fX2xhYmVsXCI+e2l0ZW0ubGFiZWx9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/LokiCheatSheet.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/LokiContextUi.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IS_LOKI_LOG_CONTEXT_UI_OPEN: () => (/* binding */ IS_LOKI_LOG_CONTEXT_UI_OPEN),\n/* harmony export */   LokiContextUi: () => (/* binding */ LokiContextUi)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useAsync.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/text/markdown.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Tooltip/Tooltip.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Collapse/Collapse.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Spinner/Spinner.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/Label.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineFieldRow.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/RenderUserContentAsHTML/RenderUserContentAsHTML.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Switch/Switch.tsx\");\n/* harmony import */ var app_core_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/store.ts\");\n/* harmony import */ var _prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/RawQuery.tsx\");\n/* harmony import */ var _LogContextProvider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/LogContextProvider.ts\");\n/* harmony import */ var _languageUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/languageUtils.ts\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/loki/syntax.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getStyles(theme) {\n  return {\n    labels: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      gap: ${theme.spacing(0.5)};\n    `,\n    wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n      gap: ${theme.spacing(0.5)};\n      position: relative;\n    `,\n    textWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      align-items: center;\n    `,\n    hidden: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      visibility: hidden;\n    `,\n    label: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      max-width: 100%;\n      &:first-of-type {\n        margin-bottom: ${theme.spacing(2)};\n      }\n      &:not(:first-of-type) {\n        margin: ${theme.spacing(2)} 0;\n      }\n    `,\n    rawQueryContainer: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      text-align: start;\n      line-break: anywhere;\n      margin-top: -${theme.spacing(0.25)};\n      margin-right: ${theme.spacing(6)};\n      min-height: ${theme.spacing(4)};\n    `,\n    ui: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      background-color: ${theme.colors.background.secondary};\n      padding: ${theme.spacing(2)};\n    `,\n    rawQuery: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: inline;\n    `,\n    queryDescription: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-left: ${theme.spacing(0.5)};\n    `,\n    iconButton: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      position: absolute;\n      top: ${theme.spacing(1)};\n      right: ${theme.spacing(1)};\n      z-index: ${theme.zIndex.navbarFixed};\n    `,\n    operationsToggle: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin: ${theme.spacing(1)} 0 ${theme.spacing(-1)} 0;\n      & > div {\n        margin: 0;\n        & > label {\n          padding: 0;\n        }\n      }\n    `\n  };\n}\nconst IS_LOKI_LOG_CONTEXT_UI_OPEN = \"isLogContextQueryUiOpen\";\nfunction LokiContextUi(props) {\n  const { row, logContextProvider, updateFilter, onClose, origQuery, runContextQuery } = props;\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.useStyles2)(getStyles);\n  const [contextFilters, setContextFilters] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  const [initialized, setInitialized] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(app_core_store__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getBool(IS_LOKI_LOG_CONTEXT_UI_OPEN, false));\n  const [includePipelineOperations, setIncludePipelineOperations] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    app_core_store__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getBool(_LogContextProvider__WEBPACK_IMPORTED_MODULE_4__.SHOULD_INCLUDE_PIPELINE_OPERATIONS, false)\n  );\n  const timerHandle = react__WEBPACK_IMPORTED_MODULE_1___default().useRef();\n  const previousInitialized = react__WEBPACK_IMPORTED_MODULE_1___default().useRef(false);\n  const previousContextFilters = react__WEBPACK_IMPORTED_MODULE_1___default().useRef([]);\n  const isInitialState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (initialized && contextFilters.some((filter) => filter.fromParser === filter.enabled)) {\n      return false;\n    }\n    if (includePipelineOperations && logContextProvider.queryContainsValidPipelineStages(origQuery)) {\n      return false;\n    }\n    return true;\n  }, [contextFilters, includePipelineOperations, initialized, logContextProvider, origQuery]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!initialized) {\n      return;\n    }\n    if (!previousInitialized.current) {\n      previousInitialized.current = initialized;\n      return;\n    }\n    if (contextFilters.filter(({ enabled, fromParser }) => enabled && !fromParser).length === 0) {\n      setContextFilters(previousContextFilters.current);\n      return;\n    }\n    previousContextFilters.current = structuredClone(contextFilters);\n    if (timerHandle.current) {\n      clearTimeout(timerHandle.current);\n    }\n    setLoading(true);\n    timerHandle.current = window.setTimeout(() => {\n      updateFilter(contextFilters.filter(({ enabled }) => enabled));\n      const preservedLabels = {\n        removedLabels: [],\n        selectedExtractedLabels: []\n      };\n      contextFilters.forEach(({ enabled, fromParser, label }) => {\n        if (!enabled && !fromParser) {\n          preservedLabels.removedLabels.push(label);\n        }\n        if (enabled && fromParser) {\n          preservedLabels.selectedExtractedLabels.push(label);\n        }\n      });\n      app_core_store__WEBPACK_IMPORTED_MODULE_2__[\"default\"].set(_LogContextProvider__WEBPACK_IMPORTED_MODULE_4__.LOKI_LOG_CONTEXT_PRESERVED_LABELS, JSON.stringify(preservedLabels));\n      setLoading(false);\n    }, 1500);\n    return () => {\n      clearTimeout(timerHandle.current);\n    };\n  }, [contextFilters, initialized]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    return () => {\n      clearTimeout(timerHandle.current);\n      onClose();\n    };\n  }, [onClose]);\n  (0,react_use__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(async () => {\n    setLoading(true);\n    const initContextFilters = await logContextProvider.getInitContextFilters(row.labels, origQuery);\n    setContextFilters(initContextFilters);\n    setInitialized(true);\n    setLoading(false);\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_loaded\", {\n      logRowUid: row.uid,\n      type: \"load\"\n    });\n    return () => {\n      (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_loaded\", {\n        logRowUid: row.uid,\n        type: \"unload\"\n      });\n    };\n  }, [row.uid]);\n  const realLabels = contextFilters.filter(({ fromParser }) => !fromParser);\n  const realLabelsEnabled = realLabels.filter(({ enabled }) => enabled);\n  const parsedLabels = contextFilters.filter(({ fromParser }) => fromParser);\n  const parsedLabelsEnabled = parsedLabels.filter(({ enabled }) => enabled);\n  const contextFilterToSelectFilter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((contextFilter) => {\n    return {\n      label: `${contextFilter.label}=\"${(0,_languageUtils__WEBPACK_IMPORTED_MODULE_5__.escapeLabelValueInSelector)(contextFilter.value)}\"`,\n      value: contextFilter.label\n    };\n  }, []);\n  const showParsedLabels = origQuery && (0,_queryUtils__WEBPACK_IMPORTED_MODULE_6__.isQueryWithParser)(origQuery.expr).parserCount === 1 && parsedLabels.length > 0;\n  let queryExpr = logContextProvider.prepareExpression(\n    contextFilters.filter(({ enabled }) => enabled),\n    origQuery\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.wrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Tooltip, { content: \"Revert to initial log context query.\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.iconButton }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Button,\n    {\n      \"data-testid\": \"revert-button\",\n      icon: \"history-alt\",\n      variant: \"secondary\",\n      disabled: isInitialState,\n      onClick: (e) => {\n        (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_reverted\", {\n          logRowUid: row.uid\n        });\n        setContextFilters((contextFilters2) => {\n          return contextFilters2.map((contextFilter) => ({\n            ...contextFilter,\n            // For revert to initial query we need to enable all labels and disable all parsed labels\n            enabled: !contextFilter.fromParser\n          }));\n        });\n        app_core_store__WEBPACK_IMPORTED_MODULE_2__[\"default\"].delete(_LogContextProvider__WEBPACK_IMPORTED_MODULE_4__.LOKI_LOG_CONTEXT_PRESERVED_LABELS);\n        app_core_store__WEBPACK_IMPORTED_MODULE_2__[\"default\"].delete(_LogContextProvider__WEBPACK_IMPORTED_MODULE_4__.SHOULD_INCLUDE_PIPELINE_OPERATIONS);\n        setIncludePipelineOperations(false);\n      }\n    }\n  ))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_13__.Collapse,\n    {\n      collapsible: true,\n      isOpen,\n      onToggle: () => {\n        app_core_store__WEBPACK_IMPORTED_MODULE_2__[\"default\"].set(IS_LOKI_LOG_CONTEXT_UI_OPEN, !isOpen);\n        setIsOpen((isOpen2) => !isOpen2);\n        (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_toggled\", {\n          logRowUid: row.uid,\n          action: !isOpen ? \"open\" : \"close\"\n        });\n      },\n      label: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.rawQueryContainer }, initialized ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_3__.RawQuery, { lang: { grammar: _syntax__WEBPACK_IMPORTED_MODULE_7__.lokiGrammar, name: \"loki\" }, query: queryExpr, className: styles.rawQuery }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Tooltip, { content: \"The initial log context query is created from all labels defining the stream for the selected log line. Use the editor below to customize the log context query.\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.Icon, { name: \"info-circle\", size: \"sm\", className: styles.queryDescription }))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_15__.Spinner, null))\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.ui }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_16__.Label,\n      {\n        className: styles.label,\n        description: \"The initial log context query is created from all labels defining the stream for the selected log line. You can broaden your search by removing one or more of the label filters.\"\n      },\n      \"Widen the search\"\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_17__.MultiSelect,\n      {\n        isLoading: loading,\n        options: realLabels.map(contextFilterToSelectFilter),\n        value: realLabelsEnabled.map(contextFilterToSelectFilter),\n        closeMenuOnSelect: true,\n        maxMenuHeight: 200,\n        noOptionsMessage: \"No further labels available\",\n        onChange: (keys, actionMeta) => {\n          if (actionMeta.action === \"select-option\") {\n            (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_filtered\", {\n              logRowUid: row.uid,\n              type: \"label\",\n              action: \"select\"\n            });\n          }\n          if (actionMeta.action === \"remove-value\") {\n            (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_filtered\", {\n              logRowUid: row.uid,\n              type: \"label\",\n              action: \"remove\"\n            });\n          }\n          return setContextFilters(\n            contextFilters.map((filter) => {\n              if (filter.fromParser) {\n                return filter;\n              }\n              filter.enabled = keys.some((key) => key.value === filter.label);\n              return filter;\n            })\n          );\n        }\n      }\n    ), showParsedLabels && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_16__.Label,\n      {\n        className: styles.label,\n        description: `By using a parser in your original query, you can use filters for extracted labels. Refine your search by applying extracted labels created from the selected log line.`\n      },\n      \"Refine the search\"\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_17__.MultiSelect,\n      {\n        isLoading: loading,\n        options: parsedLabels.map(contextFilterToSelectFilter),\n        value: parsedLabelsEnabled.map(contextFilterToSelectFilter),\n        closeMenuOnSelect: true,\n        maxMenuHeight: 200,\n        noOptionsMessage: \"No further labels available\",\n        isClearable: true,\n        onChange: (keys, actionMeta) => {\n          if (actionMeta.action === \"select-option\") {\n            (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_filtered\", {\n              logRowUid: row.uid,\n              type: \"parsed_label\",\n              action: \"select\"\n            });\n          }\n          if (actionMeta.action === \"remove-value\") {\n            (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_filtered\", {\n              logRowUid: row.uid,\n              type: \"parsed_label\",\n              action: \"remove\"\n            });\n          }\n          setContextFilters(\n            contextFilters.map((filter) => {\n              if (!filter.fromParser) {\n                return filter;\n              }\n              filter.enabled = keys.some((key) => key.value === filter.label);\n              return filter;\n            })\n          );\n        }\n      }\n    )), logContextProvider.queryContainsValidPipelineStages(origQuery) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_18__.InlineFieldRow, { className: styles.operationsToggle }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_19__.InlineField,\n      {\n        label: \"Include LogQL pipeline operations\",\n        tooltip: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n          _grafana_ui__WEBPACK_IMPORTED_MODULE_20__.RenderUserContentAsHTML,\n          {\n            content: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_21__.renderMarkdown)(\n              \"This will include LogQL operations such as `line_format` or `label_format`. It won't include line or label filter operations.\"\n            )\n          }\n        )\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_22__.InlineSwitch,\n        {\n          value: includePipelineOperations,\n          showLabel: true,\n          transparent: true,\n          onChange: (e) => {\n            (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.reportInteraction)(\"grafana_explore_logs_loki_log_context_pipeline_toggled\", {\n              logRowUid: row.uid,\n              action: e.currentTarget.checked ? \"enable\" : \"disable\"\n            });\n            app_core_store__WEBPACK_IMPORTED_MODULE_2__[\"default\"].set(_LogContextProvider__WEBPACK_IMPORTED_MODULE_4__.SHOULD_INCLUDE_PIPELINE_OPERATIONS, e.currentTarget.checked);\n            setIncludePipelineOperations(e.currentTarget.checked);\n            if (runContextQuery) {\n              runContextQuery();\n            }\n          }\n        }\n      )\n    )))\n  ));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raUNvbnRleHRVaS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQzZDO0FBQ3hDO0FBRW1EO0FBQzFDO0FBYzNCO0FBQ1c7QUFFTztBQU1sQjtBQUNvQztBQUNUO0FBQ047QUFZNUIsU0FBUyxVQUFVLE9BQXNCO0FBQ3ZDLFNBQU87QUFBQSxJQUNMLFFBQVEsaURBQUc7QUFBSDtBQUFBLGFBRUMsTUFBTSxRQUFRLEdBQUc7QUFBQTtBQUFBLElBRTFCLFNBQVMsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQSxhQUlBLE1BQU0sUUFBUSxHQUFHO0FBQUE7QUFBQTtBQUFBLElBRzFCLGFBQWEsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQSxJQUliLFFBQVEsaURBQUc7QUFBSDtBQUFBO0FBQUEsSUFHUixPQUFPLGlEQUFHO0FBQUg7QUFBQTtBQUFBLHlCQUdjLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQTtBQUFBLGtCQUd0QixNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUE7QUFBQSxJQUc3QixtQkFBbUIsaURBQUc7QUFBSDtBQUFBO0FBQUEscUJBR0YsTUFBTSxRQUFRLElBQUk7QUFBQSxzQkFDakIsTUFBTSxRQUFRLENBQUM7QUFBQSxvQkFDakIsTUFBTSxRQUFRLENBQUM7QUFBQTtBQUFBLElBRS9CLElBQUksaURBQUc7QUFBSCwwQkFDa0IsTUFBTSxPQUFPLFdBQVc7QUFBQSxpQkFDakMsTUFBTSxRQUFRLENBQUM7QUFBQTtBQUFBLElBRTVCLFVBQVUsaURBQUc7QUFBSDtBQUFBO0FBQUEsSUFHVixrQkFBa0IsaURBQUc7QUFBSCxxQkFDRCxNQUFNLFFBQVEsR0FBRztBQUFBO0FBQUEsSUFFbEMsWUFBWSxpREFBRztBQUFIO0FBQUEsYUFFSCxNQUFNLFFBQVEsQ0FBQztBQUFBLGVBQ2IsTUFBTSxRQUFRLENBQUM7QUFBQSxpQkFDYixNQUFNLE9BQU87QUFBQTtBQUFBLElBRTFCLGtCQUFrQixpREFBRztBQUFILGdCQUNOLE1BQU0sUUFBUSxDQUFDLE9BQU8sTUFBTSxRQUFRLEVBQUU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUXBEO0FBQ0Y7QUFFTyxNQUFNLDhCQUE4QjtBQUVwQyxTQUFTLGNBQWMsT0FBMkI7QUFDdkQsUUFBTSxFQUFFLEtBQUssb0JBQW9CLGNBQWMsU0FBUyxXQUFXLGdCQUFnQixJQUFJO0FBQ3ZGLFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFFbkMsUUFBTSxDQUFDLGdCQUFnQixpQkFBaUIsSUFBSSwrQ0FBUSxDQUFrQixDQUFDLENBQUM7QUFFeEUsUUFBTSxDQUFDLGFBQWEsY0FBYyxJQUFJLCtDQUFRLENBQUMsS0FBSztBQUNwRCxRQUFNLENBQUMsU0FBUyxVQUFVLElBQUksK0NBQVEsQ0FBQyxLQUFLO0FBQzVDLFFBQU0sQ0FBQyxRQUFRLFNBQVMsSUFBSSwrQ0FBUSxDQUFDLHNEQUFLLENBQUMsUUFBUSw2QkFBNkIsS0FBSyxDQUFDO0FBQ3RGLFFBQU0sQ0FBQywyQkFBMkIsNEJBQTRCLElBQUksK0NBQVE7QUFBUixJQUNoRSxzREFBSyxDQUFDLFFBQVEsbUZBQWtDLEVBQUUsS0FBSztBQUFBLEVBQ3pEO0FBRUEsUUFBTSxjQUFjLG1EQUFZLENBQVM7QUFDekMsUUFBTSxzQkFBc0IsbURBQVksQ0FBVSxLQUFLO0FBQ3ZELFFBQU0seUJBQXlCLG1EQUFZLENBQWtCLENBQUMsQ0FBQztBQUUvRCxRQUFNLGlCQUFpQiw4Q0FBTyxDQUFDLE1BQU07QUFFbkMsUUFBSSxlQUFlLGVBQWUsS0FBSyxDQUFDLFdBQVcsT0FBTyxlQUFlLE9BQU8sT0FBTyxHQUFHO0FBQ3hGLGFBQU87QUFBQSxJQUNUO0FBR0EsUUFBSSw2QkFBNkIsbUJBQW1CLGlDQUFpQyxTQUFTLEdBQUc7QUFDL0YsYUFBTztBQUFBLElBQ1Q7QUFFQSxXQUFPO0FBQUEsRUFDVCxHQUFHLENBQUMsZ0JBQWdCLDJCQUEyQixhQUFhLG9CQUFvQixTQUFTLENBQUM7QUFFMUYsa0RBQVMsQ0FBQyxNQUFNO0FBQ2QsUUFBSSxDQUFDLGFBQWE7QUFDaEI7QUFBQSxJQUNGO0FBR0EsUUFBSSxDQUFDLG9CQUFvQixTQUFTO0FBQ2hDLDBCQUFvQixVQUFVO0FBQzlCO0FBQUEsSUFDRjtBQUVBLFFBQUksZUFBZSxPQUFPLENBQUMsRUFBRSxTQUFTLFdBQVcsTUFBTSxXQUFXLENBQUMsVUFBVSxFQUFFLFdBQVcsR0FBRztBQUMzRix3QkFBa0IsdUJBQXVCLE9BQU87QUFDaEQ7QUFBQSxJQUNGO0FBRUEsMkJBQXVCLFVBQVUsZ0JBQWdCLGNBQWM7QUFFL0QsUUFBSSxZQUFZLFNBQVM7QUFDdkIsbUJBQWEsWUFBWSxPQUFPO0FBQUEsSUFDbEM7QUFDQSxlQUFXLElBQUk7QUFDZixnQkFBWSxVQUFVLE9BQU8sV0FBVyxNQUFNO0FBQzVDLG1CQUFhLGVBQWUsT0FBTyxDQUFDLEVBQUUsUUFBUSxNQUFNLE9BQU8sQ0FBQztBQUc1RCxZQUFNLGtCQUFtQztBQUFBLFFBQ3ZDLGVBQWUsQ0FBQztBQUFBLFFBQ2hCLHlCQUF5QixDQUFDO0FBQUEsTUFDNUI7QUFFQSxxQkFBZSxRQUFRLENBQUMsRUFBRSxTQUFTLFlBQVksTUFBTSxNQUFNO0FBRXpELFlBQUksQ0FBQyxXQUFXLENBQUMsWUFBWTtBQUMzQiwwQkFBZ0IsY0FBYyxLQUFLLEtBQUs7QUFBQSxRQUMxQztBQUVBLFlBQUksV0FBVyxZQUFZO0FBQ3pCLDBCQUFnQix3QkFBd0IsS0FBSyxLQUFLO0FBQUEsUUFDcEQ7QUFBQSxNQUNGLENBQUM7QUFFRCw0REFBSyxDQUFDLElBQUksa0ZBQWlDLEVBQUUsS0FBSyxVQUFVLGVBQWUsQ0FBQztBQUM1RSxpQkFBVyxLQUFLO0FBQUEsSUFDbEIsR0FBRyxJQUFJO0FBRVAsV0FBTyxNQUFNO0FBQ1gsbUJBQWEsWUFBWSxPQUFPO0FBQUEsSUFDbEM7QUFBQSxFQUVGLEdBQUcsQ0FBQyxnQkFBZ0IsV0FBVyxDQUFDO0FBRWhDLGtEQUFTLENBQUMsTUFBTTtBQUNkLFdBQU8sTUFBTTtBQUNYLG1CQUFhLFlBQVksT0FBTztBQUNoQyxjQUFRO0FBQUEsSUFDVjtBQUFBLEVBQ0YsR0FBRyxDQUFDLE9BQU8sQ0FBQztBQUVaLHVEQUFRLENBQUMsWUFBWTtBQUNuQixlQUFXLElBQUk7QUFDZixVQUFNLHFCQUFxQixNQUFNLG1CQUFtQixzQkFBc0IsSUFBSSxRQUFRLFNBQVM7QUFDL0Ysc0JBQWtCLGtCQUFrQjtBQUVwQyxtQkFBZSxJQUFJO0FBQ25CLGVBQVcsS0FBSztBQUFBLEVBQ2xCLENBQUM7QUFFRCxrREFBUyxDQUFDLE1BQU07QUFDZCx3RUFBaUIsQ0FBQyxnREFBZ0Q7QUFBQSxNQUNoRSxXQUFXLElBQUk7QUFBQSxNQUNmLE1BQU07QUFBQSxJQUNSLENBQUM7QUFFRCxXQUFPLE1BQU07QUFDWCwwRUFBaUIsQ0FBQyxnREFBZ0Q7QUFBQSxRQUNoRSxXQUFXLElBQUk7QUFBQSxRQUNmLE1BQU07QUFBQSxNQUNSLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRixHQUFHLENBQUMsSUFBSSxHQUFHLENBQUM7QUFFWixRQUFNLGFBQWEsZUFBZSxPQUFPLENBQUMsRUFBRSxXQUFXLE1BQU0sQ0FBQyxVQUFVO0FBQ3hFLFFBQU0sb0JBQW9CLFdBQVcsT0FBTyxDQUFDLEVBQUUsUUFBUSxNQUFNLE9BQU87QUFFcEUsUUFBTSxlQUFlLGVBQWUsT0FBTyxDQUFDLEVBQUUsV0FBVyxNQUFNLFVBQVU7QUFDekUsUUFBTSxzQkFBc0IsYUFBYSxPQUFPLENBQUMsRUFBRSxRQUFRLE1BQU0sT0FBTztBQUV4RSxRQUFNLDhCQUE4QixrREFBVyxDQUFDLENBQUMsa0JBQTBEO0FBQ3pHLFdBQU87QUFBQSxNQUNMLE9BQU8sR0FBRyxjQUFjLFVBQVUsMEVBQTBCLENBQUMsY0FBYyxLQUFLO0FBQUEsTUFDaEYsT0FBTyxjQUFjO0FBQUEsSUFDdkI7QUFBQSxFQUNGLEdBQUcsQ0FBQyxDQUFDO0FBR0wsUUFBTSxtQkFBbUIsYUFBYSw4REFBaUIsQ0FBQyxVQUFVLElBQUksRUFBRSxnQkFBZ0IsS0FBSyxhQUFhLFNBQVM7QUFFbkgsTUFBSSxZQUFZLG1CQUFtQjtBQUFBLElBQ2pDLGVBQWUsT0FBTyxDQUFDLEVBQUUsUUFBUSxNQUFNLE9BQU87QUFBQSxJQUM5QztBQUFBLEVBQ0Y7QUFDQSxTQUNFLDJFQUFDLFNBQUksV0FBVyxPQUFPLFdBQ3JCLDJFQUFDLGlEQUFPLElBQUMsU0FBUywwQ0FDaEIsMkVBQUMsU0FBSSxXQUFXLE9BQU8sY0FDckI7QUFBQSxJQUFDLGdEQUFNO0FBQU47QUFBQSxNQUNDLGVBQVk7QUFBQSxNQUNaLE1BQUs7QUFBQSxNQUNMLFNBQVE7QUFBQSxNQUNSLFVBQVU7QUFBQSxNQUNWLFNBQVMsQ0FBQyxNQUFNO0FBQ2QsNEVBQWlCLENBQUMsa0RBQWtEO0FBQUEsVUFDbEUsV0FBVyxJQUFJO0FBQUEsUUFDakIsQ0FBQztBQUNELDBCQUFrQixDQUFDQSxvQkFBbUI7QUFDcEMsaUJBQU9BLGdCQUFlLElBQUksQ0FBQyxtQkFBbUI7QUFBQSxZQUM1QyxHQUFHO0FBQUE7QUFBQSxZQUVILFNBQVMsQ0FBQyxjQUFjO0FBQUEsVUFDMUIsRUFBRTtBQUFBLFFBQ0osQ0FBQztBQUVELDhEQUFLLENBQUMsT0FBTyxrRkFBaUM7QUFDOUMsOERBQUssQ0FBQyxPQUFPLG1GQUFrQztBQUMvQyxxQ0FBNkIsS0FBSztBQUFBLE1BQ3BDO0FBQUE7QUFBQSxFQUNGLENBQ0YsQ0FDRixHQUVBO0FBQUEsSUFBQyxrREFBUTtBQUFSO0FBQUEsTUFDQyxhQUFhO0FBQUEsTUFDYjtBQUFBLE1BQ0EsVUFBVSxNQUFNO0FBQ2QsOERBQUssQ0FBQyxJQUFJLDZCQUE2QixDQUFDLE1BQU07QUFDOUMsa0JBQVUsQ0FBQ0MsWUFBVyxDQUFDQSxPQUFNO0FBQzdCLDRFQUFpQixDQUFDLGlEQUFpRDtBQUFBLFVBQ2pFLFdBQVcsSUFBSTtBQUFBLFVBQ2YsUUFBUSxDQUFDLFNBQVMsU0FBUztBQUFBLFFBQzdCLENBQUM7QUFBQSxNQUNIO0FBQUEsTUFDQSxPQUNFLDJFQUFDLFNBQUksV0FBVyxPQUFPLHFCQUNwQixjQUNDLDBJQUNFLDJFQUFDLDhFQUFRLElBQUMsTUFBTSxFQUFFLFNBQVMsZ0RBQVcsRUFBRSxNQUFNLE9BQU8sR0FBRyxPQUFPLFdBQVcsV0FBVyxPQUFPLFVBQVUsR0FDdEcsMkVBQUMsaURBQU8sSUFBQyxTQUFRLHNLQUNmLDJFQUFDLDhDQUFJLElBQUMsTUFBSyxlQUFjLE1BQUssTUFBSyxXQUFXLE9BQU8sa0JBQWtCLENBQ3pFLENBQ0YsSUFFQSwyRUFBQyxpREFBTyxNQUFDLENBRWI7QUFBQTtBQUFBLElBR0YsMkVBQUMsU0FBSSxXQUFXLE9BQU8sTUFDckI7QUFBQSxNQUFDLCtDQUFLO0FBQUw7QUFBQSxRQUNDLFdBQVcsT0FBTztBQUFBLFFBQ2xCLGFBQVk7QUFBQTtBQUFBLE1BQ2I7QUFBQSxJQUVELEdBQ0E7QUFBQSxNQUFDLHFEQUFXO0FBQVg7QUFBQSxRQUNDLFdBQVc7QUFBQSxRQUNYLFNBQVMsV0FBVyxJQUFJLDJCQUEyQjtBQUFBLFFBQ25ELE9BQU8sa0JBQWtCLElBQUksMkJBQTJCO0FBQUEsUUFDeEQsbUJBQW1CO0FBQUEsUUFDbkIsZUFBZTtBQUFBLFFBQ2Ysa0JBQWlCO0FBQUEsUUFDakIsVUFBVSxDQUFDLE1BQU0sZUFBZTtBQUM5QixjQUFJLFdBQVcsV0FBVyxpQkFBaUI7QUFDekMsZ0ZBQWlCLENBQUMsa0RBQWtEO0FBQUEsY0FDbEUsV0FBVyxJQUFJO0FBQUEsY0FDZixNQUFNO0FBQUEsY0FDTixRQUFRO0FBQUEsWUFDVixDQUFDO0FBQUEsVUFDSDtBQUNBLGNBQUksV0FBVyxXQUFXLGdCQUFnQjtBQUN4QyxnRkFBaUIsQ0FBQyxrREFBa0Q7QUFBQSxjQUNsRSxXQUFXLElBQUk7QUFBQSxjQUNmLE1BQU07QUFBQSxjQUNOLFFBQVE7QUFBQSxZQUNWLENBQUM7QUFBQSxVQUNIO0FBQ0EsaUJBQU87QUFBQSxZQUNMLGVBQWUsSUFBSSxDQUFDLFdBQVc7QUFDN0Isa0JBQUksT0FBTyxZQUFZO0FBQ3JCLHVCQUFPO0FBQUEsY0FDVDtBQUNBLHFCQUFPLFVBQVUsS0FBSyxLQUFLLENBQUMsUUFBUSxJQUFJLFVBQVUsT0FBTyxLQUFLO0FBQzlELHFCQUFPO0FBQUEsWUFDVCxDQUFDO0FBQUEsVUFDSDtBQUFBLFFBQ0Y7QUFBQTtBQUFBLElBQ0YsR0FDQyxvQkFDQywwSUFDRTtBQUFBLE1BQUMsK0NBQUs7QUFBTDtBQUFBLFFBQ0MsV0FBVyxPQUFPO0FBQUEsUUFDbEIsYUFBYTtBQUFBO0FBQUEsTUFDZDtBQUFBLElBRUQsR0FDQTtBQUFBLE1BQUMscURBQVc7QUFBWDtBQUFBLFFBQ0MsV0FBVztBQUFBLFFBQ1gsU0FBUyxhQUFhLElBQUksMkJBQTJCO0FBQUEsUUFDckQsT0FBTyxvQkFBb0IsSUFBSSwyQkFBMkI7QUFBQSxRQUMxRCxtQkFBbUI7QUFBQSxRQUNuQixlQUFlO0FBQUEsUUFDZixrQkFBaUI7QUFBQSxRQUNqQixhQUFhO0FBQUEsUUFDYixVQUFVLENBQUMsTUFBTSxlQUFlO0FBQzlCLGNBQUksV0FBVyxXQUFXLGlCQUFpQjtBQUN6QyxnRkFBaUIsQ0FBQyxrREFBa0Q7QUFBQSxjQUNsRSxXQUFXLElBQUk7QUFBQSxjQUNmLE1BQU07QUFBQSxjQUNOLFFBQVE7QUFBQSxZQUNWLENBQUM7QUFBQSxVQUNIO0FBQ0EsY0FBSSxXQUFXLFdBQVcsZ0JBQWdCO0FBQ3hDLGdGQUFpQixDQUFDLGtEQUFrRDtBQUFBLGNBQ2xFLFdBQVcsSUFBSTtBQUFBLGNBQ2YsTUFBTTtBQUFBLGNBQ04sUUFBUTtBQUFBLFlBQ1YsQ0FBQztBQUFBLFVBQ0g7QUFDQTtBQUFBLFlBQ0UsZUFBZSxJQUFJLENBQUMsV0FBVztBQUM3QixrQkFBSSxDQUFDLE9BQU8sWUFBWTtBQUN0Qix1QkFBTztBQUFBLGNBQ1Q7QUFDQSxxQkFBTyxVQUFVLEtBQUssS0FBSyxDQUFDLFFBQVEsSUFBSSxVQUFVLE9BQU8sS0FBSztBQUM5RCxxQkFBTztBQUFBLFlBQ1QsQ0FBQztBQUFBLFVBQ0g7QUFBQSxRQUNGO0FBQUE7QUFBQSxJQUNGLENBQ0YsR0FFRCxtQkFBbUIsaUNBQWlDLFNBQVMsS0FDNUQsMkVBQUMsd0RBQWMsSUFBQyxXQUFXLE9BQU8sb0JBQ2hDO0FBQUEsTUFBQyxxREFBVztBQUFYO0FBQUEsUUFDQyxPQUFNO0FBQUEsUUFDTixTQUNFO0FBQUEsVUFBQyxpRUFBdUI7QUFBdkI7QUFBQSxZQUNDLFNBQVMsOERBQWM7QUFBZCxjQUNQO0FBQUEsWUFDRjtBQUFBO0FBQUEsUUFDRjtBQUFBO0FBQUEsTUFHRjtBQUFBLFFBQUMsc0RBQVk7QUFBWjtBQUFBLFVBQ0MsT0FBTztBQUFBLFVBQ1AsV0FBVztBQUFBLFVBQ1gsYUFBYTtBQUFBLFVBQ2IsVUFBVSxDQUFDLE1BQU07QUFDZixnRkFBaUIsQ0FBQywwREFBMEQ7QUFBQSxjQUMxRSxXQUFXLElBQUk7QUFBQSxjQUNmLFFBQVEsRUFBRSxjQUFjLFVBQVUsV0FBVztBQUFBLFlBQy9DLENBQUM7QUFDRCxrRUFBSyxDQUFDLElBQUksbUZBQWtDLEVBQUUsRUFBRSxjQUFjLE9BQU87QUFDckUseUNBQTZCLEVBQUUsY0FBYyxPQUFPO0FBQ3BELGdCQUFJLGlCQUFpQjtBQUNuQiw4QkFBZ0I7QUFBQSxZQUNsQjtBQUFBLFVBQ0Y7QUFBQTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQ0YsQ0FFSjtBQUFBLEVBQ0YsQ0FDRjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvY29tcG9uZW50cy9Mb2tpQ29udGV4dFVpLnRzeD80ODA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VBc3luYyB9IGZyb20gJ3JlYWN0LXVzZSc7XG5cbmltcG9ydCB7IEdyYWZhbmFUaGVtZTIsIExvZ1Jvd01vZGVsLCByZW5kZXJNYXJrZG93biwgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyByZXBvcnRJbnRlcmFjdGlvbiB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBDb2xsYXBzZSxcbiAgSWNvbixcbiAgSW5saW5lRmllbGQsXG4gIElubGluZUZpZWxkUm93LFxuICBJbmxpbmVTd2l0Y2gsXG4gIExhYmVsLFxuICBNdWx0aVNlbGVjdCxcbiAgUmVuZGVyVXNlckNvbnRlbnRBc0hUTUwsXG4gIFNwaW5uZXIsXG4gIFRvb2x0aXAsXG4gIHVzZVN0eWxlczIsXG59IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCBzdG9yZSBmcm9tICdhcHAvY29yZS9zdG9yZSc7XG5cbmltcG9ydCB7IFJhd1F1ZXJ5IH0gZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL1Jhd1F1ZXJ5JztcbmltcG9ydCB7XG4gIExvZ0NvbnRleHRQcm92aWRlcixcbiAgTE9LSV9MT0dfQ09OVEVYVF9QUkVTRVJWRURfTEFCRUxTLFxuICBQcmVzZXJ2ZWRMYWJlbHMsXG4gIFNIT1VMRF9JTkNMVURFX1BJUEVMSU5FX09QRVJBVElPTlMsXG59IGZyb20gJy4uL0xvZ0NvbnRleHRQcm92aWRlcic7XG5pbXBvcnQgeyBlc2NhcGVMYWJlbFZhbHVlSW5TZWxlY3RvciB9IGZyb20gJy4uL2xhbmd1YWdlVXRpbHMnO1xuaW1wb3J0IHsgaXNRdWVyeVdpdGhQYXJzZXIgfSBmcm9tICcuLi9xdWVyeVV0aWxzJztcbmltcG9ydCB7IGxva2lHcmFtbWFyIH0gZnJvbSAnLi4vc3ludGF4JztcbmltcG9ydCB7IENvbnRleHRGaWx0ZXIsIExva2lRdWVyeSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBMb2tpQ29udGV4dFVpUHJvcHMge1xuICBsb2dDb250ZXh0UHJvdmlkZXI6IExvZ0NvbnRleHRQcm92aWRlcjtcbiAgcm93OiBMb2dSb3dNb2RlbDtcbiAgdXBkYXRlRmlsdGVyOiAodmFsdWU6IENvbnRleHRGaWx0ZXJbXSkgPT4gdm9pZDtcbiAgb25DbG9zZTogKCkgPT4gdm9pZDtcbiAgb3JpZ1F1ZXJ5PzogTG9raVF1ZXJ5O1xuICBydW5Db250ZXh0UXVlcnk/OiAoKSA9PiB2b2lkO1xufVxuXG5mdW5jdGlvbiBnZXRTdHlsZXModGhlbWU6IEdyYWZhbmFUaGVtZTIpIHtcbiAgcmV0dXJuIHtcbiAgICBsYWJlbHM6IGNzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6ICR7dGhlbWUuc3BhY2luZygwLjUpfTtcbiAgICBgLFxuICAgIHdyYXBwZXI6IGNzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgZmxleDogMTtcbiAgICAgIGdhcDogJHt0aGVtZS5zcGFjaW5nKDAuNSl9O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGAsXG4gICAgdGV4dFdyYXBwZXI6IGNzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGAsXG4gICAgaGlkZGVuOiBjc3NgXG4gICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgYCxcbiAgICBsYWJlbDogY3NzYFxuICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgJjpmaXJzdC1vZi10eXBlIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogJHt0aGVtZS5zcGFjaW5nKDIpfTtcbiAgICAgIH1cbiAgICAgICY6bm90KDpmaXJzdC1vZi10eXBlKSB7XG4gICAgICAgIG1hcmdpbjogJHt0aGVtZS5zcGFjaW5nKDIpfSAwO1xuICAgICAgfVxuICAgIGAsXG4gICAgcmF3UXVlcnlDb250YWluZXI6IGNzc2BcbiAgICAgIHRleHQtYWxpZ246IHN0YXJ0O1xuICAgICAgbGluZS1icmVhazogYW55d2hlcmU7XG4gICAgICBtYXJnaW4tdG9wOiAtJHt0aGVtZS5zcGFjaW5nKDAuMjUpfTtcbiAgICAgIG1hcmdpbi1yaWdodDogJHt0aGVtZS5zcGFjaW5nKDYpfTtcbiAgICAgIG1pbi1oZWlnaHQ6ICR7dGhlbWUuc3BhY2luZyg0KX07XG4gICAgYCxcbiAgICB1aTogY3NzYFxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5zZWNvbmRhcnl9O1xuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDIpfTtcbiAgICBgLFxuICAgIHJhd1F1ZXJ5OiBjc3NgXG4gICAgICBkaXNwbGF5OiBpbmxpbmU7XG4gICAgYCxcbiAgICBxdWVyeURlc2NyaXB0aW9uOiBjc3NgXG4gICAgICBtYXJnaW4tbGVmdDogJHt0aGVtZS5zcGFjaW5nKDAuNSl9O1xuICAgIGAsXG4gICAgaWNvbkJ1dHRvbjogY3NzYFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICAgICAgcmlnaHQ6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgICB6LWluZGV4OiAke3RoZW1lLnpJbmRleC5uYXZiYXJGaXhlZH07XG4gICAgYCxcbiAgICBvcGVyYXRpb25zVG9nZ2xlOiBjc3NgXG4gICAgICBtYXJnaW46ICR7dGhlbWUuc3BhY2luZygxKX0gMCAke3RoZW1lLnNwYWNpbmcoLTEpfSAwO1xuICAgICAgJiA+IGRpdiB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgJiA+IGxhYmVsIHtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYCxcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IElTX0xPS0lfTE9HX0NPTlRFWFRfVUlfT1BFTiA9ICdpc0xvZ0NvbnRleHRRdWVyeVVpT3Blbic7XG5cbmV4cG9ydCBmdW5jdGlvbiBMb2tpQ29udGV4dFVpKHByb3BzOiBMb2tpQ29udGV4dFVpUHJvcHMpIHtcbiAgY29uc3QgeyByb3csIGxvZ0NvbnRleHRQcm92aWRlciwgdXBkYXRlRmlsdGVyLCBvbkNsb3NlLCBvcmlnUXVlcnksIHJ1bkNvbnRleHRRdWVyeSB9ID0gcHJvcHM7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcblxuICBjb25zdCBbY29udGV4dEZpbHRlcnMsIHNldENvbnRleHRGaWx0ZXJzXSA9IHVzZVN0YXRlPENvbnRleHRGaWx0ZXJbXT4oW10pO1xuXG4gIGNvbnN0IFtpbml0aWFsaXplZCwgc2V0SW5pdGlhbGl6ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZShzdG9yZS5nZXRCb29sKElTX0xPS0lfTE9HX0NPTlRFWFRfVUlfT1BFTiwgZmFsc2UpKTtcbiAgY29uc3QgW2luY2x1ZGVQaXBlbGluZU9wZXJhdGlvbnMsIHNldEluY2x1ZGVQaXBlbGluZU9wZXJhdGlvbnNdID0gdXNlU3RhdGUoXG4gICAgc3RvcmUuZ2V0Qm9vbChTSE9VTERfSU5DTFVERV9QSVBFTElORV9PUEVSQVRJT05TLCBmYWxzZSlcbiAgKTtcblxuICBjb25zdCB0aW1lckhhbmRsZSA9IFJlYWN0LnVzZVJlZjxudW1iZXI+KCk7XG4gIGNvbnN0IHByZXZpb3VzSW5pdGlhbGl6ZWQgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBwcmV2aW91c0NvbnRleHRGaWx0ZXJzID0gUmVhY3QudXNlUmVmPENvbnRleHRGaWx0ZXJbXT4oW10pO1xuXG4gIGNvbnN0IGlzSW5pdGlhbFN0YXRlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgLy8gSW5pdGlhbCBxdWVyeSBoYXMgYWxsIHJlZ3VsYXIgbGFiZWxzIGVuYWJsZWQgYW5kIGFsbCBwYXJzZWQgbGFiZWxzIGRpc2FibGVkXG4gICAgaWYgKGluaXRpYWxpemVkICYmIGNvbnRleHRGaWx0ZXJzLnNvbWUoKGZpbHRlcikgPT4gZmlsdGVyLmZyb21QYXJzZXIgPT09IGZpbHRlci5lbmFibGVkKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGlmIHdlIGluY2x1ZGUgcGlwZWxpbmUgb3BlcmF0aW9ucywgd2UgYWxzbyB3YW50IHRvIGVuYWJsZSB0aGUgcmV2ZXJ0IGJ1dHRvblxuICAgIGlmIChpbmNsdWRlUGlwZWxpbmVPcGVyYXRpb25zICYmIGxvZ0NvbnRleHRQcm92aWRlci5xdWVyeUNvbnRhaW5zVmFsaWRQaXBlbGluZVN0YWdlcyhvcmlnUXVlcnkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0sIFtjb250ZXh0RmlsdGVycywgaW5jbHVkZVBpcGVsaW5lT3BlcmF0aW9ucywgaW5pdGlhbGl6ZWQsIGxvZ0NvbnRleHRQcm92aWRlciwgb3JpZ1F1ZXJ5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWluaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gZG9uJ3QgdHJpZ2dlciBpZiB3ZSBpbml0aWFsaXplZCwgdGhpcyB3aWxsIGJlIHRoZSBzYW1lIHF1ZXJ5IGFueXdheXMuXG4gICAgaWYgKCFwcmV2aW91c0luaXRpYWxpemVkLmN1cnJlbnQpIHtcbiAgICAgIHByZXZpb3VzSW5pdGlhbGl6ZWQuY3VycmVudCA9IGluaXRpYWxpemVkO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjb250ZXh0RmlsdGVycy5maWx0ZXIoKHsgZW5hYmxlZCwgZnJvbVBhcnNlciB9KSA9PiBlbmFibGVkICYmICFmcm9tUGFyc2VyKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHNldENvbnRleHRGaWx0ZXJzKHByZXZpb3VzQ29udGV4dEZpbHRlcnMuY3VycmVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcHJldmlvdXNDb250ZXh0RmlsdGVycy5jdXJyZW50ID0gc3RydWN0dXJlZENsb25lKGNvbnRleHRGaWx0ZXJzKTtcblxuICAgIGlmICh0aW1lckhhbmRsZS5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJIYW5kbGUuY3VycmVudCk7XG4gICAgfVxuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgdGltZXJIYW5kbGUuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHVwZGF0ZUZpbHRlcihjb250ZXh0RmlsdGVycy5maWx0ZXIoKHsgZW5hYmxlZCB9KSA9PiBlbmFibGVkKSk7XG4gICAgICAvLyBXZSBhcmUgc3RvcmluZyB0aGUgcmVtb3ZlZCBsYWJlbHMgYW5kIHNlbGVjdGVkIGV4dHJhY3RlZCBsYWJlbHMgaW4gbG9jYWwgc3RvcmFnZSBzbyB3ZSBjYW5cbiAgICAgIC8vIHByZXNlbGVjdCB0aGUgbGFiZWxzIGluIHRoZSBVSSBpbiB0aGUgbmV4dCBsb2cgY29udGV4dCB2aWV3LlxuICAgICAgY29uc3QgcHJlc2VydmVkTGFiZWxzOiBQcmVzZXJ2ZWRMYWJlbHMgPSB7XG4gICAgICAgIHJlbW92ZWRMYWJlbHM6IFtdLFxuICAgICAgICBzZWxlY3RlZEV4dHJhY3RlZExhYmVsczogW10sXG4gICAgICB9O1xuXG4gICAgICBjb250ZXh0RmlsdGVycy5mb3JFYWNoKCh7IGVuYWJsZWQsIGZyb21QYXJzZXIsIGxhYmVsIH0pID0+IHtcbiAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHN0b3JlIHJlYWwgbGFiZWxzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhlIGluaXRpYWwgcXVlcnlcbiAgICAgICAgaWYgKCFlbmFibGVkICYmICFmcm9tUGFyc2VyKSB7XG4gICAgICAgICAgcHJlc2VydmVkTGFiZWxzLnJlbW92ZWRMYWJlbHMucHVzaChsYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3IgZXh0cmFjdGVkIGxhYmVscyB0aGF0IHdlcmUgYWRkZWQgdG8gdGhlIGluaXRpYWwgcXVlcnlcbiAgICAgICAgaWYgKGVuYWJsZWQgJiYgZnJvbVBhcnNlcikge1xuICAgICAgICAgIHByZXNlcnZlZExhYmVscy5zZWxlY3RlZEV4dHJhY3RlZExhYmVscy5wdXNoKGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHN0b3JlLnNldChMT0tJX0xPR19DT05URVhUX1BSRVNFUlZFRF9MQUJFTFMsIEpTT04uc3RyaW5naWZ5KHByZXNlcnZlZExhYmVscykpO1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfSwgMTUwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySGFuZGxlLmN1cnJlbnQpO1xuICAgIH07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbY29udGV4dEZpbHRlcnMsIGluaXRpYWxpemVkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySGFuZGxlLmN1cnJlbnQpO1xuICAgICAgb25DbG9zZSgpO1xuICAgIH07XG4gIH0sIFtvbkNsb3NlXSk7XG5cbiAgdXNlQXN5bmMoYXN5bmMgKCkgPT4ge1xuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgY29uc3QgaW5pdENvbnRleHRGaWx0ZXJzID0gYXdhaXQgbG9nQ29udGV4dFByb3ZpZGVyLmdldEluaXRDb250ZXh0RmlsdGVycyhyb3cubGFiZWxzLCBvcmlnUXVlcnkpO1xuICAgIHNldENvbnRleHRGaWx0ZXJzKGluaXRDb250ZXh0RmlsdGVycyk7XG5cbiAgICBzZXRJbml0aWFsaXplZCh0cnVlKTtcbiAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgfSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9leHBsb3JlX2xvZ3NfbG9raV9sb2dfY29udGV4dF9sb2FkZWQnLCB7XG4gICAgICBsb2dSb3dVaWQ6IHJvdy51aWQsXG4gICAgICB0eXBlOiAnbG9hZCcsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfZXhwbG9yZV9sb2dzX2xva2lfbG9nX2NvbnRleHRfbG9hZGVkJywge1xuICAgICAgICBsb2dSb3dVaWQ6IHJvdy51aWQsXG4gICAgICAgIHR5cGU6ICd1bmxvYWQnLFxuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW3Jvdy51aWRdKTtcblxuICBjb25zdCByZWFsTGFiZWxzID0gY29udGV4dEZpbHRlcnMuZmlsdGVyKCh7IGZyb21QYXJzZXIgfSkgPT4gIWZyb21QYXJzZXIpO1xuICBjb25zdCByZWFsTGFiZWxzRW5hYmxlZCA9IHJlYWxMYWJlbHMuZmlsdGVyKCh7IGVuYWJsZWQgfSkgPT4gZW5hYmxlZCk7XG5cbiAgY29uc3QgcGFyc2VkTGFiZWxzID0gY29udGV4dEZpbHRlcnMuZmlsdGVyKCh7IGZyb21QYXJzZXIgfSkgPT4gZnJvbVBhcnNlcik7XG4gIGNvbnN0IHBhcnNlZExhYmVsc0VuYWJsZWQgPSBwYXJzZWRMYWJlbHMuZmlsdGVyKCh7IGVuYWJsZWQgfSkgPT4gZW5hYmxlZCk7XG5cbiAgY29uc3QgY29udGV4dEZpbHRlclRvU2VsZWN0RmlsdGVyID0gdXNlQ2FsbGJhY2soKGNvbnRleHRGaWx0ZXI6IENvbnRleHRGaWx0ZXIpOiBTZWxlY3RhYmxlVmFsdWU8c3RyaW5nPiA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhYmVsOiBgJHtjb250ZXh0RmlsdGVyLmxhYmVsfT1cIiR7ZXNjYXBlTGFiZWxWYWx1ZUluU2VsZWN0b3IoY29udGV4dEZpbHRlci52YWx1ZSl9XCJgLFxuICAgICAgdmFsdWU6IGNvbnRleHRGaWx0ZXIubGFiZWwsXG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIC8vIEN1cnJlbnRseSB3ZSBzdXBwb3J0IGFkZGluZyBvZiBwYXJzZXIgYW5kIHNob3dpbmcgcGFyc2VkIGxhYmVscyBvbmx5IGlmIHRoZXJlIGlzIDEgcGFyc2VyXG4gIGNvbnN0IHNob3dQYXJzZWRMYWJlbHMgPSBvcmlnUXVlcnkgJiYgaXNRdWVyeVdpdGhQYXJzZXIob3JpZ1F1ZXJ5LmV4cHIpLnBhcnNlckNvdW50ID09PSAxICYmIHBhcnNlZExhYmVscy5sZW5ndGggPiAwO1xuXG4gIGxldCBxdWVyeUV4cHIgPSBsb2dDb250ZXh0UHJvdmlkZXIucHJlcGFyZUV4cHJlc3Npb24oXG4gICAgY29udGV4dEZpbHRlcnMuZmlsdGVyKCh7IGVuYWJsZWQgfSkgPT4gZW5hYmxlZCksXG4gICAgb3JpZ1F1ZXJ5XG4gICk7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy53cmFwcGVyfT5cbiAgICAgIDxUb29sdGlwIGNvbnRlbnQ9eydSZXZlcnQgdG8gaW5pdGlhbCBsb2cgY29udGV4dCBxdWVyeS4nfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5pY29uQnV0dG9ufT5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBkYXRhLXRlc3RpZD1cInJldmVydC1idXR0b25cIlxuICAgICAgICAgICAgaWNvbj1cImhpc3RvcnktYWx0XCJcbiAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgZGlzYWJsZWQ9e2lzSW5pdGlhbFN0YXRlfVxuICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfZXhwbG9yZV9sb2dzX2xva2lfbG9nX2NvbnRleHRfcmV2ZXJ0ZWQnLCB7XG4gICAgICAgICAgICAgICAgbG9nUm93VWlkOiByb3cudWlkLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgc2V0Q29udGV4dEZpbHRlcnMoKGNvbnRleHRGaWx0ZXJzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHRGaWx0ZXJzLm1hcCgoY29udGV4dEZpbHRlcikgPT4gKHtcbiAgICAgICAgICAgICAgICAgIC4uLmNvbnRleHRGaWx0ZXIsXG4gICAgICAgICAgICAgICAgICAvLyBGb3IgcmV2ZXJ0IHRvIGluaXRpYWwgcXVlcnkgd2UgbmVlZCB0byBlbmFibGUgYWxsIGxhYmVscyBhbmQgZGlzYWJsZSBhbGwgcGFyc2VkIGxhYmVsc1xuICAgICAgICAgICAgICAgICAgZW5hYmxlZDogIWNvbnRleHRGaWx0ZXIuZnJvbVBhcnNlcixcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvLyBXZSBhcmUgcmVtb3ZpbmcgdGhlIHByZXNlcnZlZCBsYWJlbHMgZnJvbSBsb2NhbCBzdG9yYWdlIHNvIHdlIGNhbiBwcmVzZWxlY3QgdGhlIGxhYmVscyBpbiB0aGUgVUlcbiAgICAgICAgICAgICAgc3RvcmUuZGVsZXRlKExPS0lfTE9HX0NPTlRFWFRfUFJFU0VSVkVEX0xBQkVMUyk7XG4gICAgICAgICAgICAgIHN0b3JlLmRlbGV0ZShTSE9VTERfSU5DTFVERV9QSVBFTElORV9PUEVSQVRJT05TKTtcbiAgICAgICAgICAgICAgc2V0SW5jbHVkZVBpcGVsaW5lT3BlcmF0aW9ucyhmYWxzZSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Ub29sdGlwPlxuXG4gICAgICA8Q29sbGFwc2VcbiAgICAgICAgY29sbGFwc2libGU9e3RydWV9XG4gICAgICAgIGlzT3Blbj17aXNPcGVufVxuICAgICAgICBvblRvZ2dsZT17KCkgPT4ge1xuICAgICAgICAgIHN0b3JlLnNldChJU19MT0tJX0xPR19DT05URVhUX1VJX09QRU4sICFpc09wZW4pO1xuICAgICAgICAgIHNldElzT3BlbigoaXNPcGVuKSA9PiAhaXNPcGVuKTtcbiAgICAgICAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9leHBsb3JlX2xvZ3NfbG9raV9sb2dfY29udGV4dF90b2dnbGVkJywge1xuICAgICAgICAgICAgbG9nUm93VWlkOiByb3cudWlkLFxuICAgICAgICAgICAgYWN0aW9uOiAhaXNPcGVuID8gJ29wZW4nIDogJ2Nsb3NlJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfX1cbiAgICAgICAgbGFiZWw9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucmF3UXVlcnlDb250YWluZXJ9PlxuICAgICAgICAgICAge2luaXRpYWxpemVkID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxSYXdRdWVyeSBsYW5nPXt7IGdyYW1tYXI6IGxva2lHcmFtbWFyLCBuYW1lOiAnbG9raScgfX0gcXVlcnk9e3F1ZXJ5RXhwcn0gY2xhc3NOYW1lPXtzdHlsZXMucmF3UXVlcnl9IC8+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgY29udGVudD1cIlRoZSBpbml0aWFsIGxvZyBjb250ZXh0IHF1ZXJ5IGlzIGNyZWF0ZWQgZnJvbSBhbGwgbGFiZWxzIGRlZmluaW5nIHRoZSBzdHJlYW0gZm9yIHRoZSBzZWxlY3RlZCBsb2cgbGluZS4gVXNlIHRoZSBlZGl0b3IgYmVsb3cgdG8gY3VzdG9taXplIHRoZSBsb2cgY29udGV4dCBxdWVyeS5cIj5cbiAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJpbmZvLWNpcmNsZVwiIHNpemU9XCJzbVwiIGNsYXNzTmFtZT17c3R5bGVzLnF1ZXJ5RGVzY3JpcHRpb259IC8+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxTcGlubmVyIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudWl9PlxuICAgICAgICAgIDxMYWJlbFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMubGFiZWx9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj1cIlRoZSBpbml0aWFsIGxvZyBjb250ZXh0IHF1ZXJ5IGlzIGNyZWF0ZWQgZnJvbSBhbGwgbGFiZWxzIGRlZmluaW5nIHRoZSBzdHJlYW0gZm9yIHRoZSBzZWxlY3RlZCBsb2cgbGluZS4gWW91IGNhbiBicm9hZGVuIHlvdXIgc2VhcmNoIGJ5IHJlbW92aW5nIG9uZSBvciBtb3JlIG9mIHRoZSBsYWJlbCBmaWx0ZXJzLlwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgV2lkZW4gdGhlIHNlYXJjaFxuICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgPE11bHRpU2VsZWN0XG4gICAgICAgICAgICBpc0xvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICBvcHRpb25zPXtyZWFsTGFiZWxzLm1hcChjb250ZXh0RmlsdGVyVG9TZWxlY3RGaWx0ZXIpfVxuICAgICAgICAgICAgdmFsdWU9e3JlYWxMYWJlbHNFbmFibGVkLm1hcChjb250ZXh0RmlsdGVyVG9TZWxlY3RGaWx0ZXIpfVxuICAgICAgICAgICAgY2xvc2VNZW51T25TZWxlY3Q9e3RydWV9XG4gICAgICAgICAgICBtYXhNZW51SGVpZ2h0PXsyMDB9XG4gICAgICAgICAgICBub09wdGlvbnNNZXNzYWdlPVwiTm8gZnVydGhlciBsYWJlbHMgYXZhaWxhYmxlXCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoa2V5cywgYWN0aW9uTWV0YSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoYWN0aW9uTWV0YS5hY3Rpb24gPT09ICdzZWxlY3Qtb3B0aW9uJykge1xuICAgICAgICAgICAgICAgIHJlcG9ydEludGVyYWN0aW9uKCdncmFmYW5hX2V4cGxvcmVfbG9nc19sb2tpX2xvZ19jb250ZXh0X2ZpbHRlcmVkJywge1xuICAgICAgICAgICAgICAgICAgbG9nUm93VWlkOiByb3cudWlkLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGFjdGlvbk1ldGEuYWN0aW9uID09PSAncmVtb3ZlLXZhbHVlJykge1xuICAgICAgICAgICAgICAgIHJlcG9ydEludGVyYWN0aW9uKCdncmFmYW5hX2V4cGxvcmVfbG9nc19sb2tpX2xvZ19jb250ZXh0X2ZpbHRlcmVkJywge1xuICAgICAgICAgICAgICAgICAgbG9nUm93VWlkOiByb3cudWlkLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3JlbW92ZScsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHNldENvbnRleHRGaWx0ZXJzKFxuICAgICAgICAgICAgICAgIGNvbnRleHRGaWx0ZXJzLm1hcCgoZmlsdGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmZyb21QYXJzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGZpbHRlci5lbmFibGVkID0ga2V5cy5zb21lKChrZXkpID0+IGtleS52YWx1ZSA9PT0gZmlsdGVyLmxhYmVsKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7c2hvd1BhcnNlZExhYmVscyAmJiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8TGFiZWxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5sYWJlbH1cbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17YEJ5IHVzaW5nIGEgcGFyc2VyIGluIHlvdXIgb3JpZ2luYWwgcXVlcnksIHlvdSBjYW4gdXNlIGZpbHRlcnMgZm9yIGV4dHJhY3RlZCBsYWJlbHMuIFJlZmluZSB5b3VyIHNlYXJjaCBieSBhcHBseWluZyBleHRyYWN0ZWQgbGFiZWxzIGNyZWF0ZWQgZnJvbSB0aGUgc2VsZWN0ZWQgbG9nIGxpbmUuYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFJlZmluZSB0aGUgc2VhcmNoXG4gICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgIDxNdWx0aVNlbGVjdFxuICAgICAgICAgICAgICAgIGlzTG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICAgICAgICBvcHRpb25zPXtwYXJzZWRMYWJlbHMubWFwKGNvbnRleHRGaWx0ZXJUb1NlbGVjdEZpbHRlcil9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3BhcnNlZExhYmVsc0VuYWJsZWQubWFwKGNvbnRleHRGaWx0ZXJUb1NlbGVjdEZpbHRlcil9XG4gICAgICAgICAgICAgICAgY2xvc2VNZW51T25TZWxlY3Q9e3RydWV9XG4gICAgICAgICAgICAgICAgbWF4TWVudUhlaWdodD17MjAwfVxuICAgICAgICAgICAgICAgIG5vT3B0aW9uc01lc3NhZ2U9XCJObyBmdXJ0aGVyIGxhYmVscyBhdmFpbGFibGVcIlxuICAgICAgICAgICAgICAgIGlzQ2xlYXJhYmxlPXt0cnVlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoa2V5cywgYWN0aW9uTWV0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbk1ldGEuYWN0aW9uID09PSAnc2VsZWN0LW9wdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfZXhwbG9yZV9sb2dzX2xva2lfbG9nX2NvbnRleHRfZmlsdGVyZWQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbG9nUm93VWlkOiByb3cudWlkLFxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwYXJzZWRfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbk1ldGEuYWN0aW9uID09PSAncmVtb3ZlLXZhbHVlJykge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9leHBsb3JlX2xvZ3NfbG9raV9sb2dfY29udGV4dF9maWx0ZXJlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBsb2dSb3dVaWQ6IHJvdy51aWQsXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BhcnNlZF9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBzZXRDb250ZXh0RmlsdGVycyhcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dEZpbHRlcnMubWFwKChmaWx0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5mcm9tUGFyc2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIuZW5hYmxlZCA9IGtleXMuc29tZSgoa2V5KSA9PiBrZXkudmFsdWUgPT09IGZpbHRlci5sYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2xvZ0NvbnRleHRQcm92aWRlci5xdWVyeUNvbnRhaW5zVmFsaWRQaXBlbGluZVN0YWdlcyhvcmlnUXVlcnkpICYmIChcbiAgICAgICAgICAgIDxJbmxpbmVGaWVsZFJvdyBjbGFzc05hbWU9e3N0eWxlcy5vcGVyYXRpb25zVG9nZ2xlfT5cbiAgICAgICAgICAgICAgPElubGluZUZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJJbmNsdWRlIExvZ1FMIHBpcGVsaW5lIG9wZXJhdGlvbnNcIlxuICAgICAgICAgICAgICAgIHRvb2x0aXA9e1xuICAgICAgICAgICAgICAgICAgPFJlbmRlclVzZXJDb250ZW50QXNIVE1MXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3JlbmRlck1hcmtkb3duKFxuICAgICAgICAgICAgICAgICAgICAgIFwiVGhpcyB3aWxsIGluY2x1ZGUgTG9nUUwgb3BlcmF0aW9ucyBzdWNoIGFzIGBsaW5lX2Zvcm1hdGAgb3IgYGxhYmVsX2Zvcm1hdGAuIEl0IHdvbid0IGluY2x1ZGUgbGluZSBvciBsYWJlbCBmaWx0ZXIgb3BlcmF0aW9ucy5cIlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SW5saW5lU3dpdGNoXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17aW5jbHVkZVBpcGVsaW5lT3BlcmF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHNob3dMYWJlbD17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50PXt0cnVlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydEludGVyYWN0aW9uKCdncmFmYW5hX2V4cGxvcmVfbG9nc19sb2tpX2xvZ19jb250ZXh0X3BpcGVsaW5lX3RvZ2dsZWQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbG9nUm93VWlkOiByb3cudWlkLFxuICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQgPyAnZW5hYmxlJyA6ICdkaXNhYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlLnNldChTSE9VTERfSU5DTFVERV9QSVBFTElORV9PUEVSQVRJT05TLCBlLmN1cnJlbnRUYXJnZXQuY2hlY2tlZCk7XG4gICAgICAgICAgICAgICAgICAgIHNldEluY2x1ZGVQaXBlbGluZU9wZXJhdGlvbnMoZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocnVuQ29udGV4dFF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgcnVuQ29udGV4dFF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICAgICAgIDwvSW5saW5lRmllbGRSb3c+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0NvbGxhcHNlPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbImNvbnRleHRGaWx0ZXJzIiwiaXNPcGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/LokiContextUi.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/LokiLabelBrowser.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiLabelBrowser: () => (/* binding */ LokiLabelBrowser),\n/* harmony export */   UnthemedLokiLabelBrowser: () => (/* binding */ UnthemedLokiLabelBrowser),\n/* harmony export */   buildSelector: () => (/* binding */ buildSelector),\n/* harmony export */   facetLabels: () => (/* binding */ facetLabels)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_window__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/react-window-virtual-54bb5b53bf/0/cache/react-window-npm-1.8.8-1f85a45c48-a19f43b901.zip/node_modules/react-window/dist/index.esm.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/LoadingPlaceholder/LoadingPlaceholder.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/utils/fuzzy.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/Label.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/BrowserLabel/Label.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Layout/Layout.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _languageUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/languageUtils.ts\");\n\n\n\n\n\n\n\n\nconst MAX_LABEL_COUNT = 1e3;\nconst MAX_VALUE_COUNT = 1e4;\nconst MAX_AUTO_SELECT = 4;\nconst EMPTY_SELECTOR = \"{}\";\nfunction buildSelector(labels) {\n  const selectedLabels = [];\n  for (const label of labels) {\n    if (label.selected && label.values && label.values.length > 0) {\n      const selectedValues = label.values.filter((value) => value.selected).map((value) => value.name);\n      if (selectedValues.length > 1) {\n        selectedLabels.push(`${label.name}=~\"${selectedValues.map(_languageUtils__WEBPACK_IMPORTED_MODULE_3__.escapeLabelValueInRegexSelector).join(\"|\")}\"`);\n      } else if (selectedValues.length === 1) {\n        selectedLabels.push(`${label.name}=\"${(0,_languageUtils__WEBPACK_IMPORTED_MODULE_3__.escapeLabelValueInExactSelector)(selectedValues[0])}\"`);\n      }\n    }\n  }\n  return [\"{\", selectedLabels.join(\",\"), \"}\"].join(\"\");\n}\nfunction facetLabels(labels, possibleLabels, lastFacetted) {\n  return labels.map((label) => {\n    const possibleValues = possibleLabels[label.name];\n    if (possibleValues) {\n      let existingValues;\n      if (label.name === lastFacetted && label.values) {\n        existingValues = label.values;\n      } else {\n        const selectedValues = new Set(\n          label.values?.filter((value) => value.selected).map((value) => value.name) || []\n        );\n        existingValues = possibleValues.map((value) => ({ name: value, selected: selectedValues.has(value) }));\n      }\n      return { ...label, loading: false, values: existingValues, facets: existingValues.length };\n    }\n    return { ...label, loading: false, hidden: !possibleValues, values: void 0, facets: 0 };\n  });\n}\nconst getStyles = (theme) => ({\n  wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    background-color: ${theme.colors.background.secondary};\n    padding: ${theme.spacing(2)};\n    width: 100%;\n  `,\n  list: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-top: ${theme.spacing(1)};\n    display: flex;\n    flex-wrap: wrap;\n    max-height: 200px;\n    overflow: auto;\n  `,\n  section: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    & + & {\n      margin: ${theme.spacing(2, 0)};\n    }\n    position: relative;\n  `,\n  selector: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    font-family: ${theme.typography.fontFamilyMonospace};\n    margin-bottom: ${theme.spacing(1)};\n  `,\n  status: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-bottom: ${theme.spacing(1)};\n    color: ${theme.colors.text.secondary};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    transition: opacity 100ms linear;\n    opacity: 0;\n  `,\n  statusShowing: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    opacity: 1;\n  `,\n  error: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    color: ${theme.colors.error.main};\n  `,\n  valueList: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-right: ${theme.spacing(1)};\n    resize: horizontal;\n  `,\n  valueListWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    border-left: 1px solid ${theme.colors.border.medium};\n    margin: ${theme.spacing(1, 0)};\n    padding: ${theme.spacing(1, 0, 1, 1)};\n  `,\n  valueListArea: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: ${theme.spacing(1)};\n  `,\n  valueTitle: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-left: -${theme.spacing(0.5)};\n    margin-bottom: ${theme.spacing(1)};\n  `,\n  validationStatus: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    padding: ${theme.spacing(0.5)};\n    margin-bottom: ${theme.spacing(1)};\n    color: ${theme.colors.text.maxContrast};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  `\n});\nclass UnthemedLokiLabelBrowser extends (react__WEBPACK_IMPORTED_MODULE_2___default().Component) {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      labels: [],\n      searchTerm: \"\",\n      status: \"Ready\",\n      error: \"\",\n      validationStatus: \"\"\n    };\n    this.onChangeSearch = (event) => {\n      this.setState({ searchTerm: event.target.value });\n    };\n    this.onClickRunLogsQuery = () => {\n      (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_4__.reportInteraction)(\"grafana_loki_label_browser_closed\", {\n        app: this.props.app,\n        closeType: \"showLogsButton\"\n      });\n      const selector = buildSelector(this.state.labels);\n      this.props.onChange(selector);\n    };\n    this.onClickRunMetricsQuery = () => {\n      (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_4__.reportInteraction)(\"grafana_loki_label_browser_closed\", {\n        app: this.props.app,\n        closeType: \"showLogsRateButton\"\n      });\n      const selector = buildSelector(this.state.labels);\n      const query = `rate(${selector}[$__interval])`;\n      this.props.onChange(query);\n    };\n    this.onClickClear = () => {\n      this.setState((state) => {\n        const labels = state.labels.map((label) => ({\n          ...label,\n          values: void 0,\n          selected: false,\n          loading: false,\n          hidden: false,\n          facets: void 0\n        }));\n        return { labels, searchTerm: \"\", status: \"\", error: \"\", validationStatus: \"\" };\n      });\n      this.props.deleteLastUsedLabels();\n    };\n    this.onClickLabel = (name, value, event) => {\n      const label = this.state.labels.find((l) => l.name === name);\n      if (!label) {\n        return;\n      }\n      const selected = !label.selected;\n      let nextValue = { selected };\n      if (label.values && !selected) {\n        const values = label.values.map((value2) => ({ ...value2, selected: false }));\n        nextValue = { ...nextValue, facets: 0, values };\n      }\n      this.setState({ searchTerm: \"\" });\n      this.updateLabelState(name, nextValue, \"\", () => this.doFacettingForLabel(name));\n    };\n    this.onClickValue = (name, value, event) => {\n      const label = this.state.labels.find((l) => l.name === name);\n      if (!label || !label.values) {\n        return;\n      }\n      this.setState({ searchTerm: \"\" });\n      const values = label.values.map((v) => ({ ...v, selected: v.name === value ? !v.selected : v.selected }));\n      this.updateLabelState(name, { values }, \"\", () => this.doFacetting(name));\n    };\n    this.onClickValidate = () => {\n      const selector = buildSelector(this.state.labels);\n      this.validateSelector(selector);\n    };\n    this.doFacetting = (lastFacetted) => {\n      const selector = buildSelector(this.state.labels);\n      if (selector === EMPTY_SELECTOR) {\n        const labels = this.state.labels.map((label) => {\n          return { ...label, facets: 0, values: void 0, hidden: false };\n        });\n        this.setState({ labels }, () => {\n          this.state.labels.forEach((label) => label.selected && this.fetchValues(label.name, selector));\n        });\n      } else {\n        this.fetchSeries(selector, lastFacetted);\n      }\n    };\n  }\n  updateLabelState(name, updatedFields, status = \"\", cb) {\n    this.setState((state) => {\n      const labels = state.labels.map((label) => {\n        if (label.name === name) {\n          return { ...label, ...updatedFields };\n        }\n        return label;\n      });\n      const error = status ? \"\" : state.error;\n      return { labels, status, error, validationStatus: \"\" };\n    }, cb);\n  }\n  componentDidMount() {\n    const { languageProvider, autoSelect = MAX_AUTO_SELECT, lastUsedLabels } = this.props;\n    if (languageProvider) {\n      const selectedLabels = lastUsedLabels;\n      languageProvider.start().then(() => {\n        let rawLabels = languageProvider.getLabelKeys();\n        if (rawLabels.length > MAX_LABEL_COUNT) {\n          const error = `Too many labels found (showing only ${MAX_LABEL_COUNT} of ${rawLabels.length})`;\n          rawLabels = rawLabels.slice(0, MAX_LABEL_COUNT);\n          this.setState({ error });\n        }\n        const labels = rawLabels.map((label, i, arr) => ({\n          name: label,\n          selected: arr.length <= autoSelect && selectedLabels.length === 0 || selectedLabels.includes(label),\n          loading: false\n        }));\n        this.setState({ labels }, () => {\n          this.state.labels.forEach((label) => {\n            if (label.selected) {\n              this.fetchValues(label.name, EMPTY_SELECTOR);\n            }\n          });\n        });\n      });\n    }\n  }\n  doFacettingForLabel(name) {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label) {\n      return;\n    }\n    const selectedLabels = this.state.labels.filter((label2) => label2.selected).map((label2) => label2.name);\n    this.props.storeLastUsedLabels(selectedLabels);\n    if (label.selected) {\n      if (!label.values) {\n        this.fetchValues(name, buildSelector(this.state.labels));\n      }\n    } else {\n      this.doFacetting();\n    }\n  }\n  async fetchValues(name, selector) {\n    const { languageProvider } = this.props;\n    this.updateLabelState(name, { loading: true }, `Fetching values for ${name}`);\n    try {\n      let rawValues = await languageProvider.getLabelValues(name);\n      if (selector !== buildSelector(this.state.labels)) {\n        this.updateLabelState(name, { loading: false }, \"\");\n        return;\n      }\n      if (rawValues.length > MAX_VALUE_COUNT) {\n        const error = `Too many values for ${name} (showing only ${MAX_VALUE_COUNT} of ${rawValues.length})`;\n        rawValues = rawValues.slice(0, MAX_VALUE_COUNT);\n        this.setState({ error });\n      }\n      const values = rawValues.map((value) => ({ name: value }));\n      this.updateLabelState(name, { values, loading: false });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  async fetchSeries(selector, lastFacetted) {\n    const { languageProvider } = this.props;\n    if (lastFacetted) {\n      this.updateLabelState(lastFacetted, { loading: true }, `Loading labels for ${selector}`);\n    }\n    try {\n      const possibleLabels = await languageProvider.fetchSeriesLabels(selector, true);\n      if (selector !== buildSelector(this.state.labels)) {\n        if (lastFacetted) {\n          this.updateLabelState(lastFacetted, { loading: false });\n        }\n        return;\n      }\n      if (Object.keys(possibleLabels).length === 0) {\n        this.setState({ error: `Empty results, no matching label for ${selector}` });\n        return;\n      }\n      const labels = facetLabels(this.state.labels, possibleLabels, lastFacetted);\n      this.setState({ labels, error: \"\" });\n      if (lastFacetted) {\n        this.updateLabelState(lastFacetted, { loading: false });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  async validateSelector(selector) {\n    const { languageProvider } = this.props;\n    this.setState({ validationStatus: `Validating selector ${selector}`, error: \"\" });\n    const streams = await languageProvider.fetchSeries(selector);\n    this.setState({ validationStatus: `Selector is valid (${streams.length} streams found)` });\n  }\n  render() {\n    const { theme } = this.props;\n    const { labels, searchTerm, status, error, validationStatus } = this.state;\n    if (labels.length === 0) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.LoadingPlaceholder, { text: \"Loading labels...\" });\n    }\n    const styles = getStyles(theme);\n    const selector = buildSelector(this.state.labels);\n    const empty = selector === EMPTY_SELECTOR;\n    let selectedLabels = labels.filter((label) => label.selected && label.values);\n    if (searchTerm) {\n      selectedLabels = selectedLabels.map((label) => {\n        const searchResults = label.values.filter((value) => {\n          if (value.selected) {\n            value.highlightParts = void 0;\n            return true;\n          }\n          const fuzzyMatchResult = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.fuzzyMatch)(value.name.toLowerCase(), searchTerm.toLowerCase());\n          if (fuzzyMatchResult.found) {\n            value.highlightParts = fuzzyMatchResult.ranges;\n            value.order = fuzzyMatchResult.distance;\n            return true;\n          } else {\n            return false;\n          }\n        });\n        return {\n          ...label,\n          values: (0,lodash__WEBPACK_IMPORTED_MODULE_1__.sortBy)(searchResults, (value) => value.selected ? -Infinity : value.order)\n        };\n      });\n    } else {\n      selectedLabels = this.state.labels.filter((label) => label.selected && label.values).map((label) => ({\n        ...label,\n        values: label?.values ? label.values.map((value) => ({ ...value, highlightParts: void 0 })) : []\n      }));\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.wrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.section }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Label, { description: \"Which labels would you like to consider for your search?\" }, \"1. Select labels to search in\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.list }, labels.map((label) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Label,\n      {\n        key: label.name,\n        name: label.name,\n        loading: label.loading,\n        active: label.selected,\n        hidden: label.hidden,\n        facets: label.facets,\n        onClick: this.onClickLabel\n      }\n    )))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.section }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Label, { description: \"Choose the label values that you would like to use for the query. Use the search field to find values across selected labels.\" }, \"2. Find values for the selected labels\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n      {\n        onChange: this.onChangeSearch,\n        \"aria-label\": \"Filter expression for values\",\n        value: searchTerm,\n        placeholder: \"Enter a label value\"\n      }\n    )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.valueListArea }, selectedLabels.map((label) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { role: \"list\", key: label.name, className: styles.valueListWrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.valueTitle, \"aria-label\": `Values for ${label.name}` }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Label,\n      {\n        name: label.name,\n        loading: label.loading,\n        active: label.selected,\n        hidden: label.hidden,\n        facets: label.facets || label.values?.length,\n        onClick: this.onClickLabel\n      }\n    )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      react_window__WEBPACK_IMPORTED_MODULE_10__.FixedSizeList,\n      {\n        height: 200,\n        itemCount: label.values?.length || 0,\n        itemSize: 28,\n        itemKey: (i) => label.values[i].name,\n        width: 200,\n        className: styles.valueList\n      },\n      ({ index, style }) => {\n        const value = label.values?.[index];\n        if (!value) {\n          return null;\n        }\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { style }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n          _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Label,\n          {\n            name: label.name,\n            value: value?.name,\n            active: value?.selected,\n            highlightParts: value?.highlightParts,\n            onClick: this.onClickValue,\n            searchTerm\n          }\n        ));\n      }\n    ))))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.section }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Label, null, \"3. Resulting selector\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { \"aria-label\": \"selector\", className: styles.selector }, selector), validationStatus && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.validationStatus }, validationStatus), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.status, (status || error) && styles.statusShowing) }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: error ? styles.error : \"\" }, error || status)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.HorizontalGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Button, { \"aria-label\": \"Use selector as logs button\", disabled: empty, onClick: this.onClickRunLogsQuery }, \"Show logs\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Button,\n      {\n        \"aria-label\": \"Use selector as metrics button\",\n        variant: \"secondary\",\n        disabled: empty,\n        onClick: this.onClickRunMetricsQuery\n      },\n      \"Show logs rate\"\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Button,\n      {\n        \"aria-label\": \"Validate submit button\",\n        variant: \"secondary\",\n        disabled: empty,\n        onClick: this.onClickValidate\n      },\n      \"Validate selector\"\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Button, { \"aria-label\": \"Selector clear button\", variant: \"secondary\", onClick: this.onClickClear }, \"Clear\"))));\n  }\n}\nconst LokiLabelBrowser = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_13__.withTheme2)(UnthemedLokiLabelBrowser);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raUxhYmVsQnJvd3Nlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0Q7QUFDWTtBQUNMO0FBR0k7QUFXM0I7QUFJMEU7QUFHakYsTUFBTSxrQkFBa0I7QUFDeEIsTUFBTSxrQkFBa0I7QUFDeEIsTUFBTSxrQkFBa0I7QUFDeEIsTUFBTSxpQkFBaUI7QUF1Q2hCLFNBQVMsY0FBYyxRQUFtQztBQUMvRCxRQUFNLGlCQUFpQixDQUFDO0FBQ3hCLGFBQVcsU0FBUyxRQUFRO0FBQzFCLFFBQUksTUFBTSxZQUFZLE1BQU0sVUFBVSxNQUFNLE9BQU8sU0FBUyxHQUFHO0FBQzdELFlBQU0saUJBQWlCLE1BQU0sT0FBTyxPQUFPLENBQUMsVUFBVSxNQUFNLFFBQVEsRUFBRSxJQUFJLENBQUMsVUFBVSxNQUFNLElBQUk7QUFDL0YsVUFBSSxlQUFlLFNBQVMsR0FBRztBQUM3Qix1QkFBZSxLQUFLLEdBQUcsTUFBTSxVQUFVLGVBQWUsSUFBSSwyRUFBK0IsRUFBRSxLQUFLLEdBQUcsSUFBSTtBQUFBLE1BQ3pHLFdBQVcsZUFBZSxXQUFXLEdBQUc7QUFDdEMsdUJBQWUsS0FBSyxHQUFHLE1BQU0sU0FBUywrRUFBK0IsQ0FBQyxlQUFlLENBQUMsQ0FBQyxJQUFJO0FBQUEsTUFDN0Y7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNBLFNBQU8sQ0FBQyxLQUFLLGVBQWUsS0FBSyxHQUFHLEdBQUcsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUNyRDtBQUVPLFNBQVMsWUFDZCxRQUNBLGdCQUNBLGNBQ21CO0FBQ25CLFNBQU8sT0FBTyxJQUFJLENBQUMsVUFBVTtBQUMzQixVQUFNLGlCQUFpQixlQUFlLE1BQU0sSUFBSTtBQUNoRCxRQUFJLGdCQUFnQjtBQUNsQixVQUFJO0FBQ0osVUFBSSxNQUFNLFNBQVMsZ0JBQWdCLE1BQU0sUUFBUTtBQUUvQyx5QkFBaUIsTUFBTTtBQUFBLE1BQ3pCLE9BQU87QUFFTCxjQUFNLGlCQUE4QixJQUFJO0FBQUEsVUFDdEMsTUFBTSxRQUFRLE9BQU8sQ0FBQyxVQUFVLE1BQU0sUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLE1BQU0sSUFBSSxLQUFLLENBQUM7QUFBQSxRQUNqRjtBQUVBLHlCQUFpQixlQUFlLElBQUksQ0FBQyxXQUFXLEVBQUUsTUFBTSxPQUFPLFVBQVUsZUFBZSxJQUFJLEtBQUssRUFBRSxFQUFFO0FBQUEsTUFDdkc7QUFDQSxhQUFPLEVBQUUsR0FBRyxPQUFPLFNBQVMsT0FBTyxRQUFRLGdCQUFnQixRQUFRLGVBQWUsT0FBTztBQUFBLElBQzNGO0FBR0EsV0FBTyxFQUFFLEdBQUcsT0FBTyxTQUFTLE9BQU8sUUFBUSxDQUFDLGdCQUFnQixRQUFRLFFBQVcsUUFBUSxFQUFFO0FBQUEsRUFDM0YsQ0FBQztBQUNIO0FBRUEsTUFBTSxZQUFZLENBQUMsV0FBMEI7QUFBQSxFQUMzQyxTQUFTLGlEQUFHO0FBQUgsd0JBQ2EsTUFBTSxPQUFPLFdBQVc7QUFBQSxlQUNqQyxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUE7QUFBQSxFQUc1QixNQUFNLGlEQUFHO0FBQUgsa0JBQ1UsTUFBTSxRQUFRLENBQUM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNL0IsU0FBUyxpREFBRztBQUFIO0FBQUEsZ0JBRUssTUFBTSxRQUFRLEdBQUcsQ0FBQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSWhDLFVBQVUsaURBQUc7QUFBSCxtQkFDTyxNQUFNLFdBQVc7QUFBQSxxQkFDZixNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUEsRUFFbEMsUUFBUSxpREFBRztBQUFILHFCQUNXLE1BQU0sUUFBUSxDQUFDO0FBQUEsYUFDdkIsTUFBTSxPQUFPLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU83QixlQUFlLGlEQUFHO0FBQUg7QUFBQTtBQUFBLEVBR2YsT0FBTyxpREFBRztBQUFILGFBQ0ksTUFBTSxPQUFPLE1BQU07QUFBQTtBQUFBLEVBRTlCLFdBQVcsaURBQUc7QUFBSCxvQkFDTyxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUE7QUFBQSxFQUdqQyxrQkFBa0IsaURBQUc7QUFBSCw2QkFDUyxNQUFNLE9BQU8sT0FBTztBQUFBLGNBQ25DLE1BQU0sUUFBUSxHQUFHLENBQUM7QUFBQSxlQUNqQixNQUFNLFFBQVEsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBO0FBQUEsRUFFckMsZUFBZSxpREFBRztBQUFIO0FBQUE7QUFBQSxrQkFHQyxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUEsRUFFL0IsWUFBWSxpREFBRztBQUFILG9CQUNNLE1BQU0sUUFBUSxHQUFHO0FBQUEscUJBQ2hCLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQSxFQUVsQyxrQkFBa0IsaURBQUc7QUFBSCxlQUNMLE1BQU0sUUFBUSxHQUFHO0FBQUEscUJBQ1gsTUFBTSxRQUFRLENBQUM7QUFBQSxhQUN2QixNQUFNLE9BQU8sS0FBSztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSy9CO0FBRU8sTUFBTSxpQ0FBaUMsd0RBQWUsQ0FBNkI7QUFBQSxFQUFuRjtBQUFBO0FBQ0wsaUJBQXNCO0FBQUEsTUFDcEIsUUFBUSxDQUFDO0FBQUEsTUFDVCxZQUFZO0FBQUEsTUFDWixRQUFRO0FBQUEsTUFDUixPQUFPO0FBQUEsTUFDUCxrQkFBa0I7QUFBQSxJQUNwQjtBQUVBLDBCQUFpQixDQUFDLFVBQXlDO0FBQ3pELFdBQUssU0FBUyxFQUFFLFlBQVksTUFBTSxPQUFPLE1BQU0sQ0FBQztBQUFBLElBQ2xEO0FBRUEsK0JBQXNCLE1BQU07QUFDMUIseUVBQWlCLENBQUMscUNBQXFDO0FBQUEsUUFDckQsS0FBSyxLQUFLLE1BQU07QUFBQSxRQUNoQixXQUFXO0FBQUEsTUFDYixDQUFDO0FBQ0QsWUFBTSxXQUFXLGNBQWMsS0FBSyxNQUFNLE1BQU07QUFDaEQsV0FBSyxNQUFNLFNBQVMsUUFBUTtBQUFBLElBQzlCO0FBRUEsa0NBQXlCLE1BQU07QUFDN0IseUVBQWlCLENBQUMscUNBQXFDO0FBQUEsUUFDckQsS0FBSyxLQUFLLE1BQU07QUFBQSxRQUNoQixXQUFXO0FBQUEsTUFDYixDQUFDO0FBQ0QsWUFBTSxXQUFXLGNBQWMsS0FBSyxNQUFNLE1BQU07QUFDaEQsWUFBTSxRQUFRLFFBQVE7QUFDdEIsV0FBSyxNQUFNLFNBQVMsS0FBSztBQUFBLElBQzNCO0FBRUEsd0JBQWUsTUFBTTtBQUNuQixXQUFLLFNBQVMsQ0FBQyxVQUFVO0FBQ3ZCLGNBQU0sU0FBNEIsTUFBTSxPQUFPLElBQUksQ0FBQyxXQUFXO0FBQUEsVUFDN0QsR0FBRztBQUFBLFVBQ0gsUUFBUTtBQUFBLFVBQ1IsVUFBVTtBQUFBLFVBQ1YsU0FBUztBQUFBLFVBQ1QsUUFBUTtBQUFBLFVBQ1IsUUFBUTtBQUFBLFFBQ1YsRUFBRTtBQUNGLGVBQU8sRUFBRSxRQUFRLFlBQVksSUFBSSxRQUFRLElBQUksT0FBTyxJQUFJLGtCQUFrQixHQUFHO0FBQUEsTUFDL0UsQ0FBQztBQUNELFdBQUssTUFBTSxxQkFBcUI7QUFBQSxJQUNsQztBQUVBLHdCQUFlLENBQUMsTUFBYyxPQUEyQixVQUF5QztBQUNoRyxZQUFNLFFBQVEsS0FBSyxNQUFNLE9BQU8sS0FBSyxDQUFDLE1BQU0sRUFBRSxTQUFTLElBQUk7QUFDM0QsVUFBSSxDQUFDLE9BQU87QUFDVjtBQUFBLE1BQ0Y7QUFFQSxZQUFNLFdBQVcsQ0FBQyxNQUFNO0FBQ3hCLFVBQUksWUFBc0MsRUFBRSxTQUFTO0FBQ3JELFVBQUksTUFBTSxVQUFVLENBQUMsVUFBVTtBQUU3QixjQUFNLFNBQVMsTUFBTSxPQUFPLElBQUksQ0FBQ0EsWUFBVyxFQUFFLEdBQUdBLFFBQU8sVUFBVSxNQUFNLEVBQUU7QUFDMUUsb0JBQVksRUFBRSxHQUFHLFdBQVcsUUFBUSxHQUFHLE9BQU87QUFBQSxNQUNoRDtBQUVBLFdBQUssU0FBUyxFQUFFLFlBQVksR0FBRyxDQUFDO0FBQ2hDLFdBQUssaUJBQWlCLE1BQU0sV0FBVyxJQUFJLE1BQU0sS0FBSyxvQkFBb0IsSUFBSSxDQUFDO0FBQUEsSUFDakY7QUFFQSx3QkFBZSxDQUFDLE1BQWMsT0FBMkIsVUFBeUM7QUFDaEcsWUFBTSxRQUFRLEtBQUssTUFBTSxPQUFPLEtBQUssQ0FBQyxNQUFNLEVBQUUsU0FBUyxJQUFJO0FBQzNELFVBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxRQUFRO0FBQzNCO0FBQUEsTUFDRjtBQUVBLFdBQUssU0FBUyxFQUFFLFlBQVksR0FBRyxDQUFDO0FBRWhDLFlBQU0sU0FBUyxNQUFNLE9BQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLEdBQUcsVUFBVSxFQUFFLFNBQVMsUUFBUSxDQUFDLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRTtBQUN4RyxXQUFLLGlCQUFpQixNQUFNLEVBQUUsT0FBTyxHQUFHLElBQUksTUFBTSxLQUFLLFlBQVksSUFBSSxDQUFDO0FBQUEsSUFDMUU7QUFFQSwyQkFBa0IsTUFBTTtBQUN0QixZQUFNLFdBQVcsY0FBYyxLQUFLLE1BQU0sTUFBTTtBQUNoRCxXQUFLLGlCQUFpQixRQUFRO0FBQUEsSUFDaEM7QUErREEsdUJBQWMsQ0FBQyxpQkFBMEI7QUFDdkMsWUFBTSxXQUFXLGNBQWMsS0FBSyxNQUFNLE1BQU07QUFDaEQsVUFBSSxhQUFhLGdCQUFnQjtBQUUvQixjQUFNLFNBQTRCLEtBQUssTUFBTSxPQUFPLElBQUksQ0FBQyxVQUFVO0FBQ2pFLGlCQUFPLEVBQUUsR0FBRyxPQUFPLFFBQVEsR0FBRyxRQUFRLFFBQVcsUUFBUSxNQUFNO0FBQUEsUUFDakUsQ0FBQztBQUNELGFBQUssU0FBUyxFQUFFLE9BQU8sR0FBRyxNQUFNO0FBRTlCLGVBQUssTUFBTSxPQUFPLFFBQVEsQ0FBQyxVQUFVLE1BQU0sWUFBWSxLQUFLLFlBQVksTUFBTSxNQUFNLFFBQVEsQ0FBQztBQUFBLFFBQy9GLENBQUM7QUFBQSxNQUNILE9BQU87QUFFTCxhQUFLLFlBQVksVUFBVSxZQUFZO0FBQUEsTUFDekM7QUFBQSxJQUNGO0FBQUE7QUFBQSxFQTVFQSxpQkFBaUIsTUFBYyxlQUF5QyxTQUFTLElBQUksSUFBaUI7QUFDcEcsU0FBSyxTQUFTLENBQUMsVUFBVTtBQUN2QixZQUFNLFNBQTRCLE1BQU0sT0FBTyxJQUFJLENBQUMsVUFBVTtBQUM1RCxZQUFJLE1BQU0sU0FBUyxNQUFNO0FBQ3ZCLGlCQUFPLEVBQUUsR0FBRyxPQUFPLEdBQUcsY0FBYztBQUFBLFFBQ3RDO0FBQ0EsZUFBTztBQUFBLE1BQ1QsQ0FBQztBQUVELFlBQU0sUUFBUSxTQUFTLEtBQUssTUFBTTtBQUNsQyxhQUFPLEVBQUUsUUFBUSxRQUFRLE9BQU8sa0JBQWtCLEdBQUc7QUFBQSxJQUN2RCxHQUFHLEVBQUU7QUFBQSxFQUNQO0FBQUEsRUFFQSxvQkFBb0I7QUFDbEIsVUFBTSxFQUFFLGtCQUFrQixhQUFhLGlCQUFpQixlQUFlLElBQUksS0FBSztBQUNoRixRQUFJLGtCQUFrQjtBQUNwQixZQUFNLGlCQUEyQjtBQUNqQyx1QkFBaUIsTUFBTSxFQUFFLEtBQUssTUFBTTtBQUNsQyxZQUFJLFlBQXNCLGlCQUFpQixhQUFhO0FBQ3hELFlBQUksVUFBVSxTQUFTLGlCQUFpQjtBQUN0QyxnQkFBTSxRQUFRLHVDQUF1QyxzQkFBc0IsVUFBVTtBQUNyRixzQkFBWSxVQUFVLE1BQU0sR0FBRyxlQUFlO0FBQzlDLGVBQUssU0FBUyxFQUFFLE1BQU0sQ0FBQztBQUFBLFFBQ3pCO0FBRUEsY0FBTSxTQUE0QixVQUFVLElBQUksQ0FBQyxPQUFPLEdBQUcsU0FBUztBQUFBLFVBQ2xFLE1BQU07QUFBQSxVQUNOLFVBQVcsSUFBSSxVQUFVLGNBQWMsZUFBZSxXQUFXLEtBQU0sZUFBZSxTQUFTLEtBQUs7QUFBQSxVQUNwRyxTQUFTO0FBQUEsUUFDWCxFQUFFO0FBRUYsYUFBSyxTQUFTLEVBQUUsT0FBTyxHQUFHLE1BQU07QUFDOUIsZUFBSyxNQUFNLE9BQU8sUUFBUSxDQUFDLFVBQVU7QUFDbkMsZ0JBQUksTUFBTSxVQUFVO0FBQ2xCLG1CQUFLLFlBQVksTUFBTSxNQUFNLGNBQWM7QUFBQSxZQUM3QztBQUFBLFVBQ0YsQ0FBQztBQUFBLFFBQ0gsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBQUEsRUFFQSxvQkFBb0IsTUFBYztBQUNoQyxVQUFNLFFBQVEsS0FBSyxNQUFNLE9BQU8sS0FBSyxDQUFDLE1BQU0sRUFBRSxTQUFTLElBQUk7QUFDM0QsUUFBSSxDQUFDLE9BQU87QUFDVjtBQUFBLElBQ0Y7QUFDQSxVQUFNLGlCQUFpQixLQUFLLE1BQU0sT0FBTyxPQUFPLENBQUNDLFdBQVVBLE9BQU0sUUFBUSxFQUFFLElBQUksQ0FBQ0EsV0FBVUEsT0FBTSxJQUFJO0FBQ3BHLFNBQUssTUFBTSxvQkFBb0IsY0FBYztBQUM3QyxRQUFJLE1BQU0sVUFBVTtBQUVsQixVQUFJLENBQUMsTUFBTSxRQUFRO0FBQ2pCLGFBQUssWUFBWSxNQUFNLGNBQWMsS0FBSyxNQUFNLE1BQU0sQ0FBQztBQUFBLE1BQ3pEO0FBQUEsSUFDRixPQUFPO0FBRUwsV0FBSyxZQUFZO0FBQUEsSUFDbkI7QUFBQSxFQUNGO0FBQUEsRUFtQkEsTUFBTSxZQUFZLE1BQWMsVUFBa0I7QUFDaEQsVUFBTSxFQUFFLGlCQUFpQixJQUFJLEtBQUs7QUFDbEMsU0FBSyxpQkFBaUIsTUFBTSxFQUFFLFNBQVMsS0FBSyxHQUFHLHVCQUF1QixNQUFNO0FBQzVFLFFBQUk7QUFDRixVQUFJLFlBQVksTUFBTSxpQkFBaUIsZUFBZSxJQUFJO0FBRTFELFVBQUksYUFBYSxjQUFjLEtBQUssTUFBTSxNQUFNLEdBQUc7QUFDakQsYUFBSyxpQkFBaUIsTUFBTSxFQUFFLFNBQVMsTUFBTSxHQUFHLEVBQUU7QUFDbEQ7QUFBQSxNQUNGO0FBQ0EsVUFBSSxVQUFVLFNBQVMsaUJBQWlCO0FBQ3RDLGNBQU0sUUFBUSx1QkFBdUIsc0JBQXNCLHNCQUFzQixVQUFVO0FBQzNGLG9CQUFZLFVBQVUsTUFBTSxHQUFHLGVBQWU7QUFDOUMsYUFBSyxTQUFTLEVBQUUsTUFBTSxDQUFDO0FBQUEsTUFDekI7QUFDQSxZQUFNLFNBQTRCLFVBQVUsSUFBSSxDQUFDLFdBQVcsRUFBRSxNQUFNLE1BQU0sRUFBRTtBQUM1RSxXQUFLLGlCQUFpQixNQUFNLEVBQUUsUUFBUSxTQUFTLE1BQU0sQ0FBQztBQUFBLElBQ3hELFNBQVMsT0FBUDtBQUNBLGNBQVEsTUFBTSxLQUFLO0FBQUEsSUFDckI7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFNLFlBQVksVUFBa0IsY0FBdUI7QUFDekQsVUFBTSxFQUFFLGlCQUFpQixJQUFJLEtBQUs7QUFDbEMsUUFBSSxjQUFjO0FBQ2hCLFdBQUssaUJBQWlCLGNBQWMsRUFBRSxTQUFTLEtBQUssR0FBRyxzQkFBc0IsVUFBVTtBQUFBLElBQ3pGO0FBQ0EsUUFBSTtBQUNGLFlBQU0saUJBQWlCLE1BQU0saUJBQWlCLGtCQUFrQixVQUFVLElBQUk7QUFFOUUsVUFBSSxhQUFhLGNBQWMsS0FBSyxNQUFNLE1BQU0sR0FBRztBQUNqRCxZQUFJLGNBQWM7QUFDaEIsZUFBSyxpQkFBaUIsY0FBYyxFQUFFLFNBQVMsTUFBTSxDQUFDO0FBQUEsUUFDeEQ7QUFDQTtBQUFBLE1BQ0Y7QUFDQSxVQUFJLE9BQU8sS0FBSyxjQUFjLEVBQUUsV0FBVyxHQUFHO0FBQzVDLGFBQUssU0FBUyxFQUFFLE9BQU8sd0NBQXdDLFdBQVcsQ0FBQztBQUMzRTtBQUFBLE1BQ0Y7QUFDQSxZQUFNLFNBQTRCLFlBQVksS0FBSyxNQUFNLFFBQVEsZ0JBQWdCLFlBQVk7QUFDN0YsV0FBSyxTQUFTLEVBQUUsUUFBUSxPQUFPLEdBQUcsQ0FBQztBQUNuQyxVQUFJLGNBQWM7QUFDaEIsYUFBSyxpQkFBaUIsY0FBYyxFQUFFLFNBQVMsTUFBTSxDQUFDO0FBQUEsTUFDeEQ7QUFBQSxJQUNGLFNBQVMsT0FBUDtBQUNBLGNBQVEsTUFBTSxLQUFLO0FBQUEsSUFDckI7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFNLGlCQUFpQixVQUFrQjtBQUN2QyxVQUFNLEVBQUUsaUJBQWlCLElBQUksS0FBSztBQUNsQyxTQUFLLFNBQVMsRUFBRSxrQkFBa0IsdUJBQXVCLFlBQVksT0FBTyxHQUFHLENBQUM7QUFDaEYsVUFBTSxVQUFVLE1BQU0saUJBQWlCLFlBQVksUUFBUTtBQUMzRCxTQUFLLFNBQVMsRUFBRSxrQkFBa0Isc0JBQXNCLFFBQVEsd0JBQXdCLENBQUM7QUFBQSxFQUMzRjtBQUFBLEVBRUEsU0FBUztBQUNQLFVBQU0sRUFBRSxNQUFNLElBQUksS0FBSztBQUN2QixVQUFNLEVBQUUsUUFBUSxZQUFZLFFBQVEsT0FBTyxpQkFBaUIsSUFBSSxLQUFLO0FBQ3JFLFFBQUksT0FBTyxXQUFXLEdBQUc7QUFDdkIsYUFBTywyRUFBQywyREFBa0IsSUFBQyxNQUFLLHFCQUFvQjtBQUFBLElBQ3REO0FBQ0EsVUFBTSxTQUFTLFVBQVUsS0FBSztBQUM5QixVQUFNLFdBQVcsY0FBYyxLQUFLLE1BQU0sTUFBTTtBQUNoRCxVQUFNLFFBQVEsYUFBYTtBQUUzQixRQUFJLGlCQUFpQixPQUFPLE9BQU8sQ0FBQyxVQUFVLE1BQU0sWUFBWSxNQUFNLE1BQU07QUFDNUUsUUFBSSxZQUFZO0FBQ2QsdUJBQWlCLGVBQWUsSUFBSSxDQUFDLFVBQVU7QUFDN0MsY0FBTSxnQkFBZ0IsTUFBTSxPQUFRLE9BQU8sQ0FBQyxVQUFVO0FBRXBELGNBQUksTUFBTSxVQUFVO0FBQ2xCLGtCQUFNLGlCQUFpQjtBQUN2QixtQkFBTztBQUFBLFVBQ1Q7QUFDQSxnQkFBTSxtQkFBbUIsdURBQVUsQ0FBQyxNQUFNLEtBQUssWUFBWSxHQUFHLFdBQVcsWUFBWSxDQUFDO0FBQ3RGLGNBQUksaUJBQWlCLE9BQU87QUFDMUIsa0JBQU0saUJBQWlCLGlCQUFpQjtBQUN4QyxrQkFBTSxRQUFRLGlCQUFpQjtBQUMvQixtQkFBTztBQUFBLFVBQ1QsT0FBTztBQUNMLG1CQUFPO0FBQUEsVUFDVDtBQUFBLFFBQ0YsQ0FBQztBQUNELGVBQU87QUFBQSxVQUNMLEdBQUc7QUFBQSxVQUNILFFBQVEsOENBQU0sQ0FBQyxlQUFlLENBQUMsVUFBVyxNQUFNLFdBQVcsWUFBWSxNQUFNLEtBQU07QUFBQSxRQUNyRjtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0gsT0FBTztBQUVMLHVCQUFpQixLQUFLLE1BQU0sT0FDekIsT0FBTyxDQUFDLFVBQVUsTUFBTSxZQUFZLE1BQU0sTUFBTSxFQUNoRCxJQUFJLENBQUMsV0FBVztBQUFBLFFBQ2YsR0FBRztBQUFBLFFBQ0gsUUFBUSxPQUFPLFNBQVMsTUFBTSxPQUFPLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxPQUFPLGdCQUFnQixPQUFVLEVBQUUsSUFBSSxDQUFDO0FBQUEsTUFDcEcsRUFBRTtBQUFBLElBQ047QUFFQSxXQUNFLDJFQUFDLFNBQUksV0FBVyxPQUFPLFdBQ3JCLDJFQUFDLFNBQUksV0FBVyxPQUFPLFdBQ3JCLDJFQUFDLDhDQUFLLElBQUMsYUFBWSw4REFBMkQsK0JBRTlFLEdBQ0EsMkVBQUMsU0FBSSxXQUFXLE9BQU8sUUFDcEIsT0FBTyxJQUFJLENBQUMsVUFDWDtBQUFBLE1BQUMsOENBQVM7QUFBVDtBQUFBLFFBQ0MsS0FBSyxNQUFNO0FBQUEsUUFDWCxNQUFNLE1BQU07QUFBQSxRQUNaLFNBQVMsTUFBTTtBQUFBLFFBQ2YsUUFBUSxNQUFNO0FBQUEsUUFDZCxRQUFRLE1BQU07QUFBQSxRQUNkLFFBQVEsTUFBTTtBQUFBLFFBQ2QsU0FBUyxLQUFLO0FBQUE7QUFBQSxJQUNoQixDQUNELENBQ0gsQ0FDRixHQUNBLDJFQUFDLFNBQUksV0FBVyxPQUFPLFdBQ3JCLDJFQUFDLDhDQUFLLElBQUMsYUFBWSxtSUFBZ0ksd0NBRW5KLEdBQ0EsMkVBQUMsYUFDQztBQUFBLE1BQUMsOENBQUs7QUFBTDtBQUFBLFFBQ0MsVUFBVSxLQUFLO0FBQUEsUUFDZixjQUFXO0FBQUEsUUFDWCxPQUFPO0FBQUEsUUFDUCxhQUFhO0FBQUE7QUFBQSxJQUNmLENBQ0YsR0FDQSwyRUFBQyxTQUFJLFdBQVcsT0FBTyxpQkFDcEIsZUFBZSxJQUFJLENBQUMsVUFDbkIsMkVBQUMsU0FBSSxNQUFLLFFBQU8sS0FBSyxNQUFNLE1BQU0sV0FBVyxPQUFPLG9CQUNsRCwyRUFBQyxTQUFJLFdBQVcsT0FBTyxZQUFZLGNBQVksY0FBYyxNQUFNLFVBQ2pFO0FBQUEsTUFBQyw4Q0FBUztBQUFUO0FBQUEsUUFDQyxNQUFNLE1BQU07QUFBQSxRQUNaLFNBQVMsTUFBTTtBQUFBLFFBQ2YsUUFBUSxNQUFNO0FBQUEsUUFDZCxRQUFRLE1BQU07QUFBQSxRQUVkLFFBQVEsTUFBTSxVQUFVLE1BQU0sUUFBUTtBQUFBLFFBQ3RDLFNBQVMsS0FBSztBQUFBO0FBQUEsSUFDaEIsQ0FDRixHQUNBO0FBQUEsTUFBQyx3REFBYTtBQUFiO0FBQUEsUUFDQyxRQUFRO0FBQUEsUUFDUixXQUFXLE1BQU0sUUFBUSxVQUFVO0FBQUEsUUFDbkMsVUFBVTtBQUFBLFFBQ1YsU0FBUyxDQUFDLE1BQU8sTUFBTSxPQUE2QixDQUFDLEVBQUU7QUFBQSxRQUN2RCxPQUFPO0FBQUEsUUFDUCxXQUFXLE9BQU87QUFBQTtBQUFBLE1BRWpCLENBQUMsRUFBRSxPQUFPLE1BQU0sTUFBTTtBQUNyQixjQUFNLFFBQVEsTUFBTSxTQUFTLEtBQUs7QUFDbEMsWUFBSSxDQUFDLE9BQU87QUFDVixpQkFBTztBQUFBLFFBQ1Q7QUFDQSxlQUNFLDJFQUFDLFNBQUksU0FDSDtBQUFBLFVBQUMsOENBQVM7QUFBVDtBQUFBLFlBQ0MsTUFBTSxNQUFNO0FBQUEsWUFDWixPQUFPLE9BQU87QUFBQSxZQUNkLFFBQVEsT0FBTztBQUFBLFlBQ2YsZ0JBQWdCLE9BQU87QUFBQSxZQUN2QixTQUFTLEtBQUs7QUFBQSxZQUNkO0FBQUE7QUFBQSxRQUNGLENBQ0Y7QUFBQSxNQUVKO0FBQUEsSUFDRixDQUNGLENBQ0QsQ0FDSCxDQUNGLEdBQ0EsMkVBQUMsU0FBSSxXQUFXLE9BQU8sV0FDckIsMkVBQUMsOENBQUssUUFBQyx1QkFBcUIsR0FDNUIsMkVBQUMsU0FBSSxjQUFXLFlBQVcsV0FBVyxPQUFPLFlBQzFDLFFBQ0gsR0FDQyxvQkFBb0IsMkVBQUMsU0FBSSxXQUFXLE9BQU8sb0JBQW1CLGdCQUFpQixHQUNoRiwyRUFBQyxTQUFJLFdBQVcsZ0RBQUUsQ0FBQyxPQUFPLFNBQVMsVUFBVSxVQUFVLE9BQU8sYUFBYSxLQUN6RSwyRUFBQyxVQUFLLFdBQVcsUUFBUSxPQUFPLFFBQVEsTUFBSyxTQUFTLE1BQU8sQ0FDL0QsR0FDQSwyRUFBQyx5REFBZSxRQUNkLDJFQUFDLGdEQUFNLElBQUMsY0FBVywrQkFBOEIsVUFBVSxPQUFPLFNBQVMsS0FBSyx1QkFBcUIsV0FFckcsR0FDQTtBQUFBLE1BQUMsZ0RBQU07QUFBTjtBQUFBLFFBQ0MsY0FBVztBQUFBLFFBQ1gsU0FBUTtBQUFBLFFBQ1IsVUFBVTtBQUFBLFFBQ1YsU0FBUyxLQUFLO0FBQUE7QUFBQSxNQUNmO0FBQUEsSUFFRCxHQUNBO0FBQUEsTUFBQyxnREFBTTtBQUFOO0FBQUEsUUFDQyxjQUFXO0FBQUEsUUFDWCxTQUFRO0FBQUEsUUFDUixVQUFVO0FBQUEsUUFDVixTQUFTLEtBQUs7QUFBQTtBQUFBLE1BQ2Y7QUFBQSxJQUVELEdBQ0EsMkVBQUMsZ0RBQU0sSUFBQyxjQUFXLHlCQUF3QixTQUFRLGFBQVksU0FBUyxLQUFLLGdCQUFjLE9BRTNGLENBQ0YsQ0FDRixDQUNGO0FBQUEsRUFFSjtBQUNGO0FBRU8sTUFBTSxtQkFBbUIsd0RBQVUsQ0FBQyx3QkFBd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9jb21wb25lbnRzL0xva2lMYWJlbEJyb3dzZXIudHN4PzczYmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzLCBjeCB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFJlYWN0LCB7IENoYW5nZUV2ZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRml4ZWRTaXplTGlzdCB9IGZyb20gJ3JlYWN0LXdpbmRvdyc7XG5cbmltcG9ydCB7IENvcmVBcHAsIEdyYWZhbmFUaGVtZTIgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IHJlcG9ydEludGVyYWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEhpZ2hsaWdodFBhcnQsXG4gIEhvcml6b250YWxHcm91cCxcbiAgSW5wdXQsXG4gIExhYmVsLFxuICBMb2FkaW5nUGxhY2Vob2xkZXIsXG4gIHdpdGhUaGVtZTIsXG4gIEJyb3dzZXJMYWJlbCBhcyBMb2tpTGFiZWwsXG4gIGZ1enp5TWF0Y2gsXG59IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IFByb21RbExhbmd1YWdlUHJvdmlkZXIgZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9sYW5ndWFnZV9wcm92aWRlcic7XG5pbXBvcnQgTG9raUxhbmd1YWdlUHJvdmlkZXIgZnJvbSAnLi4vTGFuZ3VhZ2VQcm92aWRlcic7XG5pbXBvcnQgeyBlc2NhcGVMYWJlbFZhbHVlSW5FeGFjdFNlbGVjdG9yLCBlc2NhcGVMYWJlbFZhbHVlSW5SZWdleFNlbGVjdG9yIH0gZnJvbSAnLi4vbGFuZ3VhZ2VVdGlscyc7XG5cbi8vIEhhcmQgbGltaXQgb24gbGFiZWxzIHRvIHJlbmRlclxuY29uc3QgTUFYX0xBQkVMX0NPVU5UID0gMTAwMDtcbmNvbnN0IE1BWF9WQUxVRV9DT1VOVCA9IDEwMDAwO1xuY29uc3QgTUFYX0FVVE9fU0VMRUNUID0gNDtcbmNvbnN0IEVNUFRZX1NFTEVDVE9SID0gJ3t9JztcblxuZXhwb3J0IGludGVyZmFjZSBCcm93c2VyUHJvcHMge1xuICAvLyBUT0RPICMzMzk3NjogSXMgaXQgcG9zc2libGUgdG8gdXNlIGEgY29tbW9uIGludGVyZmFjZSBoZXJlPyBGb3IgZXhhbXBsZTogTGFiZWxzTGFuZ3VhZ2VQcm92aWRlclxuICBsYW5ndWFnZVByb3ZpZGVyOiBMb2tpTGFuZ3VhZ2VQcm92aWRlciB8IFByb21RbExhbmd1YWdlUHJvdmlkZXI7XG4gIG9uQ2hhbmdlOiAoc2VsZWN0b3I6IHN0cmluZykgPT4gdm9pZDtcbiAgdGhlbWU6IEdyYWZhbmFUaGVtZTI7XG4gIGFwcD86IENvcmVBcHA7XG4gIGF1dG9TZWxlY3Q/OiBudW1iZXI7XG4gIGhpZGU/OiAoKSA9PiB2b2lkO1xuICBsYXN0VXNlZExhYmVsczogc3RyaW5nW107XG4gIHN0b3JlTGFzdFVzZWRMYWJlbHM6IChsYWJlbHM6IHN0cmluZ1tdKSA9PiB2b2lkO1xuICBkZWxldGVMYXN0VXNlZExhYmVsczogKCkgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIEJyb3dzZXJTdGF0ZSB7XG4gIGxhYmVsczogU2VsZWN0YWJsZUxhYmVsW107XG4gIHNlYXJjaFRlcm06IHN0cmluZztcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGVycm9yOiBzdHJpbmc7XG4gIHZhbGlkYXRpb25TdGF0dXM6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEZhY2V0dGFibGVWYWx1ZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgc2VsZWN0ZWQ/OiBib29sZWFuO1xuICBoaWdobGlnaHRQYXJ0cz86IEhpZ2hsaWdodFBhcnRbXTtcbiAgb3JkZXI/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0YWJsZUxhYmVsIHtcbiAgbmFtZTogc3RyaW5nO1xuICBzZWxlY3RlZD86IGJvb2xlYW47XG4gIGxvYWRpbmc/OiBib29sZWFuO1xuICB2YWx1ZXM/OiBGYWNldHRhYmxlVmFsdWVbXTtcbiAgaGlkZGVuPzogYm9vbGVhbjtcbiAgZmFjZXRzPzogbnVtYmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRTZWxlY3RvcihsYWJlbHM6IFNlbGVjdGFibGVMYWJlbFtdKTogc3RyaW5nIHtcbiAgY29uc3Qgc2VsZWN0ZWRMYWJlbHMgPSBbXTtcbiAgZm9yIChjb25zdCBsYWJlbCBvZiBsYWJlbHMpIHtcbiAgICBpZiAobGFiZWwuc2VsZWN0ZWQgJiYgbGFiZWwudmFsdWVzICYmIGxhYmVsLnZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzZWxlY3RlZFZhbHVlcyA9IGxhYmVsLnZhbHVlcy5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZS5zZWxlY3RlZCkubWFwKCh2YWx1ZSkgPT4gdmFsdWUubmFtZSk7XG4gICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICBzZWxlY3RlZExhYmVscy5wdXNoKGAke2xhYmVsLm5hbWV9PX5cIiR7c2VsZWN0ZWRWYWx1ZXMubWFwKGVzY2FwZUxhYmVsVmFsdWVJblJlZ2V4U2VsZWN0b3IpLmpvaW4oJ3wnKX1cImApO1xuICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZFZhbHVlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgc2VsZWN0ZWRMYWJlbHMucHVzaChgJHtsYWJlbC5uYW1lfT1cIiR7ZXNjYXBlTGFiZWxWYWx1ZUluRXhhY3RTZWxlY3RvcihzZWxlY3RlZFZhbHVlc1swXSl9XCJgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIFsneycsIHNlbGVjdGVkTGFiZWxzLmpvaW4oJywnKSwgJ30nXS5qb2luKCcnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZhY2V0TGFiZWxzKFxuICBsYWJlbHM6IFNlbGVjdGFibGVMYWJlbFtdLFxuICBwb3NzaWJsZUxhYmVsczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+LFxuICBsYXN0RmFjZXR0ZWQ/OiBzdHJpbmdcbik6IFNlbGVjdGFibGVMYWJlbFtdIHtcbiAgcmV0dXJuIGxhYmVscy5tYXAoKGxhYmVsKSA9PiB7XG4gICAgY29uc3QgcG9zc2libGVWYWx1ZXMgPSBwb3NzaWJsZUxhYmVsc1tsYWJlbC5uYW1lXTtcbiAgICBpZiAocG9zc2libGVWYWx1ZXMpIHtcbiAgICAgIGxldCBleGlzdGluZ1ZhbHVlczogRmFjZXR0YWJsZVZhbHVlW107XG4gICAgICBpZiAobGFiZWwubmFtZSA9PT0gbGFzdEZhY2V0dGVkICYmIGxhYmVsLnZhbHVlcykge1xuICAgICAgICAvLyBGYWNldHRpbmcgdGhpcyBsYWJlbCwgc2hvdyBhbGwgdmFsdWVzXG4gICAgICAgIGV4aXN0aW5nVmFsdWVzID0gbGFiZWwudmFsdWVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gS2VlcCBzZWxlY3Rpb24gaW4gb3RoZXIgZmFjZXRzXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsdWVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoXG4gICAgICAgICAgbGFiZWwudmFsdWVzPy5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZS5zZWxlY3RlZCkubWFwKCh2YWx1ZSkgPT4gdmFsdWUubmFtZSkgfHwgW11cbiAgICAgICAgKTtcbiAgICAgICAgLy8gVmFsdWVzIGZvciB0aGlzIGxhYmVsIGhhdmUgbm90IGJlZW4gcmVxdWVzdGVkIHlldCwgbGV0J3MgdXNlIHRoZSBmYWNldHRlZCBvbmVzIGFzIHRoZSBpbml0aWFsIHZhbHVlc1xuICAgICAgICBleGlzdGluZ1ZhbHVlcyA9IHBvc3NpYmxlVmFsdWVzLm1hcCgodmFsdWUpID0+ICh7IG5hbWU6IHZhbHVlLCBzZWxlY3RlZDogc2VsZWN0ZWRWYWx1ZXMuaGFzKHZhbHVlKSB9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4geyAuLi5sYWJlbCwgbG9hZGluZzogZmFsc2UsIHZhbHVlczogZXhpc3RpbmdWYWx1ZXMsIGZhY2V0czogZXhpc3RpbmdWYWx1ZXMubGVuZ3RoIH07XG4gICAgfVxuXG4gICAgLy8gTGFiZWwgaXMgZmFjZXR0ZWQgb3V0LCBoaWRlIGFsbCB2YWx1ZXNcbiAgICByZXR1cm4geyAuLi5sYWJlbCwgbG9hZGluZzogZmFsc2UsIGhpZGRlbjogIXBvc3NpYmxlVmFsdWVzLCB2YWx1ZXM6IHVuZGVmaW5lZCwgZmFjZXRzOiAwIH07XG4gIH0pO1xufVxuXG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+ICh7XG4gIHdyYXBwZXI6IGNzc2BcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5iYWNrZ3JvdW5kLnNlY29uZGFyeX07XG4gICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDIpfTtcbiAgICB3aWR0aDogMTAwJTtcbiAgYCxcbiAgbGlzdDogY3NzYFxuICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgbWF4LWhlaWdodDogMjAwcHg7XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gIGAsXG4gIHNlY3Rpb246IGNzc2BcbiAgICAmICsgJiB7XG4gICAgICBtYXJnaW46ICR7dGhlbWUuc3BhY2luZygyLCAwKX07XG4gICAgfVxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYCxcbiAgc2VsZWN0b3I6IGNzc2BcbiAgICBmb250LWZhbWlseTogJHt0aGVtZS50eXBvZ3JhcGh5LmZvbnRGYW1pbHlNb25vc3BhY2V9O1xuICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUuc3BhY2luZygxKX07XG4gIGAsXG4gIHN0YXR1czogY3NzYFxuICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnRleHQuc2Vjb25kYXJ5fTtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAxMDBtcyBsaW5lYXI7XG4gICAgb3BhY2l0eTogMDtcbiAgYCxcbiAgc3RhdHVzU2hvd2luZzogY3NzYFxuICAgIG9wYWNpdHk6IDE7XG4gIGAsXG4gIGVycm9yOiBjc3NgXG4gICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmVycm9yLm1haW59O1xuICBgLFxuICB2YWx1ZUxpc3Q6IGNzc2BcbiAgICBtYXJnaW4tcmlnaHQ6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgcmVzaXplOiBob3Jpem9udGFsO1xuICBgLFxuICB2YWx1ZUxpc3RXcmFwcGVyOiBjc3NgXG4gICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ib3JkZXIubWVkaXVtfTtcbiAgICBtYXJnaW46ICR7dGhlbWUuc3BhY2luZygxLCAwKX07XG4gICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDEsIDAsIDEsIDEpfTtcbiAgYCxcbiAgdmFsdWVMaXN0QXJlYTogY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gIGAsXG4gIHZhbHVlVGl0bGU6IGNzc2BcbiAgICBtYXJnaW4tbGVmdDogLSR7dGhlbWUuc3BhY2luZygwLjUpfTtcbiAgICBtYXJnaW4tYm90dG9tOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICBgLFxuICB2YWxpZGF0aW9uU3RhdHVzOiBjc3NgXG4gICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDAuNSl9O1xuICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnRleHQubWF4Q29udHJhc3R9O1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgYCxcbn0pO1xuXG5leHBvcnQgY2xhc3MgVW50aGVtZWRMb2tpTGFiZWxCcm93c2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEJyb3dzZXJQcm9wcywgQnJvd3NlclN0YXRlPiB7XG4gIHN0YXRlOiBCcm93c2VyU3RhdGUgPSB7XG4gICAgbGFiZWxzOiBbXSBhcyBTZWxlY3RhYmxlTGFiZWxbXSxcbiAgICBzZWFyY2hUZXJtOiAnJyxcbiAgICBzdGF0dXM6ICdSZWFkeScsXG4gICAgZXJyb3I6ICcnLFxuICAgIHZhbGlkYXRpb25TdGF0dXM6ICcnLFxuICB9O1xuXG4gIG9uQ2hhbmdlU2VhcmNoID0gKGV2ZW50OiBDaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBzZWFyY2hUZXJtOiBldmVudC50YXJnZXQudmFsdWUgfSk7XG4gIH07XG5cbiAgb25DbGlja1J1bkxvZ3NRdWVyeSA9ICgpID0+IHtcbiAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9sb2tpX2xhYmVsX2Jyb3dzZXJfY2xvc2VkJywge1xuICAgICAgYXBwOiB0aGlzLnByb3BzLmFwcCxcbiAgICAgIGNsb3NlVHlwZTogJ3Nob3dMb2dzQnV0dG9uJyxcbiAgICB9KTtcbiAgICBjb25zdCBzZWxlY3RvciA9IGJ1aWxkU2VsZWN0b3IodGhpcy5zdGF0ZS5sYWJlbHMpO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoc2VsZWN0b3IpO1xuICB9O1xuXG4gIG9uQ2xpY2tSdW5NZXRyaWNzUXVlcnkgPSAoKSA9PiB7XG4gICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfbG9raV9sYWJlbF9icm93c2VyX2Nsb3NlZCcsIHtcbiAgICAgIGFwcDogdGhpcy5wcm9wcy5hcHAsXG4gICAgICBjbG9zZVR5cGU6ICdzaG93TG9nc1JhdGVCdXR0b24nLFxuICAgIH0pO1xuICAgIGNvbnN0IHNlbGVjdG9yID0gYnVpbGRTZWxlY3Rvcih0aGlzLnN0YXRlLmxhYmVscyk7XG4gICAgY29uc3QgcXVlcnkgPSBgcmF0ZSgke3NlbGVjdG9yfVskX19pbnRlcnZhbF0pYDtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHF1ZXJ5KTtcbiAgfTtcblxuICBvbkNsaWNrQ2xlYXIgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+IHtcbiAgICAgIGNvbnN0IGxhYmVsczogU2VsZWN0YWJsZUxhYmVsW10gPSBzdGF0ZS5sYWJlbHMubWFwKChsYWJlbCkgPT4gKHtcbiAgICAgICAgLi4ubGFiZWwsXG4gICAgICAgIHZhbHVlczogdW5kZWZpbmVkLFxuICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBoaWRkZW46IGZhbHNlLFxuICAgICAgICBmYWNldHM6IHVuZGVmaW5lZCxcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiB7IGxhYmVscywgc2VhcmNoVGVybTogJycsIHN0YXR1czogJycsIGVycm9yOiAnJywgdmFsaWRhdGlvblN0YXR1czogJycgfTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLmRlbGV0ZUxhc3RVc2VkTGFiZWxzKCk7XG4gIH07XG5cbiAgb25DbGlja0xhYmVsID0gKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLnN0YXRlLmxhYmVscy5maW5kKChsKSA9PiBsLm5hbWUgPT09IG5hbWUpO1xuICAgIGlmICghbGFiZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gVG9nZ2xlIHNlbGVjdGVkIHN0YXRlXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSAhbGFiZWwuc2VsZWN0ZWQ7XG4gICAgbGV0IG5leHRWYWx1ZTogUGFydGlhbDxTZWxlY3RhYmxlTGFiZWw+ID0geyBzZWxlY3RlZCB9O1xuICAgIGlmIChsYWJlbC52YWx1ZXMgJiYgIXNlbGVjdGVkKSB7XG4gICAgICAvLyBEZXNlbGVjdCBhbGwgdmFsdWVzIGlmIGxhYmVsIHdhcyBkZXNlbGVjdGVkXG4gICAgICBjb25zdCB2YWx1ZXMgPSBsYWJlbC52YWx1ZXMubWFwKCh2YWx1ZSkgPT4gKHsgLi4udmFsdWUsIHNlbGVjdGVkOiBmYWxzZSB9KSk7XG4gICAgICBuZXh0VmFsdWUgPSB7IC4uLm5leHRWYWx1ZSwgZmFjZXRzOiAwLCB2YWx1ZXMgfTtcbiAgICB9XG4gICAgLy8gUmVzZXR0aW5nIHNlYXJjaCB0byBwcmV2ZW50IGVtcHR5IHJlc3VsdHNcbiAgICB0aGlzLnNldFN0YXRlKHsgc2VhcmNoVGVybTogJycgfSk7XG4gICAgdGhpcy51cGRhdGVMYWJlbFN0YXRlKG5hbWUsIG5leHRWYWx1ZSwgJycsICgpID0+IHRoaXMuZG9GYWNldHRpbmdGb3JMYWJlbChuYW1lKSk7XG4gIH07XG5cbiAgb25DbGlja1ZhbHVlID0gKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLnN0YXRlLmxhYmVscy5maW5kKChsKSA9PiBsLm5hbWUgPT09IG5hbWUpO1xuICAgIGlmICghbGFiZWwgfHwgIWxhYmVsLnZhbHVlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBSZXNldHRpbmcgc2VhcmNoIHRvIHByZXZlbnQgZW1wdHkgcmVzdWx0c1xuICAgIHRoaXMuc2V0U3RhdGUoeyBzZWFyY2hUZXJtOiAnJyB9KTtcbiAgICAvLyBUb2dnbGluZyB2YWx1ZSBmb3Igc2VsZWN0ZWQgbGFiZWwsIGxlYXZpbmcgb3RoZXIgdmFsdWVzIGludGFjdFxuICAgIGNvbnN0IHZhbHVlcyA9IGxhYmVsLnZhbHVlcy5tYXAoKHYpID0+ICh7IC4uLnYsIHNlbGVjdGVkOiB2Lm5hbWUgPT09IHZhbHVlID8gIXYuc2VsZWN0ZWQgOiB2LnNlbGVjdGVkIH0pKTtcbiAgICB0aGlzLnVwZGF0ZUxhYmVsU3RhdGUobmFtZSwgeyB2YWx1ZXMgfSwgJycsICgpID0+IHRoaXMuZG9GYWNldHRpbmcobmFtZSkpO1xuICB9O1xuXG4gIG9uQ2xpY2tWYWxpZGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBzZWxlY3RvciA9IGJ1aWxkU2VsZWN0b3IodGhpcy5zdGF0ZS5sYWJlbHMpO1xuICAgIHRoaXMudmFsaWRhdGVTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH07XG5cbiAgdXBkYXRlTGFiZWxTdGF0ZShuYW1lOiBzdHJpbmcsIHVwZGF0ZWRGaWVsZHM6IFBhcnRpYWw8U2VsZWN0YWJsZUxhYmVsPiwgc3RhdHVzID0gJycsIGNiPzogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gICAgICBjb25zdCBsYWJlbHM6IFNlbGVjdGFibGVMYWJlbFtdID0gc3RhdGUubGFiZWxzLm1hcCgobGFiZWwpID0+IHtcbiAgICAgICAgaWYgKGxhYmVsLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICByZXR1cm4geyAuLi5sYWJlbCwgLi4udXBkYXRlZEZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYWJlbDtcbiAgICAgIH0pO1xuICAgICAgLy8gTmV3IHN0YXR1cyBvdmVycmlkZXMgZXJyb3JzXG4gICAgICBjb25zdCBlcnJvciA9IHN0YXR1cyA/ICcnIDogc3RhdGUuZXJyb3I7XG4gICAgICByZXR1cm4geyBsYWJlbHMsIHN0YXR1cywgZXJyb3IsIHZhbGlkYXRpb25TdGF0dXM6ICcnIH07XG4gICAgfSwgY2IpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3QgeyBsYW5ndWFnZVByb3ZpZGVyLCBhdXRvU2VsZWN0ID0gTUFYX0FVVE9fU0VMRUNULCBsYXN0VXNlZExhYmVscyB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAobGFuZ3VhZ2VQcm92aWRlcikge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRMYWJlbHM6IHN0cmluZ1tdID0gbGFzdFVzZWRMYWJlbHM7XG4gICAgICBsYW5ndWFnZVByb3ZpZGVyLnN0YXJ0KCkudGhlbigoKSA9PiB7XG4gICAgICAgIGxldCByYXdMYWJlbHM6IHN0cmluZ1tdID0gbGFuZ3VhZ2VQcm92aWRlci5nZXRMYWJlbEtleXMoKTtcbiAgICAgICAgaWYgKHJhd0xhYmVscy5sZW5ndGggPiBNQVhfTEFCRUxfQ09VTlQpIHtcbiAgICAgICAgICBjb25zdCBlcnJvciA9IGBUb28gbWFueSBsYWJlbHMgZm91bmQgKHNob3dpbmcgb25seSAke01BWF9MQUJFTF9DT1VOVH0gb2YgJHtyYXdMYWJlbHMubGVuZ3RofSlgO1xuICAgICAgICAgIHJhd0xhYmVscyA9IHJhd0xhYmVscy5zbGljZSgwLCBNQVhfTEFCRUxfQ09VTlQpO1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvciB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBdXRvLXNlbGVjdCBhbGwgbGFiZWxzIGlmIGxhYmVsIGxpc3QgaXMgc21hbGwgZW5vdWdoXG4gICAgICAgIGNvbnN0IGxhYmVsczogU2VsZWN0YWJsZUxhYmVsW10gPSByYXdMYWJlbHMubWFwKChsYWJlbCwgaSwgYXJyKSA9PiAoe1xuICAgICAgICAgIG5hbWU6IGxhYmVsLFxuICAgICAgICAgIHNlbGVjdGVkOiAoYXJyLmxlbmd0aCA8PSBhdXRvU2VsZWN0ICYmIHNlbGVjdGVkTGFiZWxzLmxlbmd0aCA9PT0gMCkgfHwgc2VsZWN0ZWRMYWJlbHMuaW5jbHVkZXMobGFiZWwpLFxuICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFByZS1mZXRjaCB2YWx1ZXMgZm9yIHNlbGVjdGVkIGxhYmVsc1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbGFiZWxzIH0sICgpID0+IHtcbiAgICAgICAgICB0aGlzLnN0YXRlLmxhYmVscy5mb3JFYWNoKChsYWJlbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGxhYmVsLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgIHRoaXMuZmV0Y2hWYWx1ZXMobGFiZWwubmFtZSwgRU1QVFlfU0VMRUNUT1IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGRvRmFjZXR0aW5nRm9yTGFiZWwobmFtZTogc3RyaW5nKSB7XG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLnN0YXRlLmxhYmVscy5maW5kKChsKSA9PiBsLm5hbWUgPT09IG5hbWUpO1xuICAgIGlmICghbGFiZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2VsZWN0ZWRMYWJlbHMgPSB0aGlzLnN0YXRlLmxhYmVscy5maWx0ZXIoKGxhYmVsKSA9PiBsYWJlbC5zZWxlY3RlZCkubWFwKChsYWJlbCkgPT4gbGFiZWwubmFtZSk7XG4gICAgdGhpcy5wcm9wcy5zdG9yZUxhc3RVc2VkTGFiZWxzKHNlbGVjdGVkTGFiZWxzKTtcbiAgICBpZiAobGFiZWwuc2VsZWN0ZWQpIHtcbiAgICAgIC8vIFJlZmV0Y2ggdmFsdWVzIGZvciBuZXdseSBzZWxlY3RlZCBsYWJlbC4uLlxuICAgICAgaWYgKCFsYWJlbC52YWx1ZXMpIHtcbiAgICAgICAgdGhpcy5mZXRjaFZhbHVlcyhuYW1lLCBidWlsZFNlbGVjdG9yKHRoaXMuc3RhdGUubGFiZWxzKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9ubHkgbmVlZCB0byBmYWNldCB3aGVuIGRlc2VsZWN0aW5nIGxhYmVsc1xuICAgICAgdGhpcy5kb0ZhY2V0dGluZygpO1xuICAgIH1cbiAgfVxuXG4gIGRvRmFjZXR0aW5nID0gKGxhc3RGYWNldHRlZD86IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gYnVpbGRTZWxlY3Rvcih0aGlzLnN0YXRlLmxhYmVscyk7XG4gICAgaWYgKHNlbGVjdG9yID09PSBFTVBUWV9TRUxFQ1RPUikge1xuICAgICAgLy8gQ2xlYXIgdXAgZmFjZXR0aW5nXG4gICAgICBjb25zdCBsYWJlbHM6IFNlbGVjdGFibGVMYWJlbFtdID0gdGhpcy5zdGF0ZS5sYWJlbHMubWFwKChsYWJlbCkgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5sYWJlbCwgZmFjZXRzOiAwLCB2YWx1ZXM6IHVuZGVmaW5lZCwgaGlkZGVuOiBmYWxzZSB9O1xuICAgICAgfSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbGFiZWxzIH0sICgpID0+IHtcbiAgICAgICAgLy8gR2V0IGZyZXNoIHNldCBvZiB2YWx1ZXNcbiAgICAgICAgdGhpcy5zdGF0ZS5sYWJlbHMuZm9yRWFjaCgobGFiZWwpID0+IGxhYmVsLnNlbGVjdGVkICYmIHRoaXMuZmV0Y2hWYWx1ZXMobGFiZWwubmFtZSwgc2VsZWN0b3IpKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEbyBmYWNldHRpbmdcbiAgICAgIHRoaXMuZmV0Y2hTZXJpZXMoc2VsZWN0b3IsIGxhc3RGYWNldHRlZCk7XG4gICAgfVxuICB9O1xuXG4gIGFzeW5jIGZldGNoVmFsdWVzKG5hbWU6IHN0cmluZywgc2VsZWN0b3I6IHN0cmluZykge1xuICAgIGNvbnN0IHsgbGFuZ3VhZ2VQcm92aWRlciB9ID0gdGhpcy5wcm9wcztcbiAgICB0aGlzLnVwZGF0ZUxhYmVsU3RhdGUobmFtZSwgeyBsb2FkaW5nOiB0cnVlIH0sIGBGZXRjaGluZyB2YWx1ZXMgZm9yICR7bmFtZX1gKTtcbiAgICB0cnkge1xuICAgICAgbGV0IHJhd1ZhbHVlcyA9IGF3YWl0IGxhbmd1YWdlUHJvdmlkZXIuZ2V0TGFiZWxWYWx1ZXMobmFtZSk7XG4gICAgICAvLyBJZiBzZWxlY3RvciBjaGFuZ2VkLCBjbGVhciBsb2FkaW5nIHN0YXRlIGFuZCBkaXNjYXJkIHJlc3VsdCBieSByZXR1cm5pbmcgZWFybHlcbiAgICAgIGlmIChzZWxlY3RvciAhPT0gYnVpbGRTZWxlY3Rvcih0aGlzLnN0YXRlLmxhYmVscykpIHtcbiAgICAgICAgdGhpcy51cGRhdGVMYWJlbFN0YXRlKG5hbWUsIHsgbG9hZGluZzogZmFsc2UgfSwgJycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocmF3VmFsdWVzLmxlbmd0aCA+IE1BWF9WQUxVRV9DT1VOVCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IGBUb28gbWFueSB2YWx1ZXMgZm9yICR7bmFtZX0gKHNob3dpbmcgb25seSAke01BWF9WQUxVRV9DT1VOVH0gb2YgJHtyYXdWYWx1ZXMubGVuZ3RofSlgO1xuICAgICAgICByYXdWYWx1ZXMgPSByYXdWYWx1ZXMuc2xpY2UoMCwgTUFYX1ZBTFVFX0NPVU5UKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVycm9yIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdmFsdWVzOiBGYWNldHRhYmxlVmFsdWVbXSA9IHJhd1ZhbHVlcy5tYXAoKHZhbHVlKSA9PiAoeyBuYW1lOiB2YWx1ZSB9KSk7XG4gICAgICB0aGlzLnVwZGF0ZUxhYmVsU3RhdGUobmFtZSwgeyB2YWx1ZXMsIGxvYWRpbmc6IGZhbHNlIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmZXRjaFNlcmllcyhzZWxlY3Rvcjogc3RyaW5nLCBsYXN0RmFjZXR0ZWQ/OiBzdHJpbmcpIHtcbiAgICBjb25zdCB7IGxhbmd1YWdlUHJvdmlkZXIgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGxhc3RGYWNldHRlZCkge1xuICAgICAgdGhpcy51cGRhdGVMYWJlbFN0YXRlKGxhc3RGYWNldHRlZCwgeyBsb2FkaW5nOiB0cnVlIH0sIGBMb2FkaW5nIGxhYmVscyBmb3IgJHtzZWxlY3Rvcn1gKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBvc3NpYmxlTGFiZWxzID0gYXdhaXQgbGFuZ3VhZ2VQcm92aWRlci5mZXRjaFNlcmllc0xhYmVscyhzZWxlY3RvciwgdHJ1ZSk7XG4gICAgICAvLyBJZiBzZWxlY3RvciBjaGFuZ2VkLCBjbGVhciBsb2FkaW5nIHN0YXRlIGFuZCBkaXNjYXJkIHJlc3VsdCBieSByZXR1cm5pbmcgZWFybHlcbiAgICAgIGlmIChzZWxlY3RvciAhPT0gYnVpbGRTZWxlY3Rvcih0aGlzLnN0YXRlLmxhYmVscykpIHtcbiAgICAgICAgaWYgKGxhc3RGYWNldHRlZCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlTGFiZWxTdGF0ZShsYXN0RmFjZXR0ZWQsIHsgbG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5rZXlzKHBvc3NpYmxlTGFiZWxzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVycm9yOiBgRW1wdHkgcmVzdWx0cywgbm8gbWF0Y2hpbmcgbGFiZWwgZm9yICR7c2VsZWN0b3J9YCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgbGFiZWxzOiBTZWxlY3RhYmxlTGFiZWxbXSA9IGZhY2V0TGFiZWxzKHRoaXMuc3RhdGUubGFiZWxzLCBwb3NzaWJsZUxhYmVscywgbGFzdEZhY2V0dGVkKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBsYWJlbHMsIGVycm9yOiAnJyB9KTtcbiAgICAgIGlmIChsYXN0RmFjZXR0ZWQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVMYWJlbFN0YXRlKGxhc3RGYWNldHRlZCwgeyBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdmFsaWRhdGVTZWxlY3RvcihzZWxlY3Rvcjogc3RyaW5nKSB7XG4gICAgY29uc3QgeyBsYW5ndWFnZVByb3ZpZGVyIH0gPSB0aGlzLnByb3BzO1xuICAgIHRoaXMuc2V0U3RhdGUoeyB2YWxpZGF0aW9uU3RhdHVzOiBgVmFsaWRhdGluZyBzZWxlY3RvciAke3NlbGVjdG9yfWAsIGVycm9yOiAnJyB9KTtcbiAgICBjb25zdCBzdHJlYW1zID0gYXdhaXQgbGFuZ3VhZ2VQcm92aWRlci5mZXRjaFNlcmllcyhzZWxlY3Rvcik7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHZhbGlkYXRpb25TdGF0dXM6IGBTZWxlY3RvciBpcyB2YWxpZCAoJHtzdHJlYW1zLmxlbmd0aH0gc3RyZWFtcyBmb3VuZClgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBsYWJlbHMsIHNlYXJjaFRlcm0sIHN0YXR1cywgZXJyb3IsIHZhbGlkYXRpb25TdGF0dXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKGxhYmVscy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiA8TG9hZGluZ1BsYWNlaG9sZGVyIHRleHQ9XCJMb2FkaW5nIGxhYmVscy4uLlwiIC8+O1xuICAgIH1cbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXModGhlbWUpO1xuICAgIGNvbnN0IHNlbGVjdG9yID0gYnVpbGRTZWxlY3Rvcih0aGlzLnN0YXRlLmxhYmVscyk7XG4gICAgY29uc3QgZW1wdHkgPSBzZWxlY3RvciA9PT0gRU1QVFlfU0VMRUNUT1I7XG5cbiAgICBsZXQgc2VsZWN0ZWRMYWJlbHMgPSBsYWJlbHMuZmlsdGVyKChsYWJlbCkgPT4gbGFiZWwuc2VsZWN0ZWQgJiYgbGFiZWwudmFsdWVzKTtcbiAgICBpZiAoc2VhcmNoVGVybSkge1xuICAgICAgc2VsZWN0ZWRMYWJlbHMgPSBzZWxlY3RlZExhYmVscy5tYXAoKGxhYmVsKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSBsYWJlbC52YWx1ZXMhLmZpbHRlcigodmFsdWUpID0+IHtcbiAgICAgICAgICAvLyBBbHdheXMgcmV0dXJuIHNlbGVjdGVkIHZhbHVlc1xuICAgICAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgdmFsdWUuaGlnaGxpZ2h0UGFydHMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZnV6enlNYXRjaFJlc3VsdCA9IGZ1enp5TWF0Y2godmFsdWUubmFtZS50b0xvd2VyQ2FzZSgpLCBzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgIGlmIChmdXp6eU1hdGNoUmVzdWx0LmZvdW5kKSB7XG4gICAgICAgICAgICB2YWx1ZS5oaWdobGlnaHRQYXJ0cyA9IGZ1enp5TWF0Y2hSZXN1bHQucmFuZ2VzO1xuICAgICAgICAgICAgdmFsdWUub3JkZXIgPSBmdXp6eU1hdGNoUmVzdWx0LmRpc3RhbmNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmxhYmVsLFxuICAgICAgICAgIHZhbHVlczogc29ydEJ5KHNlYXJjaFJlc3VsdHMsICh2YWx1ZSkgPT4gKHZhbHVlLnNlbGVjdGVkID8gLUluZmluaXR5IDogdmFsdWUub3JkZXIpKSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDbGVhciBoaWdobGlnaHQgcGFydHMgd2hlbiBzZWFyY2hUZXJtIGlzIGNsZWFyZWRcbiAgICAgIHNlbGVjdGVkTGFiZWxzID0gdGhpcy5zdGF0ZS5sYWJlbHNcbiAgICAgICAgLmZpbHRlcigobGFiZWwpID0+IGxhYmVsLnNlbGVjdGVkICYmIGxhYmVsLnZhbHVlcylcbiAgICAgICAgLm1hcCgobGFiZWwpID0+ICh7XG4gICAgICAgICAgLi4ubGFiZWwsXG4gICAgICAgICAgdmFsdWVzOiBsYWJlbD8udmFsdWVzID8gbGFiZWwudmFsdWVzLm1hcCgodmFsdWUpID0+ICh7IC4uLnZhbHVlLCBoaWdobGlnaHRQYXJ0czogdW5kZWZpbmVkIH0pKSA6IFtdLFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMud3JhcHBlcn0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc2VjdGlvbn0+XG4gICAgICAgICAgPExhYmVsIGRlc2NyaXB0aW9uPVwiV2hpY2ggbGFiZWxzIHdvdWxkIHlvdSBsaWtlIHRvIGNvbnNpZGVyIGZvciB5b3VyIHNlYXJjaD9cIj5cbiAgICAgICAgICAgIDEuIFNlbGVjdCBsYWJlbHMgdG8gc2VhcmNoIGluXG4gICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmxpc3R9PlxuICAgICAgICAgICAge2xhYmVscy5tYXAoKGxhYmVsKSA9PiAoXG4gICAgICAgICAgICAgIDxMb2tpTGFiZWxcbiAgICAgICAgICAgICAgICBrZXk9e2xhYmVsLm5hbWV9XG4gICAgICAgICAgICAgICAgbmFtZT17bGFiZWwubmFtZX1cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtsYWJlbC5sb2FkaW5nfVxuICAgICAgICAgICAgICAgIGFjdGl2ZT17bGFiZWwuc2VsZWN0ZWR9XG4gICAgICAgICAgICAgICAgaGlkZGVuPXtsYWJlbC5oaWRkZW59XG4gICAgICAgICAgICAgICAgZmFjZXRzPXtsYWJlbC5mYWNldHN9XG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNsaWNrTGFiZWx9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc2VjdGlvbn0+XG4gICAgICAgICAgPExhYmVsIGRlc2NyaXB0aW9uPVwiQ2hvb3NlIHRoZSBsYWJlbCB2YWx1ZXMgdGhhdCB5b3Ugd291bGQgbGlrZSB0byB1c2UgZm9yIHRoZSBxdWVyeS4gVXNlIHRoZSBzZWFyY2ggZmllbGQgdG8gZmluZCB2YWx1ZXMgYWNyb3NzIHNlbGVjdGVkIGxhYmVscy5cIj5cbiAgICAgICAgICAgIDIuIEZpbmQgdmFsdWVzIGZvciB0aGUgc2VsZWN0ZWQgbGFiZWxzXG4gICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlU2VhcmNofVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiRmlsdGVyIGV4cHJlc3Npb24gZm9yIHZhbHVlc1wiXG4gICAgICAgICAgICAgIHZhbHVlPXtzZWFyY2hUZXJtfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17J0VudGVyIGEgbGFiZWwgdmFsdWUnfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnZhbHVlTGlzdEFyZWF9PlxuICAgICAgICAgICAge3NlbGVjdGVkTGFiZWxzLm1hcCgobGFiZWwpID0+IChcbiAgICAgICAgICAgICAgPGRpdiByb2xlPVwibGlzdFwiIGtleT17bGFiZWwubmFtZX0gY2xhc3NOYW1lPXtzdHlsZXMudmFsdWVMaXN0V3JhcHBlcn0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy52YWx1ZVRpdGxlfSBhcmlhLWxhYmVsPXtgVmFsdWVzIGZvciAke2xhYmVsLm5hbWV9YH0+XG4gICAgICAgICAgICAgICAgICA8TG9raUxhYmVsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9e2xhYmVsLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xhYmVsLmxvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZT17bGFiZWwuc2VsZWN0ZWR9XG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbj17bGFiZWwuaGlkZGVufVxuICAgICAgICAgICAgICAgICAgICAvL0lmIG5vIGZhY2V0cywgd2Ugd2FudCB0byBzaG93IG51bWJlciBvZiBhbGwgbGFiZWwgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0cz17bGFiZWwuZmFjZXRzIHx8IGxhYmVsLnZhbHVlcz8ubGVuZ3RofVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQ2xpY2tMYWJlbH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEZpeGVkU2l6ZUxpc3RcbiAgICAgICAgICAgICAgICAgIGhlaWdodD17MjAwfVxuICAgICAgICAgICAgICAgICAgaXRlbUNvdW50PXtsYWJlbC52YWx1ZXM/Lmxlbmd0aCB8fCAwfVxuICAgICAgICAgICAgICAgICAgaXRlbVNpemU9ezI4fVxuICAgICAgICAgICAgICAgICAgaXRlbUtleT17KGkpID0+IChsYWJlbC52YWx1ZXMgYXMgRmFjZXR0YWJsZVZhbHVlW10pW2ldLm5hbWV9XG4gICAgICAgICAgICAgICAgICB3aWR0aD17MjAwfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMudmFsdWVMaXN0fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHsoeyBpbmRleCwgc3R5bGUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGxhYmVsLnZhbHVlcz8uW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17c3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPExva2lMYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtsYWJlbC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWU/Lm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZT17dmFsdWU/LnNlbGVjdGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRQYXJ0cz17dmFsdWU/LmhpZ2hsaWdodFBhcnRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQ2xpY2tWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybT17c2VhcmNoVGVybX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIDwvRml4ZWRTaXplTGlzdD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc2VjdGlvbn0+XG4gICAgICAgICAgPExhYmVsPjMuIFJlc3VsdGluZyBzZWxlY3RvcjwvTGFiZWw+XG4gICAgICAgICAgPGRpdiBhcmlhLWxhYmVsPVwic2VsZWN0b3JcIiBjbGFzc05hbWU9e3N0eWxlcy5zZWxlY3Rvcn0+XG4gICAgICAgICAgICB7c2VsZWN0b3J9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3ZhbGlkYXRpb25TdGF0dXMgJiYgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy52YWxpZGF0aW9uU3RhdHVzfT57dmFsaWRhdGlvblN0YXR1c308L2Rpdj59XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2N4KHN0eWxlcy5zdGF0dXMsIChzdGF0dXMgfHwgZXJyb3IpICYmIHN0eWxlcy5zdGF0dXNTaG93aW5nKX0+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Vycm9yID8gc3R5bGVzLmVycm9yIDogJyd9PntlcnJvciB8fCBzdGF0dXN9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxIb3Jpem9udGFsR3JvdXA+XG4gICAgICAgICAgICA8QnV0dG9uIGFyaWEtbGFiZWw9XCJVc2Ugc2VsZWN0b3IgYXMgbG9ncyBidXR0b25cIiBkaXNhYmxlZD17ZW1wdHl9IG9uQ2xpY2s9e3RoaXMub25DbGlja1J1bkxvZ3NRdWVyeX0+XG4gICAgICAgICAgICAgIFNob3cgbG9nc1xuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJVc2Ugc2VsZWN0b3IgYXMgbWV0cmljcyBidXR0b25cIlxuICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2VtcHR5fVxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQ2xpY2tSdW5NZXRyaWNzUXVlcnl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFNob3cgbG9ncyByYXRlXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlZhbGlkYXRlIHN1Ym1pdCBidXR0b25cIlxuICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2VtcHR5fVxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQ2xpY2tWYWxpZGF0ZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgVmFsaWRhdGUgc2VsZWN0b3JcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPEJ1dHRvbiBhcmlhLWxhYmVsPVwiU2VsZWN0b3IgY2xlYXIgYnV0dG9uXCIgdmFyaWFudD1cInNlY29uZGFyeVwiIG9uQ2xpY2s9e3RoaXMub25DbGlja0NsZWFyfT5cbiAgICAgICAgICAgICAgQ2xlYXJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvSG9yaXpvbnRhbEdyb3VwPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IExva2lMYWJlbEJyb3dzZXIgPSB3aXRoVGhlbWUyKFVudGhlbWVkTG9raUxhYmVsQnJvd3Nlcik7XG4iXSwibmFtZXMiOlsidmFsdWUiLCJsYWJlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/LokiLabelBrowser.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/LokiOptionFields.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RESOLUTION: () => (/* binding */ DEFAULT_RESOLUTION),\n/* harmony export */   LokiOptionFields: () => (/* binding */ LokiOptionFields),\n/* harmony export */   RESOLUTION_OPTIONS: () => (/* binding */ RESOLUTION_OPTIONS),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   preprocessMaxLines: () => (/* binding */ preprocessMaxLines),\n/* harmony export */   queryTypeOptions: () => (/* binding */ queryTypeOptions)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/FormLabel/FormLabel.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\n\n\n\n\nconst queryTypeOptions = [\n  { value: _types__WEBPACK_IMPORTED_MODULE_4__.LokiQueryType.Range, label: \"Range\", description: \"Run query over a range of time.\" },\n  {\n    value: _types__WEBPACK_IMPORTED_MODULE_4__.LokiQueryType.Instant,\n    label: \"Instant\",\n    description: 'Run query against a single point in time. For this query, the \"To\" time is used.'\n  }\n];\nif (_grafana_runtime__WEBPACK_IMPORTED_MODULE_5__.config.featureToggles.lokiExperimentalStreaming) {\n  queryTypeOptions.push({\n    value: _types__WEBPACK_IMPORTED_MODULE_4__.LokiQueryType.Stream,\n    label: \"Stream\",\n    description: \"Run a query and keep sending results on an interval\"\n  });\n}\nconst DEFAULT_RESOLUTION = {\n  value: 1,\n  label: \"1/1\"\n};\nconst RESOLUTION_OPTIONS = [DEFAULT_RESOLUTION].concat(\n  (0,lodash__WEBPACK_IMPORTED_MODULE_1__.map)([2, 3, 4, 5, 10], (value) => ({\n    value,\n    label: \"1/\" + value\n  }))\n);\nfunction LokiOptionFields(props) {\n  const { lineLimitValue, resolution, onRunQuery, runOnBlur, onChange } = props;\n  const query = props.query ?? {};\n  const queryType = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_3__.getLokiQueryType)(query);\n  function onChangeQueryLimit(value) {\n    const nextQuery = { ...query, maxLines: preprocessMaxLines(value) };\n    onChange(nextQuery);\n  }\n  function onQueryTypeChange(queryType2) {\n    const { instant, range, ...rest } = query;\n    onChange({ ...rest, queryType: queryType2 });\n  }\n  function onMaxLinesChange(e) {\n    if (query.maxLines !== preprocessMaxLines(e.currentTarget.value)) {\n      onChangeQueryLimit(e.currentTarget.value);\n    }\n  }\n  function onReturnKeyDown(e) {\n    if (e.key === \"Enter\") {\n      onRunQuery();\n    }\n  }\n  function onResolutionChange(option) {\n    const nextQuery = { ...query, resolution: option.value };\n    onChange(nextQuery);\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { \"aria-label\": \"Loki extra field\", className: \"gf-form-inline\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    \"div\",\n    {\n      \"data-testid\": \"queryTypeField\",\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(\n        \"gf-form explore-input-margin\",\n        (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n            flex-wrap: nowrap;\n          `\n      ),\n      \"aria-label\": \"Query type field\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.InlineFormLabel, { width: \"auto\" }, \"Query type\"),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.RadioButtonGroup,\n      {\n        options: queryTypeOptions,\n        value: queryType,\n        onChange: (type) => {\n          onQueryTypeChange(type);\n          if (runOnBlur) {\n            onRunQuery();\n          }\n        }\n      }\n    )\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    \"div\",\n    {\n      \"data-testid\": \"lineLimitField\",\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(\n        \"gf-form\",\n        (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n            flex-wrap: nowrap;\n          `\n      ),\n      \"aria-label\": \"Line limit field\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.InlineField, { label: \"Line limit\", tooltip: \"Upper limit for number of log lines returned by query.\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Input,\n      {\n        className: \"width-4\",\n        placeholder: \"auto\",\n        type: \"number\",\n        min: 0,\n        onChange: onMaxLinesChange,\n        onKeyDown: onReturnKeyDown,\n        value: lineLimitValue,\n        onBlur: () => {\n          if (runOnBlur) {\n            onRunQuery();\n          }\n        }\n      }\n    )),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.InlineField,\n      {\n        label: \"Resolution\",\n        tooltip: \"Resolution 1/1 sets step parameter of Loki metrics range queries such that each pixel corresponds to one data point. For better performance, lower resolutions can be picked. 1/2 only retrieves a data point for every other pixel, and 1/10 retrieves one data point per 10 pixels.\"\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_10__.Select,\n        {\n          isSearchable: false,\n          onChange: onResolutionChange,\n          options: RESOLUTION_OPTIONS,\n          value: resolution,\n          \"aria-label\": \"Select resolution\"\n        }\n      )\n    )\n  ));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(LokiOptionFields));\nfunction preprocessMaxLines(value) {\n  const maxLines = parseInt(value, 10);\n  if (isNaN(maxLines) || maxLines < 0) {\n    return void 0;\n  }\n  return maxLines;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raU9wdGlvbkZpZWxkcy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDd0I7QUFDSjtBQUNRO0FBSUw7QUFDdUQ7QUFFN0M7QUFDUTtBQVdsQyxNQUFNLG1CQUEwRDtBQUFBLEVBQ3JFLEVBQUUsT0FBTyxpREFBYSxDQUFDLE9BQU8sT0FBTyxTQUFTLGFBQWEsa0NBQWtDO0FBQUEsRUFDN0Y7QUFBQSxJQUNFLE9BQU8saURBQWEsQ0FBQztBQUFBLElBQ3JCLE9BQU87QUFBQSxJQUNQLGFBQWE7QUFBQSxFQUNmO0FBQ0Y7QUFFQSxJQUFJLG9EQUFNLENBQUMsZUFBZSwyQkFBMkI7QUFDbkQsbUJBQWlCLEtBQUs7QUFBQSxJQUNwQixPQUFPLGlEQUFhLENBQUM7QUFBQSxJQUNyQixPQUFPO0FBQUEsSUFDUCxhQUFhO0FBQUEsRUFDZixDQUFDO0FBQ0g7QUFFTyxNQUFNLHFCQUE4QztBQUFBLEVBQ3pELE9BQU87QUFBQSxFQUNQLE9BQU87QUFDVDtBQUVPLE1BQU0scUJBQXFELENBQUMsa0JBQWtCLEVBQUU7QUFBQSxFQUNyRiwyQ0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsQ0FBQyxXQUFtQjtBQUFBLElBQ3hDO0FBQUEsSUFDQSxPQUFPLE9BQU87QUFBQSxFQUNoQixFQUFFO0FBQ0o7QUFFTyxTQUFTLGlCQUFpQixPQUE4QjtBQUM3RCxRQUFNLEVBQUUsZ0JBQWdCLFlBQVksWUFBWSxXQUFXLFNBQVMsSUFBSTtBQUN4RSxRQUFNLFFBQVEsTUFBTSxTQUFTLENBQUM7QUFDOUIsUUFBTSxZQUFZLDZEQUFnQixDQUFDLEtBQUs7QUFFeEMsV0FBUyxtQkFBbUIsT0FBZTtBQUN6QyxVQUFNLFlBQVksRUFBRSxHQUFHLE9BQU8sVUFBVSxtQkFBbUIsS0FBSyxFQUFFO0FBQ2xFLGFBQVMsU0FBUztBQUFBLEVBQ3BCO0FBRUEsV0FBUyxrQkFBa0JBLFlBQTBCO0FBQ25ELFVBQU0sRUFBRSxTQUFTLE9BQU8sR0FBRyxLQUFLLElBQUk7QUFDcEMsYUFBUyxFQUFFLEdBQUcsTUFBTSxXQUFBQSxXQUFVLENBQUM7QUFBQSxFQUNqQztBQUVBLFdBQVMsaUJBQWlCLEdBQTJDO0FBQ25FLFFBQUksTUFBTSxhQUFhLG1CQUFtQixFQUFFLGNBQWMsS0FBSyxHQUFHO0FBQ2hFLHlCQUFtQixFQUFFLGNBQWMsS0FBSztBQUFBLElBQzFDO0FBQUEsRUFDRjtBQUVBLFdBQVMsZ0JBQWdCLEdBQTBDO0FBQ2pFLFFBQUksRUFBRSxRQUFRLFNBQVM7QUFDckIsaUJBQVc7QUFBQSxJQUNiO0FBQUEsRUFDRjtBQUVBLFdBQVMsbUJBQW1CLFFBQWlDO0FBQzNELFVBQU0sWUFBWSxFQUFFLEdBQUcsT0FBTyxZQUFZLE9BQU8sTUFBTTtBQUN2RCxhQUFTLFNBQVM7QUFBQSxFQUNwQjtBQUVBLFNBQ0UsMkVBQUMsU0FBSSxjQUFXLG9CQUFtQixXQUFVLG9CQUUzQztBQUFBLElBQUM7QUFBQTtBQUFBLE1BQ0MsZUFBWTtBQUFBLE1BQ1osV0FBVyxnREFBRTtBQUFGLFFBQ1Q7QUFBQSxRQUNBLGlEQUFHO0FBQUg7QUFBQTtBQUFBLE1BR0Y7QUFBQSxNQUNBLGNBQVc7QUFBQTtBQUFBLElBRVgsMkVBQUMsd0RBQWUsSUFBQyxPQUFNLFVBQU8sWUFBVTtBQUFBLElBRXhDO0FBQUEsTUFBQyx5REFBZ0I7QUFBaEI7QUFBQSxRQUNDLFNBQVM7QUFBQSxRQUNULE9BQU87QUFBQSxRQUNQLFVBQVUsQ0FBQyxTQUF3QjtBQUNqQyw0QkFBa0IsSUFBSTtBQUN0QixjQUFJLFdBQVc7QUFDYix1QkFBVztBQUFBLFVBQ2I7QUFBQSxRQUNGO0FBQUE7QUFBQSxJQUNGO0FBQUEsRUFDRixHQUVBO0FBQUEsSUFBQztBQUFBO0FBQUEsTUFDQyxlQUFZO0FBQUEsTUFDWixXQUFXLGdEQUFFO0FBQUYsUUFDVDtBQUFBLFFBQ0EsaURBQUc7QUFBSDtBQUFBO0FBQUEsTUFHRjtBQUFBLE1BQ0EsY0FBVztBQUFBO0FBQUEsSUFFWCwyRUFBQyxvREFBVyxJQUFDLE9BQU0sY0FBYSxTQUFTLDREQUN2QztBQUFBLE1BQUMsOENBQUs7QUFBTDtBQUFBLFFBQ0MsV0FBVTtBQUFBLFFBQ1YsYUFBWTtBQUFBLFFBQ1osTUFBSztBQUFBLFFBQ0wsS0FBSztBQUFBLFFBQ0wsVUFBVTtBQUFBLFFBQ1YsV0FBVztBQUFBLFFBQ1gsT0FBTztBQUFBLFFBQ1AsUUFBUSxNQUFNO0FBQ1osY0FBSSxXQUFXO0FBQ2IsdUJBQVc7QUFBQSxVQUNiO0FBQUEsUUFDRjtBQUFBO0FBQUEsSUFDRixDQUNGO0FBQUEsSUFDQTtBQUFBLE1BQUMsb0RBQVc7QUFBWDtBQUFBLFFBQ0MsT0FBTTtBQUFBLFFBQ04sU0FDRTtBQUFBO0FBQUEsTUFHRjtBQUFBLFFBQUMsZ0RBQU07QUFBTjtBQUFBLFVBQ0MsY0FBYztBQUFBLFVBQ2QsVUFBVTtBQUFBLFVBQ1YsU0FBUztBQUFBLFVBQ1QsT0FBTztBQUFBLFVBQ1AsY0FBVztBQUFBO0FBQUEsTUFDYjtBQUFBLElBQ0Y7QUFBQSxFQUNGLENBQ0Y7QUFFSjtBQUVBLGlFQUFlLDJDQUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBQztBQUUvQixTQUFTLG1CQUFtQixPQUFtQztBQUNwRSxRQUFNLFdBQVcsU0FBUyxPQUFPLEVBQUU7QUFDbkMsTUFBSSxNQUFNLFFBQVEsS0FBSyxXQUFXLEdBQUc7QUFDbkMsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9jb21wb25lbnRzL0xva2lPcHRpb25GaWVsZHMudHN4PzRhZTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTGlicmFyaWVzXG5pbXBvcnQgeyBjc3MsIGN4IH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgbWVtbyB9IGZyb20gJ3JlYWN0JztcblxuLy8gVHlwZXNcbmltcG9ydCB7IFNlbGVjdGFibGVWYWx1ZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyBJbmxpbmVGb3JtTGFiZWwsIFJhZGlvQnV0dG9uR3JvdXAsIElubGluZUZpZWxkLCBJbnB1dCwgU2VsZWN0IH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyBnZXRMb2tpUXVlcnlUeXBlIH0gZnJvbSAnLi4vcXVlcnlVdGlscyc7XG5pbXBvcnQgeyBMb2tpUXVlcnksIExva2lRdWVyeVR5cGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9raU9wdGlvbkZpZWxkc1Byb3BzIHtcbiAgbGluZUxpbWl0VmFsdWU6IHN0cmluZztcbiAgcmVzb2x1dGlvbjogbnVtYmVyO1xuICBxdWVyeTogTG9raVF1ZXJ5O1xuICBvbkNoYW5nZTogKHZhbHVlOiBMb2tpUXVlcnkpID0+IHZvaWQ7XG4gIG9uUnVuUXVlcnk6ICgpID0+IHZvaWQ7XG4gIHJ1bk9uQmx1cj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBxdWVyeVR5cGVPcHRpb25zOiBBcnJheTxTZWxlY3RhYmxlVmFsdWU8TG9raVF1ZXJ5VHlwZT4+ID0gW1xuICB7IHZhbHVlOiBMb2tpUXVlcnlUeXBlLlJhbmdlLCBsYWJlbDogJ1JhbmdlJywgZGVzY3JpcHRpb246ICdSdW4gcXVlcnkgb3ZlciBhIHJhbmdlIG9mIHRpbWUuJyB9LFxuICB7XG4gICAgdmFsdWU6IExva2lRdWVyeVR5cGUuSW5zdGFudCxcbiAgICBsYWJlbDogJ0luc3RhbnQnLFxuICAgIGRlc2NyaXB0aW9uOiAnUnVuIHF1ZXJ5IGFnYWluc3QgYSBzaW5nbGUgcG9pbnQgaW4gdGltZS4gRm9yIHRoaXMgcXVlcnksIHRoZSBcIlRvXCIgdGltZSBpcyB1c2VkLicsXG4gIH0sXG5dO1xuXG5pZiAoY29uZmlnLmZlYXR1cmVUb2dnbGVzLmxva2lFeHBlcmltZW50YWxTdHJlYW1pbmcpIHtcbiAgcXVlcnlUeXBlT3B0aW9ucy5wdXNoKHtcbiAgICB2YWx1ZTogTG9raVF1ZXJ5VHlwZS5TdHJlYW0sXG4gICAgbGFiZWw6ICdTdHJlYW0nLFxuICAgIGRlc2NyaXB0aW9uOiAnUnVuIGEgcXVlcnkgYW5kIGtlZXAgc2VuZGluZyByZXN1bHRzIG9uIGFuIGludGVydmFsJyxcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1JFU09MVVRJT046IFNlbGVjdGFibGVWYWx1ZTxudW1iZXI+ID0ge1xuICB2YWx1ZTogMSxcbiAgbGFiZWw6ICcxLzEnLFxufTtcblxuZXhwb3J0IGNvbnN0IFJFU09MVVRJT05fT1BUSU9OUzogQXJyYXk8U2VsZWN0YWJsZVZhbHVlPG51bWJlcj4+ID0gW0RFRkFVTFRfUkVTT0xVVElPTl0uY29uY2F0KFxuICBtYXAoWzIsIDMsIDQsIDUsIDEwXSwgKHZhbHVlOiBudW1iZXIpID0+ICh7XG4gICAgdmFsdWUsXG4gICAgbGFiZWw6ICcxLycgKyB2YWx1ZSxcbiAgfSkpXG4pO1xuXG5leHBvcnQgZnVuY3Rpb24gTG9raU9wdGlvbkZpZWxkcyhwcm9wczogTG9raU9wdGlvbkZpZWxkc1Byb3BzKSB7XG4gIGNvbnN0IHsgbGluZUxpbWl0VmFsdWUsIHJlc29sdXRpb24sIG9uUnVuUXVlcnksIHJ1bk9uQmx1ciwgb25DaGFuZ2UgfSA9IHByb3BzO1xuICBjb25zdCBxdWVyeSA9IHByb3BzLnF1ZXJ5ID8/IHt9O1xuICBjb25zdCBxdWVyeVR5cGUgPSBnZXRMb2tpUXVlcnlUeXBlKHF1ZXJ5KTtcblxuICBmdW5jdGlvbiBvbkNoYW5nZVF1ZXJ5TGltaXQodmFsdWU6IHN0cmluZykge1xuICAgIGNvbnN0IG5leHRRdWVyeSA9IHsgLi4ucXVlcnksIG1heExpbmVzOiBwcmVwcm9jZXNzTWF4TGluZXModmFsdWUpIH07XG4gICAgb25DaGFuZ2UobmV4dFF1ZXJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUXVlcnlUeXBlQ2hhbmdlKHF1ZXJ5VHlwZTogTG9raVF1ZXJ5VHlwZSkge1xuICAgIGNvbnN0IHsgaW5zdGFudCwgcmFuZ2UsIC4uLnJlc3QgfSA9IHF1ZXJ5O1xuICAgIG9uQ2hhbmdlKHsgLi4ucmVzdCwgcXVlcnlUeXBlIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25NYXhMaW5lc0NoYW5nZShlOiBSZWFjdC5TeW50aGV0aWNFdmVudDxIVE1MSW5wdXRFbGVtZW50Pikge1xuICAgIGlmIChxdWVyeS5tYXhMaW5lcyAhPT0gcHJlcHJvY2Vzc01heExpbmVzKGUuY3VycmVudFRhcmdldC52YWx1ZSkpIHtcbiAgICAgIG9uQ2hhbmdlUXVlcnlMaW1pdChlLmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUmV0dXJuS2V5RG93bihlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSB7XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICBvblJ1blF1ZXJ5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25SZXNvbHV0aW9uQ2hhbmdlKG9wdGlvbjogU2VsZWN0YWJsZVZhbHVlPG51bWJlcj4pIHtcbiAgICBjb25zdCBuZXh0UXVlcnkgPSB7IC4uLnF1ZXJ5LCByZXNvbHV0aW9uOiBvcHRpb24udmFsdWUgfTtcbiAgICBvbkNoYW5nZShuZXh0UXVlcnkpO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGFyaWEtbGFiZWw9XCJMb2tpIGV4dHJhIGZpZWxkXCIgY2xhc3NOYW1lPVwiZ2YtZm9ybS1pbmxpbmVcIj5cbiAgICAgIHsvKlF1ZXJ5IHR5cGUgZmllbGQqL31cbiAgICAgIDxkaXZcbiAgICAgICAgZGF0YS10ZXN0aWQ9XCJxdWVyeVR5cGVGaWVsZFwiXG4gICAgICAgIGNsYXNzTmFtZT17Y3goXG4gICAgICAgICAgJ2dmLWZvcm0gZXhwbG9yZS1pbnB1dC1tYXJnaW4nLFxuICAgICAgICAgIGNzc2BcbiAgICAgICAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xuICAgICAgICAgIGBcbiAgICAgICAgKX1cbiAgICAgICAgYXJpYS1sYWJlbD1cIlF1ZXJ5IHR5cGUgZmllbGRcIlxuICAgICAgPlxuICAgICAgICA8SW5saW5lRm9ybUxhYmVsIHdpZHRoPVwiYXV0b1wiPlF1ZXJ5IHR5cGU8L0lubGluZUZvcm1MYWJlbD5cblxuICAgICAgICA8UmFkaW9CdXR0b25Hcm91cFxuICAgICAgICAgIG9wdGlvbnM9e3F1ZXJ5VHlwZU9wdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e3F1ZXJ5VHlwZX1cbiAgICAgICAgICBvbkNoYW5nZT17KHR5cGU6IExva2lRdWVyeVR5cGUpID0+IHtcbiAgICAgICAgICAgIG9uUXVlcnlUeXBlQ2hhbmdlKHR5cGUpO1xuICAgICAgICAgICAgaWYgKHJ1bk9uQmx1cikge1xuICAgICAgICAgICAgICBvblJ1blF1ZXJ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgey8qTGluZSBsaW1pdCBmaWVsZCovfVxuICAgICAgPGRpdlxuICAgICAgICBkYXRhLXRlc3RpZD1cImxpbmVMaW1pdEZpZWxkXCJcbiAgICAgICAgY2xhc3NOYW1lPXtjeChcbiAgICAgICAgICAnZ2YtZm9ybScsXG4gICAgICAgICAgY3NzYFxuICAgICAgICAgICAgZmxleC13cmFwOiBub3dyYXA7XG4gICAgICAgICAgYFxuICAgICAgICApfVxuICAgICAgICBhcmlhLWxhYmVsPVwiTGluZSBsaW1pdCBmaWVsZFwiXG4gICAgICA+XG4gICAgICAgIDxJbmxpbmVGaWVsZCBsYWJlbD1cIkxpbmUgbGltaXRcIiB0b29sdGlwPXsnVXBwZXIgbGltaXQgZm9yIG51bWJlciBvZiBsb2cgbGluZXMgcmV0dXJuZWQgYnkgcXVlcnkuJ30+XG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3aWR0aC00XCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiYXV0b1wiXG4gICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgIG1pbj17MH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtvbk1heExpbmVzQ2hhbmdlfVxuICAgICAgICAgICAgb25LZXlEb3duPXtvblJldHVybktleURvd259XG4gICAgICAgICAgICB2YWx1ZT17bGluZUxpbWl0VmFsdWV9XG4gICAgICAgICAgICBvbkJsdXI9eygpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHJ1bk9uQmx1cikge1xuICAgICAgICAgICAgICAgIG9uUnVuUXVlcnkoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0lubGluZUZpZWxkPlxuICAgICAgICA8SW5saW5lRmllbGRcbiAgICAgICAgICBsYWJlbD1cIlJlc29sdXRpb25cIlxuICAgICAgICAgIHRvb2x0aXA9e1xuICAgICAgICAgICAgJ1Jlc29sdXRpb24gMS8xIHNldHMgc3RlcCBwYXJhbWV0ZXIgb2YgTG9raSBtZXRyaWNzIHJhbmdlIHF1ZXJpZXMgc3VjaCB0aGF0IGVhY2ggcGl4ZWwgY29ycmVzcG9uZHMgdG8gb25lIGRhdGEgcG9pbnQuIEZvciBiZXR0ZXIgcGVyZm9ybWFuY2UsIGxvd2VyIHJlc29sdXRpb25zIGNhbiBiZSBwaWNrZWQuIDEvMiBvbmx5IHJldHJpZXZlcyBhIGRhdGEgcG9pbnQgZm9yIGV2ZXJ5IG90aGVyIHBpeGVsLCBhbmQgMS8xMCByZXRyaWV2ZXMgb25lIGRhdGEgcG9pbnQgcGVyIDEwIHBpeGVscy4nXG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtvblJlc29sdXRpb25DaGFuZ2V9XG4gICAgICAgICAgICBvcHRpb25zPXtSRVNPTFVUSU9OX09QVElPTlN9XG4gICAgICAgICAgICB2YWx1ZT17cmVzb2x1dGlvbn1cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJTZWxlY3QgcmVzb2x1dGlvblwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtZW1vKExva2lPcHRpb25GaWVsZHMpO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJlcHJvY2Vzc01heExpbmVzKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICBjb25zdCBtYXhMaW5lcyA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gIGlmIChpc05hTihtYXhMaW5lcykgfHwgbWF4TGluZXMgPCAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJldHVybiBtYXhMaW5lcztcbn1cbiJdLCJuYW1lcyI6WyJxdWVyeVR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/LokiOptionFields.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/LokiQueryEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryEditor: () => (/* binding */ LokiQueryEditor),\n/* harmony export */   testIds: () => (/* binding */ testIds)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/usePrevious.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/app.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/data.ts\");\n/* harmony import */ var _grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"./packages/grafana-e2e-selectors/src/selectors/index.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorHeader.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/FlexItem.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Space.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRows.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/ConfirmModal/ConfirmModal.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_QueryEditorModeToggle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryEditorModeToggle.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_QueryHeaderSwitch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryHeaderSwitch.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/types.ts\");\n/* harmony import */ var _prometheus_querybuilder_shared_hooks_useFlag__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/hooks/useFlag.ts\");\n/* harmony import */ var _querybuilder_components_LabelBrowserModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/LabelBrowserModal.tsx\");\n/* harmony import */ var _querybuilder_components_LokiQueryBuilderContainer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderContainer.tsx\");\n/* harmony import */ var _querybuilder_components_LokiQueryBuilderOptions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderOptions.tsx\");\n/* harmony import */ var _querybuilder_components_LokiQueryCodeEditor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryCodeEditor.tsx\");\n/* harmony import */ var _querybuilder_components_QueryPatternsModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/QueryPatternsModal.tsx\");\n/* harmony import */ var _querybuilder_parsing__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/parsing.ts\");\n/* harmony import */ var _querybuilder_state__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/state.ts\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/stats.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst testIds = {\n  editor: \"loki-editor\"\n};\nconst LokiQueryEditor = react__WEBPACK_IMPORTED_MODULE_1___default().memo((props) => {\n  const { onChange, onRunQuery, onAddQuery, data, app, queries, datasource } = props;\n  const [parseModalOpen, setParseModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [queryPatternsModalOpen, setQueryPatternsModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [dataIsStale, setDataIsStale] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [labelBrowserVisible, setLabelBrowserVisible] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [queryStats, setQueryStats] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const { flag: explain, setFlag: setExplain } = (0,_prometheus_querybuilder_shared_hooks_useFlag__WEBPACK_IMPORTED_MODULE_5__.useFlag)(_prometheus_querybuilder_shared_hooks_useFlag__WEBPACK_IMPORTED_MODULE_5__.lokiQueryEditorExplainKey);\n  const timerange = datasource.getTimeRange();\n  const predefinedOperations = datasource.predefinedOperations;\n  const previousTimerange = (0,react_use__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(timerange);\n  const query = (0,_querybuilder_state__WEBPACK_IMPORTED_MODULE_12__.getQueryWithDefaults)(props.query);\n  if (_grafana_runtime__WEBPACK_IMPORTED_MODULE_15__.config.featureToggles.lokiPredefinedOperations && !query.expr && predefinedOperations) {\n    query.expr = `{} ${predefinedOperations}`;\n  }\n  const previousQuery = (0,react_use__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(query.expr);\n  const editorMode = query.editorMode;\n  const onExplainChange = (event) => {\n    setExplain(event.currentTarget.checked);\n  };\n  const onEditorModeChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (newEditorMode) => {\n      (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_16__.reportInteraction)(\"grafana_loki_editor_mode_clicked\", {\n        newEditor: newEditorMode,\n        previousEditor: query.editorMode ?? \"\",\n        newQuery: !query.expr,\n        app: app ?? \"\"\n      });\n      if (newEditorMode === app_plugins_datasource_prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_4__.QueryEditorMode.Builder) {\n        const result = (0,_querybuilder_parsing__WEBPACK_IMPORTED_MODULE_11__.buildVisualQueryFromString)(query.expr || \"\");\n        if (result.errors.length) {\n          setParseModalOpen(true);\n          return;\n        }\n      }\n      (0,_querybuilder_state__WEBPACK_IMPORTED_MODULE_12__.changeEditorMode)(query, newEditorMode, onChange);\n    },\n    [onChange, query, app]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    setDataIsStale(false);\n  }, [data]);\n  const onChangeInternal = (query2) => {\n    if (!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(query2, props.query)) {\n      setDataIsStale(true);\n    }\n    onChange(query2);\n  };\n  const onClickLabelBrowserButton = () => {\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_16__.reportInteraction)(\"grafana_loki_label_browser_opened\", {\n      app\n    });\n    setLabelBrowserVisible((visible) => !visible);\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const update = (0,_stats__WEBPACK_IMPORTED_MODULE_13__.shouldUpdateStats)(query.expr, previousQuery, timerange, previousTimerange);\n    if (update) {\n      const makeAsyncRequest = async () => {\n        const stats = await (0,_stats__WEBPACK_IMPORTED_MODULE_13__.getStats)(datasource, query.expr);\n        setQueryStats(stats);\n      };\n      makeAsyncRequest();\n    }\n  }, [datasource, timerange, previousTimerange, query, previousQuery, setQueryStats]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_17__.ConfirmModal,\n    {\n      isOpen: parseModalOpen,\n      title: \"Query parsing\",\n      body: \"There were errors while trying to parse the query. Continuing to visual builder may lose some parts of the query.\",\n      confirmText: \"Continue\",\n      onConfirm: () => {\n        onChange({ ...query, editorMode: app_plugins_datasource_prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_4__.QueryEditorMode.Builder });\n        setParseModalOpen(false);\n      },\n      onDismiss: () => setParseModalOpen(false)\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _querybuilder_components_QueryPatternsModal__WEBPACK_IMPORTED_MODULE_10__.QueryPatternsModal,\n    {\n      isOpen: queryPatternsModalOpen,\n      onClose: () => setQueryPatternsModalOpen(false),\n      query,\n      queries,\n      app,\n      onChange,\n      onAddQuery\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _querybuilder_components_LabelBrowserModal__WEBPACK_IMPORTED_MODULE_6__.LabelBrowserModal,\n    {\n      isOpen: labelBrowserVisible,\n      datasource,\n      query,\n      app,\n      onClose: () => setLabelBrowserVisible(false),\n      onChange: onChangeInternal,\n      onRunQuery\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_18__.EditorHeader, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_19__.Stack, { gap: 1 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_20__.Button,\n    {\n      \"aria-label\": _grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_21__.selectors.components.QueryBuilder.queryPatterns,\n      variant: \"secondary\",\n      size: \"sm\",\n      onClick: () => {\n        setQueryPatternsModalOpen((prevValue) => !prevValue);\n        const visualQuery = (0,_querybuilder_parsing__WEBPACK_IMPORTED_MODULE_11__.buildVisualQueryFromString)(query.expr || \"\");\n        (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_16__.reportInteraction)(\"grafana_loki_query_patterns_opened\", {\n          version: \"v2\",\n          app: app ?? \"\",\n          editorMode: query.editorMode,\n          preSelectedOperationsCount: visualQuery.query.operations.length,\n          preSelectedLabelsCount: visualQuery.query.labels.length\n        });\n      }\n    },\n    \"Kick start your query\"\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_20__.Button, { variant: \"secondary\", size: \"sm\", onClick: onClickLabelBrowserButton, \"data-testid\": \"label-browser-button\" }, \"Label browser\")), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(app_plugins_datasource_prometheus_querybuilder_shared_QueryHeaderSwitch__WEBPACK_IMPORTED_MODULE_3__.QueryHeaderSwitch, { label: \"Explain query\", value: explain, onChange: onExplainChange }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_22__.FlexItem, { grow: 1 }), app !== _grafana_data__WEBPACK_IMPORTED_MODULE_23__.CoreApp.Explore && app !== _grafana_data__WEBPACK_IMPORTED_MODULE_23__.CoreApp.Correlations && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_20__.Button,\n    {\n      variant: dataIsStale ? \"primary\" : \"secondary\",\n      size: \"sm\",\n      onClick: onRunQuery,\n      icon: data?.state === _grafana_data__WEBPACK_IMPORTED_MODULE_24__.LoadingState.Loading ? \"fa fa-spinner\" : void 0,\n      disabled: data?.state === _grafana_data__WEBPACK_IMPORTED_MODULE_24__.LoadingState.Loading\n    },\n    \"Run queries\"\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(app_plugins_datasource_prometheus_querybuilder_shared_QueryEditorModeToggle__WEBPACK_IMPORTED_MODULE_2__.QueryEditorModeToggle, { mode: editorMode, onChange: onEditorModeChange })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_25__.Space, { v: 0.5 }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_26__.EditorRows, null, editorMode === app_plugins_datasource_prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_4__.QueryEditorMode.Code && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _querybuilder_components_LokiQueryCodeEditor__WEBPACK_IMPORTED_MODULE_9__.LokiQueryCodeEditor,\n    {\n      ...props,\n      query,\n      onChange: onChangeInternal,\n      showExplain: explain,\n      setQueryStats\n    }\n  ), editorMode === app_plugins_datasource_prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_4__.QueryEditorMode.Builder && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _querybuilder_components_LokiQueryBuilderContainer__WEBPACK_IMPORTED_MODULE_7__.LokiQueryBuilderContainer,\n    {\n      datasource: props.datasource,\n      query,\n      onChange: onChangeInternal,\n      onRunQuery: props.onRunQuery,\n      showExplain: explain\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _querybuilder_components_LokiQueryBuilderOptions__WEBPACK_IMPORTED_MODULE_8__.LokiQueryBuilderOptions,\n    {\n      query,\n      onChange,\n      onRunQuery,\n      app,\n      maxLines: datasource.maxLines,\n      queryStats\n    }\n  )));\n});\nLokiQueryEditor.displayName = \"LokiQueryEditor\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raVF1ZXJ5RWRpdG9yLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNnRDtBQUM1QztBQUVVO0FBQ1o7QUFDdUM7QUFDdkI7QUFDTDtBQUNDO0FBQ0o7QUFDRjtBQUVtQjtBQUNqQjtBQUNRO0FBQ0Y7QUFDSjtBQUNEO0FBQ1E7QUFDWTtBQUdYO0FBR3JDLE1BQU0sVUFBVTtBQUFBLEVBQ3JCLFFBQVE7QUFDVjtBQUVPLE1BQU0sa0JBQWtCLGlEQUFVLENBQXVCLENBQUMsVUFBVTtBQUN6RSxRQUFNLEVBQUUsVUFBVSxZQUFZLFlBQVksTUFBTSxLQUFLLFNBQVMsV0FBVyxJQUFJO0FBQzdFLFFBQU0sQ0FBQyxnQkFBZ0IsaUJBQWlCLElBQUksK0NBQVEsQ0FBQyxLQUFLO0FBQzFELFFBQU0sQ0FBQyx3QkFBd0IseUJBQXlCLElBQUksK0NBQVEsQ0FBQyxLQUFLO0FBQzFFLFFBQU0sQ0FBQyxhQUFhLGNBQWMsSUFBSSwrQ0FBUSxDQUFDLEtBQUs7QUFDcEQsUUFBTSxDQUFDLHFCQUFxQixzQkFBc0IsSUFBSSwrQ0FBUSxDQUFDLEtBQUs7QUFDcEUsUUFBTSxDQUFDLFlBQVksYUFBYSxJQUFJLCtDQUFRLENBQW9CLElBQUk7QUFDcEUsUUFBTSxFQUFFLE1BQU0sU0FBUyxTQUFTLFdBQVcsSUFBSSxzRkFBTyxDQUFDLG9HQUF5QjtBQUVoRixRQUFNLFlBQVksV0FBVyxhQUFhO0FBQzFDLFFBQU0sdUJBQXVCLFdBQVc7QUFDeEMsUUFBTSxvQkFBb0Isc0RBQVcsQ0FBQyxTQUFTO0FBRS9DLFFBQU0sUUFBUSwwRUFBb0IsQ0FBQyxNQUFNLEtBQUs7QUFDOUMsTUFBSSxxREFBTSxDQUFDLGVBQWUsNEJBQTRCLENBQUMsTUFBTSxRQUFRLHNCQUFzQjtBQUN6RixVQUFNLE9BQU8sTUFBTTtBQUFBLEVBQ3JCO0FBQ0EsUUFB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LEVBQ0YsR0FFRCxlQUFlLHdHQUFlLENBQUMsV0FDOUI7QUFBQSxJQUFDLHlHQUF5QjtBQUF6QjtBQUFBLE1BQ0MsWUFBWSxNQUFNO0FBQUEsTUFDbEI7QUFBQSxNQUNBLFVBQVU7QUFBQSxNQUNWLFlBQVksTUFBTTtBQUFBLE1BQ2xCLGFBQWE7QUFBQTtBQUFBLEVBQ2YsR0FFRjtBQUFBLElBQUMscUdBQXVCO0FBQXZCO0FBQUEsTUFDQztBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsVUFBVSxXQUFXO0FBQUEsTUFDckI7QUFBQTtBQUFBLEVBQ0YsQ0FDRixDQUNGO0FBRUosQ0FBQztBQUVELGdCQUFnQixjQUFjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvY29tcG9uZW50cy9Mb2tpUXVlcnlFZGl0b3IudHN4PzM2ZTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNFcXVhbCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgU3ludGhldGljRXZlbnQsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUHJldmlvdXMgfSBmcm9tICdyZWFjdC11c2UnO1xuXG5pbXBvcnQgeyBDb3JlQXBwLCBMb2FkaW5nU3RhdGUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IHNlbGVjdG9ycyB9IGZyb20gJ0BncmFmYW5hL2UyZS1zZWxlY3RvcnMnO1xuaW1wb3J0IHsgRWRpdG9ySGVhZGVyLCBFZGl0b3JSb3dzLCBGbGV4SXRlbSwgU3BhY2UsIFN0YWNrIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IGNvbmZpZywgcmVwb3J0SW50ZXJhY3Rpb24gfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcbmltcG9ydCB7IEJ1dHRvbiwgQ29uZmlybU1vZGFsIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgUXVlcnlFZGl0b3JNb2RlVG9nZ2xlIH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvUXVlcnlFZGl0b3JNb2RlVG9nZ2xlJztcbmltcG9ydCB7IFF1ZXJ5SGVhZGVyU3dpdGNoIH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvUXVlcnlIZWFkZXJTd2l0Y2gnO1xuaW1wb3J0IHsgUXVlcnlFZGl0b3JNb2RlIH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvdHlwZXMnO1xuXG5pbXBvcnQgeyBsb2tpUXVlcnlFZGl0b3JFeHBsYWluS2V5LCB1c2VGbGFnIH0gZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL2hvb2tzL3VzZUZsYWcnO1xuaW1wb3J0IHsgTGFiZWxCcm93c2VyTW9kYWwgfSBmcm9tICcuLi9xdWVyeWJ1aWxkZXIvY29tcG9uZW50cy9MYWJlbEJyb3dzZXJNb2RhbCc7XG5pbXBvcnQgeyBMb2tpUXVlcnlCdWlsZGVyQ29udGFpbmVyIH0gZnJvbSAnLi4vcXVlcnlidWlsZGVyL2NvbXBvbmVudHMvTG9raVF1ZXJ5QnVpbGRlckNvbnRhaW5lcic7XG5pbXBvcnQgeyBMb2tpUXVlcnlCdWlsZGVyT3B0aW9ucyB9IGZyb20gJy4uL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xva2lRdWVyeUJ1aWxkZXJPcHRpb25zJztcbmltcG9ydCB7IExva2lRdWVyeUNvZGVFZGl0b3IgfSBmcm9tICcuLi9xdWVyeWJ1aWxkZXIvY29tcG9uZW50cy9Mb2tpUXVlcnlDb2RlRWRpdG9yJztcbmltcG9ydCB7IFF1ZXJ5UGF0dGVybnNNb2RhbCB9IGZyb20gJy4uL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL1F1ZXJ5UGF0dGVybnNNb2RhbCc7XG5pbXBvcnQgeyBidWlsZFZpc3VhbFF1ZXJ5RnJvbVN0cmluZyB9IGZyb20gJy4uL3F1ZXJ5YnVpbGRlci9wYXJzaW5nJztcbmltcG9ydCB7IGNoYW5nZUVkaXRvck1vZGUsIGdldFF1ZXJ5V2l0aERlZmF1bHRzIH0gZnJvbSAnLi4vcXVlcnlidWlsZGVyL3N0YXRlJztcbmltcG9ydCB7IExva2lRdWVyeSwgUXVlcnlTdGF0cyB9IGZyb20gJy4uL3R5cGVzJztcblxuaW1wb3J0IHsgZ2V0U3RhdHMsIHNob3VsZFVwZGF0ZVN0YXRzIH0gZnJvbSAnLi9zdGF0cyc7XG5pbXBvcnQgeyBMb2tpUXVlcnlFZGl0b3JQcm9wcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgdGVzdElkcyA9IHtcbiAgZWRpdG9yOiAnbG9raS1lZGl0b3InLFxufTtcblxuZXhwb3J0IGNvbnN0IExva2lRdWVyeUVkaXRvciA9IFJlYWN0Lm1lbW88TG9raVF1ZXJ5RWRpdG9yUHJvcHM+KChwcm9wcykgPT4ge1xuICBjb25zdCB7IG9uQ2hhbmdlLCBvblJ1blF1ZXJ5LCBvbkFkZFF1ZXJ5LCBkYXRhLCBhcHAsIHF1ZXJpZXMsIGRhdGFzb3VyY2UgfSA9IHByb3BzO1xuICBjb25zdCBbcGFyc2VNb2RhbE9wZW4sIHNldFBhcnNlTW9kYWxPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3F1ZXJ5UGF0dGVybnNNb2RhbE9wZW4sIHNldFF1ZXJ5UGF0dGVybnNNb2RhbE9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGF0YUlzU3RhbGUsIHNldERhdGFJc1N0YWxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xhYmVsQnJvd3NlclZpc2libGUsIHNldExhYmVsQnJvd3NlclZpc2libGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcXVlcnlTdGF0cywgc2V0UXVlcnlTdGF0c10gPSB1c2VTdGF0ZTxRdWVyeVN0YXRzIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHsgZmxhZzogZXhwbGFpbiwgc2V0RmxhZzogc2V0RXhwbGFpbiB9ID0gdXNlRmxhZyhsb2tpUXVlcnlFZGl0b3JFeHBsYWluS2V5KTtcblxuICBjb25zdCB0aW1lcmFuZ2UgPSBkYXRhc291cmNlLmdldFRpbWVSYW5nZSgpO1xuICBjb25zdCBwcmVkZWZpbmVkT3BlcmF0aW9ucyA9IGRhdGFzb3VyY2UucHJlZGVmaW5lZE9wZXJhdGlvbnM7XG4gIGNvbnN0IHByZXZpb3VzVGltZXJhbmdlID0gdXNlUHJldmlvdXModGltZXJhbmdlKTtcblxuICBjb25zdCBxdWVyeSA9IGdldFF1ZXJ5V2l0aERlZmF1bHRzKHByb3BzLnF1ZXJ5KTtcbiAgaWYgKGNvbmZpZy5mZWF0dXJlVG9nZ2xlcy5sb2tpUHJlZGVmaW5lZE9wZXJhdGlvbnMgJiYgIXF1ZXJ5LmV4cHIgJiYgcHJlZGVmaW5lZE9wZXJhdGlvbnMpIHtcbiAgICBxdWVyeS5leHByID0gYHt9ICR7cHJlZGVmaW5lZE9wZXJhdGlvbnN9YDtcbiAgfVxuICBjb25zdCBwcmV2aW91c1F1ZXJ5ID0gdXNlUHJldmlvdXMocXVlcnkuZXhwcik7XG5cbiAgLy8gVGhpcyBzaG91bGQgYmUgZmlsbGVkIGluIGZyb20gdGhlIGRlZmF1bHRzIGJ5IG5vdy5cbiAgY29uc3QgZWRpdG9yTW9kZSA9IHF1ZXJ5LmVkaXRvck1vZGUhO1xuXG4gIGNvbnN0IG9uRXhwbGFpbkNoYW5nZSA9IChldmVudDogU3ludGhldGljRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBzZXRFeHBsYWluKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZCk7XG4gIH07XG5cbiAgY29uc3Qgb25FZGl0b3JNb2RlQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKG5ld0VkaXRvck1vZGU6IFF1ZXJ5RWRpdG9yTW9kZSkgPT4ge1xuICAgICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfbG9raV9lZGl0b3JfbW9kZV9jbGlja2VkJywge1xuICAgICAgICBuZXdFZGl0b3I6IG5ld0VkaXRvck1vZGUsXG4gICAgICAgIHByZXZpb3VzRWRpdG9yOiBxdWVyeS5lZGl0b3JNb2RlID8/ICcnLFxuICAgICAgICBuZXdRdWVyeTogIXF1ZXJ5LmV4cHIsXG4gICAgICAgIGFwcDogYXBwID8/ICcnLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChuZXdFZGl0b3JNb2RlID09PSBRdWVyeUVkaXRvck1vZGUuQnVpbGRlcikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBidWlsZFZpc3VhbFF1ZXJ5RnJvbVN0cmluZyhxdWVyeS5leHByIHx8ICcnKTtcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGVycm9ycywgZ2l2ZSB1c2VyIGEgY2hhbmNlIHRvIGRlY2lkZSBpZiB0aGV5IHdhbnQgdG8gZ28gdG8gYnVpbGRlciBhcyB0aGF0IGNhbiBsb3NlIHNvbWUgZGF0YS5cbiAgICAgICAgaWYgKHJlc3VsdC5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgc2V0UGFyc2VNb2RhbE9wZW4odHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjaGFuZ2VFZGl0b3JNb2RlKHF1ZXJ5LCBuZXdFZGl0b3JNb2RlLCBvbkNoYW5nZSk7XG4gICAgfSxcbiAgICBbb25DaGFuZ2UsIHF1ZXJ5LCBhcHBdXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXREYXRhSXNTdGFsZShmYWxzZSk7XG4gIH0sIFtkYXRhXSk7XG5cbiAgY29uc3Qgb25DaGFuZ2VJbnRlcm5hbCA9IChxdWVyeTogTG9raVF1ZXJ5KSA9PiB7XG4gICAgaWYgKCFpc0VxdWFsKHF1ZXJ5LCBwcm9wcy5xdWVyeSkpIHtcbiAgICAgIHNldERhdGFJc1N0YWxlKHRydWUpO1xuICAgIH1cbiAgICBvbkNoYW5nZShxdWVyeSk7XG4gIH07XG5cbiAgY29uc3Qgb25DbGlja0xhYmVsQnJvd3NlckJ1dHRvbiA9ICgpID0+IHtcbiAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9sb2tpX2xhYmVsX2Jyb3dzZXJfb3BlbmVkJywge1xuICAgICAgYXBwOiBhcHAsXG4gICAgfSk7XG5cbiAgICBzZXRMYWJlbEJyb3dzZXJWaXNpYmxlKCh2aXNpYmxlKSA9PiAhdmlzaWJsZSk7XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1cGRhdGUgPSBzaG91bGRVcGRhdGVTdGF0cyhxdWVyeS5leHByLCBwcmV2aW91c1F1ZXJ5LCB0aW1lcmFuZ2UsIHByZXZpb3VzVGltZXJhbmdlKTtcbiAgICBpZiAodXBkYXRlKSB7XG4gICAgICBjb25zdCBtYWtlQXN5bmNSZXF1ZXN0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGdldFN0YXRzKGRhdGFzb3VyY2UsIHF1ZXJ5LmV4cHIpO1xuICAgICAgICBzZXRRdWVyeVN0YXRzKHN0YXRzKTtcbiAgICAgIH07XG4gICAgICBtYWtlQXN5bmNSZXF1ZXN0KCk7XG4gICAgfVxuICB9LCBbZGF0YXNvdXJjZSwgdGltZXJhbmdlLCBwcmV2aW91c1RpbWVyYW5nZSwgcXVlcnksIHByZXZpb3VzUXVlcnksIHNldFF1ZXJ5U3RhdHNdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8Q29uZmlybU1vZGFsXG4gICAgICAgIGlzT3Blbj17cGFyc2VNb2RhbE9wZW59XG4gICAgICAgIHRpdGxlPVwiUXVlcnkgcGFyc2luZ1wiXG4gICAgICAgIGJvZHk9XCJUaGVyZSB3ZXJlIGVycm9ycyB3aGlsZSB0cnlpbmcgdG8gcGFyc2UgdGhlIHF1ZXJ5LiBDb250aW51aW5nIHRvIHZpc3VhbCBidWlsZGVyIG1heSBsb3NlIHNvbWUgcGFydHMgb2YgdGhlIHF1ZXJ5LlwiXG4gICAgICAgIGNvbmZpcm1UZXh0PVwiQ29udGludWVcIlxuICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICBvbkNoYW5nZSh7IC4uLnF1ZXJ5LCBlZGl0b3JNb2RlOiBRdWVyeUVkaXRvck1vZGUuQnVpbGRlciB9KTtcbiAgICAgICAgICBzZXRQYXJzZU1vZGFsT3BlbihmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0UGFyc2VNb2RhbE9wZW4oZmFsc2UpfVxuICAgICAgLz5cbiAgICAgIDxRdWVyeVBhdHRlcm5zTW9kYWxcbiAgICAgICAgaXNPcGVuPXtxdWVyeVBhdHRlcm5zTW9kYWxPcGVufVxuICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRRdWVyeVBhdHRlcm5zTW9kYWxPcGVuKGZhbHNlKX1cbiAgICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgICBxdWVyaWVzPXtxdWVyaWVzfVxuICAgICAgICBhcHA9e2FwcH1cbiAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICBvbkFkZFF1ZXJ5PXtvbkFkZFF1ZXJ5fVxuICAgICAgLz5cbiAgICAgIDxMYWJlbEJyb3dzZXJNb2RhbFxuICAgICAgICBpc09wZW49e2xhYmVsQnJvd3NlclZpc2libGV9XG4gICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgIHF1ZXJ5PXtxdWVyeX1cbiAgICAgICAgYXBwPXthcHB9XG4gICAgICAgIG9uQ2xvc2U9eygpID0+IHNldExhYmVsQnJvd3NlclZpc2libGUoZmFsc2UpfVxuICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VJbnRlcm5hbH1cbiAgICAgICAgb25SdW5RdWVyeT17b25SdW5RdWVyeX1cbiAgICAgIC8+XG4gICAgICA8RWRpdG9ySGVhZGVyPlxuICAgICAgICA8U3RhY2sgZ2FwPXsxfT5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtzZWxlY3RvcnMuY29tcG9uZW50cy5RdWVyeUJ1aWxkZXIucXVlcnlQYXR0ZXJuc31cbiAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgc2V0UXVlcnlQYXR0ZXJuc01vZGFsT3BlbigocHJldlZhbHVlKSA9PiAhcHJldlZhbHVlKTtcblxuICAgICAgICAgICAgICBjb25zdCB2aXN1YWxRdWVyeSA9IGJ1aWxkVmlzdWFsUXVlcnlGcm9tU3RyaW5nKHF1ZXJ5LmV4cHIgfHwgJycpO1xuICAgICAgICAgICAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9sb2tpX3F1ZXJ5X3BhdHRlcm5zX29wZW5lZCcsIHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAndjInLFxuICAgICAgICAgICAgICAgIGFwcDogYXBwID8/ICcnLFxuICAgICAgICAgICAgICAgIGVkaXRvck1vZGU6IHF1ZXJ5LmVkaXRvck1vZGUsXG4gICAgICAgICAgICAgICAgcHJlU2VsZWN0ZWRPcGVyYXRpb25zQ291bnQ6IHZpc3VhbFF1ZXJ5LnF1ZXJ5Lm9wZXJhdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHByZVNlbGVjdGVkTGFiZWxzQ291bnQ6IHZpc3VhbFF1ZXJ5LnF1ZXJ5LmxhYmVscy5sZW5ndGgsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBLaWNrIHN0YXJ0IHlvdXIgcXVlcnlcbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIiBzaXplPVwic21cIiBvbkNsaWNrPXtvbkNsaWNrTGFiZWxCcm93c2VyQnV0dG9ufSBkYXRhLXRlc3RpZD1cImxhYmVsLWJyb3dzZXItYnV0dG9uXCI+XG4gICAgICAgICAgICBMYWJlbCBicm93c2VyXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvU3RhY2s+XG4gICAgICAgIDxRdWVyeUhlYWRlclN3aXRjaCBsYWJlbD1cIkV4cGxhaW4gcXVlcnlcIiB2YWx1ZT17ZXhwbGFpbn0gb25DaGFuZ2U9e29uRXhwbGFpbkNoYW5nZX0gLz5cbiAgICAgICAgPEZsZXhJdGVtIGdyb3c9ezF9IC8+XG4gICAgICAgIHthcHAgIT09IENvcmVBcHAuRXhwbG9yZSAmJiBhcHAgIT09IENvcmVBcHAuQ29ycmVsYXRpb25zICYmIChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PXtkYXRhSXNTdGFsZSA/ICdwcmltYXJ5JyA6ICdzZWNvbmRhcnknfVxuICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e29uUnVuUXVlcnl9XG4gICAgICAgICAgICBpY29uPXtkYXRhPy5zdGF0ZSA9PT0gTG9hZGluZ1N0YXRlLkxvYWRpbmcgPyAnZmEgZmEtc3Bpbm5lcicgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBkaXNhYmxlZD17ZGF0YT8uc3RhdGUgPT09IExvYWRpbmdTdGF0ZS5Mb2FkaW5nfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFJ1biBxdWVyaWVzXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxRdWVyeUVkaXRvck1vZGVUb2dnbGUgbW9kZT17ZWRpdG9yTW9kZSF9IG9uQ2hhbmdlPXtvbkVkaXRvck1vZGVDaGFuZ2V9IC8+XG4gICAgICA8L0VkaXRvckhlYWRlcj5cbiAgICAgIDxTcGFjZSB2PXswLjV9IC8+XG4gICAgICA8RWRpdG9yUm93cz5cbiAgICAgICAge2VkaXRvck1vZGUgPT09IFF1ZXJ5RWRpdG9yTW9kZS5Db2RlICYmIChcbiAgICAgICAgICA8TG9raVF1ZXJ5Q29kZUVkaXRvclxuICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlSW50ZXJuYWx9XG4gICAgICAgICAgICBzaG93RXhwbGFpbj17ZXhwbGFpbn1cbiAgICAgICAgICAgIHNldFF1ZXJ5U3RhdHM9e3NldFF1ZXJ5U3RhdHN9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge2VkaXRvck1vZGUgPT09IFF1ZXJ5RWRpdG9yTW9kZS5CdWlsZGVyICYmIChcbiAgICAgICAgICA8TG9raVF1ZXJ5QnVpbGRlckNvbnRhaW5lclxuICAgICAgICAgICAgZGF0YXNvdXJjZT17cHJvcHMuZGF0YXNvdXJjZX1cbiAgICAgICAgICAgIHF1ZXJ5PXtxdWVyeX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZUludGVybmFsfVxuICAgICAgICAgICAgb25SdW5RdWVyeT17cHJvcHMub25SdW5RdWVyeX1cbiAgICAgICAgICAgIHNob3dFeHBsYWluPXtleHBsYWlufVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxMb2tpUXVlcnlCdWlsZGVyT3B0aW9uc1xuICAgICAgICAgIHF1ZXJ5PXtxdWVyeX1cbiAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XG4gICAgICAgICAgb25SdW5RdWVyeT17b25SdW5RdWVyeX1cbiAgICAgICAgICBhcHA9e2FwcH1cbiAgICAgICAgICBtYXhMaW5lcz17ZGF0YXNvdXJjZS5tYXhMaW5lc31cbiAgICAgICAgICBxdWVyeVN0YXRzPXtxdWVyeVN0YXRzfVxuICAgICAgICAvPlxuICAgICAgPC9FZGl0b3JSb3dzPlxuICAgIDwvPlxuICApO1xufSk7XG5cbkxva2lRdWVyeUVkaXRvci5kaXNwbGF5TmFtZSA9ICdMb2tpUXVlcnlFZGl0b3InO1xuIl0sIm5hbWVzIjpbInF1ZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/LokiQueryEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/LokiQueryEditorByApp.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryEditorByApp: () => (/* binding */ LokiQueryEditorByApp),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   testIds: () => (/* binding */ testIds)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/app.ts\");\n/* harmony import */ var _LokiQueryEditor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryEditor.tsx\");\n/* harmony import */ var _LokiQueryEditorForAlerting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryEditorForAlerting.tsx\");\n\n\n\n\n\nfunction LokiQueryEditorByApp(props) {\n  const { app } = props;\n  switch (app) {\n    case _grafana_data__WEBPACK_IMPORTED_MODULE_3__.CoreApp.CloudAlerting:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_LokiQueryEditorForAlerting__WEBPACK_IMPORTED_MODULE_2__.LokiQueryEditorForAlerting, { ...props });\n    default:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_LokiQueryEditor__WEBPACK_IMPORTED_MODULE_1__.LokiQueryEditor, { ...props });\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(LokiQueryEditorByApp));\nconst testIds = {\n  editor: \"loki-editor\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raVF1ZXJ5RWRpdG9yQnlBcHAudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE0QjtBQUVKO0FBRVE7QUFDVztBQUdwQyxTQUFTLHFCQUFxQixPQUE2QjtBQUNoRSxRQUFNLEVBQUUsSUFBSSxJQUFJO0FBRWhCLFVBQVEsS0FBSztBQUFBLElBQ1gsS0FBSyxrREFBTyxDQUFDO0FBQ1gsYUFBTywyRUFBQyxtRkFBMEIsSUFBRSxHQUFHLE9BQU87QUFBQSxJQUNoRDtBQUNFLGFBQU8sMkVBQUMsNkRBQWUsSUFBRSxHQUFHLE9BQU87QUFBQSxFQUN2QztBQUNGO0FBRUEsaUVBQWUsMkNBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFDO0FBRW5DLE1BQU0sVUFBVTtBQUFBLEVBQ3JCLFFBQVE7QUFDViIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raVF1ZXJ5RWRpdG9yQnlBcHAudHN4P2ZhMTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IG1lbW8gfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IENvcmVBcHAgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxuaW1wb3J0IHsgTG9raVF1ZXJ5RWRpdG9yIH0gZnJvbSAnLi9Mb2tpUXVlcnlFZGl0b3InO1xuaW1wb3J0IHsgTG9raVF1ZXJ5RWRpdG9yRm9yQWxlcnRpbmcgfSBmcm9tICcuL0xva2lRdWVyeUVkaXRvckZvckFsZXJ0aW5nJztcbmltcG9ydCB7IExva2lRdWVyeUVkaXRvclByb3BzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBMb2tpUXVlcnlFZGl0b3JCeUFwcChwcm9wczogTG9raVF1ZXJ5RWRpdG9yUHJvcHMpIHtcbiAgY29uc3QgeyBhcHAgfSA9IHByb3BzO1xuXG4gIHN3aXRjaCAoYXBwKSB7XG4gICAgY2FzZSBDb3JlQXBwLkNsb3VkQWxlcnRpbmc6XG4gICAgICByZXR1cm4gPExva2lRdWVyeUVkaXRvckZvckFsZXJ0aW5nIHsuLi5wcm9wc30gLz47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiA8TG9raVF1ZXJ5RWRpdG9yIHsuLi5wcm9wc30gLz47XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbWVtbyhMb2tpUXVlcnlFZGl0b3JCeUFwcCk7XG5cbmV4cG9ydCBjb25zdCB0ZXN0SWRzID0ge1xuICBlZGl0b3I6ICdsb2tpLWVkaXRvcicsXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/LokiQueryEditorByApp.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/LokiQueryEditorForAlerting.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryEditorForAlerting: () => (/* binding */ LokiQueryEditorForAlerting),\n/* harmony export */   testIds: () => (/* binding */ testIds)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _LokiQueryField__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryField.tsx\");\n\n\n\nfunction LokiQueryEditorForAlerting(props) {\n  const { query, data, datasource, onChange, onRunQuery, history } = props;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _LokiQueryField__WEBPACK_IMPORTED_MODULE_1__.LokiQueryField,\n    {\n      datasource,\n      query,\n      onChange,\n      onRunQuery,\n      history,\n      data,\n      placeholder: \"Enter a Loki query\",\n      \"data-testid\": testIds.editor\n    }\n  );\n}\nconst testIds = {\n  editor: \"loki-editor-cloud-alerting\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raVF1ZXJ5RWRpdG9yRm9yQWxlcnRpbmcudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrQjtBQUVhO0FBR3hCLFNBQVMsMkJBQTJCLE9BQTZCO0FBQ3RFLFFBQU0sRUFBRSxPQUFPLE1BQU0sWUFBWSxVQUFVLFlBQVksUUFBUSxJQUFJO0FBRW5FLFNBQ0U7QUFBQSxJQUFDLDJEQUFjO0FBQWQ7QUFBQSxNQUNDO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBLGFBQVk7QUFBQSxNQUNaLGVBQWEsUUFBUTtBQUFBO0FBQUEsRUFDdkI7QUFFSjtBQUVPLE1BQU0sVUFBVTtBQUFBLEVBQ3JCLFFBQVE7QUFDViIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raVF1ZXJ5RWRpdG9yRm9yQWxlcnRpbmcudHN4P2E3NTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgTG9raVF1ZXJ5RmllbGQgfSBmcm9tICcuL0xva2lRdWVyeUZpZWxkJztcbmltcG9ydCB7IExva2lRdWVyeUVkaXRvclByb3BzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBMb2tpUXVlcnlFZGl0b3JGb3JBbGVydGluZyhwcm9wczogTG9raVF1ZXJ5RWRpdG9yUHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeSwgZGF0YSwgZGF0YXNvdXJjZSwgb25DaGFuZ2UsIG9uUnVuUXVlcnksIGhpc3RvcnkgfSA9IHByb3BzO1xuXG4gIHJldHVybiAoXG4gICAgPExva2lRdWVyeUZpZWxkXG4gICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgb25SdW5RdWVyeT17b25SdW5RdWVyeX1cbiAgICAgIGhpc3Rvcnk9e2hpc3Rvcnl9XG4gICAgICBkYXRhPXtkYXRhfVxuICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciBhIExva2kgcXVlcnlcIlxuICAgICAgZGF0YS10ZXN0aWQ9e3Rlc3RJZHMuZWRpdG9yfVxuICAgIC8+XG4gICk7XG59XG5cbmV4cG9ydCBjb25zdCB0ZXN0SWRzID0ge1xuICBlZGl0b3I6ICdsb2tpLWVkaXRvci1jbG91ZC1hbGVydGluZycsXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/LokiQueryEditorForAlerting.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/LokiQueryField.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryField: () => (/* binding */ LokiQueryField)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _languageUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/languageUtils.ts\");\n/* harmony import */ var _monaco_query_field_MonacoQueryFieldWrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/monaco-query-field/MonacoQueryFieldWrapper.tsx\");\n\n\n\n\nclass LokiQueryField extends (react__WEBPACK_IMPORTED_MODULE_0___default().PureComponent) {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n    this.onChangeQuery = (value, override) => {\n      const { query, onChange, onRunQuery } = this.props;\n      if (onChange) {\n        const nextQuery = { ...query, expr: value };\n        onChange(nextQuery);\n        if (override && onRunQuery) {\n          onRunQuery();\n        }\n      }\n    };\n    this.state = { labelsLoaded: false };\n  }\n  async componentDidMount() {\n    this._isMounted = true;\n    await this.props.datasource.languageProvider.start();\n    if (this._isMounted) {\n      this.setState({ labelsLoaded: true });\n    }\n  }\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      range,\n      datasource: { languageProvider }\n    } = this.props;\n    const refreshLabels = (0,_languageUtils__WEBPACK_IMPORTED_MODULE_1__.shouldRefreshLabels)(range, prevProps.range);\n    if (refreshLabels) {\n      languageProvider.fetchLabels();\n    }\n  }\n  render() {\n    const { ExtraFieldElement, query, datasource, history, onRunQuery, onQueryType } = this.props;\n    const placeholder = this.props.placeholder ?? \"Enter a Loki query (run with Shift+Enter)\";\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      \"div\",\n      {\n        className: \"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1\",\n        \"data-testid\": this.props[\"data-testid\"]\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"gf-form--grow flex-shrink-1 min-width-15\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n        _monaco_query_field_MonacoQueryFieldWrapper__WEBPACK_IMPORTED_MODULE_2__.MonacoQueryFieldWrapper,\n        {\n          datasource,\n          history: history ?? [],\n          onChange: this.onChangeQuery,\n          onRunQuery,\n          initialValue: query.expr ?? \"\",\n          placeholder,\n          onQueryType\n        }\n      ))\n    ), ExtraFieldElement);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvTG9raVF1ZXJ5RmllbGQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpQztBQUtHO0FBR0k7QUFhakMsTUFBTSx1QkFBdUIsNERBQW1CLENBQTJDO0FBQUEsRUFHaEcsWUFBWSxPQUE0QjtBQUN0QyxVQUFNLEtBQUs7QUFIYixzQkFBYTtBQWdDYix5QkFBZ0IsQ0FBQyxPQUFlLGFBQXVCO0FBRXJELFlBQU0sRUFBRSxPQUFPLFVBQVUsV0FBVyxJQUFJLEtBQUs7QUFDN0MsVUFBSSxVQUFVO0FBQ1osY0FBTSxZQUFZLEVBQUUsR0FBRyxPQUFPLE1BQU0sTUFBTTtBQUMxQyxpQkFBUyxTQUFTO0FBRWxCLFlBQUksWUFBWSxZQUFZO0FBQzFCLHFCQUFXO0FBQUEsUUFDYjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBdENFLFNBQUssUUFBUSxFQUFFLGNBQWMsTUFBTTtBQUFBLEVBQ3JDO0FBQUEsRUFFQSxNQUFNLG9CQUFvQjtBQUN4QixTQUFLLGFBQWE7QUFDbEIsVUFBTSxLQUFLLE1BQU0sV0FBVyxpQkFBaUIsTUFBTTtBQUNuRCxRQUFJLEtBQUssWUFBWTtBQUNuQixXQUFLLFNBQVMsRUFBRSxjQUFjLEtBQUssQ0FBQztBQUFBLElBQ3RDO0FBQUEsRUFDRjtBQUFBLEVBRUEsdUJBQXVCO0FBQ3JCLFNBQUssYUFBYTtBQUFBLEVBQ3BCO0FBQUEsRUFFQSxtQkFBbUIsV0FBZ0M7QUFDakQsVUFBTTtBQUFBLE1BQ0o7QUFBQSxNQUNBLFlBQVksRUFBRSxpQkFBaUI7QUFBQSxJQUNqQyxJQUFJLEtBQUs7QUFDVCxVQUFNLGdCQUFnQixtRUFBbUIsQ0FBQyxPQUFPLFVBQVUsS0FBSztBQUVoRSxRQUFJLGVBQWU7QUFDakIsdUJBQWlCLFlBQVk7QUFBQSxJQUMvQjtBQUFBLEVBQ0Y7QUFBQSxFQWVBLFNBQVM7QUFDUCxVQUFNLEVBQUUsbUJBQW1CLE9BQU8sWUFBWSxTQUFTLFlBQVksWUFBWSxJQUFJLEtBQUs7QUFDeEYsVUFBTSxjQUFjLEtBQUssTUFBTSxlQUFlO0FBRTlDLFdBQ0UsMElBQ0U7QUFBQSxNQUFDO0FBQUE7QUFBQSxRQUNDLFdBQVU7QUFBQSxRQUNWLGVBQWEsS0FBSyxNQUFNLGFBQWE7QUFBQTtBQUFBLE1BRXJDLDJFQUFDLFNBQUksV0FBVSw4Q0FDYjtBQUFBLFFBQUMsZ0dBQXVCO0FBQXZCO0FBQUEsVUFDQztBQUFBLFVBQ0EsU0FBUyxXQUFXLENBQUM7QUFBQSxVQUNyQixVQUFVLEtBQUs7QUFBQSxVQUNmO0FBQUEsVUFDQSxjQUFjLE1BQU0sUUFBUTtBQUFBLFVBQzVCO0FBQUEsVUFDQTtBQUFBO0FBQUEsTUFDRixDQUNGO0FBQUEsSUFDRixHQUNDLGlCQUNIO0FBQUEsRUFFSjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvY29tcG9uZW50cy9Mb2tpUXVlcnlGaWVsZC50c3g/NzJjNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBRdWVyeUVkaXRvclByb3BzIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmltcG9ydCB7IExva2lEYXRhc291cmNlIH0gZnJvbSAnLi4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBzaG91bGRSZWZyZXNoTGFiZWxzIH0gZnJvbSAnLi4vbGFuZ3VhZ2VVdGlscyc7XG5pbXBvcnQgeyBMb2tpUXVlcnksIExva2lPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBNb25hY29RdWVyeUZpZWxkV3JhcHBlciB9IGZyb20gJy4vbW9uYWNvLXF1ZXJ5LWZpZWxkL01vbmFjb1F1ZXJ5RmllbGRXcmFwcGVyJztcblxuZXhwb3J0IGludGVyZmFjZSBMb2tpUXVlcnlGaWVsZFByb3BzIGV4dGVuZHMgUXVlcnlFZGl0b3JQcm9wczxMb2tpRGF0YXNvdXJjZSwgTG9raVF1ZXJ5LCBMb2tpT3B0aW9ucz4ge1xuICBFeHRyYUZpZWxkRWxlbWVudD86IFJlYWN0Tm9kZTtcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICdkYXRhLXRlc3RpZCc/OiBzdHJpbmc7XG4gIG9uUXVlcnlUeXBlPzogKHF1ZXJ5OiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBMb2tpUXVlcnlGaWVsZFN0YXRlIHtcbiAgbGFiZWxzTG9hZGVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgTG9raVF1ZXJ5RmllbGQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExva2lRdWVyeUZpZWxkUHJvcHMsIExva2lRdWVyeUZpZWxkU3RhdGU+IHtcbiAgX2lzTW91bnRlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBMb2tpUXVlcnlGaWVsZFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHsgbGFiZWxzTG9hZGVkOiBmYWxzZSB9O1xuICB9XG5cbiAgYXN5bmMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5faXNNb3VudGVkID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLnByb3BzLmRhdGFzb3VyY2UubGFuZ3VhZ2VQcm92aWRlci5zdGFydCgpO1xuICAgIGlmICh0aGlzLl9pc01vdW50ZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBsYWJlbHNMb2FkZWQ6IHRydWUgfSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBMb2tpUXVlcnlGaWVsZFByb3BzKSB7XG4gICAgY29uc3Qge1xuICAgICAgcmFuZ2UsXG4gICAgICBkYXRhc291cmNlOiB7IGxhbmd1YWdlUHJvdmlkZXIgfSxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCByZWZyZXNoTGFiZWxzID0gc2hvdWxkUmVmcmVzaExhYmVscyhyYW5nZSwgcHJldlByb3BzLnJhbmdlKTtcbiAgICAvLyBXZSB3YW50IHRvIHJlZnJlc2ggbGFiZWxzIHdoZW4gcmFuZ2UgY2hhbmdlcyAod2Ugcm91bmQgdXAgaW50ZXJ2YWxzIHRvIGEgbWludXRlKVxuICAgIGlmIChyZWZyZXNoTGFiZWxzKSB7XG4gICAgICBsYW5ndWFnZVByb3ZpZGVyLmZldGNoTGFiZWxzKCk7XG4gICAgfVxuICB9XG5cbiAgb25DaGFuZ2VRdWVyeSA9ICh2YWx1ZTogc3RyaW5nLCBvdmVycmlkZT86IGJvb2xlYW4pID0+IHtcbiAgICAvLyBTZW5kIHRleHQgY2hhbmdlIHRvIHBhcmVudFxuICAgIGNvbnN0IHsgcXVlcnksIG9uQ2hhbmdlLCBvblJ1blF1ZXJ5IH0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgY29uc3QgbmV4dFF1ZXJ5ID0geyAuLi5xdWVyeSwgZXhwcjogdmFsdWUgfTtcbiAgICAgIG9uQ2hhbmdlKG5leHRRdWVyeSk7XG5cbiAgICAgIGlmIChvdmVycmlkZSAmJiBvblJ1blF1ZXJ5KSB7XG4gICAgICAgIG9uUnVuUXVlcnkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgRXh0cmFGaWVsZEVsZW1lbnQsIHF1ZXJ5LCBkYXRhc291cmNlLCBoaXN0b3J5LCBvblJ1blF1ZXJ5LCBvblF1ZXJ5VHlwZSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMucHJvcHMucGxhY2Vob2xkZXIgPz8gJ0VudGVyIGEgTG9raSBxdWVyeSAocnVuIHdpdGggU2hpZnQrRW50ZXIpJztcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZ2YtZm9ybS1pbmxpbmUgZ2YtZm9ybS1pbmxpbmUtLXhzLXZpZXctZmxleC1jb2x1bW4gZmxleC1ncm93LTFcIlxuICAgICAgICAgIGRhdGEtdGVzdGlkPXt0aGlzLnByb3BzWydkYXRhLXRlc3RpZCddfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZi1mb3JtLS1ncm93IGZsZXgtc2hyaW5rLTEgbWluLXdpZHRoLTE1XCI+XG4gICAgICAgICAgICA8TW9uYWNvUXVlcnlGaWVsZFdyYXBwZXJcbiAgICAgICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICAgICAgaGlzdG9yeT17aGlzdG9yeSA/PyBbXX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VRdWVyeX1cbiAgICAgICAgICAgICAgb25SdW5RdWVyeT17b25SdW5RdWVyeX1cbiAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlPXtxdWVyeS5leHByID8/ICcnfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgIG9uUXVlcnlUeXBlPXtvblF1ZXJ5VHlwZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7RXh0cmFGaWVsZEVsZW1lbnR9XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/LokiQueryField.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/VariableQueryEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiVariableQueryEditor: () => (/* binding */ LokiVariableQueryEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineFieldRow.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _migrations_variableQueryMigrations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/migrations/variableQueryMigrations.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\n\nconst variableOptions = [\n  { label: \"Label names\", value: _types__WEBPACK_IMPORTED_MODULE_2__.LokiVariableQueryType.LabelNames },\n  { label: \"Label values\", value: _types__WEBPACK_IMPORTED_MODULE_2__.LokiVariableQueryType.LabelValues }\n];\nconst refId = \"LokiVariableQueryEditor-VariableQuery\";\nconst LokiVariableQueryEditor = ({ onChange, query, datasource }) => {\n  const [type, setType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n  const [label, setLabel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const [labelOptions, setLabelOptions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [stream, setStream] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!query) {\n      return;\n    }\n    const variableQuery = typeof query === \"string\" ? (0,_migrations_variableQueryMigrations__WEBPACK_IMPORTED_MODULE_1__.migrateVariableQuery)(query) : query;\n    setType(variableQuery.type);\n    setLabel(variableQuery.label || \"\");\n    setStream(variableQuery.stream || \"\");\n  }, [query]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (type !== _types__WEBPACK_IMPORTED_MODULE_2__.LokiVariableQueryType.LabelValues) {\n      return;\n    }\n    datasource.labelNamesQuery().then((labelNames) => {\n      setLabelOptions(labelNames.map(({ text }) => ({ label: text, value: text })));\n    });\n  }, [datasource, type]);\n  const onQueryTypeChange = (newType) => {\n    setType(newType.value);\n    if (newType.value !== void 0) {\n      onChange({\n        type: newType.value,\n        label,\n        stream,\n        refId\n      });\n    }\n  };\n  const onLabelChange = (newLabel) => {\n    setLabel(newLabel.value || \"\");\n  };\n  const onStreamChange = (e) => {\n    setStream(e.currentTarget.value);\n  };\n  const handleBlur = () => {\n    if (type !== void 0) {\n      onChange({ type, label, stream, refId: \"LokiVariableQueryEditor-VariableQuery\" });\n    }\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineFieldRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.InlineField, { label: \"Query type\", labelWidth: 20 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Select,\n    {\n      \"aria-label\": \"Query type\",\n      onChange: onQueryTypeChange,\n      onBlur: handleBlur,\n      value: type,\n      options: variableOptions,\n      width: 16\n    }\n  )), type === _types__WEBPACK_IMPORTED_MODULE_2__.LokiVariableQueryType.LabelValues && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.InlineField, { label: \"Label\", labelWidth: 20 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Select,\n    {\n      \"aria-label\": \"Label\",\n      onChange: onLabelChange,\n      onBlur: handleBlur,\n      value: { label, value: label },\n      options: labelOptions,\n      width: 16,\n      allowCustomValue: true\n    }\n  )))), type === _types__WEBPACK_IMPORTED_MODULE_2__.LokiVariableQueryType.LabelValues && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineFieldRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.InlineField,\n    {\n      label: \"Stream selector\",\n      labelWidth: 20,\n      grow: true,\n      tooltip: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, 'Optional. If defined, a list of values for the specified log stream selector is returned. For example: {label=\"value\"} or {label=\"$variable\"}')\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Input,\n      {\n        type: \"text\",\n        \"aria-label\": \"Stream selector\",\n        placeholder: \"Optional stream selector\",\n        value: stream,\n        onChange: onStreamChange,\n        onBlur: handleBlur\n      }\n    )\n  )));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvVmFyaWFibGVRdWVyeUVkaXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUdLO0FBR3RCO0FBQ3lEO0FBRTlGLE1BQU0sa0JBQWtCO0FBQUEsRUFDdEIsRUFBRSxPQUFPLGVBQWUsT0FBTyx5REFBUyxDQUFDLFdBQVc7QUFBQSxFQUNwRCxFQUFFLE9BQU8sZ0JBQWdCLE9BQU8seURBQVMsQ0FBQyxZQUFZO0FBQ3hEO0FBSUEsTUFBTSxRQUFRO0FBRVAsTUFBTSwwQkFBMEIsQ0FBQyxFQUFFLFVBQVUsT0FBTyxXQUFXLE1BQWE7QUFDakYsUUFBTSxDQUFDLE1BQU0sT0FBTyxJQUFJLCtDQUFRLENBQXFCLE1BQVM7QUFDOUQsUUFBTSxDQUFDLE9BQU8sUUFBUSxJQUFJLCtDQUFRLENBQUMsRUFBRTtBQUNyQyxRQUFNLENBQUMsY0FBYyxlQUFlLElBQUksK0NBQVEsQ0FBaUMsQ0FBQyxDQUFDO0FBQ25GLFFBQU0sQ0FBQyxRQUFRLFNBQVMsSUFBSSwrQ0FBUSxDQUFDLEVBQUU7QUFFdkMsa0RBQVMsQ0FBQyxNQUFNO0FBQ2QsUUFBSSxDQUFDLE9BQU87QUFDVjtBQUFBLElBQ0Y7QUFFQSxVQUFNLGdCQUFnQixPQUFPLFVBQVUsV0FBVyx5RkFBb0IsQ0FBQyxLQUFLLElBQUk7QUFDaEYsWUFBUSxjQUFjLElBQUk7QUFDMUIsYUFBUyxjQUFjLFNBQVMsRUFBRTtBQUNsQyxjQUFVLGNBQWMsVUFBVSxFQUFFO0FBQUEsRUFDdEMsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUVWLGtEQUFTLENBQUMsTUFBTTtBQUNkLFFBQUksU0FBUyx5REFBUyxDQUFDLGFBQWE7QUFDbEM7QUFBQSxJQUNGO0FBRUEsZUFBVyxnQkFBZ0IsRUFBRSxLQUFLLENBQUMsZUFBd0M7QUFDekUsc0JBQWdCLFdBQVcsSUFBSSxDQUFDLEVBQUUsS0FBSyxPQUFPLEVBQUUsT0FBTyxNQUFNLE9BQU8sS0FBSyxFQUFFLENBQUM7QUFBQSxJQUM5RSxDQUFDO0FBQUEsRUFDSCxHQUFHLENBQUMsWUFBWSxJQUFJLENBQUM7QUFFckIsUUFBTSxvQkFBb0IsQ0FBQyxZQUF3QztBQUNqRSxZQUFRLFFBQVEsS0FBSztBQUNyQixRQUFJLFFBQVEsVUFBVSxRQUFXO0FBQy9CLGVBQVM7QUFBQSxRQUNQLE1BQU0sUUFBUTtBQUFBLFFBQ2Q7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBRUEsUUFBTSxnQkFBZ0IsQ0FBQyxhQUFzQztBQUMzRCxhQUFTLFNBQVMsU0FBUyxFQUFFO0FBQUEsRUFDL0I7QUFFQSxRQUFNLGlCQUFpQixDQUFDLE1BQW1DO0FBQ3pELGNBQVUsRUFBRSxjQUFjLEtBQUs7QUFBQSxFQUNqQztBQUVBLFFBQU0sYUFBYSxNQUFNO0FBQ3ZCLFFBQUksU0FBUyxRQUFXO0FBQ3RCLGVBQVMsRUFBRSxNQUFNLE9BQU8sUUFBUSxPQUFPLHdDQUF3QyxDQUFDO0FBQUEsSUFDbEY7QUFBQSxFQUNGO0FBRUEsU0FDRSwwSUFDRSwyRUFBQyx1REFBYyxRQUNiLDJFQUFDLG9EQUFXLElBQUMsT0FBTSxjQUFhLFlBQVksTUFDMUM7QUFBQSxJQUFDLCtDQUFNO0FBQU47QUFBQSxNQUNDLGNBQVc7QUFBQSxNQUNYLFVBQVU7QUFBQSxNQUNWLFFBQVE7QUFBQSxNQUNSLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxNQUNULE9BQU87QUFBQTtBQUFBLEVBQ1QsQ0FDRixHQUNDLFNBQVMseURBQVMsQ0FBQyxlQUNsQiwwSUFDRSwyRUFBQyxvREFBVyxJQUFDLE9BQU0sU0FBUSxZQUFZLE1BQ3JDO0FBQUEsSUFBQywrQ0FBTTtBQUFOO0FBQUEsTUFDQyxjQUFXO0FBQUEsTUFDWCxVQUFVO0FBQUEsTUFDVixRQUFRO0FBQUEsTUFDUixPQUFPLEVBQUUsT0FBYyxPQUFPLE1BQU07QUFBQSxNQUNwQyxTQUFTO0FBQUEsTUFDVCxPQUFPO0FBQUEsTUFDUCxrQkFBZ0I7QUFBQTtBQUFBLEVBQ2xCLENBQ0YsQ0FDRixDQUVKLEdBQ0MsU0FBUyx5REFBUyxDQUFDLGVBQ2xCLDJFQUFDLHVEQUFjLFFBQ2I7QUFBQSxJQUFDLG9EQUFXO0FBQVg7QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNOLFlBQVk7QUFBQSxNQUNaLE1BQU07QUFBQSxNQUNOLFNBQ0UsMkVBQUMsYUFFRywrSUFFSjtBQUFBO0FBQUEsSUFHRjtBQUFBLE1BQUMsOENBQUs7QUFBTDtBQUFBLFFBQ0MsTUFBSztBQUFBLFFBQ0wsY0FBVztBQUFBLFFBQ1gsYUFBWTtBQUFBLFFBQ1osT0FBTztBQUFBLFFBQ1AsVUFBVTtBQUFBLFFBQ1YsUUFBUTtBQUFBO0FBQUEsSUFDVjtBQUFBLEVBQ0YsQ0FDRixDQUVKO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9jb21wb25lbnRzL1ZhcmlhYmxlUXVlcnlFZGl0b3IudHN4PzNlZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IEZvcm1FdmVudCwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgUXVlcnlFZGl0b3JQcm9wcywgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBJbmxpbmVGaWVsZCwgSW5saW5lRmllbGRSb3csIElucHV0LCBTZWxlY3QgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IExva2lEYXRhc291cmNlIH0gZnJvbSAnLi4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBtaWdyYXRlVmFyaWFibGVRdWVyeSB9IGZyb20gJy4uL21pZ3JhdGlvbnMvdmFyaWFibGVRdWVyeU1pZ3JhdGlvbnMnO1xuaW1wb3J0IHsgTG9raU9wdGlvbnMsIExva2lRdWVyeSwgTG9raVZhcmlhYmxlUXVlcnksIExva2lWYXJpYWJsZVF1ZXJ5VHlwZSBhcyBRdWVyeVR5cGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmNvbnN0IHZhcmlhYmxlT3B0aW9ucyA9IFtcbiAgeyBsYWJlbDogJ0xhYmVsIG5hbWVzJywgdmFsdWU6IFF1ZXJ5VHlwZS5MYWJlbE5hbWVzIH0sXG4gIHsgbGFiZWw6ICdMYWJlbCB2YWx1ZXMnLCB2YWx1ZTogUXVlcnlUeXBlLkxhYmVsVmFsdWVzIH0sXG5dO1xuXG5leHBvcnQgdHlwZSBQcm9wcyA9IFF1ZXJ5RWRpdG9yUHJvcHM8TG9raURhdGFzb3VyY2UsIExva2lRdWVyeSwgTG9raU9wdGlvbnMsIExva2lWYXJpYWJsZVF1ZXJ5PjtcblxuY29uc3QgcmVmSWQgPSAnTG9raVZhcmlhYmxlUXVlcnlFZGl0b3ItVmFyaWFibGVRdWVyeSc7XG5cbmV4cG9ydCBjb25zdCBMb2tpVmFyaWFibGVRdWVyeUVkaXRvciA9ICh7IG9uQ2hhbmdlLCBxdWVyeSwgZGF0YXNvdXJjZSB9OiBQcm9wcykgPT4ge1xuICBjb25zdCBbdHlwZSwgc2V0VHlwZV0gPSB1c2VTdGF0ZTxudW1iZXIgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG4gIGNvbnN0IFtsYWJlbCwgc2V0TGFiZWxdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbbGFiZWxPcHRpb25zLCBzZXRMYWJlbE9wdGlvbnNdID0gdXNlU3RhdGU8QXJyYXk8U2VsZWN0YWJsZVZhbHVlPHN0cmluZz4+PihbXSk7XG4gIGNvbnN0IFtzdHJlYW0sIHNldFN0cmVhbV0gPSB1c2VTdGF0ZSgnJyk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdmFyaWFibGVRdWVyeSA9IHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycgPyBtaWdyYXRlVmFyaWFibGVRdWVyeShxdWVyeSkgOiBxdWVyeTtcbiAgICBzZXRUeXBlKHZhcmlhYmxlUXVlcnkudHlwZSk7XG4gICAgc2V0TGFiZWwodmFyaWFibGVRdWVyeS5sYWJlbCB8fCAnJyk7XG4gICAgc2V0U3RyZWFtKHZhcmlhYmxlUXVlcnkuc3RyZWFtIHx8ICcnKTtcbiAgfSwgW3F1ZXJ5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZSAhPT0gUXVlcnlUeXBlLkxhYmVsVmFsdWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZGF0YXNvdXJjZS5sYWJlbE5hbWVzUXVlcnkoKS50aGVuKChsYWJlbE5hbWVzOiBBcnJheTx7IHRleHQ6IHN0cmluZyB9PikgPT4ge1xuICAgICAgc2V0TGFiZWxPcHRpb25zKGxhYmVsTmFtZXMubWFwKCh7IHRleHQgfSkgPT4gKHsgbGFiZWw6IHRleHQsIHZhbHVlOiB0ZXh0IH0pKSk7XG4gICAgfSk7XG4gIH0sIFtkYXRhc291cmNlLCB0eXBlXSk7XG5cbiAgY29uc3Qgb25RdWVyeVR5cGVDaGFuZ2UgPSAobmV3VHlwZTogU2VsZWN0YWJsZVZhbHVlPFF1ZXJ5VHlwZT4pID0+IHtcbiAgICBzZXRUeXBlKG5ld1R5cGUudmFsdWUpO1xuICAgIGlmIChuZXdUeXBlLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgdHlwZTogbmV3VHlwZS52YWx1ZSxcbiAgICAgICAgbGFiZWwsXG4gICAgICAgIHN0cmVhbSxcbiAgICAgICAgcmVmSWQsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25MYWJlbENoYW5nZSA9IChuZXdMYWJlbDogU2VsZWN0YWJsZVZhbHVlPHN0cmluZz4pID0+IHtcbiAgICBzZXRMYWJlbChuZXdMYWJlbC52YWx1ZSB8fCAnJyk7XG4gIH07XG5cbiAgY29uc3Qgb25TdHJlYW1DaGFuZ2UgPSAoZTogRm9ybUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgc2V0U3RyZWFtKGUuY3VycmVudFRhcmdldC52YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQmx1ciA9ICgpID0+IHtcbiAgICBpZiAodHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBvbkNoYW5nZSh7IHR5cGUsIGxhYmVsLCBzdHJlYW0sIHJlZklkOiAnTG9raVZhcmlhYmxlUXVlcnlFZGl0b3ItVmFyaWFibGVRdWVyeScgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxJbmxpbmVGaWVsZFJvdz5cbiAgICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiUXVlcnkgdHlwZVwiIGxhYmVsV2lkdGg9ezIwfT5cbiAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiUXVlcnkgdHlwZVwiXG4gICAgICAgICAgICBvbkNoYW5nZT17b25RdWVyeVR5cGVDaGFuZ2V9XG4gICAgICAgICAgICBvbkJsdXI9e2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICB2YWx1ZT17dHlwZX1cbiAgICAgICAgICAgIG9wdGlvbnM9e3ZhcmlhYmxlT3B0aW9uc31cbiAgICAgICAgICAgIHdpZHRoPXsxNn1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0lubGluZUZpZWxkPlxuICAgICAgICB7dHlwZSA9PT0gUXVlcnlUeXBlLkxhYmVsVmFsdWVzICYmIChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiTGFiZWxcIiBsYWJlbFdpZHRoPXsyMH0+XG4gICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiTGFiZWxcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkxhYmVsQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uQmx1cj17aGFuZGxlQmx1cn1cbiAgICAgICAgICAgICAgICB2YWx1ZT17eyBsYWJlbDogbGFiZWwsIHZhbHVlOiBsYWJlbCB9fVxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e2xhYmVsT3B0aW9uc31cbiAgICAgICAgICAgICAgICB3aWR0aD17MTZ9XG4gICAgICAgICAgICAgICAgYWxsb3dDdXN0b21WYWx1ZVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvSW5saW5lRmllbGRSb3c+XG4gICAgICB7dHlwZSA9PT0gUXVlcnlUeXBlLkxhYmVsVmFsdWVzICYmIChcbiAgICAgICAgPElubGluZUZpZWxkUm93PlxuICAgICAgICAgIDxJbmxpbmVGaWVsZFxuICAgICAgICAgICAgbGFiZWw9XCJTdHJlYW0gc2VsZWN0b3JcIlxuICAgICAgICAgICAgbGFiZWxXaWR0aD17MjB9XG4gICAgICAgICAgICBncm93PXt0cnVlfVxuICAgICAgICAgICAgdG9vbHRpcD17XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgJ09wdGlvbmFsLiBJZiBkZWZpbmVkLCBhIGxpc3Qgb2YgdmFsdWVzIGZvciB0aGUgc3BlY2lmaWVkIGxvZyBzdHJlYW0gc2VsZWN0b3IgaXMgcmV0dXJuZWQuIEZvciBleGFtcGxlOiB7bGFiZWw9XCJ2YWx1ZVwifSBvciB7bGFiZWw9XCIkdmFyaWFibGVcIn0nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiU3RyZWFtIHNlbGVjdG9yXCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJPcHRpb25hbCBzdHJlYW0gc2VsZWN0b3JcIlxuICAgICAgICAgICAgICB2YWx1ZT17c3RyZWFtfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17b25TdHJlYW1DaGFuZ2V9XG4gICAgICAgICAgICAgIG9uQmx1cj17aGFuZGxlQmx1cn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgICAgPC9JbmxpbmVGaWVsZFJvdz5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/VariableQueryEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/monaco-query-field/MonacoQueryFieldLazy.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MonacoQueryFieldLazy: () => (/* binding */ MonacoQueryFieldLazy)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst Field = react__WEBPACK_IMPORTED_MODULE_0___default().lazy(() => __webpack_require__.e(/* import() | loki-query-field */ \"loki-query-field\").then(__webpack_require__.bind(__webpack_require__, \"./public/app/plugins/datasource/loki/components/monaco-query-field/MonacoQueryField.tsx\")));\nconst MonacoQueryFieldLazy = (props) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, { fallback: null }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Field, { ...props }));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvbW9uYWNvLXF1ZXJ5LWZpZWxkL01vbmFjb1F1ZXJ5RmllbGRMYXp5LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBSWhDLE1BQU0sUUFBUSxpREFBVSxDQUFDLE1BQU0sME5BQXVFO0FBRS9GLE1BQU0sdUJBQXVCLENBQUMsVUFBaUI7QUFDcEQsU0FDRSwyRUFBQywyQ0FBUSxJQUFDLFVBQVUsUUFDbEIsMkVBQUMsU0FBTyxHQUFHLE9BQU8sQ0FDcEI7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvbW9uYWNvLXF1ZXJ5LWZpZWxkL01vbmFjb1F1ZXJ5RmllbGRMYXp5LnRzeD8yM2ExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBTdXNwZW5zZSB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgUHJvcHMgfSBmcm9tICcuL01vbmFjb1F1ZXJ5RmllbGRQcm9wcyc7XG5cbmNvbnN0IEZpZWxkID0gUmVhY3QubGF6eSgoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJsb2tpLXF1ZXJ5LWZpZWxkXCIgKi8gJy4vTW9uYWNvUXVlcnlGaWVsZCcpKTtcblxuZXhwb3J0IGNvbnN0IE1vbmFjb1F1ZXJ5RmllbGRMYXp5ID0gKHByb3BzOiBQcm9wcykgPT4ge1xuICByZXR1cm4gKFxuICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17bnVsbH0+XG4gICAgICA8RmllbGQgey4uLnByb3BzfSAvPlxuICAgIDwvU3VzcGVuc2U+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/monaco-query-field/MonacoQueryFieldLazy.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/monaco-query-field/MonacoQueryFieldWrapper.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MonacoQueryFieldWrapper: () => (/* binding */ MonacoQueryFieldWrapper)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _MonacoQueryFieldLazy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/monaco-query-field/MonacoQueryFieldLazy.tsx\");\n\n\n\nconst MonacoQueryFieldWrapper = (props) => {\n  const lastRunValueRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const { onRunQuery, onChange, ...rest } = props;\n  const handleRunQuery = (value) => {\n    lastRunValueRef.current = value;\n    onChange(value);\n    onRunQuery();\n  };\n  const handleBlur = (value) => {\n    onChange(value);\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_MonacoQueryFieldLazy__WEBPACK_IMPORTED_MODULE_1__.MonacoQueryFieldLazy, { onRunQuery: handleRunQuery, onBlur: handleBlur, ...rest });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvbW9uYWNvLXF1ZXJ5LWZpZWxkL01vbmFjb1F1ZXJ5RmllbGRXcmFwcGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE4QjtBQUVPO0FBUzlCLE1BQU0sMEJBQTBCLENBQUMsVUFBaUI7QUFDdkQsUUFBTSxrQkFBa0IsNkNBQU0sQ0FBZ0IsSUFBSTtBQUNsRCxRQUFNLEVBQUUsWUFBWSxVQUFVLEdBQUcsS0FBSyxJQUFJO0FBRTFDLFFBQU0saUJBQWlCLENBQUMsVUFBa0I7QUFDeEMsb0JBQWdCLFVBQVU7QUFDMUIsYUFBUyxLQUFLO0FBQ2QsZUFBVztBQUFBLEVBQ2I7QUFFQSxRQUFNLGFBQWEsQ0FBQyxVQUFrQjtBQUNwQyxhQUFTLEtBQUs7QUFBQSxFQUNoQjtBQUVBLFNBQU8sMkVBQUMsdUVBQW9CLElBQUMsWUFBWSxnQkFBZ0IsUUFBUSxZQUFhLEdBQUcsTUFBTTtBQUN6RiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvbW9uYWNvLXF1ZXJ5LWZpZWxkL01vbmFjb1F1ZXJ5RmllbGRXcmFwcGVyLnRzeD8zMWM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IE1vbmFjb1F1ZXJ5RmllbGRMYXp5IH0gZnJvbSAnLi9Nb25hY29RdWVyeUZpZWxkTGF6eSc7XG5pbXBvcnQgeyBQcm9wcyBhcyBNb25hY29Qcm9wcyB9IGZyb20gJy4vTW9uYWNvUXVlcnlGaWVsZFByb3BzJztcblxuZXhwb3J0IHR5cGUgUHJvcHMgPSBPbWl0PE1vbmFjb1Byb3BzLCAnb25SdW5RdWVyeScgfCAnb25CbHVyJz4gJiB7XG4gIG9uQ2hhbmdlOiAocXVlcnk6IHN0cmluZykgPT4gdm9pZDtcbiAgb25SdW5RdWVyeTogKCkgPT4gdm9pZDtcbiAgb25RdWVyeVR5cGU/OiAocXVlcnk6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCBjb25zdCBNb25hY29RdWVyeUZpZWxkV3JhcHBlciA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgY29uc3QgbGFzdFJ1blZhbHVlUmVmID0gdXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCB7IG9uUnVuUXVlcnksIG9uQ2hhbmdlLCAuLi5yZXN0IH0gPSBwcm9wcztcblxuICBjb25zdCBoYW5kbGVSdW5RdWVyeSA9ICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgbGFzdFJ1blZhbHVlUmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICBvbkNoYW5nZSh2YWx1ZSk7XG4gICAgb25SdW5RdWVyeSgpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUJsdXIgPSAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgIG9uQ2hhbmdlKHZhbHVlKTtcbiAgfTtcblxuICByZXR1cm4gPE1vbmFjb1F1ZXJ5RmllbGRMYXp5IG9uUnVuUXVlcnk9e2hhbmRsZVJ1blF1ZXJ5fSBvbkJsdXI9e2hhbmRsZUJsdXJ9IHsuLi5yZXN0fSAvPjtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/monaco-query-field/MonacoQueryFieldWrapper.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/monaco-query-field/monaco-completion-provider/validation.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   placeHolderScopedVars: () => (/* binding */ placeHolderScopedVars),\n/* harmony export */   validateQuery: () => (/* binding */ validateQuery)\n/* harmony export */ });\n/* harmony import */ var _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-lezer-logql-virtual-0b75aafe9e/0/cache/@grafana-lezer-logql-npm-0.1.11-91e9d74a76-6a624b9a8d.zip/node_modules/@grafana/lezer-logql/index.es.js\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/parsingUtils.ts\");\n\n\n\nfunction validateQuery(query, interpolatedQuery, queryLines) {\n  if (!query) {\n    return false;\n  }\n  const interpolatedErrors = parseQuery(interpolatedQuery);\n  if (!interpolatedErrors.length) {\n    return false;\n  }\n  let parseErrors = interpolatedErrors;\n  if (query !== interpolatedQuery) {\n    const queryErrors = parseQuery(query);\n    parseErrors = interpolatedErrors.flatMap(\n      (interpolatedError) => queryErrors.filter((queryError) => interpolatedError.text === queryError.text) || interpolatedError\n    );\n  }\n  return parseErrors.map((parseError) => findErrorBoundary(query, queryLines, parseError)).filter(isErrorBoundary);\n}\nfunction parseQuery(query) {\n  const parseErrors = [];\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_0__.parser.parse(query);\n  tree.iterate({\n    enter: (nodeRef) => {\n      if (nodeRef.type.id === app_plugins_datasource_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_1__.ErrorId) {\n        const node = nodeRef.node;\n        parseErrors.push({\n          node,\n          text: query.substring(node.from, node.to)\n        });\n      }\n    }\n  });\n  return parseErrors;\n}\nfunction findErrorBoundary(query, queryLines, parseError) {\n  if (queryLines.length === 1) {\n    const isEmptyString = parseError.node.from === parseError.node.to;\n    const errorNode = isEmptyString && parseError.node.parent ? parseError.node.parent : parseError.node;\n    const error = isEmptyString ? query.substring(errorNode.from, errorNode.to) : parseError.text;\n    return {\n      startLineNumber: 1,\n      startColumn: errorNode.from + 1,\n      endLineNumber: 1,\n      endColumn: errorNode.to + 1,\n      error\n    };\n  }\n  let startPos = 0, endPos = 0;\n  for (let line = 0; line < queryLines.length; line++) {\n    endPos = startPos + queryLines[line].length;\n    if (parseError.node.from > endPos) {\n      startPos += queryLines[line].length + 1;\n      continue;\n    }\n    return {\n      startLineNumber: line + 1,\n      startColumn: parseError.node.from - startPos + 1,\n      endLineNumber: line + 1,\n      endColumn: parseError.node.to - startPos + 1,\n      error: parseError.text\n    };\n  }\n  return null;\n}\nfunction isErrorBoundary(boundary) {\n  return boundary !== null;\n}\nconst placeHolderScopedVars = {\n  __interval: { text: \"1s\", value: \"1s\" },\n  __interval_ms: { text: \"1000\", value: 1e3 },\n  __range_ms: { text: \"1000\", value: 1e3 },\n  __range_s: { text: \"1\", value: 1 },\n  __range: { text: \"1s\", value: \"1s\" }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvbW9uYWNvLXF1ZXJ5LWZpZWxkL21vbmFjby1jb21wbGV0aW9uLXByb3ZpZGVyL3ZhbGlkYXRpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFdUI7QUFDQztBQXNCakIsU0FBUyxjQUNkLE9BQ0EsbUJBQ0EsWUFDK0I7QUFDL0IsTUFBSSxDQUFDLE9BQU87QUFDVixXQUFPO0FBQUEsRUFDVDtBQVNBLFFBQU0scUJBQW1DLFdBQVcsaUJBQWlCO0FBQ3JFLE1BQUksQ0FBQyxtQkFBbUIsUUFBUTtBQUM5QixXQUFPO0FBQUEsRUFDVDtBQUVBLE1BQUksY0FBNEI7QUFDaEMsTUFBSSxVQUFVLG1CQUFtQjtBQUMvQixVQUFNLGNBQTRCLFdBQVcsS0FBSztBQUNsRCxrQkFBYyxtQkFBbUI7QUFBQSxNQUMvQixDQUFDLHNCQUNDLFlBQVksT0FBTyxDQUFDLGVBQWUsa0JBQWtCLFNBQVMsV0FBVyxJQUFJLEtBQUs7QUFBQSxJQUN0RjtBQUFBLEVBQ0Y7QUFFQSxTQUFPLFlBQVksSUFBSSxDQUFDLGVBQWUsa0JBQWtCLE9BQU8sWUFBWSxVQUFVLENBQUMsRUFBRSxPQUFPLGVBQWU7QUFDakg7QUFFQSxTQUFTLFdBQVcsT0FBZTtBQUNqQyxRQUFNLGNBQTRCLENBQUM7QUFDbkMsUUFBTSxPQUFPLHdEQUFNLENBQUMsTUFBTSxLQUFLO0FBQy9CLE9BQUssUUFBUTtBQUFBLElBQ1gsT0FBTyxDQUFDLFlBQTBCO0FBQ2hDLFVBQUksUUFBUSxLQUFLLE9BQU8sdUdBQU8sRUFBRTtBQUMvQixjQUFNLE9BQU8sUUFBUTtBQUNyQixvQkFBWSxLQUFLO0FBQUEsVUFDZjtBQUFBLFVBQ0EsTUFBTSxNQUFNLFVBQVUsS0FBSyxNQUFNLEtBQUssRUFBRTtBQUFBLFFBQzFDLENBQUM7QUFBQSxNQUNIO0FBQUEsSUFDRjtBQUFBLEVBQ0YsQ0FBQztBQUNELFNBQU87QUFDVDtBQUVBLFNBQVMsa0JBQWtCLE9BQWUsWUFBc0IsWUFBb0Q7QUFDbEgsTUFBSSxXQUFXLFdBQVcsR0FBRztBQUMzQixVQUFNLGdCQUFnQixXQUFXLEtBQUssU0FBUyxXQUFXLEtBQUs7QUFDL0QsVUFBTSxZQUFZLGlCQUFpQixXQUFXLEtBQUssU0FBUyxXQUFXLEtBQUssU0FBUyxXQUFXO0FBQ2hHLFVBQU0sUUFBUSxnQkFBZ0IsTUFBTSxVQUFVLFVBQVUsTUFBTSxVQUFVLEVBQUUsSUFBSSxXQUFXO0FBQ3pGLFdBQU87QUFBQSxNQUNMLGlCQUFpQjtBQUFBLE1BQ2pCLGFBQWEsVUFBVSxPQUFPO0FBQUEsTUFDOUIsZUFBZTtBQUFBLE1BQ2YsV0FBVyxVQUFVLEtBQUs7QUFBQSxNQUMxQjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBRUEsTUFBSSxXQUFXLEdBQ2IsU0FBUztBQUNYLFdBQVMsT0FBTyxHQUFHLE9BQU8sV0FBVyxRQUFRLFFBQVE7QUFDbkQsYUFBUyxXQUFXLFdBQVcsSUFBSSxFQUFFO0FBRXJDLFFBQUksV0FBVyxLQUFLLE9BQU8sUUFBUTtBQUNqQyxrQkFBWSxXQUFXLElBQUksRUFBRSxTQUFTO0FBQ3RDO0FBQUEsSUFDRjtBQUVBLFdBQU87QUFBQSxNQUNMLGlCQUFpQixPQUFPO0FBQUEsTUFDeEIsYUFBYSxXQUFXLEtBQUssT0FBTyxXQUFXO0FBQUEsTUFDL0MsZUFBZSxPQUFPO0FBQUEsTUFDdEIsV0FBVyxXQUFXLEtBQUssS0FBSyxXQUFXO0FBQUEsTUFDM0MsT0FBTyxXQUFXO0FBQUEsSUFDcEI7QUFBQSxFQUNGO0FBRUEsU0FBTztBQUNUO0FBRUEsU0FBUyxnQkFBZ0IsVUFBdUU7QUFDOUYsU0FBTyxhQUFhO0FBQ3RCO0FBRU8sTUFBTSx3QkFBd0I7QUFBQSxFQUNuQyxZQUFZLEVBQUUsTUFBTSxNQUFNLE9BQU8sS0FBSztBQUFBLEVBQ3RDLGVBQWUsRUFBRSxNQUFNLFFBQVEsT0FBTyxJQUFLO0FBQUEsRUFDM0MsWUFBWSxFQUFFLE1BQU0sUUFBUSxPQUFPLElBQUs7QUFBQSxFQUN4QyxXQUFXLEVBQUUsTUFBTSxLQUFLLE9BQU8sRUFBRTtBQUFBLEVBQ2pDLFNBQVMsRUFBRSxNQUFNLE1BQU0sT0FBTyxLQUFLO0FBQ3JDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvY29tcG9uZW50cy9tb25hY28tcXVlcnktZmllbGQvbW9uYWNvLWNvbXBsZXRpb24tcHJvdmlkZXIvdmFsaWRhdGlvbi50cz8xOWQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN5bnRheE5vZGUgfSBmcm9tICdAbGV6ZXIvY29tbW9uJztcblxuaW1wb3J0IHsgcGFyc2VyIH0gZnJvbSAnQGdyYWZhbmEvbGV6ZXItbG9ncWwnO1xuaW1wb3J0IHsgRXJyb3JJZCB9IGZyb20gJ2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL3BhcnNpbmdVdGlscyc7XG5cbmludGVyZmFjZSBQYXJzZXJFcnJvckJvdW5kYXJ5IHtcbiAgc3RhcnRMaW5lTnVtYmVyOiBudW1iZXI7XG4gIHN0YXJ0Q29sdW1uOiBudW1iZXI7XG4gIGVuZExpbmVOdW1iZXI6IG51bWJlcjtcbiAgZW5kQ29sdW1uOiBudW1iZXI7XG4gIGVycm9yOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQYXJzZUVycm9yIHtcbiAgdGV4dDogc3RyaW5nO1xuICBub2RlOiBTeW50YXhOb2RlO1xufVxuXG4vKipcbiAqIENvbmNlaXZlZCB0byB3b3JrIGluIGNvbWJpbmF0aW9uIHdpdGggdGhlIE1vbmFjb1F1ZXJ5RmllbGQgY29tcG9uZW50LlxuICogR2l2ZW4gYW4gb3JpZ2luYWwgcXVlcnksIGFuZCBpdCdzIGludGVycG9sYXRlZCB2ZXJzaW9uLCBpdCB3aWxsIHJldHVybiBhbiBhcnJheSBvZiBQYXJzZXJFcnJvckJvdW5kYXJ5XG4gKiBvYmplY3RzIGNvbnRhaW5pbmcgbm9kZXMgd2hpY2ggYXJlIGFjdHVhbCBlcnJvcnMuIFRoZSBpbnRlcnBvbGF0ZWQgdmVyc2lvbiAoZXZlbiB3aXRoIHBsYWNlaG9sZGVyIHZhcmlhYmxlcylcbiAqIGlzIHJlcXVpcmVkIGJlY2F1c2UgdmFyaWFibGVzIGxvb2sgbGlrZSBlcnJvcnMgZm9yIExlemVyLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVF1ZXJ5KFxuICBxdWVyeTogc3RyaW5nLFxuICBpbnRlcnBvbGF0ZWRRdWVyeTogc3RyaW5nLFxuICBxdWVyeUxpbmVzOiBzdHJpbmdbXVxuKTogUGFyc2VyRXJyb3JCb3VuZGFyeVtdIHwgZmFsc2Uge1xuICBpZiAoIXF1ZXJ5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvIHByb3ZpZGUgc3VwcG9ydCB0byB2YXJpYWJsZSBpbnRlcnBvbGF0aW9uIGluIHF1ZXJ5IHZhbGlkYXRpb24sIHdlIHJ1biB0aGUgcGFyc2VyIGluIHRoZSBpbnRlcnBvbGF0ZWRcbiAgICogcXVlcnkuIElmIHRoZXJlIGFyZSBlcnJvcnMgdGhlcmUsIHdlIHRyYWNlIHRoZW0gYmFjayB0byB0aGUgb3JpZ2luYWwgdW5wYXJzZWQgcXVlcnksIHNvIHdlIGNhbiBtb3JlXG4gICAqIGFjY3VyYXRlbHkgaGlnaGxpZ2h0IHRoZSBlcnJvciBpbiB0aGUgcXVlcnksIHNpbmNlIGl0J3MgbGlrZWx5IHRoYXQgdGhlIHZhcmlhYmxlIG5hbWUgYW5kIHZhcmlhYmxlIHZhbHVlXG4gICAqIGhhdmUgZGlmZmVyZW50IGxlbmd0aHMuIFdpdGggdGhpcywgd2UgYWxzbyBleGNsdWRlIGlycmVsZXZhbnQgcGFyc2VyIGVycm9ycyB0aGF0IGFyZSBwcm9kdWNlZCBieVxuICAgKiBsZXplciBub3QgdW5kZXJzdGFuZGluZyAkdmFyaWFibGVzIGFuZCAkX192YXJpYWJsZXMsIHdoaWNoIHVzdWFsbHkgZ2VuZXJhdGUgMiBvciAzIGVycm9yIFN5bnRheE5vZGUuXG4gICAqL1xuICBjb25zdCBpbnRlcnBvbGF0ZWRFcnJvcnM6IFBhcnNlRXJyb3JbXSA9IHBhcnNlUXVlcnkoaW50ZXJwb2xhdGVkUXVlcnkpO1xuICBpZiAoIWludGVycG9sYXRlZEVycm9ycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBsZXQgcGFyc2VFcnJvcnM6IFBhcnNlRXJyb3JbXSA9IGludGVycG9sYXRlZEVycm9ycztcbiAgaWYgKHF1ZXJ5ICE9PSBpbnRlcnBvbGF0ZWRRdWVyeSkge1xuICAgIGNvbnN0IHF1ZXJ5RXJyb3JzOiBQYXJzZUVycm9yW10gPSBwYXJzZVF1ZXJ5KHF1ZXJ5KTtcbiAgICBwYXJzZUVycm9ycyA9IGludGVycG9sYXRlZEVycm9ycy5mbGF0TWFwKFxuICAgICAgKGludGVycG9sYXRlZEVycm9yKSA9PlxuICAgICAgICBxdWVyeUVycm9ycy5maWx0ZXIoKHF1ZXJ5RXJyb3IpID0+IGludGVycG9sYXRlZEVycm9yLnRleHQgPT09IHF1ZXJ5RXJyb3IudGV4dCkgfHwgaW50ZXJwb2xhdGVkRXJyb3JcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlRXJyb3JzLm1hcCgocGFyc2VFcnJvcikgPT4gZmluZEVycm9yQm91bmRhcnkocXVlcnksIHF1ZXJ5TGluZXMsIHBhcnNlRXJyb3IpKS5maWx0ZXIoaXNFcnJvckJvdW5kYXJ5KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VRdWVyeShxdWVyeTogc3RyaW5nKSB7XG4gIGNvbnN0IHBhcnNlRXJyb3JzOiBQYXJzZUVycm9yW10gPSBbXTtcbiAgY29uc3QgdHJlZSA9IHBhcnNlci5wYXJzZShxdWVyeSk7XG4gIHRyZWUuaXRlcmF0ZSh7XG4gICAgZW50ZXI6IChub2RlUmVmKTogZmFsc2UgfCB2b2lkID0+IHtcbiAgICAgIGlmIChub2RlUmVmLnR5cGUuaWQgPT09IEVycm9ySWQpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVSZWYubm9kZTtcbiAgICAgICAgcGFyc2VFcnJvcnMucHVzaCh7XG4gICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICB0ZXh0OiBxdWVyeS5zdWJzdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBwYXJzZUVycm9ycztcbn1cblxuZnVuY3Rpb24gZmluZEVycm9yQm91bmRhcnkocXVlcnk6IHN0cmluZywgcXVlcnlMaW5lczogc3RyaW5nW10sIHBhcnNlRXJyb3I6IFBhcnNlRXJyb3IpOiBQYXJzZXJFcnJvckJvdW5kYXJ5IHwgbnVsbCB7XG4gIGlmIChxdWVyeUxpbmVzLmxlbmd0aCA9PT0gMSkge1xuICAgIGNvbnN0IGlzRW1wdHlTdHJpbmcgPSBwYXJzZUVycm9yLm5vZGUuZnJvbSA9PT0gcGFyc2VFcnJvci5ub2RlLnRvO1xuICAgIGNvbnN0IGVycm9yTm9kZSA9IGlzRW1wdHlTdHJpbmcgJiYgcGFyc2VFcnJvci5ub2RlLnBhcmVudCA/IHBhcnNlRXJyb3Iubm9kZS5wYXJlbnQgOiBwYXJzZUVycm9yLm5vZGU7XG4gICAgY29uc3QgZXJyb3IgPSBpc0VtcHR5U3RyaW5nID8gcXVlcnkuc3Vic3RyaW5nKGVycm9yTm9kZS5mcm9tLCBlcnJvck5vZGUudG8pIDogcGFyc2VFcnJvci50ZXh0O1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydExpbmVOdW1iZXI6IDEsXG4gICAgICBzdGFydENvbHVtbjogZXJyb3JOb2RlLmZyb20gKyAxLFxuICAgICAgZW5kTGluZU51bWJlcjogMSxcbiAgICAgIGVuZENvbHVtbjogZXJyb3JOb2RlLnRvICsgMSxcbiAgICAgIGVycm9yLFxuICAgIH07XG4gIH1cblxuICBsZXQgc3RhcnRQb3MgPSAwLFxuICAgIGVuZFBvcyA9IDA7XG4gIGZvciAobGV0IGxpbmUgPSAwOyBsaW5lIDwgcXVlcnlMaW5lcy5sZW5ndGg7IGxpbmUrKykge1xuICAgIGVuZFBvcyA9IHN0YXJ0UG9zICsgcXVlcnlMaW5lc1tsaW5lXS5sZW5ndGg7XG5cbiAgICBpZiAocGFyc2VFcnJvci5ub2RlLmZyb20gPiBlbmRQb3MpIHtcbiAgICAgIHN0YXJ0UG9zICs9IHF1ZXJ5TGluZXNbbGluZV0ubGVuZ3RoICsgMTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdGFydExpbmVOdW1iZXI6IGxpbmUgKyAxLFxuICAgICAgc3RhcnRDb2x1bW46IHBhcnNlRXJyb3Iubm9kZS5mcm9tIC0gc3RhcnRQb3MgKyAxLFxuICAgICAgZW5kTGluZU51bWJlcjogbGluZSArIDEsXG4gICAgICBlbmRDb2x1bW46IHBhcnNlRXJyb3Iubm9kZS50byAtIHN0YXJ0UG9zICsgMSxcbiAgICAgIGVycm9yOiBwYXJzZUVycm9yLnRleHQsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBpc0Vycm9yQm91bmRhcnkoYm91bmRhcnk6IFBhcnNlckVycm9yQm91bmRhcnkgfCBudWxsKTogYm91bmRhcnkgaXMgUGFyc2VyRXJyb3JCb3VuZGFyeSB7XG4gIHJldHVybiBib3VuZGFyeSAhPT0gbnVsbDtcbn1cblxuZXhwb3J0IGNvbnN0IHBsYWNlSG9sZGVyU2NvcGVkVmFycyA9IHtcbiAgX19pbnRlcnZhbDogeyB0ZXh0OiAnMXMnLCB2YWx1ZTogJzFzJyB9LFxuICBfX2ludGVydmFsX21zOiB7IHRleHQ6ICcxMDAwJywgdmFsdWU6IDEwMDAgfSxcbiAgX19yYW5nZV9tczogeyB0ZXh0OiAnMTAwMCcsIHZhbHVlOiAxMDAwIH0sXG4gIF9fcmFuZ2VfczogeyB0ZXh0OiAnMScsIHZhbHVlOiAxIH0sXG4gIF9fcmFuZ2U6IHsgdGV4dDogJzFzJywgdmFsdWU6ICcxcycgfSxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/monaco-query-field/monaco-completion-provider/validation.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/components/stats.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getStats: () => (/* binding */ getStats),\n/* harmony export */   shouldUpdateStats: () => (/* binding */ shouldUpdateStats)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n\n\nasync function getStats(datasource, query) {\n  if (!query) {\n    return null;\n  }\n  const response = await datasource.getQueryStats(query);\n  if (!response) {\n    return null;\n  }\n  return Object.values(response).every((v) => v === 0) ? null : response;\n}\nfunction compareTime(time1, time2) {\n  const isAbsolute = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.isDateTime)(time1);\n  if (isAbsolute) {\n    return time1.isSame(time2);\n  }\n  return time1 === time2;\n}\nfunction shouldUpdateStats(query, prevQuery, timerange, prevTimerange) {\n  if (prevQuery === void 0 || query.trim() !== prevQuery.trim()) {\n    return true;\n  }\n  if (compareTime(timerange.raw.from, prevTimerange?.raw.from) && compareTime(timerange.raw.to, prevTimerange?.raw.to)) {\n    return false;\n  }\n  return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvc3RhdHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnRDtBQUt6QyxlQUFlLFNBQVMsWUFBNEIsT0FBMkM7QUFDcEcsTUFBSSxDQUFDLE9BQU87QUFDVixXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sV0FBVyxNQUFNLFdBQVcsY0FBYyxLQUFLO0FBRXJELE1BQUksQ0FBQyxVQUFVO0FBQ2IsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPLE9BQU8sT0FBTyxRQUFRLEVBQUUsTUFBTSxDQUFDLE1BQU0sTUFBTSxDQUFDLElBQUksT0FBTztBQUNoRTtBQVFBLFNBQVMsWUFBWSxPQUEwQixPQUFzQztBQUNuRixRQUFNLGFBQWEseURBQVUsQ0FBQyxLQUFLO0FBRW5DLE1BQUksWUFBWTtBQUNkLFdBQU8sTUFBTSxPQUFPLEtBQUs7QUFBQSxFQUMzQjtBQUVBLFNBQU8sVUFBVTtBQUNuQjtBQUVPLFNBQVMsa0JBQ2QsT0FDQSxXQUNBLFdBQ0EsZUFDUztBQUNULE1BQUksY0FBYyxVQUFhLE1BQU0sS0FBSyxNQUFNLFVBQVUsS0FBSyxHQUFHO0FBQ2hFLFdBQU87QUFBQSxFQUNUO0FBRUEsTUFDRSxZQUFZLFVBQVUsSUFBSSxNQUFNLGVBQWUsSUFBSSxJQUFJLEtBQ3ZELFlBQVksVUFBVSxJQUFJLElBQUksZUFBZSxJQUFJLEVBQUUsR0FDbkQ7QUFDQSxXQUFPO0FBQUEsRUFDVDtBQUVBLFNBQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbXBvbmVudHMvc3RhdHMudHM/ZDY1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRlVGltZSwgaXNEYXRlVGltZSwgVGltZVJhbmdlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmltcG9ydCB7IExva2lEYXRhc291cmNlIH0gZnJvbSAnLi4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBRdWVyeVN0YXRzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3RhdHMoZGF0YXNvdXJjZTogTG9raURhdGFzb3VyY2UsIHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPFF1ZXJ5U3RhdHMgfCBudWxsPiB7XG4gIGlmICghcXVlcnkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGF0YXNvdXJjZS5nZXRRdWVyeVN0YXRzKHF1ZXJ5KTtcblxuICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhyZXNwb25zZSkuZXZlcnkoKHYpID0+IHYgPT09IDApID8gbnVsbCA6IHJlc3BvbnNlO1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY29tcGFyZXMgdHdvIHRpbWUgdmFsdWVzLiBJZiB0aGUgZmlyc3QgaXMgYWJzb2x1dGUsIGl0IGNvbXBhcmVzIHRoZW0gdXNpbmcgYERhdGVUaW1lLmlzU2FtZWAuXG4gKlxuICogQHBhcmFtIHsoRGF0ZVRpbWUgfCBzdHJpbmcpfSB0aW1lMVxuICogQHBhcmFtIHsoRGF0ZVRpbWUgfCBzdHJpbmcgfCB1bmRlZmluZWQpfSB0aW1lMlxuICovXG5mdW5jdGlvbiBjb21wYXJlVGltZSh0aW1lMTogRGF0ZVRpbWUgfCBzdHJpbmcsIHRpbWUyOiBEYXRlVGltZSB8IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICBjb25zdCBpc0Fic29sdXRlID0gaXNEYXRlVGltZSh0aW1lMSk7XG5cbiAgaWYgKGlzQWJzb2x1dGUpIHtcbiAgICByZXR1cm4gdGltZTEuaXNTYW1lKHRpbWUyKTtcbiAgfVxuXG4gIHJldHVybiB0aW1lMSA9PT0gdGltZTI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRVcGRhdGVTdGF0cyhcbiAgcXVlcnk6IHN0cmluZyxcbiAgcHJldlF1ZXJ5OiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIHRpbWVyYW5nZTogVGltZVJhbmdlLFxuICBwcmV2VGltZXJhbmdlOiBUaW1lUmFuZ2UgfCB1bmRlZmluZWRcbik6IGJvb2xlYW4ge1xuICBpZiAocHJldlF1ZXJ5ID09PSB1bmRlZmluZWQgfHwgcXVlcnkudHJpbSgpICE9PSBwcmV2UXVlcnkudHJpbSgpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoXG4gICAgY29tcGFyZVRpbWUodGltZXJhbmdlLnJhdy5mcm9tLCBwcmV2VGltZXJhbmdlPy5yYXcuZnJvbSkgJiZcbiAgICBjb21wYXJlVGltZSh0aW1lcmFuZ2UucmF3LnRvLCBwcmV2VGltZXJhbmdlPy5yYXcudG8pXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/components/stats.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/configuration/AlertingSettings.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AlertingSettings: () => (/* binding */ AlertingSettings)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSubSection.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Switch/Switch.tsx\");\n\n\n\n\nfunction AlertingSettings({\n  options,\n  onOptionsChange\n}) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_1__.ConfigSubSection, { title: \"Alerting\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_2__.InlineField,\n    {\n      labelWidth: 29,\n      label: \"Manage alert rules in Alerting UI\",\n      disabled: options.readOnly,\n      tooltip: \"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source.\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_3__.InlineSwitch,\n      {\n        value: options.jsonData.manageAlerts !== false,\n        onChange: (event) => onOptionsChange({\n          ...options,\n          jsonData: { ...options.jsonData, manageAlerts: event.currentTarget.checked }\n        })\n      }\n    )\n  ));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbmZpZ3VyYXRpb24vQWxlcnRpbmdTZXR0aW5ncy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFrQjtBQUdlO0FBQ1M7QUFFbkMsU0FBUyxpQkFBaUI7QUFBQSxFQUMvQjtBQUFBLEVBQ0E7QUFDRixHQUE0RTtBQUMxRSxTQUNFLDJFQUFDLG1FQUFnQixJQUFDLE9BQU0sY0FDdEI7QUFBQSxJQUFDLG9EQUFXO0FBQVg7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU07QUFBQSxNQUNOLFVBQVUsUUFBUTtBQUFBLE1BQ2xCLFNBQVE7QUFBQTtBQUFBLElBRVI7QUFBQSxNQUFDLHFEQUFZO0FBQVo7QUFBQSxRQUNDLE9BQU8sUUFBUSxTQUFTLGlCQUFpQjtBQUFBLFFBQ3pDLFVBQVUsQ0FBQyxVQUNULGdCQUFnQjtBQUFBLFVBQ2QsR0FBRztBQUFBLFVBQ0gsVUFBVSxFQUFFLEdBQUcsUUFBUSxVQUFVLGNBQWMsTUFBTyxjQUFjLFFBQVE7QUFBQSxRQUM5RSxDQUFDO0FBQUE7QUFBQSxJQUVMO0FBQUEsRUFDRixDQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9jb25maWd1cmF0aW9uL0FsZXJ0aW5nU2V0dGluZ3MudHN4P2RjMTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgRGF0YVNvdXJjZVBsdWdpbk9wdGlvbnNFZGl0b3JQcm9wcyB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgQ29uZmlnU3ViU2VjdGlvbiB9IGZyb20gJ0BncmFmYW5hL2V4cGVyaW1lbnRhbCc7XG5pbXBvcnQgeyBJbmxpbmVGaWVsZCwgSW5saW5lU3dpdGNoIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5leHBvcnQgZnVuY3Rpb24gQWxlcnRpbmdTZXR0aW5ncyh7XG4gIG9wdGlvbnMsXG4gIG9uT3B0aW9uc0NoYW5nZSxcbn06IFBpY2s8RGF0YVNvdXJjZVBsdWdpbk9wdGlvbnNFZGl0b3JQcm9wcywgJ29wdGlvbnMnIHwgJ29uT3B0aW9uc0NoYW5nZSc+KSB7XG4gIHJldHVybiAoXG4gICAgPENvbmZpZ1N1YlNlY3Rpb24gdGl0bGU9XCJBbGVydGluZ1wiPlxuICAgICAgPElubGluZUZpZWxkXG4gICAgICAgIGxhYmVsV2lkdGg9ezI5fVxuICAgICAgICBsYWJlbD1cIk1hbmFnZSBhbGVydCBydWxlcyBpbiBBbGVydGluZyBVSVwiXG4gICAgICAgIGRpc2FibGVkPXtvcHRpb25zLnJlYWRPbmx5fVxuICAgICAgICB0b29sdGlwPVwiTWFuYWdlIGFsZXJ0IHJ1bGVzIGZvciB0aGlzIGRhdGEgc291cmNlLiBUbyBtYW5hZ2Ugb3RoZXIgYWxlcnRpbmcgcmVzb3VyY2VzLCBhZGQgYW4gQWxlcnRtYW5hZ2VyIGRhdGEgc291cmNlLlwiXG4gICAgICA+XG4gICAgICAgIDxJbmxpbmVTd2l0Y2hcbiAgICAgICAgICB2YWx1ZT17b3B0aW9ucy5qc29uRGF0YS5tYW5hZ2VBbGVydHMgIT09IGZhbHNlfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+XG4gICAgICAgICAgICBvbk9wdGlvbnNDaGFuZ2Uoe1xuICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICBqc29uRGF0YTogeyAuLi5vcHRpb25zLmpzb25EYXRhLCBtYW5hZ2VBbGVydHM6IGV2ZW50IS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICA8L0NvbmZpZ1N1YlNlY3Rpb24+XG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/configuration/AlertingSettings.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/configuration/ConfigEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigEditor: () => (/* binding */ ConfigEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/DataSourceDescription.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSection.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/DataSourceSettings/DataSourceHttpSettings.tsx\");\n/* harmony import */ var app_core_components_Divider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/components/Divider.tsx\");\n/* harmony import */ var _AlertingSettings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/configuration/AlertingSettings.tsx\");\n/* harmony import */ var _DerivedFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/configuration/DerivedFields.tsx\");\n/* harmony import */ var _QuerySettings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/configuration/QuerySettings.tsx\");\n\n\n\n\n\n\n\n\n\nconst makeJsonUpdater = (field) => (options, value) => {\n  return {\n    ...options,\n    jsonData: {\n      ...options.jsonData,\n      [field]: value\n    }\n  };\n};\nconst setMaxLines = makeJsonUpdater(\"maxLines\");\nconst setPredefinedOperations = makeJsonUpdater(\"predefinedOperations\");\nconst setDerivedFields = makeJsonUpdater(\"derivedFields\");\nconst ConfigEditor = (props) => {\n  const { options, onOptionsChange } = props;\n  const updatePredefinedOperations = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (value) => {\n      (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_5__.reportInteraction)(\"grafana_loki_predefined_operations_changed\", { value });\n      onOptionsChange(setPredefinedOperations(options, value));\n    },\n    [options, onOptionsChange]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__.DataSourceDescription,\n    {\n      dataSourceName: \"Loki\",\n      docsLink: \"https://grafana.com/docs/grafana/latest/datasources/loki\",\n      hasRequiredFields: false\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_Divider__WEBPACK_IMPORTED_MODULE_1__.Divider, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.DataSourceHttpSettings,\n    {\n      defaultUrl: \"http://localhost:3100\",\n      dataSourceConfig: options,\n      showAccessOptions: false,\n      onChange: onOptionsChange,\n      secureSocksDSProxyEnabled: _grafana_runtime__WEBPACK_IMPORTED_MODULE_8__.config.secureSocksDSProxyEnabled\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_Divider__WEBPACK_IMPORTED_MODULE_1__.Divider, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_9__.ConfigSection,\n    {\n      title: \"Additional settings\",\n      description: \"Additional settings are optional settings that can be configured for more control over your data source.\",\n      isCollapsible: true,\n      isInitiallyOpen: true\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_AlertingSettings__WEBPACK_IMPORTED_MODULE_2__.AlertingSettings, { options, onOptionsChange }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_Divider__WEBPACK_IMPORTED_MODULE_1__.Divider, { hideLine: true }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _QuerySettings__WEBPACK_IMPORTED_MODULE_4__.QuerySettings,\n      {\n        maxLines: options.jsonData.maxLines || \"\",\n        onMaxLinedChange: (value) => onOptionsChange(setMaxLines(options, value)),\n        predefinedOperations: options.jsonData.predefinedOperations || \"\",\n        onPredefinedOperationsChange: updatePredefinedOperations\n      }\n    ),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_core_components_Divider__WEBPACK_IMPORTED_MODULE_1__.Divider, { hideLine: true }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _DerivedFields__WEBPACK_IMPORTED_MODULE_3__.DerivedFields,\n      {\n        fields: options.jsonData.derivedFields,\n        onChange: (value) => onOptionsChange(setDerivedFields(options, value))\n      }\n    )\n  ));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbmZpZ3VyYXRpb24vQ29uZmlnRWRpdG9yLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQW1DO0FBR2tCO0FBQ1g7QUFDSDtBQUNmO0FBSVM7QUFDSDtBQUNBO0FBSTlCLE1BQU0sa0JBQ0osQ0FBZ0IsVUFDaEIsQ0FBQyxTQUEwQyxVQUE4QztBQUN2RixTQUFPO0FBQUEsSUFDTCxHQUFHO0FBQUEsSUFDSCxVQUFVO0FBQUEsTUFDUixHQUFHLFFBQVE7QUFBQSxNQUNYLENBQUMsS0FBSyxHQUFHO0FBQUEsSUFDWDtBQUFBLEVBQ0Y7QUFDRjtBQUVGLE1BQU0sY0FBYyxnQkFBZ0IsVUFBVTtBQUM5QyxNQUFNLDBCQUEwQixnQkFBZ0Isc0JBQXNCO0FBQ3RFLE1BQU0sbUJBQW1CLGdCQUFnQixlQUFlO0FBRWpELE1BQU0sZUFBZSxDQUFDLFVBQWlCO0FBQzVDLFFBQU0sRUFBRSxTQUFTLGdCQUFnQixJQUFJO0FBRXJDLFFBQU0sNkJBQTZCLGtEQUFXO0FBQVgsSUFDakMsQ0FBQyxVQUFrQjtBQUNqQix5RUFBaUIsQ0FBQyw4Q0FBOEMsRUFBRSxNQUFNLENBQUM7QUFDekUsc0JBQWdCLHdCQUF3QixTQUFTLEtBQUssQ0FBQztBQUFBLElBQ3pEO0FBQUEsSUFDQSxDQUFDLFNBQVMsZUFBZTtBQUFBLEVBQzNCO0FBRUEsU0FDRSwwSUFDRTtBQUFBLElBQUMsd0VBQXFCO0FBQXJCO0FBQUEsTUFDQyxnQkFBZTtBQUFBLE1BQ2YsVUFBUztBQUFBLE1BQ1QsbUJBQW1CO0FBQUE7QUFBQSxFQUNyQixHQUVBLDJFQUFDLGdFQUFPLE1BQUMsR0FFVDtBQUFBLElBQUMsK0RBQXNCO0FBQXRCO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixrQkFBa0I7QUFBQSxNQUNsQixtQkFBbUI7QUFBQSxNQUNuQixVQUFVO0FBQUEsTUFDViwyQkFBMkIsb0RBQU0sQ0FBQztBQUFBO0FBQUEsRUFDcEMsR0FFQSwyRUFBQyxnRUFBTyxNQUFDLEdBRVQ7QUFBQSxJQUFDLGdFQUFhO0FBQWI7QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNOLGFBQVk7QUFBQSxNQUNaLGVBQWU7QUFBQSxNQUNmLGlCQUFlO0FBQUE7QUFBQSxJQUVmLDJFQUFDLCtEQUFnQixJQUFDLFNBQWtCLGlCQUFrQztBQUFBLElBQ3RFLDJFQUFDLGdFQUFPLElBQUMsVUFBUSxNQUFDO0FBQUEsSUFDbEI7QUFBQSxNQUFDLHlEQUFhO0FBQWI7QUFBQSxRQUNDLFVBQVUsUUFBUSxTQUFTLFlBQVk7QUFBQSxRQUN2QyxrQkFBa0IsQ0FBQyxVQUFVLGdCQUFnQixZQUFZLFNBQVMsS0FBSyxDQUFDO0FBQUEsUUFDeEUsc0JBQXNCLFFBQVEsU0FBUyx3QkFBd0I7QUFBQSxRQUMvRCw4QkFBOEI7QUFBQTtBQUFBLElBQ2hDO0FBQUEsSUFDQSwyRUFBQyxnRUFBTyxJQUFDLFVBQVEsTUFBQztBQUFBLElBQ2xCO0FBQUEsTUFBQyx5REFBYTtBQUFiO0FBQUEsUUFDQyxRQUFRLFFBQVEsU0FBUztBQUFBLFFBQ3pCLFVBQVUsQ0FBQyxVQUFVLGdCQUFnQixpQkFBaUIsU0FBUyxLQUFLLENBQUM7QUFBQTtBQUFBLElBQ3ZFO0FBQUEsRUFDRixDQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9jb25maWd1cmF0aW9uL0NvbmZpZ0VkaXRvci50c3g/MjMwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IERhdGFTb3VyY2VQbHVnaW5PcHRpb25zRWRpdG9yUHJvcHMsIERhdGFTb3VyY2VTZXR0aW5ncyB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgQ29uZmlnU2VjdGlvbiwgRGF0YVNvdXJjZURlc2NyaXB0aW9uIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IGNvbmZpZywgcmVwb3J0SW50ZXJhY3Rpb24gfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcbmltcG9ydCB7IERhdGFTb3VyY2VIdHRwU2V0dGluZ3MgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBEaXZpZGVyIH0gZnJvbSAnYXBwL2NvcmUvY29tcG9uZW50cy9EaXZpZGVyJztcblxuaW1wb3J0IHsgTG9raU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7IEFsZXJ0aW5nU2V0dGluZ3MgfSBmcm9tICcuL0FsZXJ0aW5nU2V0dGluZ3MnO1xuaW1wb3J0IHsgRGVyaXZlZEZpZWxkcyB9IGZyb20gJy4vRGVyaXZlZEZpZWxkcyc7XG5pbXBvcnQgeyBRdWVyeVNldHRpbmdzIH0gZnJvbSAnLi9RdWVyeVNldHRpbmdzJztcblxuZXhwb3J0IHR5cGUgUHJvcHMgPSBEYXRhU291cmNlUGx1Z2luT3B0aW9uc0VkaXRvclByb3BzPExva2lPcHRpb25zPjtcblxuY29uc3QgbWFrZUpzb25VcGRhdGVyID1cbiAgPFQgZXh0ZW5kcyBhbnk+KGZpZWxkOiBrZXlvZiBMb2tpT3B0aW9ucykgPT5cbiAgKG9wdGlvbnM6IERhdGFTb3VyY2VTZXR0aW5nczxMb2tpT3B0aW9ucz4sIHZhbHVlOiBUKTogRGF0YVNvdXJjZVNldHRpbmdzPExva2lPcHRpb25zPiA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBqc29uRGF0YToge1xuICAgICAgICAuLi5vcHRpb25zLmpzb25EYXRhLFxuICAgICAgICBbZmllbGRdOiB2YWx1ZSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfTtcblxuY29uc3Qgc2V0TWF4TGluZXMgPSBtYWtlSnNvblVwZGF0ZXIoJ21heExpbmVzJyk7XG5jb25zdCBzZXRQcmVkZWZpbmVkT3BlcmF0aW9ucyA9IG1ha2VKc29uVXBkYXRlcigncHJlZGVmaW5lZE9wZXJhdGlvbnMnKTtcbmNvbnN0IHNldERlcml2ZWRGaWVsZHMgPSBtYWtlSnNvblVwZGF0ZXIoJ2Rlcml2ZWRGaWVsZHMnKTtcblxuZXhwb3J0IGNvbnN0IENvbmZpZ0VkaXRvciA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgY29uc3QgeyBvcHRpb25zLCBvbk9wdGlvbnNDaGFuZ2UgfSA9IHByb3BzO1xuXG4gIGNvbnN0IHVwZGF0ZVByZWRlZmluZWRPcGVyYXRpb25zID0gdXNlQ2FsbGJhY2soXG4gICAgKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgIHJlcG9ydEludGVyYWN0aW9uKCdncmFmYW5hX2xva2lfcHJlZGVmaW5lZF9vcGVyYXRpb25zX2NoYW5nZWQnLCB7IHZhbHVlIH0pO1xuICAgICAgb25PcHRpb25zQ2hhbmdlKHNldFByZWRlZmluZWRPcGVyYXRpb25zKG9wdGlvbnMsIHZhbHVlKSk7XG4gICAgfSxcbiAgICBbb3B0aW9ucywgb25PcHRpb25zQ2hhbmdlXVxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxEYXRhU291cmNlRGVzY3JpcHRpb25cbiAgICAgICAgZGF0YVNvdXJjZU5hbWU9XCJMb2tpXCJcbiAgICAgICAgZG9jc0xpbms9XCJodHRwczovL2dyYWZhbmEuY29tL2RvY3MvZ3JhZmFuYS9sYXRlc3QvZGF0YXNvdXJjZXMvbG9raVwiXG4gICAgICAgIGhhc1JlcXVpcmVkRmllbGRzPXtmYWxzZX1cbiAgICAgIC8+XG5cbiAgICAgIDxEaXZpZGVyIC8+XG5cbiAgICAgIDxEYXRhU291cmNlSHR0cFNldHRpbmdzXG4gICAgICAgIGRlZmF1bHRVcmw9eydodHRwOi8vbG9jYWxob3N0OjMxMDAnfVxuICAgICAgICBkYXRhU291cmNlQ29uZmlnPXtvcHRpb25zfVxuICAgICAgICBzaG93QWNjZXNzT3B0aW9ucz17ZmFsc2V9XG4gICAgICAgIG9uQ2hhbmdlPXtvbk9wdGlvbnNDaGFuZ2V9XG4gICAgICAgIHNlY3VyZVNvY2tzRFNQcm94eUVuYWJsZWQ9e2NvbmZpZy5zZWN1cmVTb2Nrc0RTUHJveHlFbmFibGVkfVxuICAgICAgLz5cblxuICAgICAgPERpdmlkZXIgLz5cblxuICAgICAgPENvbmZpZ1NlY3Rpb25cbiAgICAgICAgdGl0bGU9XCJBZGRpdGlvbmFsIHNldHRpbmdzXCJcbiAgICAgICAgZGVzY3JpcHRpb249XCJBZGRpdGlvbmFsIHNldHRpbmdzIGFyZSBvcHRpb25hbCBzZXR0aW5ncyB0aGF0IGNhbiBiZSBjb25maWd1cmVkIGZvciBtb3JlIGNvbnRyb2wgb3ZlciB5b3VyIGRhdGEgc291cmNlLlwiXG4gICAgICAgIGlzQ29sbGFwc2libGU9e3RydWV9XG4gICAgICAgIGlzSW5pdGlhbGx5T3BlblxuICAgICAgPlxuICAgICAgICA8QWxlcnRpbmdTZXR0aW5ncyBvcHRpb25zPXtvcHRpb25zfSBvbk9wdGlvbnNDaGFuZ2U9e29uT3B0aW9uc0NoYW5nZX0gLz5cbiAgICAgICAgPERpdmlkZXIgaGlkZUxpbmUgLz5cbiAgICAgICAgPFF1ZXJ5U2V0dGluZ3NcbiAgICAgICAgICBtYXhMaW5lcz17b3B0aW9ucy5qc29uRGF0YS5tYXhMaW5lcyB8fCAnJ31cbiAgICAgICAgICBvbk1heExpbmVkQ2hhbmdlPXsodmFsdWUpID0+IG9uT3B0aW9uc0NoYW5nZShzZXRNYXhMaW5lcyhvcHRpb25zLCB2YWx1ZSkpfVxuICAgICAgICAgIHByZWRlZmluZWRPcGVyYXRpb25zPXtvcHRpb25zLmpzb25EYXRhLnByZWRlZmluZWRPcGVyYXRpb25zIHx8ICcnfVxuICAgICAgICAgIG9uUHJlZGVmaW5lZE9wZXJhdGlvbnNDaGFuZ2U9e3VwZGF0ZVByZWRlZmluZWRPcGVyYXRpb25zfVxuICAgICAgICAvPlxuICAgICAgICA8RGl2aWRlciBoaWRlTGluZSAvPlxuICAgICAgICA8RGVyaXZlZEZpZWxkc1xuICAgICAgICAgIGZpZWxkcz17b3B0aW9ucy5qc29uRGF0YS5kZXJpdmVkRmllbGRzfVxuICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IG9uT3B0aW9uc0NoYW5nZShzZXREZXJpdmVkRmllbGRzKG9wdGlvbnMsIHZhbHVlKSl9XG4gICAgICAgIC8+XG4gICAgICA8L0NvbmZpZ1NlY3Rpb24+XG4gICAgPC8+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/configuration/ConfigEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/configuration/DebugSection.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DebugSection: () => (/* binding */ DebugSection)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/TextArea/TextArea.tsx\");\n/* harmony import */ var _features_explore_utils_links__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/features/explore/utils/links.ts\");\n\n\n\n\n\nconst DebugSection = (props) => {\n  const { derivedFields, className } = props;\n  const [debugText, setDebugText] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  let debugFields = [];\n  if (debugText && derivedFields) {\n    debugFields = makeDebugFields(derivedFields, debugText);\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.InlineField, { label: \"Debug log message\", labelWidth: 24, grow: true }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_3__.TextArea,\n    {\n      type: \"text\",\n      \"aria-label\": \"Prometheus Query\",\n      placeholder: \"Paste an example log line here to test the regular expressions of your derived fields\",\n      value: debugText,\n      onChange: (event) => setDebugText(event.currentTarget.value)\n    }\n  )), !!debugFields.length && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DebugFields, { fields: debugFields }));\n};\nconst DebugFields = ({ fields }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"table\", { className: \"filter-table\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"thead\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"th\", null, \"Name\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"th\", null, \"Value\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"th\", null, \"Url\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tbody\", null, fields.map((field) => {\n    let value = field.value;\n    if (field.error && field.error instanceof Error) {\n      value = field.error.message;\n    } else if (field.href) {\n      value = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"a\", { href: field.href }, value);\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"tr\", { key: `${field.name}=${field.value}` }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", null, field.name), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", null, value), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"td\", null, field.href ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"a\", { href: field.href }, field.href) : \"\"));\n  })));\n};\nfunction makeDebugFields(derivedFields, debugText) {\n  return derivedFields.filter((field) => field.name && field.matcherRegex).map((field) => {\n    try {\n      const testMatch = debugText.match(field.matcherRegex);\n      const value = testMatch && testMatch[1];\n      let link = null;\n      if (field.url && value) {\n        link = (0,_features_explore_utils_links__WEBPACK_IMPORTED_MODULE_1__.getFieldLinksForExplore)({\n          field: {\n            name: \"\",\n            type: _grafana_data__WEBPACK_IMPORTED_MODULE_4__.FieldType.string,\n            values: [value],\n            config: {\n              links: [{ title: \"\", url: field.url }]\n            }\n          },\n          rowIndex: 0,\n          range: {}\n        })[0];\n      }\n      const result = {\n        name: field.name,\n        value: value || \"<no match>\",\n        href: link ? link.href : void 0\n      };\n      return result;\n    } catch (error) {\n      const result = {\n        name: field.name,\n        error\n      };\n      return result;\n    }\n  });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbmZpZ3VyYXRpb24vRGVidWdTZWN0aW9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUEyQztBQUVDO0FBQ047QUFFRTtBQU9qQyxNQUFNLGVBQWUsQ0FBQyxVQUFpQjtBQUM1QyxRQUFNLEVBQUUsZUFBZSxVQUFVLElBQUk7QUFDckMsUUFBTSxDQUFDLFdBQVcsWUFBWSxJQUFJLCtDQUFRLENBQUMsRUFBRTtBQUU3QyxNQUFJLGNBQTRCLENBQUM7QUFDakMsTUFBSSxhQUFhLGVBQWU7QUFDOUIsa0JBQWMsZ0JBQWdCLGVBQWUsU0FBUztBQUFBLEVBQ3hEO0FBRUEsU0FDRSwyRUFBQyxTQUFJLGFBQ0gsMkVBQUMsb0RBQVcsSUFBQyxPQUFNLHFCQUFvQixZQUFZLElBQUksTUFBSSxRQUN6RDtBQUFBLElBQUMsaURBQVE7QUFBUjtBQUFBLE1BQ0MsTUFBSztBQUFBLE1BQ0wsY0FBVztBQUFBLE1BQ1gsYUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsVUFBVSxDQUFDLFVBQVUsYUFBYSxNQUFNLGNBQWMsS0FBSztBQUFBO0FBQUEsRUFDN0QsQ0FDRixHQUNDLENBQUMsQ0FBQyxZQUFZLFVBQVUsMkVBQUMsZUFBWSxRQUFRLGFBQWEsQ0FDN0Q7QUFFSjtBQUtBLE1BQU0sY0FBYyxDQUFDLEVBQUUsT0FBTyxNQUEyQjtBQUN2RCxTQUNFLDJFQUFDLFdBQU0sV0FBVyxrQkFDaEIsMkVBQUMsZUFDQywyRUFBQyxZQUNDLDJFQUFDLFlBQUcsTUFBSSxHQUNSLDJFQUFDLFlBQUcsT0FBSyxHQUNULDJFQUFDLFlBQUcsS0FBRyxDQUNULENBQ0YsR0FDQSwyRUFBQyxlQUNFLE9BQU8sSUFBSSxDQUFDLFVBQVU7QUFDckIsUUFBSSxRQUFtQixNQUFNO0FBQzdCLFFBQUksTUFBTSxTQUFTLE1BQU0saUJBQWlCLE9BQU87QUFDL0MsY0FBUSxNQUFNLE1BQU07QUFBQSxJQUN0QixXQUFXLE1BQU0sTUFBTTtBQUNyQixjQUFRLDJFQUFDLE9BQUUsTUFBTSxNQUFNLFFBQU8sS0FBTTtBQUFBLElBQ3RDO0FBQ0EsV0FDRSwyRUFBQyxRQUFHLEtBQUssR0FBRyxNQUFNLFFBQVEsTUFBTSxXQUM5QiwyRUFBQyxZQUFJLE1BQU0sSUFBSyxHQUNoQiwyRUFBQyxZQUFJLEtBQU0sR0FDWCwyRUFBQyxZQUFJLE1BQU0sT0FBTywyRUFBQyxPQUFFLE1BQU0sTUFBTSxRQUFPLE1BQU0sSUFBSyxJQUFPLEVBQUcsQ0FDL0Q7QUFBQSxFQUVKLENBQUMsQ0FDSCxDQUNGO0FBRUo7QUFTQSxTQUFTLGdCQUFnQixlQUFxQyxXQUFpQztBQUM3RixTQUFPLGNBQ0osT0FBTyxDQUFDLFVBQVUsTUFBTSxRQUFRLE1BQU0sWUFBWSxFQUNsRCxJQUFJLENBQUMsVUFBVTtBQUNkLFFBQUk7QUFDRixZQUFNLFlBQVksVUFBVSxNQUFNLE1BQU0sWUFBWTtBQUNwRCxZQUFNLFFBQVEsYUFBYSxVQUFVLENBQUM7QUFDdEMsVUFBSSxPQUFnQztBQUVwQyxVQUFJLE1BQU0sT0FBTyxPQUFPO0FBQ3RCLGVBQU8sc0ZBQXVCLENBQUM7QUFBQSxVQUM3QixPQUFPO0FBQUEsWUFDTCxNQUFNO0FBQUEsWUFDTixNQUFNLG9EQUFTLENBQUM7QUFBQSxZQUNoQixRQUFRLENBQUMsS0FBSztBQUFBLFlBQ2QsUUFBUTtBQUFBLGNBQ04sT0FBTyxDQUFDLEVBQUUsT0FBTyxJQUFJLEtBQUssTUFBTSxJQUFJLENBQUM7QUFBQSxZQUN2QztBQUFBLFVBQ0Y7QUFBQSxVQUNBLFVBQVU7QUFBQSxVQUNWLE9BQU8sQ0FBQztBQUFBLFFBQ1YsQ0FBQyxFQUFFLENBQUM7QUFBQSxNQUNOO0FBRUEsWUFBTSxTQUFxQjtBQUFBLFFBQ3pCLE1BQU0sTUFBTTtBQUFBLFFBQ1osT0FBTyxTQUFTO0FBQUEsUUFDaEIsTUFBTSxPQUFPLEtBQUssT0FBTztBQUFBLE1BQzNCO0FBQ0EsYUFBTztBQUFBLElBQ1QsU0FBUyxPQUFQO0FBQ0EsWUFBTSxTQUFxQjtBQUFBLFFBQ3pCLE1BQU0sTUFBTTtBQUFBLFFBQ1o7QUFBQSxNQUNGO0FBQ0EsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGLENBQUM7QUFDTCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbmZpZ3VyYXRpb24vRGVidWdTZWN0aW9uLnRzeD8yYWVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBSZWFjdE5vZGUsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBGaWVsZCwgRmllbGRUeXBlLCBMaW5rTW9kZWwgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IElubGluZUZpZWxkLCBUZXh0QXJlYSB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgZ2V0RmllbGRMaW5rc0ZvckV4cGxvcmUgfSBmcm9tICcuLi8uLi8uLi8uLi9mZWF0dXJlcy9leHBsb3JlL3V0aWxzL2xpbmtzJztcbmltcG9ydCB7IERlcml2ZWRGaWVsZENvbmZpZyB9IGZyb20gJy4uL3R5cGVzJztcblxudHlwZSBQcm9wcyA9IHtcbiAgZGVyaXZlZEZpZWxkcz86IERlcml2ZWRGaWVsZENvbmZpZ1tdO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG59O1xuZXhwb3J0IGNvbnN0IERlYnVnU2VjdGlvbiA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgY29uc3QgeyBkZXJpdmVkRmllbGRzLCBjbGFzc05hbWUgfSA9IHByb3BzO1xuICBjb25zdCBbZGVidWdUZXh0LCBzZXREZWJ1Z1RleHRdID0gdXNlU3RhdGUoJycpO1xuXG4gIGxldCBkZWJ1Z0ZpZWxkczogRGVidWdGaWVsZFtdID0gW107XG4gIGlmIChkZWJ1Z1RleHQgJiYgZGVyaXZlZEZpZWxkcykge1xuICAgIGRlYnVnRmllbGRzID0gbWFrZURlYnVnRmllbGRzKGRlcml2ZWRGaWVsZHMsIGRlYnVnVGV4dCk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxuICAgICAgPElubGluZUZpZWxkIGxhYmVsPVwiRGVidWcgbG9nIG1lc3NhZ2VcIiBsYWJlbFdpZHRoPXsyNH0gZ3Jvdz5cbiAgICAgICAgPFRleHRBcmVhXG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJQcm9tZXRoZXVzIFF1ZXJ5XCJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBhc3RlIGFuIGV4YW1wbGUgbG9nIGxpbmUgaGVyZSB0byB0ZXN0IHRoZSByZWd1bGFyIGV4cHJlc3Npb25zIG9mIHlvdXIgZGVyaXZlZCBmaWVsZHNcIlxuICAgICAgICAgIHZhbHVlPXtkZWJ1Z1RleHR9XG4gICAgICAgICAgb25DaGFuZ2U9eyhldmVudCkgPT4gc2V0RGVidWdUZXh0KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpfVxuICAgICAgICAvPlxuICAgICAgPC9JbmxpbmVGaWVsZD5cbiAgICAgIHshIWRlYnVnRmllbGRzLmxlbmd0aCAmJiA8RGVidWdGaWVsZHMgZmllbGRzPXtkZWJ1Z0ZpZWxkc30gLz59XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG50eXBlIERlYnVnRmllbGRJdGVtUHJvcHMgPSB7XG4gIGZpZWxkczogRGVidWdGaWVsZFtdO1xufTtcbmNvbnN0IERlYnVnRmllbGRzID0gKHsgZmllbGRzIH06IERlYnVnRmllbGRJdGVtUHJvcHMpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8dGFibGUgY2xhc3NOYW1lPXsnZmlsdGVyLXRhYmxlJ30+XG4gICAgICA8dGhlYWQ+XG4gICAgICAgIDx0cj5cbiAgICAgICAgICA8dGg+TmFtZTwvdGg+XG4gICAgICAgICAgPHRoPlZhbHVlPC90aD5cbiAgICAgICAgICA8dGg+VXJsPC90aD5cbiAgICAgICAgPC90cj5cbiAgICAgIDwvdGhlYWQ+XG4gICAgICA8dGJvZHk+XG4gICAgICAgIHtmaWVsZHMubWFwKChmaWVsZCkgPT4ge1xuICAgICAgICAgIGxldCB2YWx1ZTogUmVhY3ROb2RlID0gZmllbGQudmFsdWU7XG4gICAgICAgICAgaWYgKGZpZWxkLmVycm9yICYmIGZpZWxkLmVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHZhbHVlID0gZmllbGQuZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkLmhyZWYpIHtcbiAgICAgICAgICAgIHZhbHVlID0gPGEgaHJlZj17ZmllbGQuaHJlZn0+e3ZhbHVlfTwvYT47XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dHIga2V5PXtgJHtmaWVsZC5uYW1lfT0ke2ZpZWxkLnZhbHVlfWB9PlxuICAgICAgICAgICAgICA8dGQ+e2ZpZWxkLm5hbWV9PC90ZD5cbiAgICAgICAgICAgICAgPHRkPnt2YWx1ZX08L3RkPlxuICAgICAgICAgICAgICA8dGQ+e2ZpZWxkLmhyZWYgPyA8YSBocmVmPXtmaWVsZC5ocmVmfT57ZmllbGQuaHJlZn08L2E+IDogJyd9PC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSl9XG4gICAgICA8L3Rib2R5PlxuICAgIDwvdGFibGU+XG4gICk7XG59O1xuXG50eXBlIERlYnVnRmllbGQgPSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZXJyb3I/OiB1bmtub3duO1xuICB2YWx1ZT86IHN0cmluZztcbiAgaHJlZj86IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIG1ha2VEZWJ1Z0ZpZWxkcyhkZXJpdmVkRmllbGRzOiBEZXJpdmVkRmllbGRDb25maWdbXSwgZGVidWdUZXh0OiBzdHJpbmcpOiBEZWJ1Z0ZpZWxkW10ge1xuICByZXR1cm4gZGVyaXZlZEZpZWxkc1xuICAgIC5maWx0ZXIoKGZpZWxkKSA9PiBmaWVsZC5uYW1lICYmIGZpZWxkLm1hdGNoZXJSZWdleClcbiAgICAubWFwKChmaWVsZCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdGVzdE1hdGNoID0gZGVidWdUZXh0Lm1hdGNoKGZpZWxkLm1hdGNoZXJSZWdleCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGVzdE1hdGNoICYmIHRlc3RNYXRjaFsxXTtcbiAgICAgICAgbGV0IGxpbms6IExpbmtNb2RlbDxGaWVsZD4gfCBudWxsID0gbnVsbDtcblxuICAgICAgICBpZiAoZmllbGQudXJsICYmIHZhbHVlKSB7XG4gICAgICAgICAgbGluayA9IGdldEZpZWxkTGlua3NGb3JFeHBsb3JlKHtcbiAgICAgICAgICAgIGZpZWxkOiB7XG4gICAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgICB0eXBlOiBGaWVsZFR5cGUuc3RyaW5nLFxuICAgICAgICAgICAgICB2YWx1ZXM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgIGxpbmtzOiBbeyB0aXRsZTogJycsIHVybDogZmllbGQudXJsIH1dLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJvd0luZGV4OiAwLFxuICAgICAgICAgICAgcmFuZ2U6IHt9IGFzIGFueSxcbiAgICAgICAgICB9KVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdDogRGVidWdGaWVsZCA9IHtcbiAgICAgICAgICBuYW1lOiBmaWVsZC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSB8fCAnPG5vIG1hdGNoPicsXG4gICAgICAgICAgaHJlZjogbGluayA/IGxpbmsuaHJlZiA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdDogRGVidWdGaWVsZCA9IHtcbiAgICAgICAgICBuYW1lOiBmaWVsZC5uYW1lLFxuICAgICAgICAgIGVycm9yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/configuration/DebugSection.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/configuration/DerivedField.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DerivedField: () => (/* binding */ DerivedField)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/usePrevious.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/Field.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/Input.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/DataLinks/DataLinkInput.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Switch/Switch.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/Label.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Tooltip/Tooltip.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n/* harmony import */ var app_features_datasources_components_picker_DataSourcePicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/datasources/components/picker/DataSourcePicker.tsx\");\n\n\n\n\n\n\nconst getStyles = (theme) => ({\n  row: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: flex;\n    align-items: baseline;\n  `,\n  nameField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 2;\n    margin-right: ${theme.spacing(0.5)};\n  `,\n  regexField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 3;\n    margin-right: ${theme.spacing(0.5)};\n  `,\n  urlField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 1;\n    margin-right: ${theme.spacing(0.5)};\n  `,\n  urlDisplayLabelField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 1;\n  `,\n  internalLink: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-right: ${theme.spacing(1)};\n  `,\n  dataSource: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)``\n});\nconst DerivedField = (props) => {\n  const { value, onChange, onDelete, suggestions, className, validateName } = props;\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useStyles2)(getStyles);\n  const [showInternalLink, setShowInternalLink] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!!value.datasourceUid);\n  const previousUid = (0,react_use__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(value.datasourceUid);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!previousUid && value.datasourceUid && !showInternalLink) {\n      setShowInternalLink(true);\n    }\n    if (previousUid && !value.datasourceUid && showInternalLink) {\n      setShowInternalLink(false);\n    }\n  }, [previousUid, value.datasourceUid, showInternalLink]);\n  const handleChange = (field) => (event) => {\n    onChange({\n      ...value,\n      [field]: event.currentTarget.value\n    });\n  };\n  const invalidName = !validateName(value.name);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className, \"data-testid\": \"derived-field\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"gf-form\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Field, { className: styles.nameField, label: \"Name\", invalid: invalidName, error: \"The name is already in use\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Input, { value: value.name, onChange: handleChange(\"name\"), placeholder: \"Field name\", invalid: invalidName })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Field,\n    {\n      className: styles.regexField,\n      label: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        TooltipLabel,\n        {\n          label: \"Regex\",\n          content: \"Use to parse and capture some part of the log message. You can use the captured groups in the template.\"\n        }\n      )\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Input, { value: value.matcherRegex, onChange: handleChange(\"matcherRegex\") })\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Field, { label: \"\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Button,\n    {\n      variant: \"destructive\",\n      title: \"Remove field\",\n      icon: \"times\",\n      onClick: (event) => {\n        event.preventDefault();\n        onDelete();\n      }\n    }\n  ))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"gf-form\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Field, { label: showInternalLink ? \"Query\" : \"URL\", className: styles.urlField }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_8__.DataLinkInput,\n    {\n      placeholder: showInternalLink ? \"${__value.raw}\" : \"http://example.com/${__value.raw}\",\n      value: value.url || \"\",\n      onChange: (newValue) => onChange({\n        ...value,\n        url: newValue\n      }),\n      suggestions\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Field,\n    {\n      className: styles.urlDisplayLabelField,\n      label: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        TooltipLabel,\n        {\n          label: \"URL Label\",\n          content: \"Use to override the button label when this derived field is found in a log.\"\n        }\n      )\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Input, { value: value.urlDisplayLabel, onChange: handleChange(\"urlDisplayLabel\") })\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"gf-form\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Field, { label: \"Internal link\", className: styles.internalLink }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Switch,\n    {\n      value: showInternalLink,\n      onChange: (e) => {\n        const { checked } = e.currentTarget;\n        if (!checked) {\n          onChange({\n            ...value,\n            datasourceUid: void 0\n          });\n        }\n        setShowInternalLink(checked);\n      }\n    }\n  )), showInternalLink && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Field, { label: \"\", className: styles.dataSource }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    app_features_datasources_components_picker_DataSourcePicker__WEBPACK_IMPORTED_MODULE_2__.DataSourcePicker,\n    {\n      tracing: true,\n      onChange: (ds) => onChange({\n        ...value,\n        datasourceUid: ds.uid\n      }),\n      current: value.datasourceUid,\n      noDefault: true\n    }\n  ))));\n};\nconst TooltipLabel = ({ content, label }) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.Label, null, label, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Tooltip, { placement: \"top\", content, theme: \"info\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Icon, { tabIndex: 0, name: \"info-circle\", size: \"sm\", style: { marginLeft: \"10px\" } })));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbmZpZ3VyYXRpb24vRGVyaXZlZEZpZWxkLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ29DO0FBQzVCO0FBR2tFO0FBQzdEO0FBSWpDLE1BQU0sWUFBWSxDQUFDLFdBQTBCO0FBQUEsRUFDM0MsS0FBSyxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBLEVBSUwsV0FBVyxpREFBRztBQUFIO0FBQUEsb0JBRU8sTUFBTSxRQUFRLEdBQUc7QUFBQTtBQUFBLEVBRW5DLFlBQVksaURBQUc7QUFBSDtBQUFBLG9CQUVNLE1BQU0sUUFBUSxHQUFHO0FBQUE7QUFBQSxFQUVuQyxVQUFVLGlEQUFHO0FBQUg7QUFBQSxvQkFFUSxNQUFNLFFBQVEsR0FBRztBQUFBO0FBQUEsRUFFbkMsc0JBQXNCLGlEQUFHO0FBQUg7QUFBQTtBQUFBLEVBR3RCLGNBQWMsaURBQUc7QUFBSCxvQkFDSSxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUEsRUFFakMsWUFBWSxpREFBRztBQUNqQjtBQVVPLE1BQU0sZUFBZSxDQUFDLFVBQWlCO0FBQzVDLFFBQU0sRUFBRSxPQUFPLFVBQVUsVUFBVSxhQUFhLFdBQVcsYUFBYSxJQUFJO0FBQzVFLFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFDbkMsUUFBTSxDQUFDLGtCQUFrQixtQkFBbUIsSUFBSSwrQ0FBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLGFBQWE7QUFDOUUsUUFBTSxjQUFjLHFEQUFXLENBQUMsTUFBTSxhQUFhO0FBR25ELGtEQUFTLENBQUMsTUFBTTtBQUNkLFFBQUksQ0FBQyxlQUFlLE1BQU0saUJBQWlCLENBQUMsa0JBQWtCO0FBQzVELDBCQUFvQixJQUFJO0FBQUEsSUFDMUI7QUFDQSxRQUFJLGVBQWUsQ0FBQyxNQUFNLGlCQUFpQixrQkFBa0I7QUFDM0QsMEJBQW9CLEtBQUs7QUFBQSxJQUMzQjtBQUFBLEVBQ0YsR0FBRyxDQUFDLGFB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ZUFBZSxDQUFDLEVBQUUsU0FBUyxNQUFNLE1BQ3JDLDJFQUFDLCtDQUFLLFFBQ0gsT0FDRCwyRUFBQyxpREFBTyxJQUFDLFdBQVUsT0FBTSxTQUFrQixPQUFNLFVBQy9DLDJFQUFDLDhDQUFJLElBQUMsVUFBVSxHQUFHLE1BQUssZUFBYyxNQUFLLE1BQUssT0FBTyxFQUFFLFlBQVksT0FBTyxHQUFHLENBQ2pGLENBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9jb25maWd1cmF0aW9uL0Rlcml2ZWRGaWVsZC50c3g/NzgxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0LCB7IENoYW5nZUV2ZW50LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUHJldmlvdXMgfSBmcm9tICdyZWFjdC11c2UnO1xuXG5pbXBvcnQgeyBHcmFmYW5hVGhlbWUyLCBEYXRhU291cmNlSW5zdGFuY2VTZXR0aW5ncywgVmFyaWFibGVTdWdnZXN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBCdXR0b24sIERhdGFMaW5rSW5wdXQsIEZpZWxkLCBJY29uLCBJbnB1dCwgTGFiZWwsIFRvb2x0aXAsIHVzZVN0eWxlczIsIFN3aXRjaCB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IERhdGFTb3VyY2VQaWNrZXIgfSBmcm9tICdhcHAvZmVhdHVyZXMvZGF0YXNvdXJjZXMvY29tcG9uZW50cy9waWNrZXIvRGF0YVNvdXJjZVBpY2tlcic7XG5cbmltcG9ydCB7IERlcml2ZWRGaWVsZENvbmZpZyB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICByb3c6IGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBiYXNlbGluZTtcbiAgYCxcbiAgbmFtZUZpZWxkOiBjc3NgXG4gICAgZmxleDogMjtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7dGhlbWUuc3BhY2luZygwLjUpfTtcbiAgYCxcbiAgcmVnZXhGaWVsZDogY3NzYFxuICAgIGZsZXg6IDM7XG4gICAgbWFyZ2luLXJpZ2h0OiAke3RoZW1lLnNwYWNpbmcoMC41KX07XG4gIGAsXG4gIHVybEZpZWxkOiBjc3NgXG4gICAgZmxleDogMTtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7dGhlbWUuc3BhY2luZygwLjUpfTtcbiAgYCxcbiAgdXJsRGlzcGxheUxhYmVsRmllbGQ6IGNzc2BcbiAgICBmbGV4OiAxO1xuICBgLFxuICBpbnRlcm5hbExpbms6IGNzc2BcbiAgICBtYXJnaW4tcmlnaHQ6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gIGAsXG4gIGRhdGFTb3VyY2U6IGNzc2BgLFxufSk7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHZhbHVlOiBEZXJpdmVkRmllbGRDb25maWc7XG4gIG9uQ2hhbmdlOiAodmFsdWU6IERlcml2ZWRGaWVsZENvbmZpZykgPT4gdm9pZDtcbiAgb25EZWxldGU6ICgpID0+IHZvaWQ7XG4gIHN1Z2dlc3Rpb25zOiBWYXJpYWJsZVN1Z2dlc3Rpb25bXTtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICB2YWxpZGF0ZU5hbWU6IChuYW1lOiBzdHJpbmcpID0+IGJvb2xlYW47XG59O1xuZXhwb3J0IGNvbnN0IERlcml2ZWRGaWVsZCA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgY29uc3QgeyB2YWx1ZSwgb25DaGFuZ2UsIG9uRGVsZXRlLCBzdWdnZXN0aW9ucywgY2xhc3NOYW1lLCB2YWxpZGF0ZU5hbWUgfSA9IHByb3BzO1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG4gIGNvbnN0IFtzaG93SW50ZXJuYWxMaW5rLCBzZXRTaG93SW50ZXJuYWxMaW5rXSA9IHVzZVN0YXRlKCEhdmFsdWUuZGF0YXNvdXJjZVVpZCk7XG4gIGNvbnN0IHByZXZpb3VzVWlkID0gdXNlUHJldmlvdXModmFsdWUuZGF0YXNvdXJjZVVpZCk7XG5cbiAgLy8gRm9yY2UgaW50ZXJuYWwgbGluayB2aXNpYmlsaXR5IGNoYW5nZSBpZiB1aWQgY2hhbmdlZCBvdXRzaWRlIG9mIHRoaXMgY29tcG9uZW50LlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcHJldmlvdXNVaWQgJiYgdmFsdWUuZGF0YXNvdXJjZVVpZCAmJiAhc2hvd0ludGVybmFsTGluaykge1xuICAgICAgc2V0U2hvd0ludGVybmFsTGluayh0cnVlKTtcbiAgICB9XG4gICAgaWYgKHByZXZpb3VzVWlkICYmICF2YWx1ZS5kYXRhc291cmNlVWlkICYmIHNob3dJbnRlcm5hbExpbmspIHtcbiAgICAgIHNldFNob3dJbnRlcm5hbExpbmsoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3ByZXZpb3VzVWlkLCB2YWx1ZS5kYXRhc291cmNlVWlkLCBzaG93SW50ZXJuYWxMaW5rXSk7XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGZpZWxkOiBrZXlvZiB0eXBlb2YgdmFsdWUpID0+IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBvbkNoYW5nZSh7XG4gICAgICAuLi52YWx1ZSxcbiAgICAgIFtmaWVsZF06IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaW52YWxpZE5hbWUgPSAhdmFsaWRhdGVOYW1lKHZhbHVlLm5hbWUpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0gZGF0YS10ZXN0aWQ9XCJkZXJpdmVkLWZpZWxkXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdmLWZvcm1cIj5cbiAgICAgICAgPEZpZWxkIGNsYXNzTmFtZT17c3R5bGVzLm5hbWVGaWVsZH0gbGFiZWw9XCJOYW1lXCIgaW52YWxpZD17aW52YWxpZE5hbWV9IGVycm9yPVwiVGhlIG5hbWUgaXMgYWxyZWFkeSBpbiB1c2VcIj5cbiAgICAgICAgICA8SW5wdXQgdmFsdWU9e3ZhbHVlLm5hbWV9IG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2UoJ25hbWUnKX0gcGxhY2Vob2xkZXI9XCJGaWVsZCBuYW1lXCIgaW52YWxpZD17aW52YWxpZE5hbWV9IC8+XG4gICAgICAgIDwvRmllbGQ+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnJlZ2V4RmllbGR9XG4gICAgICAgICAgbGFiZWw9e1xuICAgICAgICAgICAgPFRvb2x0aXBMYWJlbFxuICAgICAgICAgICAgICBsYWJlbD1cIlJlZ2V4XCJcbiAgICAgICAgICAgICAgY29udGVudD1cIlVzZSB0byBwYXJzZSBhbmQgY2FwdHVyZSBzb21lIHBhcnQgb2YgdGhlIGxvZyBtZXNzYWdlLiBZb3UgY2FuIHVzZSB0aGUgY2FwdHVyZWQgZ3JvdXBzIGluIHRoZSB0ZW1wbGF0ZS5cIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgID5cbiAgICAgICAgICA8SW5wdXQgdmFsdWU9e3ZhbHVlLm1hdGNoZXJSZWdleH0gb25DaGFuZ2U9e2hhbmRsZUNoYW5nZSgnbWF0Y2hlclJlZ2V4Jyl9IC8+XG4gICAgICAgIDwvRmllbGQ+XG4gICAgICAgIDxGaWVsZCBsYWJlbD1cIlwiPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9XCJkZXN0cnVjdGl2ZVwiXG4gICAgICAgICAgICB0aXRsZT1cIlJlbW92ZSBmaWVsZFwiXG4gICAgICAgICAgICBpY29uPVwidGltZXNcIlxuICAgICAgICAgICAgb25DbGljaz17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIG9uRGVsZXRlKCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRmllbGQ+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZi1mb3JtXCI+XG4gICAgICAgIDxGaWVsZCBsYWJlbD17c2hvd0ludGVybmFsTGluayA/ICdRdWVyeScgOiAnVVJMJ30gY2xhc3NOYW1lPXtzdHlsZXMudXJsRmllbGR9PlxuICAgICAgICAgIDxEYXRhTGlua0lucHV0XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj17c2hvd0ludGVybmFsTGluayA/ICcke19fdmFsdWUucmF3fScgOiAnaHR0cDovL2V4YW1wbGUuY29tLyR7X192YWx1ZS5yYXd9J31cbiAgICAgICAgICAgIHZhbHVlPXt2YWx1ZS51cmwgfHwgJyd9XG4gICAgICAgICAgICBvbkNoYW5nZT17KG5ld1ZhbHVlKSA9PlxuICAgICAgICAgICAgICBvbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICAgICAgdXJsOiBuZXdWYWx1ZSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zPXtzdWdnZXN0aW9uc31cbiAgICAgICAgICAvPlxuICAgICAgICA8L0ZpZWxkPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy51cmxEaXNwbGF5TGFiZWxGaWVsZH1cbiAgICAgICAgICBsYWJlbD17XG4gICAgICAgICAgICA8VG9vbHRpcExhYmVsXG4gICAgICAgICAgICAgIGxhYmVsPVwiVVJMIExhYmVsXCJcbiAgICAgICAgICAgICAgY29udGVudD1cIlVzZSB0byBvdmVycmlkZSB0aGUgYnV0dG9uIGxhYmVsIHdoZW4gdGhpcyBkZXJpdmVkIGZpZWxkIGlzIGZvdW5kIGluIGEgbG9nLlwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgICAgIDxJbnB1dCB2YWx1ZT17dmFsdWUudXJsRGlzcGxheUxhYmVsfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlKCd1cmxEaXNwbGF5TGFiZWwnKX0gLz5cbiAgICAgICAgPC9GaWVsZD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdmLWZvcm1cIj5cbiAgICAgICAgPEZpZWxkIGxhYmVsPVwiSW50ZXJuYWwgbGlua1wiIGNsYXNzTmFtZT17c3R5bGVzLmludGVybmFsTGlua30+XG4gICAgICAgICAgPFN3aXRjaFxuICAgICAgICAgICAgdmFsdWU9e3Nob3dJbnRlcm5hbExpbmt9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGU6IENoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgY2hlY2tlZCB9ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgICAgICAgICAgICBpZiAoIWNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VVaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzZXRTaG93SW50ZXJuYWxMaW5rKGNoZWNrZWQpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0ZpZWxkPlxuXG4gICAgICAgIHtzaG93SW50ZXJuYWxMaW5rICYmIChcbiAgICAgICAgICA8RmllbGQgbGFiZWw9XCJcIiBjbGFzc05hbWU9e3N0eWxlcy5kYXRhU291cmNlfT5cbiAgICAgICAgICAgIDxEYXRhU291cmNlUGlja2VyXG4gICAgICAgICAgICAgIHRyYWNpbmc9e3RydWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZHM6IERhdGFTb3VyY2VJbnN0YW5jZVNldHRpbmdzKSA9PlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZVVpZDogZHMudWlkLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY3VycmVudD17dmFsdWUuZGF0YXNvdXJjZVVpZH1cbiAgICAgICAgICAgICAgbm9EZWZhdWx0XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvRmllbGQ+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IFRvb2x0aXBMYWJlbCA9ICh7IGNvbnRlbnQsIGxhYmVsIH06IHsgY29udGVudDogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH0pID0+IChcbiAgPExhYmVsPlxuICAgIHtsYWJlbH1cbiAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJ0b3BcIiBjb250ZW50PXtjb250ZW50fSB0aGVtZT1cImluZm9cIj5cbiAgICAgIDxJY29uIHRhYkluZGV4PXswfSBuYW1lPVwiaW5mby1jaXJjbGVcIiBzaXplPVwic21cIiBzdHlsZT17eyBtYXJnaW5MZWZ0OiAnMTBweCcgfX0gLz5cbiAgICA8L1Rvb2x0aXA+XG4gIDwvTGFiZWw+XG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/configuration/DerivedField.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/configuration/DerivedFields.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DerivedFields: () => (/* binding */ DerivedFields)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/dataLinks.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataLink.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSubSection.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/components/ConfigDescriptionLink.tsx\");\n/* harmony import */ var _DebugSection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/configuration/DebugSection.tsx\");\n/* harmony import */ var _DerivedField__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/configuration/DerivedField.tsx\");\n\n\n\n\n\n\n\n\n\nconst getStyles = (theme) => ({\n  addButton: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-right: 10px;\n  `,\n  derivedField: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-bottom: ${theme.spacing(1)};\n  `,\n  container: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-bottom: ${theme.spacing(4)};\n  `,\n  debugSection: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-top: ${theme.spacing(4)};\n  `\n});\nconst DerivedFields = ({ fields = [], onChange }) => {\n  const theme = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.useTheme2)();\n  const styles = getStyles(theme);\n  const [showDebug, setShowDebug] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const validateName = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (name) => {\n      return fields.filter((field) => field.name && field.name === name).length <= 1;\n    },\n    [fields]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__.ConfigSubSection,\n    {\n      title: \"Derived fields\",\n      description: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_2__.ConfigDescriptionLink,\n        {\n          description: \"Derived fields can be used to extract new fields from a log message and create a link from its value.\",\n          suffix: \"loki/#configure-derived-fields\",\n          feature: \"derived fields\"\n        }\n      )\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.container }, fields.map((field, index) => {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _DerivedField__WEBPACK_IMPORTED_MODULE_4__.DerivedField,\n        {\n          className: styles.derivedField,\n          key: index,\n          value: field,\n          onChange: (newField) => {\n            const newDerivedFields = [...fields];\n            newDerivedFields.splice(index, 1, newField);\n            onChange(newDerivedFields);\n          },\n          onDelete: () => {\n            const newDerivedFields = [...fields];\n            newDerivedFields.splice(index, 1);\n            onChange(newDerivedFields);\n          },\n          validateName,\n          suggestions: [\n            {\n              value: _grafana_data__WEBPACK_IMPORTED_MODULE_7__.DataLinkBuiltInVars.valueRaw,\n              label: \"Raw value\",\n              documentation: \"Exact string captured by the regular expression\",\n              origin: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.VariableOrigin.Value\n            }\n          ]\n        }\n      );\n    }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Button,\n      {\n        variant: \"secondary\",\n        className: styles.addButton,\n        icon: \"plus\",\n        onClick: (event) => {\n          event.preventDefault();\n          const newDerivedFields = [...fields, { name: \"\", matcherRegex: \"\", urlDisplayLabel: \"\", url: \"\" }];\n          onChange(newDerivedFields);\n        }\n      },\n      \"Add\"\n    ), fields.length > 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Button, { variant: \"secondary\", type: \"button\", onClick: () => setShowDebug(!showDebug) }, showDebug ? \"Hide example log message\" : \"Show example log message\")), showDebug && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.debugSection }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _DebugSection__WEBPACK_IMPORTED_MODULE_3__.DebugSection,\n      {\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n                margin-bottom: 10px;\n              `,\n        derivedFields: fields\n      }\n    )))\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbmZpZ3VyYXRpb24vRGVyaXZlZEZpZWxkcy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUN5QjtBQUVzQjtBQUNsQztBQUNDO0FBQ0k7QUFJVDtBQUNBO0FBRTdCLE1BQU0sWUFBWSxDQUFDLFdBQTBCO0FBQUEsRUFDM0MsV0FBVyxpREFBRztBQUFIO0FBQUE7QUFBQSxFQUdYLGNBQWMsaURBQUc7QUFBSCxxQkFDSyxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUEsRUFFbEMsV0FBVyxpREFBRztBQUFILHFCQUNRLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQSxFQUVsQyxjQUFjLGlEQUFHO0FBQUgsa0JBQ0UsTUFBTSxRQUFRLENBQUM7QUFBQTtBQUVqQztBQU9PLE1BQU0sZ0JBQWdCLENBQUMsRUFBRSxTQUFTLENBQUMsR0FBRyxTQUFTLE1BQWE7QUFDakUsUUFBTSxRQUFRLHNEQUFTLENBQUM7QUFDeEIsUUFBTSxTQUFTLFVBQVUsS0FBSztBQUU5QixRQUFNLENBQUMsV0FBVyxZQUFZLElBQUksK0NBQVEsQ0FBQyxLQUFLO0FBRWhELFFBQU0sZUFBZSxrREFBVztBQUFYLElBQ25CLENBQUMsU0FBaUI7QUFDaEIsYUFBTyxPQUFPLE9BQU8sQ0FBQyxVQUFVLE1BQU0sUUFBUSxNQUFNLFNBQVMsSUFBSSxFQUFFLFVBQVU7QUFBQSxJQUMvRTtBQUFBLElBQ0EsQ0FBQyxNQUFNO0FBQUEsRUFDVDtBQUVBLFNBQ0U7QUFBQSxJQUFDLG1FQUFnQjtBQUFoQjtBQUFBLE1BQ0MsT0FBTTtBQUFBLE1BQ04sYUFDRTtBQUFBLFFBQUMsNEZBQXFCO0FBQXJCO0FBQUEsVUFDQyxhQUFZO0FBQUEsVUFDWixRQUFPO0FBQUEsVUFDUCxTQUFRO0FBQUE7QUFBQSxNQUNWO0FBQUE7QUFBQSxJQUdGLDJFQUFDLFNBQUksV0FBVyxPQUFPLGFBQ3BCLE9BQU8sSUFBSSxDQUFDLE9BQU8sVUFBVTtBQUM1QixhQUNFO0FBQUEsUUFBQyx1REFBWTtBQUFaO0FBQUEsVUFDQyxXQUFXLE9BQU87QUFBQSxVQUNsQixLQUFLO0FBQUEsVUFDTCxPQUFPO0FBQUEsVUFDUCxVQUFVLENBQUMsYUFBYTtBQUN0QixrQkFBTSxtQkFBbUIsQ0FBQyxHQUFHLE1BQU07QUFDbkMsNkJBQWlCLE9BQU8sT0FBTyxHQUFHLFFBQVE7QUFDMUMscUJBQVMsZ0JBQWdCO0FBQUEsVUFDM0I7QUFBQSxVQUNBLFVBQVUsTUFBTTtBQUNkLGtCQUFNLG1CQUFtQixDQUFDLEdBQUcsTUFBTTtBQUNuQyw2QkFBaUIsT0FBTyxPQUFPLENBQUM7QUFDaEMscUJBQVMsZ0JBQWdCO0FBQUEsVUFDM0I7QUFBQSxVQUNBO0FBQUEsVUFDQSxhQUFhO0FBQUEsWUFDWDtBQUFBLGNBQ0UsT0FBTyw4REFBbUIsQ0FBQztBQUFBLGNBQzNCLE9BQU87QUFBQSxjQUNQLGVBQWU7QUFBQSxjQUNmLFFBQVEseURBQWMsQ0FBQztBQUFBLFlBQ3pCO0FBQUEsVUFDRjtBQUFBO0FBQUEsTUFDRjtBQUFBLElBRUosQ0FBQyxHQUNELDJFQUFDLGFBQ0M7QUFBQSxNQUFDLCtDQUFNO0FBQU47QUFBQSxRQUNDLFNBQVE7QUFBQSxRQUNSLFdBQVcsT0FBTztBQUFBLFFBQ2xCLE1BQUs7QUFBQSxRQUNMLFNBQVMsQ0FBQyxVQUFVO0FBQ2xCLGdCQUFNLGVBQWU7QUFDckIsZ0JBQU0sbUJBQW1CLENBQUMsR0FBRyxRQUFRLEVBQUUsTUFBTSxJQUFJLGNBQWMsSUFBSSxpQkFBaUIsSUFBSSxLQUFLLEdBQUcsQ0FBQztBQUNqRyxtQkFBUyxnQkFBZ0I7QUFBQSxRQUMzQjtBQUFBO0FBQUEsTUFDRDtBQUFBLElBRUQsR0FFQyxPQUFPLFNBQVMsS0FDZiwyRUFBQywrQ0FBTSxJQUFDLFNBQVEsYUFBWSxNQUFLLFVBQVMsU0FBUyxNQUFNLGFBQWEsQ0FBQyxTQUFTLEtBQzdFLFlBQVksNkJBQTZCLDBCQUM1QyxDQUVKLEdBRUMsYUFDQywyRUFBQyxTQUFJLFdBQVcsT0FBTyxnQkFDckI7QUFBQSxNQUFDLHVEQUFZO0FBQVo7QUFBQSxRQUNDLFdBQVcsaURBQUc7QUFBSDtBQUFBO0FBQUEsUUFHWCxlQUFlO0FBQUE7QUFBQSxJQUNqQixDQUNGLENBRUo7QUFBQSxFQUNGO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9jb25maWd1cmF0aW9uL0Rlcml2ZWRGaWVsZHMudHN4P2Q3NmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEdyYWZhbmFUaGVtZTIsIFZhcmlhYmxlT3JpZ2luLCBEYXRhTGlua0J1aWx0SW5WYXJzIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBDb25maWdTdWJTZWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IEJ1dHRvbiwgdXNlVGhlbWUyIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgQ29uZmlnRGVzY3JpcHRpb25MaW5rIH0gZnJvbSAnYXBwL2NvcmUvY29tcG9uZW50cy9Db25maWdEZXNjcmlwdGlvbkxpbmsnO1xuXG5pbXBvcnQgeyBEZXJpdmVkRmllbGRDb25maWcgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7IERlYnVnU2VjdGlvbiB9IGZyb20gJy4vRGVidWdTZWN0aW9uJztcbmltcG9ydCB7IERlcml2ZWRGaWVsZCB9IGZyb20gJy4vRGVyaXZlZEZpZWxkJztcblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICBhZGRCdXR0b246IGNzc2BcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gIGAsXG4gIGRlcml2ZWRGaWVsZDogY3NzYFxuICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUuc3BhY2luZygxKX07XG4gIGAsXG4gIGNvbnRhaW5lcjogY3NzYFxuICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUuc3BhY2luZyg0KX07XG4gIGAsXG4gIGRlYnVnU2VjdGlvbjogY3NzYFxuICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuc3BhY2luZyg0KX07XG4gIGAsXG59KTtcblxudHlwZSBQcm9wcyA9IHtcbiAgZmllbGRzPzogRGVyaXZlZEZpZWxkQ29uZmlnW107XG4gIG9uQ2hhbmdlOiAodmFsdWU6IERlcml2ZWRGaWVsZENvbmZpZ1tdKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGNvbnN0IERlcml2ZWRGaWVsZHMgPSAoeyBmaWVsZHMgPSBbXSwgb25DaGFuZ2UgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZTIoKTtcbiAgY29uc3Qgc3R5bGVzID0gZ2V0U3R5bGVzKHRoZW1lKTtcblxuICBjb25zdCBbc2hvd0RlYnVnLCBzZXRTaG93RGVidWddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IHZhbGlkYXRlTmFtZSA9IHVzZUNhbGxiYWNrKFxuICAgIChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiBmaWVsZHMuZmlsdGVyKChmaWVsZCkgPT4gZmllbGQubmFtZSAmJiBmaWVsZC5uYW1lID09PSBuYW1lKS5sZW5ndGggPD0gMTtcbiAgICB9LFxuICAgIFtmaWVsZHNdXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q29uZmlnU3ViU2VjdGlvblxuICAgICAgdGl0bGU9XCJEZXJpdmVkIGZpZWxkc1wiXG4gICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgIDxDb25maWdEZXNjcmlwdGlvbkxpbmtcbiAgICAgICAgICBkZXNjcmlwdGlvbj1cIkRlcml2ZWQgZmllbGRzIGNhbiBiZSB1c2VkIHRvIGV4dHJhY3QgbmV3IGZpZWxkcyBmcm9tIGEgbG9nIG1lc3NhZ2UgYW5kIGNyZWF0ZSBhIGxpbmsgZnJvbSBpdHMgdmFsdWUuXCJcbiAgICAgICAgICBzdWZmaXg9XCJsb2tpLyNjb25maWd1cmUtZGVyaXZlZC1maWVsZHNcIlxuICAgICAgICAgIGZlYXR1cmU9XCJkZXJpdmVkIGZpZWxkc1wiXG4gICAgICAgIC8+XG4gICAgICB9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAgICB7ZmllbGRzLm1hcCgoZmllbGQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxEZXJpdmVkRmllbGRcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuZGVyaXZlZEZpZWxkfVxuICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICB2YWx1ZT17ZmllbGR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsobmV3RmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdEZXJpdmVkRmllbGRzID0gWy4uLmZpZWxkc107XG4gICAgICAgICAgICAgICAgbmV3RGVyaXZlZEZpZWxkcy5zcGxpY2UoaW5kZXgsIDEsIG5ld0ZpZWxkKTtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZShuZXdEZXJpdmVkRmllbGRzKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgb25EZWxldGU9eygpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdEZXJpdmVkRmllbGRzID0gWy4uLmZpZWxkc107XG4gICAgICAgICAgICAgICAgbmV3RGVyaXZlZEZpZWxkcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKG5ld0Rlcml2ZWRGaWVsZHMpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICB2YWxpZGF0ZU5hbWU9e3ZhbGlkYXRlTmFtZX1cbiAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM9e1tcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogRGF0YUxpbmtCdWlsdEluVmFycy52YWx1ZVJhdyxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnUmF3IHZhbHVlJyxcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50YXRpb246ICdFeGFjdCBzdHJpbmcgY2FwdHVyZWQgYnkgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbicsXG4gICAgICAgICAgICAgICAgICBvcmlnaW46IFZhcmlhYmxlT3JpZ2luLlZhbHVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuYWRkQnV0dG9ufVxuICAgICAgICAgICAgaWNvbj1cInBsdXNcIlxuICAgICAgICAgICAgb25DbGljaz17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld0Rlcml2ZWRGaWVsZHMgPSBbLi4uZmllbGRzLCB7IG5hbWU6ICcnLCBtYXRjaGVyUmVnZXg6ICcnLCB1cmxEaXNwbGF5TGFiZWw6ICcnLCB1cmw6ICcnIH1dO1xuICAgICAgICAgICAgICBvbkNoYW5nZShuZXdEZXJpdmVkRmllbGRzKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgQWRkXG4gICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICB7ZmllbGRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwic2Vjb25kYXJ5XCIgdHlwZT1cImJ1dHRvblwiIG9uQ2xpY2s9eygpID0+IHNldFNob3dEZWJ1Zyghc2hvd0RlYnVnKX0+XG4gICAgICAgICAgICAgIHtzaG93RGVidWcgPyAnSGlkZSBleGFtcGxlIGxvZyBtZXNzYWdlJyA6ICdTaG93IGV4YW1wbGUgbG9nIG1lc3NhZ2UnfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAge3Nob3dEZWJ1ZyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5kZWJ1Z1NlY3Rpb259PlxuICAgICAgICAgICAgPERlYnVnU2VjdGlvblxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nzc2BcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICBkZXJpdmVkRmllbGRzPXtmaWVsZHN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9Db25maWdTdWJTZWN0aW9uPlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/configuration/DerivedFields.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/configuration/QuerySettings.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuerySettings: () => (/* binding */ QuerySettings)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSubSection.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/index.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Badge/Badge.tsx\");\n/* harmony import */ var app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/components/ConfigDescriptionLink.tsx\");\n\n\n\n\n\n\nconst { FormField } = _grafana_ui__WEBPACK_IMPORTED_MODULE_2__.LegacyForms;\nconst QuerySettings = (props) => {\n  const { maxLines, onMaxLinedChange, predefinedOperations, onPredefinedOperationsChange } = props;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_3__.ConfigSubSection,\n    {\n      title: \"Queries\",\n      description: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n        app_core_components_ConfigDescriptionLink__WEBPACK_IMPORTED_MODULE_1__.ConfigDescriptionLink,\n        {\n          description: \"Additional options to customize your querying experience. \",\n          suffix: \"loki/#configure-the-data-source\",\n          feature: \"query settings\"\n        }\n      )\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"gf-form-inline\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"gf-form\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      FormField,\n      {\n        label: \"Maximum lines\",\n        labelWidth: 11,\n        inputWidth: 20,\n        inputEl: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n          \"input\",\n          {\n            type: \"number\",\n            className: \"gf-form-input width-8 gf-form-input--has-help-icon\",\n            value: maxLines,\n            onChange: (event) => onMaxLinedChange(event.currentTarget.value),\n            spellCheck: false,\n            placeholder: \"1000\"\n          }\n        ),\n        tooltip: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, \"Loki queries must contain a limit of the maximum number of lines returned (default: 1000). Increase this limit to have a bigger result set for ad-hoc analysis. Decrease this limit if your browser becomes sluggish when displaying the log results.\")\n      }\n    ))),\n    _grafana_runtime__WEBPACK_IMPORTED_MODULE_4__.config.featureToggles.lokiPredefinedOperations && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"gf-form-inline\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"gf-form\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      FormField,\n      {\n        label: \"Predefined operations\",\n        labelWidth: 11,\n        inputEl: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n          \"input\",\n          {\n            type: \"string\",\n            className: \"gf-form-input width-20 gf-form-input--has-help-icon\",\n            value: predefinedOperations,\n            onChange: (event) => onPredefinedOperationsChange(event.currentTarget.value),\n            spellCheck: false,\n            placeholder: \"| unpack | line_format\"\n          }\n        ),\n        tooltip: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, 'Predefined operations are used as an initial state for your queries. They are useful, if you want to unpack, parse or format all log lines. Currently we support only log operations starting with |. For example: | unpack | line_format \"{{.message}}\".')\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Badge,\n      {\n        text: \"Experimental\",\n        color: \"orange\",\n        icon: \"exclamation-triangle\",\n        tooltip: \"Predefined operations is an experimental feature that may change in the future.\"\n      }\n    )))\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbmZpZ3VyYXRpb24vUXVlcnlTZXR0aW5ncy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWtCO0FBRWU7QUFDVjtBQUNZO0FBQ0c7QUFFdEMsTUFBTSxFQUFFLFVBQVUsSUFBSSxvREFBVztBQVMxQixNQUFNLGdCQUFnQixDQUFDLFVBQWlCO0FBQzdDLFFBQU0sRUFBRSxVQUFVLGtCQUFrQixzQkFBc0IsNkJBQTZCLElBQUk7QUFDM0YsU0FDRTtBQUFBLElBQUMsbUVBQWdCO0FBQWhCO0FBQUEsTUFDQyxPQUFNO0FBQUEsTUFDTixhQUNFO0FBQUEsUUFBQyw0RkFBcUI7QUFBckI7QUFBQSxVQUNDLGFBQVk7QUFBQSxVQUNaLFFBQU87QUFBQSxVQUNQLFNBQVE7QUFBQTtBQUFBLE1BQ1Y7QUFBQTtBQUFBLElBR0YsMkVBQUMsU0FBSSxXQUFVLG9CQUNiLDJFQUFDLFNBQUksV0FBVSxhQUNiO0FBQUEsTUFBQztBQUFBO0FBQUEsUUFDQyxPQUFNO0FBQUEsUUFDTixZQUFZO0FBQUEsUUFDWixZQUFZO0FBQUEsUUFDWixTQUNFO0FBQUEsVUFBQztBQUFBO0FBQUEsWUFDQyxNQUFLO0FBQUEsWUFDTCxXQUFVO0FBQUEsWUFDVixPQUFPO0FBQUEsWUFDUCxVQUFVLENBQUMsVUFBVSxpQkFBaUIsTUFBTSxjQUFjLEtBQUs7QUFBQSxZQUMvRCxZQUFZO0FBQUEsWUFDWixhQUFZO0FBQUE7QUFBQSxRQUNkO0FBQUEsUUFFRixTQUNFLDBJQUFFLHVQQUlGO0FBQUE7QUFBQSxJQUVKLENBQ0YsQ0FDRjtBQUFBLElBQ0Msb0RBQU0sQ0FBQyxlQUFlLDRCQUNyQiwyRUFBQyxTQUFJLFdBQVUsb0JBQ2IsMkVBQUMsU0FBSSxXQUFVLGFBQ2I7QUFBQSxNQUFDO0FBQUE7QUFBQSxRQUNDLE9BQU07QUFBQSxRQUNOLFlBQVk7QUFBQSxRQUNaLFNBQ0U7QUFBQSxVQUFDO0FBQUE7QUFBQSxZQUNDLE1BQUs7QUFBQSxZQUNMLFdBQVU7QUFBQSxZQUNWLE9BQU87QUFBQSxZQUNQLFVBQVUsQ0FBQyxVQUFVLDZCQUE2QixNQUFNLGNBQWMsS0FBSztBQUFBLFlBQzNFLFlBQVk7QUFBQSxZQUNaLGFBQVk7QUFBQTtBQUFBLFFBQ2Q7QUFBQSxRQUVGLFNBQ0UsMkVBQUMsYUFFRywyUEFFSjtBQUFBO0FBQUEsSUFFSixHQUNBO0FBQUEsTUFBQyw4Q0FBSztBQUFMO0FBQUEsUUFDQyxNQUFLO0FBQUEsUUFDTCxPQUFNO0FBQUEsUUFDTixNQUFLO0FBQUEsUUFDTCxTQUFRO0FBQUE7QUFBQSxJQUNWLENBQ0YsQ0FDRjtBQUFBLEVBRUo7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2NvbmZpZ3VyYXRpb24vUXVlcnlTZXR0aW5ncy50c3g/ZGQ2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBDb25maWdTdWJTZWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHsgQmFkZ2UsIExlZ2FjeUZvcm1zIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgQ29uZmlnRGVzY3JpcHRpb25MaW5rIH0gZnJvbSAnYXBwL2NvcmUvY29tcG9uZW50cy9Db25maWdEZXNjcmlwdGlvbkxpbmsnO1xuXG5jb25zdCB7IEZvcm1GaWVsZCB9ID0gTGVnYWN5Rm9ybXM7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIG1heExpbmVzOiBzdHJpbmc7XG4gIG9uTWF4TGluZWRDaGFuZ2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICBwcmVkZWZpbmVkT3BlcmF0aW9uczogc3RyaW5nO1xuICBvblByZWRlZmluZWRPcGVyYXRpb25zQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCBjb25zdCBRdWVyeVNldHRpbmdzID0gKHByb3BzOiBQcm9wcykgPT4ge1xuICBjb25zdCB7IG1heExpbmVzLCBvbk1heExpbmVkQ2hhbmdlLCBwcmVkZWZpbmVkT3BlcmF0aW9ucywgb25QcmVkZWZpbmVkT3BlcmF0aW9uc0NoYW5nZSB9ID0gcHJvcHM7XG4gIHJldHVybiAoXG4gICAgPENvbmZpZ1N1YlNlY3Rpb25cbiAgICAgIHRpdGxlPVwiUXVlcmllc1wiXG4gICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgIDxDb25maWdEZXNjcmlwdGlvbkxpbmtcbiAgICAgICAgICBkZXNjcmlwdGlvbj1cIkFkZGl0aW9uYWwgb3B0aW9ucyB0byBjdXN0b21pemUgeW91ciBxdWVyeWluZyBleHBlcmllbmNlLiBcIlxuICAgICAgICAgIHN1ZmZpeD1cImxva2kvI2NvbmZpZ3VyZS10aGUtZGF0YS1zb3VyY2VcIlxuICAgICAgICAgIGZlYXR1cmU9XCJxdWVyeSBzZXR0aW5nc1wiXG4gICAgICAgIC8+XG4gICAgICB9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZi1mb3JtLWlubGluZVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdmLWZvcm1cIj5cbiAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICBsYWJlbD1cIk1heGltdW0gbGluZXNcIlxuICAgICAgICAgICAgbGFiZWxXaWR0aD17MTF9XG4gICAgICAgICAgICBpbnB1dFdpZHRoPXsyMH1cbiAgICAgICAgICAgIGlucHV0RWw9e1xuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJnZi1mb3JtLWlucHV0IHdpZHRoLTggZ2YtZm9ybS1pbnB1dC0taGFzLWhlbHAtaWNvblwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e21heExpbmVzfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IG9uTWF4TGluZWRDaGFuZ2UoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgc3BlbGxDaGVjaz17ZmFsc2V9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIxMDAwXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvb2x0aXA9e1xuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIExva2kgcXVlcmllcyBtdXN0IGNvbnRhaW4gYSBsaW1pdCBvZiB0aGUgbWF4aW11bSBudW1iZXIgb2YgbGluZXMgcmV0dXJuZWQgKGRlZmF1bHQ6IDEwMDApLiBJbmNyZWFzZSB0aGlzXG4gICAgICAgICAgICAgICAgbGltaXQgdG8gaGF2ZSBhIGJpZ2dlciByZXN1bHQgc2V0IGZvciBhZC1ob2MgYW5hbHlzaXMuIERlY3JlYXNlIHRoaXMgbGltaXQgaWYgeW91ciBicm93c2VyIGJlY29tZXNcbiAgICAgICAgICAgICAgICBzbHVnZ2lzaCB3aGVuIGRpc3BsYXlpbmcgdGhlIGxvZyByZXN1bHRzLlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAge2NvbmZpZy5mZWF0dXJlVG9nZ2xlcy5sb2tpUHJlZGVmaW5lZE9wZXJhdGlvbnMgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdmLWZvcm0taW5saW5lXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZi1mb3JtXCI+XG4gICAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICAgIGxhYmVsPVwiUHJlZGVmaW5lZCBvcGVyYXRpb25zXCJcbiAgICAgICAgICAgICAgbGFiZWxXaWR0aD17MTF9XG4gICAgICAgICAgICAgIGlucHV0RWw9e1xuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJnZi1mb3JtLWlucHV0IHdpZHRoLTIwIGdmLWZvcm0taW5wdXQtLWhhcy1oZWxwLWljb25cIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3ByZWRlZmluZWRPcGVyYXRpb25zfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhldmVudCkgPT4gb25QcmVkZWZpbmVkT3BlcmF0aW9uc0NoYW5nZShldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIHNwZWxsQ2hlY2s9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ8IHVucGFjayB8IGxpbmVfZm9ybWF0XCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRvb2x0aXA9e1xuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICdQcmVkZWZpbmVkIG9wZXJhdGlvbnMgYXJlIHVzZWQgYXMgYW4gaW5pdGlhbCBzdGF0ZSBmb3IgeW91ciBxdWVyaWVzLiBUaGV5IGFyZSB1c2VmdWwsIGlmIHlvdSB3YW50IHRvIHVucGFjaywgcGFyc2Ugb3IgZm9ybWF0IGFsbCBsb2cgbGluZXMuIEN1cnJlbnRseSB3ZSBzdXBwb3J0IG9ubHkgbG9nIG9wZXJhdGlvbnMgc3RhcnRpbmcgd2l0aCB8LiBGb3IgZXhhbXBsZTogfCB1bnBhY2sgfCBsaW5lX2Zvcm1hdCBcInt7Lm1lc3NhZ2V9fVwiLidcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxCYWRnZVxuICAgICAgICAgICAgICB0ZXh0PVwiRXhwZXJpbWVudGFsXCJcbiAgICAgICAgICAgICAgY29sb3I9XCJvcmFuZ2VcIlxuICAgICAgICAgICAgICBpY29uPVwiZXhjbGFtYXRpb24tdHJpYW5nbGVcIlxuICAgICAgICAgICAgICB0b29sdGlwPVwiUHJlZGVmaW5lZCBvcGVyYXRpb25zIGlzIGFuIGV4cGVyaW1lbnRhbCBmZWF0dXJlIHRoYXQgbWF5IGNoYW5nZSBpbiB0aGUgZnV0dXJlLlwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9Db25maWdTdWJTZWN0aW9uPlxuICApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/configuration/QuerySettings.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/dataquery.gen.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryDirection: () => (/* binding */ LokiQueryDirection),\n/* harmony export */   LokiQueryType: () => (/* binding */ LokiQueryType),\n/* harmony export */   QueryEditorMode: () => (/* binding */ QueryEditorMode),\n/* harmony export */   SupportingQueryType: () => (/* binding */ SupportingQueryType)\n/* harmony export */ });\n\nvar QueryEditorMode = /* @__PURE__ */ ((QueryEditorMode2) => {\n  QueryEditorMode2[\"Builder\"] = \"builder\";\n  QueryEditorMode2[\"Code\"] = \"code\";\n  return QueryEditorMode2;\n})(QueryEditorMode || {});\nvar LokiQueryType = /* @__PURE__ */ ((LokiQueryType2) => {\n  LokiQueryType2[\"Instant\"] = \"instant\";\n  LokiQueryType2[\"Range\"] = \"range\";\n  LokiQueryType2[\"Stream\"] = \"stream\";\n  return LokiQueryType2;\n})(LokiQueryType || {});\nvar SupportingQueryType = /* @__PURE__ */ ((SupportingQueryType2) => {\n  SupportingQueryType2[\"DataSample\"] = \"dataSample\";\n  SupportingQueryType2[\"LogsSample\"] = \"logsSample\";\n  SupportingQueryType2[\"LogsVolume\"] = \"logsVolume\";\n  return SupportingQueryType2;\n})(SupportingQueryType || {});\nvar LokiQueryDirection = /* @__PURE__ */ ((LokiQueryDirection2) => {\n  LokiQueryDirection2[\"Backward\"] = \"backward\";\n  LokiQueryDirection2[\"Forward\"] = \"forward\";\n  return LokiQueryDirection2;\n})(LokiQueryDirection || {});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2RhdGFxdWVyeS5nZW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFZTyxJQUFLLGtCQUFMLGtCQUFLQSxxQkFBTDtBQUNMLEVBQUFBLGlCQUFBLGFBQVU7QUFDVixFQUFBQSxpQkFBQSxVQUFPO0FBRkcsU0FBQUE7QUFBQTtBQUtMLElBQUssZ0JBQUwsa0JBQUtDLG1CQUFMO0FBQ0wsRUFBQUEsZUFBQSxhQUFVO0FBQ1YsRUFBQUEsZUFBQSxXQUFRO0FBQ1IsRUFBQUEsZUFBQSxZQUFTO0FBSEMsU0FBQUE7QUFBQTtBQU1MLElBQUssc0JBQUwsa0JBQUtDLHlCQUFMO0FBQ0wsRUFBQUEscUJBQUEsZ0JBQWE7QUFDYixFQUFBQSxxQkFBQSxnQkFBYTtBQUNiLEVBQUFBLHFCQUFBLGdCQUFhO0FBSEgsU0FBQUE7QUFBQTtBQU1MLElBQUsscUJBQUwsa0JBQUtDLHdCQUFMO0FBQ0wsRUFBQUEsb0JBQUEsY0FBVztBQUNYLEVBQUFBLG9CQUFBLGFBQVU7QUFGQSxTQUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvZGF0YXF1ZXJ5Lmdlbi50cz9lOGY0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvZGUgZ2VuZXJhdGVkIC0gRURJVElORyBJUyBGVVRJTEUuIERPIE5PVCBFRElULlxuLy9cbi8vIEdlbmVyYXRlZCBieTpcbi8vICAgICBwdWJsaWMvYXBwL3BsdWdpbnMvZ2VuLmdvXG4vLyBVc2luZyBqZW5uaWVzOlxuLy8gICAgIFRTVHlwZXNKZW5ueVxuLy8gICAgIFBsdWdpblRTVHlwZXNKZW5ueVxuLy9cbi8vIFJ1biAnbWFrZSBnZW4tY3VlJyBmcm9tIHJlcG9zaXRvcnkgcm9vdCB0byByZWdlbmVyYXRlLlxuXG5pbXBvcnQgKiBhcyBjb21tb24gZnJvbSAnQGdyYWZhbmEvc2NoZW1hJztcblxuZXhwb3J0IGVudW0gUXVlcnlFZGl0b3JNb2RlIHtcbiAgQnVpbGRlciA9ICdidWlsZGVyJyxcbiAgQ29kZSA9ICdjb2RlJyxcbn1cblxuZXhwb3J0IGVudW0gTG9raVF1ZXJ5VHlwZSB7XG4gIEluc3RhbnQgPSAnaW5zdGFudCcsXG4gIFJhbmdlID0gJ3JhbmdlJyxcbiAgU3RyZWFtID0gJ3N0cmVhbScsXG59XG5cbmV4cG9ydCBlbnVtIFN1cHBvcnRpbmdRdWVyeVR5cGUge1xuICBEYXRhU2FtcGxlID0gJ2RhdGFTYW1wbGUnLFxuICBMb2dzU2FtcGxlID0gJ2xvZ3NTYW1wbGUnLFxuICBMb2dzVm9sdW1lID0gJ2xvZ3NWb2x1bWUnLFxufVxuXG5leHBvcnQgZW51bSBMb2tpUXVlcnlEaXJlY3Rpb24ge1xuICBCYWNrd2FyZCA9ICdiYWNrd2FyZCcsXG4gIEZvcndhcmQgPSAnZm9yd2FyZCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9raSBleHRlbmRzIGNvbW1vbi5EYXRhUXVlcnkge1xuICBlZGl0b3JNb2RlPzogUXVlcnlFZGl0b3JNb2RlO1xuICAvKipcbiAgICogVGhlIExvZ1FMIHF1ZXJ5LlxuICAgKi9cbiAgZXhwcjogc3RyaW5nO1xuICAvKipcbiAgICogQGRlcHJlY2F0ZWQsIG5vdyB1c2UgcXVlcnlUeXBlLlxuICAgKi9cbiAgaW5zdGFudD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBVc2VkIHRvIG92ZXJyaWRlIHRoZSBuYW1lIG9mIHRoZSBzZXJpZXMuXG4gICAqL1xuICBsZWdlbmRGb3JtYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBVc2VkIHRvIGxpbWl0IHRoZSBudW1iZXIgb2YgbG9nIHJvd3MgcmV0dXJuZWQuXG4gICAqL1xuICBtYXhMaW5lcz86IG51bWJlcjtcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkLCBub3cgdXNlIHF1ZXJ5VHlwZS5cbiAgICovXG4gIHJhbmdlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkLCBub3cgdXNlIHN0ZXAuXG4gICAqL1xuICByZXNvbHV0aW9uPzogbnVtYmVyO1xuICAvKipcbiAgICogVXNlZCB0byBzZXQgc3RlcCB2YWx1ZSBmb3IgcmFuZ2UgcXVlcmllcy5cbiAgICovXG4gIHN0ZXA/OiBzdHJpbmc7XG59XG4iXSwibmFtZXMiOlsiUXVlcnlFZGl0b3JNb2RlIiwiTG9raVF1ZXJ5VHlwZSIsIlN1cHBvcnRpbmdRdWVyeVR5cGUiLCJMb2tpUXVlcnlEaXJlY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/dataquery.gen.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/datasource.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_MAX_LINES: () => (/* binding */ DEFAULT_MAX_LINES),\n/* harmony export */   LOKI_ENDPOINT: () => (/* binding */ LOKI_ENDPOINT),\n/* harmony export */   LokiDatasource: () => (/* binding */ LokiDatasource),\n/* harmony export */   REF_ID_DATA_SAMPLES: () => (/* binding */ REF_ID_DATA_SAMPLES),\n/* harmony export */   REF_ID_STARTER_ANNOTATION: () => (/* binding */ REF_ID_STARTER_ANNOTATION),\n/* harmony export */   REF_ID_STARTER_LOG_ROW_CONTEXT: () => (/* binding */ REF_ID_STARTER_LOG_ROW_CONTEXT),\n/* harmony export */   REF_ID_STARTER_LOG_SAMPLE: () => (/* binding */ REF_ID_STARTER_LOG_SAMPLE),\n/* harmony export */   REF_ID_STARTER_LOG_VOLUME: () => (/* binding */ REF_ID_STARTER_LOG_VOLUME),\n/* harmony export */   lokiRegularEscape: () => (/* binding */ lokiRegularEscape),\n/* harmony export */   lokiSpecialRegexEscape: () => (/* binding */ lokiSpecialRegexEscape),\n/* harmony export */   makeRequest: () => (/* binding */ makeRequest)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/throwError.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/merge.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/tap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/rangeutil.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/data.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/logs.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/app.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/datemath.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/DataFrameView.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/legend.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/FieldCache.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/utils/DataSourceWithBackend.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var app_core_utils_explore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/utils/explore.ts\");\n/* harmony import */ var app_features_dashboard_services_TimeSrv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/dashboard/services/TimeSrv.ts\");\n/* harmony import */ var app_features_templating_template_srv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/templating/template_srv.ts\");\n/* harmony import */ var _core_utils_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/core/utils/fetch.ts\");\n/* harmony import */ var _features_logs_logsModel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/logs/logsModel.ts\");\n/* harmony import */ var _features_logs_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/features/logs/utils.ts\");\n/* harmony import */ var _prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/parsingUtils.ts\");\n/* harmony import */ var _LanguageProvider__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/loki/LanguageProvider.ts\");\n/* harmony import */ var _LiveStreams__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/loki/LiveStreams.ts\");\n/* harmony import */ var _LogContextProvider__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/plugins/datasource/loki/LogContextProvider.ts\");\n/* harmony import */ var _backendResultTransformer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/plugins/datasource/loki/backendResultTransformer.ts\");\n/* harmony import */ var _components_AnnotationsQueryEditor__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/AnnotationsQueryEditor.tsx\");\n/* harmony import */ var _components_monaco_query_field_monaco_completion_provider_validation__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/monaco-query-field/monaco-completion-provider/validation.ts\");\n/* harmony import */ var _languageUtils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./public/app/plugins/datasource/loki/languageUtils.ts\");\n/* harmony import */ var _migrations_variableQueryMigrations__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./public/app/plugins/datasource/loki/migrations/variableQueryMigrations.ts\");\n/* harmony import */ var _modifyQuery__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./public/app/plugins/datasource/loki/modifyQuery.ts\");\n/* harmony import */ var _queryHints__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryHints.ts\");\n/* harmony import */ var _querySplitting__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querySplitting.ts\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _streaming__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"./public/app/plugins/datasource/loki/streaming.ts\");\n/* harmony import */ var _tracking__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"./public/app/plugins/datasource/loki/tracking.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n/* harmony import */ var _variables__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(\"./public/app/plugins/datasource/loki/variables.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_MAX_LINES = 1e3;\nconst LOKI_ENDPOINT = \"/loki/api/v1\";\nconst REF_ID_DATA_SAMPLES = \"loki-data-samples\";\nconst REF_ID_STARTER_ANNOTATION = \"annotation-\";\nconst REF_ID_STARTER_LOG_ROW_CONTEXT = \"log-row-context-query-\";\nconst REF_ID_STARTER_LOG_VOLUME = \"log-volume-\";\nconst REF_ID_STARTER_LOG_SAMPLE = \"log-sample-\";\nconst NS_IN_MS = 1e6;\nfunction makeRequest(query, range, app, requestId, hideFromInspector) {\n  const intervalInfo = _grafana_data__WEBPACK_IMPORTED_MODULE_24__.calculateInterval(range, 1);\n  return {\n    targets: [query],\n    requestId,\n    interval: intervalInfo.interval,\n    intervalMs: intervalInfo.intervalMs,\n    range,\n    scopedVars: {},\n    timezone: \"UTC\",\n    app,\n    startTime: Date.now(),\n    hideFromInspector\n  };\n}\nclass LokiDatasource extends _grafana_runtime__WEBPACK_IMPORTED_MODULE_25__.DataSourceWithBackend {\n  constructor(instanceSettings, templateSrv = (0,app_features_templating_template_srv__WEBPACK_IMPORTED_MODULE_3__.getTemplateSrv)(), timeSrv = (0,app_features_dashboard_services_TimeSrv__WEBPACK_IMPORTED_MODULE_2__.getTimeSrv)()) {\n    super(instanceSettings);\n    this.instanceSettings = instanceSettings;\n    this.templateSrv = templateSrv;\n    this.timeSrv = timeSrv;\n    this.streams = new _LiveStreams__WEBPACK_IMPORTED_MODULE_9__.LiveStreams();\n    /**\n     * Runs live queries which in this case means creating a websocket and listening on it for new logs.\n     * This returns a bit different dataFrame than runQueries as it returns single dataframe even if there are multiple\n     * Loki streams, sets only common labels on dataframe.labels and has additional dataframe.fields.labels for unique\n     * labels per row.\n     */\n    this.runLiveQuery = (target, maxDataPoints) => {\n      const liveTarget = this.createLiveTarget(target, maxDataPoints);\n      return this.streams.getStream(liveTarget).pipe(\n        (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.map)((data) => ({\n          data: data || [],\n          key: `loki-${liveTarget.refId}`,\n          state: _grafana_data__WEBPACK_IMPORTED_MODULE_27__.LoadingState.Streaming\n        })),\n        (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_28__.catchError)((err) => {\n          return (0,rxjs__WEBPACK_IMPORTED_MODULE_29__.throwError)(() => `Live tailing was stopped due to following error: ${err.reason}`);\n        })\n      );\n    };\n    this.getLogRowContext = async (row, options, origQuery) => {\n      return await this.logContextProvider.getLogRowContext(row, options, (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.getLokiQueryFromDataQuery)(origQuery));\n    };\n    this.getLogRowContextQuery = async (row, options, origQuery) => {\n      return await this.logContextProvider.getLogRowContextQuery(row, options, (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.getLokiQueryFromDataQuery)(origQuery));\n    };\n    this.languageProvider = new _LanguageProvider__WEBPACK_IMPORTED_MODULE_8__[\"default\"](this);\n    const settingsData = instanceSettings.jsonData || {};\n    this.maxLines = parseInt(settingsData.maxLines ?? \"0\", 10) || DEFAULT_MAX_LINES;\n    this.predefinedOperations = settingsData.predefinedOperations ?? \"\";\n    this.annotations = {\n      QueryEditor: _components_AnnotationsQueryEditor__WEBPACK_IMPORTED_MODULE_12__.LokiAnnotationsQueryEditor\n    };\n    this.variables = new _variables__WEBPACK_IMPORTED_MODULE_23__.LokiVariableSupport(this);\n    this.logContextProvider = new _LogContextProvider__WEBPACK_IMPORTED_MODULE_10__.LogContextProvider(this);\n  }\n  getDataProvider(type, request) {\n    if (!this.getSupportedSupplementaryQueryTypes().includes(type)) {\n      return void 0;\n    }\n    switch (type) {\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_30__.SupplementaryQueryType.LogsVolume:\n        return this.getLogsVolumeDataProvider(request);\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_30__.SupplementaryQueryType.LogsSample:\n        return this.getLogsSampleDataProvider(request);\n      default:\n        return void 0;\n    }\n  }\n  getSupportedSupplementaryQueryTypes() {\n    return [_grafana_data__WEBPACK_IMPORTED_MODULE_30__.SupplementaryQueryType.LogsVolume, _grafana_data__WEBPACK_IMPORTED_MODULE_30__.SupplementaryQueryType.LogsSample];\n  }\n  getSupplementaryQuery(options, query) {\n    if (!this.getSupportedSupplementaryQueryTypes().includes(options.type)) {\n      return void 0;\n    }\n    const normalizedQuery = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.getNormalizedLokiQuery)(query);\n    const expr = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.removeCommentsFromQuery)(normalizedQuery.expr);\n    let isQuerySuitable = false;\n    switch (options.type) {\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_30__.SupplementaryQueryType.LogsVolume:\n        isQuerySuitable = !!(expr && (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.isLogsQuery)(expr) && normalizedQuery.queryType === _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Range);\n        if (!isQuerySuitable) {\n          return void 0;\n        }\n        return {\n          ...normalizedQuery,\n          refId: `${REF_ID_STARTER_LOG_VOLUME}${normalizedQuery.refId}`,\n          queryType: _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Range,\n          supportingQueryType: _types__WEBPACK_IMPORTED_MODULE_22__.SupportingQueryType.LogsVolume,\n          expr: `sum by (level) (count_over_time(${expr}[$__interval]))`\n        };\n      case _grafana_data__WEBPACK_IMPORTED_MODULE_30__.SupplementaryQueryType.LogsSample:\n        isQuerySuitable = !!(expr && !(0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.isLogsQuery)(expr));\n        if (!isQuerySuitable) {\n          return void 0;\n        }\n        return {\n          ...normalizedQuery,\n          queryType: _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Range,\n          refId: `${REF_ID_STARTER_LOG_SAMPLE}${normalizedQuery.refId}`,\n          expr: (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.getLogQueryFromMetricsQuery)(expr),\n          maxLines: Number.isNaN(Number(options.limit)) ? this.maxLines : Number(options.limit)\n        };\n      default:\n        return void 0;\n    }\n  }\n  getLogsVolumeDataProvider(request) {\n    const logsVolumeRequest = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.cloneDeep)(request);\n    const targets = logsVolumeRequest.targets.map((query) => this.getSupplementaryQuery({ type: _grafana_data__WEBPACK_IMPORTED_MODULE_30__.SupplementaryQueryType.LogsVolume }, query)).filter((query) => !!query);\n    if (!targets.length) {\n      return void 0;\n    }\n    return (0,_features_logs_logsModel__WEBPACK_IMPORTED_MODULE_5__.queryLogsVolume)(\n      this,\n      { ...logsVolumeRequest, targets },\n      {\n        extractLevel,\n        range: request.range,\n        targets: request.targets\n      }\n    );\n  }\n  getLogsSampleDataProvider(request) {\n    const logsSampleRequest = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.cloneDeep)(request);\n    const targets = logsSampleRequest.targets.map((query) => this.getSupplementaryQuery({ type: _grafana_data__WEBPACK_IMPORTED_MODULE_30__.SupplementaryQueryType.LogsSample, limit: 100 }, query)).filter((query) => !!query);\n    if (!targets.length) {\n      return void 0;\n    }\n    return (0,_features_logs_logsModel__WEBPACK_IMPORTED_MODULE_5__.queryLogsSample)(this, { ...logsSampleRequest, targets });\n  }\n  query(request) {\n    const queries = request.targets.map(_queryUtils__WEBPACK_IMPORTED_MODULE_19__.getNormalizedLokiQuery).map((q) => ({ ...q, maxLines: q.maxLines ?? this.maxLines }));\n    const fixedRequest = {\n      ...request,\n      targets: queries\n    };\n    const streamQueries = fixedRequest.targets.filter((q) => q.queryType === _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Stream);\n    if (_grafana_runtime__WEBPACK_IMPORTED_MODULE_31__.config.featureToggles.lokiExperimentalStreaming && streamQueries.length > 0 && fixedRequest.rangeRaw?.to === \"now\") {\n      const streamRequest = {\n        ...fixedRequest,\n        targets: streamQueries\n      };\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_32__.merge)(\n        ...streamQueries.map(\n          (q) => (0,_streaming__WEBPACK_IMPORTED_MODULE_20__.doLokiChannelStream)(\n            this.applyTemplateVariables(q, request.scopedVars),\n            this,\n            // the datasource\n            streamRequest\n          )\n        )\n      );\n    }\n    if (fixedRequest.liveStreaming) {\n      return this.runLiveQueryThroughBackend(fixedRequest);\n    }\n    if (_grafana_runtime__WEBPACK_IMPORTED_MODULE_31__.config.featureToggles.lokiQuerySplitting && (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.requestSupportsSplitting)(fixedRequest.targets)) {\n      return (0,_querySplitting__WEBPACK_IMPORTED_MODULE_18__.runSplitQuery)(this, fixedRequest);\n    }\n    const startTime = /* @__PURE__ */ new Date();\n    return this.runQuery(fixedRequest).pipe(\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_33__.tap)(\n        (response) => (0,_tracking__WEBPACK_IMPORTED_MODULE_21__.trackQuery)(response, fixedRequest, startTime, { predefinedOperations: this.predefinedOperations })\n      )\n    );\n  }\n  runQuery(fixedRequest) {\n    return super.query(fixedRequest).pipe(\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.map)(\n        (response) => (0,_backendResultTransformer__WEBPACK_IMPORTED_MODULE_11__.transformBackendResult)(response, fixedRequest.targets, this.instanceSettings.jsonData.derivedFields ?? [])\n      )\n    );\n  }\n  runLiveQueryThroughBackend(request) {\n    const logsQueries = request.targets.filter((query) => query.expr !== \"\" && (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.isLogsQuery)(query.expr));\n    if (logsQueries.length === 0) {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_34__.of)({\n        data: [],\n        state: _grafana_data__WEBPACK_IMPORTED_MODULE_27__.LoadingState.Done\n      });\n    }\n    const subQueries = logsQueries.map((query) => {\n      const maxDataPoints = query.maxLines || this.maxLines;\n      return this.runLiveQuery(query, maxDataPoints);\n    });\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_32__.merge)(...subQueries);\n  }\n  createLiveTarget(target, maxDataPoints) {\n    const query = target.expr;\n    const baseUrl = this.instanceSettings.url;\n    const params = (0,_core_utils_fetch__WEBPACK_IMPORTED_MODULE_4__.serializeParams)({ query });\n    return {\n      query,\n      url: (0,app_core_utils_explore__WEBPACK_IMPORTED_MODULE_1__.convertToWebSocketUrl)(`${baseUrl}/loki/api/v1/tail?${params}`),\n      refId: target.refId,\n      size: maxDataPoints\n    };\n  }\n  getRangeScopedVars(range = this.getTimeRange()) {\n    const msRange = range.to.diff(range.from);\n    const sRange = Math.round(msRange / 1e3);\n    return {\n      __range_ms: { text: msRange, value: msRange },\n      __range_s: { text: sRange, value: sRange },\n      __range: { text: sRange + \"s\", value: sRange + \"s\" }\n    };\n  }\n  interpolateVariablesInQueries(queries, scopedVars) {\n    let expandedQueries = queries;\n    if (queries && queries.length) {\n      expandedQueries = queries.map((query) => ({\n        ...query,\n        datasource: this.getRef(),\n        expr: this.addAdHocFilters(this.templateSrv.replace(query.expr, scopedVars, this.interpolateQueryExpr))\n      }));\n    }\n    return expandedQueries;\n  }\n  getQueryDisplayText(query) {\n    return query.expr;\n  }\n  getTimeRange() {\n    return this.timeSrv.timeRange();\n  }\n  getTimeRangeParams() {\n    const timeRange = this.getTimeRange();\n    return { start: timeRange.from.valueOf() * NS_IN_MS, end: timeRange.to.valueOf() * NS_IN_MS };\n  }\n  async importFromAbstractQueries(abstractQueries) {\n    await this.languageProvider.start();\n    const existingKeys = this.languageProvider.labelKeys;\n    if (existingKeys && existingKeys.length) {\n      abstractQueries = abstractQueries.map((abstractQuery) => {\n        abstractQuery.labelMatchers = abstractQuery.labelMatchers.filter((labelMatcher) => {\n          return existingKeys.includes(labelMatcher.name);\n        });\n        return abstractQuery;\n      });\n    }\n    return abstractQueries.map((abstractQuery) => this.languageProvider.importFromAbstractQuery(abstractQuery));\n  }\n  async exportToAbstractQueries(queries) {\n    return queries.map((query) => this.languageProvider.exportToAbstractQuery(query));\n  }\n  async metadataRequest(url, params, options) {\n    if (url.startsWith(\"/\")) {\n      throw new Error(`invalid metadata request url: ${url}`);\n    }\n    const res = await this.getResource(url, params, options);\n    return res.data || [];\n  }\n  // We need a specific metadata method for stats endpoint as it does not return res.data,\n  // but it returns stats directly in res object.\n  async statsMetadataRequest(url, params, options) {\n    if (url.startsWith(\"/\")) {\n      throw new Error(`invalid metadata request url: ${url}`);\n    }\n    return await this.getResource(url, params, options);\n  }\n  async getQueryStats(query) {\n    if ((0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.isQueryWithError)(this.interpolateString(query, _components_monaco_query_field_monaco_completion_provider_validation__WEBPACK_IMPORTED_MODULE_13__.placeHolderScopedVars))) {\n      return void 0;\n    }\n    const { start, end } = this.getTimeRangeParams();\n    const labelMatchers = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.getStreamSelectorsFromQuery)(query);\n    let statsForAll = { streams: 0, chunks: 0, bytes: 0, entries: 0 };\n    for (const labelMatcher of labelMatchers) {\n      try {\n        const data = await this.statsMetadataRequest(\n          \"index/stats\",\n          { query: labelMatcher, start, end },\n          { showErrorAlert: false }\n        );\n        statsForAll = {\n          streams: statsForAll.streams + data.streams,\n          chunks: statsForAll.chunks + data.chunks,\n          bytes: statsForAll.bytes + data.bytes,\n          entries: statsForAll.entries + data.entries\n        };\n      } catch (e) {\n        break;\n      }\n    }\n    return statsForAll;\n  }\n  async metricFindQuery(query) {\n    if (!query) {\n      return Promise.resolve([]);\n    }\n    if (typeof query === \"string\") {\n      const interpolated = this.interpolateString(query);\n      return await this.legacyProcessMetricFindQuery(interpolated);\n    }\n    const interpolatedQuery = {\n      ...query,\n      label: this.interpolateString(query.label || \"\"),\n      stream: this.interpolateString(query.stream || \"\")\n    };\n    return await this.processMetricFindQuery(interpolatedQuery);\n  }\n  async processMetricFindQuery(query) {\n    if (query.type === _types__WEBPACK_IMPORTED_MODULE_22__.LokiVariableQueryType.LabelNames) {\n      return this.labelNamesQuery();\n    }\n    if (!query.label) {\n      return [];\n    }\n    if (query.stream) {\n      return this.labelValuesSeriesQuery(query.stream, query.label);\n    }\n    return this.labelValuesQuery(query.label);\n  }\n  async legacyProcessMetricFindQuery(query) {\n    const labelNames = query.match(_migrations_variableQueryMigrations__WEBPACK_IMPORTED_MODULE_15__.labelNamesRegex);\n    if (labelNames) {\n      return await this.labelNamesQuery();\n    }\n    const labelValues = query.match(_migrations_variableQueryMigrations__WEBPACK_IMPORTED_MODULE_15__.labelValuesRegex);\n    if (labelValues) {\n      if (labelValues[1]) {\n        return await this.labelValuesSeriesQuery(labelValues[1], labelValues[2]);\n      }\n      return await this.labelValuesQuery(labelValues[2]);\n    }\n    return Promise.resolve([]);\n  }\n  async labelNamesQuery() {\n    const url = \"labels\";\n    const params = this.getTimeRangeParams();\n    const result = await this.metadataRequest(url, params);\n    return result.map((value) => ({ text: value }));\n  }\n  async labelValuesQuery(label) {\n    const params = this.getTimeRangeParams();\n    const url = `label/${label}/values`;\n    const result = await this.metadataRequest(url, params);\n    return result.map((value) => ({ text: value }));\n  }\n  async labelValuesSeriesQuery(expr, label) {\n    const timeParams = this.getTimeRangeParams();\n    const params = {\n      ...timeParams,\n      \"match[]\": expr\n    };\n    const url = \"series\";\n    const streams = /* @__PURE__ */ new Set();\n    const result = await this.metadataRequest(url, params);\n    result.forEach((stream) => {\n      if (stream[label]) {\n        streams.add({ text: stream[label] });\n      }\n    });\n    return Array.from(streams);\n  }\n  async getDataSamples(query) {\n    if (!(0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.isLogsQuery)(query.expr) || (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.isQueryWithError)(this.interpolateString(query.expr, _components_monaco_query_field_monaco_completion_provider_validation__WEBPACK_IMPORTED_MODULE_13__.placeHolderScopedVars))) {\n      return [];\n    }\n    const lokiLogsQuery = {\n      expr: query.expr,\n      queryType: _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Range,\n      refId: REF_ID_DATA_SAMPLES,\n      // For samples we limit the request to 10 lines, so queries are small and fast\n      maxLines: 10\n    };\n    const timeRange = this.getTimeRange();\n    const request = makeRequest(lokiLogsQuery, timeRange, _grafana_data__WEBPACK_IMPORTED_MODULE_35__.CoreApp.Unknown, REF_ID_DATA_SAMPLES, true);\n    return await (0,rxjs__WEBPACK_IMPORTED_MODULE_36__.lastValueFrom)(this.query(request).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_37__.switchMap)((res) => (0,rxjs__WEBPACK_IMPORTED_MODULE_34__.of)(res.data))));\n  }\n  // By implementing getTagKeys and getTagValues we add ad-hoc filters functionality\n  async getTagKeys() {\n    return await this.labelNamesQuery();\n  }\n  async getTagValues(options = {}) {\n    return await this.labelValuesQuery(options.key);\n  }\n  interpolateQueryExpr(value, variable) {\n    if (!variable.multi && !variable.includeAll) {\n      return lokiRegularEscape(value);\n    }\n    if (typeof value === \"string\") {\n      return lokiSpecialRegexEscape(value);\n    }\n    const escapedValues = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.map)(value, lokiSpecialRegexEscape);\n    return escapedValues.join(\"|\");\n  }\n  toggleQueryFilter(query, filter) {\n    let expression = query.expr ?? \"\";\n    switch (filter.type) {\n      case \"FILTER_FOR\": {\n        if (filter.options?.key && filter.options?.value) {\n          const value = (0,_languageUtils__WEBPACK_IMPORTED_MODULE_14__.escapeLabelValueInSelector)(filter.options.value);\n          expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.queryHasFilter)(expression, filter.options.key, \"=\", value) ? (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.removeLabelFromQuery)(expression, filter.options.key, \"=\", value) : (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addLabelToQuery)(expression, filter.options.key, \"=\", value);\n        }\n        break;\n      }\n      case \"FILTER_OUT\": {\n        if (filter.options?.key && filter.options?.value) {\n          const value = (0,_languageUtils__WEBPACK_IMPORTED_MODULE_14__.escapeLabelValueInSelector)(filter.options.value);\n          if ((0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.queryHasFilter)(expression, filter.options.key, \"=\", value)) {\n            expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.removeLabelFromQuery)(expression, filter.options.key, \"=\", value);\n          }\n          expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addLabelToQuery)(expression, filter.options.key, \"!=\", value);\n        }\n        break;\n      }\n      default:\n        break;\n    }\n    return { ...query, expr: expression };\n  }\n  queryHasFilter(query, filter) {\n    let expression = query.expr ?? \"\";\n    return (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.queryHasFilter)(expression, filter.key, \"=\", filter.value);\n  }\n  modifyQuery(query, action) {\n    let expression = query.expr ?? \"\";\n    switch (action.type) {\n      case \"ADD_FILTER\": {\n        if (action.options?.key && action.options?.value) {\n          const value = (0,_languageUtils__WEBPACK_IMPORTED_MODULE_14__.escapeLabelValueInSelector)(action.options.value);\n          expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addLabelToQuery)(expression, action.options.key, \"=\", value);\n        }\n        break;\n      }\n      case \"ADD_FILTER_OUT\": {\n        if (action.options?.key && action.options?.value) {\n          const value = (0,_languageUtils__WEBPACK_IMPORTED_MODULE_14__.escapeLabelValueInSelector)(action.options.value);\n          expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addLabelToQuery)(expression, action.options.key, \"!=\", value);\n        }\n        break;\n      }\n      case \"ADD_LOGFMT_PARSER\": {\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addParserToQuery)(expression, \"logfmt\");\n        break;\n      }\n      case \"ADD_JSON_PARSER\": {\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addParserToQuery)(expression, \"json\");\n        break;\n      }\n      case \"ADD_UNPACK_PARSER\": {\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addParserToQuery)(expression, \"unpack\");\n        break;\n      }\n      case \"ADD_NO_PIPELINE_ERROR\": {\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addNoPipelineErrorToQuery)(expression);\n        break;\n      }\n      case \"ADD_LEVEL_LABEL_FORMAT\": {\n        if (action.options?.originalLabel && action.options?.renameTo) {\n          expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addLabelFormatToQuery)(expression, {\n            renameTo: action.options.renameTo,\n            originalLabel: action.options.originalLabel\n          });\n        }\n        break;\n      }\n      case \"ADD_LABEL_FILTER\": {\n        const parserPositions = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.getParserPositions)(query.expr);\n        const labelFilterPositions = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.getLabelFilterPositions)(query.expr);\n        const lastPosition = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.findLastPosition)([...parserPositions, ...labelFilterPositions]);\n        const filter = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.toLabelFilter)(\"\", \"\", \"=\");\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addFilterAsLabelFilter)(expression, [lastPosition], filter);\n        break;\n      }\n      case \"ADD_LINE_FILTER\": {\n        expression = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addLineFilter)(expression);\n        break;\n      }\n      default:\n        break;\n    }\n    return { ...query, expr: expression };\n  }\n  getTime(date, roundUp) {\n    if (typeof date === \"string\") {\n      date = _grafana_data__WEBPACK_IMPORTED_MODULE_38__.parse(date, roundUp);\n    }\n    return Math.ceil(date.valueOf() * 1e6);\n  }\n  getLogRowContextUi(row, runContextQuery, origQuery) {\n    return this.logContextProvider.getLogRowContextUi(row, runContextQuery, (0,_queryUtils__WEBPACK_IMPORTED_MODULE_19__.getLokiQueryFromDataQuery)(origQuery));\n  }\n  testDatasource() {\n    const nowMs = Date.now();\n    const params = {\n      start: (nowMs - 10 * 60 * 1e3) * NS_IN_MS,\n      end: nowMs * NS_IN_MS\n    };\n    return this.metadataRequest(\"labels\", params).then(\n      (values) => {\n        return values.length > 0 ? { status: \"success\", message: \"Data source successfully connected.\" } : {\n          status: \"error\",\n          message: \"Data source connected, but no labels were received. Verify that Loki and Promtail are correctly configured.\"\n        };\n      },\n      (err) => {\n        const info = err?.data?.message ?? \"\";\n        const infoInParentheses = info !== \"\" ? ` (${info})` : \"\";\n        const message = `Unable to connect with Loki${infoInParentheses}. Please check the server logs for more details.`;\n        return { status: \"error\", message };\n      }\n    );\n  }\n  async annotationQuery(options) {\n    const { expr, maxLines, instant, tagKeys = \"\", titleFormat = \"\", textFormat = \"\" } = options.annotation;\n    if (!expr) {\n      return [];\n    }\n    const id = `${REF_ID_STARTER_ANNOTATION}${options.annotation.name}`;\n    const query = {\n      refId: id,\n      expr,\n      maxLines,\n      instant,\n      queryType: instant ? _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Instant : _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Range\n    };\n    const request = makeRequest(query, options.range, _grafana_data__WEBPACK_IMPORTED_MODULE_35__.CoreApp.Dashboard, id);\n    const { data } = await (0,rxjs__WEBPACK_IMPORTED_MODULE_36__.lastValueFrom)(this.query(request));\n    const annotations = [];\n    const splitKeys = tagKeys.split(\",\").filter((v) => v !== \"\");\n    for (const frame of data) {\n      const view = new _grafana_data__WEBPACK_IMPORTED_MODULE_39__.DataFrameView(frame);\n      view.forEach((row) => {\n        const { labels } = row;\n        const maybeDuplicatedTags = Object.entries(labels).map(([key, val]) => [key, val.trim()]).filter(([key, val]) => {\n          if (val === \"\") {\n            return false;\n          }\n          if (splitKeys.length && !splitKeys.includes(key)) {\n            return false;\n          }\n          return true;\n        }).map(([key, val]) => val);\n        const tags = Array.from(new Set(maybeDuplicatedTags));\n        annotations.push({\n          time: new Date(row.Time).valueOf(),\n          title: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_40__.renderLegendFormat)(titleFormat, labels),\n          text: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_40__.renderLegendFormat)(textFormat, labels) || row.Line,\n          tags\n        });\n      });\n    }\n    return annotations;\n  }\n  showContextToggle(row) {\n    return true;\n  }\n  processError(err, target) {\n    let error = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.cloneDeep)(err);\n    error.refId = target.refId;\n    if (error.data && err.data.message.includes(\"escape\") && target.expr.includes(\"\\\\\")) {\n      error.data.message = `Error: ${err.data.message}. Make sure that all special characters are escaped with \\\\. For more information on escaping of special characters visit LogQL documentation at https://grafana.com/docs/loki/latest/logql/.`;\n    }\n    return error;\n  }\n  addAdHocFilters(queryExpr) {\n    const adhocFilters = this.templateSrv.getAdhocFilters(this.name);\n    let expr = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_7__.replaceVariables)(queryExpr);\n    expr = adhocFilters.reduce((acc, filter) => {\n      const { key, operator } = filter;\n      let { value } = filter;\n      if ((0,_languageUtils__WEBPACK_IMPORTED_MODULE_14__.isRegexSelector)(operator)) {\n        value = lokiRegularEscape(value);\n      } else {\n        value = (0,_languageUtils__WEBPACK_IMPORTED_MODULE_14__.escapeLabelValueInSelector)(value, operator);\n      }\n      return (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_16__.addLabelToQuery)(acc, key, operator, value);\n    }, expr);\n    return (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_7__.returnVariables)(expr);\n  }\n  // Used when running queries through backend\n  filterQuery(query) {\n    if (query.hide || query.expr === \"\") {\n      return false;\n    }\n    return true;\n  }\n  // Used when running queries through backend\n  applyTemplateVariables(target, scopedVars) {\n    const { __interval, __interval_ms, __range, __range_s, __range_ms, ...rest } = scopedVars || {};\n    const exprWithAdHoc = this.addAdHocFilters(target.expr);\n    return {\n      ...target,\n      legendFormat: this.templateSrv.replace(target.legendFormat, rest),\n      expr: this.templateSrv.replace(exprWithAdHoc, rest, this.interpolateQueryExpr)\n    };\n  }\n  interpolateString(string, scopedVars) {\n    return this.templateSrv.replace(string, scopedVars, this.interpolateQueryExpr);\n  }\n  getVariables() {\n    return this.templateSrv.getVariables().map((v) => `$${v.name}`);\n  }\n  getQueryHints(query, result) {\n    return (0,_queryHints__WEBPACK_IMPORTED_MODULE_17__.getQueryHints)(query.expr, result);\n  }\n  getDefaultQuery(app) {\n    const defaults = { refId: \"A\", expr: \"\" };\n    if (app === _grafana_data__WEBPACK_IMPORTED_MODULE_35__.CoreApp.UnifiedAlerting) {\n      return {\n        ...defaults,\n        queryType: _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Instant\n      };\n    }\n    return {\n      ...defaults,\n      queryType: _types__WEBPACK_IMPORTED_MODULE_22__.LokiQueryType.Range\n    };\n  }\n}\nfunction lokiRegularEscape(value) {\n  if (typeof value === \"string\") {\n    return value.replace(/'/g, \"\\\\\\\\'\");\n  }\n  return value;\n}\nfunction lokiSpecialRegexEscape(value) {\n  if (typeof value === \"string\") {\n    return lokiRegularEscape(value.replace(/\\\\/g, \"\\\\\\\\\\\\\\\\\").replace(/[$^*{}\\[\\]+?.()|]/g, \"\\\\\\\\$&\"));\n  }\n  return value;\n}\nfunction extractLevel(dataFrame) {\n  let valueField;\n  try {\n    valueField = new _grafana_data__WEBPACK_IMPORTED_MODULE_41__.FieldCache(dataFrame).getFirstFieldOfType(_grafana_data__WEBPACK_IMPORTED_MODULE_42__.FieldType.number);\n  } catch {\n  }\n  return valueField?.labels ? getLogLevelFromLabels(valueField.labels) : _grafana_data__WEBPACK_IMPORTED_MODULE_30__.LogLevel.unknown;\n}\nfunction getLogLevelFromLabels(labels) {\n  const labelNames = [\"level\", \"lvl\", \"loglevel\"];\n  let levelLabel;\n  for (let labelName of labelNames) {\n    if (labelName in labels) {\n      levelLabel = labelName;\n      break;\n    }\n  }\n  return levelLabel ? (0,_features_logs_utils__WEBPACK_IMPORTED_MODULE_6__.getLogLevelFromKey)(labels[levelLabel]) : _grafana_data__WEBPACK_IMPORTED_MODULE_30__.LogLevel.unknown;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2RhdGFzb3VyY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDcUI7QUFDakI7QUFxQ3pDO0FBQ3NFO0FBRXZDO0FBQ0Y7QUFDUTtBQUVaO0FBQ2lCO0FBQ2Q7QUFDZTtBQUVyQjtBQUNlO0FBQ1Q7QUFDSTtBQUNJO0FBQ0w7QUFDc0I7QUFDVjtBQWUzQztBQUN1QjtBQUNBO0FBU3ZCO0FBQzZCO0FBQ1Q7QUFTcEI7QUFDNkI7QUFHN0IsTUFBTSxvQkFBb0I7QUFDMUIsTUFBTSxnQkFBZ0I7QUFDdEIsTUFBTSxzQkFBc0I7QUFDNUIsTUFBTSw0QkFBNEI7QUFDbEMsTUFBTSxpQ0FBaUM7QUFDdkMsTUFBTSw0QkFBNEI7QUFDbEMsTUFBTSw0QkFBNEI7QUFDekMsTUFBTSxXQUFXO0FBRVYsU0FBUyxZQUNkLE9BQ0EsT0FDQSxLQUNBLFdBQ0EsbUJBQzZCO0FBQzdCLFFBQU0sZUFBZSw2REFBMkIsQ0FBQyxPQUFPLENBQUM7QUFDekQsU0FBTztBQUFBLElBQ0wsU0FBUyxDQUFDLEtBQUs7QUFBQSxJQUNmO0FBQUEsSUFDQSxVQUFVLGFBQWE7QUFBQSxJQUN2QixZQUFZLGFBQWE7QUFBQSxJQUN6QjtBQUFBLElBQ0EsWUFBWSxDQUFDO0FBQUEsSUFDYixVQUFVO0FBQUEsSUFDVjtBQUFBLElBQ0EsV0FBVyxLQUFLLElBQUk7QUFBQSxJQUNwQjtBQUFBLEVBQ0Y7QUFDRjtBQUVPLE1BQU0sdUJBQ0gsb0VBQXFCLENBTy9CO0FBQUEsRUFPRSxZQUNVLGtCQUNTLGNBQTJCLG9GQUFjLENBQUMsR0FDMUMsVUFBbUIsbUZBQVUsQ0FBQyxHQUMvQztBQUNBLFVBQU0sZ0JBQWdCO0FBSmQ7QUFDUztBQUNBO0FBVG5CLFNBQVEsVUFBVSxJQUFJLHFEQUFXLENBQUM7QUE2TmxDO0FBQUE7QUFBQTtBQUFBO0FB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QUVBLFNBQVMsc0JBQXNCLFFBQTBCO0FBQ3ZELFFBQU0sYUFBYSxDQUFDLFNBQVMsT0FBTyxVQUFVO0FBQzlDLE1BQUk7QUFDSixXQUFTLGFBQWEsWUFBWTtBQUNoQyxRQUFJLGFBQWEsUUFBUTtBQUN2QixtQkFBYTtBQUNiO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFDQSxTQUFPLGFBQWEsd0VBQWtCLENBQUMsT0FBTyxVQUFVLENBQUMsSUFBSSxvREFBUSxDQUFDO0FBQ3hFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvZGF0YXNvdXJjZS50cz8wZjBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsb25lRGVlcCwgbWFwIGFzIGxvZGFzaE1hcCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBsYXN0VmFsdWVGcm9tLCBtZXJnZSwgT2JzZXJ2YWJsZSwgb2YsIHRocm93RXJyb3IgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGNhdGNoRXJyb3IsIG1hcCwgc3dpdGNoTWFwLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gIEFic3RyYWN0UXVlcnksXG4gIEFubm90YXRpb25FdmVudCxcbiAgQW5ub3RhdGlvblF1ZXJ5UmVxdWVzdCxcbiAgQ29yZUFwcCxcbiAgRGF0YUZyYW1lLFxuICBEYXRhRnJhbWVWaWV3LFxuICBEYXRhUXVlcnlFcnJvcixcbiAgRGF0YVF1ZXJ5UmVxdWVzdCxcbiAgRGF0YVF1ZXJ5UmVzcG9uc2UsXG4gIERhdGFTb3VyY2VJbnN0YW5jZVNldHRpbmdzLFxuICBEYXRhU291cmNlV2l0aExvZ3NDb250ZXh0U3VwcG9ydCxcbiAgRGF0YVNvdXJjZVdpdGhTdXBwbGVtZW50YXJ5UXVlcmllc1N1cHBvcnQsXG4gIFN1cHBsZW1lbnRhcnlRdWVyeVR5cGUsXG4gIERhdGFTb3VyY2VXaXRoUXVlcnlFeHBvcnRTdXBwb3J0LFxuICBEYXRhU291cmNlV2l0aFF1ZXJ5SW1wb3J0U3VwcG9ydCxcbiAgZGF0ZU1hdGgsXG4gIERhdGVUaW1lLFxuICBGaWVsZENhY2hlLFxuICBGaWVsZFR5cGUsXG4gIExhYmVscyxcbiAgTG9hZGluZ1N0YXRlLFxuICBMb2dMZXZlbCxcbiAgTG9nUm93TW9kZWwsXG4gIFF1ZXJ5Rml4QWN0aW9uLFxuICBRdWVyeUhpbnQsXG4gIHJhbmdlVXRpbCxcbiAgU2NvcGVkVmFycyxcbiAgU3VwcGxlbWVudGFyeVF1ZXJ5T3B0aW9ucyxcbiAgVGltZVJhbmdlLFxuICBMb2dSb3dDb250ZXh0T3B0aW9ucyxcbiAgRGF0YVNvdXJjZVdpdGhUb2dnbGVhYmxlUXVlcnlGaWx0ZXJzU3VwcG9ydCxcbiAgVG9nZ2xlRmlsdGVyQWN0aW9uLFxuICBRdWVyeUZpbHRlck9wdGlvbnMsXG4gIHJlbmRlckxlZ2VuZEZvcm1hdCxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBCYWNrZW5kU3J2UmVxdWVzdCwgY29uZmlnLCBEYXRhU291cmNlV2l0aEJhY2tlbmQsIEZldGNoRXJyb3IgfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcbmltcG9ydCB7IERhdGFRdWVyeSB9IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5pbXBvcnQgeyBjb252ZXJ0VG9XZWJTb2NrZXRVcmwgfSBmcm9tICdhcHAvY29yZS91dGlscy9leHBsb3JlJztcbmltcG9ydCB7IGdldFRpbWVTcnYsIFRpbWVTcnYgfSBmcm9tICdhcHAvZmVhdHVyZXMvZGFzaGJvYXJkL3NlcnZpY2VzL1RpbWVTcnYnO1xuaW1wb3J0IHsgZ2V0VGVtcGxhdGVTcnYsIFRlbXBsYXRlU3J2IH0gZnJvbSAnYXBwL2ZlYXR1cmVzL3RlbXBsYXRpbmcvdGVtcGxhdGVfc3J2JztcblxuaW1wb3J0IHsgc2VyaWFsaXplUGFyYW1zIH0gZnJvbSAnLi4vLi4vLi4vY29yZS91dGlscy9mZXRjaCc7XG5pbXBvcnQgeyBxdWVyeUxvZ3NTYW1wbGUsIHF1ZXJ5TG9nc1ZvbHVtZSB9IGZyb20gJy4uLy4uLy4uL2ZlYXR1cmVzL2xvZ3MvbG9nc01vZGVsJztcbmltcG9ydCB7IGdldExvZ0xldmVsRnJvbUtleSB9IGZyb20gJy4uLy4uLy4uL2ZlYXR1cmVzL2xvZ3MvdXRpbHMnO1xuaW1wb3J0IHsgcmVwbGFjZVZhcmlhYmxlcywgcmV0dXJuVmFyaWFibGVzIH0gZnJvbSAnLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL3BhcnNpbmdVdGlscyc7XG5cbmltcG9ydCBMYW5ndWFnZVByb3ZpZGVyIGZyb20gJy4vTGFuZ3VhZ2VQcm92aWRlcic7XG5pbXBvcnQgeyBMaXZlU3RyZWFtcywgTG9raUxpdmVUYXJnZXQgfSBmcm9tICcuL0xpdmVTdHJlYW1zJztcbmltcG9ydCB7IExvZ0NvbnRleHRQcm92aWRlciB9IGZyb20gJy4vTG9nQ29udGV4dFByb3ZpZGVyJztcbmltcG9ydCB7IHRyYW5zZm9ybUJhY2tlbmRSZXN1bHQgfSBmcm9tICcuL2JhY2tlbmRSZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgeyBMb2tpQW5ub3RhdGlvbnNRdWVyeUVkaXRvciB9IGZyb20gJy4vY29tcG9uZW50cy9Bbm5vdGF0aW9uc1F1ZXJ5RWRpdG9yJztcbmltcG9ydCB7IHBsYWNlSG9sZGVyU2NvcGVkVmFycyB9IGZyb20gJy4vY29tcG9uZW50cy9tb25hY28tcXVlcnktZmllbGQvbW9uYWNvLWNvbXBsZXRpb24tcHJvdmlkZXIvdmFsaWRhdGlvbic7XG5pbXBvcnQgeyBlc2NhcGVMYWJlbFZhbHVlSW5TZWxlY3RvciwgaXNSZWdleFNlbGVjdG9yIH0gZnJvbSAnLi9sYW5ndWFnZVV0aWxzJztcbmltcG9ydCB7IGxhYmVsTmFtZXNSZWdleCwgbGFiZWxWYWx1ZXNSZWdleCB9IGZyb20gJy4vbWlncmF0aW9ucy92YXJpYWJsZVF1ZXJ5TWlncmF0aW9ucyc7XG5pbXBvcnQge1xuICBhZGRMYWJlbEZvcm1hdFRvUXVlcnksXG4gIGFkZExhYmVsVG9RdWVyeSxcbiAgYWRkTm9QaXBlbGluZUVycm9yVG9RdWVyeSxcbiAgYWRkUGFyc2VyVG9RdWVyeSxcbiAgcmVtb3ZlQ29tbWVudHNGcm9tUXVlcnksXG4gIGFkZEZpbHRlckFzTGFiZWxGaWx0ZXIsXG4gIGdldFBhcnNlclBvc2l0aW9ucyxcbiAgdG9MYWJlbEZpbHRlcixcbiAgYWRkTGluZUZpbHRlcixcbiAgZmluZExhc3RQb3NpdGlvbixcbiAgZ2V0TGFiZWxGaWx0ZXJQb3NpdGlvbnMsXG4gIHF1ZXJ5SGFzRmlsdGVyLFxuICByZW1vdmVMYWJlbEZyb21RdWVyeSxcbn0gZnJvbSAnLi9tb2RpZnlRdWVyeSc7XG5pbXBvcnQgeyBnZXRRdWVyeUhpbnRzIH0gZnJvbSAnLi9xdWVyeUhpbnRzJztcbmltcG9ydCB7IHJ1blNwbGl0UXVlcnkgfSBmcm9tICcuL3F1ZXJ5U3BsaXR0aW5nJztcbmltcG9ydCB7XG4gIGdldExvZ1F1ZXJ5RnJvbU1ldHJpY3NRdWVyeSxcbiAgZ2V0TG9raVF1ZXJ5RnJvbURhdGFRdWVyeSxcbiAgZ2V0Tm9ybWFsaXplZExva2lRdWVyeSxcbiAgZ2V0U3RyZWFtU2VsZWN0b3JzRnJvbVF1ZXJ5LFxuICBpc0xvZ3NRdWVyeSxcbiAgaXNRdWVyeVdpdGhFcnJvcixcbiAgcmVxdWVzdFN1cHBvcnRzU3BsaXR0aW5nLFxufSBmcm9tICcuL3F1ZXJ5VXRpbHMnO1xuaW1wb3J0IHsgZG9Mb2tpQ2hhbm5lbFN0cmVhbSB9IGZyb20gJy4vc3RyZWFtaW5nJztcbmltcG9ydCB7IHRyYWNrUXVlcnkgfSBmcm9tICcuL3RyYWNraW5nJztcbmltcG9ydCB7XG4gIExva2lPcHRpb25zLFxuICBMb2tpUXVlcnksXG4gIExva2lRdWVyeVR5cGUsXG4gIExva2lWYXJpYWJsZVF1ZXJ5LFxuICBMb2tpVmFyaWFibGVRdWVyeVR5cGUsXG4gIFF1ZXJ5U3RhdHMsXG4gIFN1cHBvcnRpbmdRdWVyeVR5cGUsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgTG9raVZhcmlhYmxlU3VwcG9ydCB9IGZyb20gJy4vdmFyaWFibGVzJztcblxuZXhwb3J0IHR5cGUgUmFuZ2VRdWVyeU9wdGlvbnMgPSBEYXRhUXVlcnlSZXF1ZXN0PExva2lRdWVyeT4gfCBBbm5vdGF0aW9uUXVlcnlSZXF1ZXN0PExva2lRdWVyeT47XG5leHBvcnQgY29uc3QgREVGQVVMVF9NQVhfTElORVMgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IExPS0lfRU5EUE9JTlQgPSAnL2xva2kvYXBpL3YxJztcbmV4cG9ydCBjb25zdCBSRUZfSURfREFUQV9TQU1QTEVTID0gJ2xva2ktZGF0YS1zYW1wbGVzJztcbmV4cG9ydCBjb25zdCBSRUZfSURfU1RBUlRFUl9BTk5PVEFUSU9OID0gJ2Fubm90YXRpb24tJztcbmV4cG9ydCBjb25zdCBSRUZfSURfU1RBUlRFUl9MT0dfUk9XX0NPTlRFWFQgPSAnbG9nLXJvdy1jb250ZXh0LXF1ZXJ5LSc7XG5leHBvcnQgY29uc3QgUkVGX0lEX1NUQVJURVJfTE9HX1ZPTFVNRSA9ICdsb2ctdm9sdW1lLSc7XG5leHBvcnQgY29uc3QgUkVGX0lEX1NUQVJURVJfTE9HX1NBTVBMRSA9ICdsb2ctc2FtcGxlLSc7XG5jb25zdCBOU19JTl9NUyA9IDEwMDAwMDA7XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVxdWVzdChcbiAgcXVlcnk6IExva2lRdWVyeSxcbiAgcmFuZ2U6IFRpbWVSYW5nZSxcbiAgYXBwOiBDb3JlQXBwLFxuICByZXF1ZXN0SWQ6IHN0cmluZyxcbiAgaGlkZUZyb21JbnNwZWN0b3I/OiBib29sZWFuXG4pOiBEYXRhUXVlcnlSZXF1ZXN0PExva2lRdWVyeT4ge1xuICBjb25zdCBpbnRlcnZhbEluZm8gPSByYW5nZVV0aWwuY2FsY3VsYXRlSW50ZXJ2YWwocmFuZ2UsIDEpO1xuICByZXR1cm4ge1xuICAgIHRhcmdldHM6IFtxdWVyeV0sXG4gICAgcmVxdWVzdElkLFxuICAgIGludGVydmFsOiBpbnRlcnZhbEluZm8uaW50ZXJ2YWwsXG4gICAgaW50ZXJ2YWxNczogaW50ZXJ2YWxJbmZvLmludGVydmFsTXMsXG4gICAgcmFuZ2U6IHJhbmdlLFxuICAgIHNjb3BlZFZhcnM6IHt9LFxuICAgIHRpbWV6b25lOiAnVVRDJyxcbiAgICBhcHAsXG4gICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLFxuICAgIGhpZGVGcm9tSW5zcGVjdG9yLFxuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgTG9raURhdGFzb3VyY2VcbiAgZXh0ZW5kcyBEYXRhU291cmNlV2l0aEJhY2tlbmQ8TG9raVF1ZXJ5LCBMb2tpT3B0aW9ucz5cbiAgaW1wbGVtZW50c1xuICAgIERhdGFTb3VyY2VXaXRoTG9nc0NvbnRleHRTdXBwb3J0LFxuICAgIERhdGFTb3VyY2VXaXRoU3VwcGxlbWVudGFyeVF1ZXJpZXNTdXBwb3J0PExva2lRdWVyeT4sXG4gICAgRGF0YVNvdXJjZVdpdGhRdWVyeUltcG9ydFN1cHBvcnQ8TG9raVF1ZXJ5PixcbiAgICBEYXRhU291cmNlV2l0aFF1ZXJ5RXhwb3J0U3VwcG9ydDxMb2tpUXVlcnk+LFxuICAgIERhdGFTb3VyY2VXaXRoVG9nZ2xlYWJsZVF1ZXJ5RmlsdGVyc1N1cHBvcnQ8TG9raVF1ZXJ5Plxue1xuICBwcml2YXRlIHN0cmVhbXMgPSBuZXcgTGl2ZVN0cmVhbXMoKTtcbiAgbGFuZ3VhZ2VQcm92aWRlcjogTGFuZ3VhZ2VQcm92aWRlcjtcbiAgbG9nQ29udGV4dFByb3ZpZGVyOiBMb2dDb250ZXh0UHJvdmlkZXI7XG4gIG1heExpbmVzOiBudW1iZXI7XG4gIHByZWRlZmluZWRPcGVyYXRpb25zOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpbnN0YW5jZVNldHRpbmdzOiBEYXRhU291cmNlSW5zdGFuY2VTZXR0aW5nczxMb2tpT3B0aW9ucz4sXG4gICAgcHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZVNydjogVGVtcGxhdGVTcnYgPSBnZXRUZW1wbGF0ZVNydigpLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgdGltZVNydjogVGltZVNydiA9IGdldFRpbWVTcnYoKVxuICApIHtcbiAgICBzdXBlcihpbnN0YW5jZVNldHRpbmdzKTtcblxuICAgIHRoaXMubGFuZ3VhZ2VQcm92aWRlciA9IG5ldyBMYW5ndWFnZVByb3ZpZGVyKHRoaXMpO1xuICAgIGNvbnN0IHNldHRpbmdzRGF0YSA9IGluc3RhbmNlU2V0dGluZ3MuanNvbkRhdGEgfHwge307XG4gICAgdGhpcy5tYXhMaW5lcyA9IHBhcnNlSW50KHNldHRpbmdzRGF0YS5tYXhMaW5lcyA/PyAnMCcsIDEwKSB8fCBERUZBVUxUX01BWF9MSU5FUztcbiAgICB0aGlzLnByZWRlZmluZWRPcGVyYXRpb25zID0gc2V0dGluZ3NEYXRhLnByZWRlZmluZWRPcGVyYXRpb25zID8/ICcnO1xuICAgIHRoaXMuYW5ub3RhdGlvbnMgPSB7XG4gICAgICBRdWVyeUVkaXRvcjogTG9raUFubm90YXRpb25zUXVlcnlFZGl0b3IsXG4gICAgfTtcbiAgICB0aGlzLnZhcmlhYmxlcyA9IG5ldyBMb2tpVmFyaWFibGVTdXBwb3J0KHRoaXMpO1xuICAgIHRoaXMubG9nQ29udGV4dFByb3ZpZGVyID0gbmV3IExvZ0NvbnRleHRQcm92aWRlcih0aGlzKTtcbiAgfVxuXG4gIGdldERhdGFQcm92aWRlcihcbiAgICB0eXBlOiBTdXBwbGVtZW50YXJ5UXVlcnlUeXBlLFxuICAgIHJlcXVlc3Q6IERhdGFRdWVyeVJlcXVlc3Q8TG9raVF1ZXJ5PlxuICApOiBPYnNlcnZhYmxlPERhdGFRdWVyeVJlc3BvbnNlPiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCF0aGlzLmdldFN1cHBvcnRlZFN1cHBsZW1lbnRhcnlRdWVyeVR5cGVzKCkuaW5jbHVkZXModHlwZSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBTdXBwbGVtZW50YXJ5UXVlcnlUeXBlLkxvZ3NWb2x1bWU6XG4gICAgICAgIHJldHVybiB0aGlzLmdldExvZ3NWb2x1bWVEYXRhUHJvdmlkZXIocmVxdWVzdCk7XG4gICAgICBjYXNlIFN1cHBsZW1lbnRhcnlRdWVyeVR5cGUuTG9nc1NhbXBsZTpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TG9nc1NhbXBsZURhdGFQcm92aWRlcihyZXF1ZXN0KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3VwcG9ydGVkU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZXMoKTogU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZVtdIHtcbiAgICByZXR1cm4gW1N1cHBsZW1lbnRhcnlRdWVyeVR5cGUuTG9nc1ZvbHVtZSwgU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZS5Mb2dzU2FtcGxlXTtcbiAgfVxuXG4gIGdldFN1cHBsZW1lbnRhcnlRdWVyeShvcHRpb25zOiBTdXBwbGVtZW50YXJ5UXVlcnlPcHRpb25zLCBxdWVyeTogTG9raVF1ZXJ5KTogTG9raVF1ZXJ5IHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMuZ2V0U3VwcG9ydGVkU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZXMoKS5pbmNsdWRlcyhvcHRpb25zLnR5cGUpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IG5vcm1hbGl6ZWRRdWVyeSA9IGdldE5vcm1hbGl6ZWRMb2tpUXVlcnkocXVlcnkpO1xuICAgIGNvbnN0IGV4cHIgPSByZW1vdmVDb21tZW50c0Zyb21RdWVyeShub3JtYWxpemVkUXVlcnkuZXhwcik7XG4gICAgbGV0IGlzUXVlcnlTdWl0YWJsZSA9IGZhbHNlO1xuXG4gICAgc3dpdGNoIChvcHRpb25zLnR5cGUpIHtcbiAgICAgIGNhc2UgU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZS5Mb2dzVm9sdW1lOlxuICAgICAgICAvLyBpdCBoYXMgdG8gYmUgYSBsb2dzLXByb2R1Y2luZyByYW5nZS1xdWVyeVxuICAgICAgICBpc1F1ZXJ5U3VpdGFibGUgPSAhIShleHByICYmIGlzTG9nc1F1ZXJ5KGV4cHIpICYmIG5vcm1hbGl6ZWRRdWVyeS5xdWVyeVR5cGUgPT09IExva2lRdWVyeVR5cGUuUmFuZ2UpO1xuICAgICAgICBpZiAoIWlzUXVlcnlTdWl0YWJsZSkge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm5vcm1hbGl6ZWRRdWVyeSxcbiAgICAgICAgICByZWZJZDogYCR7UkVGX0lEX1NUQVJURVJfTE9HX1ZPTFVNRX0ke25vcm1hbGl6ZWRRdWVyeS5yZWZJZH1gLFxuICAgICAgICAgIHF1ZXJ5VHlwZTogTG9raVF1ZXJ5VHlwZS5SYW5nZSxcbiAgICAgICAgICBzdXBwb3J0aW5nUXVlcnlUeXBlOiBTdXBwb3J0aW5nUXVlcnlUeXBlLkxvZ3NWb2x1bWUsXG4gICAgICAgICAgZXhwcjogYHN1bSBieSAobGV2ZWwpIChjb3VudF9vdmVyX3RpbWUoJHtleHByfVskX19pbnRlcnZhbF0pKWAsXG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgU3VwcGxlbWVudGFyeVF1ZXJ5VHlwZS5Mb2dzU2FtcGxlOlxuICAgICAgICAvLyBpdCBoYXMgdG8gYmUgYSBtZXRyaWMgcXVlcnlcbiAgICAgICAgaXNRdWVyeVN1aXRhYmxlID0gISEoZXhwciAmJiAhaXNMb2dzUXVlcnkoZXhwcikpO1xuICAgICAgICBpZiAoIWlzUXVlcnlTdWl0YWJsZSkge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5ub3JtYWxpemVkUXVlcnksXG4gICAgICAgICAgcXVlcnlUeXBlOiBMb2tpUXVlcnlUeXBlLlJhbmdlLFxuICAgICAgICAgIHJlZklkOiBgJHtSRUZfSURfU1RBUlRFUl9MT0dfU0FNUExFfSR7bm9ybWFsaXplZFF1ZXJ5LnJlZklkfWAsXG4gICAgICAgICAgZXhwcjogZ2V0TG9nUXVlcnlGcm9tTWV0cmljc1F1ZXJ5KGV4cHIpLFxuICAgICAgICAgIG1heExpbmVzOiBOdW1iZXIuaXNOYU4oTnVtYmVyKG9wdGlvbnMubGltaXQpKSA/IHRoaXMubWF4TGluZXMgOiBOdW1iZXIob3B0aW9ucy5saW1pdCksXG4gICAgICAgIH07XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0TG9nc1ZvbHVtZURhdGFQcm92aWRlcihyZXF1ZXN0OiBEYXRhUXVlcnlSZXF1ZXN0PExva2lRdWVyeT4pOiBPYnNlcnZhYmxlPERhdGFRdWVyeVJlc3BvbnNlPiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgbG9nc1ZvbHVtZVJlcXVlc3QgPSBjbG9uZURlZXAocmVxdWVzdCk7XG4gICAgY29uc3QgdGFyZ2V0cyA9IGxvZ3NWb2x1bWVSZXF1ZXN0LnRhcmdldHNcbiAgICAgIC5tYXAoKHF1ZXJ5KSA9PiB0aGlzLmdldFN1cHBsZW1lbnRhcnlRdWVyeSh7IHR5cGU6IFN1cHBsZW1lbnRhcnlRdWVyeVR5cGUuTG9nc1ZvbHVtZSB9LCBxdWVyeSkpXG4gICAgICAuZmlsdGVyKChxdWVyeSk6IHF1ZXJ5IGlzIExva2lRdWVyeSA9PiAhIXF1ZXJ5KTtcblxuICAgIGlmICghdGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXJ5TG9nc1ZvbHVtZShcbiAgICAgIHRoaXMsXG4gICAgICB7IC4uLmxvZ3NWb2x1bWVSZXF1ZXN0LCB0YXJnZXRzIH0sXG4gICAgICB7XG4gICAgICAgIGV4dHJhY3RMZXZlbCxcbiAgICAgICAgcmFuZ2U6IHJlcXVlc3QucmFuZ2UsXG4gICAgICAgIHRhcmdldHM6IHJlcXVlc3QudGFyZ2V0cyxcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZ2V0TG9nc1NhbXBsZURhdGFQcm92aWRlcihyZXF1ZXN0OiBEYXRhUXVlcnlSZXF1ZXN0PExva2lRdWVyeT4pOiBPYnNlcnZhYmxlPERhdGFRdWVyeVJlc3BvbnNlPiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgbG9nc1NhbXBsZVJlcXVlc3QgPSBjbG9uZURlZXAocmVxdWVzdCk7XG4gICAgY29uc3QgdGFyZ2V0cyA9IGxvZ3NTYW1wbGVSZXF1ZXN0LnRhcmdldHNcbiAgICAgIC5tYXAoKHF1ZXJ5KSA9PiB0aGlzLmdldFN1cHBsZW1lbnRhcnlRdWVyeSh7IHR5cGU6IFN1cHBsZW1lbnRhcnlRdWVyeVR5cGUuTG9nc1NhbXBsZSwgbGltaXQ6IDEwMCB9LCBxdWVyeSkpXG4gICAgICAuZmlsdGVyKChxdWVyeSk6IHF1ZXJ5IGlzIExva2lRdWVyeSA9PiAhIXF1ZXJ5KTtcblxuICAgIGlmICghdGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBxdWVyeUxvZ3NTYW1wbGUodGhpcywgeyAuLi5sb2dzU2FtcGxlUmVxdWVzdCwgdGFyZ2V0cyB9KTtcbiAgfVxuXG4gIHF1ZXJ5KHJlcXVlc3Q6IERhdGFRdWVyeVJlcXVlc3Q8TG9raVF1ZXJ5Pik6IE9ic2VydmFibGU8RGF0YVF1ZXJ5UmVzcG9uc2U+IHtcbiAgICBjb25zdCBxdWVyaWVzID0gcmVxdWVzdC50YXJnZXRzXG4gICAgICAubWFwKGdldE5vcm1hbGl6ZWRMb2tpUXVlcnkpIC8vIFwiZml4XCIgdGhlIGAucXVlcnlUeXBlYCBwcm9wXG4gICAgICAubWFwKChxKSA9PiAoeyAuLi5xLCBtYXhMaW5lczogcS5tYXhMaW5lcyA/PyB0aGlzLm1heExpbmVzIH0pKTtcblxuICAgIGNvbnN0IGZpeGVkUmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxMb2tpUXVlcnk+ID0ge1xuICAgICAgLi4ucmVxdWVzdCxcbiAgICAgIHRhcmdldHM6IHF1ZXJpZXMsXG4gICAgfTtcblxuICAgIGNvbnN0IHN0cmVhbVF1ZXJpZXMgPSBmaXhlZFJlcXVlc3QudGFyZ2V0cy5maWx0ZXIoKHEpID0+IHEucXVlcnlUeXBlID09PSBMb2tpUXVlcnlUeXBlLlN0cmVhbSk7XG4gICAgaWYgKFxuICAgICAgY29uZmlnLmZlYXR1cmVUb2dnbGVzLmxva2lFeHBlcmltZW50YWxTdHJlYW1pbmcgJiZcbiAgICAgIHN0cmVhbVF1ZXJpZXMubGVuZ3RoID4gMCAmJlxuICAgICAgZml4ZWRSZXF1ZXN0LnJhbmdlUmF3Py50byA9PT0gJ25vdydcbiAgICApIHtcbiAgICAgIC8vIHRoaXMgaXMgc3RpbGwgYW4gaW4tZGV2ZWxvcG1lbnQgZmVhdHVyZSxcbiAgICAgIC8vIHdlIGRvIG5vdCBzdXBwb3J0IG1peGluZyBzdHJlYW0tcXVlcmllcyB3aXRoIG5vcm1hbC1xdWVyaWVzIGZvciBub3cuXG4gICAgICBjb25zdCBzdHJlYW1SZXF1ZXN0ID0ge1xuICAgICAgICAuLi5maXhlZFJlcXVlc3QsXG4gICAgICAgIHRhcmdldHM6IHN0cmVhbVF1ZXJpZXMsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIG1lcmdlKFxuICAgICAgICAuLi5zdHJlYW1RdWVyaWVzLm1hcCgocSkgPT5cbiAgICAgICAgICBkb0xva2lDaGFubmVsU3RyZWFtKFxuICAgICAgICAgICAgdGhpcy5hcHBseVRlbXBsYXRlVmFyaWFibGVzKHEsIHJlcXVlc3Quc2NvcGVkVmFycyksXG4gICAgICAgICAgICB0aGlzLCAvLyB0aGUgZGF0YXNvdXJjZVxuICAgICAgICAgICAgc3RyZWFtUmVxdWVzdFxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZml4ZWRSZXF1ZXN0LmxpdmVTdHJlYW1pbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnJ1bkxpdmVRdWVyeVRocm91Z2hCYWNrZW5kKGZpeGVkUmVxdWVzdCk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5mZWF0dXJlVG9nZ2xlcy5sb2tpUXVlcnlTcGxpdHRpbmcgJiYgcmVxdWVzdFN1cHBvcnRzU3BsaXR0aW5nKGZpeGVkUmVxdWVzdC50YXJnZXRzKSkge1xuICAgICAgcmV0dXJuIHJ1blNwbGl0UXVlcnkodGhpcywgZml4ZWRSZXF1ZXN0KTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgIHJldHVybiB0aGlzLnJ1blF1ZXJ5KGZpeGVkUmVxdWVzdCkucGlwZShcbiAgICAgIHRhcCgocmVzcG9uc2UpID0+XG4gICAgICAgIHRyYWNrUXVlcnkocmVzcG9uc2UsIGZpeGVkUmVxdWVzdCwgc3RhcnRUaW1lLCB7IHByZWRlZmluZWRPcGVyYXRpb25zOiB0aGlzLnByZWRlZmluZWRPcGVyYXRpb25zIH0pXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIHJ1blF1ZXJ5KGZpeGVkUmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxMb2tpUXVlcnk+KSB7XG4gICAgcmV0dXJuIHN1cGVyXG4gICAgICAucXVlcnkoZml4ZWRSZXF1ZXN0KVxuICAgICAgLnBpcGUoXG4gICAgICAgIG1hcCgocmVzcG9uc2UpID0+XG4gICAgICAgICAgdHJhbnNmb3JtQmFja2VuZFJlc3VsdChyZXNwb25zZSwgZml4ZWRSZXF1ZXN0LnRhcmdldHMsIHRoaXMuaW5zdGFuY2VTZXR0aW5ncy5qc29uRGF0YS5kZXJpdmVkRmllbGRzID8/IFtdKVxuICAgICAgICApXG4gICAgICApO1xuICB9XG5cbiAgcnVuTGl2ZVF1ZXJ5VGhyb3VnaEJhY2tlbmQocmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxMb2tpUXVlcnk+KTogT2JzZXJ2YWJsZTxEYXRhUXVlcnlSZXNwb25zZT4ge1xuICAgIC8vIHRoaXMgb25seSB3b3JrcyBpbiBleHBsb3JlLW1vZGUsIHNvIHZhcmlhYmxlcyBkb24ndCBuZWVkIHRvIGJlIGhhbmRsZWQsXG4gICAgLy8gIGFuZCBvbmx5IGZvciBsb2dzLXF1ZXJpZXMsIG5vdCBtZXRyaWMgcXVlcmllc1xuICAgIGNvbnN0IGxvZ3NRdWVyaWVzID0gcmVxdWVzdC50YXJnZXRzLmZpbHRlcigocXVlcnkpID0+IHF1ZXJ5LmV4cHIgIT09ICcnICYmIGlzTG9nc1F1ZXJ5KHF1ZXJ5LmV4cHIpKTtcblxuICAgIGlmIChsb2dzUXVlcmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBvZih7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBzdGF0ZTogTG9hZGluZ1N0YXRlLkRvbmUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzdWJRdWVyaWVzID0gbG9nc1F1ZXJpZXMubWFwKChxdWVyeSkgPT4ge1xuICAgICAgY29uc3QgbWF4RGF0YVBvaW50cyA9IHF1ZXJ5Lm1heExpbmVzIHx8IHRoaXMubWF4TGluZXM7XG4gICAgICAvLyBGSVhNRTogY3VycmVudGx5IHdlIGFyZSBydW5uaW5nIGl0IHRocm91Z2ggdGhlIGZyb250ZW5kIHN0aWxsLlxuICAgICAgcmV0dXJuIHRoaXMucnVuTGl2ZVF1ZXJ5KHF1ZXJ5LCBtYXhEYXRhUG9pbnRzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBtZXJnZSguLi5zdWJRdWVyaWVzKTtcbiAgfVxuXG4gIGNyZWF0ZUxpdmVUYXJnZXQodGFyZ2V0OiBMb2tpUXVlcnksIG1heERhdGFQb2ludHM6IG51bWJlcik6IExva2lMaXZlVGFyZ2V0IHtcbiAgICBjb25zdCBxdWVyeSA9IHRhcmdldC5leHByO1xuICAgIGNvbnN0IGJhc2VVcmwgPSB0aGlzLmluc3RhbmNlU2V0dGluZ3MudXJsO1xuICAgIGNvbnN0IHBhcmFtcyA9IHNlcmlhbGl6ZVBhcmFtcyh7IHF1ZXJ5IH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgdXJsOiBjb252ZXJ0VG9XZWJTb2NrZXRVcmwoYCR7YmFzZVVybH0vbG9raS9hcGkvdjEvdGFpbD8ke3BhcmFtc31gKSxcbiAgICAgIHJlZklkOiB0YXJnZXQucmVmSWQsXG4gICAgICBzaXplOiBtYXhEYXRhUG9pbnRzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUnVucyBsaXZlIHF1ZXJpZXMgd2hpY2ggaW4gdGhpcyBjYXNlIG1lYW5zIGNyZWF0aW5nIGEgd2Vic29ja2V0IGFuZCBsaXN0ZW5pbmcgb24gaXQgZm9yIG5ldyBsb2dzLlxuICAgKiBUaGlzIHJldHVybnMgYSBiaXQgZGlmZmVyZW50IGRhdGFGcmFtZSB0aGFuIHJ1blF1ZXJpZXMgYXMgaXQgcmV0dXJucyBzaW5nbGUgZGF0YWZyYW1lIGV2ZW4gaWYgdGhlcmUgYXJlIG11bHRpcGxlXG4gICAqIExva2kgc3RyZWFtcywgc2V0cyBvbmx5IGNvbW1vbiBsYWJlbHMgb24gZGF0YWZyYW1lLmxhYmVscyBhbmQgaGFzIGFkZGl0aW9uYWwgZGF0YWZyYW1lLmZpZWxkcy5sYWJlbHMgZm9yIHVuaXF1ZVxuICAgKiBsYWJlbHMgcGVyIHJvdy5cbiAgICovXG4gIHJ1bkxpdmVRdWVyeSA9ICh0YXJnZXQ6IExva2lRdWVyeSwgbWF4RGF0YVBvaW50czogbnVtYmVyKTogT2JzZXJ2YWJsZTxEYXRhUXVlcnlSZXNwb25zZT4gPT4ge1xuICAgIGNvbnN0IGxpdmVUYXJnZXQgPSB0aGlzLmNyZWF0ZUxpdmVUYXJnZXQodGFyZ2V0LCBtYXhEYXRhUG9pbnRzKTtcblxuICAgIHJldHVybiB0aGlzLnN0cmVhbXMuZ2V0U3RyZWFtKGxpdmVUYXJnZXQpLnBpcGUoXG4gICAgICBtYXAoKGRhdGEpID0+ICh7XG4gICAgICAgIGRhdGE6IGRhdGEgfHwgW10sXG4gICAgICAgIGtleTogYGxva2ktJHtsaXZlVGFyZ2V0LnJlZklkfWAsXG4gICAgICAgIHN0YXRlOiBMb2FkaW5nU3RhdGUuU3RyZWFtaW5nLFxuICAgICAgfSkpLFxuICAgICAgY2F0Y2hFcnJvcigoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoKCkgPT4gYExpdmUgdGFpbGluZyB3YXMgc3RvcHBlZCBkdWUgdG8gZm9sbG93aW5nIGVycm9yOiAke2Vyci5yZWFzb259YCk7XG4gICAgICB9KVxuICAgICk7XG4gIH07XG5cbiAgZ2V0UmFuZ2VTY29wZWRWYXJzKHJhbmdlOiBUaW1lUmFuZ2UgPSB0aGlzLmdldFRpbWVSYW5nZSgpKSB7XG4gICAgY29uc3QgbXNSYW5nZSA9IHJhbmdlLnRvLmRpZmYocmFuZ2UuZnJvbSk7XG4gICAgY29uc3Qgc1JhbmdlID0gTWF0aC5yb3VuZChtc1JhbmdlIC8gMTAwMCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIF9fcmFuZ2VfbXM6IHsgdGV4dDogbXNSYW5nZSwgdmFsdWU6IG1zUmFuZ2UgfSxcbiAgICAgIF9fcmFuZ2VfczogeyB0ZXh0OiBzUmFuZ2UsIHZhbHVlOiBzUmFuZ2UgfSxcbiAgICAgIF9fcmFuZ2U6IHsgdGV4dDogc1JhbmdlICsgJ3MnLCB2YWx1ZTogc1JhbmdlICsgJ3MnIH0sXG4gICAgfTtcbiAgfVxuXG4gIGludGVycG9sYXRlVmFyaWFibGVzSW5RdWVyaWVzKHF1ZXJpZXM6IExva2lRdWVyeVtdLCBzY29wZWRWYXJzOiBTY29wZWRWYXJzKTogTG9raVF1ZXJ5W10ge1xuICAgIGxldCBleHBhbmRlZFF1ZXJpZXMgPSBxdWVyaWVzO1xuICAgIGlmIChxdWVyaWVzICYmIHF1ZXJpZXMubGVuZ3RoKSB7XG4gICAgICBleHBhbmRlZFF1ZXJpZXMgPSBxdWVyaWVzLm1hcCgocXVlcnkpID0+ICh7XG4gICAgICAgIC4uLnF1ZXJ5LFxuICAgICAgICBkYXRhc291cmNlOiB0aGlzLmdldFJlZigpLFxuICAgICAgICBleHByOiB0aGlzLmFkZEFkSG9jRmlsdGVycyh0aGlzLnRlbXBsYXRlU3J2LnJlcGxhY2UocXVlcnkuZXhwciwgc2NvcGVkVmFycywgdGhpcy5pbnRlcnBvbGF0ZVF1ZXJ5RXhwcikpLFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHJldHVybiBleHBhbmRlZFF1ZXJpZXM7XG4gIH1cblxuICBnZXRRdWVyeURpc3BsYXlUZXh0KHF1ZXJ5OiBMb2tpUXVlcnkpIHtcbiAgICByZXR1cm4gcXVlcnkuZXhwcjtcbiAgfVxuXG4gIGdldFRpbWVSYW5nZSgpIHtcbiAgICByZXR1cm4gdGhpcy50aW1lU3J2LnRpbWVSYW5nZSgpO1xuICB9XG5cbiAgZ2V0VGltZVJhbmdlUGFyYW1zKCkge1xuICAgIGNvbnN0IHRpbWVSYW5nZSA9IHRoaXMuZ2V0VGltZVJhbmdlKCk7XG4gICAgcmV0dXJuIHsgc3RhcnQ6IHRpbWVSYW5nZS5mcm9tLnZhbHVlT2YoKSAqIE5TX0lOX01TLCBlbmQ6IHRpbWVSYW5nZS50by52YWx1ZU9mKCkgKiBOU19JTl9NUyB9O1xuICB9XG5cbiAgYXN5bmMgaW1wb3J0RnJvbUFic3RyYWN0UXVlcmllcyhhYnN0cmFjdFF1ZXJpZXM6IEFic3RyYWN0UXVlcnlbXSk6IFByb21pc2U8TG9raVF1ZXJ5W10+IHtcbiAgICBhd2FpdCB0aGlzLmxhbmd1YWdlUHJvdmlkZXIuc3RhcnQoKTtcbiAgICBjb25zdCBleGlzdGluZ0tleXMgPSB0aGlzLmxhbmd1YWdlUHJvdmlkZXIubGFiZWxLZXlzO1xuXG4gICAgaWYgKGV4aXN0aW5nS2V5cyAmJiBleGlzdGluZ0tleXMubGVuZ3RoKSB7XG4gICAgICBhYnN0cmFjdFF1ZXJpZXMgPSBhYnN0cmFjdFF1ZXJpZXMubWFwKChhYnN0cmFjdFF1ZXJ5KSA9PiB7XG4gICAgICAgIGFic3RyYWN0UXVlcnkubGFiZWxNYXRjaGVycyA9IGFic3RyYWN0UXVlcnkubGFiZWxNYXRjaGVycy5maWx0ZXIoKGxhYmVsTWF0Y2hlcikgPT4ge1xuICAgICAgICAgIHJldHVybiBleGlzdGluZ0tleXMuaW5jbHVkZXMobGFiZWxNYXRjaGVyLm5hbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0UXVlcnk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWJzdHJhY3RRdWVyaWVzLm1hcCgoYWJzdHJhY3RRdWVyeSkgPT4gdGhpcy5sYW5ndWFnZVByb3ZpZGVyLmltcG9ydEZyb21BYnN0cmFjdFF1ZXJ5KGFic3RyYWN0UXVlcnkpKTtcbiAgfVxuXG4gIGFzeW5jIGV4cG9ydFRvQWJzdHJhY3RRdWVyaWVzKHF1ZXJpZXM6IExva2lRdWVyeVtdKTogUHJvbWlzZTxBYnN0cmFjdFF1ZXJ5W10+IHtcbiAgICByZXR1cm4gcXVlcmllcy5tYXAoKHF1ZXJ5KSA9PiB0aGlzLmxhbmd1YWdlUHJvdmlkZXIuZXhwb3J0VG9BYnN0cmFjdFF1ZXJ5KHF1ZXJ5KSk7XG4gIH1cblxuICBhc3luYyBtZXRhZGF0YVJlcXVlc3QodXJsOiBzdHJpbmcsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj4sIG9wdGlvbnM/OiBQYXJ0aWFsPEJhY2tlbmRTcnZSZXF1ZXN0Pikge1xuICAgIC8vIHVybCBtdXN0IG5vdCBzdGFydCB3aXRoIGEgYC9gLCBvdGhlcndpc2UgdGhlIEFKQVgtcmVxdWVzdFxuICAgIC8vIGdvaW5nIGZyb20gdGhlIGJyb3dzZXIgd2lsbCBjb250YWluIGAvL2AsIHdoaWNoIGNhbiBjYXVzZSBwcm9ibGVtcy5cbiAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIG1ldGFkYXRhIHJlcXVlc3QgdXJsOiAke3VybH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmdldFJlc291cmNlKHVybCwgcGFyYW1zLCBvcHRpb25zKTtcbiAgICByZXR1cm4gcmVzLmRhdGEgfHwgW107XG4gIH1cblxuICAvLyBXZSBuZWVkIGEgc3BlY2lmaWMgbWV0YWRhdGEgbWV0aG9kIGZvciBzdGF0cyBlbmRwb2ludCBhcyBpdCBkb2VzIG5vdCByZXR1cm4gcmVzLmRhdGEsXG4gIC8vIGJ1dCBpdCByZXR1cm5zIHN0YXRzIGRpcmVjdGx5IGluIHJlcyBvYmplY3QuXG4gIGFzeW5jIHN0YXRzTWV0YWRhdGFSZXF1ZXN0KFxuICAgIHVybDogc3RyaW5nLFxuICAgIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj4sXG4gICAgb3B0aW9ucz86IFBhcnRpYWw8QmFja2VuZFNydlJlcXVlc3Q+XG4gICk6IFByb21pc2U8UXVlcnlTdGF0cz4ge1xuICAgIGlmICh1cmwuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgbWV0YWRhdGEgcmVxdWVzdCB1cmw6ICR7dXJsfWApO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFJlc291cmNlKHVybCwgcGFyYW1zLCBvcHRpb25zKTtcbiAgfVxuXG4gIGFzeW5jIGdldFF1ZXJ5U3RhdHMocXVlcnk6IHN0cmluZyk6IFByb21pc2U8UXVlcnlTdGF0cyB8IHVuZGVmaW5lZD4ge1xuICAgIC8vIGlmIHF1ZXJ5IGlzIGludmFsaWQsIGNsZWFyIHN0YXRzLCBhbmQgZG9uJ3QgcmVxdWVzdFxuICAgIGlmIChpc1F1ZXJ5V2l0aEVycm9yKHRoaXMuaW50ZXJwb2xhdGVTdHJpbmcocXVlcnksIHBsYWNlSG9sZGVyU2NvcGVkVmFycykpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gdGhpcy5nZXRUaW1lUmFuZ2VQYXJhbXMoKTtcbiAgICBjb25zdCBsYWJlbE1hdGNoZXJzID0gZ2V0U3RyZWFtU2VsZWN0b3JzRnJvbVF1ZXJ5KHF1ZXJ5KTtcblxuICAgIGxldCBzdGF0c0ZvckFsbDogUXVlcnlTdGF0cyA9IHsgc3RyZWFtczogMCwgY2h1bmtzOiAwLCBieXRlczogMCwgZW50cmllczogMCB9O1xuXG4gICAgZm9yIChjb25zdCBsYWJlbE1hdGNoZXIgb2YgbGFiZWxNYXRjaGVycykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuc3RhdHNNZXRhZGF0YVJlcXVlc3QoXG4gICAgICAgICAgJ2luZGV4L3N0YXRzJyxcbiAgICAgICAgICB7IHF1ZXJ5OiBsYWJlbE1hdGNoZXIsIHN0YXJ0LCBlbmQgfSxcbiAgICAgICAgICB7IHNob3dFcnJvckFsZXJ0OiBmYWxzZSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgc3RhdHNGb3JBbGwgPSB7XG4gICAgICAgICAgc3RyZWFtczogc3RhdHNGb3JBbGwuc3RyZWFtcyArIGRhdGEuc3RyZWFtcyxcbiAgICAgICAgICBjaHVua3M6IHN0YXRzRm9yQWxsLmNodW5rcyArIGRhdGEuY2h1bmtzLFxuICAgICAgICAgIGJ5dGVzOiBzdGF0c0ZvckFsbC5ieXRlcyArIGRhdGEuYnl0ZXMsXG4gICAgICAgICAgZW50cmllczogc3RhdHNGb3JBbGwuZW50cmllcyArIGRhdGEuZW50cmllcyxcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YXRzRm9yQWxsO1xuICB9XG5cbiAgYXN5bmMgbWV0cmljRmluZFF1ZXJ5KHF1ZXJ5OiBMb2tpVmFyaWFibGVRdWVyeSB8IHN0cmluZykge1xuICAgIGlmICghcXVlcnkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcXVlcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBpbnRlcnBvbGF0ZWQgPSB0aGlzLmludGVycG9sYXRlU3RyaW5nKHF1ZXJ5KTtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxlZ2FjeVByb2Nlc3NNZXRyaWNGaW5kUXVlcnkoaW50ZXJwb2xhdGVkKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRRdWVyeSA9IHtcbiAgICAgIC4uLnF1ZXJ5LFxuICAgICAgbGFiZWw6IHRoaXMuaW50ZXJwb2xhdGVTdHJpbmcocXVlcnkubGFiZWwgfHwgJycpLFxuICAgICAgc3RyZWFtOiB0aGlzLmludGVycG9sYXRlU3RyaW5nKHF1ZXJ5LnN0cmVhbSB8fCAnJyksXG4gICAgfTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc3NNZXRyaWNGaW5kUXVlcnkoaW50ZXJwb2xhdGVkUXVlcnkpO1xuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc01ldHJpY0ZpbmRRdWVyeShxdWVyeTogTG9raVZhcmlhYmxlUXVlcnkpIHtcbiAgICBpZiAocXVlcnkudHlwZSA9PT0gTG9raVZhcmlhYmxlUXVlcnlUeXBlLkxhYmVsTmFtZXMpIHtcbiAgICAgIHJldHVybiB0aGlzLmxhYmVsTmFtZXNRdWVyeSgpO1xuICAgIH1cblxuICAgIGlmICghcXVlcnkubGFiZWwpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIHN0cmVhbSBzZWxlY3RvciwgdXNlIC9zZXJpZXMgZW5kcG9pbnRcbiAgICBpZiAocXVlcnkuc3RyZWFtKSB7XG4gICAgICByZXR1cm4gdGhpcy5sYWJlbFZhbHVlc1Nlcmllc1F1ZXJ5KHF1ZXJ5LnN0cmVhbSwgcXVlcnkubGFiZWwpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmxhYmVsVmFsdWVzUXVlcnkocXVlcnkubGFiZWwpO1xuICB9XG5cbiAgYXN5bmMgbGVnYWN5UHJvY2Vzc01ldHJpY0ZpbmRRdWVyeShxdWVyeTogc3RyaW5nKSB7XG4gICAgY29uc3QgbGFiZWxOYW1lcyA9IHF1ZXJ5Lm1hdGNoKGxhYmVsTmFtZXNSZWdleCk7XG4gICAgaWYgKGxhYmVsTmFtZXMpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxhYmVsTmFtZXNRdWVyeSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGxhYmVsVmFsdWVzID0gcXVlcnkubWF0Y2gobGFiZWxWYWx1ZXNSZWdleCk7XG4gICAgaWYgKGxhYmVsVmFsdWVzKSB7XG4gICAgICAvLyBJZiB3ZSBoYXZlIHN0cmVhbSBzZWxlY3RvciwgdXNlIC9zZXJpZXMgZW5kcG9pbnRcbiAgICAgIGlmIChsYWJlbFZhbHVlc1sxXSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYWJlbFZhbHVlc1Nlcmllc1F1ZXJ5KGxhYmVsVmFsdWVzWzFdLCBsYWJlbFZhbHVlc1syXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYWJlbFZhbHVlc1F1ZXJ5KGxhYmVsVmFsdWVzWzJdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgfVxuXG4gIGFzeW5jIGxhYmVsTmFtZXNRdWVyeSgpIHtcbiAgICBjb25zdCB1cmwgPSAnbGFiZWxzJztcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLmdldFRpbWVSYW5nZVBhcmFtcygpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWV0YWRhdGFSZXF1ZXN0KHVybCwgcGFyYW1zKTtcbiAgICByZXR1cm4gcmVzdWx0Lm1hcCgodmFsdWU6IHN0cmluZykgPT4gKHsgdGV4dDogdmFsdWUgfSkpO1xuICB9XG5cbiAgYXN5bmMgbGFiZWxWYWx1ZXNRdWVyeShsYWJlbDogc3RyaW5nKSB7XG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5nZXRUaW1lUmFuZ2VQYXJhbXMoKTtcbiAgICBjb25zdCB1cmwgPSBgbGFiZWwvJHtsYWJlbH0vdmFsdWVzYDtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm1ldGFkYXRhUmVxdWVzdCh1cmwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdC5tYXAoKHZhbHVlOiBzdHJpbmcpID0+ICh7IHRleHQ6IHZhbHVlIH0pKTtcbiAgfVxuXG4gIGFzeW5jIGxhYmVsVmFsdWVzU2VyaWVzUXVlcnkoZXhwcjogc3RyaW5nLCBsYWJlbDogc3RyaW5nKSB7XG4gICAgY29uc3QgdGltZVBhcmFtcyA9IHRoaXMuZ2V0VGltZVJhbmdlUGFyYW1zKCk7XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgLi4udGltZVBhcmFtcyxcbiAgICAgICdtYXRjaFtdJzogZXhwcixcbiAgICB9O1xuICAgIGNvbnN0IHVybCA9ICdzZXJpZXMnO1xuICAgIGNvbnN0IHN0cmVhbXMgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tZXRhZGF0YVJlcXVlc3QodXJsLCBwYXJhbXMpO1xuICAgIHJlc3VsdC5mb3JFYWNoKChzdHJlYW06IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pID0+IHtcbiAgICAgIGlmIChzdHJlYW1bbGFiZWxdKSB7XG4gICAgICAgIHN0cmVhbXMuYWRkKHsgdGV4dDogc3RyZWFtW2xhYmVsXSB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBcnJheS5mcm9tKHN0cmVhbXMpO1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YVNhbXBsZXMocXVlcnk6IExva2lRdWVyeSk6IFByb21pc2U8RGF0YUZyYW1lW10+IHtcbiAgICAvLyBDdXJyZW50bHkgd29ya3Mgb25seSBmb3IgbG9ncyBzYW1wbGVcbiAgICBpZiAoIWlzTG9nc1F1ZXJ5KHF1ZXJ5LmV4cHIpIHx8IGlzUXVlcnlXaXRoRXJyb3IodGhpcy5pbnRlcnBvbGF0ZVN0cmluZyhxdWVyeS5leHByLCBwbGFjZUhvbGRlclNjb3BlZFZhcnMpKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGxva2lMb2dzUXVlcnk6IExva2lRdWVyeSA9IHtcbiAgICAgIGV4cHI6IHF1ZXJ5LmV4cHIsXG4gICAgICBxdWVyeVR5cGU6IExva2lRdWVyeVR5cGUuUmFuZ2UsXG4gICAgICByZWZJZDogUkVGX0lEX0RBVEFfU0FNUExFUyxcbiAgICAgIC8vIEZvciBzYW1wbGVzIHdlIGxpbWl0IHRoZSByZXF1ZXN0IHRvIDEwIGxpbmVzLCBzbyBxdWVyaWVzIGFyZSBzbWFsbCBhbmQgZmFzdFxuICAgICAgbWF4TGluZXM6IDEwLFxuICAgIH07XG5cbiAgICBjb25zdCB0aW1lUmFuZ2UgPSB0aGlzLmdldFRpbWVSYW5nZSgpO1xuICAgIGNvbnN0IHJlcXVlc3QgPSBtYWtlUmVxdWVzdChsb2tpTG9nc1F1ZXJ5LCB0aW1lUmFuZ2UsIENvcmVBcHAuVW5rbm93biwgUkVGX0lEX0RBVEFfU0FNUExFUywgdHJ1ZSk7XG4gICAgcmV0dXJuIGF3YWl0IGxhc3RWYWx1ZUZyb20odGhpcy5xdWVyeShyZXF1ZXN0KS5waXBlKHN3aXRjaE1hcCgocmVzKSA9PiBvZihyZXMuZGF0YSkpKSk7XG4gIH1cblxuICAvLyBCeSBpbXBsZW1lbnRpbmcgZ2V0VGFnS2V5cyBhbmQgZ2V0VGFnVmFsdWVzIHdlIGFkZCBhZC1ob2MgZmlsdGVycyBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGdldFRhZ0tleXMoKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMubGFiZWxOYW1lc1F1ZXJ5KCk7XG4gIH1cblxuICBhc3luYyBnZXRUYWdWYWx1ZXMob3B0aW9uczogYW55ID0ge30pIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5sYWJlbFZhbHVlc1F1ZXJ5KG9wdGlvbnMua2V5KTtcbiAgfVxuXG4gIGludGVycG9sYXRlUXVlcnlFeHByKHZhbHVlOiBhbnksIHZhcmlhYmxlOiBhbnkpIHtcbiAgICAvLyBpZiBubyBtdWx0aSBvciBpbmNsdWRlIGFsbCBkbyBub3QgcmVnZXhFc2NhcGVcbiAgICBpZiAoIXZhcmlhYmxlLm11bHRpICYmICF2YXJpYWJsZS5pbmNsdWRlQWxsKSB7XG4gICAgICByZXR1cm4gbG9raVJlZ3VsYXJFc2NhcGUodmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gbG9raVNwZWNpYWxSZWdleEVzY2FwZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXNjYXBlZFZhbHVlcyA9IGxvZGFzaE1hcCh2YWx1ZSwgbG9raVNwZWNpYWxSZWdleEVzY2FwZSk7XG4gICAgcmV0dXJuIGVzY2FwZWRWYWx1ZXMuam9pbignfCcpO1xuICB9XG5cbiAgdG9nZ2xlUXVlcnlGaWx0ZXIocXVlcnk6IExva2lRdWVyeSwgZmlsdGVyOiBUb2dnbGVGaWx0ZXJBY3Rpb24pOiBMb2tpUXVlcnkge1xuICAgIGxldCBleHByZXNzaW9uID0gcXVlcnkuZXhwciA/PyAnJztcbiAgICBzd2l0Y2ggKGZpbHRlci50eXBlKSB7XG4gICAgICBjYXNlICdGSUxURVJfRk9SJzoge1xuICAgICAgICBpZiAoZmlsdGVyLm9wdGlvbnM/LmtleSAmJiBmaWx0ZXIub3B0aW9ucz8udmFsdWUpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGVzY2FwZUxhYmVsVmFsdWVJblNlbGVjdG9yKGZpbHRlci5vcHRpb25zLnZhbHVlKTtcblxuICAgICAgICAgIC8vIFRoaXMgZ2l2ZXMgdGhlIHVzZXIgdGhlIGFiaWxpdHkgdG8gdG9nZ2xlIGEgZmlsdGVyIG9uIGFuZCBvZmYuXG4gICAgICAgICAgZXhwcmVzc2lvbiA9IHF1ZXJ5SGFzRmlsdGVyKGV4cHJlc3Npb24sIGZpbHRlci5vcHRpb25zLmtleSwgJz0nLCB2YWx1ZSlcbiAgICAgICAgICAgID8gcmVtb3ZlTGFiZWxGcm9tUXVlcnkoZXhwcmVzc2lvbiwgZmlsdGVyLm9wdGlvbnMua2V5LCAnPScsIHZhbHVlKVxuICAgICAgICAgICAgOiBhZGRMYWJlbFRvUXVlcnkoZXhwcmVzc2lvbiwgZmlsdGVyLm9wdGlvbnMua2V5LCAnPScsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ0ZJTFRFUl9PVVQnOiB7XG4gICAgICAgIGlmIChmaWx0ZXIub3B0aW9ucz8ua2V5ICYmIGZpbHRlci5vcHRpb25zPy52YWx1ZSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gZXNjYXBlTGFiZWxWYWx1ZUluU2VsZWN0b3IoZmlsdGVyLm9wdGlvbnMudmFsdWUpO1xuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogSWYgdGhlcmUgaXMgYSBmaWx0ZXIgd2l0aCB0aGUgc2FtZSBrZXkgYW5kIHZhbHVlLCByZW1vdmUgaXQuXG4gICAgICAgICAgICogVGhpcyBwcmV2ZW50cyB0aGUgdXNlciBmcm9tIHNlZWluZyBubyBjaGFuZ2VzIGluIHRoZSBxdWVyeSB3aGVuIHRoZXkgYXBwbHlcbiAgICAgICAgICAgKiB0aGlzIGZpbHRlci5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAocXVlcnlIYXNGaWx0ZXIoZXhwcmVzc2lvbiwgZmlsdGVyLm9wdGlvbnMua2V5LCAnPScsIHZhbHVlKSkge1xuICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHJlbW92ZUxhYmVsRnJvbVF1ZXJ5KGV4cHJlc3Npb24sIGZpbHRlci5vcHRpb25zLmtleSwgJz0nLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZXhwcmVzc2lvbiA9IGFkZExhYmVsVG9RdWVyeShleHByZXNzaW9uLCBmaWx0ZXIub3B0aW9ucy5rZXksICchPScsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5xdWVyeSwgZXhwcjogZXhwcmVzc2lvbiB9O1xuICB9XG5cbiAgcXVlcnlIYXNGaWx0ZXIocXVlcnk6IExva2lRdWVyeSwgZmlsdGVyOiBRdWVyeUZpbHRlck9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBsZXQgZXhwcmVzc2lvbiA9IHF1ZXJ5LmV4cHIgPz8gJyc7XG4gICAgcmV0dXJuIHF1ZXJ5SGFzRmlsdGVyKGV4cHJlc3Npb24sIGZpbHRlci5rZXksICc9JywgZmlsdGVyLnZhbHVlKTtcbiAgfVxuXG4gIG1vZGlmeVF1ZXJ5KHF1ZXJ5OiBMb2tpUXVlcnksIGFjdGlvbjogUXVlcnlGaXhBY3Rpb24pOiBMb2tpUXVlcnkge1xuICAgIGxldCBleHByZXNzaW9uID0gcXVlcnkuZXhwciA/PyAnJztcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICBjYXNlICdBRERfRklMVEVSJzoge1xuICAgICAgICBpZiAoYWN0aW9uLm9wdGlvbnM/LmtleSAmJiBhY3Rpb24ub3B0aW9ucz8udmFsdWUpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGVzY2FwZUxhYmVsVmFsdWVJblNlbGVjdG9yKGFjdGlvbi5vcHRpb25zLnZhbHVlKTtcbiAgICAgICAgICBleHByZXNzaW9uID0gYWRkTGFiZWxUb1F1ZXJ5KGV4cHJlc3Npb24sIGFjdGlvbi5vcHRpb25zLmtleSwgJz0nLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdBRERfRklMVEVSX09VVCc6IHtcbiAgICAgICAgaWYgKGFjdGlvbi5vcHRpb25zPy5rZXkgJiYgYWN0aW9uLm9wdGlvbnM/LnZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBlc2NhcGVMYWJlbFZhbHVlSW5TZWxlY3RvcihhY3Rpb24ub3B0aW9ucy52YWx1ZSk7XG4gICAgICAgICAgZXhwcmVzc2lvbiA9IGFkZExhYmVsVG9RdWVyeShleHByZXNzaW9uLCBhY3Rpb24ub3B0aW9ucy5rZXksICchPScsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ0FERF9MT0dGTVRfUEFSU0VSJzoge1xuICAgICAgICBleHByZXNzaW9uID0gYWRkUGFyc2VyVG9RdWVyeShleHByZXNzaW9uLCAnbG9nZm10Jyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnQUREX0pTT05fUEFSU0VSJzoge1xuICAgICAgICBleHByZXNzaW9uID0gYWRkUGFyc2VyVG9RdWVyeShleHByZXNzaW9uLCAnanNvbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ0FERF9VTlBBQ0tfUEFSU0VSJzoge1xuICAgICAgICBleHByZXNzaW9uID0gYWRkUGFyc2VyVG9RdWVyeShleHByZXNzaW9uLCAndW5wYWNrJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnQUREX05PX1BJUEVMSU5FX0VSUk9SJzoge1xuICAgICAgICBleHByZXNzaW9uID0gYWRkTm9QaXBlbGluZUVycm9yVG9RdWVyeShleHByZXNzaW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdBRERfTEVWRUxfTEFCRUxfRk9STUFUJzoge1xuICAgICAgICBpZiAoYWN0aW9uLm9wdGlvbnM/Lm9yaWdpbmFsTGFiZWwgJiYgYWN0aW9uLm9wdGlvbnM/LnJlbmFtZVRvKSB7XG4gICAgICAgICAgZXhwcmVzc2lvbiA9IGFkZExhYmVsRm9ybWF0VG9RdWVyeShleHByZXNzaW9uLCB7XG4gICAgICAgICAgICByZW5hbWVUbzogYWN0aW9uLm9wdGlvbnMucmVuYW1lVG8sXG4gICAgICAgICAgICBvcmlnaW5hbExhYmVsOiBhY3Rpb24ub3B0aW9ucy5vcmlnaW5hbExhYmVsLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnQUREX0xBQkVMX0ZJTFRFUic6IHtcbiAgICAgICAgY29uc3QgcGFyc2VyUG9zaXRpb25zID0gZ2V0UGFyc2VyUG9zaXRpb25zKHF1ZXJ5LmV4cHIpO1xuICAgICAgICBjb25zdCBsYWJlbEZpbHRlclBvc2l0aW9ucyA9IGdldExhYmVsRmlsdGVyUG9zaXRpb25zKHF1ZXJ5LmV4cHIpO1xuICAgICAgICBjb25zdCBsYXN0UG9zaXRpb24gPSBmaW5kTGFzdFBvc2l0aW9uKFsuLi5wYXJzZXJQb3NpdGlvbnMsIC4uLmxhYmVsRmlsdGVyUG9zaXRpb25zXSk7XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHRvTGFiZWxGaWx0ZXIoJycsICcnLCAnPScpO1xuICAgICAgICBleHByZXNzaW9uID0gYWRkRmlsdGVyQXNMYWJlbEZpbHRlcihleHByZXNzaW9uLCBbbGFzdFBvc2l0aW9uXSwgZmlsdGVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdBRERfTElORV9GSUxURVInOiB7XG4gICAgICAgIGV4cHJlc3Npb24gPSBhZGRMaW5lRmlsdGVyKGV4cHJlc3Npb24pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5xdWVyeSwgZXhwcjogZXhwcmVzc2lvbiB9O1xuICB9XG5cbiAgZ2V0VGltZShkYXRlOiBzdHJpbmcgfCBEYXRlVGltZSwgcm91bmRVcDogYm9vbGVhbikge1xuICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRhdGUgPSBkYXRlTWF0aC5wYXJzZShkYXRlLCByb3VuZFVwKSE7XG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGguY2VpbChkYXRlLnZhbHVlT2YoKSAqIDFlNik7XG4gIH1cblxuICBnZXRMb2dSb3dDb250ZXh0ID0gYXN5bmMgKFxuICAgIHJvdzogTG9nUm93TW9kZWwsXG4gICAgb3B0aW9ucz86IExvZ1Jvd0NvbnRleHRPcHRpb25zLFxuICAgIG9yaWdRdWVyeT86IERhdGFRdWVyeVxuICApOiBQcm9taXNlPHsgZGF0YTogRGF0YUZyYW1lW10gfT4gPT4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmxvZ0NvbnRleHRQcm92aWRlci5nZXRMb2dSb3dDb250ZXh0KHJvdywgb3B0aW9ucywgZ2V0TG9raVF1ZXJ5RnJvbURhdGFRdWVyeShvcmlnUXVlcnkpKTtcbiAgfTtcblxuICBnZXRMb2dSb3dDb250ZXh0UXVlcnkgPSBhc3luYyAoXG4gICAgcm93OiBMb2dSb3dNb2RlbCxcbiAgICBvcHRpb25zPzogTG9nUm93Q29udGV4dE9wdGlvbnMsXG4gICAgb3JpZ1F1ZXJ5PzogRGF0YVF1ZXJ5XG4gICk6IFByb21pc2U8RGF0YVF1ZXJ5PiA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMubG9nQ29udGV4dFByb3ZpZGVyLmdldExvZ1Jvd0NvbnRleHRRdWVyeShyb3csIG9wdGlvbnMsIGdldExva2lRdWVyeUZyb21EYXRhUXVlcnkob3JpZ1F1ZXJ5KSk7XG4gIH07XG5cbiAgZ2V0TG9nUm93Q29udGV4dFVpKHJvdzogTG9nUm93TW9kZWwsIHJ1bkNvbnRleHRRdWVyeTogKCkgPT4gdm9pZCwgb3JpZ1F1ZXJ5OiBEYXRhUXVlcnkpOiBSZWFjdC5SZWFjdE5vZGUge1xuICAgIHJldHVybiB0aGlzLmxvZ0NvbnRleHRQcm92aWRlci5nZXRMb2dSb3dDb250ZXh0VWkocm93LCBydW5Db250ZXh0UXVlcnksIGdldExva2lRdWVyeUZyb21EYXRhUXVlcnkob3JpZ1F1ZXJ5KSk7XG4gIH1cblxuICB0ZXN0RGF0YXNvdXJjZSgpOiBQcm9taXNlPHsgc3RhdHVzOiBzdHJpbmc7IG1lc3NhZ2U6IHN0cmluZyB9PiB7XG4gICAgLy8gQ29uc2lkZXIgb25seSBsYXN0IDEwIG1pbnV0ZXMgb3RoZXJ3aXNlIHJlcXVlc3QgdGFrZXMgdG9vIGxvbmdcbiAgICBjb25zdCBub3dNcyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgc3RhcnQ6IChub3dNcyAtIDEwICogNjAgKiAxMDAwKSAqIE5TX0lOX01TLFxuICAgICAgZW5kOiBub3dNcyAqIE5TX0lOX01TLFxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5tZXRhZGF0YVJlcXVlc3QoJ2xhYmVscycsIHBhcmFtcykudGhlbihcbiAgICAgICh2YWx1ZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5sZW5ndGggPiAwXG4gICAgICAgICAgPyB7IHN0YXR1czogJ3N1Y2Nlc3MnLCBtZXNzYWdlOiAnRGF0YSBzb3VyY2Ugc3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZC4nIH1cbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgICAgICdEYXRhIHNvdXJjZSBjb25uZWN0ZWQsIGJ1dCBubyBsYWJlbHMgd2VyZSByZWNlaXZlZC4gVmVyaWZ5IHRoYXQgTG9raSBhbmQgUHJvbXRhaWwgYXJlIGNvcnJlY3RseSBjb25maWd1cmVkLicsXG4gICAgICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIChlcnIpID0+IHtcbiAgICAgICAgLy8gd2UgZGlkIGEgcmVzb3VyY2UtY2FsbCB0aGF0IGZhaWxlZC5cbiAgICAgICAgLy8gdGhlIG9ubHkgaW5mbyB3ZSBoYXZlLCBpZiBleGlzdHMsIGlzIGVyci5kYXRhLm1lc3NhZ2VcbiAgICAgICAgLy8gKHdoZW4gaW4gZGV2ZWxvcG1lbnQtbW9kZSwgZXJyLmRhdGEuZXJyb3IgZXhpc3RzIHRvbywgYnV0IG5vdCBpbiBwcm9kdWN0aW9uLW1vZGUpXG4gICAgICAgIC8vIHRoaW5ncyBsaWtlIGVyci5zdGF0dXMgJiBlcnIuc3RhdHVzVGV4dCBkb2VzIG5vdCBoZWxwLFxuICAgICAgICAvLyBiZWNhdXNlIHRob3NlIHdpbGwgb25seSBkZXNjcmliZSBob3cgdGhlIHJlcXVlc3QgYmV0d2VlbiBicm93c2VyPD5zZXJ2ZXIgZmFpbGVkXG4gICAgICAgIGNvbnN0IGluZm86IHN0cmluZyA9IGVycj8uZGF0YT8ubWVzc2FnZSA/PyAnJztcbiAgICAgICAgY29uc3QgaW5mb0luUGFyZW50aGVzZXMgPSBpbmZvICE9PSAnJyA/IGAgKCR7aW5mb30pYCA6ICcnO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYFVuYWJsZSB0byBjb25uZWN0IHdpdGggTG9raSR7aW5mb0luUGFyZW50aGVzZXN9LiBQbGVhc2UgY2hlY2sgdGhlIHNlcnZlciBsb2dzIGZvciBtb3JlIGRldGFpbHMuYDtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiBtZXNzYWdlIH07XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGFubm90YXRpb25RdWVyeShvcHRpb25zOiBhbnkpOiBQcm9taXNlPEFubm90YXRpb25FdmVudFtdPiB7XG4gICAgY29uc3QgeyBleHByLCBtYXhMaW5lcywgaW5zdGFudCwgdGFnS2V5cyA9ICcnLCB0aXRsZUZvcm1hdCA9ICcnLCB0ZXh0Rm9ybWF0ID0gJycgfSA9IG9wdGlvbnMuYW5ub3RhdGlvbjtcblxuICAgIGlmICghZXhwcikge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGlkID0gYCR7UkVGX0lEX1NUQVJURVJfQU5OT1RBVElPTn0ke29wdGlvbnMuYW5ub3RhdGlvbi5uYW1lfWA7XG5cbiAgICBjb25zdCBxdWVyeTogTG9raVF1ZXJ5ID0ge1xuICAgICAgcmVmSWQ6IGlkLFxuICAgICAgZXhwcixcbiAgICAgIG1heExpbmVzLFxuICAgICAgaW5zdGFudCxcbiAgICAgIHF1ZXJ5VHlwZTogaW5zdGFudCA/IExva2lRdWVyeVR5cGUuSW5zdGFudCA6IExva2lRdWVyeVR5cGUuUmFuZ2UsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBtYWtlUmVxdWVzdChxdWVyeSwgb3B0aW9ucy5yYW5nZSwgQ29yZUFwcC5EYXNoYm9hcmQsIGlkKTtcblxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgbGFzdFZhbHVlRnJvbSh0aGlzLnF1ZXJ5KHJlcXVlc3QpKTtcblxuICAgIGNvbnN0IGFubm90YXRpb25zOiBBbm5vdGF0aW9uRXZlbnRbXSA9IFtdO1xuICAgIGNvbnN0IHNwbGl0S2V5czogc3RyaW5nW10gPSB0YWdLZXlzLnNwbGl0KCcsJykuZmlsdGVyKCh2OiBzdHJpbmcpID0+IHYgIT09ICcnKTtcblxuICAgIGZvciAoY29uc3QgZnJhbWUgb2YgZGF0YSkge1xuICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhRnJhbWVWaWV3PHsgVGltZTogc3RyaW5nOyBMaW5lOiBzdHJpbmc7IGxhYmVsczogTGFiZWxzIH0+KGZyYW1lKTtcblxuICAgICAgdmlldy5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgICAgY29uc3QgeyBsYWJlbHMgfSA9IHJvdztcblxuICAgICAgICBjb25zdCBtYXliZUR1cGxpY2F0ZWRUYWdzID0gT2JqZWN0LmVudHJpZXMobGFiZWxzKVxuICAgICAgICAgIC5tYXAoKFtrZXksIHZhbF0pID0+IFtrZXksIHZhbC50cmltKCldKSAvLyB0cmltIGFsbCBsYWJlbC12YWx1ZXNcbiAgICAgICAgICAuZmlsdGVyKChba2V5LCB2YWxdKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsID09PSAnJykge1xuICAgICAgICAgICAgICAvLyByZW1vdmUgZW1wdHlcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiB0YWdzIGFyZSBzcGVjaWZpZWQsIHJlbW92ZSBsYWJlbCBpZiBkb2VzIG5vdCBtYXRjaCB0YWdzXG4gICAgICAgICAgICBpZiAoc3BsaXRLZXlzLmxlbmd0aCAmJiAhc3BsaXRLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5tYXAoKFtrZXksIHZhbF0pID0+IHZhbCk7IC8vIGtlZXAgb25seSB0aGUgbGFiZWwtdmFsdWVcblxuICAgICAgICAvLyByZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICBjb25zdCB0YWdzID0gQXJyYXkuZnJvbShuZXcgU2V0KG1heWJlRHVwbGljYXRlZFRhZ3MpKTtcblxuICAgICAgICBhbm5vdGF0aW9ucy5wdXNoKHtcbiAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShyb3cuVGltZSkudmFsdWVPZigpLFxuICAgICAgICAgIHRpdGxlOiByZW5kZXJMZWdlbmRGb3JtYXQodGl0bGVGb3JtYXQsIGxhYmVscyksXG4gICAgICAgICAgdGV4dDogcmVuZGVyTGVnZW5kRm9ybWF0KHRleHRGb3JtYXQsIGxhYmVscykgfHwgcm93LkxpbmUsXG4gICAgICAgICAgdGFncyxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5ub3RhdGlvbnM7XG4gIH1cblxuICBzaG93Q29udGV4dFRvZ2dsZShyb3c/OiBMb2dSb3dNb2RlbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJvY2Vzc0Vycm9yKGVycjogRmV0Y2hFcnJvciwgdGFyZ2V0OiBMb2tpUXVlcnkpIHtcbiAgICBsZXQgZXJyb3I6IERhdGFRdWVyeUVycm9yID0gY2xvbmVEZWVwKGVycik7XG4gICAgZXJyb3IucmVmSWQgPSB0YXJnZXQucmVmSWQ7XG5cbiAgICBpZiAoZXJyb3IuZGF0YSAmJiBlcnIuZGF0YS5tZXNzYWdlLmluY2x1ZGVzKCdlc2NhcGUnKSAmJiB0YXJnZXQuZXhwci5pbmNsdWRlcygnXFxcXCcpKSB7XG4gICAgICBlcnJvci5kYXRhLm1lc3NhZ2UgPSBgRXJyb3I6ICR7ZXJyLmRhdGEubWVzc2FnZX0uIE1ha2Ugc3VyZSB0aGF0IGFsbCBzcGVjaWFsIGNoYXJhY3RlcnMgYXJlIGVzY2FwZWQgd2l0aCBcXFxcLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBlc2NhcGluZyBvZiBzcGVjaWFsIGNoYXJhY3RlcnMgdmlzaXQgTG9nUUwgZG9jdW1lbnRhdGlvbiBhdCBodHRwczovL2dyYWZhbmEuY29tL2RvY3MvbG9raS9sYXRlc3QvbG9ncWwvLmA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgYWRkQWRIb2NGaWx0ZXJzKHF1ZXJ5RXhwcjogc3RyaW5nKSB7XG4gICAgY29uc3QgYWRob2NGaWx0ZXJzID0gdGhpcy50ZW1wbGF0ZVNydi5nZXRBZGhvY0ZpbHRlcnModGhpcy5uYW1lKTtcbiAgICBsZXQgZXhwciA9IHJlcGxhY2VWYXJpYWJsZXMocXVlcnlFeHByKTtcblxuICAgIGV4cHIgPSBhZGhvY0ZpbHRlcnMucmVkdWNlKChhY2M6IHN0cmluZywgZmlsdGVyOiB7IGtleTogc3RyaW5nOyBvcGVyYXRvcjogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0pID0+IHtcbiAgICAgIGNvbnN0IHsga2V5LCBvcGVyYXRvciB9ID0gZmlsdGVyO1xuICAgICAgbGV0IHsgdmFsdWUgfSA9IGZpbHRlcjtcbiAgICAgIGlmIChpc1JlZ2V4U2VsZWN0b3Iob3BlcmF0b3IpKSB7XG4gICAgICAgIC8vIEFkaG9jIGZpbHRlcnMgZG9uJ3Qgc3VwcG9ydCBtdWx0aXNlbGVjdCwgdGhlcmVmb3JlIGlmIHVzZXIgc2VsZWN0cyByZWdleCBvcGVyYXRvclxuICAgICAgICAvLyB3ZSBhcmUgZ29pbmcgdG8gY29uc2lkZXIgdmFsdWUgdG8gYmUgcmVnZXggZmlsdGVyIGFuZCB1c2UgbG9raVJlZ3VsYXJFc2NhcGVcbiAgICAgICAgLy8gdGhhdCBkb2VzIG5vdCBlc2NhcGUgcmVnZXggc3BlY2lhbCBjaGFyYWN0ZXJzIChlLmcuIC4qdGVzdC4qID0+IC4qdGVzdC4qKVxuICAgICAgICB2YWx1ZSA9IGxva2lSZWd1bGFyRXNjYXBlKHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2Ugd2FudCB0byBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHZhbHVlXG4gICAgICAgIHZhbHVlID0gZXNjYXBlTGFiZWxWYWx1ZUluU2VsZWN0b3IodmFsdWUsIG9wZXJhdG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhZGRMYWJlbFRvUXVlcnkoYWNjLCBrZXksIG9wZXJhdG9yLCB2YWx1ZSk7XG4gICAgfSwgZXhwcik7XG5cbiAgICByZXR1cm4gcmV0dXJuVmFyaWFibGVzKGV4cHIpO1xuICB9XG5cbiAgLy8gVXNlZCB3aGVuIHJ1bm5pbmcgcXVlcmllcyB0aHJvdWdoIGJhY2tlbmRcbiAgZmlsdGVyUXVlcnkocXVlcnk6IExva2lRdWVyeSk6IGJvb2xlYW4ge1xuICAgIGlmIChxdWVyeS5oaWRlIHx8IHF1ZXJ5LmV4cHIgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gVXNlZCB3aGVuIHJ1bm5pbmcgcXVlcmllcyB0aHJvdWdoIGJhY2tlbmRcbiAgYXBwbHlUZW1wbGF0ZVZhcmlhYmxlcyh0YXJnZXQ6IExva2lRdWVyeSwgc2NvcGVkVmFyczogU2NvcGVkVmFycyk6IExva2lRdWVyeSB7XG4gICAgLy8gV2Ugd2FudCB0byBpbnRlcnBvbGF0ZSB0aGVzZSB2YXJpYWJsZXMgb24gYmFja2VuZCBiZWNhdXNlIHdlIHN1cHBvcnQgdXNpbmcgdGhlbSBpblxuICAgIC8vIGFsZXJ0aW5nL01MIHF1ZXJpZXMgYW5kIHdlIHdhbnQgdG8gaGF2ZSBjb25zaXN0ZW50IGludGVycG9sYXRpb24gZm9yIGFsbCBxdWVyaWVzXG4gICAgY29uc3QgeyBfX2ludGVydmFsLCBfX2ludGVydmFsX21zLCBfX3JhbmdlLCBfX3JhbmdlX3MsIF9fcmFuZ2VfbXMsIC4uLnJlc3QgfSA9IHNjb3BlZFZhcnMgfHwge307XG5cbiAgICBjb25zdCBleHByV2l0aEFkSG9jID0gdGhpcy5hZGRBZEhvY0ZpbHRlcnModGFyZ2V0LmV4cHIpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRhcmdldCxcbiAgICAgIGxlZ2VuZEZvcm1hdDogdGhpcy50ZW1wbGF0ZVNydi5yZXBsYWNlKHRhcmdldC5sZWdlbmRGb3JtYXQsIHJlc3QpLFxuICAgICAgZXhwcjogdGhpcy50ZW1wbGF0ZVNydi5yZXBsYWNlKGV4cHJXaXRoQWRIb2MsIHJlc3QsIHRoaXMuaW50ZXJwb2xhdGVRdWVyeUV4cHIpLFxuICAgIH07XG4gIH1cblxuICBpbnRlcnBvbGF0ZVN0cmluZyhzdHJpbmc6IHN0cmluZywgc2NvcGVkVmFycz86IFNjb3BlZFZhcnMpIHtcbiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVNydi5yZXBsYWNlKHN0cmluZywgc2NvcGVkVmFycywgdGhpcy5pbnRlcnBvbGF0ZVF1ZXJ5RXhwcik7XG4gIH1cblxuICBnZXRWYXJpYWJsZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlU3J2LmdldFZhcmlhYmxlcygpLm1hcCgodikgPT4gYCQke3YubmFtZX1gKTtcbiAgfVxuXG4gIGdldFF1ZXJ5SGludHMocXVlcnk6IExva2lRdWVyeSwgcmVzdWx0OiBEYXRhRnJhbWVbXSk6IFF1ZXJ5SGludFtdIHtcbiAgICByZXR1cm4gZ2V0UXVlcnlIaW50cyhxdWVyeS5leHByLCByZXN1bHQpO1xuICB9XG5cbiAgZ2V0RGVmYXVsdFF1ZXJ5KGFwcDogQ29yZUFwcCk6IExva2lRdWVyeSB7XG4gICAgY29uc3QgZGVmYXVsdHMgPSB7IHJlZklkOiAnQScsIGV4cHI6ICcnIH07XG5cbiAgICBpZiAoYXBwID09PSBDb3JlQXBwLlVuaWZpZWRBbGVydGluZykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICAgIHF1ZXJ5VHlwZTogTG9raVF1ZXJ5VHlwZS5JbnN0YW50LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICBxdWVyeVR5cGU6IExva2lRdWVyeVR5cGUuUmFuZ2UsXG4gICAgfTtcbiAgfVxufVxuXG4vLyBOT1RFOiB0aGVzZSB0d28gZnVuY3Rpb25zIGFyZSB2ZXJ5IHNpbWlsYXIgdG8gdGhlIGVzY2FwZUxhYmVsVmFsdWVJbiogZnVuY3Rpb25zXG4vLyBpbiBsYW5ndWFnZV91dGlscy50cywgYnV0IHRoZXkgYXJlIG5vdCBleGFjdGx5IHRoZSBzYW1lIGFsZ29yaXRobSwgYW5kIHdlIGZvdW5kXG4vLyBubyB3YXkgdG8gcmV1c2Ugb25lIGluIHRoZSBhbm90aGVyIG9yIHZpY2UgdmVyc2EuXG5leHBvcnQgZnVuY3Rpb24gbG9raVJlZ3VsYXJFc2NhcGUodmFsdWU6IGFueSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8nL2csIFwiXFxcXFxcXFwnXCIpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxva2lTcGVjaWFsUmVnZXhFc2NhcGUodmFsdWU6IGFueSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBsb2tpUmVndWxhckVzY2FwZSh2YWx1ZS5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXFxcXFxcXFxcJykucmVwbGFjZSgvWyReKnt9XFxbXFxdKz8uKCl8XS9nLCAnXFxcXFxcXFwkJicpKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RMZXZlbChkYXRhRnJhbWU6IERhdGFGcmFtZSk6IExvZ0xldmVsIHtcbiAgbGV0IHZhbHVlRmllbGQ7XG4gIHRyeSB7XG4gICAgdmFsdWVGaWVsZCA9IG5ldyBGaWVsZENhY2hlKGRhdGFGcmFtZSkuZ2V0Rmlyc3RGaWVsZE9mVHlwZShGaWVsZFR5cGUubnVtYmVyKTtcbiAgfSBjYXRjaCB7fVxuICByZXR1cm4gdmFsdWVGaWVsZD8ubGFiZWxzID8gZ2V0TG9nTGV2ZWxGcm9tTGFiZWxzKHZhbHVlRmllbGQubGFiZWxzKSA6IExvZ0xldmVsLnVua25vd247XG59XG5cbmZ1bmN0aW9uIGdldExvZ0xldmVsRnJvbUxhYmVscyhsYWJlbHM6IExhYmVscyk6IExvZ0xldmVsIHtcbiAgY29uc3QgbGFiZWxOYW1lcyA9IFsnbGV2ZWwnLCAnbHZsJywgJ2xvZ2xldmVsJ107XG4gIGxldCBsZXZlbExhYmVsO1xuICBmb3IgKGxldCBsYWJlbE5hbWUgb2YgbGFiZWxOYW1lcykge1xuICAgIGlmIChsYWJlbE5hbWUgaW4gbGFiZWxzKSB7XG4gICAgICBsZXZlbExhYmVsID0gbGFiZWxOYW1lO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBsZXZlbExhYmVsID8gZ2V0TG9nTGV2ZWxGcm9tS2V5KGxhYmVsc1tsZXZlbExhYmVsXSkgOiBMb2dMZXZlbC51bmtub3duO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/datasource.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/getDerivedFields.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDerivedFields: () => (/* binding */ getDerivedFields)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/dataSourceSrv.ts\");\n\n\n\n\nfunction getDerivedFields(dataFrame, derivedFieldConfigs) {\n  if (!derivedFieldConfigs.length) {\n    return [];\n  }\n  const derivedFieldsGrouped = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.groupBy)(derivedFieldConfigs, \"name\");\n  const newFields = Object.values(derivedFieldsGrouped).map(fieldFromDerivedFieldConfig);\n  const lineField = dataFrame.fields.find((f) => f.type === _grafana_data__WEBPACK_IMPORTED_MODULE_1__.FieldType.string);\n  if (lineField === void 0) {\n    throw new Error(\"invalid logs-dataframe, string-field missing\");\n  }\n  lineField.values.forEach((line) => {\n    for (const field of newFields) {\n      const logMatch = line.match(derivedFieldsGrouped[field.name][0].matcherRegex);\n      field.values.push(logMatch && logMatch[1]);\n    }\n  });\n  return newFields;\n}\nfunction fieldFromDerivedFieldConfig(derivedFieldConfigs) {\n  const dataSourceSrv = (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_2__.getDataSourceSrv)();\n  const dataLinks = derivedFieldConfigs.reduce((acc, derivedFieldConfig) => {\n    if (derivedFieldConfig.datasourceUid) {\n      const dsSettings = dataSourceSrv.getInstanceSettings(derivedFieldConfig.datasourceUid);\n      acc.push({\n        // Will be filled out later\n        title: derivedFieldConfig.urlDisplayLabel || \"\",\n        url: \"\",\n        // This is hardcoded for Jaeger or Zipkin not way right now to specify datasource specific query object\n        internal: {\n          query: { query: derivedFieldConfig.url, queryType: dsSettings?.type === \"tempo\" ? \"traceql\" : void 0 },\n          datasourceUid: derivedFieldConfig.datasourceUid,\n          datasourceName: dsSettings?.name ?? \"Data source not found\"\n        }\n      });\n    } else if (derivedFieldConfig.url) {\n      acc.push({\n        // We do not know what title to give here so we count on presentation layer to create a title from metadata.\n        title: derivedFieldConfig.urlDisplayLabel || \"\",\n        // This is hardcoded for Jaeger or Zipkin not way right now to specify datasource specific query object\n        url: derivedFieldConfig.url\n      });\n    }\n    return acc;\n  }, []);\n  return {\n    name: derivedFieldConfigs[0].name,\n    type: _grafana_data__WEBPACK_IMPORTED_MODULE_1__.FieldType.string,\n    config: {\n      links: dataLinks\n    },\n    // We are adding values later on\n    values: []\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2dldERlcml2ZWRGaWVsZHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdCO0FBRThCO0FBQ3JCO0FBSTFCLFNBQVMsaUJBQWlCLFdBQXNCLHFCQUFvRDtBQUN6RyxNQUFJLENBQUMsb0JBQW9CLFFBQVE7QUFDL0IsV0FBTyxDQUFDO0FBQUEsRUFDVjtBQUNBLFFBQU0sdUJBQXVCLCtDQUFPLENBQUMscUJBQXFCLE1BQU07QUFFaEUsUUFBTSxZQUFZLE9BQU8sT0FBTyxvQkFBb0IsRUFBRSxJQUFJLDJCQUEyQjtBQUlyRixRQUFNLFlBQVksVUFBVSxPQUFPLEtBQUssQ0FBQyxNQUFNLEVBQUUsU0FBUyxvREFBUyxDQUFDLE1BQU07QUFFMUUsTUFBSSxjQUFjLFFBQVc7QUFFM0IsVUFBTSxJQUFJLE1BQU0sOENBQThDO0FBQUEsRUFDaEU7QUFFQSxZQUFVLE9BQU8sUUFBUSxDQUFDLFNBQVM7QUFDakMsZUFBVyxTQUFTLFdBQVc7QUFDN0IsWUFBTSxXQUFXLEtBQUssTUFBTSxxQkFBcUIsTUFBTSxJQUFJLEVBQUUsQ0FBQyxFQUFFLFlBQVk7QUFDNUUsWUFBTSxPQUFPLEtBQUssWUFBWSxTQUFTLENBQUMsQ0FBQztBQUFBLElBQzNDO0FBQUEsRUFDRixDQUFDO0FBRUQsU0FBTztBQUNUO0FBS0EsU0FBUyw0QkFBNEIscUJBQWtEO0FBQ3JGLFFBQU0sZ0JBQWdCLGtFQUFnQixDQUFDO0FBRXZDLFFBQU0sWUFBWSxvQkFBb0IsT0FBbUIsQ0FBQyxLQUFLLHVCQUF1QjtBQUVwRixRQUFJLG1CQUFtQixlQUFlO0FBQ3BDLFlBQU0sYUFBYSxjQUFjLG9CQUFvQixtQkFBbUIsYUFBYTtBQUVyRixVQUFJLEtBQUs7QUFBQTtBQUFBLFFBRVAsT0FBTyxtQkFBbUIsbUJBQW1CO0FBQUEsUUFDN0MsS0FBSztBQUFBO0FBQUEsUUFFTCxVQUFVO0FBQUEsVUFDUixPQUFPLEVBQUUsT0FBTyxtQkFBbUIsS0FBSyxXQUFXLFlBQVksU0FBUyxVQUFVLFlBQVksT0FBVTtBQUFBLFVBQ3hHLGVBQWUsbUJBQW1CO0FBQUEsVUFDbEMsZ0JBQWdCLFlBQVksUUFBUTtBQUFBLFFBQ3RDO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSCxXQUFXLG1CQUFtQixLQUFLO0FBQ2pDLFVBQUksS0FBSztBQUFBO0FBQUEsUUFFUCxPQUFPLG1CQUFtQixtQkFBbUI7QUFBQTtBQUFBLFFBRTdDLEtBQUssbUJBQW1CO0FBQUEsTUFDMUIsQ0FBQztBQUFBLElBQ0g7QUFDQSxXQUFPO0FBQUEsRUFDVCxHQUFHLENBQUMsQ0FBQztBQUVMLFNBQU87QUFBQSxJQUNMLE1BQU0sb0JBQW9CLENBQUMsRUFBRTtBQUFBLElBQzdCLE1BQU0sb0RBQVMsQ0FBQztBQUFBLElBQ2hCLFFBQVE7QUFBQSxNQUNOLE9BQU87QUFBQSxJQUNUO0FBQUE7QUFBQSxJQUVBLFFBQVEsQ0FBQztBQUFBLEVBQ1g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2dldERlcml2ZWRGaWVsZHMudHM/OGVkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgRmllbGRUeXBlLCBEYXRhRnJhbWUsIERhdGFMaW5rLCBGaWVsZCB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgZ2V0RGF0YVNvdXJjZVNydiB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuXG5pbXBvcnQgeyBEZXJpdmVkRmllbGRDb25maWcgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlcml2ZWRGaWVsZHMoZGF0YUZyYW1lOiBEYXRhRnJhbWUsIGRlcml2ZWRGaWVsZENvbmZpZ3M6IERlcml2ZWRGaWVsZENvbmZpZ1tdKTogRmllbGRbXSB7XG4gIGlmICghZGVyaXZlZEZpZWxkQ29uZmlncy5sZW5ndGgpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgZGVyaXZlZEZpZWxkc0dyb3VwZWQgPSBncm91cEJ5KGRlcml2ZWRGaWVsZENvbmZpZ3MsICduYW1lJyk7XG5cbiAgY29uc3QgbmV3RmllbGRzID0gT2JqZWN0LnZhbHVlcyhkZXJpdmVkRmllbGRzR3JvdXBlZCkubWFwKGZpZWxkRnJvbURlcml2ZWRGaWVsZENvbmZpZyk7XG5cbiAgLy8gbGluZS1maWVsZCBpcyB0aGUgZmlyc3Qgc3RyaW5nLWZpZWxkXG4gIC8vIE5PVEU6IHdlIHNob3VsZCBjcmVhdGUgc29tZSBjb21tb24gbG9nLWZyYW1lLWV4dHJhLXN0cmluZy1maWVsZCBjb2RlIHNvbWV3aGVyZVxuICBjb25zdCBsaW5lRmllbGQgPSBkYXRhRnJhbWUuZmllbGRzLmZpbmQoKGYpID0+IGYudHlwZSA9PT0gRmllbGRUeXBlLnN0cmluZyk7XG5cbiAgaWYgKGxpbmVGaWVsZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gaWYgdGhpcyBpcyBoYXBwZW5pbmcsIHNvbWV0aGluZyB3ZW50IHdyb25nLCBsZXQncyByYWlzZSBhbiBlcnJvclxuICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBsb2dzLWRhdGFmcmFtZSwgc3RyaW5nLWZpZWxkIG1pc3NpbmcnKTtcbiAgfVxuXG4gIGxpbmVGaWVsZC52YWx1ZXMuZm9yRWFjaCgobGluZSkgPT4ge1xuICAgIGZvciAoY29uc3QgZmllbGQgb2YgbmV3RmllbGRzKSB7XG4gICAgICBjb25zdCBsb2dNYXRjaCA9IGxpbmUubWF0Y2goZGVyaXZlZEZpZWxkc0dyb3VwZWRbZmllbGQubmFtZV1bMF0ubWF0Y2hlclJlZ2V4KTtcbiAgICAgIGZpZWxkLnZhbHVlcy5wdXNoKGxvZ01hdGNoICYmIGxvZ01hdGNoWzFdKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBuZXdGaWVsZHM7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGRlcml2ZWRGaWVsZCBjb25maWcgaW50byBkYXRhZnJhbWUgZmllbGQgd2l0aCBjb25maWcgdGhhdCBjb250YWlucyBsaW5rLlxuICovXG5mdW5jdGlvbiBmaWVsZEZyb21EZXJpdmVkRmllbGRDb25maWcoZGVyaXZlZEZpZWxkQ29uZmlnczogRGVyaXZlZEZpZWxkQ29uZmlnW10pOiBGaWVsZCB7XG4gIGNvbnN0IGRhdGFTb3VyY2VTcnYgPSBnZXREYXRhU291cmNlU3J2KCk7XG5cbiAgY29uc3QgZGF0YUxpbmtzID0gZGVyaXZlZEZpZWxkQ29uZmlncy5yZWR1Y2U8RGF0YUxpbmtbXT4oKGFjYywgZGVyaXZlZEZpZWxkQ29uZmlnKSA9PiB7XG4gICAgLy8gSGF2aW5nIGZpZWxkLmRhdGFzb3VyY2VVaWQgbWVhbnMgaXQgaXMgYW4gaW50ZXJuYWwgbGluay5cbiAgICBpZiAoZGVyaXZlZEZpZWxkQ29uZmlnLmRhdGFzb3VyY2VVaWQpIHtcbiAgICAgIGNvbnN0IGRzU2V0dGluZ3MgPSBkYXRhU291cmNlU3J2LmdldEluc3RhbmNlU2V0dGluZ3MoZGVyaXZlZEZpZWxkQ29uZmlnLmRhdGFzb3VyY2VVaWQpO1xuXG4gICAgICBhY2MucHVzaCh7XG4gICAgICAgIC8vIFdpbGwgYmUgZmlsbGVkIG91dCBsYXRlclxuICAgICAgICB0aXRsZTogZGVyaXZlZEZpZWxkQ29uZmlnLnVybERpc3BsYXlMYWJlbCB8fCAnJyxcbiAgICAgICAgdXJsOiAnJyxcbiAgICAgICAgLy8gVGhpcyBpcyBoYXJkY29kZWQgZm9yIEphZWdlciBvciBaaXBraW4gbm90IHdheSByaWdodCBub3cgdG8gc3BlY2lmeSBkYXRhc291cmNlIHNwZWNpZmljIHF1ZXJ5IG9iamVjdFxuICAgICAgICBpbnRlcm5hbDoge1xuICAgICAgICAgIHF1ZXJ5OiB7IHF1ZXJ5OiBkZXJpdmVkRmllbGRDb25maWcudXJsLCBxdWVyeVR5cGU6IGRzU2V0dGluZ3M/LnR5cGUgPT09ICd0ZW1wbycgPyAndHJhY2VxbCcgOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICBkYXRhc291cmNlVWlkOiBkZXJpdmVkRmllbGRDb25maWcuZGF0YXNvdXJjZVVpZCxcbiAgICAgICAgICBkYXRhc291cmNlTmFtZTogZHNTZXR0aW5ncz8ubmFtZSA/PyAnRGF0YSBzb3VyY2Ugbm90IGZvdW5kJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZGVyaXZlZEZpZWxkQ29uZmlnLnVybCkge1xuICAgICAgYWNjLnB1c2goe1xuICAgICAgICAvLyBXZSBkbyBub3Qga25vdyB3aGF0IHRpdGxlIHRvIGdpdmUgaGVyZSBzbyB3ZSBjb3VudCBvbiBwcmVzZW50YXRpb24gbGF5ZXIgdG8gY3JlYXRlIGEgdGl0bGUgZnJvbSBtZXRhZGF0YS5cbiAgICAgICAgdGl0bGU6IGRlcml2ZWRGaWVsZENvbmZpZy51cmxEaXNwbGF5TGFiZWwgfHwgJycsXG4gICAgICAgIC8vIFRoaXMgaXMgaGFyZGNvZGVkIGZvciBKYWVnZXIgb3IgWmlwa2luIG5vdCB3YXkgcmlnaHQgbm93IHRvIHNwZWNpZnkgZGF0YXNvdXJjZSBzcGVjaWZpYyBxdWVyeSBvYmplY3RcbiAgICAgICAgdXJsOiBkZXJpdmVkRmllbGRDb25maWcudXJsLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIFtdKTtcblxuICByZXR1cm4ge1xuICAgIG5hbWU6IGRlcml2ZWRGaWVsZENvbmZpZ3NbMF0ubmFtZSxcbiAgICB0eXBlOiBGaWVsZFR5cGUuc3RyaW5nLFxuICAgIGNvbmZpZzoge1xuICAgICAgbGlua3M6IGRhdGFMaW5rcyxcbiAgICB9LFxuICAgIC8vIFdlIGFyZSBhZGRpbmcgdmFsdWVzIGxhdGVyIG9uXG4gICAgdmFsdWVzOiBbXSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/getDerivedFields.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/languageUtils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   escapeLabelValueInExactSelector: () => (/* binding */ escapeLabelValueInExactSelector),\n/* harmony export */   escapeLabelValueInRegexSelector: () => (/* binding */ escapeLabelValueInRegexSelector),\n/* harmony export */   escapeLabelValueInSelector: () => (/* binding */ escapeLabelValueInSelector),\n/* harmony export */   isBytesString: () => (/* binding */ isBytesString),\n/* harmony export */   isRegexSelector: () => (/* binding */ isRegexSelector),\n/* harmony export */   shouldRefreshLabels: () => (/* binding */ shouldRefreshLabels),\n/* harmony export */   unescapeLabelValue: () => (/* binding */ unescapeLabelValue)\n/* harmony export */ });\n\nfunction roundMsToMin(milliseconds) {\n  return roundSecToMin(milliseconds / 1e3);\n}\nfunction roundSecToMin(seconds) {\n  return Math.floor(seconds / 60);\n}\nfunction shouldRefreshLabels(range, prevRange) {\n  if (range && prevRange) {\n    const sameMinuteFrom = roundMsToMin(range.from.valueOf()) === roundMsToMin(prevRange.from.valueOf());\n    const sameMinuteTo = roundMsToMin(range.to.valueOf()) === roundMsToMin(prevRange.to.valueOf());\n    return !(sameMinuteFrom && sameMinuteTo);\n  }\n  return false;\n}\nconst RE2_METACHARACTERS = /[*+?()|\\\\.\\[\\]{}^$]/g;\nfunction escapeLokiRegexp(value) {\n  return value.replace(RE2_METACHARACTERS, \"\\\\$&\");\n}\nfunction escapeLabelValueInExactSelector(labelValue) {\n  return labelValue.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\n\").replace(/\"/g, '\\\\\"');\n}\nfunction unescapeLabelValue(labelValue) {\n  return labelValue.replace(/\\\\n/g, \"\\n\").replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, \"\\\\\");\n}\nfunction escapeLabelValueInRegexSelector(labelValue) {\n  return escapeLabelValueInExactSelector(escapeLokiRegexp(labelValue));\n}\nfunction escapeLabelValueInSelector(labelValue, selector) {\n  return isRegexSelector(selector) ? escapeLabelValueInRegexSelector(labelValue) : escapeLabelValueInExactSelector(labelValue);\n}\nfunction isRegexSelector(selector) {\n  if (selector && (selector.includes(\"=~\") || selector.includes(\"!~\"))) {\n    return true;\n  }\n  return false;\n}\nfunction isBytesString(string) {\n  const BYTES_KEYWORDS = [\n    \"b\",\n    \"kib\",\n    \"Kib\",\n    \"kb\",\n    \"KB\",\n    \"mib\",\n    \"Mib\",\n    \"mb\",\n    \"MB\",\n    \"gib\",\n    \"Gib\",\n    \"gb\",\n    \"GB\",\n    \"tib\",\n    \"Tib\",\n    \"tb\",\n    \"TB\",\n    \"pib\",\n    \"Pib\",\n    \"pb\",\n    \"PB\",\n    \"eib\",\n    \"Eib\",\n    \"eb\",\n    \"EB\"\n  ];\n  const regex = new RegExp(`^(?:-?\\\\d+(?:\\\\.\\\\d+)?)(?:${BYTES_KEYWORDS.join(\"|\")})$`);\n  const match = string.match(regex);\n  return !!match;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2xhbmd1YWdlVXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFQSxTQUFTLGFBQWEsY0FBOEI7QUFDbEQsU0FBTyxjQUFjLGVBQWUsR0FBSTtBQUMxQztBQUVBLFNBQVMsY0FBYyxTQUF5QjtBQUM5QyxTQUFPLEtBQUssTUFBTSxVQUFVLEVBQUU7QUFDaEM7QUFFTyxTQUFTLG9CQUFvQixPQUFtQixXQUFnQztBQUNyRixNQUFJLFNBQVMsV0FBVztBQUN0QixVQUFNLGlCQUFpQixhQUFhLE1BQU0sS0FBSyxRQUFRLENBQUMsTUFBTSxhQUFhLFVBQVUsS0FBSyxRQUFRLENBQUM7QUFDbkcsVUFBTSxlQUFlLGFBQWEsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLGFBQWEsVUFBVSxHQUFHLFFBQVEsQ0FBQztBQUU3RixXQUFPLEVBQUUsa0JBQWtCO0FBQUEsRUFDN0I7QUFDQSxTQUFPO0FBQ1Q7QUFNQSxNQUFNLHFCQUFxQjtBQUMzQixTQUFTLGlCQUFpQixPQUF1QjtBQUMvQyxTQUFPLE1BQU0sUUFBUSxvQkFBb0IsTUFBTTtBQUNqRDtBQU1PLFNBQVMsZ0NBQWdDLFlBQTRCO0FBQzFFLFNBQU8sV0FBVyxRQUFRLE9BQU8sTUFBTSxFQUFFLFFBQVEsT0FBTyxLQUFLLEVBQUUsUUFBUSxNQUFNLEtBQUs7QUFDcEY7QUFFTyxTQUFTLG1CQUFtQixZQUE0QjtBQUM3RCxTQUFPLFdBQVcsUUFBUSxRQUFRLElBQUksRUFBRSxRQUFRLFFBQVEsR0FBRyxFQUFFLFFBQVEsU0FBUyxJQUFJO0FBQ3BGO0FBRU8sU0FBUyxnQ0FBZ0MsWUFBNEI7QUFDMUUsU0FBTyxnQ0FBZ0MsaUJBQWlCLFVBQVUsQ0FBQztBQUNyRTtBQUVPLFNBQVMsMkJBQTJCLFlBQW9CLFVBQTJCO0FBQ3hGLFNBQU8sZ0JBQWdCLFFBQVEsSUFDM0IsZ0NBQWdDLFVBQVUsSUFDMUMsZ0NBQWdDLFVBQVU7QUFDaEQ7QUFFTyxTQUFTLGdCQUFnQixVQUFtQjtBQUNqRCxNQUFJLGFBQWEsU0FBUyxTQUFTLElBQUksS0FBSyxTQUFTLFNBQVMsSUFBSSxJQUFJO0FBQ3BFLFdBQU87QUFBQSxFQUNUO0FBQ0EsU0FBTztBQUNUO0FBRU8sU0FBUyxjQUFjLFFBQWdCO0FBQzVDLFFBQU0saUJBQWlCO0FBQUEsSUFDckI7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBQ0EsUUFBTSxRQUFRLElBQUksT0FBTyw2QkFBNkIsZUFBZSxLQUFLLEdBQUcsS0FBSztBQUNsRixRQUFNLFFBQVEsT0FBTyxNQUFNLEtBQUs7QUFDaEMsU0FBTyxDQUFDLENBQUM7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2xhbmd1YWdlVXRpbHMudHM/ZWIzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUaW1lUmFuZ2UgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxuZnVuY3Rpb24gcm91bmRNc1RvTWluKG1pbGxpc2Vjb25kczogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIHJvdW5kU2VjVG9NaW4obWlsbGlzZWNvbmRzIC8gMTAwMCk7XG59XG5cbmZ1bmN0aW9uIHJvdW5kU2VjVG9NaW4oc2Vjb25kczogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFJlZnJlc2hMYWJlbHMocmFuZ2U/OiBUaW1lUmFuZ2UsIHByZXZSYW5nZT86IFRpbWVSYW5nZSk6IGJvb2xlYW4ge1xuICBpZiAocmFuZ2UgJiYgcHJldlJhbmdlKSB7XG4gICAgY29uc3Qgc2FtZU1pbnV0ZUZyb20gPSByb3VuZE1zVG9NaW4ocmFuZ2UuZnJvbS52YWx1ZU9mKCkpID09PSByb3VuZE1zVG9NaW4ocHJldlJhbmdlLmZyb20udmFsdWVPZigpKTtcbiAgICBjb25zdCBzYW1lTWludXRlVG8gPSByb3VuZE1zVG9NaW4ocmFuZ2UudG8udmFsdWVPZigpKSA9PT0gcm91bmRNc1RvTWluKHByZXZSYW5nZS50by52YWx1ZU9mKCkpO1xuICAgIC8vIElmIGJvdGggYXJlIHNhbWUsIGRvbid0IG5lZWQgdG8gcmVmcmVzaFxuICAgIHJldHVybiAhKHNhbWVNaW51dGVGcm9tICYmIHNhbWVNaW51dGVUbyk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBMb2tpIHJlZ3VsYXItZXhwcmVzc2lvbnMgdXNlIHRoZSBSRTIgc3ludGF4IChodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3JlMi93aWtpL1N5bnRheCksXG4vLyBzbyBldmVyeSBjaGFyYWN0ZXIgdGhhdCBtYXRjaGVzIHNvbWV0aGluZyBpbiB0aGF0IGxpc3QgaGFzIHRvIGJlIGVzY2FwZWQuXG4vLyB0aGUgbGlzdCBvZiBtZXRhIGNoYXJhY3RlcnMgaXM6ICorPygpfFxcLltde31eJFxuLy8gd2UgbWFrZSBhIGphdmFzY3JpcHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgbWF0Y2hlcyB0aG9zZSBjaGFyYWN0ZXJzOlxuY29uc3QgUkUyX01FVEFDSEFSQUNURVJTID0gL1sqKz8oKXxcXFxcLlxcW1xcXXt9XiRdL2c7XG5mdW5jdGlvbiBlc2NhcGVMb2tpUmVnZXhwKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gdmFsdWUucmVwbGFjZShSRTJfTUVUQUNIQVJBQ1RFUlMsICdcXFxcJCYnKTtcbn1cblxuLy8gYmFzZWQgb24gdGhlIG9wZW5tZXRyaWNzLWRvY3VtZW50YXRpb24sIHRoZSAzIHN5bWJvbHMgd2UgaGF2ZSB0byBoYW5kbGUgYXJlOlxuLy8gLSBcXG4gLi4uIHRoZSBuZXdsaW5lIGNoYXJhY3RlclxuLy8gLSBcXCAgLi4uIHRoZSBiYWNrc2xhc2ggY2hhcmFjdGVyXG4vLyAtIFwiICAuLi4gdGhlIGRvdWJsZS1xdW90ZSBjaGFyYWN0ZXJcbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVMYWJlbFZhbHVlSW5FeGFjdFNlbGVjdG9yKGxhYmVsVmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBsYWJlbFZhbHVlLnJlcGxhY2UoL1xcXFwvZywgJ1xcXFxcXFxcJykucmVwbGFjZSgvXFxuL2csICdcXFxcbicpLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZXNjYXBlTGFiZWxWYWx1ZShsYWJlbFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbGFiZWxWYWx1ZS5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJykucmVwbGFjZSgvXFxcXFwiL2csICdcIicpLnJlcGxhY2UoL1xcXFxcXFxcL2csICdcXFxcJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVMYWJlbFZhbHVlSW5SZWdleFNlbGVjdG9yKGxhYmVsVmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBlc2NhcGVMYWJlbFZhbHVlSW5FeGFjdFNlbGVjdG9yKGVzY2FwZUxva2lSZWdleHAobGFiZWxWYWx1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlTGFiZWxWYWx1ZUluU2VsZWN0b3IobGFiZWxWYWx1ZTogc3RyaW5nLCBzZWxlY3Rvcj86IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBpc1JlZ2V4U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgPyBlc2NhcGVMYWJlbFZhbHVlSW5SZWdleFNlbGVjdG9yKGxhYmVsVmFsdWUpXG4gICAgOiBlc2NhcGVMYWJlbFZhbHVlSW5FeGFjdFNlbGVjdG9yKGxhYmVsVmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWdleFNlbGVjdG9yKHNlbGVjdG9yPzogc3RyaW5nKSB7XG4gIGlmIChzZWxlY3RvciAmJiAoc2VsZWN0b3IuaW5jbHVkZXMoJz1+JykgfHwgc2VsZWN0b3IuaW5jbHVkZXMoJyF+JykpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCeXRlc1N0cmluZyhzdHJpbmc6IHN0cmluZykge1xuICBjb25zdCBCWVRFU19LRVlXT1JEUyA9IFtcbiAgICAnYicsXG4gICAgJ2tpYicsXG4gICAgJ0tpYicsXG4gICAgJ2tiJyxcbiAgICAnS0InLFxuICAgICdtaWInLFxuICAgICdNaWInLFxuICAgICdtYicsXG4gICAgJ01CJyxcbiAgICAnZ2liJyxcbiAgICAnR2liJyxcbiAgICAnZ2InLFxuICAgICdHQicsXG4gICAgJ3RpYicsXG4gICAgJ1RpYicsXG4gICAgJ3RiJyxcbiAgICAnVEInLFxuICAgICdwaWInLFxuICAgICdQaWInLFxuICAgICdwYicsXG4gICAgJ1BCJyxcbiAgICAnZWliJyxcbiAgICAnRWliJyxcbiAgICAnZWInLFxuICAgICdFQicsXG4gIF07XG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXig/Oi0/XFxcXGQrKD86XFxcXC5cXFxcZCspPykoPzoke0JZVEVTX0tFWVdPUkRTLmpvaW4oJ3wnKX0pJGApO1xuICBjb25zdCBtYXRjaCA9IHN0cmluZy5tYXRjaChyZWdleCk7XG4gIHJldHVybiAhIW1hdGNoO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/languageUtils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/lineParser.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isLogLineJSON: () => (/* binding */ isLogLineJSON),\n/* harmony export */   isLogLineLogfmt: () => (/* binding */ isLogLineLogfmt),\n/* harmony export */   isLogLinePacked: () => (/* binding */ isLogLinePacked)\n/* harmony export */ });\n\nfunction isLogLineJSON(line) {\n  let parsed;\n  try {\n    parsed = JSON.parse(line);\n  } catch (error) {\n  }\n  return typeof parsed === \"object\";\n}\nconst LOGFMT_REGEXP = /(?:^|\\s)([\\w\\(\\)\\[\\]\\{\\}]+)=(\"\"|(?:\".*?[^\\\\]\"|[^\"\\s]\\S*))/;\nfunction isLogLineLogfmt(line) {\n  return LOGFMT_REGEXP.test(line);\n}\nfunction isLogLinePacked(line) {\n  let parsed;\n  try {\n    parsed = JSON.parse(line);\n    return parsed.hasOwnProperty(\"_entry\");\n  } catch (error) {\n    return false;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2xpbmVQYXJzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFPLFNBQVMsY0FBYyxNQUF1QjtBQUNuRCxNQUFJO0FBQ0osTUFBSTtBQUNGLGFBQVMsS0FBSyxNQUFNLElBQUk7QUFBQSxFQUMxQixTQUFTLE9BQVA7QUFBQSxFQUFlO0FBRWpCLFNBQU8sT0FBTyxXQUFXO0FBQzNCO0FBTUEsTUFBTSxnQkFBZ0I7QUFFZixTQUFTLGdCQUFnQixNQUF1QjtBQUNyRCxTQUFPLGNBQWMsS0FBSyxJQUFJO0FBQ2hDO0FBRU8sU0FBUyxnQkFBZ0IsTUFBdUI7QUFDckQsTUFBSTtBQUNKLE1BQUk7QUFDRixhQUFTLEtBQUssTUFBTSxJQUFJO0FBQ3hCLFdBQU8sT0FBTyxlQUFlLFFBQVE7QUFBQSxFQUN2QyxTQUFTLE9BQVA7QUFDQSxXQUFPO0FBQUEsRUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvbGluZVBhcnNlci50cz9iNjU4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBpc0xvZ0xpbmVKU09OKGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBsZXQgcGFyc2VkO1xuICB0cnkge1xuICAgIHBhcnNlZCA9IEpTT04ucGFyc2UobGluZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7fVxuICAvLyBUaGUgSlNPTiBwYXJzZXIgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgbG9nIGxpbmVzIHRoYXQgYXJlIHZhbGlkIHNlcmlhbGl6ZWQgSlNPTiBvYmplY3RzLlxuICByZXR1cm4gdHlwZW9mIHBhcnNlZCA9PT0gJ29iamVjdCc7XG59XG5cbi8vIFRoaXMgbWF0Y2hlczpcbi8vIGZpcnN0IGEgbGFiZWwgZnJvbSBzdGFydCBvZiB0aGUgc3RyaW5nIG9yIGZpcnN0IHdoaXRlIHNwYWNlLCB0aGVuIGFueSB3b3JkIGNoYXJzIHVudGlsIFwiPVwiXG4vLyBzZWNvbmQgZWl0aGVyIGFuIGVtcHR5IHF1b3Rlcywgb3IgYW55dGhpbmcgdGhhdCBzdGFydHMgd2l0aCBxdW90ZSBhbmQgZW5kcyB3aXRoIHVuZXNjYXBlZCBxdW90ZSxcbi8vIG9yIGFueSBub24gd2hpdGVzcGFjZSBjaGFycyB0aGF0IGRvIG5vdCBzdGFydCB3aXRoIHF1b3RlXG5jb25zdCBMT0dGTVRfUkVHRVhQID0gLyg/Ol58XFxzKShbXFx3XFwoXFwpXFxbXFxdXFx7XFx9XSspPShcIlwifCg/OlwiLio/W15cXFxcXVwifFteXCJcXHNdXFxTKikpLztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9nTGluZUxvZ2ZtdChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIExPR0ZNVF9SRUdFWFAudGVzdChsaW5lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9nTGluZVBhY2tlZChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgbGV0IHBhcnNlZDtcbiAgdHJ5IHtcbiAgICBwYXJzZWQgPSBKU09OLnBhcnNlKGxpbmUpO1xuICAgIHJldHVybiBwYXJzZWQuaGFzT3duUHJvcGVydHkoJ19lbnRyeScpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/lineParser.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/liveStreamsResultTransformer.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appendResponseToBufferedData: () => (/* binding */ appendResponseToBufferedData)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/v5.js\");\n\n\nconst UUID_NAMESPACE = \"6ec946da-0f49-47a8-983a-1d76d17e7c92\";\nfunction appendResponseToBufferedData(response, data) {\n  const streams = response.streams;\n  if (!streams || !streams.length) {\n    return;\n  }\n  const tsField = data.fields[0];\n  const lineField = data.fields[1];\n  const idField = data.fields[2];\n  const usedUids = {};\n  for (const stream of streams) {\n    const allLabelsString = Object.entries(stream.stream).map(([key, val]) => `${key}=\"${val}\"`).sort().join(\"\");\n    for (const [ts, line] of stream.values) {\n      tsField.values.push(new Date(parseInt(ts.slice(0, -6), 10)).toISOString());\n      lineField.values.push(line);\n      idField.values.push(createUid(ts, allLabelsString, line, usedUids, data.refId));\n    }\n  }\n}\nfunction createUid(ts, labelsString, line, usedUids, refId) {\n  let id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(`${ts}_${labelsString}_${line}`, UUID_NAMESPACE);\n  if (id in usedUids) {\n    const newCount = usedUids[id] + 1;\n    usedUids[id] = newCount;\n    id = `${id}_${newCount}`;\n  } else {\n    usedUids[id] = 0;\n  }\n  if (refId) {\n    return `${refId}_${id}`;\n  }\n  return id;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2xpdmVTdHJlYW1zUmVzdWx0VHJhbnNmb3JtZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZCO0FBTTdCLE1BQU0saUJBQWlCO0FBU2hCLFNBQVMsNkJBQTZCLFVBQTRCLE1BQXdCO0FBRy9GLFFBQU0sVUFBOEIsU0FBUztBQUM3QyxNQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsUUFBUTtBQUMvQjtBQUFBLEVBQ0Y7QUFFQSxRQUFNLFVBQVUsS0FBSyxPQUFPLENBQUM7QUFDN0IsUUFBTSxZQUFZLEtBQUssT0FBTyxDQUFDO0FBQy9CLFFBQU0sVUFBVSxLQUFLLE9BQU8sQ0FBQztBQUk3QixRQUFNLFdBQW1DLENBQUM7QUFFMUMsYUFBVyxVQUFVLFNBQVM7QUFFNUIsVUFBTSxrQkFBa0IsT0FBTyxRQUFRLE9BQU8sTUFBTSxFQUNqRCxJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsTUFBTSxHQUFHLFFBQVEsTUFBTSxFQUNyQyxLQUFLLEVBQ0wsS0FBSyxFQUFFO0FBR1YsZUFBVyxDQUFDLElBQUksSUFBSSxLQUFLLE9BQU8sUUFBUTtBQUN0QyxjQUFRLE9BQU8sS0FBSyxJQUFJLEtBQUssU0FBUyxHQUFHLE1BQU0sR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsWUFBWSxDQUFDO0FBQ3pFLGdCQUFVLE9BQU8sS0FBSyxJQUFJO0FBQzFCLGNBQVEsT0FBTyxLQUFLLFVBQVUsSUFBSSxpQkFBaUIsTUFBTSxVQUFVLEtBQUssS0FBSyxDQUFDO0FBQUEsSUFDaEY7QUFBQSxFQUNGO0FBQ0Y7QUFFQSxTQUFTLFVBQ1AsSUFDQSxjQUNBLE1BQ0EsVUFDQSxPQUNRO0FBRVIsTUFBSSxLQUFLLGdEQUFNLENBQUMsR0FBRyxNQUFNLGdCQUFnQixRQUFRLGNBQWM7QUFJL0QsTUFBSSxNQUFNLFVBQVU7QUFFbEIsVUFBTSxXQUFXLFNBQVMsRUFBRSxJQUFJO0FBQ2hDLGFBQVMsRUFBRSxJQUFJO0FBRWYsU0FBSyxHQUFHLE1BQU07QUFBQSxFQUNoQixPQUFPO0FBRUwsYUFBUyxFQUFFLElBQUk7QUFBQSxFQUNqQjtBQUVBLE1BQUksT0FBTztBQUNULFdBQU8sR0FBRyxTQUFTO0FBQUEsRUFDckI7QUFDQSxTQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9saXZlU3RyZWFtc1Jlc3VsdFRyYW5zZm9ybWVyLnRzPzIwMDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjUgYXMgdXVpZHY1IH0gZnJvbSAndXVpZCc7XG5cbmltcG9ydCB7IE11dGFibGVEYXRhRnJhbWUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxuaW1wb3J0IHsgTG9raVN0cmVhbVJlc3VsdCwgTG9raVRhaWxSZXNwb25zZSB9IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBVVUlEX05BTUVTUEFDRSA9ICc2ZWM5NDZkYS0wZjQ5LTQ3YTgtOTgzYS0xZDc2ZDE3ZTdjOTInO1xuXG4vKipcbiAqIFRyYW5zZm9ybSBMb2tpUmVzcG9uc2UgZGF0YSBhbmQgYXBwZW5kcyBpdCB0byBNdXRhYmxlRGF0YUZyYW1lLiBVc2VkIGZvciBzdHJlYW1pbmcgd2hlcmUgdGhlIGRhdGFGcmFtZSBjYW4gYmVcbiAqIGEgQ2lyY3VsYXJEYXRhRnJhbWUgY3JlYXRpbmcgYSBmaXhlZCBzaXplIHJvbGxpbmcgYnVmZmVyLlxuICogVE9ETzogUHJvYmFibHkgY291bGQgYmUgdW5pZmllZCB3aXRoIHRoZSBsb2dTdHJlYW1Ub0RhdGFGcmFtZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSByZXNwb25zZVxuICogQHBhcmFtIGRhdGEgTmVlZHMgdG8gaGF2ZSB0cywgbGluZSwgbGFiZWxzLCBpZCBhcyBmaWVsZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZFJlc3BvbnNlVG9CdWZmZXJlZERhdGEocmVzcG9uc2U6IExva2lUYWlsUmVzcG9uc2UsIGRhdGE6IE11dGFibGVEYXRhRnJhbWUpIHtcbiAgLy8gU2hvdWxkIHdlIGRvIGFueXRoaW5nIHdpdGg6IHJlc3BvbnNlLmRyb3BwZWRfZW50cmllcz9cblxuICBjb25zdCBzdHJlYW1zOiBMb2tpU3RyZWFtUmVzdWx0W10gPSByZXNwb25zZS5zdHJlYW1zO1xuICBpZiAoIXN0cmVhbXMgfHwgIXN0cmVhbXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgdHNGaWVsZCA9IGRhdGEuZmllbGRzWzBdO1xuICBjb25zdCBsaW5lRmllbGQgPSBkYXRhLmZpZWxkc1sxXTtcbiAgY29uc3QgaWRGaWVsZCA9IGRhdGEuZmllbGRzWzJdO1xuXG4gIC8vIFdlIGFyZSBjb21wYXJpbmcgdXNlZCBpZHMgb25seSB3aXRoaW4gdGhlIHJlY2VpdmVkIHN0cmVhbS4gVGhpcyBjb3VsZCBiZSBhIHByb2JsZW0gaWYgdGhlIHNhbWUgbGluZSArIGxhYmVscyArIG5hbm9zZWNvbmQgdGltZXN0YW1wIGNhbWUgaW4gMiBzZXBhcmF0ZSBiYXRjaGVzLlxuICAvLyBBcyB0aGlzIGlzIHZlcnkgdW5saWtlbHksIGFuZCB0aGUgcmVzdWx0IHdvdWxkIG9ubHkgYWZmZWN0IGxpdmUtdGFpbGluZyBjc3MgYW5pbWF0aW9uIHdlIGhhdmUgZGVjaWRlZCB0byBub3QgY29tcGFyZSBhbGwgcmVjZWl2ZWQgdWlkcyBmcm9tIGRhdGEgcGFyYW0gYXMgdGhpcyB3b3VsZCBzbG93IGRvd24gcHJvY2Vzc2luZy5cbiAgY29uc3QgdXNlZFVpZHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcblxuICBmb3IgKGNvbnN0IHN0cmVhbSBvZiBzdHJlYW1zKSB7XG4gICAgLy8gRmluZCB1bmlxdWUgbGFiZWxzXG4gICAgY29uc3QgYWxsTGFiZWxzU3RyaW5nID0gT2JqZWN0LmVudHJpZXMoc3RyZWFtLnN0cmVhbSlcbiAgICAgIC5tYXAoKFtrZXksIHZhbF0pID0+IGAke2tleX09XCIke3ZhbH1cImApXG4gICAgICAuc29ydCgpXG4gICAgICAuam9pbignJyk7XG5cbiAgICAvLyBBZGQgZWFjaCBsaW5lXG4gICAgZm9yIChjb25zdCBbdHMsIGxpbmVdIG9mIHN0cmVhbS52YWx1ZXMpIHtcbiAgICAgIHRzRmllbGQudmFsdWVzLnB1c2gobmV3IERhdGUocGFyc2VJbnQodHMuc2xpY2UoMCwgLTYpLCAxMCkpLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgbGluZUZpZWxkLnZhbHVlcy5wdXNoKGxpbmUpO1xuICAgICAgaWRGaWVsZC52YWx1ZXMucHVzaChjcmVhdGVVaWQodHMsIGFsbExhYmVsc1N0cmluZywgbGluZSwgdXNlZFVpZHMsIGRhdGEucmVmSWQpKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlVWlkKFxuICB0czogc3RyaW5nLFxuICBsYWJlbHNTdHJpbmc6IHN0cmluZyxcbiAgbGluZTogc3RyaW5nLFxuICB1c2VkVWlkczogUmVjb3JkPHN0cmluZywgbnVtYmVyPixcbiAgcmVmSWQ/OiBzdHJpbmdcbik6IHN0cmluZyB7XG4gIC8vIEdlbmVyYXRlIGlkIGFzIGhhc2hlZCBuYW5vc2Vjb25kIHRpbWVzdGFtcCwgbGFiZWxzIGFuZCBsaW5lICh0aGlzIGRvZXMgbm90IGhhdmUgdG8gYmUgdW5pcXVlKVxuICBsZXQgaWQgPSB1dWlkdjUoYCR7dHN9XyR7bGFiZWxzU3RyaW5nfV8ke2xpbmV9YCwgVVVJRF9OQU1FU1BBQ0UpO1xuXG4gIC8vIENoZWNrIGlmIGdlbmVyYXRlZCBpZCBpcyB1bmlxdWVcbiAgLy8gSWYgbm90IGFuZCB3ZSd2ZSBhbHJlYWR5IHVzZWQgaXQsIGFwcGVuZCBpdHMgY291bnQgYWZ0ZXIgaXRcbiAgaWYgKGlkIGluIHVzZWRVaWRzKSB7XG4gICAgLy8gSW5jcmVhc2UgdGhlIGNvdW50XG4gICAgY29uc3QgbmV3Q291bnQgPSB1c2VkVWlkc1tpZF0gKyAxO1xuICAgIHVzZWRVaWRzW2lkXSA9IG5ld0NvdW50O1xuICAgIC8vIEFwcGVuZCBjb3VudCB0byBnZW5lcmF0ZWQgaWQgdG8gbWFrZSBpdCB1bmlxdWVcbiAgICBpZCA9IGAke2lkfV8ke25ld0NvdW50fWA7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgaWQgaXMgdW5pcXVlIGFuZCB3YXNuJ3QgdXNlZCwgYWRkIGl0IHRvIHVzZWRVaWRzIGFuZCBzdGFydCBjb3VudCBhdCAwXG4gICAgdXNlZFVpZHNbaWRdID0gMDtcbiAgfVxuICAvLyBSZXR1cm4gdW5pcXVlIGlkXG4gIGlmIChyZWZJZCkge1xuICAgIHJldHVybiBgJHtyZWZJZH1fJHtpZH1gO1xuICB9XG4gIHJldHVybiBpZDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/liveStreamsResultTransformer.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/logsTimeSplitting.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   splitTimeRange: () => (/* binding */ splitTimeRange)\n/* harmony export */ });\n\nfunction splitTimeRange(startTime, endTime, idealRangeDuration) {\n  if (endTime - startTime <= idealRangeDuration) {\n    return [[startTime, endTime]];\n  }\n  const result = [];\n  for (let chunkEndTime = endTime; chunkEndTime > startTime; chunkEndTime -= idealRangeDuration) {\n    const chunkStartTime = Math.max(chunkEndTime - idealRangeDuration, startTime);\n    result.push([chunkStartTime, chunkEndTime]);\n  }\n  result.reverse();\n  return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2xvZ3NUaW1lU3BsaXR0aW5nLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBa0JPLFNBQVMsZUFDZCxXQUNBLFNBQ0Esb0JBQ3lCO0FBQ3pCLE1BQUksVUFBVSxhQUFhLG9CQUFvQjtBQUM3QyxXQUFPLENBQUMsQ0FBQyxXQUFXLE9BQU8sQ0FBQztBQUFBLEVBQzlCO0FBRUEsUUFBTSxTQUFrQyxDQUFDO0FBSXpDLFdBQVMsZUFBZSxTQUFTLGVBQWUsV0FBVyxnQkFBZ0Isb0JBQW9CO0FBRzdGLFVBQU0saUJBQWlCLEtBQUssSUFBSSxlQUFlLG9CQUFvQixTQUFTO0FBQzVFLFdBQU8sS0FBSyxDQUFDLGdCQUFnQixZQUFZLENBQUM7QUFBQSxFQUM1QztBQUdBLFNBQU8sUUFBUTtBQUVmLFNBQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL2xvZ3NUaW1lU3BsaXR0aW5nLnRzPzRkNDYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXZlcnkgdGltZXN0YW1wIGluIHRoaXMgZmlsZSBpcyBhIG51bWJlciB3aGljaCBjb250YWlucyBhbiB1bml4LXRpbWVzdGFtcC1pbi1taWxsaXNlY29uZCBmb3JtYXQsXG4vLyBsaWtlIHJldHVybmVkIGJ5IGBuZXcgRGF0ZSgpLmdldFRpbWUoKWAuIHRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgdGhlIFwibWF0aFwiXG4vLyBoYXMgdG8gYmUgZG9uZSBvbiBpbnRlZ2VyIG51bWJlcnMuXG5cbi8vIHRoZSB3YXkgbG9raSBoYW5kbGVzIGxvZ3MtcmFuZ2UtcXVlcmllcyBpcyB0aGF0IGlmIHlvdSBzcGVjaWZ5IHN0YXJ0ICYgZW5kLFxuLy8gb25lIG9mIHRob3NlIHdpbGwgYmUgaW5jbHVkZWQsIGJ1dCB0aGUgb3RoZXIgd2lsbCBub3QuIHRoaXMgYWxsb3dzIHVzIHRvXG4vLyBtYWtlIGl0IGVhc3kgdG8gc3BsaXQgcmFuZ2VzLlxuLy8gZm9yIGV4YW1wbGUsIGlmIHRoZSB0aW1lLXJhbmdlIGlzIDEwMDw+MTUwLFxuLy8gd2UgY2FuIHNwbGl0IGl0IGludG86XG4vLyAtIDEwMDw+MTIwXG4vLyAtIDEyMDw+MTQwXG4vLyAtIDE0MDw+MTUwXG4vLyBhbmQgbm8gbG9nLWxpbmUgd2lsbCBiZSBza2lwcGVkIG9yIGR1cGxpY2F0ZWRcbi8vIChOT1RFOiB3ZSBkbyB0aGVzZSBjYWxjdWxhdGlvbnMgaW4gbWlsbGlzZWNvbmRzLiBhdCB0aGUgZW5kLCBMb2tpIHJlY2VpdmVzXG4vLyBuYW5vc2Vjb25kcywgYnV0IGl0IHdpbGwgYmUgT0ssIGJlY2F1c2UgaXQncyBzaW1wbHkgYSBtYXR0ZXIgdG8gYWRkaW5nIGAwMDAwMDBgLFxuLy8gdG8gdGhlIGVuZCwgc28gaWYgd2UgZG8gaXQgcmlnaHQgaW4gbWlsbGlzZWNvbmRzLCBpdCBzaG91bGQgYmUgT0sgaW5cbi8vIG5hbm9zZWNvbmRzIHRvb1xuXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRUaW1lUmFuZ2UoXG4gIHN0YXJ0VGltZTogbnVtYmVyLFxuICBlbmRUaW1lOiBudW1iZXIsXG4gIGlkZWFsUmFuZ2VEdXJhdGlvbjogbnVtYmVyXG4pOiBBcnJheTxbbnVtYmVyLCBudW1iZXJdPiB7XG4gIGlmIChlbmRUaW1lIC0gc3RhcnRUaW1lIDw9IGlkZWFsUmFuZ2VEdXJhdGlvbikge1xuICAgIHJldHVybiBbW3N0YXJ0VGltZSwgZW5kVGltZV1dO1xuICB9XG5cbiAgY29uc3QgcmVzdWx0OiBBcnJheTxbbnVtYmVyLCBudW1iZXJdPiA9IFtdO1xuXG4gIC8vIHdlIHdhbGsgYmFja3dhcmQsIGJlY2F1c2Ugd2UgbmVlZCB3YW50IHRoZSBwb3RlbnRpYWxseSBzbWFsbGVyIFwibGFzdFwiIGNodW5rXG4gIC8vIHRvIGJlIGF0IHRoZSBvbGRlc3QgdGltZXN0YW1wLlxuICBmb3IgKGxldCBjaHVua0VuZFRpbWUgPSBlbmRUaW1lOyBjaHVua0VuZFRpbWUgPiBzdGFydFRpbWU7IGNodW5rRW5kVGltZSAtPSBpZGVhbFJhbmdlRHVyYXRpb24pIHtcbiAgICAvLyB3aGVuIHdlIGdldCBjbG9zZSB0byB0aGUgc3RhcnQgb2YgdGhlIHRpbWUgcmFuZ2UsIHdlIG5lZWQgdG8gYmUgc3VyZSBub3RcbiAgICAvLyB0byBjcm9zcyBvdmVyIHRoZSBzdGFydFRpbWVcbiAgICBjb25zdCBjaHVua1N0YXJ0VGltZSA9IE1hdGgubWF4KGNodW5rRW5kVGltZSAtIGlkZWFsUmFuZ2VEdXJhdGlvbiwgc3RhcnRUaW1lKTtcbiAgICByZXN1bHQucHVzaChbY2h1bmtTdGFydFRpbWUsIGNodW5rRW5kVGltZV0pO1xuICB9XG5cbiAgLy8gYmVjYXVzZSB3ZSB3YWxrZWQgYmFja3dhcmRzLCB3ZSBuZWVkIHRvIHJldmVyc2UgdGhlIGFycmF5XG4gIHJlc3VsdC5yZXZlcnNlKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/logsTimeSplitting.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/makeTableFrames.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeTableFrames: () => (/* binding */ makeTableFrames)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n\n\n\nfunction makeTableFrames(instantMetricFrames) {\n  const framesWithRefId = instantMetricFrames.filter((f) => f.refId !== void 0);\n  const framesByRefId = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.groupBy)(framesWithRefId, (frame) => frame.refId);\n  return Object.entries(framesByRefId).map(([refId, frames]) => makeTableFrame(frames, refId));\n}\nfunction makeTableFrame(instantMetricFrames, refId) {\n  const tableTimeField = { name: \"Time\", config: {}, values: [], type: _grafana_data__WEBPACK_IMPORTED_MODULE_1__.FieldType.time };\n  const tableValueField = {\n    name: `Value #${refId}`,\n    config: {},\n    values: [],\n    type: _grafana_data__WEBPACK_IMPORTED_MODULE_1__.FieldType.number\n  };\n  const allLabelNames = new Set(\n    instantMetricFrames.map((frame) => frame.fields.map((field) => Object.keys(field.labels ?? {})).flat()).flat()\n  );\n  const sortedLabelNames = Array.from(allLabelNames).sort();\n  const labelFields = sortedLabelNames.map((labelName) => ({\n    name: labelName,\n    config: { filterable: true },\n    values: [],\n    type: _grafana_data__WEBPACK_IMPORTED_MODULE_1__.FieldType.string\n  }));\n  instantMetricFrames.forEach((frame) => {\n    const timeField = frame.fields.find((field) => field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_1__.FieldType.time);\n    const valueField = frame.fields.find((field) => field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_1__.FieldType.number);\n    if (timeField == null || valueField == null) {\n      return;\n    }\n    const timeArray = timeField.values;\n    const valueArray = valueField.values;\n    for (let x of timeArray) {\n      tableTimeField.values.push(x);\n    }\n    for (let x of valueArray) {\n      tableValueField.values.push(x);\n    }\n    const labels = valueField.labels ?? {};\n    for (let f of labelFields) {\n      const text = labels[f.name] ?? \"\";\n      for (let i = 0; i < valueArray.length; i++) {\n        f.values.push(text);\n      }\n    }\n  });\n  return {\n    fields: [tableTimeField, ...labelFields, tableValueField],\n    refId,\n    meta: { preferredVisualisationType: \"table\" },\n    length: tableTimeField.values.length\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL21ha2VUYWJsZUZyYW1lcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QjtBQUVvQjtBQUVyQyxTQUFTLGdCQUFnQixxQkFBK0M7QUFHN0UsUUFBTSxrQkFBa0Isb0JBQW9CLE9BQU8sQ0FBQyxNQUFNLEVBQUUsVUFBVSxNQUFTO0FBRS9FLFFBQU0sZ0JBQWdCLCtDQUFPLENBQUMsaUJBQWlCLENBQUMsVUFBVSxNQUFNLEtBQUs7QUFFckUsU0FBTyxPQUFPLFFBQVEsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDLE9BQU8sTUFBTSxNQUFNLGVBQWUsUUFBUSxLQUFLLENBQUM7QUFDN0Y7QUFLQSxTQUFTLGVBQWUscUJBQWtDLE9BQTBCO0FBQ2xGLFFBQU0saUJBQThCLEVBQUUsTUFBTSxRQUFRLFFBQVEsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxHQUFHLE1BQU0sb0RBQVMsQ0FBQyxLQUFLO0FBQ2pHLFFBQU0sa0JBQStCO0FBQUEsSUFDbkMsTUFBTSxVQUFVO0FBQUEsSUFDaEIsUUFBUSxDQUFDO0FBQUEsSUFDVCxRQUFRLENBQUM7QUFBQSxJQUNULE1BQU0sb0RBQVMsQ0FBQztBQUFBLEVBQ2xCO0FBR0EsUUFBTSxnQkFBZ0IsSUFBSTtBQUFBLElBQ3hCLG9CQUFvQixJQUFJLENBQUMsVUFBVSxNQUFNLE9BQU8sSUFBSSxDQUFDLFVBQVUsT0FBTyxLQUFLLE1BQU0sVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLEtBQUs7QUFBQSxFQUMvRztBQUVBLFFBQU0sbUJBQW1CLE1BQU0sS0FBSyxhQUFhLEVBQUUsS0FBSztBQUV4RCxRQUFNLGNBQTZCLGlCQUFpQixJQUFJLENBQUMsZUFBZTtBQUFBLElBQ3RFLE1BQU07QUFBQSxJQUNOLFFBQVEsRUFBRSxZQUFZLEtBQUs7QUFBQSxJQUMzQixRQUFRLENBQUM7QUFBQSxJQUNULE1BQU0sb0RBQVMsQ0FBQztBQUFBLEVBQ2xCLEVBQUU7QUFFRixzQkFBb0IsUUFBUSxDQUFDLFVBQVU7QUFDckMsVUFBTSxZQUFZLE1BQU0sT0FBTyxLQUFLLENBQUMsVUFBVSxNQUFNLFNBQVMsb0RBQVMsQ0FBQyxJQUFJO0FBQzVFLFVBQU0sYUFBYSxNQUFNLE9BQU8sS0FBSyxDQUFDLFVBQVUsTUFBTSxTQUFTLG9EQUFTLENBQUMsTUFBTTtBQUMvRSxRQUFJLGFBQWEsUUFBUSxjQUFjLE1BQU07QUFDM0M7QUFBQSxJQUNGO0FBRUEsVUFBTSxZQUFZLFVBQVU7QUFDNUIsVUFBTSxhQUFhLFdBQVc7QUFFOUIsYUFBUyxLQUFLLFdBQVc7QUFDdkIscUJBQWUsT0FBTyxLQUFLLENBQUM7QUFBQSxJQUM5QjtBQUVBLGFBQVMsS0FBSyxZQUFZO0FBQ3hCLHNCQUFnQixPQUFPLEtBQUssQ0FBQztBQUFBLElBQy9CO0FBRUEsVUFBTSxTQUFTLFdBQVcsVUFBVSxDQUFDO0FBRXJDLGFBQVMsS0FBSyxhQUFhO0FBQ3pCLFlBQU0sT0FBTyxPQUFPLEVBQUUsSUFBSSxLQUFLO0FBRS9CLGVBQVMsSUFBSSxHQUFHLElBQUksV0FBVyxRQUFRLEtBQUs7QUFDMUMsVUFBRSxPQUFPLEtBQUssSUFBSTtBQUFBLE1BQ3BCO0FBQUEsSUFDRjtBQUFBLEVBQ0YsQ0FBQztBQUVELFNBQU87QUFBQSxJQUNMLFFBQVEsQ0FBQyxnQkFBZ0IsR0FBRyxhQUFhLGVBQWU7QUFBQSxJQUN4RDtBQUFBLElBQ0EsTUFBTSxFQUFFLDRCQUE0QixRQUFRO0FBQUEsSUFDNUMsUUFBUSxlQUFlLE9BQU87QUFBQSxFQUNoQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvbWFrZVRhYmxlRnJhbWVzLnRzP2FmMTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ3JvdXBCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IERhdGFGcmFtZSwgRmllbGQsIEZpZWxkVHlwZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVRhYmxlRnJhbWVzKGluc3RhbnRNZXRyaWNGcmFtZXM6IERhdGFGcmFtZVtdKTogRGF0YUZyYW1lW10ge1xuICAvLyBmaXJzdCB3ZSByZW1vdmUgZnJhbWVzIHRoYXQgaGF2ZSBubyByZWZJZFxuICAvLyAod2Ugd2lsbCBncm91cCB0aGVtIGJ5IHJlZklkLCBzbyB3ZSBuZWVkIGl0IHRvIGJlIHNldClcbiAgY29uc3QgZnJhbWVzV2l0aFJlZklkID0gaW5zdGFudE1ldHJpY0ZyYW1lcy5maWx0ZXIoKGYpID0+IGYucmVmSWQgIT09IHVuZGVmaW5lZCk7XG5cbiAgY29uc3QgZnJhbWVzQnlSZWZJZCA9IGdyb3VwQnkoZnJhbWVzV2l0aFJlZklkLCAoZnJhbWUpID0+IGZyYW1lLnJlZklkKTtcblxuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZnJhbWVzQnlSZWZJZCkubWFwKChbcmVmSWQsIGZyYW1lc10pID0+IG1ha2VUYWJsZUZyYW1lKGZyYW1lcywgcmVmSWQpKTtcbn1cblxudHlwZSBOdW1iZXJGaWVsZCA9IEZpZWxkPG51bWJlciwgbnVtYmVyW10+O1xudHlwZSBTdHJpbmdGaWVsZCA9IEZpZWxkPHN0cmluZywgc3RyaW5nW10+O1xuXG5mdW5jdGlvbiBtYWtlVGFibGVGcmFtZShpbnN0YW50TWV0cmljRnJhbWVzOiBEYXRhRnJhbWVbXSwgcmVmSWQ6IHN0cmluZyk6IERhdGFGcmFtZSB7XG4gIGNvbnN0IHRhYmxlVGltZUZpZWxkOiBOdW1iZXJGaWVsZCA9IHsgbmFtZTogJ1RpbWUnLCBjb25maWc6IHt9LCB2YWx1ZXM6IFtdLCB0eXBlOiBGaWVsZFR5cGUudGltZSB9O1xuICBjb25zdCB0YWJsZVZhbHVlRmllbGQ6IE51bWJlckZpZWxkID0ge1xuICAgIG5hbWU6IGBWYWx1ZSAjJHtyZWZJZH1gLFxuICAgIGNvbmZpZzoge30sXG4gICAgdmFsdWVzOiBbXSxcbiAgICB0eXBlOiBGaWVsZFR5cGUubnVtYmVyLFxuICB9O1xuXG4gIC8vIFNvcnQgbWV0cmljIGxhYmVscywgY3JlYXRlIGNvbHVtbnMgZm9yIHRoZW0gYW5kIHJlY29yZCB0aGVpciBpbmRleFxuICBjb25zdCBhbGxMYWJlbE5hbWVzID0gbmV3IFNldChcbiAgICBpbnN0YW50TWV0cmljRnJhbWVzLm1hcCgoZnJhbWUpID0+IGZyYW1lLmZpZWxkcy5tYXAoKGZpZWxkKSA9PiBPYmplY3Qua2V5cyhmaWVsZC5sYWJlbHMgPz8ge30pKS5mbGF0KCkpLmZsYXQoKVxuICApO1xuXG4gIGNvbnN0IHNvcnRlZExhYmVsTmFtZXMgPSBBcnJheS5mcm9tKGFsbExhYmVsTmFtZXMpLnNvcnQoKTtcblxuICBjb25zdCBsYWJlbEZpZWxkczogU3RyaW5nRmllbGRbXSA9IHNvcnRlZExhYmVsTmFtZXMubWFwKChsYWJlbE5hbWUpID0+ICh7XG4gICAgbmFtZTogbGFiZWxOYW1lLFxuICAgIGNvbmZpZzogeyBmaWx0ZXJhYmxlOiB0cnVlIH0sXG4gICAgdmFsdWVzOiBbXSxcbiAgICB0eXBlOiBGaWVsZFR5cGUuc3RyaW5nLFxuICB9KSk7XG5cbiAgaW5zdGFudE1ldHJpY0ZyYW1lcy5mb3JFYWNoKChmcmFtZSkgPT4ge1xuICAgIGNvbnN0IHRpbWVGaWVsZCA9IGZyYW1lLmZpZWxkcy5maW5kKChmaWVsZCkgPT4gZmllbGQudHlwZSA9PT0gRmllbGRUeXBlLnRpbWUpO1xuICAgIGNvbnN0IHZhbHVlRmllbGQgPSBmcmFtZS5maWVsZHMuZmluZCgoZmllbGQpID0+IGZpZWxkLnR5cGUgPT09IEZpZWxkVHlwZS5udW1iZXIpO1xuICAgIGlmICh0aW1lRmllbGQgPT0gbnVsbCB8fCB2YWx1ZUZpZWxkID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0aW1lQXJyYXkgPSB0aW1lRmllbGQudmFsdWVzO1xuICAgIGNvbnN0IHZhbHVlQXJyYXkgPSB2YWx1ZUZpZWxkLnZhbHVlcztcblxuICAgIGZvciAobGV0IHggb2YgdGltZUFycmF5KSB7XG4gICAgICB0YWJsZVRpbWVGaWVsZC52YWx1ZXMucHVzaCh4KTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCB4IG9mIHZhbHVlQXJyYXkpIHtcbiAgICAgIHRhYmxlVmFsdWVGaWVsZC52YWx1ZXMucHVzaCh4KTtcbiAgICB9XG5cbiAgICBjb25zdCBsYWJlbHMgPSB2YWx1ZUZpZWxkLmxhYmVscyA/PyB7fTtcblxuICAgIGZvciAobGV0IGYgb2YgbGFiZWxGaWVsZHMpIHtcbiAgICAgIGNvbnN0IHRleHQgPSBsYWJlbHNbZi5uYW1lXSA/PyAnJztcbiAgICAgIC8vIHdlIGluc2VydCB0aGUgbGFiZWxzIGFzIG1hbnkgdGltZXMgYXMgd2UgaGF2ZSB2YWx1ZXNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmLnZhbHVlcy5wdXNoKHRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBmaWVsZHM6IFt0YWJsZVRpbWVGaWVsZCwgLi4ubGFiZWxGaWVsZHMsIHRhYmxlVmFsdWVGaWVsZF0sXG4gICAgcmVmSWQsXG4gICAgbWV0YTogeyBwcmVmZXJyZWRWaXN1YWxpc2F0aW9uVHlwZTogJ3RhYmxlJyB9LFxuICAgIGxlbmd0aDogdGFibGVUaW1lRmllbGQudmFsdWVzLmxlbmd0aCxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/makeTableFrames.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/metricTimeSplitting.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   splitTimeRange: () => (/* binding */ splitTimeRange)\n/* harmony export */ });\n\nfunction expandTimeRange(startTime, endTime, step) {\n  const newStartTime = startTime - startTime % step;\n  let newEndTime = endTime;\n  const endStepMod = endTime % step;\n  if (endStepMod !== 0) {\n    newEndTime += step - endStepMod;\n  }\n  return [newStartTime, newEndTime];\n}\nfunction splitTimeRange(startTime, endTime, step, idealRangeDuration) {\n  if (idealRangeDuration < step) {\n    return [[startTime, endTime]];\n  }\n  const alignedDuration = Math.trunc(idealRangeDuration / step) * step;\n  const [alignedStartTime, alignedEndTime] = expandTimeRange(startTime, endTime, step);\n  const result = [];\n  for (let chunkEndTime = alignedEndTime; chunkEndTime > alignedStartTime; chunkEndTime -= alignedDuration + step) {\n    const chunkStartTime = Math.max(chunkEndTime - alignedDuration, alignedStartTime);\n    result.push([chunkStartTime, chunkEndTime]);\n  }\n  result.reverse();\n  return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL21ldHJpY1RpbWVTcGxpdHRpbmcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFPQSxTQUFTLGdCQUFnQixXQUFtQixTQUFpQixNQUFnQztBQUUzRixRQUFNLGVBQWUsWUFBYSxZQUFZO0FBRzlDLE1BQUksYUFBYTtBQUNqQixRQUFNLGFBQWEsVUFBVTtBQUM3QixNQUFJLGVBQWUsR0FBRztBQUNwQixrQkFBYyxPQUFPO0FBQUEsRUFDdkI7QUFFQSxTQUFPLENBQUMsY0FBYyxVQUFVO0FBQ2xDO0FBRU8sU0FBUyxlQUNkLFdBQ0EsU0FDQSxNQUNBLG9CQUN5QjtBQUN6QixNQUFJLHFCQUFxQixNQUFNO0FBRTdCLFdBQU8sQ0FBQyxDQUFDLFdBQVcsT0FBTyxDQUFDO0FBQUEsRUFDOUI7QUFHQSxRQUFNLGtCQUFrQixLQUFLLE1BQU0scUJBQXFCLElBQUksSUFBSTtBQUVoRSxRQUFNLENBQUMsa0JBQWtCLGNBQWMsSUFBSSxnQkFBZ0IsV0FBVyxTQUFTLElBQUk7QUFFbkYsUUFBTSxTQUFrQyxDQUFDO0FBR3pDLFdBQVMsZUFBZSxnQkFBZ0IsZUFBZSxrQkFBa0IsZ0JBQWdCLGtCQUFrQixNQUFNO0FBRy9HLFVBQU0saUJBQWlCLEtBQUssSUFBSSxlQUFlLGlCQUFpQixnQkFBZ0I7QUFDaEYsV0FBTyxLQUFLLENBQUMsZ0JBQWdCLFlBQVksQ0FBQztBQUFBLEVBQzVDO0FBR0EsU0FBTyxRQUFRO0FBRWYsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvbWV0cmljVGltZVNwbGl0dGluZy50cz8wZDEwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV2ZXJ5IHRpbWVzdGFtcCBpbiB0aGlzIGZpbGUgaXMgYSBudW1iZXIgd2hpY2ggY29udGFpbnMgYW4gdW5peC10aW1lc3RhbXAtaW4tbWlsbGlzZWNvbmQgZm9ybWF0LFxuLy8gbGlrZSByZXR1cm5lZCBieSBgbmV3IERhdGUoKS5nZXRUaW1lKClgLiB0aGlzIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSBcIm1hdGhcIlxuLy8gaGFzIHRvIGJlIGRvbmUgb24gaW50ZWdlciBudW1iZXJzLlxuXG4vLyB3ZSBhcmUgdHJ5aW5nIHRvIGJlIGNvbXBhdGlibGUgd2l0aFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2dyYWZhbmEvbG9raS9ibG9iLzA4OWVjMWIwNWY1ZWMxNWE4ODUxZDBlODIzMDE1M2UwZWViNGRjZWMvcGtnL3F1ZXJpZXIvcXVlcnlyYW5nZS9zcGxpdF9ieV9pbnRlcnZhbC5nbyNMMzI3LUwzMzZcblxuZnVuY3Rpb24gZXhwYW5kVGltZVJhbmdlKHN0YXJ0VGltZTogbnVtYmVyLCBlbmRUaW1lOiBudW1iZXIsIHN0ZXA6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0ge1xuICAvLyBzdGFydFRpbWUgaXMgZGVjcmVhc2VkIHRvIHRoZSBjbG9zZXMgbXVsdGlwbGUtb2Ytc3RlcCwgaWYgbmVjZXNzYXJ5XG4gIGNvbnN0IG5ld1N0YXJ0VGltZSA9IHN0YXJ0VGltZSAtIChzdGFydFRpbWUgJSBzdGVwKTtcblxuICAvLyBlbmRUaW1lIGlzIGluY3JlYXNlZCB0byB0aGUgY2xvc2VkIG11bHRpcGxlLW9mLXN0ZXAsIGlmIG5lY2Vzc2FyeVxuICBsZXQgbmV3RW5kVGltZSA9IGVuZFRpbWU7XG4gIGNvbnN0IGVuZFN0ZXBNb2QgPSBlbmRUaW1lICUgc3RlcDtcbiAgaWYgKGVuZFN0ZXBNb2QgIT09IDApIHtcbiAgICBuZXdFbmRUaW1lICs9IHN0ZXAgLSBlbmRTdGVwTW9kO1xuICB9XG5cbiAgcmV0dXJuIFtuZXdTdGFydFRpbWUsIG5ld0VuZFRpbWVdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRUaW1lUmFuZ2UoXG4gIHN0YXJ0VGltZTogbnVtYmVyLFxuICBlbmRUaW1lOiBudW1iZXIsXG4gIHN0ZXA6IG51bWJlcixcbiAgaWRlYWxSYW5nZUR1cmF0aW9uOiBudW1iZXJcbik6IEFycmF5PFtudW1iZXIsIG51bWJlcl0+IHtcbiAgaWYgKGlkZWFsUmFuZ2VEdXJhdGlvbiA8IHN0ZXApIHtcbiAgICAvLyB3ZSBjYW5ub3QgY3JlYXRlIGNodW5rcyBzbWFsbGVyIHRoYW4gYHN0ZXBgXG4gICAgcmV0dXJuIFtbc3RhcnRUaW1lLCBlbmRUaW1lXV07XG4gIH1cblxuICAvLyB3ZSBtYWtlIHRoZSBkdXJhdGlvbiBhIG11bHRpcGxlIG9mIGBzdGVwYCwgbG93ZXJpbmcgaXQgaWYgbmVjZXNzYXJ5XG4gIGNvbnN0IGFsaWduZWREdXJhdGlvbiA9IE1hdGgudHJ1bmMoaWRlYWxSYW5nZUR1cmF0aW9uIC8gc3RlcCkgKiBzdGVwO1xuXG4gIGNvbnN0IFthbGlnbmVkU3RhcnRUaW1lLCBhbGlnbmVkRW5kVGltZV0gPSBleHBhbmRUaW1lUmFuZ2Uoc3RhcnRUaW1lLCBlbmRUaW1lLCBzdGVwKTtcblxuICBjb25zdCByZXN1bHQ6IEFycmF5PFtudW1iZXIsIG51bWJlcl0+ID0gW107XG5cbiAgLy8gd2UgaXRlcmF0ZSBpdCBmcm9tIHRoZSBlbmQsIGJlY2F1c2Ugd2Ugd2FudCB0byBoYXZlIHRoZSBwb3RlbnRpYWxseSBzbWFsbGVyIGNodW5rIGF0IHRoZSBlbmQsIG5vdCBhdCB0aGUgYmVnaW5uaW5nXG4gIGZvciAobGV0IGNodW5rRW5kVGltZSA9IGFsaWduZWRFbmRUaW1lOyBjaHVua0VuZFRpbWUgPiBhbGlnbmVkU3RhcnRUaW1lOyBjaHVua0VuZFRpbWUgLT0gYWxpZ25lZER1cmF0aW9uICsgc3RlcCkge1xuICAgIC8vIHdoZW4gd2UgZ2V0IGNsb3NlIHRvIHRoZSBzdGFydCBvZiB0aGUgdGltZSByYW5nZSwgd2UgbmVlZCB0byBiZSBzdXJlIG5vdFxuICAgIC8vIHRvIGNyb3NzIG92ZXIgdGhlIHN0YXJ0VGltZVxuICAgIGNvbnN0IGNodW5rU3RhcnRUaW1lID0gTWF0aC5tYXgoY2h1bmtFbmRUaW1lIC0gYWxpZ25lZER1cmF0aW9uLCBhbGlnbmVkU3RhcnRUaW1lKTtcbiAgICByZXN1bHQucHVzaChbY2h1bmtTdGFydFRpbWUsIGNodW5rRW5kVGltZV0pO1xuICB9XG5cbiAgLy8gYmVjYXVzZSB3ZSB3YWxrZWQgYmFja3dhcmRzLCB3ZSBuZWVkIHRvIHJldmVyc2UgdGhlIGFycmF5XG4gIHJlc3VsdC5yZXZlcnNlKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/metricTimeSplitting.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/migrations/variableQueryMigrations.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   labelNamesRegex: () => (/* binding */ labelNamesRegex),\n/* harmony export */   labelValuesRegex: () => (/* binding */ labelValuesRegex),\n/* harmony export */   migrateVariableQuery: () => (/* binding */ migrateVariableQuery)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\nconst labelNamesRegex = /^label_names\\(\\)\\s*$/;\nconst labelValuesRegex = /^label_values\\((?:(.+),\\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\\)\\s*$/;\nfunction migrateVariableQuery(rawQuery) {\n  if (typeof rawQuery !== \"string\") {\n    return rawQuery;\n  }\n  const queryBase = {\n    refId: \"LokiVariableQueryEditor-VariableQuery\",\n    type: _types__WEBPACK_IMPORTED_MODULE_0__.LokiVariableQueryType.LabelNames\n  };\n  const labelNames = rawQuery.match(labelNamesRegex);\n  if (labelNames) {\n    return {\n      ...queryBase,\n      type: _types__WEBPACK_IMPORTED_MODULE_0__.LokiVariableQueryType.LabelNames\n    };\n  }\n  const labelValues = rawQuery.match(labelValuesRegex);\n  if (labelValues) {\n    return {\n      ...queryBase,\n      type: _types__WEBPACK_IMPORTED_MODULE_0__.LokiVariableQueryType.LabelValues,\n      label: labelValues[2] ? labelValues[2] : labelValues[1],\n      stream: labelValues[2] ? labelValues[1] : void 0\n    };\n  }\n  return queryBase;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL21pZ3JhdGlvbnMvdmFyaWFibGVRdWVyeU1pZ3JhdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUQ7QUFFbEQsTUFBTSxrQkFBa0I7QUFDeEIsTUFBTSxtQkFBbUI7QUFFekIsU0FBUyxxQkFBcUIsVUFBeUQ7QUFFNUYsTUFBSSxPQUFPLGFBQWEsVUFBVTtBQUNoQyxXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sWUFBWTtBQUFBLElBQ2hCLE9BQU87QUFBQSxJQUNQLE1BQU0seURBQXFCLENBQUM7QUFBQSxFQUM5QjtBQUVBLFFBQU0sYUFBYSxTQUFTLE1BQU0sZUFBZTtBQUNqRCxNQUFJLFlBQVk7QUFDZCxXQUFPO0FBQUEsTUFDTCxHQUFHO0FBQUEsTUFDSCxNQUFNLHlEQUFxQixDQUFDO0FBQUEsSUFDOUI7QUFBQSxFQUNGO0FBRUEsUUFBTSxjQUFjLFNBQVMsTUFBTSxnQkFBZ0I7QUFDbkQsTUFBSSxhQUFhO0FBQ2YsV0FBTztBQUFBLE1BQ0wsR0FBRztBQUFBLE1BQ0gsTUFBTSx5REFBcUIsQ0FBQztBQUFBLE1BQzVCLE9BQU8sWUFBWSxDQUFDLElBQUksWUFBWSxDQUFDLElBQUksWUFBWSxDQUFDO0FBQUEsTUFDdEQsUUFBUSxZQUFZLENBQUMsSUFBSSxZQUFZLENBQUMsSUFBSTtBQUFBLElBQzVDO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL21pZ3JhdGlvbnMvdmFyaWFibGVRdWVyeU1pZ3JhdGlvbnMudHM/NWM0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMb2tpVmFyaWFibGVRdWVyeSwgTG9raVZhcmlhYmxlUXVlcnlUeXBlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgbGFiZWxOYW1lc1JlZ2V4ID0gL15sYWJlbF9uYW1lc1xcKFxcKVxccyokLztcbmV4cG9ydCBjb25zdCBsYWJlbFZhbHVlc1JlZ2V4ID0gL15sYWJlbF92YWx1ZXNcXCgoPzooLispLFxccyopPyhbYS16QS1aXyRdW2EtekEtWjAtOV9dKilcXClcXHMqJC87XG5cbmV4cG9ydCBmdW5jdGlvbiBtaWdyYXRlVmFyaWFibGVRdWVyeShyYXdRdWVyeTogc3RyaW5nIHwgTG9raVZhcmlhYmxlUXVlcnkpOiBMb2tpVmFyaWFibGVRdWVyeSB7XG4gIC8vIElmIG5vdCBzdHJpbmcsIHdlIGFzc3VtZSBMb2tpVmFyaWFibGVRdWVyeVxuICBpZiAodHlwZW9mIHJhd1F1ZXJ5ICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiByYXdRdWVyeTtcbiAgfVxuXG4gIGNvbnN0IHF1ZXJ5QmFzZSA9IHtcbiAgICByZWZJZDogJ0xva2lWYXJpYWJsZVF1ZXJ5RWRpdG9yLVZhcmlhYmxlUXVlcnknLFxuICAgIHR5cGU6IExva2lWYXJpYWJsZVF1ZXJ5VHlwZS5MYWJlbE5hbWVzLFxuICB9O1xuXG4gIGNvbnN0IGxhYmVsTmFtZXMgPSByYXdRdWVyeS5tYXRjaChsYWJlbE5hbWVzUmVnZXgpO1xuICBpZiAobGFiZWxOYW1lcykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5xdWVyeUJhc2UsXG4gICAgICB0eXBlOiBMb2tpVmFyaWFibGVRdWVyeVR5cGUuTGFiZWxOYW1lcyxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgbGFiZWxWYWx1ZXMgPSByYXdRdWVyeS5tYXRjaChsYWJlbFZhbHVlc1JlZ2V4KTtcbiAgaWYgKGxhYmVsVmFsdWVzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnF1ZXJ5QmFzZSxcbiAgICAgIHR5cGU6IExva2lWYXJpYWJsZVF1ZXJ5VHlwZS5MYWJlbFZhbHVlcyxcbiAgICAgIGxhYmVsOiBsYWJlbFZhbHVlc1syXSA/IGxhYmVsVmFsdWVzWzJdIDogbGFiZWxWYWx1ZXNbMV0sXG4gICAgICBzdHJlYW06IGxhYmVsVmFsdWVzWzJdID8gbGFiZWxWYWx1ZXNbMV0gOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBxdWVyeUJhc2U7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/migrations/variableQueryMigrations.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/modifyQuery.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodePosition: () => (/* binding */ NodePosition),\n/* harmony export */   addFilterAsLabelFilter: () => (/* binding */ addFilterAsLabelFilter),\n/* harmony export */   addLabelFormatToQuery: () => (/* binding */ addLabelFormatToQuery),\n/* harmony export */   addLabelToQuery: () => (/* binding */ addLabelToQuery),\n/* harmony export */   addLineFilter: () => (/* binding */ addLineFilter),\n/* harmony export */   addNoPipelineErrorToQuery: () => (/* binding */ addNoPipelineErrorToQuery),\n/* harmony export */   addParserToQuery: () => (/* binding */ addParserToQuery),\n/* harmony export */   findLastPosition: () => (/* binding */ findLastPosition),\n/* harmony export */   getLabelFilterPositions: () => (/* binding */ getLabelFilterPositions),\n/* harmony export */   getParserPositions: () => (/* binding */ getParserPositions),\n/* harmony export */   getStreamSelectorPositions: () => (/* binding */ getStreamSelectorPositions),\n/* harmony export */   queryHasFilter: () => (/* binding */ queryHasFilter),\n/* harmony export */   removeCommentsFromQuery: () => (/* binding */ removeCommentsFromQuery),\n/* harmony export */   removeLabelFromQuery: () => (/* binding */ removeLabelFromQuery),\n/* harmony export */   toLabelFilter: () => (/* binding */ toLabelFilter)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-lezer-logql-virtual-0b75aafe9e/0/cache/@grafana-lezer-logql-npm-0.1.11-91e9d74a76-6a624b9a8d.zip/node_modules/@grafana/lezer-logql/index.es.js\");\n/* harmony import */ var _languageUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/languageUtils.ts\");\n/* harmony import */ var _querybuilder_LokiQueryModeller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts\");\n/* harmony import */ var _querybuilder_parsing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/parsing.ts\");\n\n\n\n\n\n\nclass NodePosition {\n  constructor(from, to, type) {\n    this.from = from;\n    this.to = to;\n    this.type = type;\n  }\n  static fromNode(node) {\n    return new NodePosition(node.from, node.to, node.type);\n  }\n  contains(position) {\n    return this.from <= position.from && this.to >= position.to;\n  }\n  getExpression(query) {\n    return query.substring(this.from, this.to);\n  }\n}\nfunction queryHasFilter(query, key, operator, value) {\n  const matchers = getMatchersWithFilter(query, key, operator, value);\n  return matchers.length > 0;\n}\nfunction removeLabelFromQuery(query, key, operator, value) {\n  const matchers = getMatchersWithFilter(query, key, operator, value);\n  for (const matcher of matchers) {\n    query = matcher.parent?.type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFilter ? removeLabelFilter(query, matcher) : removeSelector(query, matcher);\n  }\n  return query;\n}\nfunction removeLabelFilter(query, matcher) {\n  const pipelineStage = matcher.parent?.parent;\n  if (!pipelineStage || pipelineStage.type.id !== _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineStage) {\n    return query;\n  }\n  return (query.substring(0, pipelineStage.from) + query.substring(pipelineStage.to)).trim();\n}\nfunction removeSelector(query, matcher) {\n  let selector = matcher;\n  do {\n    selector = selector.parent;\n  } while (selector && selector.type.id !== _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Selector);\n  const label = matcher.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Identifier);\n  if (!selector || !label) {\n    return query;\n  }\n  const labelName = query.substring(label.from, label.to);\n  const prefix = query.substring(0, selector.from);\n  const suffix = query.substring(selector.to);\n  const matchVisQuery = (0,_querybuilder_parsing__WEBPACK_IMPORTED_MODULE_4__.buildVisualQueryFromString)(query.substring(selector.from, selector.to));\n  matchVisQuery.query.labels = matchVisQuery.query.labels.filter((label2) => label2.label !== labelName);\n  return prefix + _querybuilder_LokiQueryModeller__WEBPACK_IMPORTED_MODULE_3__.lokiQueryModeller.renderQuery(matchVisQuery.query) + suffix;\n}\nfunction getMatchersWithFilter(query, label, operator, value) {\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  const matchers = [];\n  tree.iterate({\n    enter: ({ type, node }) => {\n      if (type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Matcher) {\n        matchers.push(node);\n      }\n    }\n  });\n  return matchers.filter((matcher) => {\n    const labelNode = matcher.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Identifier);\n    const opNode = labelNode?.nextSibling;\n    const valueNode = matcher.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.String);\n    if (!labelNode || !opNode || !valueNode) {\n      return false;\n    }\n    const labelName = query.substring(labelNode.from, labelNode.to);\n    if (labelName !== label) {\n      return false;\n    }\n    const labelValue = query.substring(valueNode.from, valueNode.to);\n    if ((0,_querybuilder_parsing__WEBPACK_IMPORTED_MODULE_4__.handleQuotes)(labelValue) !== (0,_languageUtils__WEBPACK_IMPORTED_MODULE_2__.unescapeLabelValue)(value)) {\n      return false;\n    }\n    const labelOperator = query.substring(opNode.from, opNode.to);\n    if (labelOperator !== operator) {\n      return false;\n    }\n    return true;\n  });\n}\nfunction addLabelToQuery(query, key, operator, value) {\n  if (!key || !value) {\n    throw new Error(\"Need label to add to query.\");\n  }\n  const streamSelectorPositions = getStreamSelectorPositions(query);\n  if (!streamSelectorPositions.length) {\n    return query;\n  }\n  const hasStreamSelectorMatchers = getMatcherInStreamPositions(query);\n  const everyStreamSelectorHasMatcher = streamSelectorPositions.every(\n    (streamSelectorPosition) => hasStreamSelectorMatchers.some(\n      (matcherPosition) => matcherPosition.from >= streamSelectorPosition.from && matcherPosition.to <= streamSelectorPosition.to\n    )\n  );\n  const parserPositions = getParserPositions(query);\n  const labelFilterPositions = getLabelFilterPositions(query);\n  const filter = toLabelFilter(key, value, operator);\n  if (everyStreamSelectorHasMatcher && (labelFilterPositions.length || parserPositions.length)) {\n    const positionToAdd = findLastPosition([...labelFilterPositions, ...parserPositions]);\n    return addFilterAsLabelFilter(query, [positionToAdd], filter);\n  } else {\n    return addFilterToStreamSelector(query, streamSelectorPositions, filter);\n  }\n}\nfunction addParserToQuery(query, parser2) {\n  const lineFilterPositions = getLineFiltersPositions(query);\n  if (lineFilterPositions.length) {\n    return addParser(query, lineFilterPositions, parser2);\n  } else {\n    const streamSelectorPositions = getStreamSelectorPositions(query);\n    if (!streamSelectorPositions.length) {\n      return query;\n    }\n    return addParser(query, streamSelectorPositions, parser2);\n  }\n}\nfunction addNoPipelineErrorToQuery(query) {\n  const parserPositions = getParserPositions(query);\n  if (!parserPositions.length) {\n    return query;\n  }\n  const filter = toLabelFilter(\"__error__\", \"\", \"=\");\n  return addFilterAsLabelFilter(query, parserPositions, filter);\n}\nfunction addLabelFormatToQuery(query, labelFormat) {\n  const logQueryPositions = getLogQueryPositions(query);\n  return addLabelFormat(query, logQueryPositions, labelFormat);\n}\nfunction removeCommentsFromQuery(query) {\n  const lineCommentPositions = getLineCommentPositions(query);\n  if (!lineCommentPositions.length) {\n    return query;\n  }\n  let newQuery = \"\";\n  let prev = 0;\n  for (let lineCommentPosition of lineCommentPositions) {\n    newQuery = newQuery + query.substring(prev, lineCommentPosition.from);\n    prev = lineCommentPosition.to;\n  }\n  newQuery = newQuery + query.substring(prev);\n  return newQuery;\n}\nfunction getStreamSelectorPositions(query) {\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  const positions = [];\n  tree.iterate({\n    enter: ({ type, from, to }) => {\n      if (type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Selector) {\n        positions.push(new NodePosition(from, to, type));\n        return false;\n      }\n    }\n  });\n  return positions;\n}\nfunction getMatcherInStreamPositions(query) {\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  const positions = [];\n  tree.iterate({\n    enter: ({ node }) => {\n      if (node.type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Selector) {\n        positions.push(...getAllPositionsInNodeByType(query, node, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Matcher));\n      }\n    }\n  });\n  return positions;\n}\nfunction getParserPositions(query) {\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  const positions = [];\n  tree.iterate({\n    enter: ({ type, from, to }) => {\n      if (type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelParser || type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.JsonExpressionParser) {\n        positions.push(new NodePosition(from, to, type));\n        return false;\n      }\n    }\n  });\n  return positions;\n}\nfunction getLabelFilterPositions(query) {\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  const positions = [];\n  tree.iterate({\n    enter: ({ type, from, to }) => {\n      if (type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFilter) {\n        positions.push(new NodePosition(from, to, type));\n        return false;\n      }\n    }\n  });\n  return positions;\n}\nfunction getLineFiltersPositions(query) {\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  const positions = [];\n  tree.iterate({\n    enter: ({ type, from, to }) => {\n      if (type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LineFilters) {\n        positions.push(new NodePosition(from, to, type));\n        return false;\n      }\n    }\n  });\n  return positions;\n}\nfunction getLogQueryPositions(query) {\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  const positions = [];\n  tree.iterate({\n    enter: ({ type, from, to, node }) => {\n      if (type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LogExpr) {\n        positions.push(new NodePosition(from, to, type));\n        return false;\n      }\n      if (type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LogRangeExpr) {\n        const logPartsPositions = [];\n        const selector = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Selector);\n        if (selector) {\n          logPartsPositions.push(NodePosition.fromNode(selector));\n        }\n        const pipeline = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineExpr);\n        if (pipeline) {\n          logPartsPositions.push(NodePosition.fromNode(pipeline));\n        }\n        const unwrap = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.UnwrapExpr);\n        if (unwrap) {\n          logPartsPositions.push(NodePosition.fromNode(unwrap));\n        }\n        const sorted = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.sortBy)(logPartsPositions, (position) => position.to);\n        positions.push(new NodePosition(sorted[0].from, sorted[sorted.length - 1].to));\n        return false;\n      }\n    }\n  });\n  return positions;\n}\nfunction toLabelFilter(key, value, operator) {\n  return { label: key, op: operator, value };\n}\nfunction addFilterToStreamSelector(query, vectorSelectorPositions, filter) {\n  let newQuery = \"\";\n  let prev = 0;\n  for (let i = 0; i < vectorSelectorPositions.length; i++) {\n    const match = vectorSelectorPositions[i];\n    const isLast = i === vectorSelectorPositions.length - 1;\n    const start = query.substring(prev, match.from);\n    const end = isLast ? query.substring(match.to) : \"\";\n    const matchVisQuery = (0,_querybuilder_parsing__WEBPACK_IMPORTED_MODULE_4__.buildVisualQueryFromString)(query.substring(match.from, match.to));\n    if (!labelExists(matchVisQuery.query.labels, filter)) {\n      matchVisQuery.query.labels.push(filter);\n    }\n    const newLabels = _querybuilder_LokiQueryModeller__WEBPACK_IMPORTED_MODULE_3__.lokiQueryModeller.renderQuery(matchVisQuery.query);\n    newQuery += start + newLabels + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\nfunction addFilterAsLabelFilter(query, positionsToAddAfter, filter) {\n  let newQuery = \"\";\n  let prev = 0;\n  for (let i = 0; i < positionsToAddAfter.length; i++) {\n    const match = positionsToAddAfter[i];\n    const isLast = i === positionsToAddAfter.length - 1;\n    const start = query.substring(prev, match.to);\n    const end = isLast ? query.substring(match.to) : \"\";\n    let labelFilter = \"\";\n    if (!Number.isNaN(Number(filter.value)) && (filter.op === \"<\" || filter.op === \">\")) {\n      labelFilter = ` | ${filter.label}${filter.op}${Number(filter.value)}`;\n    } else {\n      labelFilter = ` | ${filter.label}${filter.op}\\`${(0,_languageUtils__WEBPACK_IMPORTED_MODULE_2__.unescapeLabelValue)(filter.value)}\\``;\n    }\n    newQuery += start + labelFilter + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\nfunction addParser(query, queryPartPositions, parser2) {\n  let newQuery = \"\";\n  let prev = 0;\n  for (let i = 0; i < queryPartPositions.length; i++) {\n    const match = queryPartPositions[i];\n    const isLast = i === queryPartPositions.length - 1;\n    const start = query.substring(prev, match.to);\n    const end = isLast ? query.substring(match.to) : \"\";\n    newQuery += start + ` | ${parser2}` + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\nfunction addLabelFormat(query, logQueryPositions, labelFormat) {\n  let newQuery = \"\";\n  let prev = 0;\n  for (let i = 0; i < logQueryPositions.length; i++) {\n    const match = logQueryPositions[i];\n    const isLast = i === logQueryPositions.length - 1;\n    const start = query.substring(prev, match.to);\n    const end = isLast ? query.substring(match.to) : \"\";\n    const labelFilter = ` | label_format ${labelFormat.renameTo}=${labelFormat.originalLabel}`;\n    newQuery += start + labelFilter + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\nfunction addLineFilter(query) {\n  const streamSelectorPositions = getStreamSelectorPositions(query);\n  if (!streamSelectorPositions.length) {\n    return query;\n  }\n  const streamSelectorEnd = streamSelectorPositions[0].to;\n  const newQueryExpr = query.slice(0, streamSelectorEnd) + \" |= ``\" + query.slice(streamSelectorEnd);\n  return newQueryExpr;\n}\nfunction getLineCommentPositions(query) {\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  const positions = [];\n  tree.iterate({\n    enter: ({ type, from, to }) => {\n      if (type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LineComment) {\n        positions.push(new NodePosition(from, to, type));\n        return false;\n      }\n    }\n  });\n  return positions;\n}\nfunction labelExists(labels, filter) {\n  return labels.find((label) => label.label === filter.label && label.value === filter.value);\n}\nfunction findLastPosition(positions) {\n  return positions.reduce((prev, current) => prev.to > current.to ? prev : current);\n}\nfunction getAllPositionsInNodeByType(query, node, type) {\n  if (node.type.id === type) {\n    return [NodePosition.fromNode(node)];\n  }\n  const positions = [];\n  let pos = 0;\n  let child = node.childAfter(pos);\n  while (child) {\n    positions.push(...getAllPositionsInNodeByType(query, child, type));\n    pos = child.to;\n    child = node.childAfter(pos);\n  }\n  return positions;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL21vZGlmeVF1ZXJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDdUI7QUFrQmhCO0FBSTRCO0FBQ1c7QUFDVztBQUVsRCxNQUFNLGFBQWE7QUFBQSxFQUt4QixZQUFZLE1BQWMsSUFBWSxNQUFpQjtBQUNyRCxTQUFLLE9BQU87QUFDWixTQUFLLEtBQUs7QUFDVixTQUFLLE9BQU87QUFBQSxFQUNkO0FBQUEsRUFFQSxPQUFPLFNBQVMsTUFBZ0M7QUFDOUMsV0FBTyxJQUFJLGFBQWEsS0FBSyxNQUFNLEtBQUssSUFBSSxLQUFLLElBQUk7QUFBQSxFQUN2RDtBQUFBLEVBRUEsU0FBUyxVQUFpQztBQUN4QyxXQUFPLEtBQUssUUFBUSxTQUFTLFFBQVEsS0FBSyxNQUFNLFNBQVM7QUFBQSxFQUMzRDtBQUFBLEVBRUEsY0FBYyxPQUF1QjtBQUNuQyxXQUFPLE1BQU0sVUFBVSxLQUFLLE1BQU0sS0FBSyxFQUFFO0FBQUEsRUFDM0M7QUFDRjtBQUtPLFNBQVMsZUFBZSxPQUFlLEtBQWEsVUFBa0IsT0FBd0I7QUFDbkcsUUFBTSxXQUFXLHNCQUFzQixPQUFPLEtBQUssVUFBVSxLQUFLO0FBQ2xFLFNBQU8sU0FBUyxTQUFTO0FBQzNCO0FBS08sU0FBUyxxQkFBcUIsT0FBZSxLQUFhLFVBQWtCLE9BQXVCO0FBQ3hHLFFBQU0sV0FBVyxzQkFBc0IsT0FBTyxLQUFLLFVBQVUsS0FBSztBQUNsRSxhQUFXLFdBQVcsVUFBVTtBQUM5QixZQUNFLFFBQVEsUUFBUSxLQUFLLE9BQU8sNkRBQVcsR0FBRyxrQkFBa0IsT0FBTyxPQUFPLElBQUksZUFBZSxPQUFPLE9BQU87QUFBQSxFQUMvRztBQUNBLFNBQU87QUFDVDtBQUVBLFNBQVMsa0JBQWtCLE9BQWUsU0FBNkI7QUFDckUsUUFBTSxnQkFBZ0IsUUFBUSxRQUFRO0FBQ3RDLE1BQUksQ0FBQyxpQkFBaUIsY0FBYyxLQUFLLE9BQU8sK0RB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LEdBQUcsTUFBb0I7QUFDM0MsVUFBSSxLQUFLLE9BQU8sNkRBQVcsRUFBRTtBQUMzQixrQkFBVSxLQUFLLElBQUksYUFBYSxNQUFNLElBQUksSUFBSSxDQUFDO0FBQy9DLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUFBLEVBQ0YsQ0FBQztBQUNELFNBQU87QUFDVDtBQU9BLFNBQVMsWUFBWSxRQUFtQyxRQUFpQztBQUN2RixTQUFPLE9BQU8sS0FBSyxDQUFDLFVBQVUsTUFBTSxVQUFVLE9BQU8sU0FBUyxNQUFNLFVBQVUsT0FBTyxLQUFLO0FBQzVGO0FBTU8sU0FBUyxpQkFBaUIsV0FBeUM7QUFDeEUsU0FBTyxVQUFVLE9BQU8sQ0FBQyxNQUFNLFlBQWEsS0FBSyxLQUFLLFFBQVEsS0FBSyxPQUFPLE9BQVE7QUFDcEY7QUFFQSxTQUFTLDRCQUE0QixPQUFlLE1BQWtCLE1BQThCO0FBQ2xHLE1BQUksS0FBSyxLQUFLLE9BQU8sTUFBTTtBQUN6QixXQUFPLENBQUMsYUFBYSxTQUFTLElBQUksQ0FBQztBQUFBLEVBQ3JDO0FBRUEsUUFBTSxZQUE0QixDQUFDO0FBQ25DLE1BQUksTUFBTTtBQUNWLE1BQUksUUFBUSxLQUFLLFdBQVcsR0FBRztBQUMvQixTQUFPLE9BQU87QUFDWixjQUFVLEtBQUssR0FBRyw0QkFBNEIsT0FBTyxPQUFPLElBQUksQ0FBQztBQUNqRSxVQUFNLE1BQU07QUFDWixZQUFRLEtBQUssV0FBVyxHQUFHO0FBQUEsRUFDN0I7QUFDQSxTQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9tb2RpZnlRdWVyeS50cz9lNTYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5vZGVUeXBlLCBTeW50YXhOb2RlIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5pbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICBJZGVudGlmaWVyLFxuICBKc29uRXhwcmVzc2lvblBhcnNlcixcbiAgTGFiZWxGaWx0ZXIsXG4gIExhYmVsUGFyc2VyLFxuICBMaW5lQ29tbWVudCxcbiAgTGluZUZpbHRlcnMsXG4gIExvZ0V4cHIsXG4gIExvZ1JhbmdlRXhwcixcbiAgTWF0Y2hlcixcbiAgcGFyc2VyLFxuICBQaXBlbGluZUV4cHIsXG4gIFNlbGVjdG9yLFxuICBVbndyYXBFeHByLFxuICBTdHJpbmcsXG4gIFBpcGVsaW5lU3RhZ2UsXG59IGZyb20gJ0BncmFmYW5hL2xlemVyLWxvZ3FsJztcblxuaW1wb3J0IHsgUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIgfSBmcm9tICcuLi9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvdHlwZXMnO1xuXG5pbXBvcnQgeyB1bmVzY2FwZUxhYmVsVmFsdWUgfSBmcm9tICcuL2xhbmd1YWdlVXRpbHMnO1xuaW1wb3J0IHsgbG9raVF1ZXJ5TW9kZWxsZXIgYXMgbW9kZWxsZXIgfSBmcm9tICcuL3F1ZXJ5YnVpbGRlci9Mb2tpUXVlcnlNb2RlbGxlcic7XG5pbXBvcnQgeyBidWlsZFZpc3VhbFF1ZXJ5RnJvbVN0cmluZywgaGFuZGxlUXVvdGVzIH0gZnJvbSAnLi9xdWVyeWJ1aWxkZXIvcGFyc2luZyc7XG5cbmV4cG9ydCBjbGFzcyBOb2RlUG9zaXRpb24ge1xuICBmcm9tOiBudW1iZXI7XG4gIHRvOiBudW1iZXI7XG4gIHR5cGU/OiBOb2RlVHlwZTtcblxuICBjb25zdHJ1Y3Rvcihmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIsIHR5cGU/OiBOb2RlVHlwZSkge1xuICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgdGhpcy50byA9IHRvO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gIH1cblxuICBzdGF0aWMgZnJvbU5vZGUobm9kZTogU3ludGF4Tm9kZSk6IE5vZGVQb3NpdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBOb2RlUG9zaXRpb24obm9kZS5mcm9tLCBub2RlLnRvLCBub2RlLnR5cGUpO1xuICB9XG5cbiAgY29udGFpbnMocG9zaXRpb246IE5vZGVQb3NpdGlvbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZyb20gPD0gcG9zaXRpb24uZnJvbSAmJiB0aGlzLnRvID49IHBvc2l0aW9uLnRvO1xuICB9XG5cbiAgZ2V0RXhwcmVzc2lvbihxdWVyeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcXVlcnkuc3Vic3RyaW5nKHRoaXMuZnJvbSwgdGhpcy50byk7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZm9yIHRoZSBwcmVzZW5jZSBvZiBhIGdpdmVuIGxhYmVsPXZhbHVlIGZpbHRlciBpbiBhbnkgTWF0Y2hlciBleHByZXNzaW9uIGluIHRoZSBxdWVyeS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5SGFzRmlsdGVyKHF1ZXJ5OiBzdHJpbmcsIGtleTogc3RyaW5nLCBvcGVyYXRvcjogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IG1hdGNoZXJzID0gZ2V0TWF0Y2hlcnNXaXRoRmlsdGVyKHF1ZXJ5LCBrZXksIG9wZXJhdG9yLCB2YWx1ZSk7XG4gIHJldHVybiBtYXRjaGVycy5sZW5ndGggPiAwO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYSBsYWJlbD12YWx1ZSBNYXRjaGVyIGV4cHJlc3Npb24gZnJvbSB0aGUgcXVlcnkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVMYWJlbEZyb21RdWVyeShxdWVyeTogc3RyaW5nLCBrZXk6IHN0cmluZywgb3BlcmF0b3I6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG1hdGNoZXJzID0gZ2V0TWF0Y2hlcnNXaXRoRmlsdGVyKHF1ZXJ5LCBrZXksIG9wZXJhdG9yLCB2YWx1ZSk7XG4gIGZvciAoY29uc3QgbWF0Y2hlciBvZiBtYXRjaGVycykge1xuICAgIHF1ZXJ5ID1cbiAgICAgIG1hdGNoZXIucGFyZW50Py50eXBlLmlkID09PSBMYWJlbEZpbHRlciA/IHJlbW92ZUxhYmVsRmlsdGVyKHF1ZXJ5LCBtYXRjaGVyKSA6IHJlbW92ZVNlbGVjdG9yKHF1ZXJ5LCBtYXRjaGVyKTtcbiAgfVxuICByZXR1cm4gcXVlcnk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUxhYmVsRmlsdGVyKHF1ZXJ5OiBzdHJpbmcsIG1hdGNoZXI6IFN5bnRheE5vZGUpOiBzdHJpbmcge1xuICBjb25zdCBwaXBlbGluZVN0YWdlID0gbWF0Y2hlci5wYXJlbnQ/LnBhcmVudDtcbiAgaWYgKCFwaXBlbGluZVN0YWdlIHx8IHBpcGVsaW5lU3RhZ2UudHlwZS5pZCAhPT0gUGlwZWxpbmVTdGFnZSkge1xuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuICByZXR1cm4gKHF1ZXJ5LnN1YnN0cmluZygwLCBwaXBlbGluZVN0YWdlLmZyb20pICsgcXVlcnkuc3Vic3RyaW5nKHBpcGVsaW5lU3RhZ2UudG8pKS50cmltKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVNlbGVjdG9yKHF1ZXJ5OiBzdHJpbmcsIG1hdGNoZXI6IFN5bnRheE5vZGUpOiBzdHJpbmcge1xuICBsZXQgc2VsZWN0b3I6IFN5bnRheE5vZGUgfCBudWxsID0gbWF0Y2hlcjtcbiAgZG8ge1xuICAgIHNlbGVjdG9yID0gc2VsZWN0b3IucGFyZW50O1xuICB9IHdoaWxlIChzZWxlY3RvciAmJiBzZWxlY3Rvci50eXBlLmlkICE9PSBTZWxlY3Rvcik7XG4gIGNvbnN0IGxhYmVsID0gbWF0Y2hlci5nZXRDaGlsZChJZGVudGlmaWVyKTtcbiAgaWYgKCFzZWxlY3RvciB8fCAhbGFiZWwpIHtcbiAgICByZXR1cm4gcXVlcnk7XG4gIH1cbiAgY29uc3QgbGFiZWxOYW1lID0gcXVlcnkuc3Vic3RyaW5nKGxhYmVsLmZyb20sIGxhYmVsLnRvKTtcblxuICBjb25zdCBwcmVmaXggPSBxdWVyeS5zdWJzdHJpbmcoMCwgc2VsZWN0b3IuZnJvbSk7XG4gIGNvbnN0IHN1ZmZpeCA9IHF1ZXJ5LnN1YnN0cmluZyhzZWxlY3Rvci50byk7XG5cbiAgY29uc3QgbWF0Y2hWaXNRdWVyeSA9IGJ1aWxkVmlzdWFsUXVlcnlGcm9tU3RyaW5nKHF1ZXJ5LnN1YnN0cmluZyhzZWxlY3Rvci5mcm9tLCBzZWxlY3Rvci50bykpO1xuICBtYXRjaFZpc1F1ZXJ5LnF1ZXJ5LmxhYmVscyA9IG1hdGNoVmlzUXVlcnkucXVlcnkubGFiZWxzLmZpbHRlcigobGFiZWwpID0+IGxhYmVsLmxhYmVsICE9PSBsYWJlbE5hbWUpO1xuXG4gIHJldHVybiBwcmVmaXggKyBtb2RlbGxlci5yZW5kZXJRdWVyeShtYXRjaFZpc1F1ZXJ5LnF1ZXJ5KSArIHN1ZmZpeDtcbn1cblxuZnVuY3Rpb24gZ2V0TWF0Y2hlcnNXaXRoRmlsdGVyKHF1ZXJ5OiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcsIG9wZXJhdG9yOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBTeW50YXhOb2RlW10ge1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgY29uc3QgbWF0Y2hlcnM6IFN5bnRheE5vZGVbXSA9IFtdO1xuICB0cmVlLml0ZXJhdGUoe1xuICAgIGVudGVyOiAoeyB0eXBlLCBub2RlIH0pOiB2b2lkID0+IHtcbiAgICAgIGlmICh0eXBlLmlkID09PSBNYXRjaGVyKSB7XG4gICAgICAgIG1hdGNoZXJzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBtYXRjaGVycy5maWx0ZXIoKG1hdGNoZXIpID0+IHtcbiAgICBjb25zdCBsYWJlbE5vZGUgPSBtYXRjaGVyLmdldENoaWxkKElkZW50aWZpZXIpO1xuICAgIGNvbnN0IG9wTm9kZSA9IGxhYmVsTm9kZT8ubmV4dFNpYmxpbmc7XG4gICAgY29uc3QgdmFsdWVOb2RlID0gbWF0Y2hlci5nZXRDaGlsZChTdHJpbmcpO1xuICAgIGlmICghbGFiZWxOb2RlIHx8ICFvcE5vZGUgfHwgIXZhbHVlTm9kZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBsYWJlbE5hbWUgPSBxdWVyeS5zdWJzdHJpbmcobGFiZWxOb2RlLmZyb20sIGxhYmVsTm9kZS50byk7XG4gICAgaWYgKGxhYmVsTmFtZSAhPT0gbGFiZWwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgbGFiZWxWYWx1ZSA9IHF1ZXJ5LnN1YnN0cmluZyh2YWx1ZU5vZGUuZnJvbSwgdmFsdWVOb2RlLnRvKTtcbiAgICBpZiAoaGFuZGxlUXVvdGVzKGxhYmVsVmFsdWUpICE9PSB1bmVzY2FwZUxhYmVsVmFsdWUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGxhYmVsT3BlcmF0b3IgPSBxdWVyeS5zdWJzdHJpbmcob3BOb2RlLmZyb20sIG9wTm9kZS50byk7XG4gICAgaWYgKGxhYmVsT3BlcmF0b3IgIT09IG9wZXJhdG9yKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9KTtcbn1cblxuLyoqXG4gKiBBZGRzIGxhYmVsIGZpbHRlciB0byBleGlzdGluZyBxdWVyeS4gVXNlZnVsIGZvciBxdWVyeSBtb2RpZmljYXRpb24gZm9yIGV4YW1wbGUgZm9yIGFkIGhvYyBmaWx0ZXJzLlxuICpcbiAqIEl0IHVzZXMgTG9nUUwgcGFyc2VyIHRvIGZpbmQgaW5zdGFuY2VzIG9mIGxhYmVscywgYWx0ZXJzIHRoZW0gYW5kIHRoZW4gc3BsaWNlcyB0aGVtIGJhY2sgaW50byB0aGUgcXVlcnkuXG4gKiBJbiBhIGNhc2Ugd2hlbiB3ZSBoYXZlIHBhcnNlciwgaW5zdGVhZCBvZiBhZGRpbmcgbmV3IGluc3RhbmNlIG9mIGxhYmVsIGl0IGFkZHMgbGFiZWwgZmlsdGVyIGFmdGVyIHRoZSBwYXJzZXIuXG4gKlxuICogVGhpcyBvcGVyYXRlcyBvbiBzdWJzdHJpbmdzIG9mIHRoZSBxdWVyeSB3aXRoIGxhYmVscyBhbmQgb3BlcmF0ZXMganVzdCBvbiB0aG9zZS4gVGhpcyBtYWtlcyB0aGlzXG4gKiBtb3JlIHJvYnVzdCBhbmQgY2FuIGFsdGVyIGV2ZW4gaW52YWxpZCBxdWVyaWVzLCBhbmQgcHJlc2VydmVzIGluIGdlbmVyYWwgdGhlIHF1ZXJ5IHN0cnVjdHVyZSBhbmQgd2hpdGVzcGFjZS5cbiAqXG4gKiBAcGFyYW0gcXVlcnlcbiAqIEBwYXJhbSBrZXlcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIG9wZXJhdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRMYWJlbFRvUXVlcnkocXVlcnk6IHN0cmluZywga2V5OiBzdHJpbmcsIG9wZXJhdG9yOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIWtleSB8fCAhdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05lZWQgbGFiZWwgdG8gYWRkIHRvIHF1ZXJ5LicpO1xuICB9XG5cbiAgY29uc3Qgc3RyZWFtU2VsZWN0b3JQb3NpdGlvbnMgPSBnZXRTdHJlYW1TZWxlY3RvclBvc2l0aW9ucyhxdWVyeSk7XG4gIGlmICghc3RyZWFtU2VsZWN0b3JQb3NpdGlvbnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgY29uc3QgaGFzU3RyZWFtU2VsZWN0b3JNYXRjaGVycyA9IGdldE1hdGNoZXJJblN0cmVhbVBvc2l0aW9ucyhxdWVyeSk7XG4gIGNvbnN0IGV2ZXJ5U3RyZWFtU2VsZWN0b3JIYXNNYXRjaGVyID0gc3RyZWFtU2VsZWN0b3JQb3NpdGlvbnMuZXZlcnkoKHN0cmVhbVNlbGVjdG9yUG9zaXRpb24pID0+XG4gICAgaGFzU3RyZWFtU2VsZWN0b3JNYXRjaGVycy5zb21lKFxuICAgICAgKG1hdGNoZXJQb3NpdGlvbikgPT5cbiAgICAgICAgbWF0Y2hlclBvc2l0aW9uLmZyb20gPj0gc3RyZWFtU2VsZWN0b3JQb3NpdGlvbi5mcm9tICYmIG1hdGNoZXJQb3NpdGlvbi50byA8PSBzdHJlYW1TZWxlY3RvclBvc2l0aW9uLnRvXG4gICAgKVxuICApO1xuICBjb25zdCBwYXJzZXJQb3NpdGlvbnMgPSBnZXRQYXJzZXJQb3NpdGlvbnMocXVlcnkpO1xuICBjb25zdCBsYWJlbEZpbHRlclBvc2l0aW9ucyA9IGdldExhYmVsRmlsdGVyUG9zaXRpb25zKHF1ZXJ5KTtcblxuICBjb25zdCBmaWx0ZXIgPSB0b0xhYmVsRmlsdGVyKGtleSwgdmFsdWUsIG9wZXJhdG9yKTtcbiAgLy8gSWYgd2UgaGF2ZSBub24tZW1wdHkgc3RyZWFtIHNlbGVjdG9yIGFuZCBwYXJzZXIvbGFiZWwgZmlsdGVyLCB3ZSB3YW50IHRvIGFkZCBhIG5ldyBsYWJlbCBmaWx0ZXIgYWZ0ZXIgdGhlIGxhc3Qgb25lLlxuICAvLyBJZiBzb21lIG9mIHRoZSBzdHJlYW0gc2VsZWN0b3JzIGRvbid0IGhhdmUgbWF0Y2hlcnMsIHdlIHdhbnQgdG8gYWRkIG5ldyBtYXRjaGVyIHRvIHRoZSBhbGwgc3RyZWFtIHNlbGVjdG9ycy5cbiAgaWYgKGV2ZXJ5U3RyZWFtU2VsZWN0b3JIYXNNYXRjaGVyICYmIChsYWJlbEZpbHRlclBvc2l0aW9ucy5sZW5ndGggfHwgcGFyc2VyUG9zaXRpb25zLmxlbmd0aCkpIHtcbiAgICBjb25zdCBwb3NpdGlvblRvQWRkID0gZmluZExhc3RQb3NpdGlvbihbLi4ubGFiZWxGaWx0ZXJQb3NpdGlvbnMsIC4uLnBhcnNlclBvc2l0aW9uc10pO1xuICAgIHJldHVybiBhZGRGaWx0ZXJBc0xhYmVsRmlsdGVyKHF1ZXJ5LCBbcG9zaXRpb25Ub0FkZF0sIGZpbHRlcik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFkZEZpbHRlclRvU3RyZWFtU2VsZWN0b3IocXVlcnksIHN0cmVhbVNlbGVjdG9yUG9zaXRpb25zLCBmaWx0ZXIpO1xuICB9XG59XG5cbi8qKlxuICogQWRkcyBwYXJzZXIgdG8gZXhpc3RpbmcgcXVlcnkuIFVzZWZ1bCBmb3IgcXVlcnkgbW9kaWZpY2F0aW9uIGZvciBoaW50cy5cbiAqIEl0IHVzZXMgTG9nUUwgcGFyc2VyIHRvIGZpbmQgaW5zdGFuY2VzIG9mIHN0cmVhbSBzZWxlY3RvcnMgb3IgbGluZSBmaWx0ZXJzIGFuZCBhZGRzIHBhcnNlciBhZnRlciB0aGVtLlxuICpcbiAqIEBwYXJhbSBxdWVyeVxuICogQHBhcmFtIHBhcnNlclxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUGFyc2VyVG9RdWVyeShxdWVyeTogc3RyaW5nLCBwYXJzZXI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGxpbmVGaWx0ZXJQb3NpdGlvbnMgPSBnZXRMaW5lRmlsdGVyc1Bvc2l0aW9ucyhxdWVyeSk7XG5cbiAgaWYgKGxpbmVGaWx0ZXJQb3NpdGlvbnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGFkZFBhcnNlcihxdWVyeSwgbGluZUZpbHRlclBvc2l0aW9ucywgcGFyc2VyKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzdHJlYW1TZWxlY3RvclBvc2l0aW9ucyA9IGdldFN0cmVhbVNlbGVjdG9yUG9zaXRpb25zKHF1ZXJ5KTtcbiAgICBpZiAoIXN0cmVhbVNlbGVjdG9yUG9zaXRpb25zLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgIH1cbiAgICByZXR1cm4gYWRkUGFyc2VyKHF1ZXJ5LCBzdHJlYW1TZWxlY3RvclBvc2l0aW9ucywgcGFyc2VyKTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZHMgZmlsdGVyaW5nIGZvciBwaXBlbGluZSBlcnJvcnMgdG8gZXhpc3RpbmcgcXVlcnkuIFVzZWZ1bCBmb3IgcXVlcnkgbW9kaWZpY2F0aW9uIGZvciBoaW50cy5cbiAqIEl0IHVzZXMgTG9nUUwgcGFyc2VyIHRvIGZpbmQgcGFyc2VycyBhbmQgYWRkcyBwaXBlbGluZSBlcnJvcnMgZmlsdGVyaW5nIGFmdGVyIHRoZW0uXG4gKlxuICogQHBhcmFtIHF1ZXJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGROb1BpcGVsaW5lRXJyb3JUb1F1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBwYXJzZXJQb3NpdGlvbnMgPSBnZXRQYXJzZXJQb3NpdGlvbnMocXVlcnkpO1xuICBpZiAoIXBhcnNlclBvc2l0aW9ucy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcXVlcnk7XG4gIH1cblxuICBjb25zdCBmaWx0ZXIgPSB0b0xhYmVsRmlsdGVyKCdfX2Vycm9yX18nLCAnJywgJz0nKTtcbiAgcmV0dXJuIGFkZEZpbHRlckFzTGFiZWxGaWx0ZXIocXVlcnksIHBhcnNlclBvc2l0aW9ucywgZmlsdGVyKTtcbn1cblxuLyoqXG4gKiBBZGRzIGxhYmVsIGZvcm1hdCB0byBleGlzdGluZyBxdWVyeS4gVXNlZnVsIGZvciBxdWVyeSBtb2RpZmljYXRpb24gZm9yIGhpbnRzLlxuICogSXQgdXNlcyBMb2dRTCBwYXJzZXIgdG8gZmluZCBsb2cgcXVlcnkgYW5kIGFkZCBsYWJlbCBmb3JtYXQgYXQgdGhlIGVuZC5cbiAqXG4gKiBAcGFyYW0gcXVlcnlcbiAqIEBwYXJhbSBsYWJlbEZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkTGFiZWxGb3JtYXRUb1F1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIGxhYmVsRm9ybWF0OiB7IG9yaWdpbmFsTGFiZWw6IHN0cmluZzsgcmVuYW1lVG86IHN0cmluZyB9KTogc3RyaW5nIHtcbiAgY29uc3QgbG9nUXVlcnlQb3NpdGlvbnMgPSBnZXRMb2dRdWVyeVBvc2l0aW9ucyhxdWVyeSk7XG4gIHJldHVybiBhZGRMYWJlbEZvcm1hdChxdWVyeSwgbG9nUXVlcnlQb3NpdGlvbnMsIGxhYmVsRm9ybWF0KTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21tZW50cyBmcm9tIHF1ZXJ5LlxuICogSXQgdXNlcyAgTG9nUUwgcGFyc2VyIHRvIGZpbmQgYWxsIExpbmVDb21tZW50cyBhbmQgcmVtb3ZlcyB0aGVtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ29tbWVudHNGcm9tUXVlcnkocXVlcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGxpbmVDb21tZW50UG9zaXRpb25zID0gZ2V0TGluZUNvbW1lbnRQb3NpdGlvbnMocXVlcnkpO1xuXG4gIGlmICghbGluZUNvbW1lbnRQb3NpdGlvbnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgbGV0IG5ld1F1ZXJ5ID0gJyc7XG4gIGxldCBwcmV2ID0gMDtcblxuICBmb3IgKGxldCBsaW5lQ29tbWVudFBvc2l0aW9uIG9mIGxpbmVDb21tZW50UG9zaXRpb25zKSB7XG4gICAgbmV3UXVlcnkgPSBuZXdRdWVyeSArIHF1ZXJ5LnN1YnN0cmluZyhwcmV2LCBsaW5lQ29tbWVudFBvc2l0aW9uLmZyb20pO1xuICAgIHByZXYgPSBsaW5lQ29tbWVudFBvc2l0aW9uLnRvO1xuICB9XG4gIG5ld1F1ZXJ5ID0gbmV3UXVlcnkgKyBxdWVyeS5zdWJzdHJpbmcocHJldik7XG4gIHJldHVybiBuZXdRdWVyeTtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgc3RyaW5nIGFuZCBnZXQgYWxsIFNlbGVjdG9yIHBvc2l0aW9ucyBpbiB0aGUgcXVlcnkgdG9nZXRoZXIgd2l0aCBwYXJzZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlXG4gKiBzZWxlY3Rvci5cbiAqIEBwYXJhbSBxdWVyeVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RyZWFtU2VsZWN0b3JQb3NpdGlvbnMocXVlcnk6IHN0cmluZyk6IE5vZGVQb3NpdGlvbltdIHtcbiAgY29uc3QgdHJlZSA9IHBhcnNlci5wYXJzZShxdWVyeSk7XG4gIGNvbnN0IHBvc2l0aW9uczogTm9kZVBvc2l0aW9uW10gPSBbXTtcbiAgdHJlZS5pdGVyYXRlKHtcbiAgICBlbnRlcjogKHsgdHlwZSwgZnJvbSwgdG8gfSk6IGZhbHNlIHwgdm9pZCA9PiB7XG4gICAgICBpZiAodHlwZS5pZCA9PT0gU2VsZWN0b3IpIHtcbiAgICAgICAgcG9zaXRpb25zLnB1c2gobmV3IE5vZGVQb3NpdGlvbihmcm9tLCB0bywgdHlwZSkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBwb3NpdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGdldE1hdGNoZXJJblN0cmVhbVBvc2l0aW9ucyhxdWVyeTogc3RyaW5nKTogTm9kZVBvc2l0aW9uW10ge1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgY29uc3QgcG9zaXRpb25zOiBOb2RlUG9zaXRpb25bXSA9IFtdO1xuICB0cmVlLml0ZXJhdGUoe1xuICAgIGVudGVyOiAoeyBub2RlIH0pOiBmYWxzZSB8IHZvaWQgPT4ge1xuICAgICAgaWYgKG5vZGUudHlwZS5pZCA9PT0gU2VsZWN0b3IpIHtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goLi4uZ2V0QWxsUG9zaXRpb25zSW5Ob2RlQnlUeXBlKHF1ZXJ5LCBub2RlLCBNYXRjaGVyKSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBwb3NpdGlvbnM7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHN0cmluZyBhbmQgZ2V0IGFsbCBMYWJlbFBhcnNlciBwb3NpdGlvbnMgaW4gdGhlIHF1ZXJ5LlxuICogQHBhcmFtIHF1ZXJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJzZXJQb3NpdGlvbnMocXVlcnk6IHN0cmluZyk6IE5vZGVQb3NpdGlvbltdIHtcbiAgY29uc3QgdHJlZSA9IHBhcnNlci5wYXJzZShxdWVyeSk7XG4gIGNvbnN0IHBvc2l0aW9uczogTm9kZVBvc2l0aW9uW10gPSBbXTtcbiAgdHJlZS5pdGVyYXRlKHtcbiAgICBlbnRlcjogKHsgdHlwZSwgZnJvbSwgdG8gfSk6IGZhbHNlIHwgdm9pZCA9PiB7XG4gICAgICBpZiAodHlwZS5pZCA9PT0gTGFiZWxQYXJzZXIgfHwgdHlwZS5pZCA9PT0gSnNvbkV4cHJlc3Npb25QYXJzZXIpIHtcbiAgICAgICAgcG9zaXRpb25zLnB1c2gobmV3IE5vZGVQb3NpdGlvbihmcm9tLCB0bywgdHlwZSkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBwb3NpdGlvbnM7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHN0cmluZyBhbmQgZ2V0IGFsbCBMYWJlbEZpbHRlciBwb3NpdGlvbnMgaW4gdGhlIHF1ZXJ5LlxuICogQHBhcmFtIHF1ZXJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYWJlbEZpbHRlclBvc2l0aW9ucyhxdWVyeTogc3RyaW5nKTogTm9kZVBvc2l0aW9uW10ge1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgY29uc3QgcG9zaXRpb25zOiBOb2RlUG9zaXRpb25bXSA9IFtdO1xuICB0cmVlLml0ZXJhdGUoe1xuICAgIGVudGVyOiAoeyB0eXBlLCBmcm9tLCB0byB9KTogZmFsc2UgfCB2b2lkID0+IHtcbiAgICAgIGlmICh0eXBlLmlkID09PSBMYWJlbEZpbHRlcikge1xuICAgICAgICBwb3NpdGlvbnMucHVzaChuZXcgTm9kZVBvc2l0aW9uKGZyb20sIHRvLCB0eXBlKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIHBvc2l0aW9ucztcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgc3RyaW5nIGFuZCBnZXQgYWxsIExpbmUgZmlsdGVyIHBvc2l0aW9ucyBpbiB0aGUgcXVlcnkuXG4gKiBAcGFyYW0gcXVlcnlcbiAqL1xuZnVuY3Rpb24gZ2V0TGluZUZpbHRlcnNQb3NpdGlvbnMocXVlcnk6IHN0cmluZyk6IE5vZGVQb3NpdGlvbltdIHtcbiAgY29uc3QgdHJlZSA9IHBhcnNlci5wYXJzZShxdWVyeSk7XG4gIGNvbnN0IHBvc2l0aW9uczogTm9kZVBvc2l0aW9uW10gPSBbXTtcbiAgdHJlZS5pdGVyYXRlKHtcbiAgICBlbnRlcjogKHsgdHlwZSwgZnJvbSwgdG8gfSk6IGZhbHNlIHwgdm9pZCA9PiB7XG4gICAgICBpZiAodHlwZS5pZCA9PT0gTGluZUZpbHRlcnMpIHtcbiAgICAgICAgcG9zaXRpb25zLnB1c2gobmV3IE5vZGVQb3NpdGlvbihmcm9tLCB0bywgdHlwZSkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBwb3NpdGlvbnM7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHN0cmluZyBhbmQgZ2V0IGFsbCBMb2cgcXVlcnkgcG9zaXRpb25zIGluIHRoZSBxdWVyeS5cbiAqIEBwYXJhbSBxdWVyeVxuICovXG5mdW5jdGlvbiBnZXRMb2dRdWVyeVBvc2l0aW9ucyhxdWVyeTogc3RyaW5nKTogTm9kZVBvc2l0aW9uW10ge1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgY29uc3QgcG9zaXRpb25zOiBOb2RlUG9zaXRpb25bXSA9IFtdO1xuICB0cmVlLml0ZXJhdGUoe1xuICAgIGVudGVyOiAoeyB0eXBlLCBmcm9tLCB0bywgbm9kZSB9KTogZmFsc2UgfCB2b2lkID0+IHtcbiAgICAgIGlmICh0eXBlLmlkID09PSBMb2dFeHByKSB7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKG5ldyBOb2RlUG9zaXRpb24oZnJvbSwgdG8sIHR5cGUpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGlzIGlzIGEgY2FzZSBpbiBtZXRyaWNzIHF1ZXJ5XG4gICAgICBpZiAodHlwZS5pZCA9PT0gTG9nUmFuZ2VFeHByKSB7XG4gICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIExvZ1JhbmdlRXhwciBpbmNsdWRlcyBib3RoIGxvZyBhbmQgbm9uLWxvZyAoZS5nLiBEdXJhdGlvbi9SYW5nZS8uLi4pIHBhcnRzIG9mIHF1ZXJ5LlxuICAgICAgICAvLyBXZSBnZXQgcG9zaXRpb24gb2YgYWxsIGxvZy1wYXJ0cyB3aXRoaW4gTG9nUmFuZ2VFeHByOiBTZWxlY3RvciwgUGlwZWxpbmVFeHByIGFuZCBVbndyYXBFeHByLlxuICAgICAgICBjb25zdCBsb2dQYXJ0c1Bvc2l0aW9uczogTm9kZVBvc2l0aW9uW10gPSBbXTtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBub2RlLmdldENoaWxkKFNlbGVjdG9yKTtcbiAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgbG9nUGFydHNQb3NpdGlvbnMucHVzaChOb2RlUG9zaXRpb24uZnJvbU5vZGUoc2VsZWN0b3IpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBpcGVsaW5lID0gbm9kZS5nZXRDaGlsZChQaXBlbGluZUV4cHIpO1xuICAgICAgICBpZiAocGlwZWxpbmUpIHtcbiAgICAgICAgICBsb2dQYXJ0c1Bvc2l0aW9ucy5wdXNoKE5vZGVQb3NpdGlvbi5mcm9tTm9kZShwaXBlbGluZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdW53cmFwID0gbm9kZS5nZXRDaGlsZChVbndyYXBFeHByKTtcbiAgICAgICAgaWYgKHVud3JhcCkge1xuICAgICAgICAgIGxvZ1BhcnRzUG9zaXRpb25zLnB1c2goTm9kZVBvc2l0aW9uLmZyb21Ob2RlKHVud3JhcCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2Ugc29ydCB0aGVtIGFuZCB0aGVuIHBpY2sgXCJmcm9tXCIgZnJvbSBmaXJzdCBwb3NpdGlvbiBhbmQgXCJ0b1wiIGZyb20gbGFzdCBwb3NpdGlvbi5cbiAgICAgICAgY29uc3Qgc29ydGVkID0gc29ydEJ5KGxvZ1BhcnRzUG9zaXRpb25zLCAocG9zaXRpb24pID0+IHBvc2l0aW9uLnRvKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2gobmV3IE5vZGVQb3NpdGlvbihzb3J0ZWRbMF0uZnJvbSwgc29ydGVkW3NvcnRlZC5sZW5ndGggLSAxXS50bykpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBwb3NpdGlvbnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0xhYmVsRmlsdGVyKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcGVyYXRvcjogc3RyaW5nKTogUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIge1xuICAvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGNvbnZlcnQgdGhlIHZhbHVlIGJhY2sgdG8gc3RyaW5nIGJlY2F1c2UgaXQgbWF5IGJlIGEgbnVtYmVyXG4gIHJldHVybiB7IGxhYmVsOiBrZXksIG9wOiBvcGVyYXRvciwgdmFsdWUgfTtcbn1cblxuLyoqXG4gKiBBZGQgZmlsdGVyIGFzIHRvIHN0cmVhbSBzZWxlY3RvcnNcbiAqIEBwYXJhbSBxdWVyeVxuICogQHBhcmFtIHZlY3RvclNlbGVjdG9yUG9zaXRpb25zXG4gKiBAcGFyYW0gZmlsdGVyXG4gKi9cbmZ1bmN0aW9uIGFkZEZpbHRlclRvU3RyZWFtU2VsZWN0b3IoXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIHZlY3RvclNlbGVjdG9yUG9zaXRpb25zOiBOb2RlUG9zaXRpb25bXSxcbiAgZmlsdGVyOiBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlclxuKTogc3RyaW5nIHtcbiAgbGV0IG5ld1F1ZXJ5ID0gJyc7XG4gIGxldCBwcmV2ID0gMDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHZlY3RvclNlbGVjdG9yUG9zaXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gVGhpcyBpcyBiYXNpY2FsbHkganVzdCBkb2luZyBzcGxpY2Ugb24gYSBzdHJpbmcgZm9yIGVhY2ggbWF0Y2hlZCB2ZWN0b3Igc2VsZWN0b3IuXG4gICAgY29uc3QgbWF0Y2ggPSB2ZWN0b3JTZWxlY3RvclBvc2l0aW9uc1tpXTtcbiAgICBjb25zdCBpc0xhc3QgPSBpID09PSB2ZWN0b3JTZWxlY3RvclBvc2l0aW9ucy5sZW5ndGggLSAxO1xuXG4gICAgY29uc3Qgc3RhcnQgPSBxdWVyeS5zdWJzdHJpbmcocHJldiwgbWF0Y2guZnJvbSk7XG4gICAgY29uc3QgZW5kID0gaXNMYXN0ID8gcXVlcnkuc3Vic3RyaW5nKG1hdGNoLnRvKSA6ICcnO1xuICAgIGNvbnN0IG1hdGNoVmlzUXVlcnkgPSBidWlsZFZpc3VhbFF1ZXJ5RnJvbVN0cmluZyhxdWVyeS5zdWJzdHJpbmcobWF0Y2guZnJvbSwgbWF0Y2gudG8pKTtcblxuICAgIGlmICghbGFiZWxFeGlzdHMobWF0Y2hWaXNRdWVyeS5xdWVyeS5sYWJlbHMsIGZpbHRlcikpIHtcbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gYWRkIGR1cGxpY2F0ZSBsYWJlbHMuXG4gICAgICBtYXRjaFZpc1F1ZXJ5LnF1ZXJ5LmxhYmVscy5wdXNoKGZpbHRlcik7XG4gICAgfVxuICAgIGNvbnN0IG5ld0xhYmVscyA9IG1vZGVsbGVyLnJlbmRlclF1ZXJ5KG1hdGNoVmlzUXVlcnkucXVlcnkpO1xuICAgIG5ld1F1ZXJ5ICs9IHN0YXJ0ICsgbmV3TGFiZWxzICsgZW5kO1xuICAgIHByZXYgPSBtYXRjaC50bztcbiAgfVxuICByZXR1cm4gbmV3UXVlcnk7XG59XG5cbi8qKlxuICogQWRkIGZpbHRlciBhcyBsYWJlbCBmaWx0ZXIgYWZ0ZXIgdGhlIHBhcnNlcnNcbiAqIEBwYXJhbSBxdWVyeVxuICogQHBhcmFtIHBvc2l0aW9uc1RvQWRkQWZ0ZXJcbiAqIEBwYXJhbSBmaWx0ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEZpbHRlckFzTGFiZWxGaWx0ZXIoXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIHBvc2l0aW9uc1RvQWRkQWZ0ZXI6IE5vZGVQb3NpdGlvbltdLFxuICBmaWx0ZXI6IFF1ZXJ5QnVpbGRlckxhYmVsRmlsdGVyXG4pOiBzdHJpbmcge1xuICBsZXQgbmV3UXVlcnkgPSAnJztcbiAgbGV0IHByZXYgPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zaXRpb25zVG9BZGRBZnRlci5sZW5ndGg7IGkrKykge1xuICAgIC8vIFRoaXMgaXMgYmFzaWNhbGx5IGp1c3QgZG9pbmcgc3BsaWNlIG9uIGEgc3RyaW5nIGZvciBlYWNoIG1hdGNoZWQgdmVjdG9yIHNlbGVjdG9yLlxuICAgIGNvbnN0IG1hdGNoID0gcG9zaXRpb25zVG9BZGRBZnRlcltpXTtcbiAgICBjb25zdCBpc0xhc3QgPSBpID09PSBwb3NpdGlvbnNUb0FkZEFmdGVyLmxlbmd0aCAtIDE7XG5cbiAgICBjb25zdCBzdGFydCA9IHF1ZXJ5LnN1YnN0cmluZyhwcmV2LCBtYXRjaC50byk7XG4gICAgY29uc3QgZW5kID0gaXNMYXN0ID8gcXVlcnkuc3Vic3RyaW5nKG1hdGNoLnRvKSA6ICcnO1xuXG4gICAgbGV0IGxhYmVsRmlsdGVyID0gJyc7XG4gICAgLy8gRm9yIDwgYW5kID4sIGlmIHRoZSB2YWx1ZSBpcyBudW1iZXIsIHdlIGRvbid0IGFkZCBxdW90ZXMgYXJvdW5kIGl0IGFuZCB1c2UgaXQgYXMgbnVtYmVyXG4gICAgaWYgKCFOdW1iZXIuaXNOYU4oTnVtYmVyKGZpbHRlci52YWx1ZSkpICYmIChmaWx0ZXIub3AgPT09ICc8JyB8fCBmaWx0ZXIub3AgPT09ICc+JykpIHtcbiAgICAgIGxhYmVsRmlsdGVyID0gYCB8ICR7ZmlsdGVyLmxhYmVsfSR7ZmlsdGVyLm9wfSR7TnVtYmVyKGZpbHRlci52YWx1ZSl9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gd2Ugbm93IHVuZXNjYXBlIGFsbCBlc2NhcGVkIHZhbHVlcyBhZ2FpbiwgYmVjYXVzZSB3ZSBhcmUgdXNpbmcgYmFja3RpY2tzIHdoaWNoIGNhbiBoYW5kbGUgdGhvc2UgY2FzZXMuXG4gICAgICAvLyB3ZSBhbHNvIGRvbid0IGNhcmUgYWJvdXQgdGhlIG9wZXJhdG9yIGhlcmUsIGJlY2F1c2Ugd2UgbmVlZCB0byB1bmVzY2FwZSBmb3IgYm90aCwgcmVnZXggYW5kIGVxdWFsLlxuICAgICAgbGFiZWxGaWx0ZXIgPSBgIHwgJHtmaWx0ZXIubGFiZWx9JHtmaWx0ZXIub3B9XFxgJHt1bmVzY2FwZUxhYmVsVmFsdWUoZmlsdGVyLnZhbHVlKX1cXGBgO1xuICAgIH1cblxuICAgIG5ld1F1ZXJ5ICs9IHN0YXJ0ICsgbGFiZWxGaWx0ZXIgKyBlbmQ7XG4gICAgcHJldiA9IG1hdGNoLnRvO1xuICB9XG4gIHJldHVybiBuZXdRdWVyeTtcbn1cblxuLyoqXG4gKiBBZGQgcGFyc2VyIGFmdGVyIGxpbmUgZmlsdGVyIG9yIHN0cmVhbSBzZWxlY3RvclxuICogQHBhcmFtIHF1ZXJ5XG4gKiBAcGFyYW0gcXVlcnlQYXJ0UG9zaXRpb25zXG4gKiBAcGFyYW0gcGFyc2VyXG4gKi9cbmZ1bmN0aW9uIGFkZFBhcnNlcihxdWVyeTogc3RyaW5nLCBxdWVyeVBhcnRQb3NpdGlvbnM6IE5vZGVQb3NpdGlvbltdLCBwYXJzZXI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuZXdRdWVyeSA9ICcnO1xuICBsZXQgcHJldiA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWVyeVBhcnRQb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBTcGxpY2Ugb24gYSBzdHJpbmcgZm9yIGVhY2ggbWF0Y2hlZCB2ZWN0b3Igc2VsZWN0b3JcbiAgICBjb25zdCBtYXRjaCA9IHF1ZXJ5UGFydFBvc2l0aW9uc1tpXTtcbiAgICBjb25zdCBpc0xhc3QgPSBpID09PSBxdWVyeVBhcnRQb3NpdGlvbnMubGVuZ3RoIC0gMTtcblxuICAgIGNvbnN0IHN0YXJ0ID0gcXVlcnkuc3Vic3RyaW5nKHByZXYsIG1hdGNoLnRvKTtcbiAgICBjb25zdCBlbmQgPSBpc0xhc3QgPyBxdWVyeS5zdWJzdHJpbmcobWF0Y2gudG8pIDogJyc7XG5cbiAgICAvLyBBZGQgcGFyc2VyXG4gICAgbmV3UXVlcnkgKz0gc3RhcnQgKyBgIHwgJHtwYXJzZXJ9YCArIGVuZDtcbiAgICBwcmV2ID0gbWF0Y2gudG87XG4gIH1cbiAgcmV0dXJuIG5ld1F1ZXJ5O1xufVxuXG4vKipcbiAqIEFkZCBmaWx0ZXIgYXMgbGFiZWwgZmlsdGVyIGFmdGVyIHRoZSBwYXJzZXJzXG4gKiBAcGFyYW0gcXVlcnlcbiAqIEBwYXJhbSBsb2dRdWVyeVBvc2l0aW9uc1xuICogQHBhcmFtIGxhYmVsRm9ybWF0XG4gKi9cbmZ1bmN0aW9uIGFkZExhYmVsRm9ybWF0KFxuICBxdWVyeTogc3RyaW5nLFxuICBsb2dRdWVyeVBvc2l0aW9uczogTm9kZVBvc2l0aW9uW10sXG4gIGxhYmVsRm9ybWF0OiB7IG9yaWdpbmFsTGFiZWw6IHN0cmluZzsgcmVuYW1lVG86IHN0cmluZyB9XG4pOiBzdHJpbmcge1xuICBsZXQgbmV3UXVlcnkgPSAnJztcbiAgbGV0IHByZXYgPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbG9nUXVlcnlQb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBUaGlzIGlzIGJhc2ljYWxseSBqdXN0IGRvaW5nIHNwbGljZSBvbiBhIHN0cmluZyBmb3IgZWFjaCBtYXRjaGVkIHZlY3RvciBzZWxlY3Rvci5cbiAgICBjb25zdCBtYXRjaCA9IGxvZ1F1ZXJ5UG9zaXRpb25zW2ldO1xuICAgIGNvbnN0IGlzTGFzdCA9IGkgPT09IGxvZ1F1ZXJ5UG9zaXRpb25zLmxlbmd0aCAtIDE7XG5cbiAgICBjb25zdCBzdGFydCA9IHF1ZXJ5LnN1YnN0cmluZyhwcmV2LCBtYXRjaC50byk7XG4gICAgY29uc3QgZW5kID0gaXNMYXN0ID8gcXVlcnkuc3Vic3RyaW5nKG1hdGNoLnRvKSA6ICcnO1xuXG4gICAgY29uc3QgbGFiZWxGaWx0ZXIgPSBgIHwgbGFiZWxfZm9ybWF0ICR7bGFiZWxGb3JtYXQucmVuYW1lVG99PSR7bGFiZWxGb3JtYXQub3JpZ2luYWxMYWJlbH1gO1xuICAgIG5ld1F1ZXJ5ICs9IHN0YXJ0ICsgbGFiZWxGaWx0ZXIgKyBlbmQ7XG4gICAgcHJldiA9IG1hdGNoLnRvO1xuICB9XG4gIHJldHVybiBuZXdRdWVyeTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZExpbmVGaWx0ZXIocXVlcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHN0cmVhbVNlbGVjdG9yUG9zaXRpb25zID0gZ2V0U3RyZWFtU2VsZWN0b3JQb3NpdGlvbnMocXVlcnkpO1xuICBpZiAoIXN0cmVhbVNlbGVjdG9yUG9zaXRpb25zLmxlbmd0aCkge1xuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuICBjb25zdCBzdHJlYW1TZWxlY3RvckVuZCA9IHN0cmVhbVNlbGVjdG9yUG9zaXRpb25zWzBdLnRvO1xuXG4gIGNvbnN0IG5ld1F1ZXJ5RXhwciA9IHF1ZXJ5LnNsaWNlKDAsIHN0cmVhbVNlbGVjdG9yRW5kKSArICcgfD0gYGAnICsgcXVlcnkuc2xpY2Uoc3RyZWFtU2VsZWN0b3JFbmQpO1xuICByZXR1cm4gbmV3UXVlcnlFeHByO1xufVxuXG5mdW5jdGlvbiBnZXRMaW5lQ29tbWVudFBvc2l0aW9ucyhxdWVyeTogc3RyaW5nKTogTm9kZVBvc2l0aW9uW10ge1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgY29uc3QgcG9zaXRpb25zOiBOb2RlUG9zaXRpb25bXSA9IFtdO1xuICB0cmVlLml0ZXJhdGUoe1xuICAgIGVudGVyOiAoeyB0eXBlLCBmcm9tLCB0byB9KTogZmFsc2UgfCB2b2lkID0+IHtcbiAgICAgIGlmICh0eXBlLmlkID09PSBMaW5lQ29tbWVudCkge1xuICAgICAgICBwb3NpdGlvbnMucHVzaChuZXcgTm9kZVBvc2l0aW9uKGZyb20sIHRvLCB0eXBlKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIHBvc2l0aW9ucztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBsYWJlbCBleGlzdHMgaW4gdGhlIGxpc3Qgb2YgbGFiZWxzIGJ1dCBpZ25vcmUgdGhlIG9wZXJhdG9yLlxuICogQHBhcmFtIGxhYmVsc1xuICogQHBhcmFtIGZpbHRlclxuICovXG5mdW5jdGlvbiBsYWJlbEV4aXN0cyhsYWJlbHM6IFF1ZXJ5QnVpbGRlckxhYmVsRmlsdGVyW10sIGZpbHRlcjogUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIpIHtcbiAgcmV0dXJuIGxhYmVscy5maW5kKChsYWJlbCkgPT4gbGFiZWwubGFiZWwgPT09IGZpbHRlci5sYWJlbCAmJiBsYWJlbC52YWx1ZSA9PT0gZmlsdGVyLnZhbHVlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxhc3QgcG9zaXRpb24gYmFzZWQgb24gXCJ0b1wiIHByb3BlcnR5XG4gKiBAcGFyYW0gcG9zaXRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGFzdFBvc2l0aW9uKHBvc2l0aW9uczogTm9kZVBvc2l0aW9uW10pOiBOb2RlUG9zaXRpb24ge1xuICByZXR1cm4gcG9zaXRpb25zLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gKHByZXYudG8gPiBjdXJyZW50LnRvID8gcHJldiA6IGN1cnJlbnQpKTtcbn1cblxuZnVuY3Rpb24gZ2V0QWxsUG9zaXRpb25zSW5Ob2RlQnlUeXBlKHF1ZXJ5OiBzdHJpbmcsIG5vZGU6IFN5bnRheE5vZGUsIHR5cGU6IG51bWJlcik6IE5vZGVQb3NpdGlvbltdIHtcbiAgaWYgKG5vZGUudHlwZS5pZCA9PT0gdHlwZSkge1xuICAgIHJldHVybiBbTm9kZVBvc2l0aW9uLmZyb21Ob2RlKG5vZGUpXTtcbiAgfVxuXG4gIGNvbnN0IHBvc2l0aW9uczogTm9kZVBvc2l0aW9uW10gPSBbXTtcbiAgbGV0IHBvcyA9IDA7XG4gIGxldCBjaGlsZCA9IG5vZGUuY2hpbGRBZnRlcihwb3MpO1xuICB3aGlsZSAoY2hpbGQpIHtcbiAgICBwb3NpdGlvbnMucHVzaCguLi5nZXRBbGxQb3NpdGlvbnNJbk5vZGVCeVR5cGUocXVlcnksIGNoaWxkLCB0eXBlKSk7XG4gICAgcG9zID0gY2hpbGQudG87XG4gICAgY2hpbGQgPSBub2RlLmNoaWxkQWZ0ZXIocG9zKTtcbiAgfVxuICByZXR1cm4gcG9zaXRpb25zO1xufVxuIl0sIm5hbWVzIjpbImxhYmVsIiwicGFyc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/modifyQuery.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/module.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   plugin: () => (/* binding */ plugin)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/datasource.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/common.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/appEvents.ts\");\n/* harmony import */ var _components_LokiCheatSheet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiCheatSheet.tsx\");\n/* harmony import */ var _components_LokiQueryEditorByApp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryEditorByApp.tsx\");\n/* harmony import */ var _configuration_ConfigEditor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/configuration/ConfigEditor.tsx\");\n/* harmony import */ var _datasource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/datasource.ts\");\n/* harmony import */ var _tracking__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/tracking.ts\");\n\n\n\n\n\n\n\n\nconst plugin = new _grafana_data__WEBPACK_IMPORTED_MODULE_5__.DataSourcePlugin(_datasource__WEBPACK_IMPORTED_MODULE_3__.LokiDatasource).setQueryEditor(_components_LokiQueryEditorByApp__WEBPACK_IMPORTED_MODULE_1__[\"default\"]).setConfigEditor(_configuration_ConfigEditor__WEBPACK_IMPORTED_MODULE_2__.ConfigEditor).setQueryEditorHelp(_components_LokiCheatSheet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n(0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_6__.getAppEvents)().subscribe(_grafana_data__WEBPACK_IMPORTED_MODULE_7__.DashboardLoadedEvent, _tracking__WEBPACK_IMPORTED_MODULE_4__.onDashboardLoadedHandler);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL21vZHVsZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQzFCO0FBRUY7QUFDTTtBQUNKO0FBQ0U7QUFDVTtBQUdsQyxNQUFNLFNBQVMsSUFBSSwyREFBZ0IsQ0FBQyx1REFBYyxFQUN0RCxlQUFlLHdFQUFvQixFQUNuQyxnQkFBZ0IscUVBQVksRUFDNUIsbUJBQW1CLGtFQUFjO0FBR3BDLDhEQUFZLENBQUMsRUFBRSxVQUEyQywrREFBb0IsRUFBRSwrREFBd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9tb2R1bGUudHM/ZmI2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXNoYm9hcmRMb2FkZWRFdmVudCwgRGF0YVNvdXJjZVBsdWdpbiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgZ2V0QXBwRXZlbnRzIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5cbmltcG9ydCBMb2tpQ2hlYXRTaGVldCBmcm9tICcuL2NvbXBvbmVudHMvTG9raUNoZWF0U2hlZXQnO1xuaW1wb3J0IExva2lRdWVyeUVkaXRvckJ5QXBwIGZyb20gJy4vY29tcG9uZW50cy9Mb2tpUXVlcnlFZGl0b3JCeUFwcCc7XG5pbXBvcnQgeyBDb25maWdFZGl0b3IgfSBmcm9tICcuL2NvbmZpZ3VyYXRpb24vQ29uZmlnRWRpdG9yJztcbmltcG9ydCB7IExva2lEYXRhc291cmNlIH0gZnJvbSAnLi9kYXRhc291cmNlJztcbmltcG9ydCB7IG9uRGFzaGJvYXJkTG9hZGVkSGFuZGxlciB9IGZyb20gJy4vdHJhY2tpbmcnO1xuaW1wb3J0IHsgTG9raVF1ZXJ5IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBwbHVnaW4gPSBuZXcgRGF0YVNvdXJjZVBsdWdpbihMb2tpRGF0YXNvdXJjZSlcbiAgLnNldFF1ZXJ5RWRpdG9yKExva2lRdWVyeUVkaXRvckJ5QXBwKVxuICAuc2V0Q29uZmlnRWRpdG9yKENvbmZpZ0VkaXRvcilcbiAgLnNldFF1ZXJ5RWRpdG9ySGVscChMb2tpQ2hlYXRTaGVldCk7XG5cbi8vIFN1YnNjcmliZSB0byBvbiBkYXNoYm9hcmQgbG9hZGVkIGV2ZW50IHNvIHRoYXQgd2UgY2FuIHRyYWNrIHBsdWdpbiBhZG9wdGlvblxuZ2V0QXBwRXZlbnRzKCkuc3Vic2NyaWJlPERhc2hib2FyZExvYWRlZEV2ZW50PExva2lRdWVyeT4+KERhc2hib2FyZExvYWRlZEV2ZW50LCBvbkRhc2hib2FyZExvYWRlZEhhbmRsZXIpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/module.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/queryHints.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getQueryHints: () => (/* binding */ getQueryHints)\n/* harmony export */ });\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _responseUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/responseUtils.ts\");\n\n\n\nfunction getQueryHints(query, series) {\n  if (series.length === 0) {\n    return [];\n  }\n  const hints = [];\n  const { queryWithParser, parserCount } = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_0__.isQueryWithParser)(query);\n  if (!queryWithParser) {\n    const { hasLogfmt, hasJSON, hasPack } = (0,_responseUtils__WEBPACK_IMPORTED_MODULE_1__.extractLogParserFromDataFrame)(series[0]);\n    if (hasJSON) {\n      if (hasPack) {\n        hints.push({\n          type: \"ADD_UNPACK_PARSER\",\n          label: \"Selected log stream selector has packed logs.\",\n          fix: {\n            title: \"add unpack parser\",\n            label: \"Consider using unpack parser.\",\n            action: {\n              type: \"ADD_UNPACK_PARSER\",\n              query\n            }\n          }\n        });\n      } else {\n        hints.push({\n          type: \"ADD_JSON_PARSER\",\n          label: \"Selected log stream selector has JSON formatted logs.\",\n          fix: {\n            title: \"add json parser\",\n            label: \"Consider using JSON parser.\",\n            action: {\n              type: \"ADD_JSON_PARSER\",\n              query\n            }\n          }\n        });\n      }\n    }\n    if (hasLogfmt) {\n      hints.push({\n        type: \"ADD_LOGFMT_PARSER\",\n        label: \"Selected log stream selector has logfmt formatted logs.\",\n        fix: {\n          title: \"add logfmt parser\",\n          label: \"Consider using logfmt parser to turn key-value pairs in your log lines to labels.\",\n          action: {\n            type: \"ADD_LOGFMT_PARSER\",\n            query\n          }\n        }\n      });\n    }\n  }\n  if (queryWithParser) {\n    if (parserCount === 1) {\n      const hasPipelineErrorFiltering = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_0__.isQueryPipelineErrorFiltering)(query);\n      const hasError = (0,_responseUtils__WEBPACK_IMPORTED_MODULE_1__.extractHasErrorLabelFromDataFrame)(series[0]);\n      if (hasError && !hasPipelineErrorFiltering) {\n        hints.push({\n          type: \"ADD_NO_PIPELINE_ERROR\",\n          label: \"Some logs in your selected log streams have parsing error.\",\n          fix: {\n            title: \"remove pipeline errors\",\n            label: \"Consider filtering out logs with parsing errors.\",\n            action: {\n              type: \"ADD_NO_PIPELINE_ERROR\",\n              query\n            }\n          }\n        });\n      }\n    }\n    const hasLabelFilter = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_0__.isQueryWithLabelFilter)(query);\n    if (!hasLabelFilter) {\n      hints.push({\n        type: \"ADD_LABEL_FILTER\",\n        label: \"Consider filtering logs by their label and value.\",\n        fix: {\n          title: \"add label filter\",\n          label: \"\",\n          action: {\n            type: \"ADD_LABEL_FILTER\",\n            query\n          }\n        }\n      });\n    }\n  }\n  const queryWithLabelFormat = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_0__.isQueryWithLabelFormat)(query);\n  if (!queryWithLabelFormat) {\n    const hasLevel = (0,_responseUtils__WEBPACK_IMPORTED_MODULE_1__.dataFrameHasLevelLabel)(series[0]);\n    const levelLikeLabel = (0,_responseUtils__WEBPACK_IMPORTED_MODULE_1__.extractLevelLikeLabelFromDataFrame)(series[0]);\n    if (!hasLevel && levelLikeLabel) {\n      hints.push({\n        type: \"ADD_LEVEL_LABEL_FORMAT\",\n        label: `Some logs in your selected log stream have \"${levelLikeLabel}\" label.`,\n        fix: {\n          title: \"add label level format\",\n          label: `If ${levelLikeLabel} label has level values, consider using label_format to rename it to \"level\". Level label can be then visualized in log volumes.`,\n          action: {\n            type: \"ADD_LEVEL_LABEL_FORMAT\",\n            query,\n            options: {\n              renameTo: \"level\",\n              originalLabel: levelLikeLabel\n            }\n          }\n        }\n      });\n    }\n  }\n  const hasLineFilter = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_0__.isQueryWithLineFilter)(query);\n  if (!hasLineFilter) {\n    hints.push({\n      type: \"ADD_LINE_FILTER\",\n      label: \"Consider filtering logs for specific string.\",\n      fix: {\n        title: \"add line filter\",\n        label: \"\",\n        action: {\n          type: \"ADD_LINE_FILTER\",\n          query\n        }\n      }\n    });\n  }\n  return hints;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5SGludHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQVFPO0FBTUE7QUFFQSxTQUFTLGNBQWMsT0FBZSxRQUFrQztBQUM3RSxNQUFJLE9BQU8sV0FBVyxHQUFHO0FBQ3ZCLFdBQU8sQ0FBQztBQUFBLEVBQ1Y7QUFFQSxRQUFNLFFBQXFCLENBQUM7QUFDNUIsUUFBTSxFQUFFLGlCQUFpQixZQUFZLElBQUksOERBQWlCLENBQUMsS0FBSztBQUVoRSxNQUFJLENBQUMsaUJBQWlCO0FBQ3BCLFVBQU0sRUFBRSxXQUFXLFNBQVMsUUFBUSxJQUFJLDZFQUE2QixDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQy9FLFFBQUksU0FBUztBQUNYLFVBQUksU0FBUztBQUNYLGNBQU0sS0FBSztBQUFBLFVBQ1QsTUFBTTtBQUFBLFVBQ04sT0FBTztBQUFBLFVBQ1AsS0FBSztBQUFBLFlBQ0gsT0FBTztBQUFBLFlBQ1AsT0FBTztBQUFBLFlBQ1AsUUFBUTtBQUFBLGNBQ04sTUFBTTtBQUFBLGNBQ047QUFBQSxZQUNGO0FBQUEsVUFDRjtBQUFBLFFBQ0YsQ0FBQztBQUFBLE1BQ0gsT0FBTztBQUNMLGNBQU0sS0FBSztBQUFBLFVBQ1QsTUFBTTtBQUFBLFVBQ04sT0FBTztBQUFBLFVBQ1AsS0FBSztBQUFBLFlBQ0gsT0FBTztBQUFBLFlBQ1AsT0FBTztBQUFBLFlBQ1AsUUFBUTtBQUFBLGNBQ04sTUFBTTtBQUFBLGNBQ047QUFBQSxZQUNGO0FBQUEsVUFDRjtBQUFBLFFBQ0YsQ0FBQztBQUFBLE1BQ0g7QUFBQSxJQUNGO0FBRUEsUUFBSSxXQUFXO0FBQ2IsWUFBTSxLQUFLO0FBQUEsUUFDVCxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxLQUFLO0FBQUEsVUFDSCxPQUFPO0FBQUEsVUFDUCxPQUFPO0FBQUEsVUFDUCxRQUFRO0FBQUEsWUFDTixNQUFNO0FBQUEsWUFDTjtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFFQSxNQUFJLGlCQUFpQjtBQUVuQixRQUFJLGdCQUFnQixHQUFHO0FBQ3JCLFlBQU0sNEJBQTRCLDBFQUE2QixDQUFDLEtBQUs7QUFDckUsWUFBTSxXQUFXLGlGQUFpQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzVELFVBQUksWUFBWSxDQUFDLDJCQUEyQjtBQUMxQyxjQUFNLEtBQUs7QUFBQSxVQUNULE1BQU07QUFBQSxVQUNOLE9BQU87QUFBQSxVQUNQLEtBQUs7QUFBQSxZQUNILE9BQU87QUFBQSxZQUNQLE9BQU87QUFBQSxZQUNQLFFBQVE7QUFBQSxjQUNOLE1BQU07QUFBQSxjQUNOO0FBQUEsWUFDRjtBQUFBLFVBQ0Y7QUFBQSxRQUNGLENBQUM7QUFBQSxNQUNIO0FBQUEsSUFDRjtBQUVBLFVBQU0saUJBQWlCLG1FQUFzQixDQUFDLEtBQUs7QUFFbkQsUUFBSSxDQUFDLGdCQUFnQjtBQUNuQixZQUFNLEtBQUs7QUFBQSxRQUNULE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLEtBQUs7QUFBQSxVQUNILE9BQU87QUFBQSxVQUNQLE9BQU87QUFBQSxVQUNQLFFBQVE7QUFBQSxZQUNOLE1BQU07QUFBQSxZQUNOO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRjtBQUVBLFFBQU0sdUJBQXVCLG1FQUFzQixDQUFDLEtBQUs7QUFDekQsTUFBSSxDQUFDLHNCQUFzQjtBQUN6QixVQUFNLFdBQVcsc0VBQXNCLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDakQsVUFBTSxpQkFBaUIsa0ZBQWtDLENBQUMsT0FBTyxDQUFDLENBQUM7QUFHbkUsUUFBSSxDQUFDLFlBQVksZ0JBQWdCO0FBQy9CLFlBQU0sS0FBSztBQUFBLFFBQ1QsTUFBTTtBQUFBLFFBQ04sT0FBTywrQ0FBK0M7QUFBQSxRQUN0RCxLQUFLO0FBQUEsVUFDSCxPQUFPO0FBQUEsVUFDUCxPQUFPLE1BQU07QUFBQSxVQUNiLFFBQVE7QUFBQSxZQUNOLE1BQU07QUFBQSxZQUNOO0FBQUEsWUFDQSxTQUFTO0FBQUEsY0FDUCxVQUFVO0FBQUEsY0FDVixlQUFlO0FBQUEsWUFDakI7QUFBQSxVQUNGO0FBQUEsUUFDRjtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBRUEsUUFBTSxnQkFBZ0Isa0VBQXFCLENBQUMsS0FBSztBQUVqRCxNQUFJLENBQUMsZUFBZTtBQUNsQixVQUFNLEtBQUs7QUFBQSxNQUNULE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxNQUNQLEtBQUs7QUFBQSxRQUNILE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBRUEsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvcXVlcnlIaW50cy50cz9iMzZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFGcmFtZSwgUXVlcnlIaW50IH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmltcG9ydCB7XG4gIGlzUXVlcnlXaXRoTGFiZWxGaWx0ZXIsXG4gIGlzUXVlcnlQaXBlbGluZUVycm9yRmlsdGVyaW5nLFxuICBpc1F1ZXJ5V2l0aExhYmVsRm9ybWF0LFxuICBpc1F1ZXJ5V2l0aFBhcnNlcixcbiAgaXNRdWVyeVdpdGhMaW5lRmlsdGVyLFxufSBmcm9tICcuL3F1ZXJ5VXRpbHMnO1xuaW1wb3J0IHtcbiAgZGF0YUZyYW1lSGFzTGV2ZWxMYWJlbCxcbiAgZXh0cmFjdEhhc0Vycm9yTGFiZWxGcm9tRGF0YUZyYW1lLFxuICBleHRyYWN0TGV2ZWxMaWtlTGFiZWxGcm9tRGF0YUZyYW1lLFxuICBleHRyYWN0TG9nUGFyc2VyRnJvbURhdGFGcmFtZSxcbn0gZnJvbSAnLi9yZXNwb25zZVV0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5SGludHMocXVlcnk6IHN0cmluZywgc2VyaWVzOiBEYXRhRnJhbWVbXSk6IFF1ZXJ5SGludFtdIHtcbiAgaWYgKHNlcmllcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBoaW50czogUXVlcnlIaW50W10gPSBbXTtcbiAgY29uc3QgeyBxdWVyeVdpdGhQYXJzZXIsIHBhcnNlckNvdW50IH0gPSBpc1F1ZXJ5V2l0aFBhcnNlcihxdWVyeSk7XG5cbiAgaWYgKCFxdWVyeVdpdGhQYXJzZXIpIHtcbiAgICBjb25zdCB7IGhhc0xvZ2ZtdCwgaGFzSlNPTiwgaGFzUGFjayB9ID0gZXh0cmFjdExvZ1BhcnNlckZyb21EYXRhRnJhbWUoc2VyaWVzWzBdKTtcbiAgICBpZiAoaGFzSlNPTikge1xuICAgICAgaWYgKGhhc1BhY2spIHtcbiAgICAgICAgaGludHMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ0FERF9VTlBBQ0tfUEFSU0VSJyxcbiAgICAgICAgICBsYWJlbDogJ1NlbGVjdGVkIGxvZyBzdHJlYW0gc2VsZWN0b3IgaGFzIHBhY2tlZCBsb2dzLicsXG4gICAgICAgICAgZml4OiB7XG4gICAgICAgICAgICB0aXRsZTogJ2FkZCB1bnBhY2sgcGFyc2VyJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ29uc2lkZXIgdXNpbmcgdW5wYWNrIHBhcnNlci4nLFxuICAgICAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdBRERfVU5QQUNLX1BBUlNFUicsXG4gICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhpbnRzLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdBRERfSlNPTl9QQVJTRVInLFxuICAgICAgICAgIGxhYmVsOiAnU2VsZWN0ZWQgbG9nIHN0cmVhbSBzZWxlY3RvciBoYXMgSlNPTiBmb3JtYXR0ZWQgbG9ncy4nLFxuICAgICAgICAgIGZpeDoge1xuICAgICAgICAgICAgdGl0bGU6ICdhZGQganNvbiBwYXJzZXInLFxuICAgICAgICAgICAgbGFiZWw6ICdDb25zaWRlciB1c2luZyBKU09OIHBhcnNlci4nLFxuICAgICAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdBRERfSlNPTl9QQVJTRVInLFxuICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhc0xvZ2ZtdCkge1xuICAgICAgaGludHMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdBRERfTE9HRk1UX1BBUlNFUicsXG4gICAgICAgIGxhYmVsOiAnU2VsZWN0ZWQgbG9nIHN0cmVhbSBzZWxlY3RvciBoYXMgbG9nZm10IGZvcm1hdHRlZCBsb2dzLicsXG4gICAgICAgIGZpeDoge1xuICAgICAgICAgIHRpdGxlOiAnYWRkIGxvZ2ZtdCBwYXJzZXInLFxuICAgICAgICAgIGxhYmVsOiAnQ29uc2lkZXIgdXNpbmcgbG9nZm10IHBhcnNlciB0byB0dXJuIGtleS12YWx1ZSBwYWlycyBpbiB5b3VyIGxvZyBsaW5lcyB0byBsYWJlbHMuJyxcbiAgICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICAgIHR5cGU6ICdBRERfTE9HRk1UX1BBUlNFUicsXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHF1ZXJ5V2l0aFBhcnNlcikge1xuICAgIC8vIFRvIGtlZXAgdGhpcyBzaW1wbGUsIHdlIGNvbnNpZGVyIHBpcGVsaW5lIGVycm9yIGZpbHRlcmluZyBoaW50IG9ubHkgaXMgcXVlcnkgaGFzIHVwIHRvIDEgcGFyc2VyXG4gICAgaWYgKHBhcnNlckNvdW50ID09PSAxKSB7XG4gICAgICBjb25zdCBoYXNQaXBlbGluZUVycm9yRmlsdGVyaW5nID0gaXNRdWVyeVBpcGVsaW5lRXJyb3JGaWx0ZXJpbmcocXVlcnkpO1xuICAgICAgY29uc3QgaGFzRXJyb3IgPSBleHRyYWN0SGFzRXJyb3JMYWJlbEZyb21EYXRhRnJhbWUoc2VyaWVzWzBdKTtcbiAgICAgIGlmIChoYXNFcnJvciAmJiAhaGFzUGlwZWxpbmVFcnJvckZpbHRlcmluZykge1xuICAgICAgICBoaW50cy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnQUREX05PX1BJUEVMSU5FX0VSUk9SJyxcbiAgICAgICAgICBsYWJlbDogJ1NvbWUgbG9ncyBpbiB5b3VyIHNlbGVjdGVkIGxvZyBzdHJlYW1zIGhhdmUgcGFyc2luZyBlcnJvci4nLFxuICAgICAgICAgIGZpeDoge1xuICAgICAgICAgICAgdGl0bGU6ICdyZW1vdmUgcGlwZWxpbmUgZXJyb3JzJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ29uc2lkZXIgZmlsdGVyaW5nIG91dCBsb2dzIHdpdGggcGFyc2luZyBlcnJvcnMuJyxcbiAgICAgICAgICAgIGFjdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnQUREX05PX1BJUEVMSU5FX0VSUk9SJyxcbiAgICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhc0xhYmVsRmlsdGVyID0gaXNRdWVyeVdpdGhMYWJlbEZpbHRlcihxdWVyeSk7XG5cbiAgICBpZiAoIWhhc0xhYmVsRmlsdGVyKSB7XG4gICAgICBoaW50cy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ0FERF9MQUJFTF9GSUxURVInLFxuICAgICAgICBsYWJlbDogJ0NvbnNpZGVyIGZpbHRlcmluZyBsb2dzIGJ5IHRoZWlyIGxhYmVsIGFuZCB2YWx1ZS4nLFxuICAgICAgICBmaXg6IHtcbiAgICAgICAgICB0aXRsZTogJ2FkZCBsYWJlbCBmaWx0ZXInLFxuICAgICAgICAgIGxhYmVsOiAnJyxcbiAgICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICAgIHR5cGU6ICdBRERfTEFCRUxfRklMVEVSJyxcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBxdWVyeVdpdGhMYWJlbEZvcm1hdCA9IGlzUXVlcnlXaXRoTGFiZWxGb3JtYXQocXVlcnkpO1xuICBpZiAoIXF1ZXJ5V2l0aExhYmVsRm9ybWF0KSB7XG4gICAgY29uc3QgaGFzTGV2ZWwgPSBkYXRhRnJhbWVIYXNMZXZlbExhYmVsKHNlcmllc1swXSk7XG4gICAgY29uc3QgbGV2ZWxMaWtlTGFiZWwgPSBleHRyYWN0TGV2ZWxMaWtlTGFiZWxGcm9tRGF0YUZyYW1lKHNlcmllc1swXSk7XG5cbiAgICAvLyBBZGQgaGludCBvbmx5IGlmIHdlIGRvbid0IGhhdmUgXCJsZXZlbFwiIGxhYmVsIGFuZCBoYXZlIGxldmVsLWxpa2UgbGFiZWxcbiAgICBpZiAoIWhhc0xldmVsICYmIGxldmVsTGlrZUxhYmVsKSB7XG4gICAgICBoaW50cy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ0FERF9MRVZFTF9MQUJFTF9GT1JNQVQnLFxuICAgICAgICBsYWJlbDogYFNvbWUgbG9ncyBpbiB5b3VyIHNlbGVjdGVkIGxvZyBzdHJlYW0gaGF2ZSBcIiR7bGV2ZWxMaWtlTGFiZWx9XCIgbGFiZWwuYCxcbiAgICAgICAgZml4OiB7XG4gICAgICAgICAgdGl0bGU6ICdhZGQgbGFiZWwgbGV2ZWwgZm9ybWF0JyxcbiAgICAgICAgICBsYWJlbDogYElmICR7bGV2ZWxMaWtlTGFiZWx9IGxhYmVsIGhhcyBsZXZlbCB2YWx1ZXMsIGNvbnNpZGVyIHVzaW5nIGxhYmVsX2Zvcm1hdCB0byByZW5hbWUgaXQgdG8gXCJsZXZlbFwiLiBMZXZlbCBsYWJlbCBjYW4gYmUgdGhlbiB2aXN1YWxpemVkIGluIGxvZyB2b2x1bWVzLmAsXG4gICAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiAnQUREX0xFVkVMX0xBQkVMX0ZPUk1BVCcsXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgcmVuYW1lVG86ICdsZXZlbCcsXG4gICAgICAgICAgICAgIG9yaWdpbmFsTGFiZWw6IGxldmVsTGlrZUxhYmVsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFzTGluZUZpbHRlciA9IGlzUXVlcnlXaXRoTGluZUZpbHRlcihxdWVyeSk7XG5cbiAgaWYgKCFoYXNMaW5lRmlsdGVyKSB7XG4gICAgaGludHMucHVzaCh7XG4gICAgICB0eXBlOiAnQUREX0xJTkVfRklMVEVSJyxcbiAgICAgIGxhYmVsOiAnQ29uc2lkZXIgZmlsdGVyaW5nIGxvZ3MgZm9yIHNwZWNpZmljIHN0cmluZy4nLFxuICAgICAgZml4OiB7XG4gICAgICAgIHRpdGxlOiAnYWRkIGxpbmUgZmlsdGVyJyxcbiAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICB0eXBlOiAnQUREX0xJTkVfRklMVEVSJyxcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gaGludHM7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/queryHints.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querySplitting.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   partitionTimeRange: () => (/* binding */ partitionTimeRange),\n/* harmony export */   runSplitGroupedQueries: () => (/* binding */ runSplitGroupedQueries),\n/* harmony export */   runSplitQuery: () => (/* binding */ runSplitQuery)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/Observable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/tap.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/ArrayDataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/query.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/durationutil.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/rangeutil.ts\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./packages/grafana-schema/src/raw/dashboard/x/dashboard_types.gen.ts\");\n/* harmony import */ var _logsTimeSplitting__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/logsTimeSplitting.ts\");\n/* harmony import */ var _metricTimeSplitting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/metricTimeSplitting.ts\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _responseUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/responseUtils.ts\");\n/* harmony import */ var _tracking__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/tracking.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nfunction partitionTimeRange(isLogsQuery2, originalTimeRange, stepMs, duration) {\n  const start = originalTimeRange.from.toDate().getTime();\n  const end = originalTimeRange.to.toDate().getTime();\n  const ranges = isLogsQuery2 ? (0,_logsTimeSplitting__WEBPACK_IMPORTED_MODULE_1__.splitTimeRange)(start, end, duration) : (0,_metricTimeSplitting__WEBPACK_IMPORTED_MODULE_2__.splitTimeRange)(start, end, stepMs, duration);\n  return ranges.map(([start2, end2]) => {\n    const from = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.dateTime)(start2);\n    const to = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.dateTime)(end2);\n    return {\n      from,\n      to,\n      raw: { from, to }\n    };\n  });\n}\nfunction adjustTargetsFromResponseState(targets, response) {\n  if (!response) {\n    return targets;\n  }\n  return targets.map((target) => {\n    if (!target.maxLines || !(0,_queryUtils__WEBPACK_IMPORTED_MODULE_3__.isLogsQuery)(target.expr)) {\n      return target;\n    }\n    const targetFrame = response.data.find((frame) => frame.refId === target.refId);\n    if (!targetFrame) {\n      return target;\n    }\n    const updatedMaxLines = target.maxLines - targetFrame.length;\n    return {\n      ...target,\n      maxLines: updatedMaxLines < 0 ? 0 : updatedMaxLines\n    };\n  }).filter((target) => target.maxLines === void 0 || target.maxLines > 0);\n}\nfunction runSplitGroupedQueries(datasource, requests) {\n  let mergedResponse = { data: [], state: _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Streaming };\n  const totalRequests = Math.max(...requests.map(({ partition: partition2 }) => partition2.length));\n  const longestPartition = requests.filter(({ partition: partition2 }) => partition2.length === totalRequests)[0].partition;\n  let shouldStop = false;\n  let subquerySubsciption = null;\n  const runNextRequest = (subscriber, requestN, requestGroup) => {\n    if (shouldStop) {\n      subscriber.complete();\n      return;\n    }\n    const done = () => {\n      mergedResponse.state = _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Done;\n      subscriber.next(mergedResponse);\n      subscriber.complete();\n    };\n    const nextRequest = () => {\n      const { nextRequestN, nextRequestGroup } = getNextRequestPointers(requests, requestGroup, requestN);\n      if (nextRequestN > 0 && nextRequestGroup >= 0) {\n        runNextRequest(subscriber, nextRequestN, nextRequestGroup);\n        return;\n      }\n      done();\n    };\n    const group = requests[requestGroup];\n    const range = group.partition[requestN - 1];\n    const targets = adjustTargetsFromResponseState(group.request.targets, mergedResponse);\n    if (!targets.length) {\n      nextRequest();\n      return;\n    }\n    const subRequest = { ...requests[requestGroup].request, range, targets };\n    if (group.request.requestId) {\n      subRequest.requestId = `${group.request.requestId}_${requestN}`;\n    }\n    subquerySubsciption = datasource.runQuery(subRequest).subscribe({\n      next: (partialResponse) => {\n        mergedResponse = (0,_responseUtils__WEBPACK_IMPORTED_MODULE_4__.combineResponses)(mergedResponse, partialResponse);\n        mergedResponse = updateLoadingFrame(mergedResponse, subRequest, longestPartition, requestN);\n        if ((mergedResponse.errors ?? []).length > 0 || mergedResponse.error != null) {\n          shouldStop = true;\n        }\n      },\n      complete: () => {\n        subscriber.next(mergedResponse);\n        nextRequest();\n      },\n      error: (error) => {\n        subscriber.error(error);\n      }\n    });\n  };\n  const response = new rxjs__WEBPACK_IMPORTED_MODULE_9__.Observable((subscriber) => {\n    runNextRequest(subscriber, totalRequests, 0);\n    return () => {\n      shouldStop = true;\n      if (subquerySubsciption != null) {\n        subquerySubsciption.unsubscribe();\n      }\n    };\n  });\n  return response;\n}\nfunction updateLoadingFrame(response, request, partition2, requestN) {\n  if ((0,_queryUtils__WEBPACK_IMPORTED_MODULE_3__.isLogsQuery)(request.targets[0].expr) || isLogsVolumeRequest(request)) {\n    return response;\n  }\n  const loadingFrameName = \"loki-splitting-progress\";\n  response.data = response.data.filter((frame) => frame.name !== loadingFrameName);\n  if (requestN <= 1) {\n    return response;\n  }\n  const loadingFrame = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_10__.arrayToDataFrame)([\n    {\n      time: partition2[0].from.valueOf(),\n      timeEnd: partition2[requestN - 2].to.valueOf(),\n      isRegion: true,\n      color: \"rgba(120, 120, 120, 0.1)\"\n    }\n  ]);\n  loadingFrame.name = loadingFrameName;\n  loadingFrame.meta = {\n    dataTopic: _grafana_data__WEBPACK_IMPORTED_MODULE_11__.DataTopic.Annotations\n  };\n  response.data.push(loadingFrame);\n  return response;\n}\nfunction isLogsVolumeRequest(request) {\n  return request.targets.some((target) => target.refId.startsWith(\"log-volume\"));\n}\nfunction getNextRequestPointers(requests, requestGroup, requestN) {\n  for (let i = requestGroup + 1; i < requests.length; i++) {\n    const group = requests[i];\n    if (group.partition[requestN - 1]) {\n      return {\n        nextRequestGroup: i,\n        nextRequestN: requestN\n      };\n    }\n  }\n  return {\n    // Find the first group where `[requestN - 1]` is defined\n    nextRequestGroup: requests.findIndex((group) => group?.partition[requestN - 1] !== void 0),\n    nextRequestN: requestN - 1\n  };\n}\nfunction querySupportsSplitting(query) {\n  return query.queryType !== _types__WEBPACK_IMPORTED_MODULE_6__.LokiQueryType.Instant && // Queries with $__range variable should not be split because then the interpolated $__range variable is incorrect\n  // because it is interpolated on the backend with the split timeRange\n  !(0,_queryUtils__WEBPACK_IMPORTED_MODULE_3__.isQueryWithRangeVariable)(query.expr);\n}\nfunction runSplitQuery(datasource, request) {\n  const queries = request.targets.filter((query) => !query.hide).filter((query) => query.expr);\n  const [nonSplittingQueries, normalQueries] = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.partition)(queries, (query) => !querySupportsSplitting(query));\n  const [logQueries, metricQueries] = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.partition)(normalQueries, (query) => (0,_queryUtils__WEBPACK_IMPORTED_MODULE_3__.isLogsQuery)(query.expr));\n  request.queryGroupId = (0,uuid__WEBPACK_IMPORTED_MODULE_12__[\"default\"])();\n  const oneDayMs = 24 * 60 * 60 * 1e3;\n  const rangePartitionedLogQueries = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.groupBy)(\n    logQueries,\n    (query) => query.splitDuration ? (0,_grafana_data__WEBPACK_IMPORTED_MODULE_13__.durationToMilliseconds)((0,_grafana_data__WEBPACK_IMPORTED_MODULE_13__.parseDuration)(query.splitDuration)) : oneDayMs\n  );\n  const rangePartitionedMetricQueries = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.groupBy)(\n    metricQueries,\n    (query) => query.splitDuration ? (0,_grafana_data__WEBPACK_IMPORTED_MODULE_13__.durationToMilliseconds)((0,_grafana_data__WEBPACK_IMPORTED_MODULE_13__.parseDuration)(query.splitDuration)) : oneDayMs\n  );\n  const requests = [];\n  for (const [chunkRangeMs, queries2] of Object.entries(rangePartitionedLogQueries)) {\n    const resolutionPartition = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.groupBy)(queries2, (query) => query.resolution || 1);\n    for (const resolution in resolutionPartition) {\n      requests.push({\n        request: { ...request, targets: resolutionPartition[resolution] },\n        partition: partitionTimeRange(true, request.range, request.intervalMs, Number(chunkRangeMs))\n      });\n    }\n  }\n  for (const [chunkRangeMs, queries2] of Object.entries(rangePartitionedMetricQueries)) {\n    const stepMsPartition = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.groupBy)(\n      queries2,\n      (query) => calculateStep(request.intervalMs, request.range, query.resolution || 1, query.step)\n    );\n    for (const stepMs in stepMsPartition) {\n      requests.push({\n        request: { ...request, targets: stepMsPartition[stepMs] },\n        partition: partitionTimeRange(false, request.range, Number(stepMs), Number(chunkRangeMs))\n      });\n    }\n  }\n  if (nonSplittingQueries.length) {\n    requests.push({\n      request: { ...request, targets: nonSplittingQueries },\n      partition: [request.range]\n    });\n  }\n  const startTime = /* @__PURE__ */ new Date();\n  return runSplitGroupedQueries(datasource, requests).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.tap)((response) => {\n      if (response.state === _grafana_schema__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Done) {\n        (0,_tracking__WEBPACK_IMPORTED_MODULE_5__.trackGroupedQueries)(response, requests, request, startTime, {\n          predefinedOperations: datasource.predefinedOperations\n        });\n      }\n    })\n  );\n}\nfunction calculateStep(intervalMs, range, resolution, step) {\n  const interval_regex = /(-?\\d+(?:\\.\\d+)?)(ms|[Mwdhmsy])/;\n  if (step?.match(interval_regex)) {\n    return _grafana_data__WEBPACK_IMPORTED_MODULE_15__.intervalToMs(step) * resolution;\n  }\n  const newStep = intervalMs * resolution;\n  const safeStep = Math.round((range.to.valueOf() - range.from.valueOf()) / 11e3);\n  return Math.max(newStep, safeStep);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5U3BsaXR0aW5nLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtQztBQUN1QjtBQUM3QjtBQVl0QjtBQUNzQjtBQUd3QjtBQUNFO0FBQ0Q7QUFDckI7QUFDRztBQUN5QjtBQUV0RCxTQUFTLG1CQUNkQSxjQUNBLG1CQUNBLFFBQ0EsVUFDYTtBQUNiLFFBQU0sUUFBUSxrQkFBa0IsS0FBSyxPQUFPLEVBQUUsUUFBUTtBQUN0RCxRQUFNLE1BQU0sa0JBQWtCLEdBQUcsT0FBTyxFQUFFLFFBQVE7QUFFbEQsUUFBTSxTQUFTQSxlQUNYLGtFQUFrQixDQUFDLE9BQU8sS0FBSyxRQUFRLElBQ3ZDLG9FQUFvQixDQUFDLE9BQU8sS0FBSyxRQUFRLFFBQVE7QUFFckQsU0FBTyxPQUFPLElBQUksQ0FBQyxDQUFDQyxRQUFPQyxJQUFHLE1BQU07QUFDbEMsVUFBTSxPQUFPLHVEQUFRLENBQUNELE1BQUs7QUFDM0IsVUFBTSxLQUFLLHVEQUFRLENBQUNDLElBQUc7QUFDdkIsV0FBTztBQUFBLE1BQ0w7QUFBQSxNQUNBO0FBQUEsTUFDQSxLQUFLLEVBQUUsTUFBTSxHQUFHO0FBQUEsSUFDbEI7QUFBQSxFQUNGLENBQUM7QUFDSDtBQVFBLFNBQVMsK0JBQStCLFNBQXNCLFVBQWlEO0FBQzdHLE1BQUksQ0FBQyxVQUFVO0FBQ2IsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPLFFBQ0osSUFBSSxDQUFDLFdBQVc7QUFDZixRQUFJLENBQUMsT0FBTyxZQUFZLENBQUMsd0RBQVcsQ0FBQyxPQUFPLElBQUksR0FBRztBQUNqRCxhQUFPO0FBQUEsSUFDVDtBQUNBLFVBQU0sY0FBYyxTQUFTLEtBQUssS0FBSyxDQUFDLFVBQVUsTUFBTSxVQUFVLE9BQU8sS0FBSztBQUM5RSxRQUFJLENBQUMsYUFBYTtBQUNoQixhQUFPO0FBQUEsSUFDVDtBQUNBLFVBQU0sa0JBQWtCLE9BQU8sV0FBVyxZ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QSxRQUFNLFVBQVUsYUFBYTtBQUM3QixRQUFNLFdBQVcsS0FBSyxPQUFPLE1BQU0sR0FBRyxRQUFRLElBQUksTUFBTSxLQUFLLFFBQVEsS0FBSyxJQUFLO0FBQy9FLFNBQU8sS0FBSyxJQUFJLFNBQVMsUUFBUTtBQUNuQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5U3BsaXR0aW5nLnRzPzBmMDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ3JvdXBCeSwgcGFydGl0aW9uIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmliZXIsIFN1YnNjcmlwdGlvbiwgdGFwIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcblxuaW1wb3J0IHtcbiAgYXJyYXlUb0RhdGFGcmFtZSxcbiAgRGF0YVF1ZXJ5UmVxdWVzdCxcbiAgRGF0YVF1ZXJ5UmVzcG9uc2UsXG4gIERhdGFUb3BpYyxcbiAgZGF0ZVRpbWUsXG4gIGR1cmF0aW9uVG9NaWxsaXNlY29uZHMsXG4gIHBhcnNlRHVyYXRpb24sXG4gIHJhbmdlVXRpbCxcbiAgVGltZVJhbmdlLFxufSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IExvYWRpbmdTdGF0ZSB9IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5cbmltcG9ydCB7IExva2lEYXRhc291cmNlIH0gZnJvbSAnLi9kYXRhc291cmNlJztcbmltcG9ydCB7IHNwbGl0VGltZVJhbmdlIGFzIHNwbGl0TG9nc1RpbWVSYW5nZSB9IGZyb20gJy4vbG9nc1RpbWVTcGxpdHRpbmcnO1xuaW1wb3J0IHsgc3BsaXRUaW1lUmFuZ2UgYXMgc3BsaXRNZXRyaWNUaW1lUmFuZ2UgfSBmcm9tICcuL21ldHJpY1RpbWVTcGxpdHRpbmcnO1xuaW1wb3J0IHsgaXNMb2dzUXVlcnksIGlzUXVlcnlXaXRoUmFuZ2VWYXJpYWJsZSB9IGZyb20gJy4vcXVlcnlVdGlscyc7XG5pbXBvcnQgeyBjb21iaW5lUmVzcG9uc2VzIH0gZnJvbSAnLi9yZXNwb25zZVV0aWxzJztcbmltcG9ydCB7IHRyYWNrR3JvdXBlZFF1ZXJpZXMgfSBmcm9tICcuL3RyYWNraW5nJztcbmltcG9ydCB7IExva2lHcm91cGVkUmVxdWVzdCwgTG9raVF1ZXJ5LCBMb2tpUXVlcnlUeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb25UaW1lUmFuZ2UoXG4gIGlzTG9nc1F1ZXJ5OiBib29sZWFuLFxuICBvcmlnaW5hbFRpbWVSYW5nZTogVGltZVJhbmdlLFxuICBzdGVwTXM6IG51bWJlcixcbiAgZHVyYXRpb246IG51bWJlclxuKTogVGltZVJhbmdlW10ge1xuICBjb25zdCBzdGFydCA9IG9yaWdpbmFsVGltZVJhbmdlLmZyb20udG9EYXRlKCkuZ2V0VGltZSgpO1xuICBjb25zdCBlbmQgPSBvcmlnaW5hbFRpbWVSYW5nZS50by50b0RhdGUoKS5nZXRUaW1lKCk7XG5cbiAgY29uc3QgcmFuZ2VzID0gaXNMb2dzUXVlcnlcbiAgICA/IHNwbGl0TG9nc1RpbWVSYW5nZShzdGFydCwgZW5kLCBkdXJhdGlvbilcbiAgICA6IHNwbGl0TWV0cmljVGltZVJhbmdlKHN0YXJ0LCBlbmQsIHN0ZXBNcywgZHVyYXRpb24pO1xuXG4gIHJldHVybiByYW5nZXMubWFwKChbc3RhcnQsIGVuZF0pID0+IHtcbiAgICBjb25zdCBmcm9tID0gZGF0ZVRpbWUoc3RhcnQpO1xuICAgIGNvbnN0IHRvID0gZGF0ZVRpbWUoZW5kKTtcbiAgICByZXR1cm4ge1xuICAgICAgZnJvbSxcbiAgICAgIHRvLFxuICAgICAgcmF3OiB7IGZyb20sIHRvIH0sXG4gICAgfTtcbiAgfSk7XG59XG5cbi8qKlxuICogQmFzZWQgaW4gdGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50IHJlc3BvbnNlLCBpZiBhbnksIGFkanVzdCB0YXJnZXQgcGFyYW1ldGVycyBzdWNoIGFzIGBtYXhMaW5lc2AuXG4gKiBGb3IgYG1heExpbmVzYCwgd2Ugd2lsbCB1cGRhdGUgaXQgYXMgYG1heExpbmVzIC0gY3VycmVudCBhbW91bnQgb2YgbGluZXNgLlxuICogQXQgdGhlIGVuZCwgd2Ugd2lsbCBmaWx0ZXIgdGhlIHRhcmdldHMgdGhhdCBkb24ndCBuZWVkIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBuZXh0IHJlcXVlc3QgYmF0Y2gsXG4gKiBiZWNhc3VlLCBmb3IgZXhhbXBsZSwgdGhlIGBtYXhMaW5lc2AgaGF2ZSBiZWVuIHJlYWNoZWQuXG4gKi9cbmZ1bmN0aW9uIGFkanVzdFRhcmdldHNGcm9tUmVzcG9uc2VTdGF0ZSh0YXJnZXRzOiBMb2tpUXVlcnlbXSwgcmVzcG9uc2U6IERhdGFRdWVyeVJlc3BvbnNlIHwgbnVsbCk6IExva2lRdWVyeVtdIHtcbiAgaWYgKCFyZXNwb25zZSkge1xuICAgIHJldHVybiB0YXJnZXRzO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldHNcbiAgICAubWFwKCh0YXJnZXQpID0+IHtcbiAgICAgIGlmICghdGFyZ2V0Lm1heExpbmVzIHx8ICFpc0xvZ3NRdWVyeSh0YXJnZXQuZXhwcikpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhcmdldEZyYW1lID0gcmVzcG9uc2UuZGF0YS5maW5kKChmcmFtZSkgPT4gZnJhbWUucmVmSWQgPT09IHRhcmdldC5yZWZJZCk7XG4gICAgICBpZiAoIXRhcmdldEZyYW1lKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICB9XG4gICAgICBjb25zdCB1cGRhdGVkTWF4TGluZXMgPSB0YXJnZXQubWF4TGluZXMgLSB0YXJnZXRGcmFtZS5sZW5ndGg7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi50YXJnZXQsXG4gICAgICAgIG1heExpbmVzOiB1cGRhdGVkTWF4TGluZXMgPCAwID8gMCA6IHVwZGF0ZWRNYXhMaW5lcyxcbiAgICAgIH07XG4gICAgfSlcbiAgICAuZmlsdGVyKCh0YXJnZXQpID0+IHRhcmdldC5tYXhMaW5lcyA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldC5tYXhMaW5lcyA+IDApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJ1blNwbGl0R3JvdXBlZFF1ZXJpZXMoZGF0YXNvdXJjZTogTG9raURhdGFzb3VyY2UsIHJlcXVlc3RzOiBMb2tpR3JvdXBlZFJlcXVlc3RbXSkge1xuICBsZXQgbWVyZ2VkUmVzcG9uc2U6IERhdGFRdWVyeVJlc3BvbnNlID0geyBkYXRhOiBbXSwgc3RhdGU6IExvYWRpbmdTdGF0ZS5TdHJlYW1pbmcgfTtcbiAgY29uc3QgdG90YWxSZXF1ZXN0cyA9IE1hdGgubWF4KC4uLnJlcXVlc3RzLm1hcCgoeyBwYXJ0aXRpb24gfSkgPT4gcGFydGl0aW9uLmxlbmd0aCkpO1xuICBjb25zdCBsb25nZXN0UGFydGl0aW9uID0gcmVxdWVzdHMuZmlsdGVyKCh7IHBhcnRpdGlvbiB9KSA9PiBwYXJ0aXRpb24ubGVuZ3RoID09PSB0b3RhbFJlcXVlc3RzKVswXS5wYXJ0aXRpb247XG5cbiAgbGV0IHNob3VsZFN0b3AgPSBmYWxzZTtcbiAgbGV0IHN1YnF1ZXJ5U3Vic2NpcHRpb246IFN1YnNjcmlwdGlvbiB8IG51bGwgPSBudWxsO1xuICBjb25zdCBydW5OZXh0UmVxdWVzdCA9IChzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPERhdGFRdWVyeVJlc3BvbnNlPiwgcmVxdWVzdE46IG51bWJlciwgcmVxdWVzdEdyb3VwOiBudW1iZXIpID0+IHtcbiAgICBpZiAoc2hvdWxkU3RvcCkge1xuICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRvbmUgPSAoKSA9PiB7XG4gICAgICBtZXJnZWRSZXNwb25zZS5zdGF0ZSA9IExvYWRpbmdTdGF0ZS5Eb25lO1xuICAgICAgc3Vic2NyaWJlci5uZXh0KG1lcmdlZFJlc3BvbnNlKTtcbiAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgbmV4dFJlcXVlc3QgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7IG5leHRSZXF1ZXN0TiwgbmV4dFJlcXVlc3RHcm91cCB9ID0gZ2V0TmV4dFJlcXVlc3RQb2ludGVycyhyZXF1ZXN0cywgcmVxdWVzdEdyb3VwLCByZXF1ZXN0Tik7XG4gICAgICBpZiAobmV4dFJlcXVlc3ROID4gMCAmJiBuZXh0UmVxdWVzdEdyb3VwID49IDApIHtcbiAgICAgICAgcnVuTmV4dFJlcXVlc3Qoc3Vic2NyaWJlciwgbmV4dFJlcXVlc3ROLCBuZXh0UmVxdWVzdEdyb3VwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZG9uZSgpO1xuICAgIH07XG5cbiAgICBjb25zdCBncm91cCA9IHJlcXVlc3RzW3JlcXVlc3RHcm91cF07XG4gICAgY29uc3QgcmFuZ2UgPSBncm91cC5wYXJ0aXRpb25bcmVxdWVzdE4gLSAxXTtcbiAgICBjb25zdCB0YXJnZXRzID0gYWRqdXN0VGFyZ2V0c0Zyb21SZXNwb25zZVN0YXRlKGdyb3VwLnJlcXVlc3QudGFyZ2V0cywgbWVyZ2VkUmVzcG9uc2UpO1xuXG4gICAgaWYgKCF0YXJnZXRzLmxlbmd0aCkge1xuICAgICAgbmV4dFJlcXVlc3QoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdWJSZXF1ZXN0ID0geyAuLi5yZXF1ZXN0c1tyZXF1ZXN0R3JvdXBdLnJlcXVlc3QsIHJhbmdlLCB0YXJnZXRzIH07XG4gICAgLy8gcmVxdWVzdCBtYXkgbm90IGhhdmUgYSByZXF1ZXN0IGlkXG4gICAgaWYgKGdyb3VwLnJlcXVlc3QucmVxdWVzdElkKSB7XG4gICAgICBzdWJSZXF1ZXN0LnJlcXVlc3RJZCA9IGAke2dyb3VwLnJlcXVlc3QucmVxdWVzdElkfV8ke3JlcXVlc3ROfWA7XG4gICAgfVxuXG4gICAgc3VicXVlcnlTdWJzY2lwdGlvbiA9IGRhdGFzb3VyY2UucnVuUXVlcnkoc3ViUmVxdWVzdCkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChwYXJ0aWFsUmVzcG9uc2UpID0+IHtcbiAgICAgICAgbWVyZ2VkUmVzcG9uc2UgPSBjb21iaW5lUmVzcG9uc2VzKG1lcmdlZFJlc3BvbnNlLCBwYXJ0aWFsUmVzcG9uc2UpO1xuICAgICAgICBtZXJnZWRSZXNwb25zZSA9IHVwZGF0ZUxvYWRpbmdGcmFtZShtZXJnZWRSZXNwb25zZSwgc3ViUmVxdWVzdCwgbG9uZ2VzdFBhcnRpdGlvbiwgcmVxdWVzdE4pO1xuICAgICAgICBpZiAoKG1lcmdlZFJlc3BvbnNlLmVycm9ycyA/PyBbXSkubGVuZ3RoID4gMCB8fCBtZXJnZWRSZXNwb25zZS5lcnJvciAhPSBudWxsKSB7XG4gICAgICAgICAgc2hvdWxkU3RvcCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICBzdWJzY3JpYmVyLm5leHQobWVyZ2VkUmVzcG9uc2UpO1xuICAgICAgICBuZXh0UmVxdWVzdCgpO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvcik7XG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gbmV3IE9ic2VydmFibGU8RGF0YVF1ZXJ5UmVzcG9uc2U+KChzdWJzY3JpYmVyKSA9PiB7XG4gICAgcnVuTmV4dFJlcXVlc3Qoc3Vic2NyaWJlciwgdG90YWxSZXF1ZXN0cywgMCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNob3VsZFN0b3AgPSB0cnVlO1xuICAgICAgaWYgKHN1YnF1ZXJ5U3Vic2NpcHRpb24gIT0gbnVsbCkge1xuICAgICAgICBzdWJxdWVyeVN1YnNjaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVMb2FkaW5nRnJhbWUoXG4gIHJlc3BvbnNlOiBEYXRhUXVlcnlSZXNwb25zZSxcbiAgcmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxMb2tpUXVlcnk+LFxuICBwYXJ0aXRpb246IFRpbWVSYW5nZVtdLFxuICByZXF1ZXN0TjogbnVtYmVyXG4pOiBEYXRhUXVlcnlSZXNwb25zZSB7XG4gIGlmIChpc0xvZ3NRdWVyeShyZXF1ZXN0LnRhcmdldHNbMF0uZXhwcikgfHwgaXNMb2dzVm9sdW1lUmVxdWVzdChyZXF1ZXN0KSkge1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuICBjb25zdCBsb2FkaW5nRnJhbWVOYW1lID0gJ2xva2ktc3BsaXR0aW5nLXByb2dyZXNzJztcbiAgcmVzcG9uc2UuZGF0YSA9IHJlc3BvbnNlLmRhdGEuZmlsdGVyKChmcmFtZSkgPT4gZnJhbWUubmFtZSAhPT0gbG9hZGluZ0ZyYW1lTmFtZSk7XG5cbiAgaWYgKHJlcXVlc3ROIDw9IDEpIHtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICBjb25zdCBsb2FkaW5nRnJhbWUgPSBhcnJheVRvRGF0YUZyYW1lKFtcbiAgICB7XG4gICAgICB0aW1lOiBwYXJ0aXRpb25bMF0uZnJvbS52YWx1ZU9mKCksXG4gICAgICB0aW1lRW5kOiBwYXJ0aXRpb25bcmVxdWVzdE4gLSAyXS50by52YWx1ZU9mKCksXG4gICAgICBpc1JlZ2lvbjogdHJ1ZSxcbiAgICAgIGNvbG9yOiAncmdiYSgxMjAsIDEyMCwgMTIwLCAwLjEpJyxcbiAgICB9LFxuICBdKTtcbiAgbG9hZGluZ0ZyYW1lLm5hbWUgPSBsb2FkaW5nRnJhbWVOYW1lO1xuICBsb2FkaW5nRnJhbWUubWV0YSA9IHtcbiAgICBkYXRhVG9waWM6IERhdGFUb3BpYy5Bbm5vdGF0aW9ucyxcbiAgfTtcblxuICByZXNwb25zZS5kYXRhLnB1c2gobG9hZGluZ0ZyYW1lKTtcblxuICByZXR1cm4gcmVzcG9uc2U7XG59XG5cbmZ1bmN0aW9uIGlzTG9nc1ZvbHVtZVJlcXVlc3QocmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxMb2tpUXVlcnk+KTogYm9vbGVhbiB7XG4gIHJldHVybiByZXF1ZXN0LnRhcmdldHMuc29tZSgodGFyZ2V0KSA9PiB0YXJnZXQucmVmSWQuc3RhcnRzV2l0aCgnbG9nLXZvbHVtZScpKTtcbn1cblxuZnVuY3Rpb24gZ2V0TmV4dFJlcXVlc3RQb2ludGVycyhyZXF1ZXN0czogTG9raUdyb3VwZWRSZXF1ZXN0W10sIHJlcXVlc3RHcm91cDogbnVtYmVyLCByZXF1ZXN0TjogbnVtYmVyKSB7XG4gIC8vIFRoZXJlJ3MgYSBwZW5kaW5nIHJlcXVlc3QgZnJvbSB0aGUgbmV4dCBncm91cDpcbiAgZm9yIChsZXQgaSA9IHJlcXVlc3RHcm91cCArIDE7IGkgPCByZXF1ZXN0cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGdyb3VwID0gcmVxdWVzdHNbaV07XG4gICAgaWYgKGdyb3VwLnBhcnRpdGlvbltyZXF1ZXN0TiAtIDFdKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuZXh0UmVxdWVzdEdyb3VwOiBpLFxuICAgICAgICBuZXh0UmVxdWVzdE46IHJlcXVlc3ROLFxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICAvLyBGaW5kIHRoZSBmaXJzdCBncm91cCB3aGVyZSBgW3JlcXVlc3ROIC0gMV1gIGlzIGRlZmluZWRcbiAgICBuZXh0UmVxdWVzdEdyb3VwOiByZXF1ZXN0cy5maW5kSW5kZXgoKGdyb3VwKSA9PiBncm91cD8ucGFydGl0aW9uW3JlcXVlc3ROIC0gMV0gIT09IHVuZGVmaW5lZCksXG4gICAgbmV4dFJlcXVlc3ROOiByZXF1ZXN0TiAtIDEsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5U3VwcG9ydHNTcGxpdHRpbmcocXVlcnk6IExva2lRdWVyeSkge1xuICByZXR1cm4gKFxuICAgIHF1ZXJ5LnF1ZXJ5VHlwZSAhPT0gTG9raVF1ZXJ5VHlwZS5JbnN0YW50ICYmXG4gICAgLy8gUXVlcmllcyB3aXRoICRfX3JhbmdlIHZhcmlhYmxlIHNob3VsZCBub3QgYmUgc3BsaXQgYmVjYXVzZSB0aGVuIHRoZSBpbnRlcnBvbGF0ZWQgJF9fcmFuZ2UgdmFyaWFibGUgaXMgaW5jb3JyZWN0XG4gICAgLy8gYmVjYXVzZSBpdCBpcyBpbnRlcnBvbGF0ZWQgb24gdGhlIGJhY2tlbmQgd2l0aCB0aGUgc3BsaXQgdGltZVJhbmdlXG4gICAgIWlzUXVlcnlXaXRoUmFuZ2VWYXJpYWJsZShxdWVyeS5leHByKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcnVuU3BsaXRRdWVyeShkYXRhc291cmNlOiBMb2tpRGF0YXNvdXJjZSwgcmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxMb2tpUXVlcnk+KSB7XG4gIGNvbnN0IHF1ZXJpZXMgPSByZXF1ZXN0LnRhcmdldHMuZmlsdGVyKChxdWVyeSkgPT4gIXF1ZXJ5LmhpZGUpLmZpbHRlcigocXVlcnkpID0+IHF1ZXJ5LmV4cHIpO1xuICBjb25zdCBbbm9uU3BsaXR0aW5nUXVlcmllcywgbm9ybWFsUXVlcmllc10gPSBwYXJ0aXRpb24ocXVlcmllcywgKHF1ZXJ5KSA9PiAhcXVlcnlTdXBwb3J0c1NwbGl0dGluZyhxdWVyeSkpO1xuICBjb25zdCBbbG9nUXVlcmllcywgbWV0cmljUXVlcmllc10gPSBwYXJ0aXRpb24obm9ybWFsUXVlcmllcywgKHF1ZXJ5KSA9PiBpc0xvZ3NRdWVyeShxdWVyeS5leHByKSk7XG5cbiAgcmVxdWVzdC5xdWVyeUdyb3VwSWQgPSB1dWlkdjQoKTtcbiAgY29uc3Qgb25lRGF5TXMgPSAyNCAqIDYwICogNjAgKiAxMDAwO1xuICBjb25zdCByYW5nZVBhcnRpdGlvbmVkTG9nUXVlcmllcyA9IGdyb3VwQnkobG9nUXVlcmllcywgKHF1ZXJ5KSA9PlxuICAgIHF1ZXJ5LnNwbGl0RHVyYXRpb24gPyBkdXJhdGlvblRvTWlsbGlzZWNvbmRzKHBhcnNlRHVyYXRpb24ocXVlcnkuc3BsaXREdXJhdGlvbikpIDogb25lRGF5TXNcbiAgKTtcbiAgY29uc3QgcmFuZ2VQYXJ0aXRpb25lZE1ldHJpY1F1ZXJpZXMgPSBncm91cEJ5KG1ldHJpY1F1ZXJpZXMsIChxdWVyeSkgPT5cbiAgICBxdWVyeS5zcGxpdER1cmF0aW9uID8gZHVyYXRpb25Ub01pbGxpc2Vjb25kcyhwYXJzZUR1cmF0aW9uKHF1ZXJ5LnNwbGl0RHVyYXRpb24pKSA6IG9uZURheU1zXG4gICk7XG5cbiAgY29uc3QgcmVxdWVzdHM6IExva2lHcm91cGVkUmVxdWVzdFtdID0gW107XG4gIGZvciAoY29uc3QgW2NodW5rUmFuZ2VNcywgcXVlcmllc10gb2YgT2JqZWN0LmVudHJpZXMocmFuZ2VQYXJ0aXRpb25lZExvZ1F1ZXJpZXMpKSB7XG4gICAgY29uc3QgcmVzb2x1dGlvblBhcnRpdGlvbiA9IGdyb3VwQnkocXVlcmllcywgKHF1ZXJ5KSA9PiBxdWVyeS5yZXNvbHV0aW9uIHx8IDEpO1xuICAgIGZvciAoY29uc3QgcmVzb2x1dGlvbiBpbiByZXNvbHV0aW9uUGFydGl0aW9uKSB7XG4gICAgICByZXF1ZXN0cy5wdXNoKHtcbiAgICAgICAgcmVxdWVzdDogeyAuLi5yZXF1ZXN0LCB0YXJnZXRzOiByZXNvbHV0aW9uUGFydGl0aW9uW3Jlc29sdXRpb25dIH0sXG4gICAgICAgIHBhcnRpdGlvbjogcGFydGl0aW9uVGltZVJhbmdlKHRydWUsIHJlcXVlc3QucmFuZ2UsIHJlcXVlc3QuaW50ZXJ2YWxNcywgTnVtYmVyKGNodW5rUmFuZ2VNcykpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBbY2h1bmtSYW5nZU1zLCBxdWVyaWVzXSBvZiBPYmplY3QuZW50cmllcyhyYW5nZVBhcnRpdGlvbmVkTWV0cmljUXVlcmllcykpIHtcbiAgICBjb25zdCBzdGVwTXNQYXJ0aXRpb24gPSBncm91cEJ5KHF1ZXJpZXMsIChxdWVyeSkgPT5cbiAgICAgIGNhbGN1bGF0ZVN0ZXAocmVxdWVzdC5pbnRlcnZhbE1zLCByZXF1ZXN0LnJhbmdlLCBxdWVyeS5yZXNvbHV0aW9uIHx8IDEsIHF1ZXJ5LnN0ZXApXG4gICAgKTtcblxuICAgIGZvciAoY29uc3Qgc3RlcE1zIGluIHN0ZXBNc1BhcnRpdGlvbikge1xuICAgICAgcmVxdWVzdHMucHVzaCh7XG4gICAgICAgIHJlcXVlc3Q6IHsgLi4ucmVxdWVzdCwgdGFyZ2V0czogc3RlcE1zUGFydGl0aW9uW3N0ZXBNc10gfSxcbiAgICAgICAgcGFydGl0aW9uOiBwYXJ0aXRpb25UaW1lUmFuZ2UoZmFsc2UsIHJlcXVlc3QucmFuZ2UsIE51bWJlcihzdGVwTXMpLCBOdW1iZXIoY2h1bmtSYW5nZU1zKSksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBpZiAobm9uU3BsaXR0aW5nUXVlcmllcy5sZW5ndGgpIHtcbiAgICByZXF1ZXN0cy5wdXNoKHtcbiAgICAgIHJlcXVlc3Q6IHsgLi4ucmVxdWVzdCwgdGFyZ2V0czogbm9uU3BsaXR0aW5nUXVlcmllcyB9LFxuICAgICAgcGFydGl0aW9uOiBbcmVxdWVzdC5yYW5nZV0sXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICByZXR1cm4gcnVuU3BsaXRHcm91cGVkUXVlcmllcyhkYXRhc291cmNlLCByZXF1ZXN0cykucGlwZShcbiAgICB0YXAoKHJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdGUgPT09IExvYWRpbmdTdGF0ZS5Eb25lKSB7XG4gICAgICAgIHRyYWNrR3JvdXBlZFF1ZXJpZXMocmVzcG9uc2UsIHJlcXVlc3RzLCByZXF1ZXN0LCBzdGFydFRpbWUsIHtcbiAgICAgICAgICBwcmVkZWZpbmVkT3BlcmF0aW9uczogZGF0YXNvdXJjZS5wcmVkZWZpbmVkT3BlcmF0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgKTtcbn1cblxuLy8gUmVwbGljYXRlIGZyb20gYmFja2VuZCBmb3Igc3BsaXQgcXVlcmllcyBmb3Igbm93LCB1bnRpbCB3ZSBjYW4gbW92ZSBxdWVyeSBzcGxpdHRpbmcgdG8gdGhlIGJhY2tlbmRcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFmYW5hL2dyYWZhbmEvYmxvYi9tYWluL3BrZy90c2RiL2xva2kvc3RlcC5nbyNMMjNcbmZ1bmN0aW9uIGNhbGN1bGF0ZVN0ZXAoaW50ZXJ2YWxNczogbnVtYmVyLCByYW5nZTogVGltZVJhbmdlLCByZXNvbHV0aW9uOiBudW1iZXIsIHN0ZXA6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAvLyBJZiB3ZSBjYW4gcGFyc2Ugc3RlcCx0aGUgd2UgdXNlIGl0XG4gIC8vIE90aGVyd2lzZSB3ZSB3aWxsIGNhbGN1bGF0ZSBzdGVwIGJhc2VkIG9uIGludGVydmFsXG4gIGNvbnN0IGludGVydmFsX3JlZ2V4ID0gLygtP1xcZCsoPzpcXC5cXGQrKT8pKG1zfFtNd2RobXN5XSkvO1xuICBpZiAoc3RlcD8ubWF0Y2goaW50ZXJ2YWxfcmVnZXgpKSB7XG4gICAgcmV0dXJuIHJhbmdlVXRpbC5pbnRlcnZhbFRvTXMoc3RlcCkgKiByZXNvbHV0aW9uO1xuICB9XG5cbiAgY29uc3QgbmV3U3RlcCA9IGludGVydmFsTXMgKiByZXNvbHV0aW9uO1xuICBjb25zdCBzYWZlU3RlcCA9IE1hdGgucm91bmQoKHJhbmdlLnRvLnZhbHVlT2YoKSAtIHJhbmdlLmZyb20udmFsdWVPZigpKSAvIDExMDAwKTtcbiAgcmV0dXJuIE1hdGgubWF4KG5ld1N0ZXAsIHNhZmVTdGVwKTtcbn1cbiJdLCJuYW1lcyI6WyJpc0xvZ3NRdWVyeSIsInN0YXJ0IiwiZW5kIiwicGFydGl0aW9uIiwicXVlcmllcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querySplitting.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/queryUtils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatLogqlQuery: () => (/* binding */ formatLogqlQuery),\n/* harmony export */   formatQuery: () => (/* binding */ formatQuery),\n/* harmony export */   getHighlighterExpressionsFromQuery: () => (/* binding */ getHighlighterExpressionsFromQuery),\n/* harmony export */   getLogQueryFromMetricsQuery: () => (/* binding */ getLogQueryFromMetricsQuery),\n/* harmony export */   getLokiQueryFromDataQuery: () => (/* binding */ getLokiQueryFromDataQuery),\n/* harmony export */   getLokiQueryType: () => (/* binding */ getLokiQueryType),\n/* harmony export */   getNodeFromQuery: () => (/* binding */ getNodeFromQuery),\n/* harmony export */   getNodePositionsFromQuery: () => (/* binding */ getNodePositionsFromQuery),\n/* harmony export */   getNodesFromQuery: () => (/* binding */ getNodesFromQuery),\n/* harmony export */   getNormalizedLokiQuery: () => (/* binding */ getNormalizedLokiQuery),\n/* harmony export */   getParserFromQuery: () => (/* binding */ getParserFromQuery),\n/* harmony export */   getStreamSelectorsFromQuery: () => (/* binding */ getStreamSelectorsFromQuery),\n/* harmony export */   isLogsQuery: () => (/* binding */ isLogsQuery),\n/* harmony export */   isLokiQuery: () => (/* binding */ isLokiQuery),\n/* harmony export */   isQueryPipelineErrorFiltering: () => (/* binding */ isQueryPipelineErrorFiltering),\n/* harmony export */   isQueryWithError: () => (/* binding */ isQueryWithError),\n/* harmony export */   isQueryWithLabelFilter: () => (/* binding */ isQueryWithLabelFilter),\n/* harmony export */   isQueryWithLabelFormat: () => (/* binding */ isQueryWithLabelFormat),\n/* harmony export */   isQueryWithLineFilter: () => (/* binding */ isQueryWithLineFilter),\n/* harmony export */   isQueryWithNode: () => (/* binding */ isQueryWithNode),\n/* harmony export */   isQueryWithParser: () => (/* binding */ isQueryWithParser),\n/* harmony export */   isQueryWithRangeVariable: () => (/* binding */ isQueryWithRangeVariable),\n/* harmony export */   obfuscate: () => (/* binding */ obfuscate),\n/* harmony export */   parseToNodeNamesArray: () => (/* binding */ parseToNodeNamesArray),\n/* harmony export */   requestSupportsSplitting: () => (/* binding */ requestSupportsSplitting)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-lezer-logql-virtual-0b75aafe9e/0/cache/@grafana-lezer-logql-npm-0.1.11-91e9d74a76-6a624b9a8d.zip/node_modules/@grafana/lezer-logql/index.es.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/parsingUtils.ts\");\n/* harmony import */ var _components_monaco_query_field_monaco_completion_provider_validation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/monaco-query-field/monaco-completion-provider/validation.ts\");\n/* harmony import */ var _modifyQuery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/modifyQuery.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\n\n\n\n\nfunction formatQuery(selector) {\n  return `${selector || \"\"}`.trim();\n}\nfunction getHighlighterExpressionsFromQuery(input) {\n  const results = [];\n  const filters = getNodesFromQuery(input, [_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LineFilter]);\n  for (let filter of filters) {\n    const pipeExact = filter.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Filter)?.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipeExact);\n    const pipeMatch = filter.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Filter)?.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipeMatch);\n    const string = filter.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.String);\n    if (!pipeExact && !pipeMatch || !string) {\n      continue;\n    }\n    const filterTerm = input.substring(string.from, string.to).trim();\n    const backtickedTerm = filterTerm[0] === \"`\";\n    const unwrappedFilterTerm = filterTerm.substring(1, filterTerm.length - 1);\n    if (!unwrappedFilterTerm) {\n      continue;\n    }\n    let resultTerm = \"\";\n    if (pipeMatch) {\n      resultTerm = backtickedTerm ? unwrappedFilterTerm : unwrappedFilterTerm.replace(/\\\\\\\\/g, \"\\\\\");\n    } else {\n      resultTerm = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.escapeRegExp)(unwrappedFilterTerm);\n    }\n    if (resultTerm) {\n      results.push(resultTerm);\n    }\n  }\n  return results;\n}\nfunction getNormalizedLokiQuery(query) {\n  const queryType = getLokiQueryType(query);\n  const { instant, range, ...rest } = query;\n  return { ...rest, queryType };\n}\nfunction getLokiQueryType(query) {\n  const { queryType } = query;\n  const hasValidQueryType = queryType === _types__WEBPACK_IMPORTED_MODULE_5__.LokiQueryType.Range || queryType === _types__WEBPACK_IMPORTED_MODULE_5__.LokiQueryType.Instant || queryType === _types__WEBPACK_IMPORTED_MODULE_5__.LokiQueryType.Stream;\n  if (hasValidQueryType) {\n    return queryType;\n  }\n  if (query.instant === true) {\n    return _types__WEBPACK_IMPORTED_MODULE_5__.LokiQueryType.Instant;\n  }\n  return _types__WEBPACK_IMPORTED_MODULE_5__.LokiQueryType.Range;\n}\nconst tagsToObscure = [\"String\", \"Identifier\", \"LineComment\", \"Number\"];\nconst partsToKeep = [\"__error__\", \"__interval\", \"__interval_ms\"];\nfunction obfuscate(query) {\n  let obfuscatedQuery = query;\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  tree.iterate({\n    enter: ({ name, from, to }) => {\n      const queryPart = query.substring(from, to);\n      if (tagsToObscure.includes(name) && !partsToKeep.includes(queryPart)) {\n        obfuscatedQuery = obfuscatedQuery.replace(queryPart, name);\n      }\n    }\n  });\n  return obfuscatedQuery;\n}\nfunction parseToNodeNamesArray(query) {\n  const queryParts = [];\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  tree.iterate({\n    enter: ({ name }) => {\n      queryParts.push(name);\n    }\n  });\n  return queryParts;\n}\nfunction isQueryWithNode(query, nodeType) {\n  let isQueryWithNode2 = false;\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  tree.iterate({\n    enter: ({ type }) => {\n      if (type.id === nodeType) {\n        isQueryWithNode2 = true;\n        return false;\n      }\n    }\n  });\n  return isQueryWithNode2;\n}\nfunction getNodesFromQuery(query, nodeTypes) {\n  const nodes = [];\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  tree.iterate({\n    enter: (node) => {\n      if (nodeTypes === void 0 || nodeTypes.includes(node.type.id)) {\n        nodes.push(node.node);\n      }\n    }\n  });\n  return nodes;\n}\nfunction getNodePositionsFromQuery(query, nodeTypes) {\n  const positions = [];\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(query);\n  tree.iterate({\n    enter: (node) => {\n      if (nodeTypes === void 0 || nodeTypes.includes(node.type.id)) {\n        positions.push(_modifyQuery__WEBPACK_IMPORTED_MODULE_4__.NodePosition.fromNode(node.node));\n      }\n    }\n  });\n  return positions;\n}\nfunction getNodeFromQuery(query, nodeType) {\n  const nodes = getNodesFromQuery(query, [nodeType]);\n  return nodes.length > 0 ? nodes[0] : void 0;\n}\nfunction isQueryWithError(query) {\n  return isQueryWithNode(query, _prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.ErrorId);\n}\nfunction isLogsQuery(query) {\n  return !isQueryWithNode(query, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.MetricExpr);\n}\nfunction isQueryWithParser(query) {\n  const nodes = getNodesFromQuery(query, [_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelParser, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.JsonExpressionParser]);\n  const parserCount = nodes.length;\n  return { queryWithParser: parserCount > 0, parserCount };\n}\nfunction getParserFromQuery(query) {\n  const parsers = getNodesFromQuery(query, [_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelParser, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.JsonExpressionParser]);\n  return parsers.length > 0 ? query.substring(parsers[0].from, parsers[0].to).trim() : void 0;\n}\nfunction isQueryPipelineErrorFiltering(query) {\n  const labels = getNodesFromQuery(query, [_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFilter]);\n  for (const node of labels) {\n    const label = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Matcher)?.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Identifier);\n    if (label) {\n      const labelName = query.substring(label.from, label.to);\n      if (labelName === \"__error__\") {\n        return true;\n      }\n    }\n  }\n  return false;\n}\nfunction isQueryWithLabelFormat(query) {\n  return isQueryWithNode(query, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFormatExpr);\n}\nfunction getLogQueryFromMetricsQuery(query) {\n  if (isLogsQuery(query)) {\n    return query;\n  }\n  const selectorNode = getNodeFromQuery(query, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Selector);\n  if (!selectorNode) {\n    return query;\n  }\n  const selector = query.substring(selectorNode.from, selectorNode.to);\n  const pipelineExprNode = getNodeFromQuery(query, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.PipelineExpr);\n  const pipelineExpr = pipelineExprNode ? query.substring(pipelineExprNode.from, pipelineExprNode.to) : \"\";\n  return `${selector} ${pipelineExpr}`.trim();\n}\nfunction isQueryWithLabelFilter(query) {\n  return isQueryWithNode(query, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFilter);\n}\nfunction isQueryWithLineFilter(query) {\n  return isQueryWithNode(query, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LineFilter);\n}\nfunction isQueryWithRangeVariable(query) {\n  const rangeNodes = getNodesFromQuery(query, [_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Range]);\n  for (const node of rangeNodes) {\n    if (query.substring(node.from, node.to).match(/\\[\\$__range(_s|_ms)?/)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction getStreamSelectorsFromQuery(query) {\n  const labelMatcherPositions = (0,_modifyQuery__WEBPACK_IMPORTED_MODULE_4__.getStreamSelectorPositions)(query);\n  const labelMatchers = labelMatcherPositions.map((labelMatcher) => {\n    return query.slice(labelMatcher.from, labelMatcher.to);\n  });\n  return labelMatchers;\n}\nfunction requestSupportsSplitting(allQueries) {\n  const queries = allQueries.filter((query) => !query.hide).filter((query) => !query.refId.includes(\"do-not-chunk\")).filter((query) => query.expr);\n  return queries.length > 0;\n}\nconst isLokiQuery = (query) => {\n  if (!query) {\n    return false;\n  }\n  const lokiQuery = query;\n  return lokiQuery.expr !== void 0;\n};\nconst getLokiQueryFromDataQuery = (query) => {\n  if (!query || !isLokiQuery(query)) {\n    return void 0;\n  }\n  return query;\n};\nfunction formatLogqlQuery(query, datasource) {\n  const isInvalid = isQueryWithError(datasource.interpolateString(query, _components_monaco_query_field_monaco_completion_provider_validation__WEBPACK_IMPORTED_MODULE_3__.placeHolderScopedVars));\n  (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_6__.reportInteraction)(\"grafana_loki_format_query_clicked\", {\n    is_invalid: isInvalid,\n    query_type: isLogsQuery(query) ? \"logs\" : \"metric\"\n  });\n  if (isInvalid) {\n    return query;\n  }\n  let transformedQuery = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.replaceVariables)(query);\n  const transformationMatches = [];\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(transformedQuery);\n  if (tree.topNode.firstChild?.firstChild?.type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.MetricExpr) {\n    const pattern = /\\[__V_[0-2]__\\w+__V__\\]/g;\n    transformationMatches.push(...transformedQuery.matchAll(pattern));\n    transformedQuery = transformedQuery.replace(pattern, \"[0s]\");\n  }\n  let formatted = (0,_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.formatLokiQuery)(transformedQuery);\n  if (tree.topNode.firstChild?.firstChild?.type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.MetricExpr) {\n    transformationMatches.forEach((match) => {\n      formatted = formatted.replace(\"[0s]\", match[0]);\n    });\n  }\n  return (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.returnVariables)(formatted);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5VXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUM2QjtBQW9CdEI7QUFDMkI7QUFHeUI7QUFFckI7QUFFbUI7QUFDaEI7QUFFbEMsU0FBUyxZQUFZLFVBQXNDO0FBQ2hFLFNBQU8sR0FBRyxZQUFZLEtBQUssS0FBSztBQUNsQztBQU1PLFNBQVMsbUNBQW1DLE9BQXlCO0FBQzFFLFFBQU0sVUFBVSxDQUFDO0FBRWpCLFFBQU0sVUFBVSxrQkFBa0IsT0FBTyxDQUFDLDREQUFVLENBQUM7QUFFckQsV0FBUyxVQUFVLFNBQVM7QUFDMUIsVUFBTSxZQUFZLE9BQU8sU0FBUyx3REFBTSxHQUFHLFNBQVMsMkRBQVM7QUFDN0QsVUFBTSxZQUFZLE9BQU8sU0FBUyx3REFBTSxHQUFHLFNBQVMsMkRBQVM7QUFDN0QsVUFBTSxTQUFTLE9BQU8sU0FBUyx3REFBTTtBQUVyQyxRQUFLLENBQUMsYUFBYSxDQUFDLGFBQWMsQ0FBQyxRQUFRO0FBQ3pDO0FBQUEsSUFDRjtBQUVBLFVBQU0sYUFBYSxNQUFNLFVBQVUsT0FBTyxNQUFNLE9BQU8sRUFBRSxFQUFFLEtBQUs7QUFDaEUsVUFBTSxpQkFBaUIsV0FBVyxDQUFDLE1BQU07QUFDekMsVUFBTSxzQkFBc0IsV0FBVyxVQUFVLEdBQUcsV0FBVyxTQUFTLENBQUM7QUFFekUsUUFBSSxDQUFDLHFCQUFxQjtBQUN4QjtBQUFBLElBQ0Y7QUFFQSxRQUFJLGFBQWE7QUFHakIsUUFBSSxXQUFXO0FBR2IsbUJBQWEsaUJBQWlCLHNCQUFzQixvQkFBb0IsUUFBUSxTQUFTLElBQUk7QUFBQSxJQUMvRixPQUFPO0FBRUwsbUJBQWEsb0RBQVksQ0FBQyxtQkFBbUI7QUFBQSxJQUMvQztBQUVBLFFBQUksWUFBWTtBQUNkLGNBQVEsS0FBSyxVQUFVO0FBQUEsSUFDekI7QUFBQSxFQUNGO0FBQ0EsU0FBTztBQUNUO0FBRU8sU0FBUyx1QkFBdUIsT0FBNkI7QUFDbEUsUUFBTSxZQUFZLGlCQUFpQixLQUFLO0FBRXhDLFFBQU0sRUFBRSxTQUFTLE9BQU8sR0FBRyxLQUFLLElBQUk7QUFDcEMsU0FBTyxFQUFFLEdBQUcsTUFBTSxVQUFVO0FBQzlCO0FBRU8sU0FBUyxpQkFBaUIsT0FBaUM7QUFHaEUsUUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixRQUFNLG9CQUNKLGNBQWMsaURBQWEsQ0FBQyxTQUFTLGNBQWMsaURBQWEsQ0FBQyxXQUFXLGNBQWMsaURBQWEsQ0FBQztBQUcxRyxNQUFJLG1CQUFtQjtBQUNyQixXQUFPO0FBQUEsRUFDVDtBQUdBLE1BQUksTUFBTSxZQUFZLE1BQU07QUFDMUIsV0FBTyxpREFBYSxDQUFDO0FBQUEsRUFDdkI7QUFHQSxTQUFPLGlEQUFhLENBQUM7QUFDdkI7QUFFQSxNQUFNLGdCQUFnQixDQUFDLFVBQVUsY0FBYyxlQUFlLFFBQVE7QUFDdEUsTUFBTSxjQUFjLENBQUMsYUFBYSxjQUFjLGVBQWU7QUFDeEQsU0FBUyxVQUFVLE9BQXVCO0FBQy9DLE1BQUksa0JBQTBCO0FBQzlCLFFBQU0sT0FBTyx3REFBTSxDQUFDLE1BQU0sS0FBSztBQUMvQixPQUFLLFFBQVE7QUFBQSxJQUNYLE9BQU8sQ0FBQyxFQUFFLE1BQU0sTUFBTSxHQUFHLE1BQW9CO0FBQzNDLFlBQU0sWUFBWSxNQUFNLFVBQVUsTUFBTSxFQUFFO0FBQzFDLFVBQUksY0FBYyxTQUFTLElBQUksS0FBSyxDQUFDLFlBQVksU0FBUyxTQUFTLEdBQUc7QUFDcEUsMEJBQWtCLGdCQUFnQixRQUFRLFdBQVcsSUFBSTtBQUFBLE1BQzNEO0FBQUEsSUFDRjtBQUFBLEVBQ0YsQ0FBQztBQUNELFNBQU87QUFDVDtBQUVPLFNBQVMsc0JBQXNCLE9BQXlCO0FBQzdELFFBQU0sYUFBdUIsQ0FBQztBQUM5QixRQUFNLE9BQU8sd0RBQU0sQ0FBQyxNQUFNLEtBQUs7QUFDL0IsT0FBSyxRQUFRO0FBQUEsSUFDWCxPQUFPLENBQUMsRUFBRSxLQUFLLE1BQW9CO0FBQ2pDLGlCQUFXLEtBQUssSUFBSTtBQUFBLElBQ3RCO0FBQUEsRUFDRixDQUFDO0FBQ0QsU0FBTztBQUNUO0FBRU8sU0FBUyxnQkFBZ0IsT0FBZSxVQUEyQjtBQUN4RSxNQUFJQSxtQkFBa0I7QUFDdEIsUUFBTSxPQUFPLHdEQUFNLENBQUMsTUFBTSxLQUFLO0FBQy9CLE9BQUssUUFBUTtBQUFBLElBQ1gsT0FBTyxDQUFDLEVBQUUsS0FBSyxNQUFvQjtBQUNqQyxVQUFJLEtBQUssT0FBTyxVQUFVO0FBQ3hCLFFBQUFBLG1CQUFrQjtBQUNsQixlQUFPO0FBQUEsTUFDVDtBQUFBLElBQ0Y7QUFBQSxFQUNGLENBQUM7QUFDRCxTQUFPQTtBQUNUO0FBRU8sU0FBUyxrQkFBa0IsT0FBZSxXQUFvQztBQUNuRixRQUFNLFFBQXNCLENBQUM7QUFDN0IsUUFBTSxPQUFPLHdEQUFNLENBQUMsTUFBTSxLQUFLO0FBQy9CLE9BQUssUUFBUTtBQUFBLElBQ1gsT0FBTyxDQUFDLFNBQXVCO0FBQzdCLFVBQUksY0FBYyxVQUFhLFVBQVUsU0FBUyxLQUFLLEtBQUssRUFBRSxHQUFHO0FBQy9ELGNBQU0sS0FBSyxLQUFLLElBQUk7QUFBQSxNQUN0QjtBQUFBLElBQ0Y7QUFBQSxFQUNGLENBQUM7QUFDRCxTQUFPO0FBQ1Q7QUFFTyxTQUFTLDBCQUEwQixPQUFlLFdBQXNDO0FBQzdGLFFBQU0sWUFBNEIsQ0FBQztBQUNuQyxRQUFNLE9BQU8sd0RBQU0sQ0FBQyxNQUFNLEtBQUs7QUFDL0IsT0FBSyxRQUFRO0FBQUEsSUFDWCxPQUFPLENBQUMsU0FBdUI7QUFDN0IsVUFBSSxjQUFjLFVBQWEsVUFBVSxTQUFTLEtBQUssS0FBSyxFQUFFLEdBQUc7QUFDL0Qsa0JBQVUsS0FBSyxzREFBWSxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUM7QUFBQSxNQUNqRDtBQUFBLElBQ0Y7QUFBQSxFQUNGLENBQUM7QUFDRCxTQUFPO0FBQ1Q7QUFFTyxTQUFTLGlCQUFpQixPQUFlLFVBQTBDO0FBQ3hGLFFBQU0sUUFBUSxrQkFBa0IsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNqRCxTQUFPLE1BQU0sU0FBUyxJQUFJLE1BQU0sQ0FBQyxJQUFJO0FBQ3ZDO0FBT08sU0FBUyxpQkFBaUIsT0FBd0I7QUFDdkQsU0FBTyxnQkFBZ0IsT0FBTyxpRkFBTztBQUN2QztBQUVPLFNBQVMsWUFBWSxPQUF3QjtBQUNsRCxTQUFPLENBQUMsZ0JBQWdCLE9BQU8sNERBQVU7QUFDM0M7QUFFTyxTQUFTLGtCQUFrQixPQUFrRTtBQUNsRyxRQUFNLFFBQVEsa0JBQWtCLE9BQU8sQ0FBQyw2REFBVyxFQUFFLHNFQUFvQixDQUFDO0FBQzFFLFFBQU0sY0FBYyxNQUFNO0FBQzFCLFNBQU8sRUFBRSxpQkFBaUIsY0FBYyxHQUFHLFlBQVk7QUFDekQ7QUFFTyxTQUFTLG1CQUFtQixPQUFtQztBQUNwRSxRQUFNLFVBQVUsa0JBQWtCLE9BQU8sQ0FBQyw2REFBVyxFQUFFLHNFQUFvQixDQUFDO0FBQzVFLFNBQU8sUUFBUSxTQUFTLElBQUksTUFBTSxVQUFVLFFBQVEsQ0FBQyxFQUFFLE1BQU0sUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLEtBQUssSUFBSTtBQUN2RjtBQUVPLFNBQVMsOEJBQThCLE9BQXdCO0FBQ3BFLFFBQU0sU0FBUyxrQkFBa0IsT0FBTyxDQUFDLDZEQUFXLENBQUM7QUFDckQsYUFBVyxRQUFRLFFBQVE7QUFDekIsVUFBTSxRQUFRLEtBQUssU0FBUyx5REFBTyxHQUFHLFNBQVMsNERBQVU7QUFDekQsUUFBSSxPQUFPO0FBQ1QsWUFBTSxZQUFZLE1BQU0sVUFBVSxNQUFNLE1BQU0sTUFBTSxFQUFFO0FBQ3RELFVBQUksY0FBYyxhQUFhO0FBQzdCLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFDQSxTQUFPO0FBQ1Q7QUFFTyxTQUFTLHVCQUF1QixPQUF3QjtBQUM3RCxTQUFPLGdCQUFnQixPQUFPLGlFQUFlO0FBQy9DO0FBRU8sU0FBUyw0QkFBNEIsT0FBdUI7QUFDakUsTUFBSSxZQUFZLEtBQUssR0FBRztBQUN0QixXQUFPO0FBQUEsRUFDVDtBQUdBLFFBQU0sZUFBZSxpQkFBaUIsT0FBTywwREFBUTtBQUNyRCxNQUFJLENBQUMsY0FBYztBQUNqQixXQUFPO0FBQUEsRUFDVDtBQUNBLFFBQU0sV0FBVyxNQUFNLFVBQVUsYUFBYSxNQUFNLGFBQWEsRUFBRTtBQUVuRSxRQUFNLG1CQUFtQixpQkFBaUIsT0FBTyw4REFBWTtBQUM3RCxRQUFNLGVBQWUsbUJBQW1CLE1BQU0sVUFBVSxpQkFBaUIsTUFBTSxpQkFBaUIsRUFBRSxJQUFJO0FBRXRHLFNBQU8sR0FBRyxZQUFZLGVBQWUsS0FBSztBQUM1QztBQUVPLFNBQVMsdUJBQXVCLE9BQXdCO0FBQzdELFNBQU8sZ0JBQWdCLE9BQU8sNkRBQVc7QUFDM0M7QUFFTyxTQUFTLHNCQUFzQixPQUF3QjtBQUM1RCxTQUFPLGdCQUFnQixPQUFPLDREQUFVO0FBQzFDO0FBRU8sU0FBUyx5QkFBeUIsT0FBd0I7QUFDL0QsUUFBTSxhQUFhLGtCQUFrQixPQUFPLENBQUMsdURBQUssQ0FBQztBQUNuRCxhQUFXLFFBQVEsWUFBWTtBQUM3QixRQUFJLE1BQU0sVUFBVSxLQUFLLE1BQU0sS0FBSyxFQUFFLEVBQUUsTUFBTSxzQkFBc0IsR0FBRztBQUNyRSxhQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0Y7QUFDQSxTQUFPO0FBQ1Q7QUFFTyxTQUFTLDRCQUE0QixPQUF5QjtBQUNuRSxRQUFNLHdCQUF3Qix3RUFBMEIsQ0FBQyxLQUFLO0FBRTlELFFBQU0sZ0JBQWdCLHNCQUFzQixJQUFJLENBQUMsaUJBQWlCO0FBQ2hFLFdBQU8sTUFBTSxNQUFNLGFBQWEsTUFBTSxhQUFhLEVBQUU7QUFBQSxFQUN2RCxDQUFDO0FBRUQsU0FBTztBQUNUO0FBRU8sU0FBUyx5QkFBeUIsWUFBeUI7QUFDaEUsUUFBTSxVQUFVLFdBQ2IsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLElBQUksRUFDN0IsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLE1BQU0sU0FBUyxjQUFjLENBQUMsRUFDdkQsT0FBTyxDQUFDLFVBQVUsTUFBTSxJQUFJO0FBRS9CLFNBQU8sUUFBUSxTQUFTO0FBQzFCO0FBRU8sTUFBTSxjQUFjLENBQUMsVUFBeUM7QUFDbkUsTUFBSSxDQUFDLE9BQU87QUFDVixXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sWUFBWTtBQUNsQixTQUFPLFVBQVUsU0FBUztBQUM1QjtBQUVPLE1BQU0sNEJBQTRCLENBQUMsVUFBNkM7QUFDckYsTUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEtBQUssR0FBRztBQUNqQyxXQUFPO0FBQUEsRUFDVDtBQUVBLFNBQU87QUFDVDtBQUVPLFNBQVMsaUJBQWlCLE9BQWUsWUFBNEI7QUFDMUUsUUFBTSxZQUFZLGlCQUFpQixXQUFXLGtCQUFrQixPQUFPLHVIQUFxQixDQUFDO0FBRTdGLHFFQUFpQixDQUFDLHFDQUFxQztBQUFBLElBQ3JELFlBQVk7QUFBQSxJQUNaLFlBQVksWUFBWSxLQUFLLElBQUksU0FBUztBQUFBLEVBQzVDLENBQUM7QUFFRCxNQUFJLFdBQVc7QUFDYixXQUFPO0FBQUEsRUFDVDtBQUVBLE1BQUksbUJBQW1CLDhGQUFnQixDQUFDLEtBQUs7QUFDN0MsUUFBTSx3QkFBd0IsQ0FBQztBQUMvQixRQUFNLE9BQU8sd0RBQU0sQ0FBQyxNQUFNLGdCQUFnQjtBQUsxQyxNQUFJLEtBQUssUUFBUSxZQUFZLFlBQVksS0FBSyxPQUFPLDREQUFVLEVBQUU7QUFDL0QsVUFBTSxVQUFVO0FBQ2hCLDBCQUFzQixLQUFLLEdBQUcsaUJBQWlCLFNBQVMsT0FBTyxDQUFDO0FBQ2hFLHVCQUFtQixpQkFBaUIsUUFBUSxTQUFTLE1BQU07QUFBQSxFQUM3RDtBQUVBLE1BQUksWUFBWSxxRUFBZSxDQUFDLGdCQUFnQjtBQUVoRCxNQUFJLEtBQUssUUFBUSxZQUFZLFlBQVksS0FBSyxPQUFPLDREQUFVLEVBQUU7QUFDL0QsMEJBQXNCLFFBQVEsQ0FBQyxVQUFVO0FBQ3ZDLGtCQUFZLFVBQVUsUUFBUSxRQUFRLE1BQU0sQ0FBQyxDQUFDO0FBQUEsSUFDaEQsQ0FBQztBQUFBLEVBQ0g7QUFFQSxTQUFPLDZGQUFlLENBQUMsU0FBUztBQUNsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5VXRpbHMudHM/MDk4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTeW50YXhOb2RlIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5pbXBvcnQgeyBlc2NhcGVSZWdFeHAgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICBwYXJzZXIsXG4gIExpbmVGaWx0ZXIsXG4gIFBpcGVFeGFjdCxcbiAgUGlwZU1hdGNoLFxuICBGaWx0ZXIsXG4gIFN0cmluZyxcbiAgTGFiZWxGb3JtYXRFeHByLFxuICBTZWxlY3RvcixcbiAgUGlwZWxpbmVFeHByLFxuICBMYWJlbFBhcnNlcixcbiAgSnNvbkV4cHJlc3Npb25QYXJzZXIsXG4gIExhYmVsRmlsdGVyLFxuICBNZXRyaWNFeHByLFxuICBNYXRjaGVyLFxuICBJZGVudGlmaWVyLFxuICBSYW5nZSxcbiAgZm9ybWF0TG9raVF1ZXJ5LFxufSBmcm9tICdAZ3JhZmFuYS9sZXplci1sb2dxbCc7XG5pbXBvcnQgeyByZXBvcnRJbnRlcmFjdGlvbiB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHsgRGF0YVF1ZXJ5IH0gZnJvbSAnQGdyYWZhbmEvc2NoZW1hJztcblxuaW1wb3J0IHsgRXJyb3JJZCwgcmVwbGFjZVZhcmlhYmxlcywgcmV0dXJuVmFyaWFibGVzIH0gZnJvbSAnLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL3BhcnNpbmdVdGlscyc7XG5cbmltcG9ydCB7IHBsYWNlSG9sZGVyU2NvcGVkVmFycyB9IGZyb20gJy4vY29tcG9uZW50cy9tb25hY28tcXVlcnktZmllbGQvbW9uYWNvLWNvbXBsZXRpb24tcHJvdmlkZXIvdmFsaWRhdGlvbic7XG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSB9IGZyb20gJy4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBnZXRTdHJlYW1TZWxlY3RvclBvc2l0aW9ucywgTm9kZVBvc2l0aW9uIH0gZnJvbSAnLi9tb2RpZnlRdWVyeSc7XG5pbXBvcnQgeyBMb2tpUXVlcnksIExva2lRdWVyeVR5cGUgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFF1ZXJ5KHNlbGVjdG9yOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7c2VsZWN0b3IgfHwgJyd9YC50cmltKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBzZWFyY2ggdGVybXMgZnJvbSBhIExvZ1FMIHF1ZXJ5LlxuICogRS5nLiwgYHt9IHw9IGZvbyB8PWJhciAhPSBiYXpgIHJldHVybnMgYFsnZm9vJywgJ2JhciddYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhpZ2hsaWdodGVyRXhwcmVzc2lvbnNGcm9tUXVlcnkoaW5wdXQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgcmVzdWx0cyA9IFtdO1xuXG4gIGNvbnN0IGZpbHRlcnMgPSBnZXROb2Rlc0Zyb21RdWVyeShpbnB1dCwgW0xpbmVGaWx0ZXJdKTtcblxuICBmb3IgKGxldCBmaWx0ZXIgb2YgZmlsdGVycykge1xuICAgIGNvbnN0IHBpcGVFeGFjdCA9IGZpbHRlci5nZXRDaGlsZChGaWx0ZXIpPy5nZXRDaGlsZChQaXBlRXhhY3QpO1xuICAgIGNvbnN0IHBpcGVNYXRjaCA9IGZpbHRlci5nZXRDaGlsZChGaWx0ZXIpPy5nZXRDaGlsZChQaXBlTWF0Y2gpO1xuICAgIGNvbnN0IHN0cmluZyA9IGZpbHRlci5nZXRDaGlsZChTdHJpbmcpO1xuXG4gICAgaWYgKCghcGlwZUV4YWN0ICYmICFwaXBlTWF0Y2gpIHx8ICFzdHJpbmcpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlclRlcm0gPSBpbnB1dC5zdWJzdHJpbmcoc3RyaW5nLmZyb20sIHN0cmluZy50bykudHJpbSgpO1xuICAgIGNvbnN0IGJhY2t0aWNrZWRUZXJtID0gZmlsdGVyVGVybVswXSA9PT0gJ2AnO1xuICAgIGNvbnN0IHVud3JhcHBlZEZpbHRlclRlcm0gPSBmaWx0ZXJUZXJtLnN1YnN0cmluZygxLCBmaWx0ZXJUZXJtLmxlbmd0aCAtIDEpO1xuXG4gICAgaWYgKCF1bndyYXBwZWRGaWx0ZXJUZXJtKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0VGVybSA9ICcnO1xuXG4gICAgLy8gT25seSBmaWx0ZXIgZXhwcmVzc2lvbnMgd2l0aCB8fiBvcGVyYXRvciBhcmUgdHJlYXRlZCBhcyByZWd1bGFyIGV4cHJlc3Npb25zXG4gICAgaWYgKHBpcGVNYXRjaCkge1xuICAgICAgLy8gV2hlbiB1c2luZyBiYWNrdGlja3MsIExva2kgZG9lc24ndCByZXF1aXJlIHRvIGVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgYW5kIHdlIGNhbiBqdXN0IHB1c2ggcmVndWxhciBleHByZXNzaW9uIHRvIGhpZ2hsaWdodHMgYXJyYXlcbiAgICAgIC8vIFdoZW4gdXNpbmcgcXVvdGVzLCB3ZSBoYXZlIGV4dHJhIGJhY2tzbGFzaCBlc2NhcGluZyBhbmQgd2UgbmVlZCB0byByZXBsYWNlIFxcXFwgd2l0aCBcXFxuICAgICAgcmVzdWx0VGVybSA9IGJhY2t0aWNrZWRUZXJtID8gdW53cmFwcGVkRmlsdGVyVGVybSA6IHVud3JhcHBlZEZpbHRlclRlcm0ucmVwbGFjZSgvXFxcXFxcXFwvZywgJ1xcXFwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2UgbmVlZCB0byBlc2NhcGUgdGhpcyBzdHJpbmcgc28gaXQgaXMgbm90IG1hdGNoZWQgYXMgcmVndWxhciBleHByZXNzaW9uXG4gICAgICByZXN1bHRUZXJtID0gZXNjYXBlUmVnRXhwKHVud3JhcHBlZEZpbHRlclRlcm0pO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHRUZXJtKSB7XG4gICAgICByZXN1bHRzLnB1c2gocmVzdWx0VGVybSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9ybWFsaXplZExva2lRdWVyeShxdWVyeTogTG9raVF1ZXJ5KTogTG9raVF1ZXJ5IHtcbiAgY29uc3QgcXVlcnlUeXBlID0gZ2V0TG9raVF1ZXJ5VHlwZShxdWVyeSk7XG4gIC8vIGluc3RhbnQgYW5kIHJhbmdlIGFyZSBkZXByZWNhdGVkLCB3ZSB3YW50IHRvIHJlbW92ZSB0aGVtXG4gIGNvbnN0IHsgaW5zdGFudCwgcmFuZ2UsIC4uLnJlc3QgfSA9IHF1ZXJ5O1xuICByZXR1cm4geyAuLi5yZXN0LCBxdWVyeVR5cGUgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExva2lRdWVyeVR5cGUocXVlcnk6IExva2lRdWVyeSk6IExva2lRdWVyeVR5cGUge1xuICAvLyB3ZSBhcmUgbWlncmF0aW5nIGZyb20gYC5pbnN0YW50YCBhbmQgYC5yYW5nZWAgdG8gYC5xdWVyeVR5cGVgXG4gIC8vIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgY29ycmVjdCBxdWVyeSB0eXBlXG4gIGNvbnN0IHsgcXVlcnlUeXBlIH0gPSBxdWVyeTtcbiAgY29uc3QgaGFzVmFsaWRRdWVyeVR5cGUgPVxuICAgIHF1ZXJ5VHlwZSA9PT0gTG9raVF1ZXJ5VHlwZS5SYW5nZSB8fCBxdWVyeVR5cGUgPT09IExva2lRdWVyeVR5cGUuSW5zdGFudCB8fCBxdWVyeVR5cGUgPT09IExva2lRdWVyeVR5cGUuU3RyZWFtO1xuXG4gIC8vIGlmIHF1ZXJ5VHlwZSBleGlzdHMsIGl0IGlzIHJlc3BlY3RlZFxuICBpZiAoaGFzVmFsaWRRdWVyeVR5cGUpIHtcbiAgICByZXR1cm4gcXVlcnlUeXBlO1xuICB9XG5cbiAgLy8gaWYgbm8gcXVlcnlUeXBlLCBhbmQgaW5zdGFudD09PXRydWUsIGl0J3MgaW5zdGFudFxuICBpZiAocXVlcnkuaW5zdGFudCA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBMb2tpUXVlcnlUeXBlLkluc3RhbnQ7XG4gIH1cblxuICAvLyBvdGhlcndpc2UgaXQgaXMgcmFuZ2VcbiAgcmV0dXJuIExva2lRdWVyeVR5cGUuUmFuZ2U7XG59XG5cbmNvbnN0IHRhZ3NUb09ic2N1cmUgPSBbJ1N0cmluZycsICdJZGVudGlmaWVyJywgJ0xpbmVDb21tZW50JywgJ051bWJlciddO1xuY29uc3QgcGFydHNUb0tlZXAgPSBbJ19fZXJyb3JfXycsICdfX2ludGVydmFsJywgJ19faW50ZXJ2YWxfbXMnXTtcbmV4cG9ydCBmdW5jdGlvbiBvYmZ1c2NhdGUocXVlcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBvYmZ1c2NhdGVkUXVlcnk6IHN0cmluZyA9IHF1ZXJ5O1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgdHJlZS5pdGVyYXRlKHtcbiAgICBlbnRlcjogKHsgbmFtZSwgZnJvbSwgdG8gfSk6IGZhbHNlIHwgdm9pZCA9PiB7XG4gICAgICBjb25zdCBxdWVyeVBhcnQgPSBxdWVyeS5zdWJzdHJpbmcoZnJvbSwgdG8pO1xuICAgICAgaWYgKHRhZ3NUb09ic2N1cmUuaW5jbHVkZXMobmFtZSkgJiYgIXBhcnRzVG9LZWVwLmluY2x1ZGVzKHF1ZXJ5UGFydCkpIHtcbiAgICAgICAgb2JmdXNjYXRlZFF1ZXJ5ID0gb2JmdXNjYXRlZFF1ZXJ5LnJlcGxhY2UocXVlcnlQYXJ0LCBuYW1lKTtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIG9iZnVzY2F0ZWRRdWVyeTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVG9Ob2RlTmFtZXNBcnJheShxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBxdWVyeVBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgdHJlZS5pdGVyYXRlKHtcbiAgICBlbnRlcjogKHsgbmFtZSB9KTogZmFsc2UgfCB2b2lkID0+IHtcbiAgICAgIHF1ZXJ5UGFydHMucHVzaChuYW1lKTtcbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIHF1ZXJ5UGFydHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXJ5V2l0aE5vZGUocXVlcnk6IHN0cmluZywgbm9kZVR5cGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICBsZXQgaXNRdWVyeVdpdGhOb2RlID0gZmFsc2U7XG4gIGNvbnN0IHRyZWUgPSBwYXJzZXIucGFyc2UocXVlcnkpO1xuICB0cmVlLml0ZXJhdGUoe1xuICAgIGVudGVyOiAoeyB0eXBlIH0pOiBmYWxzZSB8IHZvaWQgPT4ge1xuICAgICAgaWYgKHR5cGUuaWQgPT09IG5vZGVUeXBlKSB7XG4gICAgICAgIGlzUXVlcnlXaXRoTm9kZSA9IHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIGlzUXVlcnlXaXRoTm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vZGVzRnJvbVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIG5vZGVUeXBlcz86IG51bWJlcltdKTogU3ludGF4Tm9kZVtdIHtcbiAgY29uc3Qgbm9kZXM6IFN5bnRheE5vZGVbXSA9IFtdO1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgdHJlZS5pdGVyYXRlKHtcbiAgICBlbnRlcjogKG5vZGUpOiBmYWxzZSB8IHZvaWQgPT4ge1xuICAgICAgaWYgKG5vZGVUeXBlcyA9PT0gdW5kZWZpbmVkIHx8IG5vZGVUeXBlcy5pbmNsdWRlcyhub2RlLnR5cGUuaWQpKSB7XG4gICAgICAgIG5vZGVzLnB1c2gobm9kZS5ub2RlKTtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIG5vZGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9kZVBvc2l0aW9uc0Zyb21RdWVyeShxdWVyeTogc3RyaW5nLCBub2RlVHlwZXM/OiBudW1iZXJbXSk6IE5vZGVQb3NpdGlvbltdIHtcbiAgY29uc3QgcG9zaXRpb25zOiBOb2RlUG9zaXRpb25bXSA9IFtdO1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgdHJlZS5pdGVyYXRlKHtcbiAgICBlbnRlcjogKG5vZGUpOiBmYWxzZSB8IHZvaWQgPT4ge1xuICAgICAgaWYgKG5vZGVUeXBlcyA9PT0gdW5kZWZpbmVkIHx8IG5vZGVUeXBlcy5pbmNsdWRlcyhub2RlLnR5cGUuaWQpKSB7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKE5vZGVQb3NpdGlvbi5mcm9tTm9kZShub2RlLm5vZGUpKTtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIHBvc2l0aW9ucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vZGVGcm9tUXVlcnkocXVlcnk6IHN0cmluZywgbm9kZVR5cGU6IG51bWJlcik6IFN5bnRheE5vZGUgfCB1bmRlZmluZWQge1xuICBjb25zdCBub2RlcyA9IGdldE5vZGVzRnJvbVF1ZXJ5KHF1ZXJ5LCBbbm9kZVR5cGVdKTtcbiAgcmV0dXJuIG5vZGVzLmxlbmd0aCA+IDAgPyBub2Rlc1swXSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdGhlIHF1ZXJ5IGFuZCBsb29rcyBmb3IgZXJyb3Igbm9kZXMuIElmIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSwgaXQgcmV0dXJucyBmYWxzZS5cbiAqIEdyYWZhbmEgdmFyaWFibGVzIGFyZSBjb25zaWRlcmVkIGVycm9ycywgc28gaWYgeW91IG5lZWQgdG8gdmFsaWRhdGUgYSBxdWVyeVxuICogd2l0aCB2YXJpYWJsZXMgeW91IHNob3VsZCBpbnRlcnBvbGF0ZSBpdCBmaXJzdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUXVlcnlXaXRoRXJyb3IocXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNRdWVyeVdpdGhOb2RlKHF1ZXJ5LCBFcnJvcklkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9nc1F1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuICFpc1F1ZXJ5V2l0aE5vZGUocXVlcnksIE1ldHJpY0V4cHIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNRdWVyeVdpdGhQYXJzZXIocXVlcnk6IHN0cmluZyk6IHsgcXVlcnlXaXRoUGFyc2VyOiBib29sZWFuOyBwYXJzZXJDb3VudDogbnVtYmVyIH0ge1xuICBjb25zdCBub2RlcyA9IGdldE5vZGVzRnJvbVF1ZXJ5KHF1ZXJ5LCBbTGFiZWxQYXJzZXIsIEpzb25FeHByZXNzaW9uUGFyc2VyXSk7XG4gIGNvbnN0IHBhcnNlckNvdW50ID0gbm9kZXMubGVuZ3RoO1xuICByZXR1cm4geyBxdWVyeVdpdGhQYXJzZXI6IHBhcnNlckNvdW50ID4gMCwgcGFyc2VyQ291bnQgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcnNlckZyb21RdWVyeShxdWVyeTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgcGFyc2VycyA9IGdldE5vZGVzRnJvbVF1ZXJ5KHF1ZXJ5LCBbTGFiZWxQYXJzZXIsIEpzb25FeHByZXNzaW9uUGFyc2VyXSk7XG4gIHJldHVybiBwYXJzZXJzLmxlbmd0aCA+IDAgPyBxdWVyeS5zdWJzdHJpbmcocGFyc2Vyc1swXS5mcm9tLCBwYXJzZXJzWzBdLnRvKS50cmltKCkgOiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXJ5UGlwZWxpbmVFcnJvckZpbHRlcmluZyhxdWVyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGxhYmVscyA9IGdldE5vZGVzRnJvbVF1ZXJ5KHF1ZXJ5LCBbTGFiZWxGaWx0ZXJdKTtcbiAgZm9yIChjb25zdCBub2RlIG9mIGxhYmVscykge1xuICAgIGNvbnN0IGxhYmVsID0gbm9kZS5nZXRDaGlsZChNYXRjaGVyKT8uZ2V0Q2hpbGQoSWRlbnRpZmllcik7XG4gICAgaWYgKGxhYmVsKSB7XG4gICAgICBjb25zdCBsYWJlbE5hbWUgPSBxdWVyeS5zdWJzdHJpbmcobGFiZWwuZnJvbSwgbGFiZWwudG8pO1xuICAgICAgaWYgKGxhYmVsTmFtZSA9PT0gJ19fZXJyb3JfXycpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUXVlcnlXaXRoTGFiZWxGb3JtYXQocXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNRdWVyeVdpdGhOb2RlKHF1ZXJ5LCBMYWJlbEZvcm1hdEV4cHIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nUXVlcnlGcm9tTWV0cmljc1F1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoaXNMb2dzUXVlcnkocXVlcnkpKSB7XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgLy8gTG9nIHF1ZXJ5IGluIG1ldHJpY3MgcXVlcnkgY29tcG9zZXMgb2YgU2VsZWN0b3IgJiBQaXBlbGluZUV4cHJcbiAgY29uc3Qgc2VsZWN0b3JOb2RlID0gZ2V0Tm9kZUZyb21RdWVyeShxdWVyeSwgU2VsZWN0b3IpO1xuICBpZiAoIXNlbGVjdG9yTm9kZSkge1xuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuICBjb25zdCBzZWxlY3RvciA9IHF1ZXJ5LnN1YnN0cmluZyhzZWxlY3Rvck5vZGUuZnJvbSwgc2VsZWN0b3JOb2RlLnRvKTtcblxuICBjb25zdCBwaXBlbGluZUV4cHJOb2RlID0gZ2V0Tm9kZUZyb21RdWVyeShxdWVyeSwgUGlwZWxpbmVFeHByKTtcbiAgY29uc3QgcGlwZWxpbmVFeHByID0gcGlwZWxpbmVFeHByTm9kZSA/IHF1ZXJ5LnN1YnN0cmluZyhwaXBlbGluZUV4cHJOb2RlLmZyb20sIHBpcGVsaW5lRXhwck5vZGUudG8pIDogJyc7XG5cbiAgcmV0dXJuIGAke3NlbGVjdG9yfSAke3BpcGVsaW5lRXhwcn1gLnRyaW0oKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUXVlcnlXaXRoTGFiZWxGaWx0ZXIocXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNRdWVyeVdpdGhOb2RlKHF1ZXJ5LCBMYWJlbEZpbHRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXJ5V2l0aExpbmVGaWx0ZXIocXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNRdWVyeVdpdGhOb2RlKHF1ZXJ5LCBMaW5lRmlsdGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUXVlcnlXaXRoUmFuZ2VWYXJpYWJsZShxdWVyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHJhbmdlTm9kZXMgPSBnZXROb2Rlc0Zyb21RdWVyeShxdWVyeSwgW1JhbmdlXSk7XG4gIGZvciAoY29uc3Qgbm9kZSBvZiByYW5nZU5vZGVzKSB7XG4gICAgaWYgKHF1ZXJ5LnN1YnN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pLm1hdGNoKC9cXFtcXCRfX3JhbmdlKF9zfF9tcyk/LykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJlYW1TZWxlY3RvcnNGcm9tUXVlcnkocXVlcnk6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgbGFiZWxNYXRjaGVyUG9zaXRpb25zID0gZ2V0U3RyZWFtU2VsZWN0b3JQb3NpdGlvbnMocXVlcnkpO1xuXG4gIGNvbnN0IGxhYmVsTWF0Y2hlcnMgPSBsYWJlbE1hdGNoZXJQb3NpdGlvbnMubWFwKChsYWJlbE1hdGNoZXIpID0+IHtcbiAgICByZXR1cm4gcXVlcnkuc2xpY2UobGFiZWxNYXRjaGVyLmZyb20sIGxhYmVsTWF0Y2hlci50byk7XG4gIH0pO1xuXG4gIHJldHVybiBsYWJlbE1hdGNoZXJzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWVzdFN1cHBvcnRzU3BsaXR0aW5nKGFsbFF1ZXJpZXM6IExva2lRdWVyeVtdKSB7XG4gIGNvbnN0IHF1ZXJpZXMgPSBhbGxRdWVyaWVzXG4gICAgLmZpbHRlcigocXVlcnkpID0+ICFxdWVyeS5oaWRlKVxuICAgIC5maWx0ZXIoKHF1ZXJ5KSA9PiAhcXVlcnkucmVmSWQuaW5jbHVkZXMoJ2RvLW5vdC1jaHVuaycpKVxuICAgIC5maWx0ZXIoKHF1ZXJ5KSA9PiBxdWVyeS5leHByKTtcblxuICByZXR1cm4gcXVlcmllcy5sZW5ndGggPiAwO1xufVxuXG5leHBvcnQgY29uc3QgaXNMb2tpUXVlcnkgPSAocXVlcnk6IERhdGFRdWVyeSk6IHF1ZXJ5IGlzIExva2lRdWVyeSA9PiB7XG4gIGlmICghcXVlcnkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBsb2tpUXVlcnkgPSBxdWVyeSBhcyBMb2tpUXVlcnk7XG4gIHJldHVybiBsb2tpUXVlcnkuZXhwciAhPT0gdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldExva2lRdWVyeUZyb21EYXRhUXVlcnkgPSAocXVlcnk/OiBEYXRhUXVlcnkpOiBMb2tpUXVlcnkgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAoIXF1ZXJ5IHx8ICFpc0xva2lRdWVyeShxdWVyeSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIHF1ZXJ5O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdExvZ3FsUXVlcnkocXVlcnk6IHN0cmluZywgZGF0YXNvdXJjZTogTG9raURhdGFzb3VyY2UpIHtcbiAgY29uc3QgaXNJbnZhbGlkID0gaXNRdWVyeVdpdGhFcnJvcihkYXRhc291cmNlLmludGVycG9sYXRlU3RyaW5nKHF1ZXJ5LCBwbGFjZUhvbGRlclNjb3BlZFZhcnMpKTtcblxuICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9sb2tpX2Zvcm1hdF9xdWVyeV9jbGlja2VkJywge1xuICAgIGlzX2ludmFsaWQ6IGlzSW52YWxpZCxcbiAgICBxdWVyeV90eXBlOiBpc0xvZ3NRdWVyeShxdWVyeSkgPyAnbG9ncycgOiAnbWV0cmljJyxcbiAgfSk7XG5cbiAgaWYgKGlzSW52YWxpZCkge1xuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuXG4gIGxldCB0cmFuc2Zvcm1lZFF1ZXJ5ID0gcmVwbGFjZVZhcmlhYmxlcyhxdWVyeSk7XG4gIGNvbnN0IHRyYW5zZm9ybWF0aW9uTWF0Y2hlcyA9IFtdO1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHRyYW5zZm9ybWVkUXVlcnkpO1xuXG4gIC8vIFZhcmlhYmxlcyBhcmUgY29uc2lkZXJlZCBlcnJvcnMgaW5zaWRlIG9mIHRoZSBwYXJzZXIsIHNvIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZW0gYmVmb3JlIGZvcm1hdHRpbmdcbiAgLy8gV2UgcmVwbGFjZSBhbGwgdmFyaWFibGVzIHdpdGggWzBzXSBhbmQga2VlcCB0cmFjayBvZiB0aGUgcmVwbGFjZWQgdmFyaWFibGVzXG4gIC8vIEFmdGVyIGZvcm1hdHRpbmcgd2UgcmVwbGFjZSBbMHNdIHdpdGggdGhlIG9yaWdpbmFsIHZhcmlhYmxlXG4gIGlmICh0cmVlLnRvcE5vZGUuZmlyc3RDaGlsZD8uZmlyc3RDaGlsZD8udHlwZS5pZCA9PT0gTWV0cmljRXhwcikge1xuICAgIGNvbnN0IHBhdHRlcm4gPSAvXFxbX19WX1swLTJdX19cXHcrX19WX19cXF0vZztcbiAgICB0cmFuc2Zvcm1hdGlvbk1hdGNoZXMucHVzaCguLi50cmFuc2Zvcm1lZFF1ZXJ5Lm1hdGNoQWxsKHBhdHRlcm4pKTtcbiAgICB0cmFuc2Zvcm1lZFF1ZXJ5ID0gdHJhbnNmb3JtZWRRdWVyeS5yZXBsYWNlKHBhdHRlcm4sICdbMHNdJyk7XG4gIH1cblxuICBsZXQgZm9ybWF0dGVkID0gZm9ybWF0TG9raVF1ZXJ5KHRyYW5zZm9ybWVkUXVlcnkpO1xuXG4gIGlmICh0cmVlLnRvcE5vZGUuZmlyc3RDaGlsZD8uZmlyc3RDaGlsZD8udHlwZS5pZCA9PT0gTWV0cmljRXhwcikge1xuICAgIHRyYW5zZm9ybWF0aW9uTWF0Y2hlcy5mb3JFYWNoKChtYXRjaCkgPT4ge1xuICAgICAgZm9ybWF0dGVkID0gZm9ybWF0dGVkLnJlcGxhY2UoJ1swc10nLCBtYXRjaFswXSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmV0dXJuVmFyaWFibGVzKGZvcm1hdHRlZCk7XG59XG4iXSwibmFtZXMiOlsiaXNRdWVyeVdpdGhOb2RlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/queryUtils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryModeller: () => (/* binding */ LokiQueryModeller),\n/* harmony export */   lokiQueryModeller: () => (/* binding */ lokiQueryModeller)\n/* harmony export */ });\n/* harmony import */ var _prometheus_querybuilder_shared_LokiAndPromQueryModellerBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/LokiAndPromQueryModellerBase.ts\");\n/* harmony import */ var _operations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/operations.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n\n\n\n\nclass LokiQueryModeller extends _prometheus_querybuilder_shared_LokiAndPromQueryModellerBase__WEBPACK_IMPORTED_MODULE_0__.LokiAndPromQueryModellerBase {\n  constructor() {\n    super(_operations__WEBPACK_IMPORTED_MODULE_1__.getOperationDefinitions);\n    this.setOperationCategories([\n      _types__WEBPACK_IMPORTED_MODULE_2__.LokiVisualQueryOperationCategory.Aggregations,\n      _types__WEBPACK_IMPORTED_MODULE_2__.LokiVisualQueryOperationCategory.RangeFunctions,\n      _types__WEBPACK_IMPORTED_MODULE_2__.LokiVisualQueryOperationCategory.Formats,\n      _types__WEBPACK_IMPORTED_MODULE_2__.LokiVisualQueryOperationCategory.BinaryOps,\n      _types__WEBPACK_IMPORTED_MODULE_2__.LokiVisualQueryOperationCategory.LabelFilters,\n      _types__WEBPACK_IMPORTED_MODULE_2__.LokiVisualQueryOperationCategory.LineFilters\n    ]);\n  }\n  renderLabels(labels) {\n    if (labels.length === 0) {\n      return \"{}\";\n    }\n    return super.renderLabels(labels);\n  }\n  getQueryPatterns() {\n    return [\n      {\n        name: \"Parse log lines with logfmt parser\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Log,\n        // {} | logfmt | __error__=``\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] }\n        ]\n      },\n      {\n        name: \"Parse log lines with JSON parser\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Log,\n        // {} | json | __error__=``\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Json, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] }\n        ]\n      },\n      {\n        name: \"Filter log line and parse with logfmt parser\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Log,\n        // {} |= `` | logfmt | __error__=``\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] }\n        ]\n      },\n      {\n        name: \"Filter log lines and parse with json parser\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Log,\n        // {} |= `` | json | __error__=``\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Json, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] }\n        ]\n      },\n      {\n        name: \"Parse log line with logfmt parser and use label filter\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Log,\n        // {} |= `` | logfmt | __error__=`` | label=`value`\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilter, params: [\"label\", \"=\", \"value\"] }\n        ]\n      },\n      {\n        name: \"Parse log lines with nested json\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Log,\n        // {} |= `` | json | line_format `{{ .message}}` | json\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Json, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineFormat, params: [\"{{.message}}\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Json, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] }\n        ]\n      },\n      {\n        name: \"Reformat log lines\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Log,\n        // {} |= `` | logfmt | line_format `{{.message}}`\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineFormat, params: [\"{{.message}}\"] }\n        ]\n      },\n      {\n        name: \"Rename lvl label to level\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Log,\n        // {} |= `` | logfmt | label_format level=lvl\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFormat, params: [\"lvl\", \"level\"] }\n        ]\n      },\n      {\n        name: \"Query on value inside a log line\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Metric,\n        // sum(sum_over_time({ | logfmt | __error__=`` | unwrap | __error__=`` [$__interval]))\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Unwrap, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.SumOverTime, params: [\"$__interval\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Sum, params: [] }\n        ]\n      },\n      {\n        name: \"Total requests per label of streams\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Metric,\n        // sum by() (count_over_time({}[$__interval)\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.CountOverTime, params: [\"$__interval\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Sum, params: [] }\n        ]\n      },\n      {\n        name: \"Total requests per parsed label or label of streams\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Metric,\n        // sum by() (count_over_time({}| logfmt | __error__=`` [$__interval))\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.CountOverTime, params: [\"$__interval\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Sum, params: [] }\n        ]\n      },\n      {\n        name: \"Bytes used by a log stream\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Metric,\n        // bytes_over_time({}[$__interval])\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.BytesOverTime, params: [\"$__interval\"] }\n        ]\n      },\n      {\n        name: \"Count of log lines per stream\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Metric,\n        // count_over_time({}[$__interval])\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LineContains, params: [\"\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.CountOverTime, params: [\"$__interval\"] }\n        ]\n      },\n      {\n        name: \"Top N results by label or parsed label\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Metric,\n        // topk(10, sum by () (count_over_time({} | logfmt | __error__=`` [$__interval])))\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.CountOverTime, params: [\"$__interval\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Sum, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.TopK, params: [10] }\n        ]\n      },\n      {\n        name: \"Extracted quantile\",\n        type: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryPatternType.Metric,\n        // quantile_over_time(0.5,{} | logfmt | unwrap latency[$__interval]) by ()\n        operations: [\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Logfmt, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Unwrap, params: [\"latency\"] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.QuantileOverTime, params: [\"$__interval\", 0.5] },\n          { id: _types__WEBPACK_IMPORTED_MODULE_2__.LokiOperationId.Sum, params: [] }\n        ]\n      }\n    ];\n  }\n}\nconst lokiQueryModeller = new LokiQueryModeller();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9Mb2tpUXVlcnlNb2RlbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkM7QUFHTDtBQUNrRTtBQUVuRyxNQUFNLDBCQUEwQixzSEFBNEIsQ0FBQztBQUFBLEVBQ2xFLGNBQWM7QUFDWixVQUFNLGdFQUF1QjtBQUU3QixTQUFLLHVCQUF1QjtBQUFBLE1BQzFCLG9FQUFnQyxDQUFDO0FBQUEsTUFDakMsb0VBQWdDLENBQUM7QUFBQSxNQUNqQyxvRUFBZ0MsQ0FBQztBQUFBLE1BQ2pDLG9FQUFnQyxDQUFDO0FBQUEsTUFDakMsb0VBQWdDLENBQUM7QUFBQSxNQUNqQyxvRUFBZ0MsQ0FBQztBQUFBLElBQ25DLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFQSxhQUFhLFFBQW1DO0FBQzlDLFFBQUksT0FBTyxXQUFXLEdBQUc7QUFDdkIsYUFBTztBQUFBLElBQ1Q7QUFFQSxXQUFPLE1BQU0sYUFBYSxNQUFNO0FBQUEsRUFDbEM7QUFBQSxFQUVBLG1CQUF1QztBQUNyQyxXQUFPO0FBQUEsTUFDTDtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sTUFBTSx3REFBb0IsQ0FBQztBQUFBO0FBQUEsUUFFM0IsWUFBWTtBQUFBLFVBQ1YsRUFBRSxJQUFJLG1EQUFlLENBQUMsUUFBUSxRQUFRLENBQUMsRUFBRTtBQUFBLFVBQ3pDLEVBQUUsSUFBSSxtREFBZSxDQUFDLHFCQUFxQixRQUFRLENBQUMsRUFBRTtBQUFBLFFBQ3hEO0FBQUEsTUFDRjtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE1BQU0sd0RBQW9CLENBQUM7QUFBQTtBQUFBLFFBRTNCLFlBQVk7QUFBQSxVQUNWLEVBQUUsSUFBSSxtREFBZSxDQUFDLE1BQU0sUUFBUSxDQUFDLEVBQUU7QUFBQSxVQUN2QyxFQUFFLElBQUksbURBQWUsQ0FBQyxxQkFBcUIsUUFBUSxDQUFDLEVBQUU7QUFBQSxRQUN4RDtBQUFB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QUFJLG1EQUFlLENBQUMsZUFBZSxRQUFRLENBQUMsYUFBYSxFQUFFO0FBQUEsVUFDN0QsRUFBRSxJQUFJLG1EQUFlLENBQUMsS0FBSyxRQUFRLENBQUMsRUFBRTtBQUFBLFVBQ3RDLEVBQUUsSUFBSSxtREFBZSxDQUFDLE1BQU0sUUFBUSxDQUFDLEVBQUUsRUFBRTtBQUFBLFFBQzNDO0FBQUEsTUFDRjtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE1BQU0sd0RBQW9CLENBQUM7QUFBQTtBQUFBLFFBRTNCLFlBQVk7QUFBQSxVQUNWLEVBQUUsSUFBSSxtREFBZSxDQUFDLFFBQVEsUUFBUSxDQUFDLEVBQUU7QUFBQSxVQUN6QyxFQUFFLElBQUksbURBQWUsQ0FBQyxxQkFBcUIsUUFBUSxDQUFDLEVBQUU7QUFBQSxVQUN0RCxFQUFFLElBQUksbURBQWUsQ0FBQyxRQUFRLFFBQVEsQ0FBQyxTQUFTLEVBQUU7QUFBQSxVQUNsRCxFQUFFLElBQUksbURBQWUsQ0FBQyxxQkFBcUIsUUFBUSxDQUFDLEVBQUU7QUFBQSxVQUN0RCxFQUFFLElBQUksbURBQWUsQ0FBQyxrQkFBa0IsUUFBUSxDQUFDLGVBQWUsR0FBRyxFQUFFO0FBQUEsVUFDckUsRUFBRSxJQUFJLG1EQUFlLENBQUMsS0FBSyxRQUFRLENBQUMsRUFBRTtBQUFBLFFBQ3hDO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0Y7QUFFTyxNQUFNLG9CQUFvQixJQUFJLGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9Mb2tpUXVlcnlNb2RlbGxlci50cz85N2UzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExva2lBbmRQcm9tUXVlcnlNb2RlbGxlckJhc2UgfSBmcm9tICcuLi8uLi9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvTG9raUFuZFByb21RdWVyeU1vZGVsbGVyQmFzZSc7XG5pbXBvcnQgeyBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlciB9IGZyb20gJy4uLy4uL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC90eXBlcyc7XG5cbmltcG9ydCB7IGdldE9wZXJhdGlvbkRlZmluaXRpb25zIH0gZnJvbSAnLi9vcGVyYXRpb25zJztcbmltcG9ydCB7IExva2lPcGVyYXRpb25JZCwgTG9raVF1ZXJ5UGF0dGVybiwgTG9raVF1ZXJ5UGF0dGVyblR5cGUsIExva2lWaXN1YWxRdWVyeU9wZXJhdGlvbkNhdGVnb3J5IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBMb2tpUXVlcnlNb2RlbGxlciBleHRlbmRzIExva2lBbmRQcm9tUXVlcnlNb2RlbGxlckJhc2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihnZXRPcGVyYXRpb25EZWZpbml0aW9ucyk7XG5cbiAgICB0aGlzLnNldE9wZXJhdGlvbkNhdGVnb3JpZXMoW1xuICAgICAgTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuQWdncmVnYXRpb25zLFxuICAgICAgTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuUmFuZ2VGdW5jdGlvbnMsXG4gICAgICBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5Gb3JtYXRzLFxuICAgICAgTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuQmluYXJ5T3BzLFxuICAgICAgTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuTGFiZWxGaWx0ZXJzLFxuICAgICAgTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuTGluZUZpbHRlcnMsXG4gICAgXSk7XG4gIH1cblxuICByZW5kZXJMYWJlbHMobGFiZWxzOiBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcltdKSB7XG4gICAgaWYgKGxhYmVscy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAne30nO1xuICAgIH1cblxuICAgIHJldHVybiBzdXBlci5yZW5kZXJMYWJlbHMobGFiZWxzKTtcbiAgfVxuXG4gIGdldFF1ZXJ5UGF0dGVybnMoKTogTG9raVF1ZXJ5UGF0dGVybltdIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBuYW1lOiAnUGFyc2UgbG9nIGxpbmVzIHdpdGggbG9nZm10IHBhcnNlcicsXG4gICAgICAgIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlLkxvZyxcbiAgICAgICAgLy8ge30gfCBsb2dmbXQgfCBfX2Vycm9yX189YGBcbiAgICAgICAgb3BlcmF0aW9uczogW1xuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5Mb2dmbXQsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXJOb0Vycm9ycywgcGFyYW1zOiBbXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1BhcnNlIGxvZyBsaW5lcyB3aXRoIEpTT04gcGFyc2VyJyxcbiAgICAgICAgdHlwZTogTG9raVF1ZXJ5UGF0dGVyblR5cGUuTG9nLFxuICAgICAgICAvLyB7fSB8IGpzb24gfCBfX2Vycm9yX189YGBcbiAgICAgICAgb3BlcmF0aW9uczogW1xuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5Kc29uLCBwYXJhbXM6IFtdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxhYmVsRmlsdGVyTm9FcnJvcnMsIHBhcmFtczogW10gfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdGaWx0ZXIgbG9nIGxpbmUgYW5kIHBhcnNlIHdpdGggbG9nZm10IHBhcnNlcicsXG4gICAgICAgIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlLkxvZyxcbiAgICAgICAgLy8ge30gfD0gYGAgfCBsb2dmbXQgfCBfX2Vycm9yX189YGBcbiAgICAgICAgb3BlcmF0aW9uczogW1xuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5MaW5lQ29udGFpbnMsIHBhcmFtczogWycnXSB9LFxuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5Mb2dmbXQsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXJOb0Vycm9ycywgcGFyYW1zOiBbXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0ZpbHRlciBsb2cgbGluZXMgYW5kIHBhcnNlIHdpdGgganNvbiBwYXJzZXInLFxuICAgICAgICB0eXBlOiBMb2tpUXVlcnlQYXR0ZXJuVHlwZS5Mb2csXG4gICAgICAgIC8vIHt9IHw9IGBgIHwganNvbiB8IF9fZXJyb3JfXz1gYFxuICAgICAgICBvcGVyYXRpb25zOiBbXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxpbmVDb250YWlucywgcGFyYW1zOiBbJyddIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkpzb24sIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXJOb0Vycm9ycywgcGFyYW1zOiBbXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1BhcnNlIGxvZyBsaW5lIHdpdGggbG9nZm10IHBhcnNlciBhbmQgdXNlIGxhYmVsIGZpbHRlcicsXG4gICAgICAgIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlLkxvZyxcbiAgICAgICAgLy8ge30gfD0gYGAgfCBsb2dmbXQgfCBfX2Vycm9yX189YGAgfCBsYWJlbD1gdmFsdWVgXG4gICAgICAgIG9wZXJhdGlvbnM6IFtcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUNvbnRhaW5zLCBwYXJhbXM6IFsnJ10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTG9nZm10LCBwYXJhbXM6IFtdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxhYmVsRmlsdGVyTm9FcnJvcnMsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXIsIHBhcmFtczogWydsYWJlbCcsICc9JywgJ3ZhbHVlJ10gfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdQYXJzZSBsb2cgbGluZXMgd2l0aCBuZXN0ZWQganNvbicsXG4gICAgICAgIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlLkxvZyxcbiAgICAgICAgLy8ge30gfD0gYGAgfCBqc29uIHwgbGluZV9mb3JtYXQgYHt7IC5tZXNzYWdlfX1gIHwganNvblxuICAgICAgICBvcGVyYXRpb25zOiBbXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxpbmVDb250YWlucywgcGFyYW1zOiBbJyddIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkpzb24sIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXJOb0Vycm9ycywgcGFyYW1zOiBbXSB9LFxuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5MaW5lRm9ybWF0LCBwYXJhbXM6IFsne3subWVzc2FnZX19J10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuSnNvbiwgcGFyYW1zOiBbXSB9LFxuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5MYWJlbEZpbHRlck5vRXJyb3JzLCBwYXJhbXM6IFtdIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnUmVmb3JtYXQgbG9nIGxpbmVzJyxcbiAgICAgICAgdHlwZTogTG9raVF1ZXJ5UGF0dGVyblR5cGUuTG9nLFxuICAgICAgICAvLyB7fSB8PSBgYCB8IGxvZ2ZtdCB8IGxpbmVfZm9ybWF0IGB7ey5tZXNzYWdlfX1gXG4gICAgICAgIG9wZXJhdGlvbnM6IFtcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUNvbnRhaW5zLCBwYXJhbXM6IFsnJ10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTG9nZm10LCBwYXJhbXM6IFtdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxhYmVsRmlsdGVyTm9FcnJvcnMsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUZvcm1hdCwgcGFyYW1zOiBbJ3t7Lm1lc3NhZ2V9fSddIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnUmVuYW1lIGx2bCBsYWJlbCB0byBsZXZlbCcsXG4gICAgICAgIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlLkxvZyxcbiAgICAgICAgLy8ge30gfD0gYGAgfCBsb2dmbXQgfCBsYWJlbF9mb3JtYXQgbGV2ZWw9bHZsXG4gICAgICAgIG9wZXJhdGlvbnM6IFtcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUNvbnRhaW5zLCBwYXJhbXM6IFsnJ10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTG9nZm10LCBwYXJhbXM6IFtdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxhYmVsRmlsdGVyTm9FcnJvcnMsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGb3JtYXQsIHBhcmFtczogWydsdmwnLCAnbGV2ZWwnXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1F1ZXJ5IG9uIHZhbHVlIGluc2lkZSBhIGxvZyBsaW5lJyxcbiAgICAgICAgdHlwZTogTG9raVF1ZXJ5UGF0dGVyblR5cGUuTWV0cmljLFxuICAgICAgICAvLyBzdW0oc3VtX292ZXJfdGltZSh7IHwgbG9nZm10IHwgX19lcnJvcl9fPWBgIHwgdW53cmFwIHwgX19lcnJvcl9fPWBgIFskX19pbnRlcnZhbF0pKVxuICAgICAgICBvcGVyYXRpb25zOiBbXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxpbmVDb250YWlucywgcGFyYW1zOiBbJyddIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxvZ2ZtdCwgcGFyYW1zOiBbXSB9LFxuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5MYWJlbEZpbHRlck5vRXJyb3JzLCBwYXJhbXM6IFtdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLlVud3JhcCwgcGFyYW1zOiBbJyddIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxhYmVsRmlsdGVyTm9FcnJvcnMsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuU3VtT3ZlclRpbWUsIHBhcmFtczogWyckX19pbnRlcnZhbCddIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLlN1bSwgcGFyYW1zOiBbXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1RvdGFsIHJlcXVlc3RzIHBlciBsYWJlbCBvZiBzdHJlYW1zJyxcbiAgICAgICAgdHlwZTogTG9raVF1ZXJ5UGF0dGVyblR5cGUuTWV0cmljLFxuICAgICAgICAvLyBzdW0gYnkoKSAoY291bnRfb3Zlcl90aW1lKHt9WyRfX2ludGVydmFsKVxuICAgICAgICBvcGVyYXRpb25zOiBbXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxpbmVDb250YWlucywgcGFyYW1zOiBbJyddIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkNvdW50T3ZlclRpbWUsIHBhcmFtczogWyckX19pbnRlcnZhbCddIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLlN1bSwgcGFyYW1zOiBbXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1RvdGFsIHJlcXVlc3RzIHBlciBwYXJzZWQgbGFiZWwgb3IgbGFiZWwgb2Ygc3RyZWFtcycsXG4gICAgICAgIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlLk1ldHJpYyxcbiAgICAgICAgLy8gc3VtIGJ5KCkgKGNvdW50X292ZXJfdGltZSh7fXwgbG9nZm10IHwgX19lcnJvcl9fPWBgIFskX19pbnRlcnZhbCkpXG4gICAgICAgIG9wZXJhdGlvbnM6IFtcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUNvbnRhaW5zLCBwYXJhbXM6IFsnJ10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTG9nZm10LCBwYXJhbXM6IFtdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxhYmVsRmlsdGVyTm9FcnJvcnMsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuQ291bnRPdmVyVGltZSwgcGFyYW1zOiBbJyRfX2ludGVydmFsJ10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuU3VtLCBwYXJhbXM6IFtdIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnQnl0ZXMgdXNlZCBieSBhIGxvZyBzdHJlYW0nLFxuICAgICAgICB0eXBlOiBMb2tpUXVlcnlQYXR0ZXJuVHlwZS5NZXRyaWMsXG4gICAgICAgIC8vIGJ5dGVzX292ZXJfdGltZSh7fVskX19pbnRlcnZhbF0pXG4gICAgICAgIG9wZXJhdGlvbnM6IFtcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUNvbnRhaW5zLCBwYXJhbXM6IFsnJ10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuQnl0ZXNPdmVyVGltZSwgcGFyYW1zOiBbJyRfX2ludGVydmFsJ10gfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdDb3VudCBvZiBsb2cgbGluZXMgcGVyIHN0cmVhbScsXG4gICAgICAgIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlLk1ldHJpYyxcbiAgICAgICAgLy8gY291bnRfb3Zlcl90aW1lKHt9WyRfX2ludGVydmFsXSlcbiAgICAgICAgb3BlcmF0aW9uczogW1xuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5MaW5lQ29udGFpbnMsIHBhcmFtczogWycnXSB9LFxuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5Db3VudE92ZXJUaW1lLCBwYXJhbXM6IFsnJF9faW50ZXJ2YWwnXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1RvcCBOIHJlc3VsdHMgYnkgbGFiZWwgb3IgcGFyc2VkIGxhYmVsJyxcbiAgICAgICAgdHlwZTogTG9raVF1ZXJ5UGF0dGVyblR5cGUuTWV0cmljLFxuICAgICAgICAvLyB0b3BrKDEwLCBzdW0gYnkgKCkgKGNvdW50X292ZXJfdGltZSh7fSB8IGxvZ2ZtdCB8IF9fZXJyb3JfXz1gYCBbJF9faW50ZXJ2YWxdKSkpXG4gICAgICAgIG9wZXJhdGlvbnM6IFtcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTG9nZm10LCBwYXJhbXM6IFtdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLkxhYmVsRmlsdGVyTm9FcnJvcnMsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuQ291bnRPdmVyVGltZSwgcGFyYW1zOiBbJyRfX2ludGVydmFsJ10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuU3VtLCBwYXJhbXM6IFtdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLlRvcEssIHBhcmFtczogWzEwXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0V4dHJhY3RlZCBxdWFudGlsZScsXG4gICAgICAgIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlLk1ldHJpYyxcbiAgICAgICAgLy8gcXVhbnRpbGVfb3Zlcl90aW1lKDAuNSx7fSB8IGxvZ2ZtdCB8IHVud3JhcCBsYXRlbmN5WyRfX2ludGVydmFsXSkgYnkgKClcbiAgICAgICAgb3BlcmF0aW9uczogW1xuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5Mb2dmbXQsIHBhcmFtczogW10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXJOb0Vycm9ycywgcGFyYW1zOiBbXSB9LFxuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5VbndyYXAsIHBhcmFtczogWydsYXRlbmN5J10gfSxcbiAgICAgICAgICB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXJOb0Vycm9ycywgcGFyYW1zOiBbXSB9LFxuICAgICAgICAgIHsgaWQ6IExva2lPcGVyYXRpb25JZC5RdWFudGlsZU92ZXJUaW1lLCBwYXJhbXM6IFsnJF9faW50ZXJ2YWwnLCAwLjVdIH0sXG4gICAgICAgICAgeyBpZDogTG9raU9wZXJhdGlvbklkLlN1bSwgcGFyYW1zOiBbXSB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsb2tpUXVlcnlNb2RlbGxlciA9IG5ldyBMb2tpUXVlcnlNb2RlbGxlcigpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/binaryScalarOperations.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   binaryScalarDefs: () => (/* binding */ binaryScalarDefs),\n/* harmony export */   binaryScalarOperations: () => (/* binding */ binaryScalarOperations)\n/* harmony export */ });\n/* harmony import */ var _prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/operationUtils.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n\n\n\nconst binaryScalarDefs = [\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.Addition,\n    name: \"Add scalar\",\n    sign: \"+\"\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.Subtraction,\n    name: \"Subtract scalar\",\n    sign: \"-\"\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.MultiplyBy,\n    name: \"Multiply by scalar\",\n    sign: \"*\"\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.DivideBy,\n    name: \"Divide by scalar\",\n    sign: \"/\"\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.Modulo,\n    name: \"Modulo by scalar\",\n    sign: \"%\"\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.Exponent,\n    name: \"Exponent\",\n    sign: \"^\"\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.EqualTo,\n    name: \"Equal to\",\n    sign: \"==\",\n    comparison: true\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.NotEqualTo,\n    name: \"Not equal to\",\n    sign: \"!=\",\n    comparison: true\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.GreaterThan,\n    name: \"Greater than\",\n    sign: \">\",\n    comparison: true\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.LessThan,\n    name: \"Less than\",\n    sign: \"<\",\n    comparison: true\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.GreaterOrEqual,\n    name: \"Greater or equal to\",\n    sign: \">=\",\n    comparison: true\n  },\n  {\n    id: _types__WEBPACK_IMPORTED_MODULE_1__.LokiOperationId.LessOrEqual,\n    name: \"Less or equal to\",\n    sign: \"<=\",\n    comparison: true\n  }\n];\nconst binaryScalarOperations = binaryScalarDefs.map((opDef) => {\n  const params = [{ name: \"Value\", type: \"number\" }];\n  const defaultParams = [2];\n  if (opDef.comparison) {\n    params.unshift({\n      name: \"Bool\",\n      type: \"boolean\",\n      description: \"If checked comparison will return 0 or 1 for the value rather than filtering.\"\n    });\n    defaultParams.unshift(false);\n  }\n  return {\n    id: opDef.id,\n    name: opDef.name,\n    params,\n    defaultParams,\n    alternativesKey: \"binary scalar operations\",\n    category: _types__WEBPACK_IMPORTED_MODULE_1__.LokiVisualQueryOperationCategory.BinaryOps,\n    renderer: getSimpleBinaryRenderer(opDef.sign),\n    addOperationHandler: _prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_0__.defaultAddOperationHandler\n  };\n});\nfunction getSimpleBinaryRenderer(operator) {\n  return function binaryRenderer(model, def, innerExpr) {\n    let param = model.params[0];\n    let bool = \"\";\n    if (model.params.length === 2) {\n      param = model.params[1];\n      bool = model.params[0] ? \" bool\" : \"\";\n    }\n    return `${innerExpr} ${operator}${bool} ${param}`;\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9iaW5hcnlTY2FsYXJPcGVyYXRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJDO0FBT3VCO0FBRTNELE1BQU0sbUJBQW1CO0FBQUEsRUFDOUI7QUFBQSxJQUNFLElBQUksbURBQWUsQ0FBQztBQUFBLElBQ3BCLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxFQUNSO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSSxtREFBZSxDQUFDO0FBQUEsSUFDcEIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLEVBQ1I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJLG1EQUFlLENBQUM7QUFBQSxJQUNwQixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsRUFDUjtBQUFBLEVBQ0E7QUFBQSxJQUNFLElBQUksbURBQWUsQ0FBQztBQUFBLElBQ3BCLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxFQUNSO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSSxtREFBZSxDQUFDO0FBQUEsSUFDcEIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLEVBQ1I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJLG1EQUFlLENBQUM7QUFBQSxJQUNwQixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsRUFDUjtBQUFBLEVBQ0E7QUFBQSxJQUNFLElBQUksbURBQWUsQ0FBQztBQUFBLElBQ3BCLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLFlBQVk7QUFBQSxFQUNkO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSSxtREFBZSxDQUFDO0FBQUEsSUFDcEIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sWUFBWTtBQUFBLEVBQ2Q7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJLG1EQUFlLENBQUM7QUFBQSxJQUNwQixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixZQUFZO0FBQUEsRUFDZDtBQUFBLEVBQ0E7QUFBQSxJQUNFLElBQUksbURBQWUsQ0FBQztBQUFBLElBQ3BCLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLFlBQVk7QUFBQSxFQUNkO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSSxtREFBZSxDQUFDO0FBQUEsSUFDcEIsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sWUFBWTtBQUFBLEVBQ2Q7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJLG1EQUFlLENBQUM7QUFBQSxJQUNwQixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixZQUFZO0FBQUEsRUFDZDtBQUNGO0FBSU8sTUFBTSx5QkFBcUQsaUJBQWlCLElBQUksQ0FBQyxVQUFVO0FBQ2hHLFFBQU0sU0FBMEMsQ0FBQyxFQUFFLE1BQU0sU0FBUyxNQUFNLFNBQVMsQ0FBQztBQUNsRixRQUFNLGdCQUF1QixDQUFDLENBQUM7QUFDL0IsTUFBSSxNQUFNLFlBQVk7QUFDcEIsV0FBTyxRQUFRO0FBQUEsTUFDYixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsSUFDZixDQUFDO0FBQ0Qsa0JBQWMsUUFBUSxLQUFLO0FBQUEsRUFDN0I7QUFFQSxTQUFPO0FBQUEsSUFDTCxJQUFJLE1BQU07QUFBQSxJQUNWLE1BQU0sTUFBTTtBQUFBLElBQ1o7QUFBQSxJQUNBO0FBQUEsSUFDQSxpQkFBaUI7QUFBQSxJQUNqQixVQUFVLG9FQUFnQyxDQUFDO0FBQUEsSUFDM0MsVUFBVSx3QkFBd0IsTUFBTSxJQUFJO0FBQUEsSUFDNUMscUJBQXFCLHNHQUEwQjtBQUExQixFQUN2QjtBQUNGLENBQUM7QUFFRCxTQUFTLHdCQUF3QixVQUFrQjtBQUNqRCxTQUFPLFNBQVMsZUFBZSxPQUE4QixLQUErQixXQUFtQjtBQUM3RyxRQUFJLFFBQVEsTUFBTSxPQUFPLENBQUM7QUFDMUIsUUFBSSxPQUFPO0FBQ1gsUUFBSSxNQUFNLE9BQU8sV0FBVyxHQUFHO0FBQzdCLGNBQVEsTUFBTSxPQUFPLENBQUM7QUFDdEIsYUFBTyxNQUFNLE9BQU8sQ0FBQyxJQUFJLFVBQVU7QUFBQSxJQUNyQztBQUVBLFdBQU8sR0FBRyxhQUFhLFdBQVcsUUFBUTtBQUFBLEVBQzVDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9xdWVyeWJ1aWxkZXIvYmluYXJ5U2NhbGFyT3BlcmF0aW9ucy50cz9lN2QxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHRBZGRPcGVyYXRpb25IYW5kbGVyIH0gZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL29wZXJhdGlvblV0aWxzJztcbmltcG9ydCB7XG4gIFF1ZXJ5QnVpbGRlck9wZXJhdGlvbixcbiAgUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmLFxuICBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbURlZixcbn0gZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL3R5cGVzJztcblxuaW1wb3J0IHsgTG9raU9wZXJhdGlvbklkLCBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgYmluYXJ5U2NhbGFyRGVmcyA9IFtcbiAge1xuICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuQWRkaXRpb24sXG4gICAgbmFtZTogJ0FkZCBzY2FsYXInLFxuICAgIHNpZ246ICcrJyxcbiAgfSxcbiAge1xuICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuU3VidHJhY3Rpb24sXG4gICAgbmFtZTogJ1N1YnRyYWN0IHNjYWxhcicsXG4gICAgc2lnbjogJy0nLFxuICB9LFxuICB7XG4gICAgaWQ6IExva2lPcGVyYXRpb25JZC5NdWx0aXBseUJ5LFxuICAgIG5hbWU6ICdNdWx0aXBseSBieSBzY2FsYXInLFxuICAgIHNpZ246ICcqJyxcbiAgfSxcbiAge1xuICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuRGl2aWRlQnksXG4gICAgbmFtZTogJ0RpdmlkZSBieSBzY2FsYXInLFxuICAgIHNpZ246ICcvJyxcbiAgfSxcbiAge1xuICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTW9kdWxvLFxuICAgIG5hbWU6ICdNb2R1bG8gYnkgc2NhbGFyJyxcbiAgICBzaWduOiAnJScsXG4gIH0sXG4gIHtcbiAgICBpZDogTG9raU9wZXJhdGlvbklkLkV4cG9uZW50LFxuICAgIG5hbWU6ICdFeHBvbmVudCcsXG4gICAgc2lnbjogJ14nLFxuICB9LFxuICB7XG4gICAgaWQ6IExva2lPcGVyYXRpb25JZC5FcXVhbFRvLFxuICAgIG5hbWU6ICdFcXVhbCB0bycsXG4gICAgc2lnbjogJz09JyxcbiAgICBjb21wYXJpc29uOiB0cnVlLFxuICB9LFxuICB7XG4gICAgaWQ6IExva2lPcGVyYXRpb25JZC5Ob3RFcXVhbFRvLFxuICAgIG5hbWU6ICdOb3QgZXF1YWwgdG8nLFxuICAgIHNpZ246ICchPScsXG4gICAgY29tcGFyaXNvbjogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuR3JlYXRlclRoYW4sXG4gICAgbmFtZTogJ0dyZWF0ZXIgdGhhbicsXG4gICAgc2lnbjogJz4nLFxuICAgIGNvbXBhcmlzb246IHRydWUsXG4gIH0sXG4gIHtcbiAgICBpZDogTG9raU9wZXJhdGlvbklkLkxlc3NUaGFuLFxuICAgIG5hbWU6ICdMZXNzIHRoYW4nLFxuICAgIHNpZ246ICc8JyxcbiAgICBjb21wYXJpc29uOiB0cnVlLFxuICB9LFxuICB7XG4gICAgaWQ6IExva2lPcGVyYXRpb25JZC5HcmVhdGVyT3JFcXVhbCxcbiAgICBuYW1lOiAnR3JlYXRlciBvciBlcXVhbCB0bycsXG4gICAgc2lnbjogJz49JyxcbiAgICBjb21wYXJpc29uOiB0cnVlLFxuICB9LFxuICB7XG4gICAgaWQ6IExva2lPcGVyYXRpb25JZC5MZXNzT3JFcXVhbCxcbiAgICBuYW1lOiAnTGVzcyBvciBlcXVhbCB0bycsXG4gICAgc2lnbjogJzw9JyxcbiAgICBjb21wYXJpc29uOiB0cnVlLFxuICB9LFxuXTtcblxuLy8gTm90IHN1cmUgYWJvdXQgdGhpcyBvbmUuIEl0IGNvdWxkIGFsc28gYmUgYSBtb3JlIGdlbmVyaWMgJ1NpbXBsZSBtYXRoIG9wZXJhdGlvbicgd2hlcmUgdXNlciBzcGVjaWZpZXNcbi8vIGJvdGggdGhlIG9wZXJhdG9yIGFuZCB0aGUgb3BlcmFuZCBpbiBhIHNpbmdsZSBpbnB1dFxuZXhwb3J0IGNvbnN0IGJpbmFyeVNjYWxhck9wZXJhdGlvbnM6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZltdID0gYmluYXJ5U2NhbGFyRGVmcy5tYXAoKG9wRGVmKSA9PiB7XG4gIGNvbnN0IHBhcmFtczogUXVlcnlCdWlsZGVyT3BlcmF0aW9uUGFyYW1EZWZbXSA9IFt7IG5hbWU6ICdWYWx1ZScsIHR5cGU6ICdudW1iZXInIH1dO1xuICBjb25zdCBkZWZhdWx0UGFyYW1zOiBhbnlbXSA9IFsyXTtcbiAgaWYgKG9wRGVmLmNvbXBhcmlzb24pIHtcbiAgICBwYXJhbXMudW5zaGlmdCh7XG4gICAgICBuYW1lOiAnQm9vbCcsXG4gICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0lmIGNoZWNrZWQgY29tcGFyaXNvbiB3aWxsIHJldHVybiAwIG9yIDEgZm9yIHRoZSB2YWx1ZSByYXRoZXIgdGhhbiBmaWx0ZXJpbmcuJyxcbiAgICB9KTtcbiAgICBkZWZhdWx0UGFyYW1zLnVuc2hpZnQoZmFsc2UpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpZDogb3BEZWYuaWQsXG4gICAgbmFtZTogb3BEZWYubmFtZSxcbiAgICBwYXJhbXMsXG4gICAgZGVmYXVsdFBhcmFtcyxcbiAgICBhbHRlcm5hdGl2ZXNLZXk6ICdiaW5hcnkgc2NhbGFyIG9wZXJhdGlvbnMnLFxuICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5CaW5hcnlPcHMsXG4gICAgcmVuZGVyZXI6IGdldFNpbXBsZUJpbmFyeVJlbmRlcmVyKG9wRGVmLnNpZ24pLFxuICAgIGFkZE9wZXJhdGlvbkhhbmRsZXI6IGRlZmF1bHRBZGRPcGVyYXRpb25IYW5kbGVyLFxuICB9O1xufSk7XG5cbmZ1bmN0aW9uIGdldFNpbXBsZUJpbmFyeVJlbmRlcmVyKG9wZXJhdG9yOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGJpbmFyeVJlbmRlcmVyKG1vZGVsOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb24sIGRlZjogUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmLCBpbm5lckV4cHI6IHN0cmluZykge1xuICAgIGxldCBwYXJhbSA9IG1vZGVsLnBhcmFtc1swXTtcbiAgICBsZXQgYm9vbCA9ICcnO1xuICAgIGlmIChtb2RlbC5wYXJhbXMubGVuZ3RoID09PSAyKSB7XG4gICAgICBwYXJhbSA9IG1vZGVsLnBhcmFtc1sxXTtcbiAgICAgIGJvb2wgPSBtb2RlbC5wYXJhbXNbMF0gPyAnIGJvb2wnIDogJyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke2lubmVyRXhwcn0gJHtvcGVyYXRvcn0ke2Jvb2x9ICR7cGFyYW19YDtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/binaryScalarOperations.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/LabelBrowserModal.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LabelBrowserModal: () => (/* binding */ LabelBrowserModal)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Modal/Modal.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/LoadingPlaceholder/LoadingPlaceholder.tsx\");\n/* harmony import */ var app_core_components_LocalStorageValueProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/components/LocalStorageValueProvider/index.tsx\");\n/* harmony import */ var _components_LokiLabelBrowser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiLabelBrowser.tsx\");\n\n\n\n\n\n\n\nconst LabelBrowserModal = (props) => {\n  const { isOpen, onClose, datasource, app } = props;\n  const [labelsLoaded, setLabelsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [hasLogLabels, setHasLogLabels] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const LAST_USED_LABELS_KEY = \"grafana.datasources.loki.browser.labels\";\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.useStyles2)(getStyles);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!isOpen) {\n      return;\n    }\n    datasource.languageProvider.fetchLabels().then((labels) => {\n      setLabelsLoaded(true);\n      setHasLogLabels(labels.length > 0);\n    });\n  }, [datasource, isOpen]);\n  const changeQuery = (value) => {\n    const { query, onChange: onChange2, onRunQuery } = props;\n    const nextQuery = { ...query, expr: value };\n    onChange2(nextQuery);\n    onRunQuery();\n  };\n  const onChange = (selector) => {\n    changeQuery(selector);\n    onClose();\n  };\n  const reportInteractionAndClose = () => {\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_5__.reportInteraction)(\"grafana_loki_label_browser_closed\", {\n      app,\n      closeType: \"modalClose\"\n    });\n    onClose();\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Modal, { isOpen, title: \"Label browser\", onDismiss: reportInteractionAndClose, className: styles.modal }, !labelsLoaded && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.LoadingPlaceholder, { text: \"Loading labels...\" }), labelsLoaded && !hasLogLabels && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"p\", null, \"No labels found.\"), labelsLoaded && hasLogLabels && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(app_core_components_LocalStorageValueProvider__WEBPACK_IMPORTED_MODULE_2__.LocalStorageValueProvider, { storageKey: LAST_USED_LABELS_KEY, defaultValue: [] }, (lastUsedLabels, onLastUsedLabelsSave, onLastUsedLabelsDelete) => {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _components_LokiLabelBrowser__WEBPACK_IMPORTED_MODULE_3__.LokiLabelBrowser,\n      {\n        languageProvider: datasource.languageProvider,\n        onChange,\n        lastUsedLabels,\n        storeLastUsedLabels: onLastUsedLabelsSave,\n        deleteLastUsedLabels: onLastUsedLabelsDelete,\n        app\n      }\n    );\n  }));\n};\nconst getStyles = (theme) => {\n  return {\n    modal: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      width: 85vw;\n      ${theme.breakpoints.down(\"md\")} {\n        width: 100%;\n      }\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xhYmVsQnJvd3Nlck1vZGFsLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUN1QjtBQUdUO0FBQ29CO0FBQ1o7QUFFVDtBQWMxQixNQUFNLG9CQUFvQixDQUFDLFVBQWlCO0FBQ2pELFFBQU0sRUFBRSxRQUFRLFNBQVMsWUFBWSxJQUFJLElBQUk7QUFDN0MsUUFBTSxDQUFDLGNBQWMsZUFBZSxJQUFJLCtDQUFRLENBQUMsS0FBSztBQUN0RCxRQUFNLENBQUMsY0FBYyxlQUFlLElBQUksK0NBQVEsQ0FBQyxLQUFLO0FBQ3RELFFBQU0sdUJBQXVCO0FBRTdCLFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFFbkMsa0RBQVMsQ0FBQyxNQUFNO0FBQ2QsUUFBSSxDQUFDLFFBQVE7QUFDWDtBQUFBLElBQ0Y7QUFFQSxlQUFXLGlCQUFpQixZQUFZLEVBQUUsS0FBSyxDQUFDLFdBQVc7QUFDekQsc0JBQWdCLElBQUk7QUFDcEIsc0JBQWdCLE9BQU8sU0FBUyxDQUFDO0FBQUEsSUFDbkMsQ0FBQztBQUFBLEVBQ0gsR0FBRyxDQUFDLFlBQVksTUFBTSxDQUFDO0FBRXZCLFFBQU0sY0FBYyxDQUFDLFVBQWtCO0FBQ3JDLFVBQU0sRUFBRSxPQUFPLFVBQUFBLFdBQVUsV0FBVyxJQUFJO0FBQ3hDLFVBQU0sWUFBWSxFQUFFLEdBQUcsT0FBTyxNQUFNLE1BQU07QUFDMUMsSUFBQUEsVUFBUyxTQUFTO0FBQ2xCLGVBQVc7QUFBQSxFQUNiO0FBRUEsUUFBTSxXQUFXLENBQUMsYUFBcUI7QUFDckMsZ0JBQVksUUFBUTtBQUNwQixZQUFRO0FBQUEsRUFDVjtBQUVBLFFBQU0sNEJBQTRCLE1BQU07QUFDdEMsdUVBQWlCLENBQUMscUNBQXFDO0FBQUEsTUFDckQ7QUFBQSxNQUNBLFdBQVc7QUFBQSxJQUNiLENBQUM7QUFDRCxZQUFRO0FBQUEsRUFDVjtBQUVBLFNBQ0UsMkVBQUMsOENBQUssSUFBQyxRQUFnQixPQUFNLGlCQUFnQixXQUFXLDJCQUEyQixXQUFXLE9BQU8sU0FDbEcsQ0FBQyxnQkFBZ0IsMkVBQUMsMkRBQWtCLElBQUMsTUFBSyxxQkFBb0IsR0FDOUQsZ0JBQWdCLENBQUMsZ0JBQWdCLDJFQUFDLFdBQUUsa0JBQWdCLEdBQ3BELGdCQUFnQixnQkFDZiwyRUFBQyxvR0FBeUIsSUFBVyxZQUFZLHNCQUFzQixjQUFjLENBQUMsS0FDbkYsQ0FBQyxnQkFBZ0Isc0JBQXNCLDJCQUEyQjtBQUNqRSxXQUNFO0FBQUEsTUFBQywwRUFBZ0I7QUFBaEI7QUFBQSxRQUNDLGtCQUFrQixXQUFXO0FBQUEsUUFDN0I7QUFBQSxRQUNBO0FBQUEsUUFDQSxxQkFBcUI7QUFBQSxRQUNyQixzQkFBc0I7QUFBQSxRQUN0QjtBQUFBO0FBQUEsSUFDRjtBQUFBLEVBRUosQ0FDRixDQUVKO0FBRUo7QUFFQSxNQUFNLFlBQVksQ0FBQyxVQUF5QjtBQUMxQyxTQUFPO0FBQUEsSUFDTCxPQUFPLGlEQUFHO0FBQUg7QUFBQSxRQUVILE1BQU0sWUFBWSxLQUFLLElBQUk7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlqQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvcXVlcnlidWlsZGVyL2NvbXBvbmVudHMvTGFiZWxCcm93c2VyTW9kYWwudHN4PzkxYTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBDb3JlQXBwLCBHcmFmYW5hVGhlbWUyIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyByZXBvcnRJbnRlcmFjdGlvbiB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHsgTG9hZGluZ1BsYWNlaG9sZGVyLCBNb2RhbCwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IExvY2FsU3RvcmFnZVZhbHVlUHJvdmlkZXIgfSBmcm9tICdhcHAvY29yZS9jb21wb25lbnRzL0xvY2FsU3RvcmFnZVZhbHVlUHJvdmlkZXInO1xuXG5pbXBvcnQgeyBMb2tpTGFiZWxCcm93c2VyIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Mb2tpTGFiZWxCcm93c2VyJztcbmltcG9ydCB7IExva2lEYXRhc291cmNlIH0gZnJvbSAnLi4vLi4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBMb2tpUXVlcnkgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICBpc09wZW46IGJvb2xlYW47XG4gIGRhdGFzb3VyY2U6IExva2lEYXRhc291cmNlO1xuICBxdWVyeTogTG9raVF1ZXJ5O1xuICBhcHA/OiBDb3JlQXBwO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICBvbkNoYW5nZTogKHF1ZXJ5OiBMb2tpUXVlcnkpID0+IHZvaWQ7XG4gIG9uUnVuUXVlcnk6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBMYWJlbEJyb3dzZXJNb2RhbCA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgY29uc3QgeyBpc09wZW4sIG9uQ2xvc2UsIGRhdGFzb3VyY2UsIGFwcCB9ID0gcHJvcHM7XG4gIGNvbnN0IFtsYWJlbHNMb2FkZWQsIHNldExhYmVsc0xvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtoYXNMb2dMYWJlbHMsIHNldEhhc0xvZ0xhYmVsc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IExBU1RfVVNFRF9MQUJFTFNfS0VZID0gJ2dyYWZhbmEuZGF0YXNvdXJjZXMubG9raS5icm93c2VyLmxhYmVscyc7XG5cbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRTdHlsZXMpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc09wZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkYXRhc291cmNlLmxhbmd1YWdlUHJvdmlkZXIuZmV0Y2hMYWJlbHMoKS50aGVuKChsYWJlbHMpID0+IHtcbiAgICAgIHNldExhYmVsc0xvYWRlZCh0cnVlKTtcbiAgICAgIHNldEhhc0xvZ0xhYmVscyhsYWJlbHMubGVuZ3RoID4gMCk7XG4gICAgfSk7XG4gIH0sIFtkYXRhc291cmNlLCBpc09wZW5dKTtcblxuICBjb25zdCBjaGFuZ2VRdWVyeSA9ICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgeyBxdWVyeSwgb25DaGFuZ2UsIG9uUnVuUXVlcnkgfSA9IHByb3BzO1xuICAgIGNvbnN0IG5leHRRdWVyeSA9IHsgLi4ucXVlcnksIGV4cHI6IHZhbHVlIH07XG4gICAgb25DaGFuZ2UobmV4dFF1ZXJ5KTtcbiAgICBvblJ1blF1ZXJ5KCk7XG4gIH07XG5cbiAgY29uc3Qgb25DaGFuZ2UgPSAoc2VsZWN0b3I6IHN0cmluZykgPT4ge1xuICAgIGNoYW5nZVF1ZXJ5KHNlbGVjdG9yKTtcbiAgICBvbkNsb3NlKCk7XG4gIH07XG5cbiAgY29uc3QgcmVwb3J0SW50ZXJhY3Rpb25BbmRDbG9zZSA9ICgpID0+IHtcbiAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9sb2tpX2xhYmVsX2Jyb3dzZXJfY2xvc2VkJywge1xuICAgICAgYXBwLFxuICAgICAgY2xvc2VUeXBlOiAnbW9kYWxDbG9zZScsXG4gICAgfSk7XG4gICAgb25DbG9zZSgpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPE1vZGFsIGlzT3Blbj17aXNPcGVufSB0aXRsZT1cIkxhYmVsIGJyb3dzZXJcIiBvbkRpc21pc3M9e3JlcG9ydEludGVyYWN0aW9uQW5kQ2xvc2V9IGNsYXNzTmFtZT17c3R5bGVzLm1vZGFsfT5cbiAgICAgIHshbGFiZWxzTG9hZGVkICYmIDxMb2FkaW5nUGxhY2Vob2xkZXIgdGV4dD1cIkxvYWRpbmcgbGFiZWxzLi4uXCIgLz59XG4gICAgICB7bGFiZWxzTG9hZGVkICYmICFoYXNMb2dMYWJlbHMgJiYgPHA+Tm8gbGFiZWxzIGZvdW5kLjwvcD59XG4gICAgICB7bGFiZWxzTG9hZGVkICYmIGhhc0xvZ0xhYmVscyAmJiAoXG4gICAgICAgIDxMb2NhbFN0b3JhZ2VWYWx1ZVByb3ZpZGVyPHN0cmluZ1tdPiBzdG9yYWdlS2V5PXtMQVNUX1VTRURfTEFCRUxTX0tFWX0gZGVmYXVsdFZhbHVlPXtbXX0+XG4gICAgICAgICAgeyhsYXN0VXNlZExhYmVscywgb25MYXN0VXNlZExhYmVsc1NhdmUsIG9uTGFzdFVzZWRMYWJlbHNEZWxldGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxMb2tpTGFiZWxCcm93c2VyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VQcm92aWRlcj17ZGF0YXNvdXJjZS5sYW5ndWFnZVByb3ZpZGVyfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICBsYXN0VXNlZExhYmVscz17bGFzdFVzZWRMYWJlbHN9XG4gICAgICAgICAgICAgICAgc3RvcmVMYXN0VXNlZExhYmVscz17b25MYXN0VXNlZExhYmVsc1NhdmV9XG4gICAgICAgICAgICAgICAgZGVsZXRlTGFzdFVzZWRMYWJlbHM9e29uTGFzdFVzZWRMYWJlbHNEZWxldGV9XG4gICAgICAgICAgICAgICAgYXBwPXthcHB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH19XG4gICAgICAgIDwvTG9jYWxTdG9yYWdlVmFsdWVQcm92aWRlcj5cbiAgICAgICl9XG4gICAgPC9Nb2RhbD5cbiAgKTtcbn07XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIG1vZGFsOiBjc3NgXG4gICAgICB3aWR0aDogODV2dztcbiAgICAgICR7dGhlbWUuYnJlYWtwb2ludHMuZG93bignbWQnKX0ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICBgLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJvbkNoYW5nZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/LabelBrowserModal.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilder.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryBuilder: () => (/* binding */ LokiQueryBuilder)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/data.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/time.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRow.js\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_LabelFilters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/LabelFilters.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_OperationExplainedBox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationExplainedBox.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_OperationList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationList.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_OperationListExplained__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationListExplained.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_OperationsEditorRow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationsEditorRow.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_QueryBuilderHints__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryBuilderHints.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/RawQuery.tsx\");\n/* harmony import */ var _components_LokiQueryEditor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryEditor.tsx\");\n/* harmony import */ var _languageUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/datasource/loki/languageUtils.ts\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/plugins/datasource/loki/syntax.ts\");\n/* harmony import */ var _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts\");\n/* harmony import */ var _parsing__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/parsing.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n/* harmony import */ var _LokiQueryBuilderExplained__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderExplained.tsx\");\n/* harmony import */ var _NestedQueryList__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/NestedQueryList.tsx\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst LokiQueryBuilder = react__WEBPACK_IMPORTED_MODULE_0___default().memo(({ datasource, query, onChange, onRunQuery, showExplain }) => {\n  const [sampleData, setSampleData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [highlightedOp, setHighlightedOp] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n  const onChangeLabels = (labels) => {\n    onChange({ ...query, labels });\n  };\n  const withTemplateVariableOptions = async (optionsPromise) => {\n    const options = await optionsPromise;\n    return [...datasource.getVariables(), ...options].map((value) => ({ label: value, value }));\n  };\n  const onGetLabelNames = async (forLabel) => {\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    if (labelsToConsider.length === 0) {\n      return await datasource.languageProvider.fetchLabels();\n    }\n    const expr = _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_11__.lokiQueryModeller.renderLabels(labelsToConsider);\n    const series = await datasource.languageProvider.fetchSeriesLabels(expr);\n    const labelsNamesToConsider = labelsToConsider.map((l) => l.label);\n    const labelNames = Object.keys(series).filter((name) => !labelsNamesToConsider.includes(name)).sort();\n    return labelNames;\n  };\n  const onGetLabelValues = async (forLabel) => {\n    if (!forLabel.label) {\n      return [];\n    }\n    let values;\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    if (labelsToConsider.length === 0) {\n      values = await datasource.languageProvider.fetchLabelValues(forLabel.label);\n    } else {\n      const expr = _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_11__.lokiQueryModeller.renderLabels(labelsToConsider);\n      const result = await datasource.languageProvider.fetchSeriesLabels(expr);\n      values = result[datasource.interpolateString(forLabel.label)];\n    }\n    return values ? values.map((v) => (0,_languageUtils__WEBPACK_IMPORTED_MODULE_9__.escapeLabelValueInSelector)(v, forLabel.op)) : [];\n  };\n  const labelFilterRequired = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const { labels, operations: op } = query;\n    if (!labels.length && op.length) {\n      if (op.length === 1 && op[0].id === _types__WEBPACK_IMPORTED_MODULE_13__.LokiOperationId.LineContains && op[0].params[0] === \"\") {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  }, [query]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const onGetSampleData = async () => {\n      const lokiQuery = { expr: _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_11__.lokiQueryModeller.renderQuery(query), refId: \"data-samples\" };\n      const series = await datasource.getDataSamples(lokiQuery);\n      const sampleData2 = { series, state: _grafana_data__WEBPACK_IMPORTED_MODULE_16__.LoadingState.Done, timeRange: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_17__.getDefaultTimeRange)() };\n      setSampleData(sampleData2);\n    };\n    onGetSampleData().catch(console.error);\n  }, [datasource, query]);\n  const lang = { grammar: _syntax__WEBPACK_IMPORTED_MODULE_10__[\"default\"], name: \"logql\" };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { \"data-testid\": _components_LokiQueryEditor__WEBPACK_IMPORTED_MODULE_8__.testIds.editor }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_18__.EditorRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    app_plugins_datasource_prometheus_querybuilder_shared_LabelFilters__WEBPACK_IMPORTED_MODULE_1__.LabelFilters,\n    {\n      onGetLabelNames: (forLabel) => withTemplateVariableOptions(onGetLabelNames(forLabel)),\n      onGetLabelValues: (forLabel) => withTemplateVariableOptions(onGetLabelValues(forLabel)),\n      labelsFilters: query.labels,\n      onChange: onChangeLabels,\n      labelFilterRequired\n    }\n  )), showExplain && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    app_plugins_datasource_prometheus_querybuilder_shared_OperationExplainedBox__WEBPACK_IMPORTED_MODULE_2__.OperationExplainedBox,\n    {\n      stepNumber: 1,\n      title: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_plugins_datasource_prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_7__.RawQuery, { query: `${_LokiQueryModeller__WEBPACK_IMPORTED_MODULE_11__.lokiQueryModeller.renderLabels(query.labels)}`, lang })\n    },\n    _LokiQueryBuilderExplained__WEBPACK_IMPORTED_MODULE_14__.EXPLAIN_LABEL_FILTER_CONTENT\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_plugins_datasource_prometheus_querybuilder_shared_OperationsEditorRow__WEBPACK_IMPORTED_MODULE_5__.OperationsEditorRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    app_plugins_datasource_prometheus_querybuilder_shared_OperationList__WEBPACK_IMPORTED_MODULE_3__.OperationList,\n    {\n      queryModeller: _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_11__.lokiQueryModeller,\n      query,\n      onChange,\n      onRunQuery,\n      datasource,\n      highlightedOp\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    app_plugins_datasource_prometheus_querybuilder_shared_QueryBuilderHints__WEBPACK_IMPORTED_MODULE_6__.QueryBuilderHints,\n    {\n      datasource,\n      query,\n      onChange,\n      data: sampleData,\n      queryModeller: _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_11__.lokiQueryModeller,\n      buildVisualQueryFromString: _parsing__WEBPACK_IMPORTED_MODULE_12__.buildVisualQueryFromString\n    }\n  )), showExplain && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    app_plugins_datasource_prometheus_querybuilder_shared_OperationListExplained__WEBPACK_IMPORTED_MODULE_4__.OperationListExplained,\n    {\n      stepNumber: 2,\n      queryModeller: _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_11__.lokiQueryModeller,\n      query,\n      lang,\n      onMouseEnter: (op) => {\n        setHighlightedOp(op);\n      },\n      onMouseLeave: () => {\n        setHighlightedOp(void 0);\n      }\n    }\n  ), query.binaryQueries && query.binaryQueries.length > 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _NestedQueryList__WEBPACK_IMPORTED_MODULE_15__.NestedQueryList,\n    {\n      query,\n      datasource,\n      onChange,\n      onRunQuery,\n      showExplain\n    }\n  ));\n});\nLokiQueryBuilder.displayName = \"LokiQueryBuilder\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xva2lRdWVyeUJ1aWxkZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0Q7QUFFeUM7QUFDbkU7QUFDRztBQUNTO0FBQ1I7QUFDUztBQUNIO0FBQ0Y7QUFDVDtBQU1EO0FBRW1CO0FBQ2xCO0FBQ1M7QUFDUztBQUNNO0FBRUo7QUFDYjtBQVN6QixNQUFNLG1CQUFtQixpREFBVSxDQUFRLENBQUMsRUFBRSxZQUFZLE9BQU8sVUFBVSxZQUFZLFlBQVksTUFBTTtBQUM5RyxRQUFNLENBQUMsWUFBWSxhQUFhLElBQUksK0NBQVEsQ0FBWTtBQUN4RCxRQUFNLENBQUMsZUFBZSxnQkFBZ0IsSUFBSSwrQ0FBUSxDQUFvQyxNQUFTO0FBRS9GLFFBQU0saUJBQWlCLENBQUMsV0FBc0M7QUFDNUQsYUFBUyxFQUFFLEdBQUcsT0FBTyxPQUFPLENBQUM7QUFBQSxFQUMvQjtBQUVBLFFBQU0sOEJBQThCLE9BQU8sbUJBQWtFO0FBQzNHLFVBQU0sVUFBVSxNQUFNO0FBQ3RCLFdBQU8sQ0FBQyxHQUFHLFdBQVcsYUFBYSxHQUFHLEdBQUcsT0FBTyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxPQUFPLE1BQU0sRUFBRTtBQUFBLEVBQzVGO0FBRUEsUUFBTSxrQkFBa0IsT0FBTyxhQUFrRTtBQUMvRixVQUFNLG1CQUFtQixNQUFNLE9BQU8sT0FBTyxDQUFDLE1BQU0sTUFBTSxRQUFRO0FBRWxFLFFBQUksaUJBQWlCLFdBQVcsR0FBRztBQUNqQyxhQUFPLE1BQU0sV0FBVyxpQkFBaUIsWUFBWTtBQUFBLElBQ3ZEO0FBRUEsVUFBTSxPQUFPLGtFQUFpQixDQUFDLGFBQWEsZ0JBQWdCO0FBQzVELFVBQU0sU0FBUyxNQUFNLFdBQVcsaUJBQWlCLGtCQUFrQixJQUFJO0FBQ3ZFLFVBQU0sd0JBQXdCLGlCQUFpQixJQUFJLENBQUMsTUFB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LE1BQ0M7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsTUFBTTtBQUFBLE1BQ04sZUFBZSxrRUFBaUI7QUFBakIsTUFDZiwwQkFBMEI7QUFBMUI7QUFBQSxFQUNGLENBQ0YsR0FDQyxlQUNDO0FBQUEsSUFBQyxnSUFBc0I7QUFBdEI7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLGVBQWUsa0VBQWlCO0FBQWpCLE1BQ2Y7QUFBQSxNQUNBO0FBQUEsTUFDQSxjQUFjLENBQUMsT0FBTztBQUNwQix5QkFBaUIsRUFBRTtBQUFBLE1BQ3JCO0FBQUEsTUFDQSxjQUFjLE1BQU07QUFDbEIseUJBQWlCLE1BQVM7QUFBQSxNQUM1QjtBQUFBO0FBQUEsRUFDRixHQUVELE1BQU0saUJBQWlCLE1BQU0sY0FBYyxTQUFTLEtBQ25EO0FBQUEsSUFBQyw4REFBZTtBQUFmO0FBQUEsTUFDQztBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLEVBQ0YsQ0FFSjtBQUVKLENBQUM7QUFFRCxpQkFBaUIsY0FBYyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xva2lRdWVyeUJ1aWxkZXIudHN4P2JjOWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IERhdGFTb3VyY2VBcGksIGdldERlZmF1bHRUaW1lUmFuZ2UsIExvYWRpbmdTdGF0ZSwgUGFuZWxEYXRhLCBTZWxlY3RhYmxlVmFsdWUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEVkaXRvclJvdyB9IGZyb20gJ0BncmFmYW5hL2V4cGVyaW1lbnRhbCc7XG5pbXBvcnQgeyBMYWJlbEZpbHRlcnMgfSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9MYWJlbEZpbHRlcnMnO1xuaW1wb3J0IHsgT3BlcmF0aW9uRXhwbGFpbmVkQm94IH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uRXhwbGFpbmVkQm94JztcbmltcG9ydCB7IE9wZXJhdGlvbkxpc3QgfSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9PcGVyYXRpb25MaXN0JztcbmltcG9ydCB7IE9wZXJhdGlvbkxpc3RFeHBsYWluZWQgfSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9PcGVyYXRpb25MaXN0RXhwbGFpbmVkJztcbmltcG9ydCB7IE9wZXJhdGlvbnNFZGl0b3JSb3cgfSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9PcGVyYXRpb25zRWRpdG9yUm93JztcbmltcG9ydCB7IFF1ZXJ5QnVpbGRlckhpbnRzIH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvUXVlcnlCdWlsZGVySGludHMnO1xuaW1wb3J0IHsgUmF3UXVlcnkgfSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9SYXdRdWVyeSc7XG5pbXBvcnQge1xuICBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcixcbiAgUXVlcnlCdWlsZGVyT3BlcmF0aW9uLFxufSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC90eXBlcyc7XG5cbmltcG9ydCB7IHRlc3RJZHMgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0xva2lRdWVyeUVkaXRvcic7XG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSB9IGZyb20gJy4uLy4uL2RhdGFzb3VyY2UnO1xuaW1wb3J0IHsgZXNjYXBlTGFiZWxWYWx1ZUluU2VsZWN0b3IgfSBmcm9tICcuLi8uLi9sYW5ndWFnZVV0aWxzJztcbmltcG9ydCBsb2dxbEdyYW1tYXIgZnJvbSAnLi4vLi4vc3ludGF4JztcbmltcG9ydCB7IGxva2lRdWVyeU1vZGVsbGVyIH0gZnJvbSAnLi4vTG9raVF1ZXJ5TW9kZWxsZXInO1xuaW1wb3J0IHsgYnVpbGRWaXN1YWxRdWVyeUZyb21TdHJpbmcgfSBmcm9tICcuLi9wYXJzaW5nJztcbmltcG9ydCB7IExva2lPcGVyYXRpb25JZCwgTG9raVZpc3VhbFF1ZXJ5IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBFWFBMQUlOX0xBQkVMX0ZJTFRFUl9DT05URU5UIH0gZnJvbSAnLi9Mb2tpUXVlcnlCdWlsZGVyRXhwbGFpbmVkJztcbmltcG9ydCB7IE5lc3RlZFF1ZXJ5TGlzdCB9IGZyb20gJy4vTmVzdGVkUXVlcnlMaXN0JztcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XG4gIHF1ZXJ5OiBMb2tpVmlzdWFsUXVlcnk7XG4gIGRhdGFzb3VyY2U6IExva2lEYXRhc291cmNlO1xuICBzaG93RXhwbGFpbjogYm9vbGVhbjtcbiAgb25DaGFuZ2U6ICh1cGRhdGU6IExva2lWaXN1YWxRdWVyeSkgPT4gdm9pZDtcbiAgb25SdW5RdWVyeTogKCkgPT4gdm9pZDtcbn1cbmV4cG9ydCBjb25zdCBMb2tpUXVlcnlCdWlsZGVyID0gUmVhY3QubWVtbzxQcm9wcz4oKHsgZGF0YXNvdXJjZSwgcXVlcnksIG9uQ2hhbmdlLCBvblJ1blF1ZXJ5LCBzaG93RXhwbGFpbiB9KSA9PiB7XG4gIGNvbnN0IFtzYW1wbGVEYXRhLCBzZXRTYW1wbGVEYXRhXSA9IHVzZVN0YXRlPFBhbmVsRGF0YT4oKTtcbiAgY29uc3QgW2hpZ2hsaWdodGVkT3AsIHNldEhpZ2hsaWdodGVkT3BdID0gdXNlU3RhdGU8UXVlcnlCdWlsZGVyT3BlcmF0aW9uIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG4gIGNvbnN0IG9uQ2hhbmdlTGFiZWxzID0gKGxhYmVsczogUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXJbXSkgPT4ge1xuICAgIG9uQ2hhbmdlKHsgLi4ucXVlcnksIGxhYmVscyB9KTtcbiAgfTtcblxuICBjb25zdCB3aXRoVGVtcGxhdGVWYXJpYWJsZU9wdGlvbnMgPSBhc3luYyAob3B0aW9uc1Byb21pc2U6IFByb21pc2U8c3RyaW5nW10+KTogUHJvbWlzZTxTZWxlY3RhYmxlVmFsdWVbXT4gPT4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBvcHRpb25zUHJvbWlzZTtcbiAgICByZXR1cm4gWy4uLmRhdGFzb3VyY2UuZ2V0VmFyaWFibGVzKCksIC4uLm9wdGlvbnNdLm1hcCgodmFsdWUpID0+ICh7IGxhYmVsOiB2YWx1ZSwgdmFsdWUgfSkpO1xuICB9O1xuXG4gIGNvbnN0IG9uR2V0TGFiZWxOYW1lcyA9IGFzeW5jIChmb3JMYWJlbDogUGFydGlhbDxRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcj4pOiBQcm9taXNlPHN0cmluZ1tdPiA9PiB7XG4gICAgY29uc3QgbGFiZWxzVG9Db25zaWRlciA9IHF1ZXJ5LmxhYmVscy5maWx0ZXIoKHgpID0+IHggIT09IGZvckxhYmVsKTtcblxuICAgIGlmIChsYWJlbHNUb0NvbnNpZGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGF3YWl0IGRhdGFzb3VyY2UubGFuZ3VhZ2VQcm92aWRlci5mZXRjaExhYmVscygpO1xuICAgIH1cblxuICAgIGNvbnN0IGV4cHIgPSBsb2tpUXVlcnlNb2RlbGxlci5yZW5kZXJMYWJlbHMobGFiZWxzVG9Db25zaWRlcik7XG4gICAgY29uc3Qgc2VyaWVzID0gYXdhaXQgZGF0YXNvdXJjZS5sYW5ndWFnZVByb3ZpZGVyLmZldGNoU2VyaWVzTGFiZWxzKGV4cHIpO1xuICAgIGNvbnN0IGxhYmVsc05hbWVzVG9Db25zaWRlciA9IGxhYmVsc1RvQ29uc2lkZXIubWFwKChsKSA9PiBsLmxhYmVsKTtcblxuICAgIGNvbnN0IGxhYmVsTmFtZXMgPSBPYmplY3Qua2V5cyhzZXJpZXMpXG4gICAgICAvLyBGaWx0ZXIgb3V0IGxhYmVsIG5hbWVzIHRoYXQgYXJlIGFscmVhZHkgc2VsZWN0ZWRcbiAgICAgIC5maWx0ZXIoKG5hbWUpID0+ICFsYWJlbHNOYW1lc1RvQ29uc2lkZXIuaW5jbHVkZXMobmFtZSkpXG4gICAgICAuc29ydCgpO1xuXG4gICAgcmV0dXJuIGxhYmVsTmFtZXM7XG4gIH07XG5cbiAgY29uc3Qgb25HZXRMYWJlbFZhbHVlcyA9IGFzeW5jIChmb3JMYWJlbDogUGFydGlhbDxRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcj4pID0+IHtcbiAgICBpZiAoIWZvckxhYmVsLmxhYmVsKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IHZhbHVlcztcbiAgICBjb25zdCBsYWJlbHNUb0NvbnNpZGVyID0gcXVlcnkubGFiZWxzLmZpbHRlcigoeCkgPT4geCAhPT0gZm9yTGFiZWwpO1xuICAgIGlmIChsYWJlbHNUb0NvbnNpZGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdmFsdWVzID0gYXdhaXQgZGF0YXNvdXJjZS5sYW5ndWFnZVByb3ZpZGVyLmZldGNoTGFiZWxWYWx1ZXMoZm9yTGFiZWwubGFiZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBleHByID0gbG9raVF1ZXJ5TW9kZWxsZXIucmVuZGVyTGFiZWxzKGxhYmVsc1RvQ29uc2lkZXIpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YXNvdXJjZS5sYW5ndWFnZVByb3ZpZGVyLmZldGNoU2VyaWVzTGFiZWxzKGV4cHIpO1xuICAgICAgdmFsdWVzID0gcmVzdWx0W2RhdGFzb3VyY2UuaW50ZXJwb2xhdGVTdHJpbmcoZm9yTGFiZWwubGFiZWwpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzID8gdmFsdWVzLm1hcCgodikgPT4gZXNjYXBlTGFiZWxWYWx1ZUluU2VsZWN0b3IodiwgZm9yTGFiZWwub3ApKSA6IFtdOyAvLyBFc2NhcGUgdmFsdWVzIGluIHJldHVyblxuICB9O1xuXG4gIGNvbnN0IGxhYmVsRmlsdGVyUmVxdWlyZWQ6IGJvb2xlYW4gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IGxhYmVscywgb3BlcmF0aW9uczogb3AgfSA9IHF1ZXJ5O1xuICAgIGlmICghbGFiZWxzLmxlbmd0aCAmJiBvcC5sZW5ndGgpIHtcbiAgICAgIC8vIEZpbHRlciBpcyByZXF1aXJlZCB3aGVuIG9wZXJhdGlvbnMgYXJlIHByZXNlbnQgKGVtcHR5IGxpbmUgY29udGFpbnMgb3BlcmF0aW9uIGlzIGV4Y2VwdGlvbilcbiAgICAgIGlmIChvcC5sZW5ndGggPT09IDEgJiYgb3BbMF0uaWQgPT09IExva2lPcGVyYXRpb25JZC5MaW5lQ29udGFpbnMgJiYgb3BbMF0ucGFyYW1zWzBdID09PSAnJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LCBbcXVlcnldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG9uR2V0U2FtcGxlRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxva2lRdWVyeSA9IHsgZXhwcjogbG9raVF1ZXJ5TW9kZWxsZXIucmVuZGVyUXVlcnkocXVlcnkpLCByZWZJZDogJ2RhdGEtc2FtcGxlcycgfTtcbiAgICAgIGNvbnN0IHNlcmllcyA9IGF3YWl0IGRhdGFzb3VyY2UuZ2V0RGF0YVNhbXBsZXMobG9raVF1ZXJ5KTtcbiAgICAgIGNvbnN0IHNhbXBsZURhdGEgPSB7IHNlcmllcywgc3RhdGU6IExvYWRpbmdTdGF0ZS5Eb25lLCB0aW1lUmFuZ2U6IGdldERlZmF1bHRUaW1lUmFuZ2UoKSB9O1xuICAgICAgc2V0U2FtcGxlRGF0YShzYW1wbGVEYXRhKTtcbiAgICB9O1xuXG4gICAgb25HZXRTYW1wbGVEYXRhKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH0sIFtkYXRhc291cmNlLCBxdWVyeV0pO1xuXG4gIGNvbnN0IGxhbmcgPSB7IGdyYW1tYXI6IGxvZ3FsR3JhbW1hciwgbmFtZTogJ2xvZ3FsJyB9O1xuICByZXR1cm4gKFxuICAgIDxkaXYgZGF0YS10ZXN0aWQ9e3Rlc3RJZHMuZWRpdG9yfT5cbiAgICAgIDxFZGl0b3JSb3c+XG4gICAgICAgIDxMYWJlbEZpbHRlcnNcbiAgICAgICAgICBvbkdldExhYmVsTmFtZXM9eyhmb3JMYWJlbDogUGFydGlhbDxRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcj4pID0+XG4gICAgICAgICAgICB3aXRoVGVtcGxhdGVWYXJpYWJsZU9wdGlvbnMob25HZXRMYWJlbE5hbWVzKGZvckxhYmVsKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgb25HZXRMYWJlbFZhbHVlcz17KGZvckxhYmVsOiBQYXJ0aWFsPFF1ZXJ5QnVpbGRlckxhYmVsRmlsdGVyPikgPT5cbiAgICAgICAgICAgIHdpdGhUZW1wbGF0ZVZhcmlhYmxlT3B0aW9ucyhvbkdldExhYmVsVmFsdWVzKGZvckxhYmVsKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgbGFiZWxzRmlsdGVycz17cXVlcnkubGFiZWxzfVxuICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZUxhYmVsc31cbiAgICAgICAgICBsYWJlbEZpbHRlclJlcXVpcmVkPXtsYWJlbEZpbHRlclJlcXVpcmVkfVxuICAgICAgICAvPlxuICAgICAgPC9FZGl0b3JSb3c+XG4gICAgICB7c2hvd0V4cGxhaW4gJiYgKFxuICAgICAgICA8T3BlcmF0aW9uRXhwbGFpbmVkQm94XG4gICAgICAgICAgc3RlcE51bWJlcj17MX1cbiAgICAgICAgICB0aXRsZT17PFJhd1F1ZXJ5IHF1ZXJ5PXtgJHtsb2tpUXVlcnlNb2RlbGxlci5yZW5kZXJMYWJlbHMocXVlcnkubGFiZWxzKX1gfSBsYW5nPXtsYW5nfSAvPn1cbiAgICAgICAgPlxuICAgICAgICAgIHtFWFBMQUlOX0xBQkVMX0ZJTFRFUl9DT05URU5UfVxuICAgICAgICA8L09wZXJhdGlvbkV4cGxhaW5lZEJveD5cbiAgICAgICl9XG4gICAgICA8T3BlcmF0aW9uc0VkaXRvclJvdz5cbiAgICAgICAgPE9wZXJhdGlvbkxpc3RcbiAgICAgICAgICBxdWVyeU1vZGVsbGVyPXtsb2tpUXVlcnlNb2RlbGxlcn1cbiAgICAgICAgICBxdWVyeT17cXVlcnl9XG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgIG9uUnVuUXVlcnk9e29uUnVuUXVlcnl9XG4gICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZSBhcyBEYXRhU291cmNlQXBpfVxuICAgICAgICAgIGhpZ2hsaWdodGVkT3A9e2hpZ2hsaWdodGVkT3B9XG4gICAgICAgIC8+XG4gICAgICAgIDxRdWVyeUJ1aWxkZXJIaW50czxMb2tpVmlzdWFsUXVlcnk+XG4gICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICBxdWVyeT17cXVlcnl9XG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgIGRhdGE9e3NhbXBsZURhdGF9XG4gICAgICAgICAgcXVlcnlNb2RlbGxlcj17bG9raVF1ZXJ5TW9kZWxsZXJ9XG4gICAgICAgICAgYnVpbGRWaXN1YWxRdWVyeUZyb21TdHJpbmc9e2J1aWxkVmlzdWFsUXVlcnlGcm9tU3RyaW5nfVxuICAgICAgICAvPlxuICAgICAgPC9PcGVyYXRpb25zRWRpdG9yUm93PlxuICAgICAge3Nob3dFeHBsYWluICYmIChcbiAgICAgICAgPE9wZXJhdGlvbkxpc3RFeHBsYWluZWQ8TG9raVZpc3VhbFF1ZXJ5PlxuICAgICAgICAgIHN0ZXBOdW1iZXI9ezJ9XG4gICAgICAgICAgcXVlcnlNb2RlbGxlcj17bG9raVF1ZXJ5TW9kZWxsZXJ9XG4gICAgICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgICAgIGxhbmc9e2xhbmd9XG4gICAgICAgICAgb25Nb3VzZUVudGVyPXsob3ApID0+IHtcbiAgICAgICAgICAgIHNldEhpZ2hsaWdodGVkT3Aob3ApO1xuICAgICAgICAgIH19XG4gICAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRIaWdobGlnaHRlZE9wKHVuZGVmaW5lZCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICB7cXVlcnkuYmluYXJ5UXVlcmllcyAmJiBxdWVyeS5iaW5hcnlRdWVyaWVzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8TmVzdGVkUXVlcnlMaXN0XG4gICAgICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgIG9uUnVuUXVlcnk9e29uUnVuUXVlcnl9XG4gICAgICAgICAgc2hvd0V4cGxhaW49e3Nob3dFeHBsYWlufVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn0pO1xuXG5Mb2tpUXVlcnlCdWlsZGVyLmRpc3BsYXlOYW1lID0gJ0xva2lRdWVyeUJ1aWxkZXInO1xuIl0sIm5hbWVzIjpbInNhbXBsZURhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilder.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderContainer.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryBuilderContainer: () => (/* binding */ LokiQueryBuilderContainer)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@reduxjs-toolkit-virtual-75570b104b/0/cache/@reduxjs-toolkit-npm-1.9.3-cbad5da1de-d965fc6197.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_LokiQueryEditor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryEditor.tsx\");\n/* harmony import */ var _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts\");\n/* harmony import */ var _parsing__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/parsing.ts\");\n/* harmony import */ var _LokiQueryBuilder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilder.tsx\");\n/* harmony import */ var _QueryPreview__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/QueryPreview.tsx\");\n\n\n\n\n\n\n\n\nfunction LokiQueryBuilderContainer(props) {\n  const { query, onChange, onRunQuery, datasource, showExplain } = props;\n  const [state, dispatch] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(stateSlice.reducer, {\n    expr: query.expr,\n    // Use initial visual query only if query.expr is empty string\n    visQuery: query.expr === \"\" ? {\n      labels: [],\n      operations: [{ id: \"__line_contains\", params: [\"\"] }]\n    } : void 0\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    dispatch(exprChanged(query.expr));\n  }, [query.expr]);\n  const onVisQueryChange = (visQuery) => {\n    const expr = _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_2__.lokiQueryModeller.renderQuery(visQuery);\n    dispatch(visualQueryChange({ visQuery, expr }));\n    onChange({ ...props.query, expr });\n  };\n  if (!state.visQuery) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _LokiQueryBuilder__WEBPACK_IMPORTED_MODULE_4__.LokiQueryBuilder,\n    {\n      query: state.visQuery,\n      datasource,\n      onChange: onVisQueryChange,\n      onRunQuery,\n      showExplain,\n      \"data-testid\": _components_LokiQueryEditor__WEBPACK_IMPORTED_MODULE_1__.testIds.editor\n    }\n  ), query.expr !== \"\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_QueryPreview__WEBPACK_IMPORTED_MODULE_5__.QueryPreview, { query: query.expr }));\n}\nconst initialState = { expr: \"\" };\nconst stateSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_6__.createSlice)({\n  name: \"loki-builder-container\",\n  initialState,\n  reducers: {\n    visualQueryChange: (state, action) => {\n      state.expr = action.payload.expr;\n      state.visQuery = action.payload.visQuery;\n    },\n    exprChanged: (state, action) => {\n      if (!state.visQuery || state.expr !== action.payload) {\n        state.expr = action.payload;\n        const parseResult = (0,_parsing__WEBPACK_IMPORTED_MODULE_3__.buildVisualQueryFromString)(action.payload);\n        state.visQuery = parseResult.query;\n      }\n    }\n  }\n});\nconst { visualQueryChange, exprChanged } = stateSlice.actions;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xva2lRdWVyeUJ1aWxkZXJDb250YWluZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDRTtBQUVyQjtBQUdVO0FBQ1M7QUFHVjtBQUNKO0FBa0J0QixTQUFTLDBCQUEwQixPQUFjO0FBQ3RELFFBQU0sRUFBRSxPQUFPLFVBQVUsWUFBWSxZQUFZLFlBQVksSUFBSTtBQUNqRSxRQUFNLENBQUMsT0FBTyxRQUFRLElBQUksaURBQVUsQ0FBQyxXQUFXLFNBQVM7QUFBQSxJQUN2RCxNQUFNLE1BQU07QUFBQTtBQUFBLElBRVosVUFDRSxNQUFNLFNBQVMsS0FDWDtBQUFBLE1BQ0UsUUFBUSxDQUFDO0FBQUEsTUFDVCxZQUFZLENBQUMsRUFBRSxJQUFJLG1CQUFtQixRQUFRLENBQUMsRUFBRSxFQUFFLENBQUM7QUFBQSxJQUN0RCxJQUNBO0FBQUEsRUFDUixDQUFDO0FBR0Qsa0RBQVMsQ0FBQyxNQUFNO0FBQ2QsYUFBUyxZQUFZLE1BQU0sSUFBSSxDQUFDO0FBQUEsRUFDbEMsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDO0FBRWYsUUFBTSxtQkFBbUIsQ0FBQyxhQUE4QjtBQUN0RCxVQUFNLE9BQU8saUVBQWlCLENBQUMsWUFBWSxRQUFRO0FBQ25ELGFBQVMsa0JBQWtCLEVBQUUsVUFBVSxLQUFLLENBQUMsQ0FBQztBQUM5QyxhQUFTLEVBQUUsR0FBRyxNQUFNLE9BQU8sS0FBVyxDQUFDO0FBQUEsRUFDekM7QUFFQSxNQUFJLENBQUMsTUFBTSxVQUFVO0FBQ25CLFdBQU87QUFBQSxFQUNUO0FBRUEsU0FDRSwwSUFDRTtBQUFBLElBQUMsK0RBQWdCO0FBQWhCO0FBQUEsTUFDQyxPQUFPLE1BQU07QUFBQSxNQUNiO0FBQUEsTUFDQSxVQUFVO0FBQUEsTUFDVjtBQUFBLE1BQ0E7QUFBQSxNQUNBLGVBQWEsZ0VBQU8sQ0FBQztBQUFBO0FBQUEsRUFDdkIsR0FDQyxNQUFNLFNBQVMsTUFBTSwyRUFBQyx1REFBWSxJQUFDLE9BQU8sTUFBTSxNQUFNLENBQ3pEO0FBRUo7QUFFQSxNQUFNLGVBQXNCLEVBQUUsTUFBTSxHQUFHO0FBRXZDLE1BQU0sYUFBYSw2REFBVyxDQUFDO0FBQUEsRUFDN0IsTUFBTTtBQUFBLEVBQ047QUFBQSxFQUNBLFVBQVU7QUFBQSxJQUNSLG1CQUFtQixDQUFDLE9BQU8sV0FBdUU7QUFDaEcsWUFBTSxPQUFPLE9BQU8sUUFBUTtBQUM1QixZQUFNLFdBQVcsT0FBTyxRQUFRO0FBQUEsSUFDbEM7QUFBQSxJQUNBLGFBQWEsQ0FBQyxPQUFPLFdBQWtDO0FBQ3JELFVBQUksQ0FBQyxNQUFNLFlBQVksTUFBTSxTQUFTLE9BQU8sU0FBUztBQUNwRCxjQUFNLE9BQU8sT0FBTztBQUNwQixjQUFNLGNBQWMsb0VBQTBCLENBQUMsT0FBTyxPQUFPO0FBQzdELGNBQU0sV0FBVyxZQUFZO0FBQUEsTUFDL0I7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGLENBQUM7QUFFRCxNQUFNLEVBQUUsbUJBQW1CLFlBQVksSUFBSSxXQUFXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvcXVlcnlidWlsZGVyL2NvbXBvbmVudHMvTG9raVF1ZXJ5QnVpbGRlckNvbnRhaW5lci50c3g/OWQxOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTbGljZSwgUGF5bG9hZEFjdGlvbiB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVkdWNlciB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgdGVzdElkcyB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTG9raVF1ZXJ5RWRpdG9yJztcbmltcG9ydCB7IExva2lEYXRhc291cmNlIH0gZnJvbSAnLi4vLi4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBMb2tpUXVlcnkgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBsb2tpUXVlcnlNb2RlbGxlciB9IGZyb20gJy4uL0xva2lRdWVyeU1vZGVsbGVyJztcbmltcG9ydCB7IGJ1aWxkVmlzdWFsUXVlcnlGcm9tU3RyaW5nIH0gZnJvbSAnLi4vcGFyc2luZyc7XG5pbXBvcnQgeyBMb2tpVmlzdWFsUXVlcnkgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7IExva2lRdWVyeUJ1aWxkZXIgfSBmcm9tICcuL0xva2lRdWVyeUJ1aWxkZXInO1xuaW1wb3J0IHsgUXVlcnlQcmV2aWV3IH0gZnJvbSAnLi9RdWVyeVByZXZpZXcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcbiAgcXVlcnk6IExva2lRdWVyeTtcbiAgZGF0YXNvdXJjZTogTG9raURhdGFzb3VyY2U7XG4gIG9uQ2hhbmdlOiAodXBkYXRlOiBMb2tpUXVlcnkpID0+IHZvaWQ7XG4gIG9uUnVuUXVlcnk6ICgpID0+IHZvaWQ7XG4gIHNob3dFeHBsYWluOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlIHtcbiAgdmlzUXVlcnk/OiBMb2tpVmlzdWFsUXVlcnk7XG4gIGV4cHI6IHN0cmluZztcbn1cblxuLyoqXG4gKiBUaGlzIGNvbXBvbmVudCBpcyBoZXJlIGp1c3QgdG8gY29udGFpbiB0aGUgdHJhbnNsYXRpb24gbG9naWMgYmV0d2VlbiBzdHJpbmcgcXVlcnkgYW5kIHRoZSB2aXN1YWwgcXVlcnkgYnVpbGRlciBtb2RlbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIExva2lRdWVyeUJ1aWxkZXJDb250YWluZXIocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnksIG9uQ2hhbmdlLCBvblJ1blF1ZXJ5LCBkYXRhc291cmNlLCBzaG93RXhwbGFpbiB9ID0gcHJvcHM7XG4gIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlUmVkdWNlcihzdGF0ZVNsaWNlLnJlZHVjZXIsIHtcbiAgICBleHByOiBxdWVyeS5leHByLFxuICAgIC8vIFVzZSBpbml0aWFsIHZpc3VhbCBxdWVyeSBvbmx5IGlmIHF1ZXJ5LmV4cHIgaXMgZW1wdHkgc3RyaW5nXG4gICAgdmlzUXVlcnk6XG4gICAgICBxdWVyeS5leHByID09PSAnJ1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIGxhYmVsczogW10sXG4gICAgICAgICAgICBvcGVyYXRpb25zOiBbeyBpZDogJ19fbGluZV9jb250YWlucycsIHBhcmFtczogWycnXSB9XSxcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICB9KTtcblxuICAvLyBPbmx5IHJlYnVpbGQgdmlzdWFsIHF1ZXJ5IGlmIGV4cHIgY2hhbmdlcyBmcm9tIG91dHNpZGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBkaXNwYXRjaChleHByQ2hhbmdlZChxdWVyeS5leHByKSk7XG4gIH0sIFtxdWVyeS5leHByXSk7XG5cbiAgY29uc3Qgb25WaXNRdWVyeUNoYW5nZSA9ICh2aXNRdWVyeTogTG9raVZpc3VhbFF1ZXJ5KSA9PiB7XG4gICAgY29uc3QgZXhwciA9IGxva2lRdWVyeU1vZGVsbGVyLnJlbmRlclF1ZXJ5KHZpc1F1ZXJ5KTtcbiAgICBkaXNwYXRjaCh2aXN1YWxRdWVyeUNoYW5nZSh7IHZpc1F1ZXJ5LCBleHByIH0pKTtcbiAgICBvbkNoYW5nZSh7IC4uLnByb3BzLnF1ZXJ5LCBleHByOiBleHByIH0pO1xuICB9O1xuXG4gIGlmICghc3RhdGUudmlzUXVlcnkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxMb2tpUXVlcnlCdWlsZGVyXG4gICAgICAgIHF1ZXJ5PXtzdGF0ZS52aXNRdWVyeX1cbiAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgb25DaGFuZ2U9e29uVmlzUXVlcnlDaGFuZ2V9XG4gICAgICAgIG9uUnVuUXVlcnk9e29uUnVuUXVlcnl9XG4gICAgICAgIHNob3dFeHBsYWluPXtzaG93RXhwbGFpbn1cbiAgICAgICAgZGF0YS10ZXN0aWQ9e3Rlc3RJZHMuZWRpdG9yfVxuICAgICAgLz5cbiAgICAgIHtxdWVyeS5leHByICE9PSAnJyAmJiA8UXVlcnlQcmV2aWV3IHF1ZXJ5PXtxdWVyeS5leHByfSAvPn1cbiAgICA8Lz5cbiAgKTtcbn1cblxuY29uc3QgaW5pdGlhbFN0YXRlOiBTdGF0ZSA9IHsgZXhwcjogJycgfTtcblxuY29uc3Qgc3RhdGVTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ2xva2ktYnVpbGRlci1jb250YWluZXInLFxuICBpbml0aWFsU3RhdGUsXG4gIHJlZHVjZXJzOiB7XG4gICAgdmlzdWFsUXVlcnlDaGFuZ2U6IChzdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPHsgdmlzUXVlcnk6IExva2lWaXN1YWxRdWVyeTsgZXhwcjogc3RyaW5nIH0+KSA9PiB7XG4gICAgICBzdGF0ZS5leHByID0gYWN0aW9uLnBheWxvYWQuZXhwcjtcbiAgICAgIHN0YXRlLnZpc1F1ZXJ5ID0gYWN0aW9uLnBheWxvYWQudmlzUXVlcnk7XG4gICAgfSxcbiAgICBleHByQ2hhbmdlZDogKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248c3RyaW5nPikgPT4ge1xuICAgICAgaWYgKCFzdGF0ZS52aXNRdWVyeSB8fCBzdGF0ZS5leHByICE9PSBhY3Rpb24ucGF5bG9hZCkge1xuICAgICAgICBzdGF0ZS5leHByID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gYnVpbGRWaXN1YWxRdWVyeUZyb21TdHJpbmcoYWN0aW9uLnBheWxvYWQpO1xuICAgICAgICBzdGF0ZS52aXNRdWVyeSA9IHBhcnNlUmVzdWx0LnF1ZXJ5O1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG59KTtcblxuY29uc3QgeyB2aXN1YWxRdWVyeUNoYW5nZSwgZXhwckNoYW5nZWQgfSA9IHN0YXRlU2xpY2UuYWN0aW9ucztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderContainer.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderExplained.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXPLAIN_LABEL_FILTER_CONTENT: () => (/* binding */ EXPLAIN_LABEL_FILTER_CONTENT),\n/* harmony export */   LokiQueryBuilderExplained: () => (/* binding */ LokiQueryBuilderExplained)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_OperationExplainedBox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationExplainedBox.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_OperationListExplained__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationListExplained.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/RawQuery.tsx\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/syntax.ts\");\n/* harmony import */ var _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts\");\n/* harmony import */ var _parsing__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/parsing.ts\");\n\n\n\n\n\n\n\n\n\nconst EXPLAIN_LABEL_FILTER_CONTENT = \"Fetch all log lines matching label filters.\";\nconst LokiQueryBuilderExplained = react__WEBPACK_IMPORTED_MODULE_0___default().memo(({ query }) => {\n  const visQuery = (0,_parsing__WEBPACK_IMPORTED_MODULE_6__.buildVisualQueryFromString)(query || \"\").query;\n  const lang = { grammar: _syntax__WEBPACK_IMPORTED_MODULE_4__.lokiGrammar, name: \"lokiql\" };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_7__.Stack, { gap: 0, direction: \"column\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    app_plugins_datasource_prometheus_querybuilder_shared_OperationExplainedBox__WEBPACK_IMPORTED_MODULE_1__.OperationExplainedBox,\n    {\n      stepNumber: 1,\n      title: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(app_plugins_datasource_prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_3__.RawQuery, { query: `${_LokiQueryModeller__WEBPACK_IMPORTED_MODULE_5__.lokiQueryModeller.renderLabels(visQuery.labels)}`, lang })\n    },\n    EXPLAIN_LABEL_FILTER_CONTENT\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    app_plugins_datasource_prometheus_querybuilder_shared_OperationListExplained__WEBPACK_IMPORTED_MODULE_2__.OperationListExplained,\n    {\n      stepNumber: 2,\n      queryModeller: _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_5__.lokiQueryModeller,\n      query: visQuery,\n      lang\n    }\n  ));\n});\nLokiQueryBuilderExplained.displayName = \"LokiQueryBuilderExplained\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xva2lRdWVyeUJ1aWxkZXJFeHBsYWluZWQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFrQjtBQUVJO0FBQ2dCO0FBQ0M7QUFDZDtBQUVHO0FBQ007QUFDUztBQUdwQyxNQUFNLCtCQUErQjtBQU1yQyxNQUFNLDRCQUE0QixpREFBVSxDQUFRLENBQUMsRUFBRSxNQUFNLE1BQU07QUFDeEUsUUFBTSxXQUFXLG9FQUEwQixDQUFDLFNBQVMsRUFBRSxFQUFFO0FBQ3pELFFBQU0sT0FBTyxFQUFFLFNBQVMsZ0RBQVcsRUFBRSxNQUFNLFNBQVM7QUFFcEQsU0FDRSwyRUFBQyx3REFBSyxJQUFDLEtBQUssR0FBRyxXQUFVLFlBQ3ZCO0FBQUEsSUFBQyw4SEFBcUI7QUFBckI7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU8sMkVBQUMsb0dBQVEsSUFBQyxPQUFPLEdBQUcsaUVBQWlCLENBQUMsYUFBYSxTQUFTLE1BQU0sS0FBSyxNQUFZO0FBQUE7QUFBQSxJQUV6RjtBQUFBLEVBQ0gsR0FDQTtBQUFBLElBQUMsZ0lBQXNCO0FBQXRCO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixlQUFlLGlFQUFpQjtBQUFqQixNQUNmLE9BQU87QUFBQSxNQUNQO0FBQUE7QUFBQSxFQUNGLENBQ0Y7QUFFSixDQUFDO0FBRUQsMEJBQTBCLGNBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9xdWVyeWJ1aWxkZXIvY29tcG9uZW50cy9Mb2tpUXVlcnlCdWlsZGVyRXhwbGFpbmVkLnRzeD8xODExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IE9wZXJhdGlvbkV4cGxhaW5lZEJveCB9IGZyb20gJ2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL09wZXJhdGlvbkV4cGxhaW5lZEJveCc7XG5pbXBvcnQgeyBPcGVyYXRpb25MaXN0RXhwbGFpbmVkIH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uTGlzdEV4cGxhaW5lZCc7XG5pbXBvcnQgeyBSYXdRdWVyeSB9IGZyb20gJ2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL1Jhd1F1ZXJ5JztcblxuaW1wb3J0IHsgbG9raUdyYW1tYXIgfSBmcm9tICcuLi8uLi9zeW50YXgnO1xuaW1wb3J0IHsgbG9raVF1ZXJ5TW9kZWxsZXIgfSBmcm9tICcuLi9Mb2tpUXVlcnlNb2RlbGxlcic7XG5pbXBvcnQgeyBidWlsZFZpc3VhbFF1ZXJ5RnJvbVN0cmluZyB9IGZyb20gJy4uL3BhcnNpbmcnO1xuaW1wb3J0IHsgTG9raVZpc3VhbFF1ZXJ5IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgRVhQTEFJTl9MQUJFTF9GSUxURVJfQ09OVEVOVCA9ICdGZXRjaCBhbGwgbG9nIGxpbmVzIG1hdGNoaW5nIGxhYmVsIGZpbHRlcnMuJztcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBMb2tpUXVlcnlCdWlsZGVyRXhwbGFpbmVkID0gUmVhY3QubWVtbzxQcm9wcz4oKHsgcXVlcnkgfSkgPT4ge1xuICBjb25zdCB2aXNRdWVyeSA9IGJ1aWxkVmlzdWFsUXVlcnlGcm9tU3RyaW5nKHF1ZXJ5IHx8ICcnKS5xdWVyeTtcbiAgY29uc3QgbGFuZyA9IHsgZ3JhbW1hcjogbG9raUdyYW1tYXIsIG5hbWU6ICdsb2tpcWwnIH07XG5cbiAgcmV0dXJuIChcbiAgICA8U3RhY2sgZ2FwPXswfSBkaXJlY3Rpb249XCJjb2x1bW5cIj5cbiAgICAgIDxPcGVyYXRpb25FeHBsYWluZWRCb3hcbiAgICAgICAgc3RlcE51bWJlcj17MX1cbiAgICAgICAgdGl0bGU9ezxSYXdRdWVyeSBxdWVyeT17YCR7bG9raVF1ZXJ5TW9kZWxsZXIucmVuZGVyTGFiZWxzKHZpc1F1ZXJ5LmxhYmVscyl9YH0gbGFuZz17bGFuZ30gLz59XG4gICAgICA+XG4gICAgICAgIHtFWFBMQUlOX0xBQkVMX0ZJTFRFUl9DT05URU5UfVxuICAgICAgPC9PcGVyYXRpb25FeHBsYWluZWRCb3g+XG4gICAgICA8T3BlcmF0aW9uTGlzdEV4cGxhaW5lZDxMb2tpVmlzdWFsUXVlcnk+XG4gICAgICAgIHN0ZXBOdW1iZXI9ezJ9XG4gICAgICAgIHF1ZXJ5TW9kZWxsZXI9e2xva2lRdWVyeU1vZGVsbGVyfVxuICAgICAgICBxdWVyeT17dmlzUXVlcnl9XG4gICAgICAgIGxhbmc9e2xhbmd9XG4gICAgICAvPlxuICAgIDwvU3RhY2s+XG4gICk7XG59KTtcblxuTG9raVF1ZXJ5QnVpbGRlckV4cGxhaW5lZC5kaXNwbGF5TmFtZSA9ICdMb2tpUXVlcnlCdWlsZGVyRXhwbGFpbmVkJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderExplained.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderOptions.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryBuilderOptions: () => (/* binding */ LokiQueryBuilderOptions)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/durationutil.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRow.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorField.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/AutoSizeInput.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Alert/Alert.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_QueryOptionGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryOptionGroup.tsx\");\n/* harmony import */ var _components_LokiOptionFields__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiOptionFields.tsx\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n\n\n\n\n\n\n\n\n\n\nconst LokiQueryBuilderOptions = react__WEBPACK_IMPORTED_MODULE_1___default().memo(\n  ({ app, query, onChange, onRunQuery, maxLines, queryStats }) => {\n    const [splitDurationValid, setSplitDurationValid] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const onQueryTypeChange = (value) => {\n      onChange({ ...query, queryType: value });\n      onRunQuery();\n    };\n    const onResolutionChange = (option) => {\n      (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_5__.reportInteraction)(\"grafana_loki_resolution_clicked\", {\n        app,\n        resolution: option.value\n      });\n      onChange({ ...query, resolution: option.value });\n      onRunQuery();\n    };\n    const onChunkRangeChange = (evt) => {\n      const value = evt.currentTarget.value;\n      if (!(0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.isValidDuration)(value)) {\n        setSplitDurationValid(false);\n        return;\n      }\n      setSplitDurationValid(true);\n      onChange({ ...query, splitDuration: value });\n      onRunQuery();\n    };\n    const onLegendFormatChanged = (evt) => {\n      onChange({ ...query, legendFormat: evt.currentTarget.value });\n      onRunQuery();\n    };\n    function onMaxLinesChange(e) {\n      const newMaxLines = (0,_components_LokiOptionFields__WEBPACK_IMPORTED_MODULE_3__.preprocessMaxLines)(e.currentTarget.value);\n      if (query.maxLines !== newMaxLines) {\n        onChange({ ...query, maxLines: newMaxLines });\n        onRunQuery();\n      }\n    }\n    function onStepChange(e) {\n      onChange({ ...query, step: (0,lodash__WEBPACK_IMPORTED_MODULE_0__.trim)(e.currentTarget.value) });\n      onRunQuery();\n    }\n    const queryType = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.getLokiQueryType)(query);\n    const isLogQuery = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.isLogsQuery)(query.expr);\n    const isValidStep = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n      if (!query.step || (0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.isValidGrafanaDuration)(query.step) || !isNaN(Number(query.step))) {\n        return true;\n      }\n      return false;\n    }, [query.step]);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_7__.EditorRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      app_plugins_datasource_prometheus_querybuilder_shared_QueryOptionGroup__WEBPACK_IMPORTED_MODULE_2__.QueryOptionGroup,\n      {\n        title: \"Options\",\n        collapsedInfo: getCollapsedInfo(query, queryType, maxLines, isLogQuery, isValidStep),\n        queryStats\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_experimental__WEBPACK_IMPORTED_MODULE_8__.EditorField,\n        {\n          label: \"Legend\",\n          tooltip: \"Series name override or template. Ex. {{hostname}} will be replaced with label value for hostname.\"\n        },\n        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n          _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.AutoSizeInput,\n          {\n            placeholder: \"{{label}}\",\n            type: \"string\",\n            minWidth: 14,\n            defaultValue: query.legendFormat,\n            onCommitChange: onLegendFormatChanged\n          }\n        )\n      ),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_8__.EditorField, { label: \"Type\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.RadioButtonGroup, { options: _components_LokiOptionFields__WEBPACK_IMPORTED_MODULE_3__.queryTypeOptions, value: queryType, onChange: onQueryTypeChange })),\n      isLogQuery && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_8__.EditorField, { label: \"Line limit\", tooltip: \"Upper limit for number of log lines returned by query.\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.AutoSizeInput,\n        {\n          className: \"width-4\",\n          placeholder: maxLines.toString(),\n          type: \"number\",\n          min: 0,\n          defaultValue: query.maxLines?.toString() ?? \"\",\n          onCommitChange: onMaxLinesChange\n        }\n      )),\n      !isLogQuery && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_experimental__WEBPACK_IMPORTED_MODULE_8__.EditorField,\n        {\n          label: \"Step\",\n          tooltip: \"Use the step parameter when making metric queries to Loki. If not filled, Grafana's calculated interval will be used. Example valid values: 1s, 5m, 10h, 1d.\",\n          invalid: !isValidStep,\n          error: \"Invalid step. Example valid values: 1s, 5m, 10h, 1d.\"\n        },\n        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n          _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.AutoSizeInput,\n          {\n            className: \"width-6\",\n            placeholder: \"auto\",\n            type: \"string\",\n            defaultValue: query.step ?? \"\",\n            onCommitChange: onStepChange\n          }\n        )\n      ), query.resolution !== void 0 && query.resolution > 1 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_experimental__WEBPACK_IMPORTED_MODULE_8__.EditorField,\n        {\n          label: \"Resolution\",\n          tooltip: \"Changes the step parameter of Loki metrics range queries. With a resolution of 1/1, each pixel corresponds to one data point. 1/10 retrieves one data point per 10 pixels. Lower resolutions perform better.\"\n        },\n        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n          _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Select,\n          {\n            isSearchable: false,\n            onChange: onResolutionChange,\n            options: _components_LokiOptionFields__WEBPACK_IMPORTED_MODULE_3__.RESOLUTION_OPTIONS,\n            value: query.resolution || 1,\n            \"aria-label\": \"Select resolution\"\n          }\n        )\n      ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Alert,\n        {\n          severity: \"warning\",\n          title: \"The 'Resolution' is deprecated. Use 'Step' editor instead to change step parameter.\"\n        }\n      ))),\n      _grafana_runtime__WEBPACK_IMPORTED_MODULE_13__.config.featureToggles.lokiQuerySplittingConfig && _grafana_runtime__WEBPACK_IMPORTED_MODULE_13__.config.featureToggles.lokiQuerySplitting && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_experimental__WEBPACK_IMPORTED_MODULE_8__.EditorField,\n        {\n          label: \"Split Duration\",\n          tooltip: \"Defines the duration of a single query when query splitting is enabled.\"\n        },\n        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n          _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.AutoSizeInput,\n          {\n            minWidth: 14,\n            type: \"string\",\n            min: 0,\n            defaultValue: query.splitDuration ?? \"1d\",\n            onCommitChange: onChunkRangeChange,\n            invalid: !splitDurationValid\n          }\n        )\n      )\n    ));\n  }\n);\nfunction getCollapsedInfo(query, queryType, maxLines, isLogQuery, isValidStep) {\n  const queryTypeLabel = _components_LokiOptionFields__WEBPACK_IMPORTED_MODULE_3__.queryTypeOptions.find((x) => x.value === queryType);\n  const resolutionLabel = _components_LokiOptionFields__WEBPACK_IMPORTED_MODULE_3__.RESOLUTION_OPTIONS.find((x) => x.value === (query.resolution ?? 1));\n  const items = [];\n  if (query.legendFormat) {\n    items.push(`Legend: ${query.legendFormat}`);\n  }\n  items.push(`Type: ${queryTypeLabel?.label}`);\n  if (isLogQuery) {\n    items.push(`Line limit: ${query.maxLines ?? maxLines}`);\n  }\n  if (!isLogQuery) {\n    if (query.step) {\n      items.push(`Step: ${isValidStep ? query.step : \"Invalid value\"}`);\n    }\n    if (query.resolution) {\n      items.push(`Resolution: ${resolutionLabel?.label}`);\n    }\n  }\n  return items;\n}\nLokiQueryBuilderOptions.displayName = \"LokiQueryBuilderOptions\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xva2lRdWVyeUJ1aWxkZXJPcHRpb25zLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUI7QUFDb0I7QUFFeUM7QUFDM0M7QUFDRztBQUNxQjtBQUM5QjtBQUV3QztBQUMzQjtBQVl2QyxNQUFNLDBCQUEwQixpREFBVTtBQUFKLEVBQzNDLENBQUMsRUFBRSxLQUFLLE9BQU8sVUFBVSxZQUFZLFVBQVUsV0FBVyxNQUFNO0FBQzlELFVBQU0sQ0FBQyxvQkFBb0IscUJBQXFCLElBQUksK0NBQVEsQ0FBQyxJQUFJO0FBRWpFLFVBQU0sb0JBQW9CLENBQUMsVUFBeUI7QUFDbEQsZUFBUyxFQUFFLEdBQUcsT0FBTyxXQUFXLE1BQU0sQ0FBQztBQUN2QyxpQkFBVztBQUFBLElBQ2I7QUFFQSxVQUFNLHFCQUFxQixDQUFDLFdBQW9DO0FBQzlELHlFQUFpQixDQUFDLG1DQUFtQztBQUFBLFFBQ25EO0FBQUEsUUFDQSxZQUFZLE9BQU87QUFBQSxNQUNyQixDQUFDO0FBQ0QsZUFBUyxFQUFFLEdBQUcsT0FBTyxZQUFZLE9BQU8sTUFBTSxDQUFDO0FBQy9DLGlCQUFXO0FBQUEsSUFDYjtBQUVBLFVBQU0scUJBQXFCLENBQUMsUUFBMkM7QUFDckUsWUFBTSxRQUFRLElBQUksY0FBYztBQUNoQyxVQUFJLENBQUMsOERBQWUsQ0FBQyxLQUFLLEdBQUc7QUFDM0IsOEJBQXNCLEtBQUs7QUFDM0I7QUFBQSxNQUNGO0FBQ0EsNEJBQXNCLElBQUk7QUFDMUIsZUFBUyxFQUFFLEdBQUcsT0FBTyxlQUFlLE1BQU0sQ0FBQztBQUMzQyxpQkFBVztBQUFBLElBQ2I7QUFFQSxVQUFNLHdCQUF3QixDQUFDLFFBQTJDO0FBQ3hFLGVBQVMsRUFBRSxHQUFHLE9BQU8sY0FBYyxJQUFJLGNBQWMsTUFBTSxDQUFDO0FBQzVELGlCQUFXO0FBQUEsSUFDYjtBQUVBLGFB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NEIscURBQU0sQ0FBQyxlQUFlLHNCQUN2RTtBQUFBLFFBQUMsOERBQVc7QUFBWDtBQUFBLFVBQ0MsT0FBTTtBQUFBLFVBQ04sU0FBUTtBQUFBO0FBQUEsUUFFUjtBQUFBLFVBQUMsc0RBQWE7QUFBYjtBQUFBLFlBQ0MsVUFBVTtBQUFBLFlBQ1YsTUFBSztBQUFBLFlBQ0wsS0FBSztBQUFBLFlBQ0wsY0FBYyxNQUFNLGlCQUFpQjtBQUFBLFlBQ3JDLGdCQUFnQjtBQUFBLFlBQ2hCLFNBQVMsQ0FBQztBQUFBO0FBQUEsUUFDWjtBQUFBLE1BQ0Y7QUFBQSxJQUVKLENBQ0Y7QUFBQSxFQUVKO0FBQ0Y7QUFFQSxTQUFTLGlCQUNQLE9BQ0EsV0FDQSxVQUNBLFlBQ0EsYUFDVTtBQUNWLFFBQU0saUJBQWlCLDBFQUFnQixDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsVUFBVSxTQUFTO0FBQ3pFLFFBQU0sa0JBQWtCLDRFQUFrQixDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsV0FBVyxNQUFNLGNBQWMsRUFBRTtBQUUxRixRQUFNLFFBQWtCLENBQUM7QUFFekIsTUFBSSxNQUFNLGNBQWM7QUFDdEIsVUFBTSxLQUFLLFdBQVcsTUFBTSxjQUFjO0FBQUEsRUFDNUM7QUFFQSxRQUFNLEtBQUssU0FBUyxnQkFBZ0IsT0FBTztBQUUzQyxNQUFJLFlBQVk7QUFDZCxVQUFNLEtBQUssZUFBZSxNQUFNLFlBQVksVUFBVTtBQUFBLEVBQ3hEO0FBRUEsTUFBSSxDQUFDLFlBQVk7QUFDZixRQUFJLE1BQU0sTUFBTTtBQUNkLFlBQU0sS0FBSyxTQUFTLGNBQWMsTUFBTSxPQUFPLGlCQUFpQjtBQUFBLElBQ2xFO0FBRUEsUUFBSSxNQUFNLFlBQVk7QUFDcEIsWUFBTSxLQUFLLGVBQWUsaUJBQWlCLE9BQU87QUFBQSxJQUNwRDtBQUFBLEVBQ0Y7QUFFQSxTQUFPO0FBQ1Q7QUFFQSx3QkFBd0IsY0FBYyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xva2lRdWVyeUJ1aWxkZXJPcHRpb25zLnRzeD9iNjk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRyaW0gfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBDb3JlQXBwLCBpc1ZhbGlkRHVyYXRpb24sIGlzVmFsaWRHcmFmYW5hRHVyYXRpb24sIFNlbGVjdGFibGVWYWx1ZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgRWRpdG9yRmllbGQsIEVkaXRvclJvdyB9IGZyb20gJ0BncmFmYW5hL2V4cGVyaW1lbnRhbCc7XG5pbXBvcnQgeyBjb25maWcsIHJlcG9ydEludGVyYWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyBBbGVydCwgQXV0b1NpemVJbnB1dCwgUmFkaW9CdXR0b25Hcm91cCwgU2VsZWN0IH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgUXVlcnlPcHRpb25Hcm91cCB9IGZyb20gJ2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL1F1ZXJ5T3B0aW9uR3JvdXAnO1xuXG5pbXBvcnQgeyBwcmVwcm9jZXNzTWF4TGluZXMsIHF1ZXJ5VHlwZU9wdGlvbnMsIFJFU09MVVRJT05fT1BUSU9OUyB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTG9raU9wdGlvbkZpZWxkcyc7XG5pbXBvcnQgeyBnZXRMb2tpUXVlcnlUeXBlLCBpc0xvZ3NRdWVyeSB9IGZyb20gJy4uLy4uL3F1ZXJ5VXRpbHMnO1xuaW1wb3J0IHsgTG9raVF1ZXJ5LCBMb2tpUXVlcnlUeXBlLCBRdWVyeVN0YXRzIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcbiAgcXVlcnk6IExva2lRdWVyeTtcbiAgb25DaGFuZ2U6ICh1cGRhdGU6IExva2lRdWVyeSkgPT4gdm9pZDtcbiAgb25SdW5RdWVyeTogKCkgPT4gdm9pZDtcbiAgbWF4TGluZXM6IG51bWJlcjtcbiAgYXBwPzogQ29yZUFwcDtcbiAgcXVlcnlTdGF0czogUXVlcnlTdGF0cyB8IG51bGw7XG59XG5cbmV4cG9ydCBjb25zdCBMb2tpUXVlcnlCdWlsZGVyT3B0aW9ucyA9IFJlYWN0Lm1lbW88UHJvcHM+KFxuICAoeyBhcHAsIHF1ZXJ5LCBvbkNoYW5nZSwgb25SdW5RdWVyeSwgbWF4TGluZXMsIHF1ZXJ5U3RhdHMgfSkgPT4ge1xuICAgIGNvbnN0IFtzcGxpdER1cmF0aW9uVmFsaWQsIHNldFNwbGl0RHVyYXRpb25WYWxpZF0gPSB1c2VTdGF0ZSh0cnVlKTtcblxuICAgIGNvbnN0IG9uUXVlcnlUeXBlQ2hhbmdlID0gKHZhbHVlOiBMb2tpUXVlcnlUeXBlKSA9PiB7XG4gICAgICBvbkNoYW5nZSh7IC4uLnF1ZXJ5LCBxdWVyeVR5cGU6IHZhbHVlIH0pO1xuICAgICAgb25SdW5RdWVyeSgpO1xuICAgIH07XG5cbiAgICBjb25zdCBvblJlc29sdXRpb25DaGFuZ2UgPSAob3B0aW9uOiBTZWxlY3RhYmxlVmFsdWU8bnVtYmVyPikgPT4ge1xuICAgICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfbG9raV9yZXNvbHV0aW9uX2NsaWNrZWQnLCB7XG4gICAgICAgIGFwcCxcbiAgICAgICAgcmVzb2x1dGlvbjogb3B0aW9uLnZhbHVlLFxuICAgICAgfSk7XG4gICAgICBvbkNoYW5nZSh7IC4uLnF1ZXJ5LCByZXNvbHV0aW9uOiBvcHRpb24udmFsdWUgfSk7XG4gICAgICBvblJ1blF1ZXJ5KCk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uQ2h1bmtSYW5nZUNoYW5nZSA9IChldnQ6IFJlYWN0LkZvcm1FdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBldnQuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICAgIGlmICghaXNWYWxpZER1cmF0aW9uKHZhbHVlKSkge1xuICAgICAgICBzZXRTcGxpdER1cmF0aW9uVmFsaWQoZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZXRTcGxpdER1cmF0aW9uVmFsaWQodHJ1ZSk7XG4gICAgICBvbkNoYW5nZSh7IC4uLnF1ZXJ5LCBzcGxpdER1cmF0aW9uOiB2YWx1ZSB9KTtcbiAgICAgIG9uUnVuUXVlcnkoKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25MZWdlbmRGb3JtYXRDaGFuZ2VkID0gKGV2dDogUmVhY3QuRm9ybUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgICBvbkNoYW5nZSh7IC4uLnF1ZXJ5LCBsZWdlbmRGb3JtYXQ6IGV2dC5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgb25SdW5RdWVyeSgpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBvbk1heExpbmVzQ2hhbmdlKGU6IFJlYWN0LlN5bnRoZXRpY0V2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSB7XG4gICAgICBjb25zdCBuZXdNYXhMaW5lcyA9IHByZXByb2Nlc3NNYXhMaW5lcyhlLmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgICAgaWYgKHF1ZXJ5Lm1heExpbmVzICE9PSBuZXdNYXhMaW5lcykge1xuICAgICAgICBvbkNoYW5nZSh7IC4uLnF1ZXJ5LCBtYXhMaW5lczogbmV3TWF4TGluZXMgfSk7XG4gICAgICAgIG9uUnVuUXVlcnkoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblN0ZXBDaGFuZ2UoZTogUmVhY3QuU3ludGhldGljRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pIHtcbiAgICAgIG9uQ2hhbmdlKHsgLi4ucXVlcnksIHN0ZXA6IHRyaW0oZS5jdXJyZW50VGFyZ2V0LnZhbHVlKSB9KTtcbiAgICAgIG9uUnVuUXVlcnkoKTtcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeVR5cGUgPSBnZXRMb2tpUXVlcnlUeXBlKHF1ZXJ5KTtcbiAgICBjb25zdCBpc0xvZ1F1ZXJ5ID0gaXNMb2dzUXVlcnkocXVlcnkuZXhwcik7XG5cbiAgICBjb25zdCBpc1ZhbGlkU3RlcCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgaWYgKCFxdWVyeS5zdGVwIHx8IGlzVmFsaWRHcmFmYW5hRHVyYXRpb24ocXVlcnkuc3RlcCkgfHwgIWlzTmFOKE51bWJlcihxdWVyeS5zdGVwKSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSwgW3F1ZXJ5LnN0ZXBdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8RWRpdG9yUm93PlxuICAgICAgICA8UXVlcnlPcHRpb25Hcm91cFxuICAgICAgICAgIHRpdGxlPVwiT3B0aW9uc1wiXG4gICAgICAgICAgY29sbGFwc2VkSW5mbz17Z2V0Q29sbGFwc2VkSW5mbyhxdWVyeSwgcXVlcnlUeXBlLCBtYXhMaW5lcywgaXNMb2dRdWVyeSwgaXNWYWxpZFN0ZXApfVxuICAgICAgICAgIHF1ZXJ5U3RhdHM9e3F1ZXJ5U3RhdHN9XG4gICAgICAgID5cbiAgICAgICAgICA8RWRpdG9yRmllbGRcbiAgICAgICAgICAgIGxhYmVsPVwiTGVnZW5kXCJcbiAgICAgICAgICAgIHRvb2x0aXA9XCJTZXJpZXMgbmFtZSBvdmVycmlkZSBvciB0ZW1wbGF0ZS4gRXguIHt7aG9zdG5hbWV9fSB3aWxsIGJlIHJlcGxhY2VkIHdpdGggbGFiZWwgdmFsdWUgZm9yIGhvc3RuYW1lLlwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEF1dG9TaXplSW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7e2xhYmVsfX1cIlxuICAgICAgICAgICAgICB0eXBlPVwic3RyaW5nXCJcbiAgICAgICAgICAgICAgbWluV2lkdGg9ezE0fVxuICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3F1ZXJ5LmxlZ2VuZEZvcm1hdH1cbiAgICAgICAgICAgICAgb25Db21taXRDaGFuZ2U9e29uTGVnZW5kRm9ybWF0Q2hhbmdlZH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9FZGl0b3JGaWVsZD5cbiAgICAgICAgICA8RWRpdG9yRmllbGQgbGFiZWw9XCJUeXBlXCI+XG4gICAgICAgICAgICA8UmFkaW9CdXR0b25Hcm91cCBvcHRpb25zPXtxdWVyeVR5cGVPcHRpb25zfSB2YWx1ZT17cXVlcnlUeXBlfSBvbkNoYW5nZT17b25RdWVyeVR5cGVDaGFuZ2V9IC8+XG4gICAgICAgICAgPC9FZGl0b3JGaWVsZD5cbiAgICAgICAgICB7aXNMb2dRdWVyeSAmJiAoXG4gICAgICAgICAgICA8RWRpdG9yRmllbGQgbGFiZWw9XCJMaW5lIGxpbWl0XCIgdG9vbHRpcD1cIlVwcGVyIGxpbWl0IGZvciBudW1iZXIgb2YgbG9nIGxpbmVzIHJldHVybmVkIGJ5IHF1ZXJ5LlwiPlxuICAgICAgICAgICAgICA8QXV0b1NpemVJbnB1dFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIndpZHRoLTRcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXttYXhMaW5lcy50b1N0cmluZygpfVxuICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgIG1pbj17MH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3F1ZXJ5Lm1heExpbmVzPy50b1N0cmluZygpID8/ICcnfVxuICAgICAgICAgICAgICAgIG9uQ29tbWl0Q2hhbmdlPXtvbk1heExpbmVzQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9FZGl0b3JGaWVsZD5cbiAgICAgICAgICApfVxuICAgICAgICAgIHshaXNMb2dRdWVyeSAmJiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8RWRpdG9yRmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD1cIlN0ZXBcIlxuICAgICAgICAgICAgICAgIHRvb2x0aXA9XCJVc2UgdGhlIHN0ZXAgcGFyYW1ldGVyIHdoZW4gbWFraW5nIG1ldHJpYyBxdWVyaWVzIHRvIExva2kuIElmIG5vdCBmaWxsZWQsIEdyYWZhbmEncyBjYWxjdWxhdGVkIGludGVydmFsIHdpbGwgYmUgdXNlZC4gRXhhbXBsZSB2YWxpZCB2YWx1ZXM6IDFzLCA1bSwgMTBoLCAxZC5cIlxuICAgICAgICAgICAgICAgIGludmFsaWQ9eyFpc1ZhbGlkU3RlcH1cbiAgICAgICAgICAgICAgICBlcnJvcj17J0ludmFsaWQgc3RlcC4gRXhhbXBsZSB2YWxpZCB2YWx1ZXM6IDFzLCA1bSwgMTBoLCAxZC4nfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEF1dG9TaXplSW5wdXRcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIndpZHRoLTZcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9eydhdXRvJ31cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtxdWVyeS5zdGVwID8/ICcnfVxuICAgICAgICAgICAgICAgICAgb25Db21taXRDaGFuZ2U9e29uU3RlcENoYW5nZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0VkaXRvckZpZWxkPlxuICAgICAgICAgICAgICB7cXVlcnkucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkICYmIHF1ZXJ5LnJlc29sdXRpb24gPiAxICYmIChcbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgPEVkaXRvckZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiUmVzb2x1dGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA9XCJDaGFuZ2VzIHRoZSBzdGVwIHBhcmFtZXRlciBvZiBMb2tpIG1ldHJpY3MgcmFuZ2UgcXVlcmllcy4gV2l0aCBhIHJlc29sdXRpb24gb2YgMS8xLCBlYWNoIHBpeGVsIGNvcnJlc3BvbmRzIHRvIG9uZSBkYXRhIHBvaW50LiAxLzEwIHJldHJpZXZlcyBvbmUgZGF0YSBwb2ludCBwZXIgMTAgcGl4ZWxzLiBMb3dlciByZXNvbHV0aW9ucyBwZXJmb3JtIGJldHRlci5cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25SZXNvbHV0aW9uQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e1JFU09MVVRJT05fT1BUSU9OU31cbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cXVlcnkucmVzb2x1dGlvbiB8fCAxfVxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJTZWxlY3QgcmVzb2x1dGlvblwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0VkaXRvckZpZWxkPlxuICAgICAgICAgICAgICAgICAgPEFsZXJ0XG4gICAgICAgICAgICAgICAgICAgIHNldmVyaXR5PVwid2FybmluZ1wiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiVGhlICdSZXNvbHV0aW9uJyBpcyBkZXByZWNhdGVkLiBVc2UgJ1N0ZXAnIGVkaXRvciBpbnN0ZWFkIHRvIGNoYW5nZSBzdGVwIHBhcmFtZXRlci5cIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2NvbmZpZy5mZWF0dXJlVG9nZ2xlcy5sb2tpUXVlcnlTcGxpdHRpbmdDb25maWcgJiYgY29uZmlnLmZlYXR1cmVUb2dnbGVzLmxva2lRdWVyeVNwbGl0dGluZyAmJiAoXG4gICAgICAgICAgICA8RWRpdG9yRmllbGRcbiAgICAgICAgICAgICAgbGFiZWw9XCJTcGxpdCBEdXJhdGlvblwiXG4gICAgICAgICAgICAgIHRvb2x0aXA9XCJEZWZpbmVzIHRoZSBkdXJhdGlvbiBvZiBhIHNpbmdsZSBxdWVyeSB3aGVuIHF1ZXJ5IHNwbGl0dGluZyBpcyBlbmFibGVkLlwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxBdXRvU2l6ZUlucHV0XG4gICAgICAgICAgICAgICAgbWluV2lkdGg9ezE0fVxuICAgICAgICAgICAgICAgIHR5cGU9XCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgIG1pbj17MH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3F1ZXJ5LnNwbGl0RHVyYXRpb24gPz8gJzFkJ31cbiAgICAgICAgICAgICAgICBvbkNvbW1pdENoYW5nZT17b25DaHVua1JhbmdlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGludmFsaWQ9eyFzcGxpdER1cmF0aW9uVmFsaWR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0VkaXRvckZpZWxkPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvUXVlcnlPcHRpb25Hcm91cD5cbiAgICAgIDwvRWRpdG9yUm93PlxuICAgICk7XG4gIH1cbik7XG5cbmZ1bmN0aW9uIGdldENvbGxhcHNlZEluZm8oXG4gIHF1ZXJ5OiBMb2tpUXVlcnksXG4gIHF1ZXJ5VHlwZTogTG9raVF1ZXJ5VHlwZSxcbiAgbWF4TGluZXM6IG51bWJlcixcbiAgaXNMb2dRdWVyeTogYm9vbGVhbixcbiAgaXNWYWxpZFN0ZXA6IGJvb2xlYW5cbik6IHN0cmluZ1tdIHtcbiAgY29uc3QgcXVlcnlUeXBlTGFiZWwgPSBxdWVyeVR5cGVPcHRpb25zLmZpbmQoKHgpID0+IHgudmFsdWUgPT09IHF1ZXJ5VHlwZSk7XG4gIGNvbnN0IHJlc29sdXRpb25MYWJlbCA9IFJFU09MVVRJT05fT1BUSU9OUy5maW5kKCh4KSA9PiB4LnZhbHVlID09PSAocXVlcnkucmVzb2x1dGlvbiA/PyAxKSk7XG5cbiAgY29uc3QgaXRlbXM6IHN0cmluZ1tdID0gW107XG5cbiAgaWYgKHF1ZXJ5LmxlZ2VuZEZvcm1hdCkge1xuICAgIGl0ZW1zLnB1c2goYExlZ2VuZDogJHtxdWVyeS5sZWdlbmRGb3JtYXR9YCk7XG4gIH1cblxuICBpdGVtcy5wdXNoKGBUeXBlOiAke3F1ZXJ5VHlwZUxhYmVsPy5sYWJlbH1gKTtcblxuICBpZiAoaXNMb2dRdWVyeSkge1xuICAgIGl0ZW1zLnB1c2goYExpbmUgbGltaXQ6ICR7cXVlcnkubWF4TGluZXMgPz8gbWF4TGluZXN9YCk7XG4gIH1cblxuICBpZiAoIWlzTG9nUXVlcnkpIHtcbiAgICBpZiAocXVlcnkuc3RlcCkge1xuICAgICAgaXRlbXMucHVzaChgU3RlcDogJHtpc1ZhbGlkU3RlcCA/IHF1ZXJ5LnN0ZXAgOiAnSW52YWxpZCB2YWx1ZSd9YCk7XG4gICAgfVxuXG4gICAgaWYgKHF1ZXJ5LnJlc29sdXRpb24pIHtcbiAgICAgIGl0ZW1zLnB1c2goYFJlc29sdXRpb246ICR7cmVzb2x1dGlvbkxhYmVsPy5sYWJlbH1gKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXRlbXM7XG59XG5cbkxva2lRdWVyeUJ1aWxkZXJPcHRpb25zLmRpc3BsYXlOYW1lID0gJ0xva2lRdWVyeUJ1aWxkZXJPcHRpb25zJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderOptions.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryCodeEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryCodeEditor: () => (/* binding */ LokiQueryCodeEditor)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Layout/Layout.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/IconButton/IconButton.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Tooltip/Tooltip.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n/* harmony import */ var app_core_utils_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/utils/browser.ts\");\n/* harmony import */ var _components_LokiQueryEditor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryEditor.tsx\");\n/* harmony import */ var _components_LokiQueryField__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/LokiQueryField.tsx\");\n/* harmony import */ var _components_stats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/stats.ts\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _LokiQueryBuilderExplained__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilderExplained.tsx\");\n\n\n\n\n\n\n\n\n\n\n\nfunction LokiQueryCodeEditor({\n  query,\n  datasource,\n  range,\n  onRunQuery,\n  onChange,\n  data,\n  app,\n  showExplain,\n  history,\n  setQueryStats\n}) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.useStyles2)(getStyles);\n  const lokiFormatQuery = _grafana_runtime__WEBPACK_IMPORTED_MODULE_9__.config.featureToggles.lokiFormatQuery;\n  const onClickFormatQueryButton = async () => onChange({ ...query, expr: (0,_queryUtils__WEBPACK_IMPORTED_MODULE_6__.formatLogqlQuery)(query.expr, datasource) });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.wrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _components_LokiQueryField__WEBPACK_IMPORTED_MODULE_4__.LokiQueryField,\n    {\n      datasource,\n      query,\n      range,\n      onRunQuery,\n      onChange,\n      history,\n      data,\n      app,\n      \"data-testid\": _components_LokiQueryEditor__WEBPACK_IMPORTED_MODULE_3__.testIds.editor,\n      onQueryType: async (query2) => {\n        const stats = await (0,_components_stats__WEBPACK_IMPORTED_MODULE_5__.getStats)(datasource, query2);\n        setQueryStats(stats);\n      },\n      ExtraFieldElement: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, lokiFormatQuery && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.buttonGroup }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.HorizontalGroup, { spacing: \"sm\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.IconButton,\n        {\n          onClick: onClickFormatQueryButton,\n          name: \"brackets-curly\",\n          size: \"xs\",\n          tooltip: \"Format query\"\n        }\n      ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Tooltip, { content: `Use ${(0,app_core_utils_browser__WEBPACK_IMPORTED_MODULE_2__.getModKey)()}+z to undo` }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_13__.Icon, { className: styles.hint, name: \"keyboard\" }))))))\n    }\n  ), showExplain && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_LokiQueryBuilderExplained__WEBPACK_IMPORTED_MODULE_7__.LokiQueryBuilderExplained, { query: query.expr }));\n}\nconst getStyles = (theme) => {\n  return {\n    wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      max-width: 100%;\n      .gf-form {\n        margin-bottom: 0.5;\n      }\n    `,\n    buttonGroup: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      border: 1px solid ${theme.colors.border.medium};\n      border-top: none;\n      padding: ${theme.spacing(0.5, 0.5, 0.5, 0.5)};\n      margin-bottom: ${theme.spacing(0.5)};\n      display: flex;\n      flex-grow: 1;\n      justify-content: end;\n      font-size: ${theme.typography.bodySmall.fontSize};\n    `,\n    hint: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      color: ${theme.colors.text.disabled};\n      white-space: nowrap;\n      cursor: help;\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xva2lRdWVyeUNvZGVFZGl0b3IudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ0Y7QUFHSztBQUNnRDtBQUM3QztBQUVGO0FBQ087QUFDTjtBQUVRO0FBR1M7QUFPbkMsU0FBUyxvQkFBb0I7QUFBQSxFQUNsQztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGLEdBQVU7QUFDUixRQUFNLFNBQVMsdURBQVUsQ0FBQyxTQUFTO0FBRW5DLFFBQU0sa0JBQWtCLG9EQUFNLENBQUMsZUFBZTtBQUM5QyxRQUFNLDJCQUEyQixZQUFZLFNBQVMsRUFBRSxHQUFHLE9BQU8sTUFBTSw2REFBZ0IsQ0FBQyxNQUFNLE1BQU0sVUFBVSxFQUFFLENBQUM7QUFFbEgsU0FDRSwyRUFBQyxTQUFJLFdBQVcsT0FBTyxXQUNyQjtBQUFBLElBQUMsc0VBQWM7QUFBZDtBQUFBLE1BQ0M7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQSxlQUFhLGdFQUFPLENBQUM7QUFBQSxNQUNyQixhQUFhLE9BQU9BLFdBQWtCO0FBQ3BDLGNBQU0sUUFBUSxNQUFNLDJEQUFRLENBQUMsWUFBWUEsTUFBSztBQUM5QyxzQkFBYyxLQUFLO0FBQUEsTUFDckI7QUFBQSxNQUNBLG1CQUNFLDBJQUNHLG1CQUNDLDJFQUFDLFNBQUksV0FBVyxPQUFPLGVBQ3JCLDJFQUFDLGFBQ0MsMkVBQUMseURBQWUsSUFBQyxTQUFRLFFBQ3ZCO0FBQUEsUUFBQyxvREFBVTtBQUFWO0FBQUEsVUFDQyxTQUFTO0FBQUEsVUFDVCxNQUFLO0FBQUEsVUFDTCxNQUFLO0FBQUEsVUFDTCxTQUFRO0FBQUE7QUFBQSxNQUNWLEdBQ0EsMkVBQUMsaURBQU8sSUFBQyxTQUFTLE9BQU8saUVBQVMsQ0FBQyxpQkFDakMsMkVBQUMsOENBQUksSUFBQyxXQUFXLE9BQU8sTUFBTSxNQUFLLFlBQVcsQ0FDaEQsQ0FDRixDQUNGLENBQ0YsQ0FFSjtBQUFBO0FBQUEsRUFFSixHQUNDLGVBQWUsMkVBQUMsaUZBQXlCLElBQUMsT0FBTyxNQUFNLE1BQU0sQ0FDaEU7QUFFSjtBQUVBLE1BQU0sWUFBWSxDQUFDLFVBQXlCO0FBQzFDLFNBQU87QUFBQSxJQUNMLFNBQVMsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFNVCxhQUFhLGlEQUFHO0FBQUgsMEJBQ1MsTUFBTSxPQUFPLE9BQU87QUFBQTtBQUFBLGlCQUU3QixNQUFNLFFBQVEsS0FBSyxLQUFLLEtBQUssR0FBRztBQUFBLHVCQUMxQixNQUFNLFFBQVEsR0FBRztBQUFBO0FBQUE7QUFBQTtBQUFBLG1CQUlyQixNQUFNLFdBQVcsVUFBVTtBQUFBO0FBQUEsSUFFMUMsTUFBTSxpREFBRztBQUFILGVBQ0ssTUFBTSxPQUFPLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUkvQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvcXVlcnlidWlsZGVyL2NvbXBvbmVudHMvTG9raVF1ZXJ5Q29kZUVkaXRvci50c3g/MWQ2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyB1c2VTdHlsZXMyLCBIb3Jpem9udGFsR3JvdXAsIEljb25CdXR0b24sIFRvb2x0aXAsIEljb24gfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBnZXRNb2RLZXkgfSBmcm9tICdhcHAvY29yZS91dGlscy9icm93c2VyJztcblxuaW1wb3J0IHsgdGVzdElkcyB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTG9raVF1ZXJ5RWRpdG9yJztcbmltcG9ydCB7IExva2lRdWVyeUZpZWxkIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Mb2tpUXVlcnlGaWVsZCc7XG5pbXBvcnQgeyBnZXRTdGF0cyB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvc3RhdHMnO1xuaW1wb3J0IHsgTG9raVF1ZXJ5RWRpdG9yUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL3R5cGVzJztcbmltcG9ydCB7IGZvcm1hdExvZ3FsUXVlcnkgfSBmcm9tICcuLi8uLi9xdWVyeVV0aWxzJztcbmltcG9ydCB7IFF1ZXJ5U3RhdHMgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmltcG9ydCB7IExva2lRdWVyeUJ1aWxkZXJFeHBsYWluZWQgfSBmcm9tICcuL0xva2lRdWVyeUJ1aWxkZXJFeHBsYWluZWQnO1xuXG50eXBlIFByb3BzID0gTG9raVF1ZXJ5RWRpdG9yUHJvcHMgJiB7XG4gIHNob3dFeHBsYWluOiBib29sZWFuO1xuICBzZXRRdWVyeVN0YXRzOiBSZWFjdC5EaXNwYXRjaDxSZWFjdC5TZXRTdGF0ZUFjdGlvbjxRdWVyeVN0YXRzIHwgbnVsbD4+O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIExva2lRdWVyeUNvZGVFZGl0b3Ioe1xuICBxdWVyeSxcbiAgZGF0YXNvdXJjZSxcbiAgcmFuZ2UsXG4gIG9uUnVuUXVlcnksXG4gIG9uQ2hhbmdlLFxuICBkYXRhLFxuICBhcHAsXG4gIHNob3dFeHBsYWluLFxuICBoaXN0b3J5LFxuICBzZXRRdWVyeVN0YXRzLFxufTogUHJvcHMpIHtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRTdHlsZXMpO1xuXG4gIGNvbnN0IGxva2lGb3JtYXRRdWVyeSA9IGNvbmZpZy5mZWF0dXJlVG9nZ2xlcy5sb2tpRm9ybWF0UXVlcnk7XG4gIGNvbnN0IG9uQ2xpY2tGb3JtYXRRdWVyeUJ1dHRvbiA9IGFzeW5jICgpID0+IG9uQ2hhbmdlKHsgLi4ucXVlcnksIGV4cHI6IGZvcm1hdExvZ3FsUXVlcnkocXVlcnkuZXhwciwgZGF0YXNvdXJjZSkgfSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLndyYXBwZXJ9PlxuICAgICAgPExva2lRdWVyeUZpZWxkXG4gICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgIHF1ZXJ5PXtxdWVyeX1cbiAgICAgICAgcmFuZ2U9e3JhbmdlfVxuICAgICAgICBvblJ1blF1ZXJ5PXtvblJ1blF1ZXJ5fVxuICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XG4gICAgICAgIGhpc3Rvcnk9e2hpc3Rvcnl9XG4gICAgICAgIGRhdGE9e2RhdGF9XG4gICAgICAgIGFwcD17YXBwfVxuICAgICAgICBkYXRhLXRlc3RpZD17dGVzdElkcy5lZGl0b3J9XG4gICAgICAgIG9uUXVlcnlUeXBlPXthc3luYyAocXVlcnk6IHN0cmluZykgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZ2V0U3RhdHMoZGF0YXNvdXJjZSwgcXVlcnkpO1xuICAgICAgICAgIHNldFF1ZXJ5U3RhdHMoc3RhdHMpO1xuICAgICAgICB9fVxuICAgICAgICBFeHRyYUZpZWxkRWxlbWVudD17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHtsb2tpRm9ybWF0UXVlcnkgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmJ1dHRvbkdyb3VwfT5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPEhvcml6b250YWxHcm91cCBzcGFjaW5nPVwic21cIj5cbiAgICAgICAgICAgICAgICAgICAgPEljb25CdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrRm9ybWF0UXVlcnlCdXR0b259XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImJyYWNrZXRzLWN1cmx5XCJcbiAgICAgICAgICAgICAgICAgICAgICBzaXplPVwieHNcIlxuICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA9XCJGb3JtYXQgcXVlcnlcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBjb250ZW50PXtgVXNlICR7Z2V0TW9kS2V5KCl9K3ogdG8gdW5kb2B9PlxuICAgICAgICAgICAgICAgICAgICAgIDxJY29uIGNsYXNzTmFtZT17c3R5bGVzLmhpbnR9IG5hbWU9XCJrZXlib2FyZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgIDwvSG9yaXpvbnRhbEdyb3VwPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC8+XG4gICAgICAgIH1cbiAgICAgIC8+XG4gICAgICB7c2hvd0V4cGxhaW4gJiYgPExva2lRdWVyeUJ1aWxkZXJFeHBsYWluZWQgcXVlcnk9e3F1ZXJ5LmV4cHJ9IC8+fVxuICAgIDwvZGl2PlxuICApO1xufVxuXG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+IHtcbiAgcmV0dXJuIHtcbiAgICB3cmFwcGVyOiBjc3NgXG4gICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAuZ2YtZm9ybSB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDAuNTtcbiAgICAgIH1cbiAgICBgLFxuICAgIGJ1dHRvbkdyb3VwOiBjc3NgXG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ib3JkZXIubWVkaXVtfTtcbiAgICAgIGJvcmRlci10b3A6IG5vbmU7XG4gICAgICBwYWRkaW5nOiAke3RoZW1lLnNwYWNpbmcoMC41LCAwLjUsIDAuNSwgMC41KX07XG4gICAgICBtYXJnaW4tYm90dG9tOiAke3RoZW1lLnNwYWNpbmcoMC41KX07XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1ncm93OiAxO1xuICAgICAganVzdGlmeS1jb250ZW50OiBlbmQ7XG4gICAgICBmb250LXNpemU6ICR7dGhlbWUudHlwb2dyYXBoeS5ib2R5U21hbGwuZm9udFNpemV9O1xuICAgIGAsXG4gICAgaGludDogY3NzYFxuICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnRleHQuZGlzYWJsZWR9O1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIGN1cnNvcjogaGVscDtcbiAgICBgLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJxdWVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryCodeEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/NestedQuery.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NestedQuery: () => (/* binding */ NestedQuery)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/selectUtils.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/FlexItem.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRows.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/AutoSizeInput.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/IconButton/IconButton.tsx\");\n/* harmony import */ var _binaryScalarOperations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/binaryScalarOperations.ts\");\n/* harmony import */ var _LokiQueryBuilder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/LokiQueryBuilder.tsx\");\n\n\n\n\n\n\n\n\nconst NestedQuery = react__WEBPACK_IMPORTED_MODULE_1___default().memo(\n  ({ nestedQuery, index, datasource, onChange, onRemove, onRunQuery, showExplain }) => {\n    const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.useStyles2)(getStyles);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.card }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.header }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.name }, \"Operator\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Select,\n      {\n        \"aria-label\": \"Select operator\",\n        width: \"auto\",\n        options: operators,\n        value: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.toOption)(nestedQuery.operator),\n        onChange: (value) => {\n          onChange(index, {\n            ...nestedQuery,\n            operator: value.value\n          });\n        }\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.name }, \"Vector matches\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.vectorMatchWrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Select,\n      {\n        width: \"auto\",\n        value: nestedQuery.vectorMatchesType || \"on\",\n        allowCustomValue: true,\n        options: [\n          { value: \"on\", label: \"on\" },\n          { value: \"ignoring\", label: \"ignoring\" }\n        ],\n        onChange: (val) => {\n          onChange(index, {\n            ...nestedQuery,\n            vectorMatchesType: val.value\n          });\n        }\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.AutoSizeInput,\n      {\n        className: styles.vectorMatchInput,\n        minWidth: 20,\n        defaultValue: nestedQuery.vectorMatches,\n        onCommitChange: (evt) => {\n          onChange(index, {\n            ...nestedQuery,\n            vectorMatches: evt.currentTarget.value,\n            vectorMatchesType: nestedQuery.vectorMatchesType || \"on\"\n          });\n        }\n      }\n    )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_8__.FlexItem, { grow: 1 }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_9__.IconButton, { name: \"times\", size: \"sm\", onClick: () => onRemove(index), tooltip: \"Remove nested query\" })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.body }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_10__.EditorRows, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _LokiQueryBuilder__WEBPACK_IMPORTED_MODULE_3__.LokiQueryBuilder,\n      {\n        showExplain,\n        query: nestedQuery.query,\n        datasource,\n        onRunQuery,\n        onChange: (update) => {\n          onChange(index, { ...nestedQuery, query: update });\n        }\n      }\n    ))));\n  }\n);\nconst operators = _binaryScalarOperations__WEBPACK_IMPORTED_MODULE_2__.binaryScalarDefs.map((def) => ({ label: def.sign, value: def.sign }));\nNestedQuery.displayName = \"NestedQuery\";\nconst getStyles = (theme) => {\n  return {\n    card: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"card\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      gap: theme.spacing(0.5)\n    }),\n    header: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"header\",\n      padding: theme.spacing(0.5, 0.5, 0.5, 1),\n      gap: theme.spacing(1),\n      display: \"flex\",\n      alignItems: \"center\"\n    }),\n    name: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"name\",\n      whiteSpace: \"nowrap\"\n    }),\n    body: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"body\",\n      paddingLeft: theme.spacing(2)\n    }),\n    vectorMatchInput: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"vectorMatchInput\",\n      marginLeft: -1\n    }),\n    vectorMatchWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"vectorMatchWrapper\",\n      display: \"flex\"\n    })\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL05lc3RlZFF1ZXJ5LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNGO0FBRXNCO0FBQ0g7QUFDeUI7QUFHN0I7QUFHQTtBQVkxQixNQUFNLGNBQWMsaURBQVU7QUFBSixFQUMvQixDQUFDLEVBQUUsYUFBYSxPQUFPLFlBQVksVUFBVSxVQUFVLFlBQVksWUFBWSxNQUFNO0FBQ25GLFVBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFFbkMsV0FDRSwyRUFBQyxTQUFJLFdBQVcsT0FBTyxRQUNyQiwyRUFBQyxTQUFJLFdBQVcsT0FBTyxVQUNyQiwyRUFBQyxTQUFJLFdBQVcsT0FBTyxRQUFNLFVBQVEsR0FDckM7QUFBQSxNQUFDLCtDQUFNO0FBQU47QUFBQSxRQUNDLGNBQVc7QUFBQSxRQUNYLE9BQU07QUFBQSxRQUNOLFNBQVM7QUFBQSxRQUNULE9BQU8sdURBQVEsQ0FBQyxZQUFZLFFBQVE7QUFBQSxRQUNwQyxVQUFVLENBQUMsVUFBVTtBQUNuQixtQkFBUyxPQUFPO0FBQUEsWUFDZCxHQUFHO0FBQUEsWUFDSCxVQUFVLE1BQU07QUFBQSxVQUNsQixDQUFDO0FBQUEsUUFDSDtBQUFBO0FBQUEsSUFDRixHQUNBLDJFQUFDLFNBQUksV0FBVyxPQUFPLFFBQU0sZ0JBQWMsR0FDM0MsMkVBQUMsU0FBSSxXQUFXLE9BQU8sc0JBQ3JCO0FBQUEsTUFBQywrQ0FBTTtBQUFOO0FBQUEsUUFDQyxPQUFNO0FBQUEsUUFDTixPQUFPLFlBQVkscUJBQXFCO0FBQUEsUUFDeEMsa0JBQWdCO0FBQUEsUUFDaEIsU0FBUztBQUFBLFVBQ1AsRUFBRSxPQUFPLE1BQU0sT0FBTyxLQUFLO0FBQUEsVUFDM0IsRUFBRSxPQUFPLFlBQVksT0FBTyxXQUFXO0FBQUEsUUFDekM7QUFBQSxRQUNBLFVBQVUsQ0FBQyxRQUFRO0FBQ2pCLG1CQUFTLE9BQU87QUFBQSxZQUNkLEdBQUc7QUFBQSxZQUNILG1CQUFtQixJQUFJO0FBQUEsVUFDekIsQ0FBQztBQUFBLFFBQ0g7QUFBQTtBQUFBLElBQ0YsR0FDQTtBQUFBLE1BQUMsc0RBQWE7QUFBYjtBQUFBLFFBQ0MsV0FBVyxPQUFPO0FBQUEsUUFDbEIsVUFBVTtBQUFBLFFBQ1YsY0FBYyxZQUFZO0FBQUEsUUFDMUIsZ0JBQWdCLENBQUMsUUFBUTtBQUN2QixtQkFBUyxPQUFPO0FBQUEsWUFDZCxHQUFHO0FBQUEsWUFDSCxlQUFlLElBQUksY0FBYztBQUFBLFlBQ2pDLG1CQUFtQixZQUFZLHFCQUFxQjtBQUFBLFVBQ3RELENBQUM7QUFBQSxRQUNIO0FBQUE7QUFBQSxJQUNGLENBQ0YsR0FDQSwyRUFBQywyREFBUSxJQUFDLE1BQU0sR0FBRyxHQUNuQiwyRUFBQyxtREFBVSxJQUFDLE1BQUssU0FBUSxNQUFLLE1BQUssU0FBUyxNQUFNLFNBQVMsS0FBSyxHQUFHLFNBQVEsdUJBQXNCLENBQ25HLEdBQ0EsMkVBQUMsU0FBSSxXQUFXLE9BQU8sUUFDckIsMkVBQUMsOERBQVUsUUFDVDtBQUFBLE1BQUMsK0RBQWdCO0FBQWhCO0FBQUEsUUFDQztBQUFBLFFBQ0EsT0FBTyxZQUFZO0FBQUEsUUFDbkI7QUFBQSxRQUNBO0FBQUEsUUFDQSxVQUFVLENBQUMsV0FBVztBQUNwQixtQkFBUyxPQUFPLEVBQUUsR0FBRyxhQUFhLE9BQU8sT0FBTyxDQUFDO0FBQUEsUUFDbkQ7QUFBQTtBQUFBLElBQ0YsQ0FDRixDQUNGLENBQ0Y7QUFBQSxFQUVKO0FBQ0Y7QUFFQSxNQUFNLFlBQVkscUVBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPLElBQUksTUFBTSxPQUFPLElBQUksS0FBSyxFQUFFO0FBRXRGLFlBQVksY0FBYztBQUUxQixNQUFNLFlBQVksQ0FBQyxVQUF5QjtBQUMxQyxTQUFPO0FBQUEsSUFDTCxNQUFNLGlEQUFHLENBQUM7QUFBQSxNQUNSLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxNQUNULGVBQWU7QUFBQSxNQUNmLEtBQUssTUFBTSxRQUFRLEdBQUc7QUFBQSxJQUN4QixDQUFDO0FBQUEsSUFDRCxRQUFRLGlEQUFHLENBQUM7QUFBQSxNQUNWLE9BQU87QUFBQSxNQUNQLFNBQVMsTUFBTSxRQUFRLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxNQUN2QyxLQUFLLE1BQU0sUUFBUSxDQUFDO0FBQUEsTUFDcEIsU0FBUztBQUFBLE1BQ1QsWUFBWTtBQUFBLElBQ2QsQ0FBQztBQUFBLElBQ0QsTUFBTSxpREFBRyxDQUFDO0FBQUEsTUFDUixPQUFPO0FBQUEsTUFDUCxZQUFZO0FBQUEsSUFDZCxDQUFDO0FBQUEsSUFDRCxNQUFNLGlEQUFHLENBQUM7QUFBQSxNQUNSLE9BQU87QUFBQSxNQUNQLGFBQWEsTUFBTSxRQUFRLENBQUM7QUFBQSxJQUM5QixDQUFDO0FBQUEsSUFDRCxrQkFBa0IsaURBQUcsQ0FBQztBQUFBLE1BQ3BCLE9BQU87QUFBQSxNQUNQLFlBQVk7QUFBQSxJQUNkLENBQUM7QUFBQSxJQUNELG9CQUFvQixpREFBRyxDQUFDO0FBQUEsTUFDdEIsT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1gsQ0FBQztBQUFBLEVBQ0g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL05lc3RlZFF1ZXJ5LnRzeD83NDJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBHcmFmYW5hVGhlbWUyLCB0b09wdGlvbiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgRWRpdG9yUm93cywgRmxleEl0ZW0gfSBmcm9tICdAZ3JhZmFuYS9leHBlcmltZW50YWwnO1xuaW1wb3J0IHsgQXV0b1NpemVJbnB1dCwgSWNvbkJ1dHRvbiwgU2VsZWN0LCB1c2VTdHlsZXMyIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSB9IGZyb20gJy4uLy4uL2RhdGFzb3VyY2UnO1xuaW1wb3J0IHsgYmluYXJ5U2NhbGFyRGVmcyB9IGZyb20gJy4uL2JpbmFyeVNjYWxhck9wZXJhdGlvbnMnO1xuaW1wb3J0IHsgTG9raVZpc3VhbFF1ZXJ5QmluYXJ5IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBMb2tpUXVlcnlCdWlsZGVyIH0gZnJvbSAnLi9Mb2tpUXVlcnlCdWlsZGVyJztcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XG4gIG5lc3RlZFF1ZXJ5OiBMb2tpVmlzdWFsUXVlcnlCaW5hcnk7XG4gIGRhdGFzb3VyY2U6IExva2lEYXRhc291cmNlO1xuICBpbmRleDogbnVtYmVyO1xuICBzaG93RXhwbGFpbjogYm9vbGVhbjtcbiAgb25DaGFuZ2U6IChpbmRleDogbnVtYmVyLCB1cGRhdGU6IExva2lWaXN1YWxRdWVyeUJpbmFyeSkgPT4gdm9pZDtcbiAgb25SZW1vdmU6IChpbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICBvblJ1blF1ZXJ5OiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgTmVzdGVkUXVlcnkgPSBSZWFjdC5tZW1vPFByb3BzPihcbiAgKHsgbmVzdGVkUXVlcnksIGluZGV4LCBkYXRhc291cmNlLCBvbkNoYW5nZSwgb25SZW1vdmUsIG9uUnVuUXVlcnksIHNob3dFeHBsYWluIH0pID0+IHtcbiAgICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jYXJkfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5oZWFkZXJ9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubmFtZX0+T3BlcmF0b3I8L2Rpdj5cbiAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiU2VsZWN0IG9wZXJhdG9yXCJcbiAgICAgICAgICAgIHdpZHRoPVwiYXV0b1wiXG4gICAgICAgICAgICBvcHRpb25zPXtvcGVyYXRvcnN9XG4gICAgICAgICAgICB2YWx1ZT17dG9PcHRpb24obmVzdGVkUXVlcnkub3BlcmF0b3IpfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICBvbkNoYW5nZShpbmRleCwge1xuICAgICAgICAgICAgICAgIC4uLm5lc3RlZFF1ZXJ5LFxuICAgICAgICAgICAgICAgIG9wZXJhdG9yOiB2YWx1ZS52YWx1ZSEsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubmFtZX0+VmVjdG9yIG1hdGNoZXM8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnZlY3Rvck1hdGNoV3JhcHBlcn0+XG4gICAgICAgICAgICA8U2VsZWN0PExva2lWaXN1YWxRdWVyeUJpbmFyeVsndmVjdG9yTWF0Y2hlc1R5cGUnXT5cbiAgICAgICAgICAgICAgd2lkdGg9XCJhdXRvXCJcbiAgICAgICAgICAgICAgdmFsdWU9e25lc3RlZFF1ZXJ5LnZlY3Rvck1hdGNoZXNUeXBlIHx8ICdvbid9XG4gICAgICAgICAgICAgIGFsbG93Q3VzdG9tVmFsdWVcbiAgICAgICAgICAgICAgb3B0aW9ucz17W1xuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdvbicsIGxhYmVsOiAnb24nIH0sXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2lnbm9yaW5nJywgbGFiZWw6ICdpZ25vcmluZycgfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZShpbmRleCwge1xuICAgICAgICAgICAgICAgICAgLi4ubmVzdGVkUXVlcnksXG4gICAgICAgICAgICAgICAgICB2ZWN0b3JNYXRjaGVzVHlwZTogdmFsLnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxBdXRvU2l6ZUlucHV0XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnZlY3Rvck1hdGNoSW5wdXR9XG4gICAgICAgICAgICAgIG1pbldpZHRoPXsyMH1cbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtuZXN0ZWRRdWVyeS52ZWN0b3JNYXRjaGVzfVxuICAgICAgICAgICAgICBvbkNvbW1pdENoYW5nZT17KGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGluZGV4LCB7XG4gICAgICAgICAgICAgICAgICAuLi5uZXN0ZWRRdWVyeSxcbiAgICAgICAgICAgICAgICAgIHZlY3Rvck1hdGNoZXM6IGV2dC5jdXJyZW50VGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgdmVjdG9yTWF0Y2hlc1R5cGU6IG5lc3RlZFF1ZXJ5LnZlY3Rvck1hdGNoZXNUeXBlIHx8ICdvbicsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxGbGV4SXRlbSBncm93PXsxfSAvPlxuICAgICAgICAgIDxJY29uQnV0dG9uIG5hbWU9XCJ0aW1lc1wiIHNpemU9XCJzbVwiIG9uQ2xpY2s9eygpID0+IG9uUmVtb3ZlKGluZGV4KX0gdG9vbHRpcD1cIlJlbW92ZSBuZXN0ZWQgcXVlcnlcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ib2R5fT5cbiAgICAgICAgICA8RWRpdG9yUm93cz5cbiAgICAgICAgICAgIDxMb2tpUXVlcnlCdWlsZGVyXG4gICAgICAgICAgICAgIHNob3dFeHBsYWluPXtzaG93RXhwbGFpbn1cbiAgICAgICAgICAgICAgcXVlcnk9e25lc3RlZFF1ZXJ5LnF1ZXJ5fVxuICAgICAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgICAgICBvblJ1blF1ZXJ5PXtvblJ1blF1ZXJ5fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHVwZGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGluZGV4LCB7IC4uLm5lc3RlZFF1ZXJ5LCBxdWVyeTogdXBkYXRlIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0VkaXRvclJvd3M+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuKTtcblxuY29uc3Qgb3BlcmF0b3JzID0gYmluYXJ5U2NhbGFyRGVmcy5tYXAoKGRlZikgPT4gKHsgbGFiZWw6IGRlZi5zaWduLCB2YWx1ZTogZGVmLnNpZ24gfSkpO1xuXG5OZXN0ZWRRdWVyeS5kaXNwbGF5TmFtZSA9ICdOZXN0ZWRRdWVyeSc7XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIGNhcmQ6IGNzcyh7XG4gICAgICBsYWJlbDogJ2NhcmQnLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAgICBnYXA6IHRoZW1lLnNwYWNpbmcoMC41KSxcbiAgICB9KSxcbiAgICBoZWFkZXI6IGNzcyh7XG4gICAgICBsYWJlbDogJ2hlYWRlcicsXG4gICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nKDAuNSwgMC41LCAwLjUsIDEpLFxuICAgICAgZ2FwOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgfSksXG4gICAgbmFtZTogY3NzKHtcbiAgICAgIGxhYmVsOiAnbmFtZScsXG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICB9KSxcbiAgICBib2R5OiBjc3Moe1xuICAgICAgbGFiZWw6ICdib2R5JyxcbiAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgIH0pLFxuICAgIHZlY3Rvck1hdGNoSW5wdXQ6IGNzcyh7XG4gICAgICBsYWJlbDogJ3ZlY3Rvck1hdGNoSW5wdXQnLFxuICAgICAgbWFyZ2luTGVmdDogLTEsXG4gICAgfSksXG4gICAgdmVjdG9yTWF0Y2hXcmFwcGVyOiBjc3Moe1xuICAgICAgbGFiZWw6ICd2ZWN0b3JNYXRjaFdyYXBwZXInLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIH0pLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/NestedQuery.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/NestedQueryList.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NestedQueryList: () => (/* binding */ NestedQueryList)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _NestedQuery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/NestedQuery.tsx\");\n\n\n\n\nfunction NestedQueryList({ query, datasource, onChange, onRunQuery, showExplain }) {\n  const nestedQueries = query.binaryQueries ?? [];\n  const onNestedQueryUpdate = (index, update) => {\n    const updatedList = [...nestedQueries];\n    updatedList.splice(index, 1, update);\n    onChange({ ...query, binaryQueries: updatedList });\n  };\n  const onRemove = (index) => {\n    const updatedList = [...nestedQueries.slice(0, index), ...nestedQueries.slice(index + 1)];\n    onChange({ ...query, binaryQueries: updatedList });\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_2__.Stack, { direction: \"column\", gap: 1 }, nestedQueries.map((nestedQuery, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _NestedQuery__WEBPACK_IMPORTED_MODULE_1__.NestedQuery,\n    {\n      key: index.toString(),\n      nestedQuery,\n      index,\n      onChange: onNestedQueryUpdate,\n      datasource,\n      onRemove,\n      onRunQuery,\n      showExplain\n    }\n  )));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL05lc3RlZFF1ZXJ5TGlzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWtCO0FBRUk7QUFLTTtBQVVyQixTQUFTLGdCQUFnQixFQUFFLE9BQU8sWUFBWSxVQUFVLFlBQVksWUFBWSxHQUFVO0FBQy9GLFFBQU0sZ0JBQWdCLE1BQU0saUJBQWlCLENBQUM7QUFFOUMsUUFBTSxzQkFBc0IsQ0FBQyxPQUFlLFdBQWtDO0FBQzVFLFVBQU0sY0FBYyxDQUFDLEdBQUcsYUFBYTtBQUNyQyxnQkFBWSxPQUFPLE9BQU8sR0FBRyxNQUFNO0FBQ25DLGFBQVMsRUFBRSxHQUFHLE9BQU8sZUFBZSxZQUFZLENBQUM7QUFBQSxFQUNuRDtBQUVBLFFBQU0sV0FBVyxDQUFDLFVBQWtCO0FBQ2xDLFVBQU0sY0FBYyxDQUFDLEdBQUcsY0FBYyxNQUFNLEdBQUcsS0FBSyxHQUFHLEdBQUcsY0FBYyxNQUFNLFFBQVEsQ0FBQyxDQUFDO0FBQ3hGLGFBQVMsRUFBRSxHQUFHLE9BQU8sZUFBZSxZQUFZLENBQUM7QUFBQSxFQUNuRDtBQUVBLFNBQ0UsMkVBQUMsd0RBQUssSUFBQyxXQUFVLFVBQVMsS0FBSyxLQUM1QixjQUFjLElBQUksQ0FBQyxhQUFhLFVBQy9CO0FBQUEsSUFBQyxxREFBVztBQUFYO0FBQUEsTUFDQyxLQUFLLE1BQU0sU0FBUztBQUFBLE1BQ3BCO0FBQUEsTUFDQTtBQUFBLE1BQ0EsVUFBVTtBQUFBLE1BQ1Y7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLEVBQ0YsQ0FDRCxDQUNIO0FBRUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9xdWVyeWJ1aWxkZXIvY29tcG9uZW50cy9OZXN0ZWRRdWVyeUxpc3QudHN4P2Y4YTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgU3RhY2sgfSBmcm9tICdAZ3JhZmFuYS9leHBlcmltZW50YWwnO1xuXG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSB9IGZyb20gJy4uLy4uL2RhdGFzb3VyY2UnO1xuaW1wb3J0IHsgTG9raVZpc3VhbFF1ZXJ5LCBMb2tpVmlzdWFsUXVlcnlCaW5hcnkgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7IE5lc3RlZFF1ZXJ5IH0gZnJvbSAnLi9OZXN0ZWRRdWVyeSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICBxdWVyeTogTG9raVZpc3VhbFF1ZXJ5O1xuICBkYXRhc291cmNlOiBMb2tpRGF0YXNvdXJjZTtcbiAgc2hvd0V4cGxhaW46IGJvb2xlYW47XG4gIG9uQ2hhbmdlOiAocXVlcnk6IExva2lWaXN1YWxRdWVyeSkgPT4gdm9pZDtcbiAgb25SdW5RdWVyeTogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE5lc3RlZFF1ZXJ5TGlzdCh7IHF1ZXJ5LCBkYXRhc291cmNlLCBvbkNoYW5nZSwgb25SdW5RdWVyeSwgc2hvd0V4cGxhaW4gfTogUHJvcHMpIHtcbiAgY29uc3QgbmVzdGVkUXVlcmllcyA9IHF1ZXJ5LmJpbmFyeVF1ZXJpZXMgPz8gW107XG5cbiAgY29uc3Qgb25OZXN0ZWRRdWVyeVVwZGF0ZSA9IChpbmRleDogbnVtYmVyLCB1cGRhdGU6IExva2lWaXN1YWxRdWVyeUJpbmFyeSkgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZWRMaXN0ID0gWy4uLm5lc3RlZFF1ZXJpZXNdO1xuICAgIHVwZGF0ZWRMaXN0LnNwbGljZShpbmRleCwgMSwgdXBkYXRlKTtcbiAgICBvbkNoYW5nZSh7IC4uLnF1ZXJ5LCBiaW5hcnlRdWVyaWVzOiB1cGRhdGVkTGlzdCB9KTtcbiAgfTtcblxuICBjb25zdCBvblJlbW92ZSA9IChpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlZExpc3QgPSBbLi4ubmVzdGVkUXVlcmllcy5zbGljZSgwLCBpbmRleCksIC4uLm5lc3RlZFF1ZXJpZXMuc2xpY2UoaW5kZXggKyAxKV07XG4gICAgb25DaGFuZ2UoeyAuLi5xdWVyeSwgYmluYXJ5UXVlcmllczogdXBkYXRlZExpc3QgfSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8U3RhY2sgZGlyZWN0aW9uPVwiY29sdW1uXCIgZ2FwPXsxfT5cbiAgICAgIHtuZXN0ZWRRdWVyaWVzLm1hcCgobmVzdGVkUXVlcnksIGluZGV4KSA9PiAoXG4gICAgICAgIDxOZXN0ZWRRdWVyeVxuICAgICAgICAgIGtleT17aW5kZXgudG9TdHJpbmcoKX1cbiAgICAgICAgICBuZXN0ZWRRdWVyeT17bmVzdGVkUXVlcnl9XG4gICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgIG9uQ2hhbmdlPXtvbk5lc3RlZFF1ZXJ5VXBkYXRlfVxuICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgb25SZW1vdmU9e29uUmVtb3ZlfVxuICAgICAgICAgIG9uUnVuUXVlcnk9e29uUnVuUXVlcnl9XG4gICAgICAgICAgc2hvd0V4cGxhaW49e3Nob3dFeHBsYWlufVxuICAgICAgICAvPlxuICAgICAgKSl9XG4gICAgPC9TdGFjaz5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/NestedQueryList.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/QueryPattern.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryPattern: () => (/* binding */ QueryPattern)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Card/Card.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var app_plugins_datasource_prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/RawQuery.tsx\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/syntax.ts\");\n/* harmony import */ var _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts\");\n\n\n\n\n\n\n\nconst QueryPattern = (props) => {\n  const { pattern, onPatternSelect, hasNewQueryOption, hasPreviousQuery, selectedPatternName, setSelectedPatternName } = props;\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.useStyles2)(getStyles);\n  const lang = { grammar: _syntax__WEBPACK_IMPORTED_MODULE_3__[\"default\"], name: \"logql\" };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Card, { className: styles.card }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Card.Heading, null, pattern.name), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.rawQueryContainer }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    app_plugins_datasource_prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_2__.RawQuery,\n    {\n      query: _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_4__.lokiQueryModeller.renderQuery({ labels: [], operations: pattern.operations }),\n      lang,\n      className: styles.rawQuery\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Card.Actions, null, selectedPatternName !== pattern.name ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Button,\n    {\n      size: \"sm\",\n      onClick: () => {\n        if (hasPreviousQuery) {\n          setSelectedPatternName(pattern.name);\n        } else {\n          onPatternSelect(pattern);\n        }\n      }\n    },\n    \"Use this query\"\n  ) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.spacing }, `If you would like to use this query, ${hasNewQueryOption ? \"you can either replace your current query or create a new query\" : \"your current query will be replaced\"}.`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Button, { size: \"sm\", fill: \"outline\", onClick: () => setSelectedPatternName(null) }, \"Back\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Button,\n    {\n      size: \"sm\",\n      onClick: () => {\n        onPatternSelect(pattern);\n      }\n    },\n    \"Replace query\"\n  ), hasNewQueryOption && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Button,\n    {\n      size: \"sm\",\n      onClick: () => {\n        onPatternSelect(pattern, true);\n      }\n    },\n    \"Create new query\"\n  ))));\n};\nconst getStyles = (theme) => {\n  return {\n    card: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      width: 49.5%;\n      display: flex;\n      flex-direction: column;\n    `,\n    rawQueryContainer: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      flex-grow: 1;\n    `,\n    rawQuery: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      background-color: ${theme.colors.background.primary};\n      padding: ${theme.spacing(1)};\n      margin-top: ${theme.spacing(1)};\n    `,\n    spacing: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-bottom: ${theme.spacing(1)};\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL1F1ZXJ5UGF0dGVybi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDRjtBQUd1QjtBQUNoQjtBQUVBO0FBQ1M7QUFZM0IsTUFBTSxlQUFlLENBQUMsVUFBaUI7QUFDNUMsUUFBTSxFQUFFLFNBQVMsaUJBQWlCLG1CQUFtQixrQkFBa0IscUJBQXFCLHVCQUF1QixJQUNqSDtBQUVGLFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFDbkMsUUFBTSxPQUFPLEVBQUUsU0FBUywrQ0FBWSxFQUFFLE1BQU0sUUFBUTtBQUVwRCxTQUNFLDJFQUFDLDZDQUFJLElBQUMsV0FBVyxPQUFPLFFBQ3RCLDJFQUFDLDZDQUFJLENBQUMsU0FBTCxNQUFjLFFBQVEsSUFBSyxHQUM1QiwyRUFBQyxTQUFJLFdBQVcsT0FBTyxxQkFDckI7QUFBQSxJQUFDLG9HQUFRO0FBQVI7QUFBQSxNQUNDLE9BQU8saUVBQWlCLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxHQUFHLFlBQVksUUFBUSxXQUFXLENBQUM7QUFBQSxNQUNuRjtBQUFBLE1BQ0EsV0FBVyxPQUFPO0FBQUE7QUFBQSxFQUNwQixDQUNGLEdBQ0EsMkVBQUMsNkNBQUksQ0FBQyxTQUFMLE1BQ0Usd0JBQXdCLFFBQVEsT0FDL0I7QUFBQSxJQUFDLCtDQUFNO0FBQU47QUFBQSxNQUNDLE1BQUs7QUFBQSxNQUNMLFNBQVMsTUFBTTtBQUNiLFlBQUksa0JBQWtCO0FBRXBCLGlDQUF1QixRQUFRLElBQUk7QUFBQSxRQUNyQyxPQUFPO0FBQ0wsMEJBQWdCLE9BQU87QUFBQSxRQUN6QjtBQUFBLE1BQ0Y7QUFBQTtBQUFBLElBQ0Q7QUFBQSxFQUVELElBRUEsMElBQ0UsMkVBQUMsU0FBSSxXQUFXLE9BQU8sV0FDcEIsd0NBQ0Msb0JBQ0ksb0VBQ0Esd0NBRVIsR0FDQSwyRUFBQywrQ0FBTSxJQUFDLE1BQUssTUFBSyxNQUFLLFdBQVUsU0FBUyxNQUFNLHVCQUF1QixJQUFJLEtBQUcsTUFFOUUsR0FDQTtBQUFBLElBQUMsK0NBQU07QUFBTjtBQUFBLE1BQ0MsTUFBSztBQUFBLE1BQ0wsU0FBUyxNQUFNO0FBQ2Isd0JBQWdCLE9BQU87QUFBQSxNQUN6QjtBQUFBO0FBQUEsSUFDRDtBQUFBLEVBRUQsR0FDQyxxQkFDQztBQUFBLElBQUMsK0NBQU07QUFBTjtBQUFBLE1BQ0MsTUFBSztBQUFBLE1BQ0wsU0FBUyxNQUFNO0FBQ2Isd0JBQWdCLFNBQVMsSUFBSTtBQUFBLE1BQy9CO0FBQUE7QUFBQSxJQUNEO0FBQUEsRUFFRCxDQUVKLENBRUosQ0FDRjtBQUVKO0FBRUEsTUFBTSxZQUFZLENBQUMsVUFBeUI7QUFDMUMsU0FBTztBQUFBLElBQ0wsTUFBTSxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFLTixtQkFBbUIsaURBQUc7QUFBSDtBQUFBO0FBQUEsSUFHbkIsVUFBVSxpREFBRztBQUFILDBCQUNZLE1BQU0sT0FBTyxXQUFXO0FBQUEsaUJBQ2pDLE1BQU0sUUFBUSxDQUFDO0FBQUEsb0JBQ1osTUFBTSxRQUFRLENBQUM7QUFBQTtBQUFBLElBRS9CLFNBQVMsaURBQUc7QUFBSCx1QkFDVSxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUEsRUFFcEM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL1F1ZXJ5UGF0dGVybi50c3g/OTMxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgQnV0dG9uLCBDYXJkLCB1c2VTdHlsZXMyIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgUmF3UXVlcnkgfSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9SYXdRdWVyeSc7XG5cbmltcG9ydCBsb2dxbEdyYW1tYXIgZnJvbSAnLi4vLi4vc3ludGF4JztcbmltcG9ydCB7IGxva2lRdWVyeU1vZGVsbGVyIH0gZnJvbSAnLi4vTG9raVF1ZXJ5TW9kZWxsZXInO1xuaW1wb3J0IHsgTG9raVF1ZXJ5UGF0dGVybiB9IGZyb20gJy4uL3R5cGVzJztcblxudHlwZSBQcm9wcyA9IHtcbiAgcGF0dGVybjogTG9raVF1ZXJ5UGF0dGVybjtcbiAgaGFzTmV3UXVlcnlPcHRpb246IGJvb2xlYW47XG4gIGhhc1ByZXZpb3VzUXVlcnk6IGJvb2xlYW47XG4gIHNlbGVjdGVkUGF0dGVybk5hbWU6IHN0cmluZyB8IG51bGw7XG4gIHNldFNlbGVjdGVkUGF0dGVybk5hbWU6IChuYW1lOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xuICBvblBhdHRlcm5TZWxlY3Q6IChwYXR0ZXJuOiBMb2tpUXVlcnlQYXR0ZXJuLCBzZWxlY3RBc05ld1F1ZXJ5PzogYm9vbGVhbikgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCBjb25zdCBRdWVyeVBhdHRlcm4gPSAocHJvcHM6IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgcGF0dGVybiwgb25QYXR0ZXJuU2VsZWN0LCBoYXNOZXdRdWVyeU9wdGlvbiwgaGFzUHJldmlvdXNRdWVyeSwgc2VsZWN0ZWRQYXR0ZXJuTmFtZSwgc2V0U2VsZWN0ZWRQYXR0ZXJuTmFtZSB9ID1cbiAgICBwcm9wcztcblxuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG4gIGNvbnN0IGxhbmcgPSB7IGdyYW1tYXI6IGxvZ3FsR3JhbW1hciwgbmFtZTogJ2xvZ3FsJyB9O1xuXG4gIHJldHVybiAoXG4gICAgPENhcmQgY2xhc3NOYW1lPXtzdHlsZXMuY2FyZH0+XG4gICAgICA8Q2FyZC5IZWFkaW5nPntwYXR0ZXJuLm5hbWV9PC9DYXJkLkhlYWRpbmc+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnJhd1F1ZXJ5Q29udGFpbmVyfT5cbiAgICAgICAgPFJhd1F1ZXJ5XG4gICAgICAgICAgcXVlcnk9e2xva2lRdWVyeU1vZGVsbGVyLnJlbmRlclF1ZXJ5KHsgbGFiZWxzOiBbXSwgb3BlcmF0aW9uczogcGF0dGVybi5vcGVyYXRpb25zIH0pfVxuICAgICAgICAgIGxhbmc9e2xhbmd9XG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMucmF3UXVlcnl9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxDYXJkLkFjdGlvbnM+XG4gICAgICAgIHtzZWxlY3RlZFBhdHRlcm5OYW1lICE9PSBwYXR0ZXJuLm5hbWUgPyAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGhhc1ByZXZpb3VzUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB1c2VyIGhhcyBwcmV2aW91cyBxdWVyeSwgd2UgbmVlZCB0byBjb25maXJtIHRoYXQgdGhleSB3YW50IHRvIHJlcGxhY2UgaXRcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFBhdHRlcm5OYW1lKHBhdHRlcm4ubmFtZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb25QYXR0ZXJuU2VsZWN0KHBhdHRlcm4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFVzZSB0aGlzIHF1ZXJ5XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc3BhY2luZ30+XG4gICAgICAgICAgICAgIHtgSWYgeW91IHdvdWxkIGxpa2UgdG8gdXNlIHRoaXMgcXVlcnksICR7XG4gICAgICAgICAgICAgICAgaGFzTmV3UXVlcnlPcHRpb25cbiAgICAgICAgICAgICAgICAgID8gJ3lvdSBjYW4gZWl0aGVyIHJlcGxhY2UgeW91ciBjdXJyZW50IHF1ZXJ5IG9yIGNyZWF0ZSBhIG5ldyBxdWVyeSdcbiAgICAgICAgICAgICAgICAgIDogJ3lvdXIgY3VycmVudCBxdWVyeSB3aWxsIGJlIHJlcGxhY2VkJ1xuICAgICAgICAgICAgICB9LmB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxCdXR0b24gc2l6ZT1cInNtXCIgZmlsbD1cIm91dGxpbmVcIiBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZFBhdHRlcm5OYW1lKG51bGwpfT5cbiAgICAgICAgICAgICAgQmFja1xuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBvblBhdHRlcm5TZWxlY3QocGF0dGVybik7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFJlcGxhY2UgcXVlcnlcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAge2hhc05ld1F1ZXJ5T3B0aW9uICYmIChcbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgb25QYXR0ZXJuU2VsZWN0KHBhdHRlcm4sIHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBDcmVhdGUgbmV3IHF1ZXJ5XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvQ2FyZC5BY3Rpb25zPlxuICAgIDwvQ2FyZD5cbiAgKTtcbn07XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIGNhcmQ6IGNzc2BcbiAgICAgIHdpZHRoOiA0OS41JTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGAsXG4gICAgcmF3UXVlcnlDb250YWluZXI6IGNzc2BcbiAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICBgLFxuICAgIHJhd1F1ZXJ5OiBjc3NgXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5iYWNrZ3JvdW5kLnByaW1hcnl9O1xuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDEpfTtcbiAgICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgYCxcbiAgICBzcGFjaW5nOiBjc3NgXG4gICAgICBtYXJnaW4tYm90dG9tOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICAgIGAsXG4gIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/QueryPattern.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/QueryPatternsModal.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryPatternsModal: () => (/* binding */ QueryPatternsModal)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Modal/Modal.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Collapse/Collapse.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var app_core_utils_query__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/core/utils/query.ts\");\n/* harmony import */ var _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts\");\n/* harmony import */ var _parsing__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/parsing.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n/* harmony import */ var _QueryPattern__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/QueryPattern.tsx\");\n\n\n\n\n\n\n\n\n\n\n\nconst QueryPatternsModal = (props) => {\n  const { isOpen, onClose, onChange, onAddQuery, query, queries, app } = props;\n  const [openTabs, setOpenTabs] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n  const [selectedPatternName, setSelectedPatternName] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.useStyles2)(getStyles);\n  const hasNewQueryOption = !!onAddQuery;\n  const hasPreviousQuery = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_parsing__WEBPACK_IMPORTED_MODULE_5__.buildVisualQueryFromString)(query.expr).query.operations.length > 0,\n    [query.expr]\n  );\n  const onPatternSelect = (pattern, selectAsNewQuery = false) => {\n    const visualQuery = (0,_parsing__WEBPACK_IMPORTED_MODULE_5__.buildVisualQueryFromString)(selectAsNewQuery ? \"\" : query.expr);\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_9__.reportInteraction)(\"grafana_loki_query_patterns_selected\", {\n      version: \"v2\",\n      app: app ?? \"\",\n      editorMode: query.editorMode,\n      selectedPattern: pattern.name,\n      preSelectedOperationsCount: visualQuery.query.operations.length,\n      preSelectedLabelsCount: visualQuery.query.labels.length,\n      createNewQuery: hasNewQueryOption && selectAsNewQuery\n    });\n    visualQuery.query.operations = pattern.operations;\n    if (hasNewQueryOption && selectAsNewQuery) {\n      onAddQuery({\n        ...query,\n        refId: (0,app_core_utils_query__WEBPACK_IMPORTED_MODULE_3__.getNextRefIdChar)(queries ?? [query]),\n        expr: _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_4__.lokiQueryModeller.renderQuery(visualQuery.query)\n      });\n    } else {\n      onChange({\n        ...query,\n        expr: _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_4__.lokiQueryModeller.renderQuery(visualQuery.query)\n      });\n    }\n    setSelectedPatternName(null);\n    onClose();\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_10__.Modal, { isOpen, title: \"Kick start your query\", onDismiss: onClose, className: styles.modal }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.spacing }, \"Kick start your query by selecting one of these queries. You can then continue to complete your query.\"), Object.values(_types__WEBPACK_IMPORTED_MODULE_6__.LokiQueryPatternType).map((patternType) => {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Collapse,\n      {\n        key: patternType,\n        label: `${(0,lodash__WEBPACK_IMPORTED_MODULE_1__.capitalize)(patternType)} query starters`,\n        isOpen: openTabs.includes(patternType),\n        collapsible: true,\n        onToggle: () => setOpenTabs(\n          (tabs) => (\n            // close tab if it's already open, otherwise open it\n            tabs.includes(patternType) ? tabs.filter((t) => t !== patternType) : [...tabs, patternType]\n          )\n        )\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.cardsContainer }, _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_4__.lokiQueryModeller.getQueryPatterns().filter((pattern) => pattern.type === patternType).map((pattern) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n        _QueryPattern__WEBPACK_IMPORTED_MODULE_7__.QueryPattern,\n        {\n          key: pattern.name,\n          pattern,\n          hasNewQueryOption,\n          hasPreviousQuery,\n          onPatternSelect,\n          selectedPatternName,\n          setSelectedPatternName\n        }\n      )))\n    );\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_12__.Button, { variant: \"secondary\", onClick: onClose }, \"Close\"));\n};\nconst getStyles = (theme) => {\n  return {\n    cardsContainer: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      flex-direction: row;\n      flex-wrap: wrap;\n      justify-content: space-between;\n    `,\n    spacing: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-bottom: ${theme.spacing(1)};\n    `,\n    modal: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      width: 85vw;\n      ${theme.breakpoints.down(\"md\")} {\n        width: 100%;\n      }\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL1F1ZXJ5UGF0dGVybnNNb2RhbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDTztBQUNjO0FBR1A7QUFDa0I7QUFDbkI7QUFHQztBQUNTO0FBQ1k7QUFFMUI7QUFZdEIsTUFBTSxxQkFBcUIsQ0FBQyxVQUFpQjtBQUNsRCxRQUFNLEVBQUUsUUFBUSxTQUFTLFVBQVUsWUFBWSxPQUFPLFNBQVMsSUFBSSxJQUFJO0FBQ3ZFLFFBQU0sQ0FBQyxVQUFVLFdBQVcsSUFBSSwrQ0FBUSxDQUFXLENBQUMsQ0FBQztBQUNyRCxRQUFNLENBQUMscUJBQXFCLHNCQUFzQixJQUFJLCtDQUFRLENBQWdCLElBQUk7QUFFbEYsUUFBTSxTQUFTLHVEQUFVLENBQUMsU0FBUztBQUNuQyxRQUFNLG9CQUFvQixDQUFDLENBQUM7QUFDNUIsUUFBTSxtQkFBbUIsOENBQU87QUFBUCxJQUN2QixNQUFNLG9FQUEwQixDQUFDLE1BQU0sSUFBSSxFQUFFLE1BQU0sV0FBVyxTQUFTO0FBQUEsSUFDdkUsQ0FBQyxNQUFNLElBQUk7QUFBQSxFQUNiO0FBRUEsUUFBTSxrQkFBa0IsQ0FBQyxTQUEyQixtQkFBbUIsVUFBVTtBQUMvRSxVQUFNLGNBQWMsb0VBQTBCLENBQUMsbUJBQW1CLEtBQUssTUFBTSxJQUFJO0FBQ2pGLHVFQUFpQixDQUFDLHdDQUF3QztBQUFBLE1BQ3hELFNBQVM7QUFBQSxNQUNULEtBQUssT0FBTztBQUFBLE1BQ1osWUFBWSxNQUFNO0FBQUEsTUFDbEIsaUJBQWlCLFFBQVE7QUFBQSxNQUN6Qiw0QkFBNEIsWUFBWSxNQUFNLFdBQVc7QUFBQSxNQUN6RCx3QkFBd0IsWUFBWSxNQUFNLE9BQU87QUFBQSxNQUNqRCxnQkFBZ0IscUJBQXFCO0FBQUEsSUFDdkMsQ0FBQztBQUVELGdCQUFZLE1BQU0sYUFBYSxRQUFRO0FBQ3ZDLFFBQUkscUJBQXFCLGtCQUFrQjtBQUN6QyxpQkFBVztBQUFBLFFBQ1QsR0FBRztBQUFBLFFBQ0gsT0FBTyxzRUFBZ0IsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO0FBQUEsUUFDMUMsTUFBTSxpRUFBaUIsQ0FBQyxZQUFZLFlBQVksS0FBSztBQUFBLE1BQ3ZELENBQUM7QUFBQSxJQUNILE9BQU87QUFDTCxlQUFTO0FBQUEsUUFDUCxHQUFHO0FBQUEsUUFDSCxNQUFNLGlFQUFpQixDQUFDLFlBQVksWUFBWSxLQUFLO0FBQUEsTUFDdkQsQ0FBQztBQUFBLElBQ0g7QUFDQSwyQkFBdUIsSUFBSTtBQUMzQixZQUFRO0FBQUEsRUFDVjtBQUVBLFNBQ0UsMkVBQUMsK0NBQUssSUFBQyxRQUFnQixPQUFNLHlCQUF3QixXQUFXLFNBQVMsV0FBVyxPQUFPLFNBQ3pGLDJFQUFDLFNBQUksV0FBVyxPQUFPLFdBQVMsd0dBRWhDLEdBQ0MsT0FBTyxPQUFPLHdEQUFvQixFQUFFLElBQUksQ0FBQyxnQkFBZ0I7QUFDeEQsV0FDRTtBQUFBLE1BQUMsa0RBQVE7QUFBUjtBQUFBLFFBQ0MsS0FBSztBQUFBLFFBQ0wsT0FBTyxHQUFHLGtEQUFVLENBQUMsV0FBVztBQUFBLFFBQ2hDLFFBQVEsU0FBUyxTQUFTLFdBQVc7QUFBQSxRQUNyQyxhQUFhO0FBQUEsUUFDYixVQUFVLE1BQ1I7QUFBQSxVQUFZLENBQUM7QUFBQTtBQUFBLFlBRVgsS0FBSyxTQUFTLFdBQVcsSUFBSSxLQUFLLE9BQU8sQ0FBQyxNQUFNLE1BQU0sV0FBVyxJQUFJLENBQUMsR0FBRyxNQUFNLFdBQVc7QUFBQTtBQUFBLFFBQzVGO0FBQUE7QUFBQSxNQUdGLDJFQUFDLFNBQUksV0FBVyxPQUFPLGtCQUNwQixpRUFBaUIsQ0FDZixpQkFBaUIsRUFDakIsT0FBTyxDQUFDLFlBQVksUUFBUSxTQUFTLFdBQVcsRUFDaEQsSUFBSSxDQUFDLFlBQ0o7QUFBQSxRQUFDLHVEQUFZO0FBQVo7QUFBQSxVQUNDLEtBQUssUUFBUTtBQUFBLFVBQ2I7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBO0FBQUEsTUFDRixDQUNELENBQ0w7QUFBQSxJQUNGO0FBQUEsRUFFSixDQUFDLEdBQ0QsMkVBQUMsZ0RBQU0sSUFBQyxTQUFRLGFBQVksU0FBUyxXQUFTLE9BRTlDLENBQ0Y7QUFFSjtBQUVBLE1BQU0sWUFBWSxDQUFDLFVBQXlCO0FBQzFDLFNBQU87QUFBQSxJQUNMLGdCQUFnQixpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU1oQixTQUFTLGlEQUFHO0FBQUgsdUJBQ1UsTUFBTSxRQUFRLENBQUM7QUFBQTtBQUFBLElBRWxDLE9BQU8saURBQUc7QUFBSDtBQUFBLFFBRUgsTUFBTSxZQUFZLEtBQUssSUFBSTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSWpDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9xdWVyeWJ1aWxkZXIvY29tcG9uZW50cy9RdWVyeVBhdHRlcm5zTW9kYWwudHN4PzczMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCB7IGNhcGl0YWxpemUgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBDb3JlQXBwLCBEYXRhUXVlcnksIEdyYWZhbmFUaGVtZTIgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IHJlcG9ydEludGVyYWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyBCdXR0b24sIENvbGxhcHNlLCBNb2RhbCwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IGdldE5leHRSZWZJZENoYXIgfSBmcm9tICdhcHAvY29yZS91dGlscy9xdWVyeSc7XG5cbmltcG9ydCB7IExva2lRdWVyeSB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IGxva2lRdWVyeU1vZGVsbGVyIH0gZnJvbSAnLi4vTG9raVF1ZXJ5TW9kZWxsZXInO1xuaW1wb3J0IHsgYnVpbGRWaXN1YWxRdWVyeUZyb21TdHJpbmcgfSBmcm9tICcuLi9wYXJzaW5nJztcbmltcG9ydCB7IExva2lRdWVyeVBhdHRlcm4sIExva2lRdWVyeVBhdHRlcm5UeXBlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBRdWVyeVBhdHRlcm4gfSBmcm9tICcuL1F1ZXJ5UGF0dGVybic7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGlzT3BlbjogYm9vbGVhbjtcbiAgcXVlcnk6IExva2lRdWVyeTtcbiAgcXVlcmllczogRGF0YVF1ZXJ5W10gfCB1bmRlZmluZWQ7XG4gIGFwcD86IENvcmVBcHA7XG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG4gIG9uQ2hhbmdlOiAocXVlcnk6IExva2lRdWVyeSkgPT4gdm9pZDtcbiAgb25BZGRRdWVyeT86IChxdWVyeTogTG9raVF1ZXJ5KSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGNvbnN0IFF1ZXJ5UGF0dGVybnNNb2RhbCA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgY29uc3QgeyBpc09wZW4sIG9uQ2xvc2UsIG9uQ2hhbmdlLCBvbkFkZFF1ZXJ5LCBxdWVyeSwgcXVlcmllcywgYXBwIH0gPSBwcm9wcztcbiAgY29uc3QgW29wZW5UYWJzLCBzZXRPcGVuVGFic10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICBjb25zdCBbc2VsZWN0ZWRQYXR0ZXJuTmFtZSwgc2V0U2VsZWN0ZWRQYXR0ZXJuTmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG4gIGNvbnN0IGhhc05ld1F1ZXJ5T3B0aW9uID0gISFvbkFkZFF1ZXJ5O1xuICBjb25zdCBoYXNQcmV2aW91c1F1ZXJ5ID0gdXNlTWVtbyhcbiAgICAoKSA9PiBidWlsZFZpc3VhbFF1ZXJ5RnJvbVN0cmluZyhxdWVyeS5leHByKS5xdWVyeS5vcGVyYXRpb25zLmxlbmd0aCA+IDAsXG4gICAgW3F1ZXJ5LmV4cHJdXG4gICk7XG5cbiAgY29uc3Qgb25QYXR0ZXJuU2VsZWN0ID0gKHBhdHRlcm46IExva2lRdWVyeVBhdHRlcm4sIHNlbGVjdEFzTmV3UXVlcnkgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHZpc3VhbFF1ZXJ5ID0gYnVpbGRWaXN1YWxRdWVyeUZyb21TdHJpbmcoc2VsZWN0QXNOZXdRdWVyeSA/ICcnIDogcXVlcnkuZXhwcik7XG4gICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfbG9raV9xdWVyeV9wYXR0ZXJuc19zZWxlY3RlZCcsIHtcbiAgICAgIHZlcnNpb246ICd2MicsXG4gICAgICBhcHA6IGFwcCA/PyAnJyxcbiAgICAgIGVkaXRvck1vZGU6IHF1ZXJ5LmVkaXRvck1vZGUsXG4gICAgICBzZWxlY3RlZFBhdHRlcm46IHBhdHRlcm4ubmFtZSxcbiAgICAgIHByZVNlbGVjdGVkT3BlcmF0aW9uc0NvdW50OiB2aXN1YWxRdWVyeS5xdWVyeS5vcGVyYXRpb25zLmxlbmd0aCxcbiAgICAgIHByZVNlbGVjdGVkTGFiZWxzQ291bnQ6IHZpc3VhbFF1ZXJ5LnF1ZXJ5LmxhYmVscy5sZW5ndGgsXG4gICAgICBjcmVhdGVOZXdRdWVyeTogaGFzTmV3UXVlcnlPcHRpb24gJiYgc2VsZWN0QXNOZXdRdWVyeSxcbiAgICB9KTtcblxuICAgIHZpc3VhbFF1ZXJ5LnF1ZXJ5Lm9wZXJhdGlvbnMgPSBwYXR0ZXJuLm9wZXJhdGlvbnM7XG4gICAgaWYgKGhhc05ld1F1ZXJ5T3B0aW9uICYmIHNlbGVjdEFzTmV3UXVlcnkpIHtcbiAgICAgIG9uQWRkUXVlcnkoe1xuICAgICAgICAuLi5xdWVyeSxcbiAgICAgICAgcmVmSWQ6IGdldE5leHRSZWZJZENoYXIocXVlcmllcyA/PyBbcXVlcnldKSxcbiAgICAgICAgZXhwcjogbG9raVF1ZXJ5TW9kZWxsZXIucmVuZGVyUXVlcnkodmlzdWFsUXVlcnkucXVlcnkpLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgLi4ucXVlcnksXG4gICAgICAgIGV4cHI6IGxva2lRdWVyeU1vZGVsbGVyLnJlbmRlclF1ZXJ5KHZpc3VhbFF1ZXJ5LnF1ZXJ5KSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRTZWxlY3RlZFBhdHRlcm5OYW1lKG51bGwpO1xuICAgIG9uQ2xvc2UoKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxNb2RhbCBpc09wZW49e2lzT3Blbn0gdGl0bGU9XCJLaWNrIHN0YXJ0IHlvdXIgcXVlcnlcIiBvbkRpc21pc3M9e29uQ2xvc2V9IGNsYXNzTmFtZT17c3R5bGVzLm1vZGFsfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc3BhY2luZ30+XG4gICAgICAgIEtpY2sgc3RhcnQgeW91ciBxdWVyeSBieSBzZWxlY3Rpbmcgb25lIG9mIHRoZXNlIHF1ZXJpZXMuIFlvdSBjYW4gdGhlbiBjb250aW51ZSB0byBjb21wbGV0ZSB5b3VyIHF1ZXJ5LlxuICAgICAgPC9kaXY+XG4gICAgICB7T2JqZWN0LnZhbHVlcyhMb2tpUXVlcnlQYXR0ZXJuVHlwZSkubWFwKChwYXR0ZXJuVHlwZSkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxDb2xsYXBzZVxuICAgICAgICAgICAga2V5PXtwYXR0ZXJuVHlwZX1cbiAgICAgICAgICAgIGxhYmVsPXtgJHtjYXBpdGFsaXplKHBhdHRlcm5UeXBlKX0gcXVlcnkgc3RhcnRlcnNgfVxuICAgICAgICAgICAgaXNPcGVuPXtvcGVuVGFicy5pbmNsdWRlcyhwYXR0ZXJuVHlwZSl9XG4gICAgICAgICAgICBjb2xsYXBzaWJsZT17dHJ1ZX1cbiAgICAgICAgICAgIG9uVG9nZ2xlPXsoKSA9PlxuICAgICAgICAgICAgICBzZXRPcGVuVGFicygodGFicykgPT5cbiAgICAgICAgICAgICAgICAvLyBjbG9zZSB0YWIgaWYgaXQncyBhbHJlYWR5IG9wZW4sIG90aGVyd2lzZSBvcGVuIGl0XG4gICAgICAgICAgICAgICAgdGFicy5pbmNsdWRlcyhwYXR0ZXJuVHlwZSkgPyB0YWJzLmZpbHRlcigodCkgPT4gdCAhPT0gcGF0dGVyblR5cGUpIDogWy4uLnRhYnMsIHBhdHRlcm5UeXBlXVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jYXJkc0NvbnRhaW5lcn0+XG4gICAgICAgICAgICAgIHtsb2tpUXVlcnlNb2RlbGxlclxuICAgICAgICAgICAgICAgIC5nZXRRdWVyeVBhdHRlcm5zKClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChwYXR0ZXJuKSA9PiBwYXR0ZXJuLnR5cGUgPT09IHBhdHRlcm5UeXBlKVxuICAgICAgICAgICAgICAgIC5tYXAoKHBhdHRlcm4pID0+IChcbiAgICAgICAgICAgICAgICAgIDxRdWVyeVBhdHRlcm5cbiAgICAgICAgICAgICAgICAgICAga2V5PXtwYXR0ZXJuLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm49e3BhdHRlcm59XG4gICAgICAgICAgICAgICAgICAgIGhhc05ld1F1ZXJ5T3B0aW9uPXtoYXNOZXdRdWVyeU9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgaGFzUHJldmlvdXNRdWVyeT17aGFzUHJldmlvdXNRdWVyeX1cbiAgICAgICAgICAgICAgICAgICAgb25QYXR0ZXJuU2VsZWN0PXtvblBhdHRlcm5TZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUGF0dGVybk5hbWU9e3NlbGVjdGVkUGF0dGVybk5hbWV9XG4gICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkUGF0dGVybk5hbWU9e3NldFNlbGVjdGVkUGF0dGVybk5hbWV9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgICAgKTtcbiAgICAgIH0pfVxuICAgICAgPEJ1dHRvbiB2YXJpYW50PVwic2Vjb25kYXJ5XCIgb25DbGljaz17b25DbG9zZX0+XG4gICAgICAgIENsb3NlXG4gICAgICA8L0J1dHRvbj5cbiAgICA8L01vZGFsPlxuICApO1xufTtcblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiB7XG4gIHJldHVybiB7XG4gICAgY2FyZHNDb250YWluZXI6IGNzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGAsXG4gICAgc3BhY2luZzogY3NzYFxuICAgICAgbWFyZ2luLWJvdHRvbTogJHt0aGVtZS5zcGFjaW5nKDEpfTtcbiAgICBgLFxuICAgIG1vZGFsOiBjc3NgXG4gICAgICB3aWR0aDogODV2dztcbiAgICAgICR7dGhlbWUuYnJlYWtwb2ludHMuZG93bignbWQnKX0ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICBgLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/QueryPatternsModal.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/QueryPreview.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryPreview: () => (/* binding */ QueryPreview)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRow.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorFieldGroup.js\");\n/* harmony import */ var _prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/RawQuery.tsx\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/syntax.ts\");\n\n\n\n\n\nfunction QueryPreview({ query }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_3__.EditorRow, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_4__.EditorFieldGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_prometheus_querybuilder_shared_RawQuery__WEBPACK_IMPORTED_MODULE_1__.RawQuery, { query, lang: { grammar: _syntax__WEBPACK_IMPORTED_MODULE_2__.lokiGrammar, name: \"lokiql\" } })));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL1F1ZXJ5UHJldmlldy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0I7QUFFMEI7QUFFbkI7QUFDRztBQU1yQixTQUFTLGFBQWEsRUFBRSxNQUFNLEdBQVU7QUFDN0MsU0FDRSwyRUFBQyw0REFBUyxRQUNSLDJFQUFDLG1FQUFnQixRQUNmLDJFQUFDLDhFQUFRLElBQUMsT0FBYyxNQUFNLEVBQUUsU0FBUyxnREFBVyxFQUFFLE1BQU0sU0FBUyxHQUFHLENBQzFFLENBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL1F1ZXJ5UHJldmlldy50c3g/OWMxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBFZGl0b3JSb3csIEVkaXRvckZpZWxkR3JvdXAgfSBmcm9tICdAZ3JhZmFuYS9leHBlcmltZW50YWwnO1xuXG5pbXBvcnQgeyBSYXdRdWVyeSB9IGZyb20gJy4uLy4uLy4uL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9SYXdRdWVyeSc7XG5pbXBvcnQgeyBsb2tpR3JhbW1hciB9IGZyb20gJy4uLy4uL3N5bnRheCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICBxdWVyeTogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlQcmV2aWV3KHsgcXVlcnkgfTogUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8RWRpdG9yUm93PlxuICAgICAgPEVkaXRvckZpZWxkR3JvdXA+XG4gICAgICAgIDxSYXdRdWVyeSBxdWVyeT17cXVlcnl9IGxhbmc9e3sgZ3JhbW1hcjogbG9raUdyYW1tYXIsIG5hbWU6ICdsb2tpcWwnIH19IC8+XG4gICAgICA8L0VkaXRvckZpZWxkR3JvdXA+XG4gICAgPC9FZGl0b3JSb3c+XG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/QueryPreview.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/components/UnwrapParamEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UnwrapParamEditor: () => (/* binding */ UnwrapParamEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/selectUtils.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/operationUtils.ts\");\n/* harmony import */ var _components_monaco_query_field_monaco_completion_provider_validation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/monaco-query-field/monaco-completion-provider/validation.ts\");\n/* harmony import */ var _datasource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/datasource.ts\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _responseUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/responseUtils.ts\");\n/* harmony import */ var _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/LokiQueryModeller.ts\");\n\n\n\n\n\n\n\n\n\n\nfunction UnwrapParamEditor({\n  onChange,\n  index,\n  operationIndex,\n  value,\n  query,\n  datasource\n}) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Select,\n    {\n      inputId: (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getOperationParamId)(operationIndex, index),\n      onOpenMenu: async () => {\n        if (datasource instanceof _datasource__WEBPACK_IMPORTED_MODULE_3__.LokiDatasource) {\n          setState({ isLoading: true });\n          const options = await loadUnwrapOptions(query, datasource);\n          setState({ options, isLoading: void 0 });\n        }\n      },\n      isLoading: state.isLoading,\n      allowCustomValue: true,\n      noOptionsMessage: \"No labels found\",\n      loadingMessage: \"Loading labels\",\n      options: state.options,\n      value: value ? (0,_grafana_data__WEBPACK_IMPORTED_MODULE_8__.toOption)(value.toString()) : null,\n      onChange: (value2) => {\n        if (value2.value) {\n          onChange(index, value2.value);\n        }\n      }\n    }\n  );\n}\nasync function loadUnwrapOptions(query, datasource) {\n  const queryExpr = _LokiQueryModeller__WEBPACK_IMPORTED_MODULE_6__.lokiQueryModeller.renderQuery(query);\n  const logExpr = (0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.getLogQueryFromMetricsQuery)(queryExpr);\n  if ((0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.isQueryWithError)(datasource.interpolateString(logExpr, _components_monaco_query_field_monaco_completion_provider_validation__WEBPACK_IMPORTED_MODULE_2__.placeHolderScopedVars))) {\n    return [];\n  }\n  const samples = await datasource.getDataSamples({ expr: logExpr, refId: \"unwrap_samples\" });\n  const unwrapLabels = (0,_responseUtils__WEBPACK_IMPORTED_MODULE_5__.extractUnwrapLabelKeysFromDataFrame)(samples[0]);\n  const labelOptions = unwrapLabels.map((label) => ({\n    label,\n    value: label\n  }));\n  return labelOptions;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL1Vud3JhcFBhcmFtRWRpdG9yLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBZ0M7QUFFVTtBQUNuQjtBQUVhO0FBRUU7QUFDUDtBQUMrQjtBQUNWO0FBQ2xCO0FBRzNCLFNBQVMsa0JBQWtCO0FBQUEsRUFDaEM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGLEdBQTBDO0FBQ3hDLFFBQU0sQ0FBQyxPQUFPLFFBQVEsSUFBSSwrQ0FBUSxDQUcvQixDQUFDLENBQUM7QUFFTCxTQUNFO0FBQUEsSUFBQywrQ0FBTTtBQUFOO0FBQUEsTUFDQyxTQUFTLG1HQUFtQixDQUFDLGdCQUFnQixLQUFLO0FBQUEsTUFDbEQsWUFBWSxZQUFZO0FBRXRCLFlBQUksc0JBQXNCLHVEQUFjLEVBQUU7QUFDeEMsbUJBQVMsRUFBRSxXQUFXLEtBQUssQ0FBQztBQUM1QixnQkFBTSxVQUFVLE1BQU0sa0JBQWtCLE9BQU8sVUFBVTtBQUN6RCxtQkFBUyxFQUFFLFNBQVMsV0FBVyxPQUFVLENBQUM7QUFBQSxRQUM1QztBQUFBLE1BQ0Y7QUFBQSxNQUNBLFdBQVcsTUFBTTtBQUFBLE1BQ2pCLGtCQUFnQjtBQUFBLE1BQ2hCLGtCQUFpQjtBQUFBLE1BQ2pCLGdCQUFlO0FBQUEsTUFDZixTQUFTLE1BQU07QUFBQSxNQUNmLE9BQU8sUUFBUSx1REFBUSxDQUFDLE1BQU0sU0FBUyxDQUFDLElBQUk7QUFBQSxNQUM1QyxVQUFVLENBQUNBLFdBQVU7QUFDbkIsWUFBSUEsT0FBTSxPQUFPO0FBQ2YsbUJBQVMsT0FBT0EsT0FBTSxLQUFLO0FBQUEsUUFDN0I7QUFBQSxNQUNGO0FBQUE7QUFBQSxFQUNGO0FBRUo7QUFFQSxlQUFlLGtCQUNiLE9BQ0EsWUFDeUM7QUFDekMsUUFBTSxZQUFZLGlFQUFpQixDQUFDLFlBQVksS0FBSztBQUNyRCxRQUFNLFVBQVUsd0VBQTJCLENBQUMsU0FBUztBQUNyRCxNQUFJLDZEQUFnQixDQUFDLFdBQVcsa0JBQWtCLFNBQVMsdUhBQXFCLENBQUMsR0FBRztBQUNsRixXQUFPLENBQUM7QUFBQSxFQUNWO0FBRUEsUUFBTSxVQUFVLE1BQU0sV0FBVyxlQUFlLEVBQUUsTUFBTSxTQUFTLE9BQU8saUJBQWlCLENBQUM7QUFDMUYsUUFBTSxlQUFlLG1GQUFtQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBRW5FLFFBQU0sZUFBZSxhQUFhLElBQUksQ0FBQyxXQUFXO0FBQUEsSUFDaEQ7QUFBQSxJQUNBLE9BQU87QUFBQSxFQUNULEVBQUU7QUFFRixTQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9xdWVyeWJ1aWxkZXIvY29tcG9uZW50cy9VbndyYXBQYXJhbUVkaXRvci50c3g/ODRhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IFNlbGVjdGFibGVWYWx1ZSwgdG9PcHRpb24gfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IFNlbGVjdCB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgZ2V0T3BlcmF0aW9uUGFyYW1JZCB9IGZyb20gJy4uLy4uLy4uL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9vcGVyYXRpb25VdGlscyc7XG5pbXBvcnQgeyBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbUVkaXRvclByb3BzIH0gZnJvbSAnLi4vLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL3R5cGVzJztcbmltcG9ydCB7IHBsYWNlSG9sZGVyU2NvcGVkVmFycyB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvbW9uYWNvLXF1ZXJ5LWZpZWxkL21vbmFjby1jb21wbGV0aW9uLXByb3ZpZGVyL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHsgTG9raURhdGFzb3VyY2UgfSBmcm9tICcuLi8uLi9kYXRhc291cmNlJztcbmltcG9ydCB7IGdldExvZ1F1ZXJ5RnJvbU1ldHJpY3NRdWVyeSwgaXNRdWVyeVdpdGhFcnJvciB9IGZyb20gJy4uLy4uL3F1ZXJ5VXRpbHMnO1xuaW1wb3J0IHsgZXh0cmFjdFVud3JhcExhYmVsS2V5c0Zyb21EYXRhRnJhbWUgfSBmcm9tICcuLi8uLi9yZXNwb25zZVV0aWxzJztcbmltcG9ydCB7IGxva2lRdWVyeU1vZGVsbGVyIH0gZnJvbSAnLi4vTG9raVF1ZXJ5TW9kZWxsZXInO1xuaW1wb3J0IHsgTG9raVZpc3VhbFF1ZXJ5IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gVW53cmFwUGFyYW1FZGl0b3Ioe1xuICBvbkNoYW5nZSxcbiAgaW5kZXgsXG4gIG9wZXJhdGlvbkluZGV4LFxuICB2YWx1ZSxcbiAgcXVlcnksXG4gIGRhdGFzb3VyY2UsXG59OiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbUVkaXRvclByb3BzKSB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8e1xuICAgIG9wdGlvbnM/OiBBcnJheTxTZWxlY3RhYmxlVmFsdWU8c3RyaW5nPj47XG4gICAgaXNMb2FkaW5nPzogYm9vbGVhbjtcbiAgfT4oe30pO1xuXG4gIHJldHVybiAoXG4gICAgPFNlbGVjdFxuICAgICAgaW5wdXRJZD17Z2V0T3BlcmF0aW9uUGFyYW1JZChvcGVyYXRpb25JbmRleCwgaW5kZXgpfVxuICAgICAgb25PcGVuTWVudT17YXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBUaGlzIGNoZWNrIGlzIGFsd2F5cyB0cnVlLCB3ZSBkbyBpdCB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHlcbiAgICAgICAgaWYgKGRhdGFzb3VyY2UgaW5zdGFuY2VvZiBMb2tpRGF0YXNvdXJjZSkge1xuICAgICAgICAgIHNldFN0YXRlKHsgaXNMb2FkaW5nOiB0cnVlIH0pO1xuICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBsb2FkVW53cmFwT3B0aW9ucyhxdWVyeSwgZGF0YXNvdXJjZSk7XG4gICAgICAgICAgc2V0U3RhdGUoeyBvcHRpb25zLCBpc0xvYWRpbmc6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIGlzTG9hZGluZz17c3RhdGUuaXNMb2FkaW5nfVxuICAgICAgYWxsb3dDdXN0b21WYWx1ZVxuICAgICAgbm9PcHRpb25zTWVzc2FnZT1cIk5vIGxhYmVscyBmb3VuZFwiXG4gICAgICBsb2FkaW5nTWVzc2FnZT1cIkxvYWRpbmcgbGFiZWxzXCJcbiAgICAgIG9wdGlvbnM9e3N0YXRlLm9wdGlvbnN9XG4gICAgICB2YWx1ZT17dmFsdWUgPyB0b09wdGlvbih2YWx1ZS50b1N0cmluZygpKSA6IG51bGx9XG4gICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZS52YWx1ZSkge1xuICAgICAgICAgIG9uQ2hhbmdlKGluZGV4LCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgLz5cbiAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9hZFVud3JhcE9wdGlvbnMoXG4gIHF1ZXJ5OiBMb2tpVmlzdWFsUXVlcnksXG4gIGRhdGFzb3VyY2U6IExva2lEYXRhc291cmNlXG4pOiBQcm9taXNlPEFycmF5PFNlbGVjdGFibGVWYWx1ZTxzdHJpbmc+Pj4ge1xuICBjb25zdCBxdWVyeUV4cHIgPSBsb2tpUXVlcnlNb2RlbGxlci5yZW5kZXJRdWVyeShxdWVyeSk7XG4gIGNvbnN0IGxvZ0V4cHIgPSBnZXRMb2dRdWVyeUZyb21NZXRyaWNzUXVlcnkocXVlcnlFeHByKTtcbiAgaWYgKGlzUXVlcnlXaXRoRXJyb3IoZGF0YXNvdXJjZS5pbnRlcnBvbGF0ZVN0cmluZyhsb2dFeHByLCBwbGFjZUhvbGRlclNjb3BlZFZhcnMpKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IHNhbXBsZXMgPSBhd2FpdCBkYXRhc291cmNlLmdldERhdGFTYW1wbGVzKHsgZXhwcjogbG9nRXhwciwgcmVmSWQ6ICd1bndyYXBfc2FtcGxlcycgfSk7XG4gIGNvbnN0IHVud3JhcExhYmVscyA9IGV4dHJhY3RVbndyYXBMYWJlbEtleXNGcm9tRGF0YUZyYW1lKHNhbXBsZXNbMF0pO1xuXG4gIGNvbnN0IGxhYmVsT3B0aW9ucyA9IHVud3JhcExhYmVscy5tYXAoKGxhYmVsKSA9PiAoe1xuICAgIGxhYmVsLFxuICAgIHZhbHVlOiBsYWJlbCxcbiAgfSkpO1xuXG4gIHJldHVybiBsYWJlbE9wdGlvbnM7XG59XG4iXSwibmFtZXMiOlsidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/components/UnwrapParamEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/operationUtils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addLokiOperation: () => (/* binding */ addLokiOperation),\n/* harmony export */   addNestedQueryHandler: () => (/* binding */ addNestedQueryHandler),\n/* harmony export */   createRangeOperation: () => (/* binding */ createRangeOperation),\n/* harmony export */   createRangeOperationWithGrouping: () => (/* binding */ createRangeOperationWithGrouping),\n/* harmony export */   getLineFilterRenderer: () => (/* binding */ getLineFilterRenderer),\n/* harmony export */   getRangeAggregationWithGroupingRenderer: () => (/* binding */ getRangeAggregationWithGroupingRenderer),\n/* harmony export */   isConflictingFilter: () => (/* binding */ isConflictingFilter),\n/* harmony export */   labelFilterRenderer: () => (/* binding */ labelFilterRenderer),\n/* harmony export */   pipelineRenderer: () => (/* binding */ pipelineRenderer)\n/* harmony export */ });\n/* harmony import */ var _prometheus_querybuilder_components_LabelParamEditor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/components/LabelParamEditor.tsx\");\n/* harmony import */ var _prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/operationUtils.ts\");\n/* harmony import */ var _syntax__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/syntax.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n\n\n\n\n\nfunction createRangeOperation(name, isRangeOperationWithGrouping) {\n  const params = [getRangeVectorParamDef()];\n  const defaultParams = [\"$__interval\"];\n  let paramChangedHandler = void 0;\n  if (name === _types__WEBPACK_IMPORTED_MODULE_3__.LokiOperationId.QuantileOverTime) {\n    defaultParams.push(\"0.95\");\n    params.push({\n      name: \"Quantile\",\n      type: \"number\"\n    });\n  }\n  if (isRangeOperationWithGrouping) {\n    params.push({\n      name: \"By label\",\n      type: \"string\",\n      restParam: true,\n      optional: true\n    });\n    paramChangedHandler = (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getOnLabelAddedHandler)(`__${name}_by`);\n  }\n  return {\n    id: name,\n    name: (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getPromAndLokiOperationDisplayName)(name),\n    params,\n    defaultParams,\n    alternativesKey: \"range function\",\n    category: _types__WEBPACK_IMPORTED_MODULE_3__.LokiVisualQueryOperationCategory.RangeFunctions,\n    orderRank: _types__WEBPACK_IMPORTED_MODULE_3__.LokiOperationOrder.RangeVectorFunction,\n    renderer: operationWithRangeVectorRenderer,\n    addOperationHandler: addLokiOperation,\n    paramChangedHandler,\n    explainHandler: (op, def) => {\n      let opDocs = _syntax__WEBPACK_IMPORTED_MODULE_2__.FUNCTIONS.find((x) => x.insertText === op.id)?.documentation ?? \"\";\n      if (op.params[0] === \"$__interval\") {\n        return `${opDocs} \\`$__interval\\` is a variable that will be replaced with the [calculated interval](https://grafana.com/docs/grafana/latest/dashboards/variables/add-template-variables/#__interval) based on the time range and width of the graph. In Dashboards, you can affect the interval variable using **Max data points** and **Min interval**. You can find these options under **Query options** right of the data source select dropdown.`;\n      } else {\n        return `${opDocs} The [range vector](https://grafana.com/docs/loki/latest/logql/metric_queries/#range-vector-aggregation) is set to \\`${op.params[0]}\\`.`;\n      }\n    }\n  };\n}\nfunction createRangeOperationWithGrouping(name) {\n  const rangeOperation = createRangeOperation(name, true);\n  const params = rangeOperation.params.slice(0, -1);\n  const operations = [\n    rangeOperation,\n    {\n      id: `__${name}_by`,\n      name: `${(0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getPromAndLokiOperationDisplayName)(name)} by`,\n      params: [\n        ...params,\n        {\n          name: \"Label\",\n          type: \"string\",\n          restParam: true,\n          optional: true,\n          editor: _prometheus_querybuilder_components_LabelParamEditor__WEBPACK_IMPORTED_MODULE_0__.LabelParamEditor\n        }\n      ],\n      defaultParams: [...rangeOperation.defaultParams, \"\"],\n      alternativesKey: \"range function with grouping\",\n      category: _types__WEBPACK_IMPORTED_MODULE_3__.LokiVisualQueryOperationCategory.RangeFunctions,\n      renderer: getRangeAggregationWithGroupingRenderer(name, \"by\"),\n      paramChangedHandler: (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getLastLabelRemovedHandler)(name),\n      explainHandler: (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getAggregationExplainer)(name, \"by\"),\n      addOperationHandler: addLokiOperation,\n      hideFromList: true\n    },\n    {\n      id: `__${name}_without`,\n      name: `${(0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getPromAndLokiOperationDisplayName)(name)} without`,\n      params: [\n        ...params,\n        {\n          name: \"Label\",\n          type: \"string\",\n          restParam: true,\n          optional: true,\n          editor: _prometheus_querybuilder_components_LabelParamEditor__WEBPACK_IMPORTED_MODULE_0__.LabelParamEditor\n        }\n      ],\n      defaultParams: [...rangeOperation.defaultParams, \"\"],\n      alternativesKey: \"range function with grouping\",\n      category: _types__WEBPACK_IMPORTED_MODULE_3__.LokiVisualQueryOperationCategory.RangeFunctions,\n      renderer: getRangeAggregationWithGroupingRenderer(name, \"without\"),\n      paramChangedHandler: (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getLastLabelRemovedHandler)(name),\n      explainHandler: (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_1__.getAggregationExplainer)(name, \"without\"),\n      addOperationHandler: addLokiOperation,\n      hideFromList: true\n    }\n  ];\n  return operations;\n}\nfunction getRangeAggregationWithGroupingRenderer(aggregation, grouping) {\n  return function aggregationRenderer(model, def, innerExpr) {\n    const restParamIndex = def.params.findIndex((param) => param.restParam);\n    const params = model.params.slice(0, restParamIndex);\n    const restParams = model.params.slice(restParamIndex);\n    if (params.length === 2 && aggregation === _types__WEBPACK_IMPORTED_MODULE_3__.LokiOperationId.QuantileOverTime) {\n      return `${aggregation}(${params[1]}, ${innerExpr} [${params[0]}]) ${grouping} (${restParams.join(\", \")})`;\n    }\n    return `${aggregation}(${innerExpr} [${params[0]}]) ${grouping} (${restParams.join(\", \")})`;\n  };\n}\nfunction operationWithRangeVectorRenderer(model, def, innerExpr) {\n  const params = model.params ?? [];\n  const rangeVector = params[0] ?? \"$__interval\";\n  if (params.length === 2 && model.id === _types__WEBPACK_IMPORTED_MODULE_3__.LokiOperationId.QuantileOverTime) {\n    const quantile = params[1];\n    return `${model.id}(${quantile}, ${innerExpr} [${rangeVector}])`;\n  }\n  return `${model.id}(${innerExpr} [${params[0] ?? \"$__interval\"}])`;\n}\nfunction labelFilterRenderer(model, def, innerExpr) {\n  const integerOperators = [\"<\", \"<=\", \">\", \">=\"];\n  if (integerOperators.includes(String(model.params[1]))) {\n    return `${innerExpr} | ${model.params[0]} ${model.params[1]} ${model.params[2]}`;\n  }\n  return `${innerExpr} | ${model.params[0]} ${model.params[1]} \\`${model.params[2]}\\``;\n}\nfunction isConflictingFilter(operation, queryOperations) {\n  const operationIsNegative = operation.params[1].toString().startsWith(\"!\");\n  const candidates = queryOperations.filter(\n    (queryOperation) => queryOperation.id === _types__WEBPACK_IMPORTED_MODULE_3__.LokiOperationId.LabelFilter && queryOperation.params[0] === operation.params[0] && queryOperation.params[2] === operation.params[2]\n  );\n  const conflict = candidates.some((candidate) => {\n    if (operationIsNegative && candidate.params[1].toString().startsWith(\"!\") === false) {\n      return true;\n    }\n    if (operationIsNegative === false && candidate.params[1].toString().startsWith(\"!\")) {\n      return true;\n    }\n    return false;\n  });\n  return conflict;\n}\nfunction pipelineRenderer(model, def, innerExpr) {\n  return `${innerExpr} | ${model.id}`;\n}\nfunction isRangeVectorFunction(def) {\n  return def.category === _types__WEBPACK_IMPORTED_MODULE_3__.LokiVisualQueryOperationCategory.RangeFunctions;\n}\nfunction getIndexOfOrLast(operations, queryModeller, condition) {\n  const index = operations.findIndex((x) => {\n    const opDef = queryModeller.getOperationDef(x.id);\n    if (!opDef) {\n      return false;\n    }\n    return condition(opDef);\n  });\n  return index === -1 ? operations.length : index;\n}\nfunction addLokiOperation(def, query, modeller) {\n  const newOperation = {\n    id: def.id,\n    params: def.defaultParams\n  };\n  const operations = [...query.operations];\n  const existingRangeVectorFunction = operations.find((x) => {\n    const opDef = modeller.getOperationDef(x.id);\n    if (!opDef) {\n      return false;\n    }\n    return isRangeVectorFunction(opDef);\n  });\n  switch (def.category) {\n    case _types__WEBPACK_IMPORTED_MODULE_3__.LokiVisualQueryOperationCategory.Aggregations:\n    case _types__WEBPACK_IMPORTED_MODULE_3__.LokiVisualQueryOperationCategory.Functions:\n      if (!existingRangeVectorFunction) {\n        const placeToInsert2 = getIndexOfOrLast(\n          operations,\n          modeller,\n          (def2) => def2.category === _types__WEBPACK_IMPORTED_MODULE_3__.LokiVisualQueryOperationCategory.Functions\n        );\n        operations.splice(placeToInsert2, 0, { id: _types__WEBPACK_IMPORTED_MODULE_3__.LokiOperationId.Rate, params: [\"$__interval\"] });\n      }\n      operations.push(newOperation);\n      break;\n    case _types__WEBPACK_IMPORTED_MODULE_3__.LokiVisualQueryOperationCategory.RangeFunctions:\n      if (existingRangeVectorFunction) {\n        const index = operations.indexOf(existingRangeVectorFunction);\n        operations[index] = newOperation;\n        break;\n      }\n    default:\n      const placeToInsert = getIndexOfOrLast(\n        operations,\n        modeller,\n        (x) => (def.orderRank ?? 100) < (x.orderRank ?? 100)\n      );\n      operations.splice(placeToInsert, 0, newOperation);\n      break;\n  }\n  return {\n    ...query,\n    operations\n  };\n}\nfunction addNestedQueryHandler(def, query) {\n  return {\n    ...query,\n    binaryQueries: [\n      ...query.binaryQueries ?? [],\n      {\n        operator: \"/\",\n        query\n      }\n    ]\n  };\n}\nfunction getLineFilterRenderer(operation, caseInsensitive) {\n  return function lineFilterRenderer(model, def, innerExpr) {\n    if (caseInsensitive) {\n      return `${innerExpr} ${operation} \\`(?i)${model.params[0]}\\``;\n    }\n    return `${innerExpr} ${operation} \\`${model.params[0]}\\``;\n  };\n}\nfunction getRangeVectorParamDef() {\n  return {\n    name: \"Range\",\n    type: \"string\",\n    options: [\"$__interval\", \"$__range\", \"1m\", \"5m\", \"10m\", \"1h\", \"24h\"]\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9vcGVyYXRpb25VdGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFpQztBQU0xQjtBQU9tQjtBQUU2RTtBQUVoRyxTQUFTLHFCQUFxQixNQUFjLDhCQUFrRTtBQUNuSCxRQUFNLFNBQVMsQ0FBQyx1QkFBdUIsQ0FBQztBQUN4QyxRQUFNLGdCQUFnQixDQUFDLGFBQWE7QUFDcEMsTUFBSSxzQkFBc0I7QUFFMUIsTUFBSSxTQUFTLG1EQUFlLENBQUMsa0JBQWtCO0FBQzdDLGtCQUFjLEtBQUssTUFBTTtBQUN6QixXQUFPLEtBQUs7QUFBQSxNQUNWLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxJQUNSLENBQUM7QUFBQSxFQUNIO0FBRUEsTUFBSSw4QkFBOEI7QUFDaEMsV0FBTyxLQUFLO0FBQUEsTUFDVixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixXQUFXO0FBQUEsTUFDWCxVQUFVO0FBQUEsSUFDWixDQUFDO0FBRUQsMEJBQXNCLHNHQUFzQixDQUFDLEtBQUssU0FBUztBQUFBLEVBQzdEO0FBRUEsU0FBTztBQUFBLElBQ0wsSUFBSTtBQUFBLElBQ0osTUFBTSxrSEFBa0MsQ0FBQyxJQUFJO0FBQUEsSUFDN0M7QUFBQSxJQUNBO0FBQUEsSUFDQSxpQkFBaUI7QUFBQSxJQUNqQixVQUFVLG9FQUFnQyxDQUFDO0FBQUEsSUFDM0MsV0FBVyxzREFBa0IsQ0FBQztBQUFBLElBQzlCLFVBQVU7QUFBQSxJQUNWLHFCQUFxQjtBQUFBLElBQ3JCO0FBQUEsSUFDQSxnQkFBZ0IsQ0FBQyxJQUFJLFFBQVE7QUFDM0IsVUFBSSxTQUFTLDhDQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxlQUFlLEdBQUcsRUFBRSxHQUFHLGlCQUFpQjtBQUU3RSxVQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sZUFBZTtBQUNsQyxlQUFPLEdBQUc7QUFBQSxNQUNaLE9BQU87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QUFDL0IsY0FBTSxRQUFRLFdBQVcsUUFBUSwyQkFBMkI7QUFDNUQsbUJBQVcsS0FBSyxJQUFJO0FBQ3BCO0FBQUEsTUFDRjtBQUFBLElBR0Y7QUFDRSxZQUFNLGdCQUFnQjtBQUFBLFFBQ3BCO0FBQUEsUUFDQTtBQUFBLFFBQ0EsQ0FBQyxPQUFPLElBQUksYUFBYSxRQUFRLEVBQUUsYUFBYTtBQUFBLE1BQ2xEO0FBQ0EsaUJBQVcsT0FBTyxlQUFlLEdBQUcsWUFBWTtBQUNoRDtBQUFBLEVBQ0o7QUFFQSxTQUFPO0FBQUEsSUFDTCxHQUFHO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFDRjtBQUVPLFNBQVMsc0JBQXNCLEtBQStCLE9BQXlDO0FBQzVHLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNILGVBQWU7QUFBQSxNQUNiLEdBQUksTUFBTSxpQkFBaUIsQ0FBQztBQUFBLE1BQzVCO0FBQUEsUUFDRSxVQUFVO0FBQUEsUUFDVjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGO0FBRU8sU0FBUyxzQkFBc0IsV0FBbUIsaUJBQTJCO0FBQ2xGLFNBQU8sU0FBUyxtQkFBbUIsT0FBOEIsS0FBK0IsV0FBbUI7QUFDakgsUUFBSSxpQkFBaUI7QUFDbkIsYUFBTyxHQUFHLGFBQWEsbUJBQW1CLE1BQU0sT0FBTyxDQUFDO0FBQUEsSUFDMUQ7QUFDQSxXQUFPLEdBQUcsYUFBYSxlQUFlLE1BQU0sT0FBTyxDQUFDO0FBQUEsRUFDdEQ7QUFDRjtBQUVBLFNBQVMseUJBQXdEO0FBQy9ELFNBQU87QUFBQSxJQUNMLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLFNBQVMsQ0FBQyxlQUFlLFlBQVksTUFBTSxNQUFNLE9BQU8sTUFBTSxLQUFLO0FBQUEsRUFDckU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9vcGVyYXRpb25VdGlscy50cz9jNGUzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExhYmVsUGFyYW1FZGl0b3IgfSBmcm9tICcuLi8uLi9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9jb21wb25lbnRzL0xhYmVsUGFyYW1FZGl0b3InO1xuaW1wb3J0IHtcbiAgZ2V0QWdncmVnYXRpb25FeHBsYWluZXIsXG4gIGdldExhc3RMYWJlbFJlbW92ZWRIYW5kbGVyLFxuICBnZXRPbkxhYmVsQWRkZWRIYW5kbGVyLFxuICBnZXRQcm9tQW5kTG9raU9wZXJhdGlvbkRpc3BsYXlOYW1lLFxufSBmcm9tICcuLi8uLi9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvb3BlcmF0aW9uVXRpbHMnO1xuaW1wb3J0IHtcbiAgUXVlcnlCdWlsZGVyT3BlcmF0aW9uLFxuICBRdWVyeUJ1aWxkZXJPcGVyYXRpb25EZWYsXG4gIFF1ZXJ5QnVpbGRlck9wZXJhdGlvblBhcmFtRGVmLFxuICBWaXN1YWxRdWVyeU1vZGVsbGVyLFxufSBmcm9tICcuLi8uLi9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvdHlwZXMnO1xuaW1wb3J0IHsgRlVOQ1RJT05TIH0gZnJvbSAnLi4vc3ludGF4JztcblxuaW1wb3J0IHsgTG9raU9wZXJhdGlvbklkLCBMb2tpT3BlcmF0aW9uT3JkZXIsIExva2lWaXN1YWxRdWVyeSwgTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJhbmdlT3BlcmF0aW9uKG5hbWU6IHN0cmluZywgaXNSYW5nZU9wZXJhdGlvbldpdGhHcm91cGluZz86IGJvb2xlYW4pOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25EZWYge1xuICBjb25zdCBwYXJhbXMgPSBbZ2V0UmFuZ2VWZWN0b3JQYXJhbURlZigpXTtcbiAgY29uc3QgZGVmYXVsdFBhcmFtcyA9IFsnJF9faW50ZXJ2YWwnXTtcbiAgbGV0IHBhcmFtQ2hhbmdlZEhhbmRsZXIgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKG5hbWUgPT09IExva2lPcGVyYXRpb25JZC5RdWFudGlsZU92ZXJUaW1lKSB7XG4gICAgZGVmYXVsdFBhcmFtcy5wdXNoKCcwLjk1Jyk7XG4gICAgcGFyYW1zLnB1c2goe1xuICAgICAgbmFtZTogJ1F1YW50aWxlJyxcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGlzUmFuZ2VPcGVyYXRpb25XaXRoR3JvdXBpbmcpIHtcbiAgICBwYXJhbXMucHVzaCh7XG4gICAgICBuYW1lOiAnQnkgbGFiZWwnLFxuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICByZXN0UGFyYW06IHRydWUsXG4gICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHBhcmFtQ2hhbmdlZEhhbmRsZXIgPSBnZXRPbkxhYmVsQWRkZWRIYW5kbGVyKGBfXyR7bmFtZX1fYnlgKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaWQ6IG5hbWUsXG4gICAgbmFtZTogZ2V0UHJvbUFuZExva2lPcGVyYXRpb25EaXNwbGF5TmFtZShuYW1lKSxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICBkZWZhdWx0UGFyYW1zLFxuICAgIGFsdGVybmF0aXZlc0tleTogJ3JhbmdlIGZ1bmN0aW9uJyxcbiAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuUmFuZ2VGdW5jdGlvbnMsXG4gICAgb3JkZXJSYW5rOiBMb2tpT3BlcmF0aW9uT3JkZXIuUmFuZ2VWZWN0b3JGdW5jdGlvbixcbiAgICByZW5kZXJlcjogb3BlcmF0aW9uV2l0aFJhbmdlVmVjdG9yUmVuZGVyZXIsXG4gICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICBwYXJhbUNoYW5nZWRIYW5kbGVyLFxuICAgIGV4cGxhaW5IYW5kbGVyOiAob3AsIGRlZikgPT4ge1xuICAgICAgbGV0IG9wRG9jcyA9IEZVTkNUSU9OUy5maW5kKCh4KSA9PiB4Lmluc2VydFRleHQgPT09IG9wLmlkKT8uZG9jdW1lbnRhdGlvbiA/PyAnJztcblxuICAgICAgaWYgKG9wLnBhcmFtc1swXSA9PT0gJyRfX2ludGVydmFsJykge1xuICAgICAgICByZXR1cm4gYCR7b3BEb2NzfSBcXGAkX19pbnRlcnZhbFxcYCBpcyBhIHZhcmlhYmxlIHRoYXQgd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBbY2FsY3VsYXRlZCBpbnRlcnZhbF0oaHR0cHM6Ly9ncmFmYW5hLmNvbS9kb2NzL2dyYWZhbmEvbGF0ZXN0L2Rhc2hib2FyZHMvdmFyaWFibGVzL2FkZC10ZW1wbGF0ZS12YXJpYWJsZXMvI19faW50ZXJ2YWwpIGJhc2VkIG9uIHRoZSB0aW1lIHJhbmdlIGFuZCB3aWR0aCBvZiB0aGUgZ3JhcGguIEluIERhc2hib2FyZHMsIHlvdSBjYW4gYWZmZWN0IHRoZSBpbnRlcnZhbCB2YXJpYWJsZSB1c2luZyAqKk1heCBkYXRhIHBvaW50cyoqIGFuZCAqKk1pbiBpbnRlcnZhbCoqLiBZb3UgY2FuIGZpbmQgdGhlc2Ugb3B0aW9ucyB1bmRlciAqKlF1ZXJ5IG9wdGlvbnMqKiByaWdodCBvZiB0aGUgZGF0YSBzb3VyY2Ugc2VsZWN0IGRyb3Bkb3duLmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYCR7b3BEb2NzfSBUaGUgW3JhbmdlIHZlY3Rvcl0oaHR0cHM6Ly9ncmFmYW5hLmNvbS9kb2NzL2xva2kvbGF0ZXN0L2xvZ3FsL21ldHJpY19xdWVyaWVzLyNyYW5nZS12ZWN0b3ItYWdncmVnYXRpb24pIGlzIHNldCB0byBcXGAke29wLnBhcmFtc1swXX1cXGAuYDtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmFuZ2VPcGVyYXRpb25XaXRoR3JvdXBpbmcobmFtZTogc3RyaW5nKTogUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmW10ge1xuICBjb25zdCByYW5nZU9wZXJhdGlvbiA9IGNyZWF0ZVJhbmdlT3BlcmF0aW9uKG5hbWUsIHRydWUpO1xuICAvLyBDb3B5IHJhbmdlIG9wZXJhdGlvbiBwYXJhbXMgd2l0aG91dCB0aGUgbGFzdCBwYXJhbVxuICBjb25zdCBwYXJhbXMgPSByYW5nZU9wZXJhdGlvbi5wYXJhbXMuc2xpY2UoMCwgLTEpO1xuICBjb25zdCBvcGVyYXRpb25zOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25EZWZbXSA9IFtcbiAgICByYW5nZU9wZXJhdGlvbixcbiAgICB7XG4gICAgICBpZDogYF9fJHtuYW1lfV9ieWAsXG4gICAgICBuYW1lOiBgJHtnZXRQcm9tQW5kTG9raU9wZXJhdGlvbkRpc3BsYXlOYW1lKG5hbWUpfSBieWAsXG4gICAgICBwYXJhbXM6IFtcbiAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ0xhYmVsJyxcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICByZXN0UGFyYW06IHRydWUsXG4gICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgZWRpdG9yOiBMYWJlbFBhcmFtRWRpdG9yLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGRlZmF1bHRQYXJhbXM6IFsuLi5yYW5nZU9wZXJhdGlvbi5kZWZhdWx0UGFyYW1zLCAnJ10sXG4gICAgICBhbHRlcm5hdGl2ZXNLZXk6ICdyYW5nZSBmdW5jdGlvbiB3aXRoIGdyb3VwaW5nJyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5SYW5nZUZ1bmN0aW9ucyxcbiAgICAgIHJlbmRlcmVyOiBnZXRSYW5nZUFnZ3JlZ2F0aW9uV2l0aEdyb3VwaW5nUmVuZGVyZXIobmFtZSwgJ2J5JyksXG4gICAgICBwYXJhbUNoYW5nZWRIYW5kbGVyOiBnZXRMYXN0TGFiZWxSZW1vdmVkSGFuZGxlcihuYW1lKSxcbiAgICAgIGV4cGxhaW5IYW5kbGVyOiBnZXRBZ2dyZWdhdGlvbkV4cGxhaW5lcihuYW1lLCAnYnknKSxcbiAgICAgIGFkZE9wZXJhdGlvbkhhbmRsZXI6IGFkZExva2lPcGVyYXRpb24sXG4gICAgICBoaWRlRnJvbUxpc3Q6IHRydWUsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogYF9fJHtuYW1lfV93aXRob3V0YCxcbiAgICAgIG5hbWU6IGAke2dldFByb21BbmRMb2tpT3BlcmF0aW9uRGlzcGxheU5hbWUobmFtZSl9IHdpdGhvdXRgLFxuICAgICAgcGFyYW1zOiBbXG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdMYWJlbCcsXG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgcmVzdFBhcmFtOiB0cnVlLFxuICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgIGVkaXRvcjogTGFiZWxQYXJhbUVkaXRvcixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbLi4ucmFuZ2VPcGVyYXRpb24uZGVmYXVsdFBhcmFtcywgJyddLFxuICAgICAgYWx0ZXJuYXRpdmVzS2V5OiAncmFuZ2UgZnVuY3Rpb24gd2l0aCBncm91cGluZycsXG4gICAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuUmFuZ2VGdW5jdGlvbnMsXG4gICAgICByZW5kZXJlcjogZ2V0UmFuZ2VBZ2dyZWdhdGlvbldpdGhHcm91cGluZ1JlbmRlcmVyKG5hbWUsICd3aXRob3V0JyksXG4gICAgICBwYXJhbUNoYW5nZWRIYW5kbGVyOiBnZXRMYXN0TGFiZWxSZW1vdmVkSGFuZGxlcihuYW1lKSxcbiAgICAgIGV4cGxhaW5IYW5kbGVyOiBnZXRBZ2dyZWdhdGlvbkV4cGxhaW5lcihuYW1lLCAnd2l0aG91dCcpLFxuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICAgIGhpZGVGcm9tTGlzdDogdHJ1ZSxcbiAgICB9LFxuICBdO1xuXG4gIHJldHVybiBvcGVyYXRpb25zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZ2VBZ2dyZWdhdGlvbldpdGhHcm91cGluZ1JlbmRlcmVyKGFnZ3JlZ2F0aW9uOiBzdHJpbmcsIGdyb3VwaW5nOiAnYnknIHwgJ3dpdGhvdXQnKSB7XG4gIHJldHVybiBmdW5jdGlvbiBhZ2dyZWdhdGlvblJlbmRlcmVyKG1vZGVsOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb24sIGRlZjogUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmLCBpbm5lckV4cHI6IHN0cmluZykge1xuICAgIGNvbnN0IHJlc3RQYXJhbUluZGV4ID0gZGVmLnBhcmFtcy5maW5kSW5kZXgoKHBhcmFtKSA9PiBwYXJhbS5yZXN0UGFyYW0pO1xuICAgIGNvbnN0IHBhcmFtcyA9IG1vZGVsLnBhcmFtcy5zbGljZSgwLCByZXN0UGFyYW1JbmRleCk7XG4gICAgY29uc3QgcmVzdFBhcmFtcyA9IG1vZGVsLnBhcmFtcy5zbGljZShyZXN0UGFyYW1JbmRleCk7XG5cbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMiAmJiBhZ2dyZWdhdGlvbiA9PT0gTG9raU9wZXJhdGlvbklkLlF1YW50aWxlT3ZlclRpbWUpIHtcbiAgICAgIHJldHVybiBgJHthZ2dyZWdhdGlvbn0oJHtwYXJhbXNbMV19LCAke2lubmVyRXhwcn0gWyR7cGFyYW1zWzBdfV0pICR7Z3JvdXBpbmd9ICgke3Jlc3RQYXJhbXMuam9pbignLCAnKX0pYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCR7YWdncmVnYXRpb259KCR7aW5uZXJFeHByfSBbJHtwYXJhbXNbMF19XSkgJHtncm91cGluZ30gKCR7cmVzdFBhcmFtcy5qb2luKCcsICcpfSlgO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvcGVyYXRpb25XaXRoUmFuZ2VWZWN0b3JSZW5kZXJlcihcbiAgbW9kZWw6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbixcbiAgZGVmOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25EZWYsXG4gIGlubmVyRXhwcjogc3RyaW5nXG4pIHtcbiAgY29uc3QgcGFyYW1zID0gbW9kZWwucGFyYW1zID8/IFtdO1xuICBjb25zdCByYW5nZVZlY3RvciA9IHBhcmFtc1swXSA/PyAnJF9faW50ZXJ2YWwnO1xuICAvLyBRdWFudGlsZU92ZXJUaW1lIGlzIG9ubHkgcmFuZ2UgdmVjdG9yIHdpdGggbW9yZSB0aGFuIG9uZSBwYXJhbVxuICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMiAmJiBtb2RlbC5pZCA9PT0gTG9raU9wZXJhdGlvbklkLlF1YW50aWxlT3ZlclRpbWUpIHtcbiAgICBjb25zdCBxdWFudGlsZSA9IHBhcmFtc1sxXTtcbiAgICByZXR1cm4gYCR7bW9kZWwuaWR9KCR7cXVhbnRpbGV9LCAke2lubmVyRXhwcn0gWyR7cmFuZ2VWZWN0b3J9XSlgO1xuICB9XG5cbiAgcmV0dXJuIGAke21vZGVsLmlkfSgke2lubmVyRXhwcn0gWyR7cGFyYW1zWzBdID8/ICckX19pbnRlcnZhbCd9XSlgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGFiZWxGaWx0ZXJSZW5kZXJlcihtb2RlbDogUXVlcnlCdWlsZGVyT3BlcmF0aW9uLCBkZWY6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZiwgaW5uZXJFeHByOiBzdHJpbmcpIHtcbiAgY29uc3QgaW50ZWdlck9wZXJhdG9ycyA9IFsnPCcsICc8PScsICc+JywgJz49J107XG5cbiAgaWYgKGludGVnZXJPcGVyYXRvcnMuaW5jbHVkZXMoU3RyaW5nKG1vZGVsLnBhcmFtc1sxXSkpKSB7XG4gICAgcmV0dXJuIGAke2lubmVyRXhwcn0gfCAke21vZGVsLnBhcmFtc1swXX0gJHttb2RlbC5wYXJhbXNbMV19ICR7bW9kZWwucGFyYW1zWzJdfWA7XG4gIH1cblxuICByZXR1cm4gYCR7aW5uZXJFeHByfSB8ICR7bW9kZWwucGFyYW1zWzBdfSAke21vZGVsLnBhcmFtc1sxXX0gXFxgJHttb2RlbC5wYXJhbXNbMl19XFxgYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29uZmxpY3RpbmdGaWx0ZXIoXG4gIG9wZXJhdGlvbjogUXVlcnlCdWlsZGVyT3BlcmF0aW9uLFxuICBxdWVyeU9wZXJhdGlvbnM6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbltdXG4pOiBib29sZWFuIHtcbiAgY29uc3Qgb3BlcmF0aW9uSXNOZWdhdGl2ZSA9IG9wZXJhdGlvbi5wYXJhbXNbMV0udG9TdHJpbmcoKS5zdGFydHNXaXRoKCchJyk7XG5cbiAgY29uc3QgY2FuZGlkYXRlcyA9IHF1ZXJ5T3BlcmF0aW9ucy5maWx0ZXIoXG4gICAgKHF1ZXJ5T3BlcmF0aW9uKSA9PlxuICAgICAgcXVlcnlPcGVyYXRpb24uaWQgPT09IExva2lPcGVyYXRpb25JZC5MYWJlbEZpbHRlciAmJlxuICAgICAgcXVlcnlPcGVyYXRpb24ucGFyYW1zWzBdID09PSBvcGVyYXRpb24ucGFyYW1zWzBdICYmXG4gICAgICBxdWVyeU9wZXJhdGlvbi5wYXJhbXNbMl0gPT09IG9wZXJhdGlvbi5wYXJhbXNbMl1cbiAgKTtcblxuICBjb25zdCBjb25mbGljdCA9IGNhbmRpZGF0ZXMuc29tZSgoY2FuZGlkYXRlKSA9PiB7XG4gICAgaWYgKG9wZXJhdGlvbklzTmVnYXRpdmUgJiYgY2FuZGlkYXRlLnBhcmFtc1sxXS50b1N0cmluZygpLnN0YXJ0c1dpdGgoJyEnKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAob3BlcmF0aW9uSXNOZWdhdGl2ZSA9PT0gZmFsc2UgJiYgY2FuZGlkYXRlLnBhcmFtc1sxXS50b1N0cmluZygpLnN0YXJ0c1dpdGgoJyEnKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZsaWN0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGlwZWxpbmVSZW5kZXJlcihtb2RlbDogUXVlcnlCdWlsZGVyT3BlcmF0aW9uLCBkZWY6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZiwgaW5uZXJFeHByOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGAke2lubmVyRXhwcn0gfCAke21vZGVsLmlkfWA7XG59XG5cbmZ1bmN0aW9uIGlzUmFuZ2VWZWN0b3JGdW5jdGlvbihkZWY6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZikge1xuICByZXR1cm4gZGVmLmNhdGVnb3J5ID09PSBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5SYW5nZUZ1bmN0aW9ucztcbn1cblxuZnVuY3Rpb24gZ2V0SW5kZXhPZk9yTGFzdChcbiAgb3BlcmF0aW9uczogUXVlcnlCdWlsZGVyT3BlcmF0aW9uW10sXG4gIHF1ZXJ5TW9kZWxsZXI6IFZpc3VhbFF1ZXJ5TW9kZWxsZXIsXG4gIGNvbmRpdGlvbjogKGRlZjogUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmKSA9PiBib29sZWFuXG4pIHtcbiAgY29uc3QgaW5kZXggPSBvcGVyYXRpb25zLmZpbmRJbmRleCgoeCkgPT4ge1xuICAgIGNvbnN0IG9wRGVmID0gcXVlcnlNb2RlbGxlci5nZXRPcGVyYXRpb25EZWYoeC5pZCk7XG4gICAgaWYgKCFvcERlZikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gY29uZGl0aW9uKG9wRGVmKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGluZGV4ID09PSAtMSA/IG9wZXJhdGlvbnMubGVuZ3RoIDogaW5kZXg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRMb2tpT3BlcmF0aW9uKFxuICBkZWY6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZixcbiAgcXVlcnk6IExva2lWaXN1YWxRdWVyeSxcbiAgbW9kZWxsZXI6IFZpc3VhbFF1ZXJ5TW9kZWxsZXJcbik6IExva2lWaXN1YWxRdWVyeSB7XG4gIGNvbnN0IG5ld09wZXJhdGlvbjogUXVlcnlCdWlsZGVyT3BlcmF0aW9uID0ge1xuICAgIGlkOiBkZWYuaWQsXG4gICAgcGFyYW1zOiBkZWYuZGVmYXVsdFBhcmFtcyxcbiAgfTtcblxuICBjb25zdCBvcGVyYXRpb25zID0gWy4uLnF1ZXJ5Lm9wZXJhdGlvbnNdO1xuXG4gIGNvbnN0IGV4aXN0aW5nUmFuZ2VWZWN0b3JGdW5jdGlvbiA9IG9wZXJhdGlvbnMuZmluZCgoeCkgPT4ge1xuICAgIGNvbnN0IG9wRGVmID0gbW9kZWxsZXIuZ2V0T3BlcmF0aW9uRGVmKHguaWQpO1xuICAgIGlmICghb3BEZWYpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGlzUmFuZ2VWZWN0b3JGdW5jdGlvbihvcERlZik7XG4gIH0pO1xuXG4gIHN3aXRjaCAoZGVmLmNhdGVnb3J5KSB7XG4gICAgY2FzZSBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5BZ2dyZWdhdGlvbnM6XG4gICAgY2FzZSBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5GdW5jdGlvbnM6XG4gICAgICAvLyBJZiB3ZSBhcmUgYWRkaW5nIGEgZnVuY3Rpb24gYnV0IHdlIGhhdmUgbm90IHJhbmdlIHZlY3RvciBmdW5jdGlvbiB5ZXQgYWRkIG9uZVxuICAgICAgaWYgKCFleGlzdGluZ1JhbmdlVmVjdG9yRnVuY3Rpb24pIHtcbiAgICAgICAgY29uc3QgcGxhY2VUb0luc2VydCA9IGdldEluZGV4T2ZPckxhc3QoXG4gICAgICAgICAgb3BlcmF0aW9ucyxcbiAgICAgICAgICBtb2RlbGxlcixcbiAgICAgICAgICAoZGVmKSA9PiBkZWYuY2F0ZWdvcnkgPT09IExva2lWaXN1YWxRdWVyeU9wZXJhdGlvbkNhdGVnb3J5LkZ1bmN0aW9uc1xuICAgICAgICApO1xuICAgICAgICBvcGVyYXRpb25zLnNwbGljZShwbGFjZVRvSW5zZXJ0LCAwLCB7IGlkOiBMb2tpT3BlcmF0aW9uSWQuUmF0ZSwgcGFyYW1zOiBbJyRfX2ludGVydmFsJ10gfSk7XG4gICAgICB9XG4gICAgICBvcGVyYXRpb25zLnB1c2gobmV3T3BlcmF0aW9uKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuUmFuZ2VGdW5jdGlvbnM6XG4gICAgICAvLyBJZiBhZGRpbmcgYSByYW5nZSBmdW5jdGlvbiBhbmQgcmFuZ2UgZnVuY3Rpb24gaXMgYWxyZWFkeSBhZGRlZCByZXBsYWNlIGl0XG4gICAgICBpZiAoZXhpc3RpbmdSYW5nZVZlY3RvckZ1bmN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gb3BlcmF0aW9ucy5pbmRleE9mKGV4aXN0aW5nUmFuZ2VWZWN0b3JGdW5jdGlvbik7XG4gICAgICAgIG9wZXJhdGlvbnNbaW5kZXhdID0gbmV3T3BlcmF0aW9uO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIC8vIEFkZCByYW5nZSBmdW5jdGlvbnMgYWZ0ZXIgYW55IGZvcm1hdHMsIGxpbmUgZmlsdGVycyBhbmQgbGFiZWwgZmlsdGVyc1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zdCBwbGFjZVRvSW5zZXJ0ID0gZ2V0SW5kZXhPZk9yTGFzdChcbiAgICAgICAgb3BlcmF0aW9ucyxcbiAgICAgICAgbW9kZWxsZXIsXG4gICAgICAgICh4KSA9PiAoZGVmLm9yZGVyUmFuayA/PyAxMDApIDwgKHgub3JkZXJSYW5rID8/IDEwMClcbiAgICAgICk7XG4gICAgICBvcGVyYXRpb25zLnNwbGljZShwbGFjZVRvSW5zZXJ0LCAwLCBuZXdPcGVyYXRpb24pO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIC4uLnF1ZXJ5LFxuICAgIG9wZXJhdGlvbnMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGROZXN0ZWRRdWVyeUhhbmRsZXIoZGVmOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25EZWYsIHF1ZXJ5OiBMb2tpVmlzdWFsUXVlcnkpOiBMb2tpVmlzdWFsUXVlcnkge1xuICByZXR1cm4ge1xuICAgIC4uLnF1ZXJ5LFxuICAgIGJpbmFyeVF1ZXJpZXM6IFtcbiAgICAgIC4uLihxdWVyeS5iaW5hcnlRdWVyaWVzID8/IFtdKSxcbiAgICAgIHtcbiAgICAgICAgb3BlcmF0b3I6ICcvJyxcbiAgICAgICAgcXVlcnksXG4gICAgICB9LFxuICAgIF0sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaW5lRmlsdGVyUmVuZGVyZXIob3BlcmF0aW9uOiBzdHJpbmcsIGNhc2VJbnNlbnNpdGl2ZT86IGJvb2xlYW4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGxpbmVGaWx0ZXJSZW5kZXJlcihtb2RlbDogUXVlcnlCdWlsZGVyT3BlcmF0aW9uLCBkZWY6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZiwgaW5uZXJFeHByOiBzdHJpbmcpIHtcbiAgICBpZiAoY2FzZUluc2Vuc2l0aXZlKSB7XG4gICAgICByZXR1cm4gYCR7aW5uZXJFeHByfSAke29wZXJhdGlvbn0gXFxgKD9pKSR7bW9kZWwucGFyYW1zWzBdfVxcYGA7XG4gICAgfVxuICAgIHJldHVybiBgJHtpbm5lckV4cHJ9ICR7b3BlcmF0aW9ufSBcXGAke21vZGVsLnBhcmFtc1swXX1cXGBgO1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRSYW5nZVZlY3RvclBhcmFtRGVmKCk6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvblBhcmFtRGVmIHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAnUmFuZ2UnLFxuICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgIG9wdGlvbnM6IFsnJF9faW50ZXJ2YWwnLCAnJF9fcmFuZ2UnLCAnMW0nLCAnNW0nLCAnMTBtJywgJzFoJywgJzI0aCddLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInBsYWNlVG9JbnNlcnQiLCJkZWYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/operationUtils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/operations.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkParamsAreValid: () => (/* binding */ checkParamsAreValid),\n/* harmony export */   explainOperator: () => (/* binding */ explainOperator),\n/* harmony export */   getDefinitionById: () => (/* binding */ getDefinitionById),\n/* harmony export */   getOperationDefinitions: () => (/* binding */ getOperationDefinitions)\n/* harmony export */ });\n/* harmony import */ var _prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/operationUtils.ts\");\n/* harmony import */ var _binaryScalarOperations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/binaryScalarOperations.ts\");\n/* harmony import */ var _components_UnwrapParamEditor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/components/UnwrapParamEditor.tsx\");\n/* harmony import */ var _operationUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/operationUtils.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n\n\n\n\n\n\nfunction getOperationDefinitions() {\n  const aggregations = [\n    _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Sum,\n    _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Min,\n    _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Max,\n    _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Avg,\n    _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Stddev,\n    _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Stdvar,\n    _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Count\n  ].flatMap(\n    (opId) => (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_0__.createAggregationOperation)(opId, {\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.Last\n    })\n  );\n  const aggregationsWithParam = [_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.TopK, _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.BottomK].flatMap((opId) => {\n    return (0,_prometheus_querybuilder_shared_operationUtils__WEBPACK_IMPORTED_MODULE_0__.createAggregationOperationWithParam)(\n      opId,\n      {\n        params: [{ name: \"K-value\", type: \"number\" }],\n        defaultParams: [5]\n      },\n      {\n        addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n        orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.Last\n      }\n    );\n  });\n  const rangeOperations = [\n    (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperation)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Rate),\n    (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperation)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.RateCounter),\n    (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperation)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.CountOverTime),\n    (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperation)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.SumOverTime),\n    (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperation)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.BytesRate),\n    (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperation)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.BytesOverTime),\n    (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperation)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.AbsentOverTime)\n  ];\n  const rangeOperationsWithGrouping = [\n    ...(0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperationWithGrouping)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.AvgOverTime),\n    ...(0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperationWithGrouping)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.MaxOverTime),\n    ...(0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperationWithGrouping)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.MinOverTime),\n    ...(0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperationWithGrouping)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.FirstOverTime),\n    ...(0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperationWithGrouping)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LastOverTime),\n    ...(0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperationWithGrouping)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.StdvarOverTime),\n    ...(0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperationWithGrouping)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.StddevOverTime),\n    ...(0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.createRangeOperationWithGrouping)(_types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.QuantileOverTime)\n  ];\n  const list = [\n    ...aggregations,\n    ...aggregationsWithParam,\n    ...rangeOperations,\n    ...rangeOperationsWithGrouping,\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Json,\n      name: \"Json\",\n      params: [\n        {\n          name: \"Expression\",\n          type: \"string\",\n          restParam: true,\n          optional: true,\n          minWidth: 18,\n          placeholder: 'server=\"servers[0]\"',\n          description: \"Using expressions with your json parser will extract only the specified json fields to labels. You can specify one or more expressions in this way. All expressions must be quoted.\"\n        }\n      ],\n      defaultParams: [],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.Parsers,\n      renderer: (model, def, innerExpr) => `${innerExpr} | json ${model.params.join(\", \")}`.trim(),\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `This will extract keys and values from a [json](https://grafana.com/docs/loki/latest/logql/log_queries/#json) formatted log line as labels. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Logfmt,\n      name: \"Logfmt\",\n      params: [],\n      defaultParams: [],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.Parsers,\n      renderer: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.pipelineRenderer,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `This will extract all keys and values from a [logfmt](https://grafana.com/docs/loki/latest/logql/log_queries/#logfmt) formatted log line as labels. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Regexp,\n      name: \"Regexp\",\n      params: [\n        {\n          name: \"String\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"<re>\",\n          description: \"The regexp expression that matches the structure of a log line.\",\n          minWidth: 20\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.Parsers,\n      renderer: (model, def, innerExpr) => `${innerExpr} | regexp \\`${model.params[0]}\\``,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `The [regexp parser](https://grafana.com/docs/loki/latest/logql/log_queries/#regular-expression) takes a single parameter | regexp \"<re>\" which is the regular expression using the Golang RE2 syntax. The regular expression must contain a least one named sub-match (e.g (?P<name>re)), each sub-match will extract a different label. The expression matches the structure of a log line. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Pattern,\n      name: \"Pattern\",\n      params: [\n        {\n          name: \"String\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"<pattern-expression>\",\n          description: \"The expression that matches the structure of a log line.\",\n          minWidth: 20\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.Parsers,\n      renderer: (model, def, innerExpr) => `${innerExpr} | pattern \\`${model.params[0]}\\``,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `The [pattern parser](https://grafana.com/docs/loki/latest/logql/log_queries/#pattern) allows the explicit extraction of fields from log lines by defining a pattern expression (| pattern \\`<pattern-expression>\\`). The expression matches the structure of a log line. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Unpack,\n      name: \"Unpack\",\n      params: [],\n      defaultParams: [],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.Parsers,\n      renderer: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.pipelineRenderer,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `This will extract all keys and values from a JSON log line, [unpacking](https://grafana.com/docs/loki/latest/logql/log_queries/#unpack) all embedded labels in the pack stage. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LineFormat,\n      name: \"Line format\",\n      params: [\n        {\n          name: \"String\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"{{.status_code}}\",\n          description: \"A line template that can refer to stream labels and extracted labels.\",\n          minWidth: 20\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.PipeOperations,\n      renderer: (model, def, innerExpr) => `${innerExpr} | line_format \\`${model.params[0]}\\``,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `This will replace log line using a specified template. The template can refer to stream labels and extracted labels.\n\nExample: \\`{{.status_code}} - {{.message}}\\`\n\n[Read the docs](https://grafana.com/docs/loki/latest/logql/log_queries/#line-format-expression) for more.\n        `\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LabelFormat,\n      name: \"Label format\",\n      params: [\n        { name: \"Label\", type: \"string\" },\n        { name: \"Rename to\", type: \"string\" }\n      ],\n      defaultParams: [\"\", \"\"],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.PipeOperations,\n      renderer: (model, def, innerExpr) => `${innerExpr} | label_format ${model.params[1]}=${model.params[0]}`,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `This will change name of label to desired new label. In the example below, label \"error_level\" will be renamed to \"level\".\n\nExample: \\`\\`error_level=\\`level\\` \\`\\`\n\n[Read the docs](https://grafana.com/docs/loki/latest/logql/log_queries/#labels-format-expression) for more.\n        `\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LineContains,\n      name: \"Line contains\",\n      params: [\n        {\n          name: \"String\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"Text to find\",\n          description: \"Find log lines that contains this text\",\n          minWidth: 20,\n          runQueryOnEnter: true\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"line filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.LineFilters,\n      renderer: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.getLineFilterRenderer)(\"|=\"),\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => `Return log lines that contain string \\`${op.params[0]}\\`.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LineContainsNot,\n      name: \"Line does not contain\",\n      params: [\n        {\n          name: \"String\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"Text to exclude\",\n          description: \"Find log lines that does not contain this text\",\n          minWidth: 26,\n          runQueryOnEnter: true\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"line filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.LineFilters,\n      renderer: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.getLineFilterRenderer)(\"!=\"),\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => `Return log lines that does not contain string \\`${op.params[0]}\\`.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LineContainsCaseInsensitive,\n      name: \"Line contains case insensitive\",\n      params: [\n        {\n          name: \"String\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"Text to find\",\n          description: \"Find log lines that contains this text\",\n          minWidth: 33,\n          runQueryOnEnter: true\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"line filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.LineFilters,\n      renderer: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.getLineFilterRenderer)(\"|~\", true),\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => `Return log lines that match regex \\`(?i)${op.params[0]}\\`.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LineContainsNotCaseInsensitive,\n      name: \"Line does not contain case insensitive\",\n      params: [\n        {\n          name: \"String\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"Text to exclude\",\n          description: \"Find log lines that does not contain this text\",\n          minWidth: 40,\n          runQueryOnEnter: true\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"line filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.LineFilters,\n      renderer: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.getLineFilterRenderer)(\"!~\", true),\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => `Return log lines that does not match regex \\`(?i)${op.params[0]}\\`.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LineMatchesRegex,\n      name: \"Line contains regex match\",\n      params: [\n        {\n          name: \"Regex\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"Pattern to match\",\n          description: \"Find log lines that match this regex pattern\",\n          minWidth: 30,\n          runQueryOnEnter: true\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"line filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.LineFilters,\n      renderer: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.getLineFilterRenderer)(\"|~\"),\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => `Return log lines that match a \\`RE2\\` regex pattern. \\`${op.params[0]}\\`.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LineMatchesRegexNot,\n      name: \"Line does not match regex\",\n      params: [\n        {\n          name: \"Regex\",\n          type: \"string\",\n          hideName: true,\n          placeholder: \"Pattern to exclude\",\n          description: \"Find log lines that does not match this regex pattern\",\n          minWidth: 30,\n          runQueryOnEnter: true\n        }\n      ],\n      defaultParams: [\"\"],\n      alternativesKey: \"line filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.LineFilters,\n      renderer: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.getLineFilterRenderer)(\"!~\"),\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => `Return log lines that doesn't match a \\`RE2\\` regex pattern. \\`${op.params[0]}\\`.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LineFilterIpMatches,\n      name: \"IP line filter expression\",\n      params: [\n        {\n          name: \"Operator\",\n          type: \"string\",\n          minWidth: 16,\n          options: [_types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.contains, _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.doesNotContain]\n        },\n        {\n          name: \"Pattern\",\n          type: \"string\",\n          placeholder: \"<pattern>\",\n          minWidth: 16,\n          runQueryOnEnter: true\n        }\n      ],\n      defaultParams: [\"|=\", \"\"],\n      alternativesKey: \"line filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.LineFilters,\n      renderer: (op, def, innerExpr) => `${innerExpr} ${op.params[0]} ip(\\`${op.params[1]}\\`)`,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => `Return log lines using IP matching of \\`${op.params[1]}\\``\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LabelFilter,\n      name: \"Label filter expression\",\n      params: [\n        { name: \"Label\", type: \"string\", minWidth: 14 },\n        {\n          name: \"Operator\",\n          type: \"string\",\n          minWidth: 14,\n          options: [\n            _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.equals,\n            _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.doesNotEqual,\n            _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.matchesRegex,\n            _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.doesNotMatchRegex,\n            _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.greaterThan,\n            _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.lessThan,\n            _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.greaterThanOrEqual,\n            _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.lessThanOrEqual\n          ]\n        },\n        { name: \"Value\", type: \"string\", minWidth: 14 }\n      ],\n      defaultParams: [\"\", \"=\", \"\"],\n      alternativesKey: \"label filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LabelFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.PipeOperations,\n      renderer: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.labelFilterRenderer,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `Label expression filter allows filtering using original and extracted labels.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LabelFilterIpMatches,\n      name: \"IP label filter expression\",\n      params: [\n        { name: \"Label\", type: \"string\", minWidth: 14 },\n        {\n          name: \"Operator\",\n          type: \"string\",\n          minWidth: 14,\n          options: [_types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.equals, _types__WEBPACK_IMPORTED_MODULE_4__.lokiOperators.doesNotEqual]\n        },\n        { name: \"Value\", type: \"string\", minWidth: 14 }\n      ],\n      defaultParams: [\"\", \"=\", \"\"],\n      alternativesKey: \"label filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LabelFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.PipeOperations,\n      renderer: (model, def, innerExpr) => `${innerExpr} | ${model.params[0]} ${model.params[1]} ip(\\`${model.params[2]}\\`)`,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => `Return log lines using IP matching of \\`${op.params[2]}\\` for \\`${op.params[0]}\\` label`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.LabelFilterNoErrors,\n      name: \"No pipeline errors\",\n      params: [],\n      defaultParams: [],\n      alternativesKey: \"label filter\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.LabelFilters,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.NoErrors,\n      renderer: (model, def, innerExpr) => `${innerExpr} | __error__=\\`\\``,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `Filter out all formatting and parsing errors.`\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Unwrap,\n      name: \"Unwrap\",\n      params: [\n        {\n          name: \"Identifier\",\n          type: \"string\",\n          hideName: true,\n          minWidth: 16,\n          placeholder: \"Label key\",\n          editor: _components_UnwrapParamEditor__WEBPACK_IMPORTED_MODULE_2__.UnwrapParamEditor\n        },\n        {\n          name: \"Conversion function\",\n          hideName: true,\n          type: \"string\",\n          options: [\"duration\", \"duration_seconds\", \"bytes\"],\n          optional: true\n        }\n      ],\n      defaultParams: [\"\", \"\"],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.Unwrap,\n      renderer: (op, def, innerExpr) => `${innerExpr} | unwrap ${op.params[1] ? `${op.params[1]}(${op.params[0]})` : op.params[0]}`,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: (op) => {\n        let label = String(op.params[0]).length > 0 ? op.params[0] : \"<label>\";\n        return `Use the extracted label \\`${label}\\` as sample values instead of log lines for the subsequent range aggregation.${op.params[1] ? ` Conversion function \\`${op.params[1]}\\` wrapping \\`${label}\\` will attempt to convert this label from a specific format (e.g. 3k, 500ms).` : \"\"}`;\n      }\n    },\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.Decolorize,\n      name: \"Decolorize\",\n      params: [],\n      defaultParams: [],\n      alternativesKey: \"format\",\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.Formats,\n      orderRank: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationOrder.PipeOperations,\n      renderer: (op, def, innerExpr) => `${innerExpr} | decolorize`,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addLokiOperation,\n      explainHandler: () => `This will remove ANSI color codes from log lines.`\n    },\n    ..._binaryScalarOperations__WEBPACK_IMPORTED_MODULE_1__.binaryScalarOperations,\n    {\n      id: _types__WEBPACK_IMPORTED_MODULE_4__.LokiOperationId.NestedQuery,\n      name: \"Binary operation with query\",\n      params: [],\n      defaultParams: [],\n      category: _types__WEBPACK_IMPORTED_MODULE_4__.LokiVisualQueryOperationCategory.BinaryOps,\n      renderer: (model, def, innerExpr) => innerExpr,\n      addOperationHandler: _operationUtils__WEBPACK_IMPORTED_MODULE_3__.addNestedQueryHandler\n    }\n  ];\n  return list;\n}\nconst definitions = getOperationDefinitions();\nfunction explainOperator(id) {\n  const definition = definitions.find((operation) => operation.id === id);\n  const explain = definition?.explainHandler?.({ id: \"\", params: [\"<value>\"] }) || \"\";\n  return explain.replace(/\\[(.*)\\]\\(.*\\)/g, \"$1\");\n}\nfunction getDefinitionById(id) {\n  return definitions.find((x) => x.id === id);\n}\nfunction checkParamsAreValid(def, params) {\n  if (params.length < def.params.filter((param) => !param.optional).length) {\n    return false;\n  }\n  return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9vcGVyYXRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFHTztBQUdnQztBQUNMO0FBUzNCO0FBQzhGO0FBRTlGLFNBQVMsMEJBQXNEO0FBQ3BFLFFBQU0sZUFBZTtBQUFBLElBQ25CLG1EQUFlLENBQUM7QUFBQSxJQUNoQixtREFBZSxDQUFDO0FBQUEsSUFDaEIsbURBQWUsQ0FBQztBQUFBLElBQ2hCLG1EQUFlLENBQUM7QUFBQSxJQUNoQixtREFBZSxDQUFDO0FBQUEsSUFDaEIsbURBQWUsQ0FBQztBQUFBLElBQ2hCLG1EQUFlLENBQUM7QUFBQSxFQUNsQixFQUFFO0FBQUEsSUFBUSxDQUFDLFNBQ1QsMEdBQTBCLENBQUMsTUFBTTtBQUFBLE1BQy9CLHFCQUFxQiw2REFBZ0I7QUFBaEIsTUFDckIsV0FBVyxzREFBa0IsQ0FBQztBQUFBLElBQ2hDLENBQUM7QUFBQSxFQUNIO0FBRUEsUUFBTSx3QkFBd0IsQ0FBQyxtREFBZSxDQUFDLE1BQU0sbURBQWUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFDOUYsV0FBTyxtSEFBbUM7QUFBbkMsTUFDTDtBQUFBLE1BQ0E7QUFBQSxRQUNFLFFBQVEsQ0FBQyxFQUFFLE1BQU0sV0FBVyxNQUFNLFNBQVMsQ0FBQztBQUFBLFFBQzVDLGVBQWUsQ0FBQyxDQUFDO0FBQUEsTUFDbkI7QUFBQSxNQUNBO0FBQUEsUUFDRSxxQkFBcUIsNkRBQWdCO0FBQWhCLFFBQ3JCLFdBQVcsc0RBQWtCLENBQUM7QUFBQSxNQUNoQztBQUFBLElBQ0Y7QUFBQSxFQUNGLENBQUM7QUFFRCxRQUFNLGtCQUFrQjtBQUFBLElBQ3RCLHFFQUFvQixDQUFDLG1EQUFlLENBQUMsSUFBSTtBQUFBLElBQ3pDLHFFQUFvQixDQUFDLG1EQUFlLENBQUMsV0FBVztBQUFBLElBQ2hELHFFQUFvQixDQUFDLG1EQUFlLENBQUMsYUFBYTtBQUFBLElB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QVUsb0VBQWdDLENBQUM7QUFBQSxNQUMzQyxVQUFVLENBQUMsT0FBTyxLQUFLLGNBQWM7QUFBQSxNQUNyQyxxQkFBcUIsa0VBQXFCO0FBQXJCLElBQ3ZCO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFDVDtBQUdBLE1BQU0sY0FBYyx3QkFBd0I7QUFNckMsU0FBUyxnQkFBZ0IsSUFBc0M7QUFDcEUsUUFBTSxhQUFhLFlBQVksS0FBSyxDQUFDLGNBQWMsVUFBVSxPQUFPLEVBQUU7QUFFdEUsUUFBTSxVQUFVLFlBQVksaUJBQWlCLEVBQUUsSUFBSSxJQUFJLFFBQVEsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFLO0FBR2pGLFNBQU8sUUFBUSxRQUFRLG1CQUFtQixJQUFJO0FBQ2hEO0FBRU8sU0FBUyxrQkFBa0IsSUFBa0Q7QUFDbEYsU0FBTyxZQUFZLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFO0FBQzVDO0FBRU8sU0FBUyxvQkFBb0IsS0FBK0IsUUFBb0Q7QUFFckgsTUFBSSxPQUFPLFNBQVMsSUFBSSxPQUFPLE9BQU8sQ0FBQyxVQUFVLENBQUMsTUFBTSxRQUFRLEVBQUUsUUFBUTtBQUN4RSxXQUFPO0FBQUEsRUFDVDtBQUVBLFNBQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9vcGVyYXRpb25zLnRzPzg4OTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlQWdncmVnYXRpb25PcGVyYXRpb24sXG4gIGNyZWF0ZUFnZ3JlZ2F0aW9uT3BlcmF0aW9uV2l0aFBhcmFtLFxufSBmcm9tICcuLi8uLi9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvb3BlcmF0aW9uVXRpbHMnO1xuaW1wb3J0IHsgUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmLCBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbVZhbHVlIH0gZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL3R5cGVzJztcblxuaW1wb3J0IHsgYmluYXJ5U2NhbGFyT3BlcmF0aW9ucyB9IGZyb20gJy4vYmluYXJ5U2NhbGFyT3BlcmF0aW9ucyc7XG5pbXBvcnQgeyBVbndyYXBQYXJhbUVkaXRvciB9IGZyb20gJy4vY29tcG9uZW50cy9VbndyYXBQYXJhbUVkaXRvcic7XG5pbXBvcnQge1xuICBhZGRMb2tpT3BlcmF0aW9uLFxuICBhZGROZXN0ZWRRdWVyeUhhbmRsZXIsXG4gIGNyZWF0ZVJhbmdlT3BlcmF0aW9uLFxuICBjcmVhdGVSYW5nZU9wZXJhdGlvbldpdGhHcm91cGluZyxcbiAgZ2V0TGluZUZpbHRlclJlbmRlcmVyLFxuICBsYWJlbEZpbHRlclJlbmRlcmVyLFxuICBwaXBlbGluZVJlbmRlcmVyLFxufSBmcm9tICcuL29wZXJhdGlvblV0aWxzJztcbmltcG9ydCB7IExva2lPcGVyYXRpb25JZCwgTG9raU9wZXJhdGlvbk9yZGVyLCBsb2tpT3BlcmF0b3JzLCBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbnMoKTogUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmW10ge1xuICBjb25zdCBhZ2dyZWdhdGlvbnMgPSBbXG4gICAgTG9raU9wZXJhdGlvbklkLlN1bSxcbiAgICBMb2tpT3BlcmF0aW9uSWQuTWluLFxuICAgIExva2lPcGVyYXRpb25JZC5NYXgsXG4gICAgTG9raU9wZXJhdGlvbklkLkF2ZyxcbiAgICBMb2tpT3BlcmF0aW9uSWQuU3RkZGV2LFxuICAgIExva2lPcGVyYXRpb25JZC5TdGR2YXIsXG4gICAgTG9raU9wZXJhdGlvbklkLkNvdW50LFxuICBdLmZsYXRNYXAoKG9wSWQpID0+XG4gICAgY3JlYXRlQWdncmVnYXRpb25PcGVyYXRpb24ob3BJZCwge1xuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICAgIG9yZGVyUmFuazogTG9raU9wZXJhdGlvbk9yZGVyLkxhc3QsXG4gICAgfSlcbiAgKTtcblxuICBjb25zdCBhZ2dyZWdhdGlvbnNXaXRoUGFyYW0gPSBbTG9raU9wZXJhdGlvbklkLlRvcEssIExva2lPcGVyYXRpb25JZC5Cb3R0b21LXS5mbGF0TWFwKChvcElkKSA9PiB7XG4gICAgcmV0dXJuIGNyZWF0ZUFnZ3JlZ2F0aW9uT3BlcmF0aW9uV2l0aFBhcmFtKFxuICAgICAgb3BJZCxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiBbeyBuYW1lOiAnSy12YWx1ZScsIHR5cGU6ICdudW1iZXInIH1dLFxuICAgICAgICBkZWZhdWx0UGFyYW1zOiBbNV0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgICBvcmRlclJhbms6IExva2lPcGVyYXRpb25PcmRlci5MYXN0LFxuICAgICAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGNvbnN0IHJhbmdlT3BlcmF0aW9ucyA9IFtcbiAgICBjcmVhdGVSYW5nZU9wZXJhdGlvbihMb2tpT3BlcmF0aW9uSWQuUmF0ZSksXG4gICAgY3JlYXRlUmFuZ2VPcGVyYXRpb24oTG9raU9wZXJhdGlvbklkLlJhdGVDb3VudGVyKSxcbiAgICBjcmVhdGVSYW5nZU9wZXJhdGlvbihMb2tpT3BlcmF0aW9uSWQuQ291bnRPdmVyVGltZSksXG4gICAgY3JlYXRlUmFuZ2VPcGVyYXRpb24oTG9raU9wZXJhdGlvbklkLlN1bU92ZXJUaW1lKSxcbiAgICBjcmVhdGVSYW5nZU9wZXJhdGlvbihMb2tpT3BlcmF0aW9uSWQuQnl0ZXNSYXRlKSxcbiAgICBjcmVhdGVSYW5nZU9wZXJhdGlvbihMb2tpT3BlcmF0aW9uSWQuQnl0ZXNPdmVyVGltZSksXG4gICAgY3JlYXRlUmFuZ2VPcGVyYXRpb24oTG9raU9wZXJhdGlvbklkLkFic2VudE92ZXJUaW1lKSxcbiAgXTtcblxuICBjb25zdCByYW5nZU9wZXJhdGlvbnNXaXRoR3JvdXBpbmcgPSBbXG4gICAgLi4uY3JlYXRlUmFuZ2VPcGVyYXRpb25XaXRoR3JvdXBpbmcoTG9raU9wZXJhdGlvbklkLkF2Z092ZXJUaW1lKSxcbiAgICAuLi5jcmVhdGVSYW5nZU9wZXJhdGlvbldpdGhHcm91cGluZyhMb2tpT3BlcmF0aW9uSWQuTWF4T3ZlclRpbWUpLFxuICAgIC4uLmNyZWF0ZVJhbmdlT3BlcmF0aW9uV2l0aEdyb3VwaW5nKExva2lPcGVyYXRpb25JZC5NaW5PdmVyVGltZSksXG4gICAgLi4uY3JlYXRlUmFuZ2VPcGVyYXRpb25XaXRoR3JvdXBpbmcoTG9raU9wZXJhdGlvbklkLkZpcnN0T3ZlclRpbWUpLFxuICAgIC4uLmNyZWF0ZVJhbmdlT3BlcmF0aW9uV2l0aEdyb3VwaW5nKExva2lPcGVyYXRpb25JZC5MYXN0T3ZlclRpbWUpLFxuICAgIC4uLmNyZWF0ZVJhbmdlT3BlcmF0aW9uV2l0aEdyb3VwaW5nKExva2lPcGVyYXRpb25JZC5TdGR2YXJPdmVyVGltZSksXG4gICAgLi4uY3JlYXRlUmFuZ2VPcGVyYXRpb25XaXRoR3JvdXBpbmcoTG9raU9wZXJhdGlvbklkLlN0ZGRldk92ZXJUaW1lKSxcbiAgICAuLi5jcmVhdGVSYW5nZU9wZXJhdGlvbldpdGhHcm91cGluZyhMb2tpT3BlcmF0aW9uSWQuUXVhbnRpbGVPdmVyVGltZSksXG4gIF07XG5cbiAgY29uc3QgbGlzdDogUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmW10gPSBbXG4gICAgLi4uYWdncmVnYXRpb25zLFxuICAgIC4uLmFnZ3JlZ2F0aW9uc1dpdGhQYXJhbSxcbiAgICAuLi5yYW5nZU9wZXJhdGlvbnMsXG4gICAgLi4ucmFuZ2VPcGVyYXRpb25zV2l0aEdyb3VwaW5nLFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuSnNvbixcbiAgICAgIG5hbWU6ICdKc29uJyxcbiAgICAgIHBhcmFtczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ0V4cHJlc3Npb24nLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIHJlc3RQYXJhbTogdHJ1ZSxcbiAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICBtaW5XaWR0aDogMTgsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6ICdzZXJ2ZXI9XCJzZXJ2ZXJzWzBdXCInLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgJ1VzaW5nIGV4cHJlc3Npb25zIHdpdGggeW91ciBqc29uIHBhcnNlciB3aWxsIGV4dHJhY3Qgb25seSB0aGUgc3BlY2lmaWVkIGpzb24gZmllbGRzIHRvIGxhYmVscy4gWW91IGNhbiBzcGVjaWZ5IG9uZSBvciBtb3JlIGV4cHJlc3Npb25zIGluIHRoaXMgd2F5LiBBbGwgZXhwcmVzc2lvbnMgbXVzdCBiZSBxdW90ZWQuJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbXSxcbiAgICAgIGFsdGVybmF0aXZlc0tleTogJ2Zvcm1hdCcsXG4gICAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuRm9ybWF0cyxcbiAgICAgIG9yZGVyUmFuazogTG9raU9wZXJhdGlvbk9yZGVyLlBhcnNlcnMsXG4gICAgICByZW5kZXJlcjogKG1vZGVsLCBkZWYsIGlubmVyRXhwcikgPT4gYCR7aW5uZXJFeHByfSB8IGpzb24gJHttb2RlbC5wYXJhbXMuam9pbignLCAnKX1gLnRyaW0oKSxcbiAgICAgIGFkZE9wZXJhdGlvbkhhbmRsZXI6IGFkZExva2lPcGVyYXRpb24sXG4gICAgICBleHBsYWluSGFuZGxlcjogKCkgPT5cbiAgICAgICAgYFRoaXMgd2lsbCBleHRyYWN0IGtleXMgYW5kIHZhbHVlcyBmcm9tIGEgW2pzb25dKGh0dHBzOi8vZ3JhZmFuYS5jb20vZG9jcy9sb2tpL2xhdGVzdC9sb2dxbC9sb2dfcXVlcmllcy8janNvbikgZm9ybWF0dGVkIGxvZyBsaW5lIGFzIGxhYmVscy4gVGhlIGV4dHJhY3RlZCBsYWJlbHMgY2FuIGJlIHVzZWQgaW4gbGFiZWwgZmlsdGVyIGV4cHJlc3Npb25zIGFuZCB1c2VkIGFzIHZhbHVlcyBmb3IgYSByYW5nZSBhZ2dyZWdhdGlvbiB2aWEgdGhlIHVud3JhcCBvcGVyYXRpb24uYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTG9nZm10LFxuICAgICAgbmFtZTogJ0xvZ2ZtdCcsXG4gICAgICBwYXJhbXM6IFtdLFxuICAgICAgZGVmYXVsdFBhcmFtczogW10sXG4gICAgICBhbHRlcm5hdGl2ZXNLZXk6ICdmb3JtYXQnLFxuICAgICAgY2F0ZWdvcnk6IExva2lWaXN1YWxRdWVyeU9wZXJhdGlvbkNhdGVnb3J5LkZvcm1hdHMsXG4gICAgICBvcmRlclJhbms6IExva2lPcGVyYXRpb25PcmRlci5QYXJzZXJzLFxuICAgICAgcmVuZGVyZXI6IHBpcGVsaW5lUmVuZGVyZXIsXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6ICgpID0+XG4gICAgICAgIGBUaGlzIHdpbGwgZXh0cmFjdCBhbGwga2V5cyBhbmQgdmFsdWVzIGZyb20gYSBbbG9nZm10XShodHRwczovL2dyYWZhbmEuY29tL2RvY3MvbG9raS9sYXRlc3QvbG9ncWwvbG9nX3F1ZXJpZXMvI2xvZ2ZtdCkgZm9ybWF0dGVkIGxvZyBsaW5lIGFzIGxhYmVscy4gVGhlIGV4dHJhY3RlZCBsYWJlbHMgY2FuIGJlIHVzZWQgaW4gbGFiZWwgZmlsdGVyIGV4cHJlc3Npb25zIGFuZCB1c2VkIGFzIHZhbHVlcyBmb3IgYSByYW5nZSBhZ2dyZWdhdGlvbiB2aWEgdGhlIHVud3JhcCBvcGVyYXRpb24uYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuUmVnZXhwLFxuICAgICAgbmFtZTogJ1JlZ2V4cCcsXG4gICAgICBwYXJhbXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdTdHJpbmcnLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGhpZGVOYW1lOiB0cnVlLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnPHJlPicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgcmVnZXhwIGV4cHJlc3Npb24gdGhhdCBtYXRjaGVzIHRoZSBzdHJ1Y3R1cmUgb2YgYSBsb2cgbGluZS4nLFxuICAgICAgICAgIG1pbldpZHRoOiAyMCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbJyddLFxuICAgICAgYWx0ZXJuYXRpdmVzS2V5OiAnZm9ybWF0JyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5Gb3JtYXRzLFxuICAgICAgb3JkZXJSYW5rOiBMb2tpT3BlcmF0aW9uT3JkZXIuUGFyc2VycyxcbiAgICAgIHJlbmRlcmVyOiAobW9kZWwsIGRlZiwgaW5uZXJFeHByKSA9PiBgJHtpbm5lckV4cHJ9IHwgcmVnZXhwIFxcYCR7bW9kZWwucGFyYW1zWzBdfVxcYGAsXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6ICgpID0+XG4gICAgICAgIGBUaGUgW3JlZ2V4cCBwYXJzZXJdKGh0dHBzOi8vZ3JhZmFuYS5jb20vZG9jcy9sb2tpL2xhdGVzdC9sb2dxbC9sb2dfcXVlcmllcy8jcmVndWxhci1leHByZXNzaW9uKSB0YWtlcyBhIHNpbmdsZSBwYXJhbWV0ZXIgfCByZWdleHAgXCI8cmU+XCIgd2hpY2ggaXMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB1c2luZyB0aGUgR29sYW5nIFJFMiBzeW50YXguIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gbXVzdCBjb250YWluIGEgbGVhc3Qgb25lIG5hbWVkIHN1Yi1tYXRjaCAoZS5nICg/UDxuYW1lPnJlKSksIGVhY2ggc3ViLW1hdGNoIHdpbGwgZXh0cmFjdCBhIGRpZmZlcmVudCBsYWJlbC4gVGhlIGV4cHJlc3Npb24gbWF0Y2hlcyB0aGUgc3RydWN0dXJlIG9mIGEgbG9nIGxpbmUuIFRoZSBleHRyYWN0ZWQgbGFiZWxzIGNhbiBiZSB1c2VkIGluIGxhYmVsIGZpbHRlciBleHByZXNzaW9ucyBhbmQgdXNlZCBhcyB2YWx1ZXMgZm9yIGEgcmFuZ2UgYWdncmVnYXRpb24gdmlhIHRoZSB1bndyYXAgb3BlcmF0aW9uLmAsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogTG9raU9wZXJhdGlvbklkLlBhdHRlcm4sXG4gICAgICBuYW1lOiAnUGF0dGVybicsXG4gICAgICBwYXJhbXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdTdHJpbmcnLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGhpZGVOYW1lOiB0cnVlLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnPHBhdHRlcm4tZXhwcmVzc2lvbj4nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGV4cHJlc3Npb24gdGhhdCBtYXRjaGVzIHRoZSBzdHJ1Y3R1cmUgb2YgYSBsb2cgbGluZS4nLFxuICAgICAgICAgIG1pbldpZHRoOiAyMCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbJyddLFxuICAgICAgYWx0ZXJuYXRpdmVzS2V5OiAnZm9ybWF0JyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5Gb3JtYXRzLFxuICAgICAgb3JkZXJSYW5rOiBMb2tpT3BlcmF0aW9uT3JkZXIuUGFyc2VycyxcbiAgICAgIHJlbmRlcmVyOiAobW9kZWwsIGRlZiwgaW5uZXJFeHByKSA9PiBgJHtpbm5lckV4cHJ9IHwgcGF0dGVybiBcXGAke21vZGVsLnBhcmFtc1swXX1cXGBgLFxuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICAgIGV4cGxhaW5IYW5kbGVyOiAoKSA9PlxuICAgICAgICBgVGhlIFtwYXR0ZXJuIHBhcnNlcl0oaHR0cHM6Ly9ncmFmYW5hLmNvbS9kb2NzL2xva2kvbGF0ZXN0L2xvZ3FsL2xvZ19xdWVyaWVzLyNwYXR0ZXJuKSBhbGxvd3MgdGhlIGV4cGxpY2l0IGV4dHJhY3Rpb24gb2YgZmllbGRzIGZyb20gbG9nIGxpbmVzIGJ5IGRlZmluaW5nIGEgcGF0dGVybiBleHByZXNzaW9uICh8IHBhdHRlcm4gXFxgPHBhdHRlcm4tZXhwcmVzc2lvbj5cXGApLiBUaGUgZXhwcmVzc2lvbiBtYXRjaGVzIHRoZSBzdHJ1Y3R1cmUgb2YgYSBsb2cgbGluZS4gVGhlIGV4dHJhY3RlZCBsYWJlbHMgY2FuIGJlIHVzZWQgaW4gbGFiZWwgZmlsdGVyIGV4cHJlc3Npb25zIGFuZCB1c2VkIGFzIHZhbHVlcyBmb3IgYSByYW5nZSBhZ2dyZWdhdGlvbiB2aWEgdGhlIHVud3JhcCBvcGVyYXRpb24uYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuVW5wYWNrLFxuICAgICAgbmFtZTogJ1VucGFjaycsXG4gICAgICBwYXJhbXM6IFtdLFxuICAgICAgZGVmYXVsdFBhcmFtczogW10sXG4gICAgICBhbHRlcm5hdGl2ZXNLZXk6ICdmb3JtYXQnLFxuICAgICAgY2F0ZWdvcnk6IExva2lWaXN1YWxRdWVyeU9wZXJhdGlvbkNhdGVnb3J5LkZvcm1hdHMsXG4gICAgICBvcmRlclJhbms6IExva2lPcGVyYXRpb25PcmRlci5QYXJzZXJzLFxuICAgICAgcmVuZGVyZXI6IHBpcGVsaW5lUmVuZGVyZXIsXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6ICgpID0+XG4gICAgICAgIGBUaGlzIHdpbGwgZXh0cmFjdCBhbGwga2V5cyBhbmQgdmFsdWVzIGZyb20gYSBKU09OIGxvZyBsaW5lLCBbdW5wYWNraW5nXShodHRwczovL2dyYWZhbmEuY29tL2RvY3MvbG9raS9sYXRlc3QvbG9ncWwvbG9nX3F1ZXJpZXMvI3VucGFjaykgYWxsIGVtYmVkZGVkIGxhYmVscyBpbiB0aGUgcGFjayBzdGFnZS4gVGhlIGV4dHJhY3RlZCBsYWJlbHMgY2FuIGJlIHVzZWQgaW4gbGFiZWwgZmlsdGVyIGV4cHJlc3Npb25zIGFuZCB1c2VkIGFzIHZhbHVlcyBmb3IgYSByYW5nZSBhZ2dyZWdhdGlvbiB2aWEgdGhlIHVud3JhcCBvcGVyYXRpb24uYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUZvcm1hdCxcbiAgICAgIG5hbWU6ICdMaW5lIGZvcm1hdCcsXG4gICAgICBwYXJhbXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdTdHJpbmcnLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGhpZGVOYW1lOiB0cnVlLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAne3suc3RhdHVzX2NvZGV9fScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBIGxpbmUgdGVtcGxhdGUgdGhhdCBjYW4gcmVmZXIgdG8gc3RyZWFtIGxhYmVscyBhbmQgZXh0cmFjdGVkIGxhYmVscy4nLFxuICAgICAgICAgIG1pbldpZHRoOiAyMCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbJyddLFxuICAgICAgYWx0ZXJuYXRpdmVzS2V5OiAnZm9ybWF0JyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5Gb3JtYXRzLFxuICAgICAgb3JkZXJSYW5rOiBMb2tpT3BlcmF0aW9uT3JkZXIuUGlwZU9wZXJhdGlvbnMsXG4gICAgICByZW5kZXJlcjogKG1vZGVsLCBkZWYsIGlubmVyRXhwcikgPT4gYCR7aW5uZXJFeHByfSB8IGxpbmVfZm9ybWF0IFxcYCR7bW9kZWwucGFyYW1zWzBdfVxcYGAsXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6ICgpID0+XG4gICAgICAgIGBUaGlzIHdpbGwgcmVwbGFjZSBsb2cgbGluZSB1c2luZyBhIHNwZWNpZmllZCB0ZW1wbGF0ZS4gVGhlIHRlbXBsYXRlIGNhbiByZWZlciB0byBzdHJlYW0gbGFiZWxzIGFuZCBleHRyYWN0ZWQgbGFiZWxzLlxuXG5FeGFtcGxlOiBcXGB7ey5zdGF0dXNfY29kZX19IC0ge3subWVzc2FnZX19XFxgXG5cbltSZWFkIHRoZSBkb2NzXShodHRwczovL2dyYWZhbmEuY29tL2RvY3MvbG9raS9sYXRlc3QvbG9ncWwvbG9nX3F1ZXJpZXMvI2xpbmUtZm9ybWF0LWV4cHJlc3Npb24pIGZvciBtb3JlLlxuICAgICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IExva2lPcGVyYXRpb25JZC5MYWJlbEZvcm1hdCxcbiAgICAgIG5hbWU6ICdMYWJlbCBmb3JtYXQnLFxuICAgICAgcGFyYW1zOiBbXG4gICAgICAgIHsgbmFtZTogJ0xhYmVsJywgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgeyBuYW1lOiAnUmVuYW1lIHRvJywgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbJycsICcnXSxcbiAgICAgIGFsdGVybmF0aXZlc0tleTogJ2Zvcm1hdCcsXG4gICAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuRm9ybWF0cyxcbiAgICAgIG9yZGVyUmFuazogTG9raU9wZXJhdGlvbk9yZGVyLlBpcGVPcGVyYXRpb25zLFxuICAgICAgcmVuZGVyZXI6IChtb2RlbCwgZGVmLCBpbm5lckV4cHIpID0+IGAke2lubmVyRXhwcn0gfCBsYWJlbF9mb3JtYXQgJHttb2RlbC5wYXJhbXNbMV19PSR7bW9kZWwucGFyYW1zWzBdfWAsXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6ICgpID0+XG4gICAgICAgIGBUaGlzIHdpbGwgY2hhbmdlIG5hbWUgb2YgbGFiZWwgdG8gZGVzaXJlZCBuZXcgbGFiZWwuIEluIHRoZSBleGFtcGxlIGJlbG93LCBsYWJlbCBcImVycm9yX2xldmVsXCIgd2lsbCBiZSByZW5hbWVkIHRvIFwibGV2ZWxcIi5cblxuRXhhbXBsZTogXFxgXFxgZXJyb3JfbGV2ZWw9XFxgbGV2ZWxcXGAgXFxgXFxgXG5cbltSZWFkIHRoZSBkb2NzXShodHRwczovL2dyYWZhbmEuY29tL2RvY3MvbG9raS9sYXRlc3QvbG9ncWwvbG9nX3F1ZXJpZXMvI2xhYmVscy1mb3JtYXQtZXhwcmVzc2lvbikgZm9yIG1vcmUuXG4gICAgICAgIGAsXG4gICAgfSxcblxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUNvbnRhaW5zLFxuICAgICAgbmFtZTogJ0xpbmUgY29udGFpbnMnLFxuICAgICAgcGFyYW1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnU3RyaW5nJyxcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBoaWRlTmFtZTogdHJ1ZSxcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ1RleHQgdG8gZmluZCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdGaW5kIGxvZyBsaW5lcyB0aGF0IGNvbnRhaW5zIHRoaXMgdGV4dCcsXG4gICAgICAgICAgbWluV2lkdGg6IDIwLFxuICAgICAgICAgIHJ1blF1ZXJ5T25FbnRlcjogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbJyddLFxuICAgICAgYWx0ZXJuYXRpdmVzS2V5OiAnbGluZSBmaWx0ZXInLFxuICAgICAgY2F0ZWdvcnk6IExva2lWaXN1YWxRdWVyeU9wZXJhdGlvbkNhdGVnb3J5LkxpbmVGaWx0ZXJzLFxuICAgICAgb3JkZXJSYW5rOiBMb2tpT3BlcmF0aW9uT3JkZXIuTGluZUZpbHRlcnMsXG4gICAgICByZW5kZXJlcjogZ2V0TGluZUZpbHRlclJlbmRlcmVyKCd8PScpLFxuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICAgIGV4cGxhaW5IYW5kbGVyOiAob3ApID0+IGBSZXR1cm4gbG9nIGxpbmVzIHRoYXQgY29udGFpbiBzdHJpbmcgXFxgJHtvcC5wYXJhbXNbMF19XFxgLmAsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogTG9raU9wZXJhdGlvbklkLkxpbmVDb250YWluc05vdCxcbiAgICAgIG5hbWU6ICdMaW5lIGRvZXMgbm90IGNvbnRhaW4nLFxuICAgICAgcGFyYW1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnU3RyaW5nJyxcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBoaWRlTmFtZTogdHJ1ZSxcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ1RleHQgdG8gZXhjbHVkZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdGaW5kIGxvZyBsaW5lcyB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhpcyB0ZXh0JyxcbiAgICAgICAgICBtaW5XaWR0aDogMjYsXG4gICAgICAgICAgcnVuUXVlcnlPbkVudGVyOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGRlZmF1bHRQYXJhbXM6IFsnJ10sXG4gICAgICBhbHRlcm5hdGl2ZXNLZXk6ICdsaW5lIGZpbHRlcicsXG4gICAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuTGluZUZpbHRlcnMsXG4gICAgICBvcmRlclJhbms6IExva2lPcGVyYXRpb25PcmRlci5MaW5lRmlsdGVycyxcbiAgICAgIHJlbmRlcmVyOiBnZXRMaW5lRmlsdGVyUmVuZGVyZXIoJyE9JyksXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6IChvcCkgPT4gYFJldHVybiBsb2cgbGluZXMgdGhhdCBkb2VzIG5vdCBjb250YWluIHN0cmluZyBcXGAke29wLnBhcmFtc1swXX1cXGAuYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUNvbnRhaW5zQ2FzZUluc2Vuc2l0aXZlLFxuICAgICAgbmFtZTogJ0xpbmUgY29udGFpbnMgY2FzZSBpbnNlbnNpdGl2ZScsXG4gICAgICBwYXJhbXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdTdHJpbmcnLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGhpZGVOYW1lOiB0cnVlLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnVGV4dCB0byBmaW5kJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0ZpbmQgbG9nIGxpbmVzIHRoYXQgY29udGFpbnMgdGhpcyB0ZXh0JyxcbiAgICAgICAgICBtaW5XaWR0aDogMzMsXG4gICAgICAgICAgcnVuUXVlcnlPbkVudGVyOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGRlZmF1bHRQYXJhbXM6IFsnJ10sXG4gICAgICBhbHRlcm5hdGl2ZXNLZXk6ICdsaW5lIGZpbHRlcicsXG4gICAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuTGluZUZpbHRlcnMsXG4gICAgICBvcmRlclJhbms6IExva2lPcGVyYXRpb25PcmRlci5MaW5lRmlsdGVycyxcbiAgICAgIHJlbmRlcmVyOiBnZXRMaW5lRmlsdGVyUmVuZGVyZXIoJ3x+JywgdHJ1ZSksXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6IChvcCkgPT4gYFJldHVybiBsb2cgbGluZXMgdGhhdCBtYXRjaCByZWdleCBcXGAoP2kpJHtvcC5wYXJhbXNbMF19XFxgLmAsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogTG9raU9wZXJhdGlvbklkLkxpbmVDb250YWluc05vdENhc2VJbnNlbnNpdGl2ZSxcbiAgICAgIG5hbWU6ICdMaW5lIGRvZXMgbm90IGNvbnRhaW4gY2FzZSBpbnNlbnNpdGl2ZScsXG4gICAgICBwYXJhbXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdTdHJpbmcnLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGhpZGVOYW1lOiB0cnVlLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnVGV4dCB0byBleGNsdWRlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0ZpbmQgbG9nIGxpbmVzIHRoYXQgZG9lcyBub3QgY29udGFpbiB0aGlzIHRleHQnLFxuICAgICAgICAgIG1pbldpZHRoOiA0MCxcbiAgICAgICAgICBydW5RdWVyeU9uRW50ZXI6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZGVmYXVsdFBhcmFtczogWycnXSxcbiAgICAgIGFsdGVybmF0aXZlc0tleTogJ2xpbmUgZmlsdGVyJyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5MaW5lRmlsdGVycyxcbiAgICAgIG9yZGVyUmFuazogTG9raU9wZXJhdGlvbk9yZGVyLkxpbmVGaWx0ZXJzLFxuICAgICAgcmVuZGVyZXI6IGdldExpbmVGaWx0ZXJSZW5kZXJlcignIX4nLCB0cnVlKSxcbiAgICAgIGFkZE9wZXJhdGlvbkhhbmRsZXI6IGFkZExva2lPcGVyYXRpb24sXG4gICAgICBleHBsYWluSGFuZGxlcjogKG9wKSA9PiBgUmV0dXJuIGxvZyBsaW5lcyB0aGF0IGRvZXMgbm90IG1hdGNoIHJlZ2V4IFxcYCg/aSkke29wLnBhcmFtc1swXX1cXGAuYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZU1hdGNoZXNSZWdleCxcbiAgICAgIG5hbWU6ICdMaW5lIGNvbnRhaW5zIHJlZ2V4IG1hdGNoJyxcbiAgICAgIHBhcmFtczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1JlZ2V4JyxcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBoaWRlTmFtZTogdHJ1ZSxcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ1BhdHRlcm4gdG8gbWF0Y2gnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRmluZCBsb2cgbGluZXMgdGhhdCBtYXRjaCB0aGlzIHJlZ2V4IHBhdHRlcm4nLFxuICAgICAgICAgIG1pbldpZHRoOiAzMCxcbiAgICAgICAgICBydW5RdWVyeU9uRW50ZXI6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZGVmYXVsdFBhcmFtczogWycnXSxcbiAgICAgIGFsdGVybmF0aXZlc0tleTogJ2xpbmUgZmlsdGVyJyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5MaW5lRmlsdGVycyxcbiAgICAgIG9yZGVyUmFuazogTG9raU9wZXJhdGlvbk9yZGVyLkxpbmVGaWx0ZXJzLFxuICAgICAgcmVuZGVyZXI6IGdldExpbmVGaWx0ZXJSZW5kZXJlcignfH4nKSxcbiAgICAgIGFkZE9wZXJhdGlvbkhhbmRsZXI6IGFkZExva2lPcGVyYXRpb24sXG4gICAgICBleHBsYWluSGFuZGxlcjogKG9wKSA9PiBgUmV0dXJuIGxvZyBsaW5lcyB0aGF0IG1hdGNoIGEgXFxgUkUyXFxgIHJlZ2V4IHBhdHRlcm4uIFxcYCR7b3AucGFyYW1zWzBdfVxcYC5gLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IExva2lPcGVyYXRpb25JZC5MaW5lTWF0Y2hlc1JlZ2V4Tm90LFxuICAgICAgbmFtZTogJ0xpbmUgZG9lcyBub3QgbWF0Y2ggcmVnZXgnLFxuICAgICAgcGFyYW1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnUmVnZXgnLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGhpZGVOYW1lOiB0cnVlLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnUGF0dGVybiB0byBleGNsdWRlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0ZpbmQgbG9nIGxpbmVzIHRoYXQgZG9lcyBub3QgbWF0Y2ggdGhpcyByZWdleCBwYXR0ZXJuJyxcbiAgICAgICAgICBtaW5XaWR0aDogMzAsXG4gICAgICAgICAgcnVuUXVlcnlPbkVudGVyOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGRlZmF1bHRQYXJhbXM6IFsnJ10sXG4gICAgICBhbHRlcm5hdGl2ZXNLZXk6ICdsaW5lIGZpbHRlcicsXG4gICAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuTGluZUZpbHRlcnMsXG4gICAgICBvcmRlclJhbms6IExva2lPcGVyYXRpb25PcmRlci5MaW5lRmlsdGVycyxcbiAgICAgIHJlbmRlcmVyOiBnZXRMaW5lRmlsdGVyUmVuZGVyZXIoJyF+JyksXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6IChvcCkgPT4gYFJldHVybiBsb2cgbGluZXMgdGhhdCBkb2Vzbid0IG1hdGNoIGEgXFxgUkUyXFxgIHJlZ2V4IHBhdHRlcm4uIFxcYCR7b3AucGFyYW1zWzBdfVxcYC5gLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IExva2lPcGVyYXRpb25JZC5MaW5lRmlsdGVySXBNYXRjaGVzLFxuICAgICAgbmFtZTogJ0lQIGxpbmUgZmlsdGVyIGV4cHJlc3Npb24nLFxuICAgICAgcGFyYW1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnT3BlcmF0b3InLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIG1pbldpZHRoOiAxNixcbiAgICAgICAgICBvcHRpb25zOiBbbG9raU9wZXJhdG9ycy5jb250YWlucywgbG9raU9wZXJhdG9ycy5kb2VzTm90Q29udGFpbl0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnUGF0dGVybicsXG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6ICc8cGF0dGVybj4nLFxuICAgICAgICAgIG1pbldpZHRoOiAxNixcbiAgICAgICAgICBydW5RdWVyeU9uRW50ZXI6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZGVmYXVsdFBhcmFtczogWyd8PScsICcnXSxcbiAgICAgIGFsdGVybmF0aXZlc0tleTogJ2xpbmUgZmlsdGVyJyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5MaW5lRmlsdGVycyxcbiAgICAgIG9yZGVyUmFuazogTG9raU9wZXJhdGlvbk9yZGVyLkxpbmVGaWx0ZXJzLFxuICAgICAgcmVuZGVyZXI6IChvcCwgZGVmLCBpbm5lckV4cHIpID0+IGAke2lubmVyRXhwcn0gJHtvcC5wYXJhbXNbMF19IGlwKFxcYCR7b3AucGFyYW1zWzFdfVxcYClgLFxuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICAgIGV4cGxhaW5IYW5kbGVyOiAob3ApID0+IGBSZXR1cm4gbG9nIGxpbmVzIHVzaW5nIElQIG1hdGNoaW5nIG9mIFxcYCR7b3AucGFyYW1zWzFdfVxcYGAsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogTG9raU9wZXJhdGlvbklkLkxhYmVsRmlsdGVyLFxuICAgICAgbmFtZTogJ0xhYmVsIGZpbHRlciBleHByZXNzaW9uJyxcbiAgICAgIHBhcmFtczogW1xuICAgICAgICB7IG5hbWU6ICdMYWJlbCcsIHR5cGU6ICdzdHJpbmcnLCBtaW5XaWR0aDogMTQgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdPcGVyYXRvcicsXG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgbWluV2lkdGg6IDE0LFxuICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgIGxva2lPcGVyYXRvcnMuZXF1YWxzLFxuICAgICAgICAgICAgbG9raU9wZXJhdG9ycy5kb2VzTm90RXF1YWwsXG4gICAgICAgICAgICBsb2tpT3BlcmF0b3JzLm1hdGNoZXNSZWdleCxcbiAgICAgICAgICAgIGxva2lPcGVyYXRvcnMuZG9lc05vdE1hdGNoUmVnZXgsXG4gICAgICAgICAgICBsb2tpT3BlcmF0b3JzLmdyZWF0ZXJUaGFuLFxuICAgICAgICAgICAgbG9raU9wZXJhdG9ycy5sZXNzVGhhbixcbiAgICAgICAgICAgIGxva2lPcGVyYXRvcnMuZ3JlYXRlclRoYW5PckVxdWFsLFxuICAgICAgICAgICAgbG9raU9wZXJhdG9ycy5sZXNzVGhhbk9yRXF1YWwsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBuYW1lOiAnVmFsdWUnLCB0eXBlOiAnc3RyaW5nJywgbWluV2lkdGg6IDE0IH0sXG4gICAgICBdLFxuICAgICAgZGVmYXVsdFBhcmFtczogWycnLCAnPScsICcnXSxcbiAgICAgIGFsdGVybmF0aXZlc0tleTogJ2xhYmVsIGZpbHRlcicsXG4gICAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuTGFiZWxGaWx0ZXJzLFxuICAgICAgb3JkZXJSYW5rOiBMb2tpT3BlcmF0aW9uT3JkZXIuUGlwZU9wZXJhdGlvbnMsXG4gICAgICByZW5kZXJlcjogbGFiZWxGaWx0ZXJSZW5kZXJlcixcbiAgICAgIGFkZE9wZXJhdGlvbkhhbmRsZXI6IGFkZExva2lPcGVyYXRpb24sXG4gICAgICBleHBsYWluSGFuZGxlcjogKCkgPT4gYExhYmVsIGV4cHJlc3Npb24gZmlsdGVyIGFsbG93cyBmaWx0ZXJpbmcgdXNpbmcgb3JpZ2luYWwgYW5kIGV4dHJhY3RlZCBsYWJlbHMuYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXJJcE1hdGNoZXMsXG4gICAgICBuYW1lOiAnSVAgbGFiZWwgZmlsdGVyIGV4cHJlc3Npb24nLFxuICAgICAgcGFyYW1zOiBbXG4gICAgICAgIHsgbmFtZTogJ0xhYmVsJywgdHlwZTogJ3N0cmluZycsIG1pbldpZHRoOiAxNCB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ09wZXJhdG9yJyxcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBtaW5XaWR0aDogMTQsXG4gICAgICAgICAgb3B0aW9uczogW2xva2lPcGVyYXRvcnMuZXF1YWxzLCBsb2tpT3BlcmF0b3JzLmRvZXNOb3RFcXVhbF0sXG4gICAgICAgIH0sXG4gICAgICAgIHsgbmFtZTogJ1ZhbHVlJywgdHlwZTogJ3N0cmluZycsIG1pbldpZHRoOiAxNCB9LFxuICAgICAgXSxcbiAgICAgIGRlZmF1bHRQYXJhbXM6IFsnJywgJz0nLCAnJ10sXG4gICAgICBhbHRlcm5hdGl2ZXNLZXk6ICdsYWJlbCBmaWx0ZXInLFxuICAgICAgY2F0ZWdvcnk6IExva2lWaXN1YWxRdWVyeU9wZXJhdGlvbkNhdGVnb3J5LkxhYmVsRmlsdGVycyxcbiAgICAgIG9yZGVyUmFuazogTG9raU9wZXJhdGlvbk9yZGVyLlBpcGVPcGVyYXRpb25zLFxuICAgICAgcmVuZGVyZXI6IChtb2RlbCwgZGVmLCBpbm5lckV4cHIpID0+XG4gICAgICAgIGAke2lubmVyRXhwcn0gfCAke21vZGVsLnBhcmFtc1swXX0gJHttb2RlbC5wYXJhbXNbMV19IGlwKFxcYCR7bW9kZWwucGFyYW1zWzJdfVxcYClgLFxuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICAgIGV4cGxhaW5IYW5kbGVyOiAob3ApID0+IGBSZXR1cm4gbG9nIGxpbmVzIHVzaW5nIElQIG1hdGNoaW5nIG9mIFxcYCR7b3AucGFyYW1zWzJdfVxcYCBmb3IgXFxgJHtvcC5wYXJhbXNbMF19XFxgIGxhYmVsYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXJOb0Vycm9ycyxcbiAgICAgIG5hbWU6ICdObyBwaXBlbGluZSBlcnJvcnMnLFxuICAgICAgcGFyYW1zOiBbXSxcbiAgICAgIGRlZmF1bHRQYXJhbXM6IFtdLFxuICAgICAgYWx0ZXJuYXRpdmVzS2V5OiAnbGFiZWwgZmlsdGVyJyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5MYWJlbEZpbHRlcnMsXG4gICAgICBvcmRlclJhbms6IExva2lPcGVyYXRpb25PcmRlci5Ob0Vycm9ycyxcbiAgICAgIHJlbmRlcmVyOiAobW9kZWwsIGRlZiwgaW5uZXJFeHByKSA9PiBgJHtpbm5lckV4cHJ9IHwgX19lcnJvcl9fPVxcYFxcYGAsXG4gICAgICBhZGRPcGVyYXRpb25IYW5kbGVyOiBhZGRMb2tpT3BlcmF0aW9uLFxuICAgICAgZXhwbGFpbkhhbmRsZXI6ICgpID0+IGBGaWx0ZXIgb3V0IGFsbCBmb3JtYXR0aW5nIGFuZCBwYXJzaW5nIGVycm9ycy5gLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IExva2lPcGVyYXRpb25JZC5VbndyYXAsXG4gICAgICBuYW1lOiAnVW53cmFwJyxcbiAgICAgIHBhcmFtczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ0lkZW50aWZpZXInLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGhpZGVOYW1lOiB0cnVlLFxuICAgICAgICAgIG1pbldpZHRoOiAxNixcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ0xhYmVsIGtleScsXG4gICAgICAgICAgZWRpdG9yOiBVbndyYXBQYXJhbUVkaXRvcixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdDb252ZXJzaW9uIGZ1bmN0aW9uJyxcbiAgICAgICAgICBoaWRlTmFtZTogdHJ1ZSxcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ2R1cmF0aW9uJywgJ2R1cmF0aW9uX3NlY29uZHMnLCAnYnl0ZXMnXSxcbiAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbJycsICcnXSxcbiAgICAgIGFsdGVybmF0aXZlc0tleTogJ2Zvcm1hdCcsXG4gICAgICBjYXRlZ29yeTogTG9raVZpc3VhbFF1ZXJ5T3BlcmF0aW9uQ2F0ZWdvcnkuRm9ybWF0cyxcbiAgICAgIG9yZGVyUmFuazogTG9raU9wZXJhdGlvbk9yZGVyLlVud3JhcCxcbiAgICAgIHJlbmRlcmVyOiAob3AsIGRlZiwgaW5uZXJFeHByKSA9PlxuICAgICAgICBgJHtpbm5lckV4cHJ9IHwgdW53cmFwICR7b3AucGFyYW1zWzFdID8gYCR7b3AucGFyYW1zWzFdfSgke29wLnBhcmFtc1swXX0pYCA6IG9wLnBhcmFtc1swXX1gLFxuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICAgIGV4cGxhaW5IYW5kbGVyOiAob3ApID0+IHtcbiAgICAgICAgbGV0IGxhYmVsID0gU3RyaW5nKG9wLnBhcmFtc1swXSkubGVuZ3RoID4gMCA/IG9wLnBhcmFtc1swXSA6ICc8bGFiZWw+JztcbiAgICAgICAgcmV0dXJuIGBVc2UgdGhlIGV4dHJhY3RlZCBsYWJlbCBcXGAke2xhYmVsfVxcYCBhcyBzYW1wbGUgdmFsdWVzIGluc3RlYWQgb2YgbG9nIGxpbmVzIGZvciB0aGUgc3Vic2VxdWVudCByYW5nZSBhZ2dyZWdhdGlvbi4ke1xuICAgICAgICAgIG9wLnBhcmFtc1sxXVxuICAgICAgICAgICAgPyBgIENvbnZlcnNpb24gZnVuY3Rpb24gXFxgJHtvcC5wYXJhbXNbMV19XFxgIHdyYXBwaW5nIFxcYCR7bGFiZWx9XFxgIHdpbGwgYXR0ZW1wdCB0byBjb252ZXJ0IHRoaXMgbGFiZWwgZnJvbSBhIHNwZWNpZmljIGZvcm1hdCAoZS5nLiAzaywgNTAwbXMpLmBcbiAgICAgICAgICAgIDogJydcbiAgICAgICAgfWA7XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IExva2lPcGVyYXRpb25JZC5EZWNvbG9yaXplLFxuICAgICAgbmFtZTogJ0RlY29sb3JpemUnLFxuICAgICAgcGFyYW1zOiBbXSxcbiAgICAgIGRlZmF1bHRQYXJhbXM6IFtdLFxuICAgICAgYWx0ZXJuYXRpdmVzS2V5OiAnZm9ybWF0JyxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5Gb3JtYXRzLFxuICAgICAgb3JkZXJSYW5rOiBMb2tpT3BlcmF0aW9uT3JkZXIuUGlwZU9wZXJhdGlvbnMsXG4gICAgICByZW5kZXJlcjogKG9wLCBkZWYsIGlubmVyRXhwcikgPT4gYCR7aW5uZXJFeHByfSB8IGRlY29sb3JpemVgLFxuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTG9raU9wZXJhdGlvbixcbiAgICAgIGV4cGxhaW5IYW5kbGVyOiAoKSA9PiBgVGhpcyB3aWxsIHJlbW92ZSBBTlNJIGNvbG9yIGNvZGVzIGZyb20gbG9nIGxpbmVzLmAsXG4gICAgfSxcbiAgICAuLi5iaW5hcnlTY2FsYXJPcGVyYXRpb25zLFxuICAgIHtcbiAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTmVzdGVkUXVlcnksXG4gICAgICBuYW1lOiAnQmluYXJ5IG9wZXJhdGlvbiB3aXRoIHF1ZXJ5JyxcbiAgICAgIHBhcmFtczogW10sXG4gICAgICBkZWZhdWx0UGFyYW1zOiBbXSxcbiAgICAgIGNhdGVnb3J5OiBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeS5CaW5hcnlPcHMsXG4gICAgICByZW5kZXJlcjogKG1vZGVsLCBkZWYsIGlubmVyRXhwcikgPT4gaW5uZXJFeHByLFxuICAgICAgYWRkT3BlcmF0aW9uSGFuZGxlcjogYWRkTmVzdGVkUXVlcnlIYW5kbGVyLFxuICAgIH0sXG4gIF07XG5cbiAgcmV0dXJuIGxpc3Q7XG59XG5cbi8vIEtlZXBpbmcgYSBsb2NhbCBjb3B5IGFzIGFuIG9wdGltaXphdGlvbiBtZWFzdXJlLlxuY29uc3QgZGVmaW5pdGlvbnMgPSBnZXRPcGVyYXRpb25EZWZpbml0aW9ucygpO1xuXG4vKipcbiAqIEdpdmVuIGFuIG9wZXJhdG9yLCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgZXhwbGFpbi5cbiAqIEZvciB1c2FnZSB3aXRoaW4gdGhlIFF1ZXJ5IEVkaXRvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGxhaW5PcGVyYXRvcihpZDogTG9raU9wZXJhdGlvbklkIHwgc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZGVmaW5pdGlvbiA9IGRlZmluaXRpb25zLmZpbmQoKG9wZXJhdGlvbikgPT4gb3BlcmF0aW9uLmlkID09PSBpZCk7XG5cbiAgY29uc3QgZXhwbGFpbiA9IGRlZmluaXRpb24/LmV4cGxhaW5IYW5kbGVyPy4oeyBpZDogJycsIHBhcmFtczogWyc8dmFsdWU+J10gfSkgfHwgJyc7XG5cbiAgLy8gU3RyaXAgbWFya2Rvd24gbGlua3NcbiAgcmV0dXJuIGV4cGxhaW4ucmVwbGFjZSgvXFxbKC4qKVxcXVxcKC4qXFwpL2csICckMScpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmaW5pdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZiB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBkZWZpbml0aW9ucy5maW5kKCh4KSA9PiB4LmlkID09PSBpZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1BhcmFtc0FyZVZhbGlkKGRlZjogUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmLCBwYXJhbXM6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvblBhcmFtVmFsdWVbXSk6IGJvb2xlYW4ge1xuICAvLyBGb3Igbm93IHdlIG9ubHkgY2hlY2sgaWYgdGhlIG9wZXJhdGlvbiBoYXMgYWxsIHRoZSByZXF1aXJlZCBwYXJhbXMuXG4gIGlmIChwYXJhbXMubGVuZ3RoIDwgZGVmLnBhcmFtcy5maWx0ZXIoKHBhcmFtKSA9PiAhcGFyYW0ub3B0aW9uYWwpLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/operations.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/parsing.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildVisualQueryFromString: () => (/* binding */ buildVisualQueryFromString),\n/* harmony export */   handleExpression: () => (/* binding */ handleExpression),\n/* harmony export */   handleQuotes: () => (/* binding */ handleQuotes)\n/* harmony export */ });\n/* harmony import */ var _prometheus_io_lezer_promql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@prometheus-io-lezer-promql-virtual-ded3c03445/0/cache/@prometheus-io-lezer-promql-npm-0.37.0-dcde65254c-17722456a6.zip/node_modules/@prometheus-io/lezer-promql/dist/index.es.js\");\n/* harmony import */ var _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-lezer-logql-virtual-0b75aafe9e/0/cache/@grafana-lezer-logql-npm-0.1.11-91e9d74a76-6a624b9a8d.zip/node_modules/@grafana/lezer-logql/index.es.js\");\n/* harmony import */ var _prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/parsingUtils.ts\");\n/* harmony import */ var _binaryScalarOperations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/binaryScalarOperations.ts\");\n/* harmony import */ var _operations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/operations.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n\n\n\n\n\n\n\nfunction buildVisualQueryFromString(expr) {\n  const replacedExpr = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.replaceVariables)(expr);\n  const tree = _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.parser.parse(replacedExpr);\n  const node = tree.topNode;\n  const visQuery = {\n    labels: [],\n    operations: []\n  };\n  const context = {\n    query: visQuery,\n    errors: []\n  };\n  try {\n    handleExpression(replacedExpr, node, context);\n  } catch (err) {\n    console.error(err);\n    if (err instanceof Error) {\n      context.errors.push({\n        text: err.message\n      });\n    }\n  }\n  if (isEmptyQuery(context.query)) {\n    context.errors = [];\n  }\n  return context;\n}\nfunction handleExpression(expr, node, context) {\n  const visQuery = context.query;\n  switch (node.type.id) {\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Matcher: {\n      visQuery.labels.push(getLabel(expr, node));\n      const err = node.getChild(_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.ErrorId);\n      if (err) {\n        context.errors.push((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.makeError)(expr, err));\n      }\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LineFilter: {\n      const { operation, error } = getLineFilter(expr, node);\n      if (operation) {\n        visQuery.operations.push(operation);\n      }\n      if (error) {\n        context.errors.push(createNotSupportedError(expr, node, error));\n      }\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelParser: {\n      visQuery.operations.push(getLabelParser(expr, node));\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFilter: {\n      const { operation, error } = getLabelFilter(expr, node);\n      if (operation) {\n        visQuery.operations.push(operation);\n      }\n      if (error) {\n        context.errors.push(createNotSupportedError(expr, node, error));\n      }\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.JsonExpressionParser: {\n      visQuery.operations.push(getJsonExpressionParser(expr, node));\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LineFormatExpr: {\n      visQuery.operations.push(getLineFormat(expr, node));\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFormatMatcher: {\n      visQuery.operations.push(getLabelFormat(expr, node));\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.UnwrapExpr: {\n      const { operation, error } = handleUnwrapExpr(expr, node, context);\n      if (operation) {\n        visQuery.operations.push(operation);\n      }\n      if (error) {\n        context.errors.push(createNotSupportedError(expr, node, error));\n      }\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Decolorize: {\n      visQuery.operations.push(getDecolorize());\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.RangeAggregationExpr: {\n      visQuery.operations.push(handleRangeAggregation(expr, node, context));\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.VectorAggregationExpr: {\n      visQuery.operations.push(handleVectorAggregation(expr, node, context));\n      break;\n    }\n    case _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.BinOpExpr: {\n      handleBinary(expr, node, context);\n      break;\n    }\n    case _prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.ErrorId: {\n      if (isIntervalVariableError(node)) {\n        break;\n      }\n      context.errors.push((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.makeError)(expr, node));\n      break;\n    }\n    default: {\n      let child = node.firstChild;\n      while (child) {\n        handleExpression(expr, child, context);\n        child = child.nextSibling;\n      }\n    }\n  }\n}\nfunction getLabel(expr, node) {\n  const labelNode = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Identifier);\n  const label = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, labelNode);\n  const op = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, labelNode.nextSibling);\n  let value = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.String));\n  value = value.substring(1, value.length - 1);\n  return {\n    label,\n    op,\n    value\n  };\n}\nfunction getLineFilter(expr, node) {\n  const filter = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Filter));\n  const filterExpr = handleQuotes((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.String)));\n  const ipLineFilter = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.FilterOp)?.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Ip);\n  if (ipLineFilter) {\n    return {\n      operation: {\n        id: _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LineFilterIpMatches,\n        params: [filter, filterExpr]\n      }\n    };\n  }\n  const mapFilter = {\n    \"|=\": _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LineContains,\n    \"!=\": _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LineContainsNot,\n    \"|~\": _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LineMatchesRegex,\n    \"!~\": _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LineMatchesRegexNot\n  };\n  return {\n    operation: {\n      id: mapFilter[filter],\n      params: [filterExpr]\n    }\n  };\n}\nfunction getLabelParser(expr, node) {\n  const parserNode = node.firstChild;\n  const parser2 = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, parserNode);\n  const string = handleQuotes((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.String)));\n  let params = !!string ? [string] : [];\n  const opDef = (0,_operations__WEBPACK_IMPORTED_MODULE_4__.getDefinitionById)(parser2);\n  if (opDef && !(0,_operations__WEBPACK_IMPORTED_MODULE_4__.checkParamsAreValid)(opDef, params)) {\n    params = opDef?.defaultParams || [];\n  }\n  return {\n    id: parser2,\n    params\n  };\n}\nfunction getJsonExpressionParser(expr, node) {\n  const parserNode = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Json);\n  const parser2 = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, parserNode);\n  const params = [...(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getAllByType)(expr, node, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.JsonExpression)];\n  return {\n    id: parser2,\n    params\n  };\n}\nfunction getLabelFilter(expr, node) {\n  if (node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Or) || node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.And) || node.getChild(\"Comma\")) {\n    return {\n      error: 'Label filter with comma, \"and\", \"or\" not supported in query builder'\n    };\n  }\n  if (node.firstChild.type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.IpLabelFilter) {\n    const ipLabelFilter = node.firstChild;\n    const label2 = ipLabelFilter?.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Identifier);\n    const op2 = label2?.nextSibling;\n    const value2 = ipLabelFilter?.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.String);\n    const valueString = handleQuotes((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, value2));\n    return {\n      operation: {\n        id: _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LabelFilterIpMatches,\n        params: [(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, label2), (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, op2), valueString]\n      }\n    };\n  }\n  const id = _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LabelFilter;\n  if (node.firstChild.type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.UnitFilter) {\n    const filter2 = node.firstChild.firstChild;\n    const label2 = filter2.firstChild;\n    const op2 = label2.nextSibling;\n    const value2 = op2.nextSibling;\n    const valueString = handleQuotes((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, value2));\n    return {\n      operation: {\n        id,\n        params: [(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, label2), (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, op2), valueString]\n      }\n    };\n  }\n  const filter = node.firstChild;\n  const label = filter.firstChild;\n  const op = label.nextSibling;\n  const value = op.nextSibling;\n  const params = [(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, label), (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, op), handleQuotes((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, value))];\n  if (params.join(\"\") === `__error__=`) {\n    return {\n      operation: {\n        id: _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LabelFilterNoErrors,\n        params: []\n      }\n    };\n  }\n  return {\n    operation: {\n      id,\n      params\n    }\n  };\n}\nfunction getLineFormat(expr, node) {\n  const id = _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LineFormat;\n  const string = handleQuotes((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.String)));\n  return {\n    id,\n    params: [string]\n  };\n}\nfunction getLabelFormat(expr, node) {\n  const id = _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.LabelFormat;\n  const renameTo = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Identifier);\n  const op = renameTo.nextSibling;\n  const originalLabel = op.nextSibling;\n  return {\n    id,\n    params: [(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, originalLabel), handleQuotes((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, renameTo))]\n  };\n}\nfunction getDecolorize() {\n  const id = _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.Decolorize;\n  return {\n    id,\n    params: []\n  };\n}\nfunction handleUnwrapExpr(expr, node, context) {\n  const unwrapExprChild = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.UnwrapExpr);\n  const labelFilterChild = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LabelFilter);\n  const unwrapChild = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Unwrap);\n  if (unwrapExprChild) {\n    handleExpression(expr, unwrapExprChild, context);\n  }\n  if (labelFilterChild) {\n    handleExpression(expr, labelFilterChild, context);\n  }\n  if (unwrapChild) {\n    if (unwrapChild.nextSibling?.type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.ConvOp) {\n      const convOp = unwrapChild.nextSibling;\n      const identifier = convOp.nextSibling;\n      return {\n        operation: {\n          id: _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.Unwrap,\n          params: [(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, identifier), (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, convOp)]\n        }\n      };\n    }\n    return {\n      operation: {\n        id: _types__WEBPACK_IMPORTED_MODULE_5__.LokiOperationId.Unwrap,\n        params: [(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, unwrapChild?.nextSibling), \"\"]\n      }\n    };\n  }\n  return {};\n}\nfunction handleRangeAggregation(expr, node, context) {\n  const nameNode = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.RangeOp);\n  const funcName = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, nameNode);\n  const number = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Number);\n  const logExpr = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.LogRangeExpr);\n  const params = number !== null && number !== void 0 ? [(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, number)] : [];\n  const range = logExpr?.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Range);\n  const rangeValue = range ? (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, range) : null;\n  if (rangeValue) {\n    params.unshift(rangeValue.substring(1, rangeValue.length - 1));\n  }\n  const op = {\n    id: funcName,\n    params\n  };\n  if (logExpr) {\n    handleExpression(expr, logExpr, context);\n  }\n  return op;\n}\nfunction handleVectorAggregation(expr, node, context) {\n  const nameNode = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.VectorOp);\n  let funcName = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, nameNode);\n  const grouping = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Grouping);\n  const params = [];\n  const numberNode = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Number);\n  if (numberNode) {\n    params.push(Number((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, numberNode)));\n  }\n  if (grouping) {\n    const byModifier = grouping.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.By);\n    if (byModifier && funcName) {\n      funcName = `__${funcName}_by`;\n    }\n    const withoutModifier = grouping.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Without);\n    if (withoutModifier) {\n      funcName = `__${funcName}_without`;\n    }\n    params.push(...(0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getAllByType)(expr, grouping, _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Identifier));\n  }\n  const metricExpr = node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.MetricExpr);\n  const op = { id: funcName, params };\n  if (metricExpr) {\n    handleExpression(expr, metricExpr, context);\n  }\n  return op;\n}\nconst operatorToOpName = _binaryScalarOperations__WEBPACK_IMPORTED_MODULE_3__.binaryScalarDefs.reduce((acc, def) => {\n  acc[def.sign] = {\n    id: def.id,\n    comparison: def.comparison\n  };\n  return acc;\n}, {});\nfunction handleBinary(expr, node, context) {\n  const visQuery = context.query;\n  const left = node.firstChild;\n  const op = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, left.nextSibling);\n  const binModifier = getBinaryModifier(expr, node.getChild(_prometheus_io_lezer_promql__WEBPACK_IMPORTED_MODULE_0__.BinModifiers));\n  const right = node.lastChild;\n  const opDef = operatorToOpName[op];\n  const leftNumber = getLastChildWithSelector(left, \"MetricExpr.LiteralExpr.Number\");\n  const rightNumber = getLastChildWithSelector(right, \"MetricExpr.LiteralExpr.Number\");\n  const rightBinary = right.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.BinOpExpr);\n  if (leftNumber) {\n  } else {\n    handleExpression(expr, left, context);\n  }\n  if (rightNumber) {\n    visQuery.operations.push((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.makeBinOp)(opDef, expr, right, !!binModifier?.isBool));\n  } else if (rightBinary) {\n    const leftMostChild = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getLeftMostChild)(right);\n    if (leftMostChild?.name === \"Number\") {\n      visQuery.operations.push((0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.makeBinOp)(opDef, expr, leftMostChild, !!binModifier?.isBool));\n    }\n    handleExpression(expr, right, context);\n  } else {\n    visQuery.binaryQueries = visQuery.binaryQueries || [];\n    const binQuery = {\n      operator: op,\n      query: {\n        labels: [],\n        operations: []\n      }\n    };\n    if (binModifier?.isMatcher) {\n      binQuery.vectorMatchesType = binModifier.matchType;\n      binQuery.vectorMatches = binModifier.matches;\n    }\n    visQuery.binaryQueries.push(binQuery);\n    handleExpression(expr, right, {\n      query: binQuery.query,\n      errors: context.errors\n    });\n  }\n}\nfunction getBinaryModifier(expr, node) {\n  if (!node) {\n    return void 0;\n  }\n  if (node.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Bool)) {\n    return { isBool: true, isMatcher: false };\n  } else {\n    const matcher = node.getChild(_prometheus_io_lezer_promql__WEBPACK_IMPORTED_MODULE_0__.OnOrIgnoring);\n    if (!matcher) {\n      return void 0;\n    }\n    const labels = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.getString)(expr, matcher.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.GroupingLabels)?.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.GroupingLabelList));\n    return {\n      isMatcher: true,\n      isBool: false,\n      matches: labels,\n      matchType: matcher.getChild(_grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.On) ? \"on\" : \"ignoring\"\n    };\n  }\n}\nfunction isIntervalVariableError(node) {\n  return node?.parent?.type.id === _grafana_lezer_logql__WEBPACK_IMPORTED_MODULE_1__.Range;\n}\nfunction handleQuotes(string) {\n  if (string[0] === `\"` && string[string.length - 1] === `\"`) {\n    return string.substring(1, string.length - 1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, \"\\\\\");\n  }\n  return string.replace(/`/g, \"\");\n}\nfunction getLastChildWithSelector(node, selector) {\n  let child = node;\n  const children = selector.split(\".\");\n  for (const s of children) {\n    child = child.getChild(s);\n    if (!child) {\n      return null;\n    }\n  }\n  return child;\n}\nfunction createNotSupportedError(expr, node, error) {\n  const err = (0,_prometheus_querybuilder_shared_parsingUtils__WEBPACK_IMPORTED_MODULE_2__.makeError)(expr, node);\n  err.text = `${error}: ${err.text}`;\n  return err;\n}\nfunction isEmptyQuery(query) {\n  if (query.labels.length === 0 && query.operations.length === 0) {\n    return true;\n  }\n  return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9wYXJzaW5nLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFDMkM7QUEwQ3BDO0FBVUE7QUFPMEI7QUFDc0I7QUFDaUI7QUFjakUsU0FBUywyQkFBMkIsTUFBdUI7QUFDaEUsUUFBTSxlQUFlLDhGQUFnQixDQUFDLElBQUk7QUFDMUMsUUFBTSxPQUFPLHdEQUFNLENBQUMsTUFBTSxZQUFZO0FBQ3RDLFFBQU0sT0FBTyxLQUFLO0FBR2xCLFFBQU0sV0FBNEI7QUFBQSxJQUNoQyxRQUFRLENBQUM7QUFBQSxJQUNULFlBQVksQ0FBQztBQUFBLEVBQ2Y7QUFFQSxRQUFNLFVBQW1CO0FBQUEsSUFDdkIsT0FBTztBQUFBLElBQ1AsUUFBUSxDQUFDO0FBQUEsRUFDWDtBQUVBLE1BQUk7QUFDRixxQkFBaUIsY0FBYyxNQUFNLE9BQU87QUFBQSxFQUM5QyxTQUFTLEtBQVA7QUFFQSxZQUFRLE1BQU0sR0FBRztBQUNqQixRQUFJLGVBQWUsT0FBTztBQUN4QixjQUFRLE9BQU8sS0FBSztBQUFBLFFBQ2xCLE1BQU0sSUFBSTtBQUFBLE1BQ1osQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBR0EsTUFBSSxhQUFhLFFBQVEsS0FBSyxHQUFHO0FBQy9CLFlBQVEsU0FBUyxDQUFDO0FBQUEsRUFDcEI7QUFDQSxTQUFPO0FBQ1Q7QUFFTyxTQUFTLGlCQUFpQixNQUFjLE1BQWtCLFNBQWtCO0FBQ2pGLFFBQU0sV0FBVyxRQUFRO0FBQ3pCLFVBQVEsS0FBSyxLQUFLLElBQUk7QUFBQSxJQUNwQixLQUFLLHlEQUFPLEVBQUU7QUFDWixlQUFTLE9BQU8sS0FBSyxTQUFTLE1BQU0sSUFBSSxDQUFDO0FBQ3pDLFlBQU0sTUFBTSxLQUFLLFNBQVMsaUZBQU87QUFDakMsVUFBSSxLQUFLO0FBQ1AsZ0JBQVEsT0FBTyxLQUFLLHVGQUFTLENBQUMsTUFBTSxHQUFHLENBQUM7QUFBQSxNQUMxQztBQUNB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QUNMLFdBQVc7QUFBQSxNQUNYLFFBQVE7QUFBQSxNQUNSLFNBQVM7QUFBQSxNQUNULFdBQVcsUUFBUSxTQUFTLG9EQUFFLElBQUksT0FBTztBQUFBLElBQzNDO0FBQUEsRUFDRjtBQUNGO0FBRUEsU0FBUyx3QkFBd0IsTUFBa0I7QUFDakQsU0FBTyxNQUFNLFFBQVEsS0FBSyxPQUFPLHVEQUFLO0FBQ3hDO0FBRU8sU0FBUyxhQUFhLFFBQWdCO0FBQzNDLE1BQUksT0FBTyxDQUFDLE1BQU0sT0FBTyxPQUFPLE9BQU8sU0FBUyxDQUFDLE1BQU0sS0FBSztBQUMxRCxXQUFPLE9BQ0osVUFBVSxHQUFHLE9BQU8sU0FBUyxDQUFDLEVBQzlCLFFBQVEsUUFBUSxHQUFHLEVBQ25CLFFBQVEsU0FBUyxJQUFJO0FBQUEsRUFDMUI7QUFDQSxTQUFPLE9BQU8sUUFBUSxNQUFNLEVBQUU7QUFDaEM7QUFRQSxTQUFTLHlCQUF5QixNQUFrQixVQUFrQjtBQUNwRSxNQUFJLFFBQTJCO0FBQy9CLFFBQU0sV0FBVyxTQUFTLE1BQU0sR0FBRztBQUNuQyxhQUFXLEtBQUssVUFBVTtBQUN4QixZQUFRLE1BQU0sU0FBUyxDQUFDO0FBQ3hCLFFBQUksQ0FBQyxPQUFPO0FBQ1YsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGO0FBQ0EsU0FBTztBQUNUO0FBUUEsU0FBUyx3QkFBd0IsTUFBYyxNQUFrQixPQUFlO0FBQzlFLFFBQU0sTUFBTSx1RkFBUyxDQUFDLE1BQU0sSUFBSTtBQUNoQyxNQUFJLE9BQU8sR0FBRyxVQUFVLElBQUk7QUFDNUIsU0FBTztBQUNUO0FBRUEsU0FBUyxhQUFhLE9BQXdCO0FBQzVDLE1BQUksTUFBTSxPQUFPLFdBQVcsS0FBSyxNQUFNLFdBQVcsV0FBVyxHQUFHO0FBQzlELFdBQU87QUFBQSxFQUNUO0FBQ0EsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvcXVlcnlidWlsZGVyL3BhcnNpbmcudHM/OTVhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTeW50YXhOb2RlIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5pbXBvcnQgeyBCaW5Nb2RpZmllcnMsIE9uT3JJZ25vcmluZyB9IGZyb20gJ0Bwcm9tZXRoZXVzLWlvL2xlemVyLXByb21xbCc7XG5cbmltcG9ydCB7XG4gIEFuZCxcbiAgQmluT3BFeHByLFxuICBCb29sLFxuICBCeSxcbiAgQ29udk9wLFxuICBEZWNvbG9yaXplLFxuICBGaWx0ZXIsXG4gIEZpbHRlck9wLFxuICBHcm91cGluZyxcbiAgR3JvdXBpbmdMYWJlbExpc3QsXG4gIEdyb3VwaW5nTGFiZWxzLFxuICBJZGVudGlmaWVyLFxuICBJcCxcbiAgSXBMYWJlbEZpbHRlcixcbiAgSnNvbixcbiAgSnNvbkV4cHJlc3Npb24sXG4gIEpzb25FeHByZXNzaW9uUGFyc2VyLFxuICBMYWJlbEZpbHRlcixcbiAgTGFiZWxGb3JtYXRNYXRjaGVyLFxuICBMYWJlbFBhcnNlcixcbiAgTGluZUZpbHRlcixcbiAgTGluZUZvcm1hdEV4cHIsXG4gIExvZ1JhbmdlRXhwcixcbiAgTWF0Y2hlcixcbiAgTWV0cmljRXhwcixcbiAgTnVtYmVyIGFzIE51bWJlckxlemVyLFxuICBPbixcbiAgT3IsXG4gIHBhcnNlcixcbiAgUmFuZ2UsXG4gIFJhbmdlQWdncmVnYXRpb25FeHByLFxuICBSYW5nZU9wLFxuICBTdHJpbmcsXG4gIFVuaXRGaWx0ZXIsXG4gIFVud3JhcCxcbiAgVW53cmFwRXhwcixcbiAgVmVjdG9yQWdncmVnYXRpb25FeHByLFxuICBWZWN0b3JPcCxcbiAgV2l0aG91dCxcbn0gZnJvbSAnQGdyYWZhbmEvbGV6ZXItbG9ncWwnO1xuXG5pbXBvcnQge1xuICBFcnJvcklkLFxuICBnZXRBbGxCeVR5cGUsXG4gIGdldExlZnRNb3N0Q2hpbGQsXG4gIGdldFN0cmluZyxcbiAgbWFrZUJpbk9wLFxuICBtYWtlRXJyb3IsXG4gIHJlcGxhY2VWYXJpYWJsZXMsXG59IGZyb20gJy4uLy4uL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9wYXJzaW5nVXRpbHMnO1xuaW1wb3J0IHtcbiAgUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIsXG4gIFF1ZXJ5QnVpbGRlck9wZXJhdGlvbixcbiAgUXVlcnlCdWlsZGVyT3BlcmF0aW9uUGFyYW1WYWx1ZSxcbn0gZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL3R5cGVzJztcblxuaW1wb3J0IHsgYmluYXJ5U2NhbGFyRGVmcyB9IGZyb20gJy4vYmluYXJ5U2NhbGFyT3BlcmF0aW9ucyc7XG5pbXBvcnQgeyBjaGVja1BhcmFtc0FyZVZhbGlkLCBnZXREZWZpbml0aW9uQnlJZCB9IGZyb20gJy4vb3BlcmF0aW9ucyc7XG5pbXBvcnQgeyBMb2tpT3BlcmF0aW9uSWQsIExva2lWaXN1YWxRdWVyeSwgTG9raVZpc3VhbFF1ZXJ5QmluYXJ5IH0gZnJvbSAnLi90eXBlcyc7XG5cbmludGVyZmFjZSBDb250ZXh0IHtcbiAgcXVlcnk6IExva2lWaXN1YWxRdWVyeTtcbiAgZXJyb3JzOiBQYXJzaW5nRXJyb3JbXTtcbn1cblxuaW50ZXJmYWNlIFBhcnNpbmdFcnJvciB7XG4gIHRleHQ6IHN0cmluZztcbiAgZnJvbT86IG51bWJlcjtcbiAgdG8/OiBudW1iZXI7XG4gIHBhcmVudFR5cGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFZpc3VhbFF1ZXJ5RnJvbVN0cmluZyhleHByOiBzdHJpbmcpOiBDb250ZXh0IHtcbiAgY29uc3QgcmVwbGFjZWRFeHByID0gcmVwbGFjZVZhcmlhYmxlcyhleHByKTtcbiAgY29uc3QgdHJlZSA9IHBhcnNlci5wYXJzZShyZXBsYWNlZEV4cHIpO1xuICBjb25zdCBub2RlID0gdHJlZS50b3BOb2RlO1xuXG4gIC8vIFRoaXMgd2lsbCBiZSBtb2RpZmllZCBpbiB0aGUgaGFuZGxlRXhwcmVzc2lvblxuICBjb25zdCB2aXNRdWVyeTogTG9raVZpc3VhbFF1ZXJ5ID0ge1xuICAgIGxhYmVsczogW10sXG4gICAgb3BlcmF0aW9uczogW10sXG4gIH07XG5cbiAgY29uc3QgY29udGV4dDogQ29udGV4dCA9IHtcbiAgICBxdWVyeTogdmlzUXVlcnksXG4gICAgZXJyb3JzOiBbXSxcbiAgfTtcblxuICB0cnkge1xuICAgIGhhbmRsZUV4cHJlc3Npb24ocmVwbGFjZWRFeHByLCBub2RlLCBjb250ZXh0KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gTm90IGlkZWFsIHRvIGxvZyBpdCBoZXJlLCBidXQgb3RoZXJ3aXNlIHdlIHdvdWxkIGxvc2UgdGhlIHN0YWNrIHRyYWNlLlxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnRleHQuZXJyb3JzLnB1c2goe1xuICAgICAgICB0ZXh0OiBlcnIubWVzc2FnZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIElmIHdlIGhhdmUgZW1wdHkgcXVlcnksIHdlIHdhbnQgdG8gcmVzZXQgZXJyb3JzXG4gIGlmIChpc0VtcHR5UXVlcnkoY29udGV4dC5xdWVyeSkpIHtcbiAgICBjb250ZXh0LmVycm9ycyA9IFtdO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlRXhwcmVzc2lvbihleHByOiBzdHJpbmcsIG5vZGU6IFN5bnRheE5vZGUsIGNvbnRleHQ6IENvbnRleHQpIHtcbiAgY29uc3QgdmlzUXVlcnkgPSBjb250ZXh0LnF1ZXJ5O1xuICBzd2l0Y2ggKG5vZGUudHlwZS5pZCkge1xuICAgIGNhc2UgTWF0Y2hlcjoge1xuICAgICAgdmlzUXVlcnkubGFiZWxzLnB1c2goZ2V0TGFiZWwoZXhwciwgbm9kZSkpO1xuICAgICAgY29uc3QgZXJyID0gbm9kZS5nZXRDaGlsZChFcnJvcklkKTtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29udGV4dC5lcnJvcnMucHVzaChtYWtlRXJyb3IoZXhwciwgZXJyKSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlIExpbmVGaWx0ZXI6IHtcbiAgICAgIGNvbnN0IHsgb3BlcmF0aW9uLCBlcnJvciB9ID0gZ2V0TGluZUZpbHRlcihleHByLCBub2RlKTtcbiAgICAgIGlmIChvcGVyYXRpb24pIHtcbiAgICAgICAgdmlzUXVlcnkub3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbik7XG4gICAgICB9XG4gICAgICAvLyBTaG93IGVycm9yIGZvciBxdWVyeSBwYXR0ZXJucyBub3Qgc3VwcG9ydGVkIGluIHZpc3VhbCBxdWVyeSBidWlsZGVyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29udGV4dC5lcnJvcnMucHVzaChjcmVhdGVOb3RTdXBwb3J0ZWRFcnJvcihleHByLCBub2RlLCBlcnJvcikpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSBMYWJlbFBhcnNlcjoge1xuICAgICAgdmlzUXVlcnkub3BlcmF0aW9ucy5wdXNoKGdldExhYmVsUGFyc2VyKGV4cHIsIG5vZGUpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNhc2UgTGFiZWxGaWx0ZXI6IHtcbiAgICAgIGNvbnN0IHsgb3BlcmF0aW9uLCBlcnJvciB9ID0gZ2V0TGFiZWxGaWx0ZXIoZXhwciwgbm9kZSk7XG4gICAgICBpZiAob3BlcmF0aW9uKSB7XG4gICAgICAgIHZpc1F1ZXJ5Lm9wZXJhdGlvbnMucHVzaChvcGVyYXRpb24pO1xuICAgICAgfVxuICAgICAgLy8gU2hvdyBlcnJvciBmb3IgcXVlcnkgcGF0dGVybnMgbm90IHN1cHBvcnRlZCBpbiB2aXN1YWwgcXVlcnkgYnVpbGRlclxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnRleHQuZXJyb3JzLnB1c2goY3JlYXRlTm90U3VwcG9ydGVkRXJyb3IoZXhwciwgbm9kZSwgZXJyb3IpKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIEpzb25FeHByZXNzaW9uUGFyc2VyOiB7XG4gICAgICB2aXNRdWVyeS5vcGVyYXRpb25zLnB1c2goZ2V0SnNvbkV4cHJlc3Npb25QYXJzZXIoZXhwciwgbm9kZSkpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSBMaW5lRm9ybWF0RXhwcjoge1xuICAgICAgdmlzUXVlcnkub3BlcmF0aW9ucy5wdXNoKGdldExpbmVGb3JtYXQoZXhwciwgbm9kZSkpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSBMYWJlbEZvcm1hdE1hdGNoZXI6IHtcbiAgICAgIHZpc1F1ZXJ5Lm9wZXJhdGlvbnMucHVzaChnZXRMYWJlbEZvcm1hdChleHByLCBub2RlKSk7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlIFVud3JhcEV4cHI6IHtcbiAgICAgIGNvbnN0IHsgb3BlcmF0aW9uLCBlcnJvciB9ID0gaGFuZGxlVW53cmFwRXhwcihleHByLCBub2RlLCBjb250ZXh0KTtcbiAgICAgIGlmIChvcGVyYXRpb24pIHtcbiAgICAgICAgdmlzUXVlcnkub3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbik7XG4gICAgICB9XG4gICAgICAvLyBTaG93IGVycm9yIGZvciBxdWVyeSBwYXR0ZXJucyBub3Qgc3VwcG9ydGVkIGluIHZpc3VhbCBxdWVyeSBidWlsZGVyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29udGV4dC5lcnJvcnMucHVzaChjcmVhdGVOb3RTdXBwb3J0ZWRFcnJvcihleHByLCBub2RlLCBlcnJvcikpO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlIERlY29sb3JpemU6IHtcbiAgICAgIHZpc1F1ZXJ5Lm9wZXJhdGlvbnMucHVzaChnZXREZWNvbG9yaXplKCkpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSBSYW5nZUFnZ3JlZ2F0aW9uRXhwcjoge1xuICAgICAgdmlzUXVlcnkub3BlcmF0aW9ucy5wdXNoKGhhbmRsZVJhbmdlQWdncmVnYXRpb24oZXhwciwgbm9kZSwgY29udGV4dCkpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSBWZWN0b3JBZ2dyZWdhdGlvbkV4cHI6IHtcbiAgICAgIHZpc1F1ZXJ5Lm9wZXJhdGlvbnMucHVzaChoYW5kbGVWZWN0b3JBZ2dyZWdhdGlvbihleHByLCBub2RlLCBjb250ZXh0KSk7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlIEJpbk9wRXhwcjoge1xuICAgICAgaGFuZGxlQmluYXJ5KGV4cHIsIG5vZGUsIGNvbnRleHQpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSBFcnJvcklkOiB7XG4gICAgICBpZiAoaXNJbnRlcnZhbFZhcmlhYmxlRXJyb3Iobm9kZSkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjb250ZXh0LmVycm9ycy5wdXNoKG1ha2VFcnJvcihleHByLCBub2RlKSk7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBkZWZhdWx0OiB7XG4gICAgICAvLyBBbnkgb3RoZXIgbm9kZXMgd2UganVzdCBpZ25vcmUgYW5kIGdvIHRvIGl0cyBjaGlsZHJlbi4gVGhpcyBzaG91bGQgYmUgZmluZSBhcyB0aGVyZSBhcmUgbG90cyBvZiB3cmFwcGVyXG4gICAgICAvLyBub2RlcyB0aGF0IGNhbiBiZSBza2lwcGVkLlxuICAgICAgLy8gVE9ETzogdGhlcmUgYXJlIHByb2JhYmx5IGNhc2VzIHdoZXJlIHdlIHdpbGwganVzdCBza2lwIG5vZGVzIHdlIGRvbid0IHN1cHBvcnQgYW5kIHdlIHNob3VsZCBiZSBhYmxlIHRvXG4gICAgICAvLyAgZGV0ZWN0IHRob3NlIGFuZCByZXBvcnQgYmFjay5cbiAgICAgIGxldCBjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICBoYW5kbGVFeHByZXNzaW9uKGV4cHIsIGNoaWxkLCBjb250ZXh0KTtcbiAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TGFiZWwoZXhwcjogc3RyaW5nLCBub2RlOiBTeW50YXhOb2RlKTogUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIge1xuICBjb25zdCBsYWJlbE5vZGUgPSBub2RlLmdldENoaWxkKElkZW50aWZpZXIpO1xuICBjb25zdCBsYWJlbCA9IGdldFN0cmluZyhleHByLCBsYWJlbE5vZGUpO1xuICBjb25zdCBvcCA9IGdldFN0cmluZyhleHByLCBsYWJlbE5vZGUhLm5leHRTaWJsaW5nKTtcbiAgbGV0IHZhbHVlID0gZ2V0U3RyaW5nKGV4cHIsIG5vZGUuZ2V0Q2hpbGQoU3RyaW5nKSk7XG4gIC8vIGB2YWx1ZWAgaXMgd3JhcHBlZCBpbiBkb3VibGUgcXVvdGVzLCBzbyB3ZSBuZWVkIHRvIHJlbW92ZSB0aGVtLiBBcyBhIHZhbHVlIGNhbiBjb250YWluIGRvdWJsZSBxdW90ZXMsIHdlIGNhbid0IHVzZSBSZWdFeCBoZXJlLlxuICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxLCB2YWx1ZS5sZW5ndGggLSAxKTtcblxuICByZXR1cm4ge1xuICAgIGxhYmVsLFxuICAgIG9wLFxuICAgIHZhbHVlLFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRMaW5lRmlsdGVyKGV4cHI6IHN0cmluZywgbm9kZTogU3ludGF4Tm9kZSk6IHsgb3BlcmF0aW9uPzogUXVlcnlCdWlsZGVyT3BlcmF0aW9uOyBlcnJvcj86IHN0cmluZyB9IHtcbiAgY29uc3QgZmlsdGVyID0gZ2V0U3RyaW5nKGV4cHIsIG5vZGUuZ2V0Q2hpbGQoRmlsdGVyKSk7XG4gIGNvbnN0IGZpbHRlckV4cHIgPSBoYW5kbGVRdW90ZXMoZ2V0U3RyaW5nKGV4cHIsIG5vZGUuZ2V0Q2hpbGQoU3RyaW5nKSkpO1xuICBjb25zdCBpcExpbmVGaWx0ZXIgPSBub2RlLmdldENoaWxkKEZpbHRlck9wKT8uZ2V0Q2hpbGQoSXApO1xuXG4gIGlmIChpcExpbmVGaWx0ZXIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3BlcmF0aW9uOiB7XG4gICAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuTGluZUZpbHRlcklwTWF0Y2hlcyxcbiAgICAgICAgcGFyYW1zOiBbZmlsdGVyLCBmaWx0ZXJFeHByXSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBjb25zdCBtYXBGaWx0ZXI6IFJlY29yZDxzdHJpbmcsIExva2lPcGVyYXRpb25JZD4gPSB7XG4gICAgJ3w9JzogTG9raU9wZXJhdGlvbklkLkxpbmVDb250YWlucyxcbiAgICAnIT0nOiBMb2tpT3BlcmF0aW9uSWQuTGluZUNvbnRhaW5zTm90LFxuICAgICd8fic6IExva2lPcGVyYXRpb25JZC5MaW5lTWF0Y2hlc1JlZ2V4LFxuICAgICchfic6IExva2lPcGVyYXRpb25JZC5MaW5lTWF0Y2hlc1JlZ2V4Tm90LFxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgb3BlcmF0aW9uOiB7XG4gICAgICBpZDogbWFwRmlsdGVyW2ZpbHRlcl0sXG4gICAgICBwYXJhbXM6IFtmaWx0ZXJFeHByXSxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRMYWJlbFBhcnNlcihleHByOiBzdHJpbmcsIG5vZGU6IFN5bnRheE5vZGUpOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb24ge1xuICBjb25zdCBwYXJzZXJOb2RlID0gbm9kZS5maXJzdENoaWxkO1xuICBjb25zdCBwYXJzZXIgPSBnZXRTdHJpbmcoZXhwciwgcGFyc2VyTm9kZSk7XG5cbiAgY29uc3Qgc3RyaW5nID0gaGFuZGxlUXVvdGVzKGdldFN0cmluZyhleHByLCBub2RlLmdldENoaWxkKFN0cmluZykpKTtcbiAgbGV0IHBhcmFtczogUXVlcnlCdWlsZGVyT3BlcmF0aW9uUGFyYW1WYWx1ZVtdID0gISFzdHJpbmcgPyBbc3RyaW5nXSA6IFtdO1xuICBjb25zdCBvcERlZiA9IGdldERlZmluaXRpb25CeUlkKHBhcnNlcik7XG4gIGlmIChvcERlZiAmJiAhY2hlY2tQYXJhbXNBcmVWYWxpZChvcERlZiwgcGFyYW1zKSkge1xuICAgIHBhcmFtcyA9IG9wRGVmPy5kZWZhdWx0UGFyYW1zIHx8IFtdO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpZDogcGFyc2VyLFxuICAgIHBhcmFtcyxcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0SnNvbkV4cHJlc3Npb25QYXJzZXIoZXhwcjogc3RyaW5nLCBub2RlOiBTeW50YXhOb2RlKTogUXVlcnlCdWlsZGVyT3BlcmF0aW9uIHtcbiAgY29uc3QgcGFyc2VyTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoSnNvbik7XG4gIGNvbnN0IHBhcnNlciA9IGdldFN0cmluZyhleHByLCBwYXJzZXJOb2RlKTtcblxuICBjb25zdCBwYXJhbXMgPSBbLi4uZ2V0QWxsQnlUeXBlKGV4cHIsIG5vZGUsIEpzb25FeHByZXNzaW9uKV07XG4gIHJldHVybiB7XG4gICAgaWQ6IHBhcnNlcixcbiAgICBwYXJhbXMsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldExhYmVsRmlsdGVyKGV4cHI6IHN0cmluZywgbm9kZTogU3ludGF4Tm9kZSk6IHsgb3BlcmF0aW9uPzogUXVlcnlCdWlsZGVyT3BlcmF0aW9uOyBlcnJvcj86IHN0cmluZyB9IHtcbiAgLy8gQ2hlY2sgZm9yIG5vZGVzIG5vdCBzdXBwb3J0ZWQgaW4gdmlzdWFsIGJ1aWxkZXIgYW5kIHJldHVybiBlcnJvclxuICBpZiAobm9kZS5nZXRDaGlsZChPcikgfHwgbm9kZS5nZXRDaGlsZChBbmQpIHx8IG5vZGUuZ2V0Q2hpbGQoJ0NvbW1hJykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6ICdMYWJlbCBmaWx0ZXIgd2l0aCBjb21tYSwgXCJhbmRcIiwgXCJvclwiIG5vdCBzdXBwb3J0ZWQgaW4gcXVlcnkgYnVpbGRlcicsXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS5maXJzdENoaWxkIS50eXBlLmlkID09PSBJcExhYmVsRmlsdGVyKSB7XG4gICAgY29uc3QgaXBMYWJlbEZpbHRlciA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICBjb25zdCBsYWJlbCA9IGlwTGFiZWxGaWx0ZXI/LmdldENoaWxkKElkZW50aWZpZXIpO1xuICAgIGNvbnN0IG9wID0gbGFiZWw/Lm5leHRTaWJsaW5nO1xuICAgIGNvbnN0IHZhbHVlID0gaXBMYWJlbEZpbHRlcj8uZ2V0Q2hpbGQoU3RyaW5nKTtcbiAgICBjb25zdCB2YWx1ZVN0cmluZyA9IGhhbmRsZVF1b3RlcyhnZXRTdHJpbmcoZXhwciwgdmFsdWUpKTtcblxuICAgIHJldHVybiB7XG4gICAgICBvcGVyYXRpb246IHtcbiAgICAgICAgaWQ6IExva2lPcGVyYXRpb25JZC5MYWJlbEZpbHRlcklwTWF0Y2hlcyxcbiAgICAgICAgcGFyYW1zOiBbZ2V0U3RyaW5nKGV4cHIsIGxhYmVsKSwgZ2V0U3RyaW5nKGV4cHIsIG9wKSwgdmFsdWVTdHJpbmddLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgaWQgPSBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXI7XG4gIGlmIChub2RlLmZpcnN0Q2hpbGQhLnR5cGUuaWQgPT09IFVuaXRGaWx0ZXIpIHtcbiAgICBjb25zdCBmaWx0ZXIgPSBub2RlLmZpcnN0Q2hpbGQhLmZpcnN0Q2hpbGQ7XG4gICAgY29uc3QgbGFiZWwgPSBmaWx0ZXIhLmZpcnN0Q2hpbGQ7XG4gICAgY29uc3Qgb3AgPSBsYWJlbCEubmV4dFNpYmxpbmc7XG4gICAgY29uc3QgdmFsdWUgPSBvcCEubmV4dFNpYmxpbmc7XG4gICAgY29uc3QgdmFsdWVTdHJpbmcgPSBoYW5kbGVRdW90ZXMoZ2V0U3RyaW5nKGV4cHIsIHZhbHVlKSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgb3BlcmF0aW9uOiB7XG4gICAgICAgIGlkLFxuICAgICAgICBwYXJhbXM6IFtnZXRTdHJpbmcoZXhwciwgbGFiZWwpLCBnZXRTdHJpbmcoZXhwciwgb3ApLCB2YWx1ZVN0cmluZ10sXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgLy8gSW4gdGhpcyBjYXNlIGl0IGlzIE1hdGNoZXIgb3IgTnVtYmVyRmlsdGVyXG4gIGNvbnN0IGZpbHRlciA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgY29uc3QgbGFiZWwgPSBmaWx0ZXIhLmZpcnN0Q2hpbGQ7XG4gIGNvbnN0IG9wID0gbGFiZWwhLm5leHRTaWJsaW5nO1xuICBjb25zdCB2YWx1ZSA9IG9wIS5uZXh0U2libGluZztcbiAgY29uc3QgcGFyYW1zID0gW2dldFN0cmluZyhleHByLCBsYWJlbCksIGdldFN0cmluZyhleHByLCBvcCksIGhhbmRsZVF1b3RlcyhnZXRTdHJpbmcoZXhwciwgdmFsdWUpKV07XG5cbiAgLy8gU3BlY2lhbCBjYXNlIG9mIHBpcGUgZmlsdGVyaW5nIC0gbm8gZXJyb3JzXG4gIGlmIChwYXJhbXMuam9pbignJykgPT09IGBfX2Vycm9yX189YCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcGVyYXRpb246IHtcbiAgICAgICAgaWQ6IExva2lPcGVyYXRpb25JZC5MYWJlbEZpbHRlck5vRXJyb3JzLFxuICAgICAgICBwYXJhbXM6IFtdLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvcGVyYXRpb246IHtcbiAgICAgIGlkLFxuICAgICAgcGFyYW1zLFxuICAgIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldExpbmVGb3JtYXQoZXhwcjogc3RyaW5nLCBub2RlOiBTeW50YXhOb2RlKTogUXVlcnlCdWlsZGVyT3BlcmF0aW9uIHtcbiAgY29uc3QgaWQgPSBMb2tpT3BlcmF0aW9uSWQuTGluZUZvcm1hdDtcbiAgY29uc3Qgc3RyaW5nID0gaGFuZGxlUXVvdGVzKGdldFN0cmluZyhleHByLCBub2RlLmdldENoaWxkKFN0cmluZykpKTtcblxuICByZXR1cm4ge1xuICAgIGlkLFxuICAgIHBhcmFtczogW3N0cmluZ10sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldExhYmVsRm9ybWF0KGV4cHI6IHN0cmluZywgbm9kZTogU3ludGF4Tm9kZSk6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbiB7XG4gIGNvbnN0IGlkID0gTG9raU9wZXJhdGlvbklkLkxhYmVsRm9ybWF0O1xuICBjb25zdCByZW5hbWVUbyA9IG5vZGUuZ2V0Q2hpbGQoSWRlbnRpZmllcik7XG4gIGNvbnN0IG9wID0gcmVuYW1lVG8hLm5leHRTaWJsaW5nO1xuICBjb25zdCBvcmlnaW5hbExhYmVsID0gb3AhLm5leHRTaWJsaW5nO1xuXG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgcGFyYW1zOiBbZ2V0U3RyaW5nKGV4cHIsIG9yaWdpbmFsTGFiZWwpLCBoYW5kbGVRdW90ZXMoZ2V0U3RyaW5nKGV4cHIsIHJlbmFtZVRvKSldLFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXREZWNvbG9yaXplKCk6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbiB7XG4gIGNvbnN0IGlkID0gTG9raU9wZXJhdGlvbklkLkRlY29sb3JpemU7XG5cbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBwYXJhbXM6IFtdLFxuICB9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVVbndyYXBFeHByKFxuICBleHByOiBzdHJpbmcsXG4gIG5vZGU6IFN5bnRheE5vZGUsXG4gIGNvbnRleHQ6IENvbnRleHRcbik6IHsgb3BlcmF0aW9uPzogUXVlcnlCdWlsZGVyT3BlcmF0aW9uOyBlcnJvcj86IHN0cmluZyB9IHtcbiAgY29uc3QgdW53cmFwRXhwckNoaWxkID0gbm9kZS5nZXRDaGlsZChVbndyYXBFeHByKTtcbiAgY29uc3QgbGFiZWxGaWx0ZXJDaGlsZCA9IG5vZGUuZ2V0Q2hpbGQoTGFiZWxGaWx0ZXIpO1xuICBjb25zdCB1bndyYXBDaGlsZCA9IG5vZGUuZ2V0Q2hpbGQoVW53cmFwKTtcblxuICBpZiAodW53cmFwRXhwckNoaWxkKSB7XG4gICAgaGFuZGxlRXhwcmVzc2lvbihleHByLCB1bndyYXBFeHByQ2hpbGQsIGNvbnRleHQpO1xuICB9XG5cbiAgaWYgKGxhYmVsRmlsdGVyQ2hpbGQpIHtcbiAgICBoYW5kbGVFeHByZXNzaW9uKGV4cHIsIGxhYmVsRmlsdGVyQ2hpbGQsIGNvbnRleHQpO1xuICB9XG5cbiAgaWYgKHVud3JhcENoaWxkKSB7XG4gICAgaWYgKHVud3JhcENoaWxkLm5leHRTaWJsaW5nPy50eXBlLmlkID09PSBDb252T3ApIHtcbiAgICAgIGNvbnN0IGNvbnZPcCA9IHVud3JhcENoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgY29uc3QgaWRlbnRpZmllciA9IGNvbnZPcC5uZXh0U2libGluZztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9wZXJhdGlvbjoge1xuICAgICAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuVW53cmFwLFxuICAgICAgICAgIHBhcmFtczogW2dldFN0cmluZyhleHByLCBpZGVudGlmaWVyKSwgZ2V0U3RyaW5nKGV4cHIsIGNvbnZPcCldLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgb3BlcmF0aW9uOiB7XG4gICAgICAgIGlkOiBMb2tpT3BlcmF0aW9uSWQuVW53cmFwLFxuICAgICAgICBwYXJhbXM6IFtnZXRTdHJpbmcoZXhwciwgdW53cmFwQ2hpbGQ/Lm5leHRTaWJsaW5nKSwgJyddLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHt9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVSYW5nZUFnZ3JlZ2F0aW9uKGV4cHI6IHN0cmluZywgbm9kZTogU3ludGF4Tm9kZSwgY29udGV4dDogQ29udGV4dCkge1xuICBjb25zdCBuYW1lTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoUmFuZ2VPcCk7XG4gIGNvbnN0IGZ1bmNOYW1lID0gZ2V0U3RyaW5nKGV4cHIsIG5hbWVOb2RlKTtcbiAgY29uc3QgbnVtYmVyID0gbm9kZS5nZXRDaGlsZChOdW1iZXJMZXplcik7XG4gIGNvbnN0IGxvZ0V4cHIgPSBub2RlLmdldENoaWxkKExvZ1JhbmdlRXhwcik7XG4gIGNvbnN0IHBhcmFtcyA9IG51bWJlciAhPT0gbnVsbCAmJiBudW1iZXIgIT09IHVuZGVmaW5lZCA/IFtnZXRTdHJpbmcoZXhwciwgbnVtYmVyKV0gOiBbXTtcbiAgY29uc3QgcmFuZ2UgPSBsb2dFeHByPy5nZXRDaGlsZChSYW5nZSk7XG4gIGNvbnN0IHJhbmdlVmFsdWUgPSByYW5nZSA/IGdldFN0cmluZyhleHByLCByYW5nZSkgOiBudWxsO1xuXG4gIGlmIChyYW5nZVZhbHVlKSB7XG4gICAgcGFyYW1zLnVuc2hpZnQocmFuZ2VWYWx1ZS5zdWJzdHJpbmcoMSwgcmFuZ2VWYWx1ZS5sZW5ndGggLSAxKSk7XG4gIH1cblxuICBjb25zdCBvcCA9IHtcbiAgICBpZDogZnVuY05hbWUsXG4gICAgcGFyYW1zLFxuICB9O1xuXG4gIGlmIChsb2dFeHByKSB7XG4gICAgaGFuZGxlRXhwcmVzc2lvbihleHByLCBsb2dFeHByLCBjb250ZXh0KTtcbiAgfVxuXG4gIHJldHVybiBvcDtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVmVjdG9yQWdncmVnYXRpb24oZXhwcjogc3RyaW5nLCBub2RlOiBTeW50YXhOb2RlLCBjb250ZXh0OiBDb250ZXh0KSB7XG4gIGNvbnN0IG5hbWVOb2RlID0gbm9kZS5nZXRDaGlsZChWZWN0b3JPcCk7XG4gIGxldCBmdW5jTmFtZSA9IGdldFN0cmluZyhleHByLCBuYW1lTm9kZSk7XG5cbiAgY29uc3QgZ3JvdXBpbmcgPSBub2RlLmdldENoaWxkKEdyb3VwaW5nKTtcbiAgY29uc3QgcGFyYW1zID0gW107XG5cbiAgY29uc3QgbnVtYmVyTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoTnVtYmVyTGV6ZXIpO1xuXG4gIGlmIChudW1iZXJOb2RlKSB7XG4gICAgcGFyYW1zLnB1c2goTnVtYmVyKGdldFN0cmluZyhleHByLCBudW1iZXJOb2RlKSkpO1xuICB9XG5cbiAgaWYgKGdyb3VwaW5nKSB7XG4gICAgY29uc3QgYnlNb2RpZmllciA9IGdyb3VwaW5nLmdldENoaWxkKEJ5KTtcbiAgICBpZiAoYnlNb2RpZmllciAmJiBmdW5jTmFtZSkge1xuICAgICAgZnVuY05hbWUgPSBgX18ke2Z1bmNOYW1lfV9ieWA7XG4gICAgfVxuXG4gICAgY29uc3Qgd2l0aG91dE1vZGlmaWVyID0gZ3JvdXBpbmcuZ2V0Q2hpbGQoV2l0aG91dCk7XG4gICAgaWYgKHdpdGhvdXRNb2RpZmllcikge1xuICAgICAgZnVuY05hbWUgPSBgX18ke2Z1bmNOYW1lfV93aXRob3V0YDtcbiAgICB9XG5cbiAgICBwYXJhbXMucHVzaCguLi5nZXRBbGxCeVR5cGUoZXhwciwgZ3JvdXBpbmcsIElkZW50aWZpZXIpKTtcbiAgfVxuXG4gIGNvbnN0IG1ldHJpY0V4cHIgPSBub2RlLmdldENoaWxkKE1ldHJpY0V4cHIpO1xuICBjb25zdCBvcDogUXVlcnlCdWlsZGVyT3BlcmF0aW9uID0geyBpZDogZnVuY05hbWUsIHBhcmFtcyB9O1xuXG4gIGlmIChtZXRyaWNFeHByKSB7XG4gICAgaGFuZGxlRXhwcmVzc2lvbihleHByLCBtZXRyaWNFeHByLCBjb250ZXh0KTtcbiAgfVxuXG4gIHJldHVybiBvcDtcbn1cblxuY29uc3Qgb3BlcmF0b3JUb09wTmFtZSA9IGJpbmFyeVNjYWxhckRlZnMucmVkdWNlPFJlY29yZDxzdHJpbmcsIHsgaWQ6IHN0cmluZzsgY29tcGFyaXNvbj86IGJvb2xlYW4gfT4+KChhY2MsIGRlZikgPT4ge1xuICBhY2NbZGVmLnNpZ25dID0ge1xuICAgIGlkOiBkZWYuaWQsXG4gICAgY29tcGFyaXNvbjogZGVmLmNvbXBhcmlzb24sXG4gIH07XG4gIHJldHVybiBhY2M7XG59LCB7fSk7XG5cbi8qKlxuICogUmlnaHQgbm93IGJpbmFyeSBleHByZXNzaW9ucyBjYW4gYmUgcmVwcmVzZW50ZWQgaW4gMiB3YXkgaW4gdmlzdWFsIHF1ZXJ5LiBBcyBhZGRpdGlvbmFsIG9wZXJhdGlvbiBpbiBjYXNlIGl0IGlzXG4gKiBqdXN0IG9wZXJhdGlvbiB3aXRoIHNjYWxhciBvciBpdCBjcmVhdGVzIGEgYmluYXJ5UXVlcnkgd2hlbiBpdCdzIDIgcXVlcmllcy5cbiAqIEBwYXJhbSBleHByXG4gKiBAcGFyYW0gbm9kZVxuICogQHBhcmFtIGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gaGFuZGxlQmluYXJ5KGV4cHI6IHN0cmluZywgbm9kZTogU3ludGF4Tm9kZSwgY29udGV4dDogQ29udGV4dCkge1xuICBjb25zdCB2aXNRdWVyeSA9IGNvbnRleHQucXVlcnk7XG4gIGNvbnN0IGxlZnQgPSBub2RlLmZpcnN0Q2hpbGQhO1xuICBjb25zdCBvcCA9IGdldFN0cmluZyhleHByLCBsZWZ0Lm5leHRTaWJsaW5nKTtcbiAgY29uc3QgYmluTW9kaWZpZXIgPSBnZXRCaW5hcnlNb2RpZmllcihleHByLCBub2RlLmdldENoaWxkKEJpbk1vZGlmaWVycykpO1xuXG4gIGNvbnN0IHJpZ2h0ID0gbm9kZS5sYXN0Q2hpbGQhO1xuXG4gIGNvbnN0IG9wRGVmID0gb3BlcmF0b3JUb09wTmFtZVtvcF07XG5cbiAgY29uc3QgbGVmdE51bWJlciA9IGdldExhc3RDaGlsZFdpdGhTZWxlY3RvcihsZWZ0LCAnTWV0cmljRXhwci5MaXRlcmFsRXhwci5OdW1iZXInKTtcbiAgY29uc3QgcmlnaHROdW1iZXIgPSBnZXRMYXN0Q2hpbGRXaXRoU2VsZWN0b3IocmlnaHQsICdNZXRyaWNFeHByLkxpdGVyYWxFeHByLk51bWJlcicpO1xuXG4gIGNvbnN0IHJpZ2h0QmluYXJ5ID0gcmlnaHQuZ2V0Q2hpbGQoQmluT3BFeHByKTtcblxuICBpZiAobGVmdE51bWJlcikge1xuICAgIC8vIFRPRE86IHRoaXMgc2hvdWxkIGJlIGFscmVhZHkgaGFuZGxlZCBpbiBjYXNlIHBhcmVudCBpcyBiaW5hcnkgZXhwcmVzc2lvbiBhcyBpdCBoYXMgdG8gYmUgYWRkZWQgdG8gcGFyZW50XG4gICAgLy8gIGlmIHF1ZXJ5IHN0YXJ0cyB3aXRoIGEgbnVtYmVyIHRoYXQgaXNuJ3QgaGFuZGxlZCBub3cuXG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgdGhpcyBpcyBiaW5hcnkgd2UgZG9uJ3QgcmVhbGx5IGtub3cgaWYgdGhlcmUgaXMgYSBxdWVyeSBvciBqdXN0IGNoYWluZWQgc2NhbGFycy4gU29cbiAgICAvLyB3ZSBoYXZlIHRvIHRyYXZlcnNlIGEgYml0IGRlZXBlciB0byBrbm93XG4gICAgaGFuZGxlRXhwcmVzc2lvbihleHByLCBsZWZ0LCBjb250ZXh0KTtcbiAgfVxuXG4gIGlmIChyaWdodE51bWJlcikge1xuICAgIHZpc1F1ZXJ5Lm9wZXJhdGlvbnMucHVzaChtYWtlQmluT3Aob3BEZWYsIGV4cHIsIHJpZ2h0LCAhIWJpbk1vZGlmaWVyPy5pc0Jvb2wpKTtcbiAgfSBlbHNlIGlmIChyaWdodEJpbmFyeSkge1xuICAgIC8vIER1ZSB0byB0aGUgd2F5IGJpbmFyeSBvcHMgYXJlIHBhcnNlZCB3ZSBjYW4gZ2V0IGEgYmluYXJ5IG9wZXJhdGlvbiBvbiB0aGUgcmlnaHQgdGhhdCBzdGFydHMgd2l0aCBhIG51bWJlciB3aGljaFxuICAgIC8vIGlzIGEgZmFjdG9yIGZvciBhIGN1cnJlbnQgYmluYXJ5IG9wZXJhdGlvbi4gU28gd2UgaGF2ZSB0byBhZGQgaXQgYXMgYW4gb3BlcmF0aW9uIG5vdy5cbiAgICBjb25zdCBsZWZ0TW9zdENoaWxkID0gZ2V0TGVmdE1vc3RDaGlsZChyaWdodCk7XG4gICAgaWYgKGxlZnRNb3N0Q2hpbGQ/Lm5hbWUgPT09ICdOdW1iZXInKSB7XG4gICAgICB2aXNRdWVyeS5vcGVyYXRpb25zLnB1c2gobWFrZUJpbk9wKG9wRGVmLCBleHByLCBsZWZ0TW9zdENoaWxkLCAhIWJpbk1vZGlmaWVyPy5pc0Jvb2wpKTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBhZGRlZCB0aGUgZmlyc3QgbnVtYmVyIGxpdGVyYWwgYXMgb3BlcmF0aW9uIGhlcmUgd2Ugc3RpbGwgY2FuIGNvbnRpbnVlIGFuZCBoYW5kbGUgdGhlIHJlc3QgYXMgdGhlIGZpcnN0XG4gICAgLy8gbnVtYmVyIHdpbGwgYmUganVzdCBza2lwcGVkLlxuICAgIGhhbmRsZUV4cHJlc3Npb24oZXhwciwgcmlnaHQsIGNvbnRleHQpO1xuICB9IGVsc2Uge1xuICAgIHZpc1F1ZXJ5LmJpbmFyeVF1ZXJpZXMgPSB2aXNRdWVyeS5iaW5hcnlRdWVyaWVzIHx8IFtdO1xuICAgIGNvbnN0IGJpblF1ZXJ5OiBMb2tpVmlzdWFsUXVlcnlCaW5hcnkgPSB7XG4gICAgICBvcGVyYXRvcjogb3AsXG4gICAgICBxdWVyeToge1xuICAgICAgICBsYWJlbHM6IFtdLFxuICAgICAgICBvcGVyYXRpb25zOiBbXSxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAoYmluTW9kaWZpZXI/LmlzTWF0Y2hlcikge1xuICAgICAgYmluUXVlcnkudmVjdG9yTWF0Y2hlc1R5cGUgPSBiaW5Nb2RpZmllci5tYXRjaFR5cGU7XG4gICAgICBiaW5RdWVyeS52ZWN0b3JNYXRjaGVzID0gYmluTW9kaWZpZXIubWF0Y2hlcztcbiAgICB9XG4gICAgdmlzUXVlcnkuYmluYXJ5UXVlcmllcy5wdXNoKGJpblF1ZXJ5KTtcbiAgICBoYW5kbGVFeHByZXNzaW9uKGV4cHIsIHJpZ2h0LCB7XG4gICAgICBxdWVyeTogYmluUXVlcnkucXVlcnksXG4gICAgICBlcnJvcnM6IGNvbnRleHQuZXJyb3JzLFxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEJpbmFyeU1vZGlmaWVyKFxuICBleHByOiBzdHJpbmcsXG4gIG5vZGU6IFN5bnRheE5vZGUgfCBudWxsXG4pOlxuICB8IHsgaXNCb29sOiB0cnVlOyBpc01hdGNoZXI6IGZhbHNlIH1cbiAgfCB7IGlzQm9vbDogZmFsc2U7IGlzTWF0Y2hlcjogdHJ1ZTsgbWF0Y2hlczogc3RyaW5nOyBtYXRjaFR5cGU6ICdpZ25vcmluZycgfCAnb24nIH1cbiAgfCB1bmRlZmluZWQge1xuICBpZiAoIW5vZGUpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChub2RlLmdldENoaWxkKEJvb2wpKSB7XG4gICAgcmV0dXJuIHsgaXNCb29sOiB0cnVlLCBpc01hdGNoZXI6IGZhbHNlIH07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbWF0Y2hlciA9IG5vZGUuZ2V0Q2hpbGQoT25Pcklnbm9yaW5nKTtcbiAgICBpZiAoIW1hdGNoZXIpIHtcbiAgICAgIC8vIE5vdCBzdXJlIHdoYXQgdGhpcyBjb3VsZCBiZSwgbWF5YmUgc2hvdWxkIGJlIGFuIGVycm9yLlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbGFiZWxzID0gZ2V0U3RyaW5nKGV4cHIsIG1hdGNoZXIuZ2V0Q2hpbGQoR3JvdXBpbmdMYWJlbHMpPy5nZXRDaGlsZChHcm91cGluZ0xhYmVsTGlzdCkpO1xuICAgIHJldHVybiB7XG4gICAgICBpc01hdGNoZXI6IHRydWUsXG4gICAgICBpc0Jvb2w6IGZhbHNlLFxuICAgICAgbWF0Y2hlczogbGFiZWxzLFxuICAgICAgbWF0Y2hUeXBlOiBtYXRjaGVyLmdldENoaWxkKE9uKSA/ICdvbicgOiAnaWdub3JpbmcnLFxuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNJbnRlcnZhbFZhcmlhYmxlRXJyb3Iobm9kZTogU3ludGF4Tm9kZSkge1xuICByZXR1cm4gbm9kZT8ucGFyZW50Py50eXBlLmlkID09PSBSYW5nZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVF1b3RlcyhzdHJpbmc6IHN0cmluZykge1xuICBpZiAoc3RyaW5nWzBdID09PSBgXCJgICYmIHN0cmluZ1tzdHJpbmcubGVuZ3RoIC0gMV0gPT09IGBcImApIHtcbiAgICByZXR1cm4gc3RyaW5nXG4gICAgICAuc3Vic3RyaW5nKDEsIHN0cmluZy5sZW5ndGggLSAxKVxuICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxuICAgICAgLnJlcGxhY2UoL1xcXFxcXFxcL2csICdcXFxcJyk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9gL2csICcnKTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgaGVscGVyIHRvIHRyYXZlcnNlIHRoZSBzeW50YXggdHJlZS4gSW5zdGVhZCBvZiBub2RlLmdldENoaWxkKCdmb28nKT8uZ2V0Q2hpbGQoJ2JhcicpPy5nZXRDaGlsZCgnYmF6JykgeW91XG4gKiBjYW4gd3JpdGUgZ2V0Q2hpbGRXaXRoU2VsZWN0b3Iobm9kZSwgJ2Zvby5iYXIuYmF6JylcbiAqIEBwYXJhbSBub2RlXG4gKiBAcGFyYW0gc2VsZWN0b3JcbiAqL1xuZnVuY3Rpb24gZ2V0TGFzdENoaWxkV2l0aFNlbGVjdG9yKG5vZGU6IFN5bnRheE5vZGUsIHNlbGVjdG9yOiBzdHJpbmcpIHtcbiAgbGV0IGNoaWxkOiBTeW50YXhOb2RlIHwgbnVsbCA9IG5vZGU7XG4gIGNvbnN0IGNoaWxkcmVuID0gc2VsZWN0b3Iuc3BsaXQoJy4nKTtcbiAgZm9yIChjb25zdCBzIG9mIGNoaWxkcmVuKSB7XG4gICAgY2hpbGQgPSBjaGlsZC5nZXRDaGlsZChzKTtcbiAgICBpZiAoIWNoaWxkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNoaWxkO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBlbnJpY2ggZXJyb3IgdGV4dCB3aXRoIGluZm9ybWF0aW9uIHRoYXQgdmlzdWFsIHF1ZXJ5IGJ1aWxkZXIgZG9lc24ndCBzdXBwb3J0IHRoYXQgbG9nUUxcbiAqIEBwYXJhbSBleHByXG4gKiBAcGFyYW0gbm9kZVxuICogQHBhcmFtIGVycm9yXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU5vdFN1cHBvcnRlZEVycm9yKGV4cHI6IHN0cmluZywgbm9kZTogU3ludGF4Tm9kZSwgZXJyb3I6IHN0cmluZykge1xuICBjb25zdCBlcnIgPSBtYWtlRXJyb3IoZXhwciwgbm9kZSk7XG4gIGVyci50ZXh0ID0gYCR7ZXJyb3J9OiAke2Vyci50ZXh0fWA7XG4gIHJldHVybiBlcnI7XG59XG5cbmZ1bmN0aW9uIGlzRW1wdHlRdWVyeShxdWVyeTogTG9raVZpc3VhbFF1ZXJ5KSB7XG4gIGlmIChxdWVyeS5sYWJlbHMubGVuZ3RoID09PSAwICYmIHF1ZXJ5Lm9wZXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIl0sIm5hbWVzIjpbInBhcnNlciIsImxhYmVsIiwib3AiLCJ2YWx1ZSIsImZpbHRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/parsing.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/state.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   changeEditorMode: () => (/* binding */ changeEditorMode),\n/* harmony export */   getDefaultEditorMode: () => (/* binding */ getDefaultEditorMode),\n/* harmony export */   getQueryWithDefaults: () => (/* binding */ getQueryWithDefaults)\n/* harmony export */ });\n/* harmony import */ var app_core_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/core/store.ts\");\n/* harmony import */ var _prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/types.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\nconst queryEditorModeDefaultLocalStorageKey = \"LokiQueryEditorModeDefault\";\nfunction changeEditorMode(query, editorMode, onChange) {\n  if (query.expr === \"\") {\n    app_core_store__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(queryEditorModeDefaultLocalStorageKey, editorMode);\n  }\n  onChange({ ...query, editorMode });\n}\nfunction getDefaultEditorMode(expr) {\n  if (expr != null && expr !== \"\") {\n    return _prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_1__.QueryEditorMode.Code;\n  }\n  const value = app_core_store__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(queryEditorModeDefaultLocalStorageKey);\n  switch (value) {\n    case \"code\":\n      return _prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_1__.QueryEditorMode.Code;\n    case \"builder\":\n    default:\n      return _prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_1__.QueryEditorMode.Builder;\n  }\n}\nfunction getQueryWithDefaults(query) {\n  let result = query;\n  if (!query.editorMode) {\n    result = { ...query, editorMode: getDefaultEditorMode(query.expr) };\n  }\n  if (query.expr == null) {\n    result = { ...result, expr: \"\" };\n  }\n  if (query.queryType == null) {\n    result = { ...result, queryType: _types__WEBPACK_IMPORTED_MODULE_2__.LokiQueryType.Range };\n  }\n  return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9zdGF0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtCO0FBRWM7QUFDUztBQUV6QyxNQUFNLHdDQUF3QztBQUV2QyxTQUFTLGlCQUFpQixPQUFrQixZQUE2QixVQUFzQztBQUVwSCxNQUFJLE1BQU0sU0FBUyxJQUFJO0FBQ3JCLDBEQUFLLENBQUMsSUFBSSx1Q0FBdUMsVUFBVTtBQUFBLEVBQzdEO0FBRUEsV0FBUyxFQUFFLEdBQUcsT0FBTyxXQUFXLENBQUM7QUFDbkM7QUFFTyxTQUFTLHFCQUFxQixNQUFjO0FBRWpELE1BQUksUUFBUSxRQUFRLFNBQVMsSUFBSTtBQUMvQixXQUFPLGtGQUFlLENBQUM7QUFBQSxFQUN6QjtBQUVBLFFBQU0sUUFBNEIsc0RBQUssQ0FBQyxJQUFJLHFDQUFxQztBQUNqRixVQUFRLE9BQU87QUFBQSxJQUNiLEtBQUs7QUFDSCxhQUFPLGtGQUFlLENBQUM7QUFBQSxJQUV6QixLQUFLO0FBQUEsSUFDTDtBQUNFLGFBQU8sa0ZBQWUsQ0FBQztBQUFBLEVBQzNCO0FBQ0Y7QUFLTyxTQUFTLHFCQUFxQixPQUE2QjtBQUVoRSxNQUFJLFNBQVM7QUFFYixNQUFJLENBQUMsTUFBTSxZQUFZO0FBQ3JCLGFBQVMsRUFBRSxHQUFHLE9BQU8sWUFBWSxxQkFBcUIsTUFBTSxJQUFJLEVBQUU7QUFBQSxFQUNwRTtBQUVBLE1BQUksTUFBTSxRQUFRLE1BQU07QUFDdEIsYUFBUyxFQUFFLEdBQUcsUUFBUSxNQUFNLEdBQUc7QUFBQSxFQUNqQztBQUVBLE1BQUksTUFBTSxhQUFhLE1BQU07QUFFM0IsYUFBUyxFQUFFLEdBQUcsUUFBUSxXQUFXLGlEQUFhLENBQUMsTUFBTTtBQUFBLEVBQ3ZEO0FBRUEsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvcXVlcnlidWlsZGVyL3N0YXRlLnRzP2YxMmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0b3JlIGZyb20gJ2FwcC9jb3JlL3N0b3JlJztcblxuaW1wb3J0IHsgUXVlcnlFZGl0b3JNb2RlIH0gZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL3R5cGVzJztcbmltcG9ydCB7IExva2lRdWVyeSwgTG9raVF1ZXJ5VHlwZSB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgcXVlcnlFZGl0b3JNb2RlRGVmYXVsdExvY2FsU3RvcmFnZUtleSA9ICdMb2tpUXVlcnlFZGl0b3JNb2RlRGVmYXVsdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VFZGl0b3JNb2RlKHF1ZXJ5OiBMb2tpUXVlcnksIGVkaXRvck1vZGU6IFF1ZXJ5RWRpdG9yTW9kZSwgb25DaGFuZ2U6IChxdWVyeTogTG9raVF1ZXJ5KSA9PiB2b2lkKSB7XG4gIC8vIElmIGVtcHR5IHF1ZXJ5IHN0b3JlIG5ldyBtb2RlIGFzIGRlZmF1bHRcbiAgaWYgKHF1ZXJ5LmV4cHIgPT09ICcnKSB7XG4gICAgc3RvcmUuc2V0KHF1ZXJ5RWRpdG9yTW9kZURlZmF1bHRMb2NhbFN0b3JhZ2VLZXksIGVkaXRvck1vZGUpO1xuICB9XG5cbiAgb25DaGFuZ2UoeyAuLi5xdWVyeSwgZWRpdG9yTW9kZSB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRFZGl0b3JNb2RlKGV4cHI6IHN0cmluZykge1xuICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgYW4gZXhwcmVzc2lvbiBkZWZhdWx0IHRvIGNvZGUgdmlld1xuICBpZiAoZXhwciAhPSBudWxsICYmIGV4cHIgIT09ICcnKSB7XG4gICAgcmV0dXJuIFF1ZXJ5RWRpdG9yTW9kZS5Db2RlO1xuICB9XG5cbiAgY29uc3QgdmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHN0b3JlLmdldChxdWVyeUVkaXRvck1vZGVEZWZhdWx0TG9jYWxTdG9yYWdlS2V5KTtcbiAgc3dpdGNoICh2YWx1ZSkge1xuICAgIGNhc2UgJ2NvZGUnOlxuICAgICAgcmV0dXJuIFF1ZXJ5RWRpdG9yTW9kZS5Db2RlO1xuXG4gICAgY2FzZSAnYnVpbGRlcic6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBRdWVyeUVkaXRvck1vZGUuQnVpbGRlcjtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgcXVlcnkgd2l0aCBkZWZhdWx0cywgYW5kIGJvb2xlYW4gdHJ1ZS9mYWxzZSBkZXBlbmRpbmcgb24gY2hhbmdlIHdhcyByZXF1aXJlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UXVlcnlXaXRoRGVmYXVsdHMocXVlcnk6IExva2lRdWVyeSk6IExva2lRdWVyeSB7XG4gIC8vIElmIG5vIGV4cHIgKGllIG5ldyBxdWVyeSkgdGhlbiBkZWZhdWx0IHRvIGJ1aWxkZXJcbiAgbGV0IHJlc3VsdCA9IHF1ZXJ5O1xuXG4gIGlmICghcXVlcnkuZWRpdG9yTW9kZSkge1xuICAgIHJlc3VsdCA9IHsgLi4ucXVlcnksIGVkaXRvck1vZGU6IGdldERlZmF1bHRFZGl0b3JNb2RlKHF1ZXJ5LmV4cHIpIH07XG4gIH1cblxuICBpZiAocXVlcnkuZXhwciA9PSBudWxsKSB7XG4gICAgcmVzdWx0ID0geyAuLi5yZXN1bHQsIGV4cHI6ICcnIH07XG4gIH1cblxuICBpZiAocXVlcnkucXVlcnlUeXBlID09IG51bGwpIHtcbiAgICAvLyBEZWZhdWx0IHRvIHJhbmdlIHF1ZXJ5XG4gICAgcmVzdWx0ID0geyAuLi5yZXN1bHQsIHF1ZXJ5VHlwZTogTG9raVF1ZXJ5VHlwZS5SYW5nZSB9O1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/state.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/querybuilder/types.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiOperationId: () => (/* binding */ LokiOperationId),\n/* harmony export */   LokiOperationOrder: () => (/* binding */ LokiOperationOrder),\n/* harmony export */   LokiQueryPatternType: () => (/* binding */ LokiQueryPatternType),\n/* harmony export */   LokiVisualQueryOperationCategory: () => (/* binding */ LokiVisualQueryOperationCategory),\n/* harmony export */   lokiOperators: () => (/* binding */ lokiOperators)\n/* harmony export */ });\n\nvar LokiQueryPatternType = /* @__PURE__ */ ((LokiQueryPatternType2) => {\n  LokiQueryPatternType2[\"Log\"] = \"log\";\n  LokiQueryPatternType2[\"Metric\"] = \"metric\";\n  return LokiQueryPatternType2;\n})(LokiQueryPatternType || {});\nvar LokiVisualQueryOperationCategory = /* @__PURE__ */ ((LokiVisualQueryOperationCategory2) => {\n  LokiVisualQueryOperationCategory2[\"Aggregations\"] = \"Aggregations\";\n  LokiVisualQueryOperationCategory2[\"RangeFunctions\"] = \"Range functions\";\n  LokiVisualQueryOperationCategory2[\"Functions\"] = \"Functions\";\n  LokiVisualQueryOperationCategory2[\"Formats\"] = \"Formats\";\n  LokiVisualQueryOperationCategory2[\"LineFilters\"] = \"Line filters\";\n  LokiVisualQueryOperationCategory2[\"LabelFilters\"] = \"Label filters\";\n  LokiVisualQueryOperationCategory2[\"BinaryOps\"] = \"Binary operations\";\n  return LokiVisualQueryOperationCategory2;\n})(LokiVisualQueryOperationCategory || {});\nvar LokiOperationId = /* @__PURE__ */ ((LokiOperationId2) => {\n  LokiOperationId2[\"Json\"] = \"json\";\n  LokiOperationId2[\"Logfmt\"] = \"logfmt\";\n  LokiOperationId2[\"Regexp\"] = \"regexp\";\n  LokiOperationId2[\"Pattern\"] = \"pattern\";\n  LokiOperationId2[\"Unpack\"] = \"unpack\";\n  LokiOperationId2[\"LineFormat\"] = \"line_format\";\n  LokiOperationId2[\"LabelFormat\"] = \"label_format\";\n  LokiOperationId2[\"Decolorize\"] = \"decolorize\";\n  LokiOperationId2[\"Rate\"] = \"rate\";\n  LokiOperationId2[\"RateCounter\"] = \"rate_counter\";\n  LokiOperationId2[\"CountOverTime\"] = \"count_over_time\";\n  LokiOperationId2[\"SumOverTime\"] = \"sum_over_time\";\n  LokiOperationId2[\"AvgOverTime\"] = \"avg_over_time\";\n  LokiOperationId2[\"MaxOverTime\"] = \"max_over_time\";\n  LokiOperationId2[\"MinOverTime\"] = \"min_over_time\";\n  LokiOperationId2[\"FirstOverTime\"] = \"first_over_time\";\n  LokiOperationId2[\"LastOverTime\"] = \"last_over_time\";\n  LokiOperationId2[\"StdvarOverTime\"] = \"stdvar_over_time\";\n  LokiOperationId2[\"StddevOverTime\"] = \"stddev_over_time\";\n  LokiOperationId2[\"QuantileOverTime\"] = \"quantile_over_time\";\n  LokiOperationId2[\"BytesRate\"] = \"bytes_rate\";\n  LokiOperationId2[\"BytesOverTime\"] = \"bytes_over_time\";\n  LokiOperationId2[\"AbsentOverTime\"] = \"absent_over_time\";\n  LokiOperationId2[\"Sum\"] = \"sum\";\n  LokiOperationId2[\"Avg\"] = \"avg\";\n  LokiOperationId2[\"Min\"] = \"min\";\n  LokiOperationId2[\"Max\"] = \"max\";\n  LokiOperationId2[\"Stddev\"] = \"stddev\";\n  LokiOperationId2[\"Stdvar\"] = \"stdvar\";\n  LokiOperationId2[\"Count\"] = \"count\";\n  LokiOperationId2[\"TopK\"] = \"topk\";\n  LokiOperationId2[\"BottomK\"] = \"bottomk\";\n  LokiOperationId2[\"LineContains\"] = \"__line_contains\";\n  LokiOperationId2[\"LineContainsNot\"] = \"__line_contains_not\";\n  LokiOperationId2[\"LineContainsCaseInsensitive\"] = \"__line_contains_case_insensitive\";\n  LokiOperationId2[\"LineContainsNotCaseInsensitive\"] = \"__line_contains_not_case_insensitive\";\n  LokiOperationId2[\"LineMatchesRegex\"] = \"__line_matches_regex\";\n  LokiOperationId2[\"LineMatchesRegexNot\"] = \"__line_matches_regex_not\";\n  LokiOperationId2[\"LineFilterIpMatches\"] = \"__line_filter_ip_matches\";\n  LokiOperationId2[\"LabelFilter\"] = \"__label_filter\";\n  LokiOperationId2[\"LabelFilterNoErrors\"] = \"__label_filter_no_errors\";\n  LokiOperationId2[\"LabelFilterIpMatches\"] = \"__label_filter_ip_marches\";\n  LokiOperationId2[\"Unwrap\"] = \"unwrap\";\n  LokiOperationId2[\"SumBy\"] = \"__sum_by\";\n  LokiOperationId2[\"SumWithout\"] = \"__sum_without\";\n  LokiOperationId2[\"Addition\"] = \"__addition\";\n  LokiOperationId2[\"Subtraction\"] = \"__subtraction\";\n  LokiOperationId2[\"MultiplyBy\"] = \"__multiply_by\";\n  LokiOperationId2[\"DivideBy\"] = \"__divide_by\";\n  LokiOperationId2[\"Modulo\"] = \"__modulo\";\n  LokiOperationId2[\"Exponent\"] = \"__exponent\";\n  LokiOperationId2[\"NestedQuery\"] = \"__nested_query\";\n  LokiOperationId2[\"EqualTo\"] = \"__equal_to\";\n  LokiOperationId2[\"NotEqualTo\"] = \"__not_equal_to\";\n  LokiOperationId2[\"GreaterThan\"] = \"__greater_than\";\n  LokiOperationId2[\"LessThan\"] = \"__less_than\";\n  LokiOperationId2[\"GreaterOrEqual\"] = \"__greater_or_equal\";\n  LokiOperationId2[\"LessOrEqual\"] = \"__less_or_equal\";\n  return LokiOperationId2;\n})(LokiOperationId || {});\nvar LokiOperationOrder = /* @__PURE__ */ ((LokiOperationOrder2) => {\n  LokiOperationOrder2[LokiOperationOrder2[\"LineFilters\"] = 1] = \"LineFilters\";\n  LokiOperationOrder2[LokiOperationOrder2[\"Parsers\"] = 2] = \"Parsers\";\n  LokiOperationOrder2[LokiOperationOrder2[\"PipeOperations\"] = 3] = \"PipeOperations\";\n  LokiOperationOrder2[LokiOperationOrder2[\"Unwrap\"] = 4] = \"Unwrap\";\n  LokiOperationOrder2[LokiOperationOrder2[\"NoErrors\"] = 5] = \"NoErrors\";\n  LokiOperationOrder2[LokiOperationOrder2[\"RangeVectorFunction\"] = 5] = \"RangeVectorFunction\";\n  LokiOperationOrder2[LokiOperationOrder2[\"Last\"] = 6] = \"Last\";\n  return LokiOperationOrder2;\n})(LokiOperationOrder || {});\nconst lokiOperators = {\n  equals: { label: \"=\", value: \"=\", description: \"Equals\", isMultiValue: false },\n  doesNotEqual: { label: \"!=\", value: \"!=\", description: \"Does not equal\", isMultiValue: false },\n  matchesRegex: { label: \"=~\", value: \"=~\", description: \"Matches regex\", isMultiValue: true },\n  doesNotMatchRegex: { label: \"!~\", value: \"!~\", description: \"Does not match regex\", isMultiValue: true },\n  greaterThan: { label: \">\", value: \">\", description: \"Greater than\", isMultiValue: false },\n  greaterThanOrEqual: { label: \">=\", value: \">=\", description: \"Greater than or equal to\", isMultiValue: false },\n  lessThan: { label: \"<\", value: \"<\", description: \"Less than\", isMultiValue: false },\n  lessThanOrEqual: { label: \"<=\", value: \"<=\", description: \"Less than or equal to\", isMultiValue: false },\n  contains: { label: \"|=\", value: \"|=\", description: \"Contains\", isMultiValue: false },\n  doesNotContain: { label: \"!=\", value: \"!=\", description: \"Does not contain\", isMultiValue: false }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFhTyxJQUFLLHVCQUFMLGtCQUFLQSwwQkFBTDtBQUNMLEVBQUFBLHNCQUFBLFNBQU07QUFDTixFQUFBQSxzQkFBQSxZQUFTO0FBRkMsU0FBQUE7QUFBQTtBQVdMLElBQUssbUNBQUwsa0JBQUtDLHNDQUFMO0FBQ0wsRUFBQUEsa0NBQUEsa0JBQWU7QUFDZixFQUFBQSxrQ0FBQSxvQkFBaUI7QUFDakIsRUFBQUEsa0NBQUEsZUFBWTtBQUNaLEVBQUFBLGtDQUFBLGFBQVU7QUFDVixFQUFBQSxrQ0FBQSxpQkFBYztBQUNkLEVBQUFBLGtDQUFBLGtCQUFlO0FBQ2YsRUFBQUEsa0NBQUEsZUFBWTtBQVBGLFNBQUFBO0FBQUE7QUFVTCxJQUFLLGtCQUFMLGtCQUFLQyxxQkFBTDtBQUNMLEVBQUFBLGlCQUFBLFVBQU87QUFDUCxFQUFBQSxpQkFBQSxZQUFTO0FBQ1QsRUFBQUEsaUJBQUEsWUFBUztBQUNULEVBQUFBLGlCQUFBLGFBQVU7QUFDVixFQUFBQSxpQkFBQSxZQUFTO0FBQ1QsRUFBQUEsaUJBQUEsZ0JBQWE7QUFDYixFQUFBQSxpQkFBQSxpQkFBYztBQUNkLEVBQUFBLGlCQUFBLGdCQUFhO0FBQ2IsRUFBQUEsaUJBQUEsVUFBTztBQUNQLEVBQUFBLGlCQUFBLGlCQUFjO0FBQ2QsRUFBQUEsaUJBQUEsbUJBQWdCO0FBQ2hCLEVBQUFBLGlCQUFBLGlCQUFjO0FBQ2QsRUFBQUEsaUJBQUEsaUJBQWM7QUFDZCxFQUFBQSxpQkFBQSxpQkFBYztBQUNkLEVBQUFBLGlCQUFBLGlCQUFjO0FBQ2QsRUFBQUEsaUJBQUEsbUJBQWdCO0FBQ2hCLEVBQUFBLGlCQUFBLGtCQUFlO0FBQ2YsRUFBQUEsaUJBQUEsb0JBQWlCO0FBQ2pCLEVBQUFBLGlCQUFBLG9CQUFpQjtBQUNqQixFQUFBQSxpQkFBQSxzQkFBbUI7QUFDbkIsRUFBQUEs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azovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci90eXBlcy50cz9mZGRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZpc3VhbFF1ZXJ5QmluYXJ5IH0gZnJvbSAnLi4vLi4vcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL0xva2lBbmRQcm9tUXVlcnlNb2RlbGxlckJhc2UnO1xuaW1wb3J0IHsgUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIsIFF1ZXJ5QnVpbGRlck9wZXJhdGlvbiB9IGZyb20gJy4uLy4uL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC90eXBlcyc7XG5cbi8qKlxuICogVmlzdWFsIHF1ZXJ5IG1vZGVsXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9raVZpc3VhbFF1ZXJ5IHtcbiAgbGFiZWxzOiBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcltdO1xuICBvcGVyYXRpb25zOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25bXTtcbiAgYmluYXJ5UXVlcmllcz86IExva2lWaXN1YWxRdWVyeUJpbmFyeVtdO1xufVxuXG5leHBvcnQgdHlwZSBMb2tpVmlzdWFsUXVlcnlCaW5hcnkgPSBWaXN1YWxRdWVyeUJpbmFyeTxMb2tpVmlzdWFsUXVlcnk+O1xuZXhwb3J0IGVudW0gTG9raVF1ZXJ5UGF0dGVyblR5cGUge1xuICBMb2cgPSAnbG9nJyxcbiAgTWV0cmljID0gJ21ldHJpYycsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9raVF1ZXJ5UGF0dGVybiB7XG4gIG5hbWU6IHN0cmluZztcbiAgb3BlcmF0aW9uczogUXVlcnlCdWlsZGVyT3BlcmF0aW9uW107XG4gIHR5cGU6IExva2lRdWVyeVBhdHRlcm5UeXBlO1xufVxuXG5leHBvcnQgZW51bSBMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeSB7XG4gIEFnZ3JlZ2F0aW9ucyA9ICdBZ2dyZWdhdGlvbnMnLFxuICBSYW5nZUZ1bmN0aW9ucyA9ICdSYW5nZSBmdW5jdGlvbnMnLFxuICBGdW5jdGlvbnMgPSAnRnVuY3Rpb25zJyxcbiAgRm9ybWF0cyA9ICdGb3JtYXRzJyxcbiAgTGluZUZpbHRlcnMgPSAnTGluZSBmaWx0ZXJzJyxcbiAgTGFiZWxGaWx0ZXJzID0gJ0xhYmVsIGZpbHRlcnMnLFxuICBCaW5hcnlPcHMgPSAnQmluYXJ5IG9wZXJhdGlvbnMnLFxufVxuXG5leHBvcnQgZW51bSBMb2tpT3BlcmF0aW9uSWQge1xuICBKc29uID0gJ2pzb24nLFxuICBMb2dmbXQgPSAnbG9nZm10JyxcbiAgUmVnZXhwID0gJ3JlZ2V4cCcsXG4gIFBhdHRlcm4gPSAncGF0dGVybicsXG4gIFVucGFjayA9ICd1bnBhY2snLFxuICBMaW5lRm9ybWF0ID0gJ2xpbmVfZm9ybWF0JyxcbiAgTGFiZWxGb3JtYXQgPSAnbGFiZWxfZm9ybWF0JyxcbiAgRGVjb2xvcml6ZSA9ICdkZWNvbG9yaXplJyxcbiAgUmF0ZSA9ICdyYXRlJyxcbiAgUmF0ZUNvdW50ZXIgPSAncmF0ZV9jb3VudGVyJyxcbiAgQ291bnRPdmVyVGltZSA9ICdjb3VudF9vdmVyX3RpbWUnLFxuICBTdW1PdmVyVGltZSA9ICdzdW1fb3Zlcl90aW1lJyxcbiAgQXZnT3ZlclRpbWUgPSAnYXZnX292ZXJfdGltZScsXG4gIE1heE92ZXJUaW1lID0gJ21heF9vdmVyX3RpbWUnLFxuICBNaW5PdmVyVGltZSA9ICdtaW5fb3Zlcl90aW1lJyxcbiAgRmlyc3RPdmVyVGltZSA9ICdmaXJzdF9vdmVyX3RpbWUnLFxuICBMYXN0T3ZlclRpbWUgPSAnbGFzdF9vdmVyX3RpbWUnLFxuICBTdGR2YXJPdmVyVGltZSA9ICdzdGR2YXJfb3Zlcl90aW1lJyxcbiAgU3RkZGV2T3ZlclRpbWUgPSAnc3RkZGV2X292ZXJfdGltZScsXG4gIFF1YW50aWxlT3ZlclRpbWUgPSAncXVhbnRpbGVfb3Zlcl90aW1lJyxcbiAgQnl0ZXNSYXRlID0gJ2J5dGVzX3JhdGUnLFxuICBCeXRlc092ZXJUaW1lID0gJ2J5dGVzX292ZXJfdGltZScsXG4gIEFic2VudE92ZXJUaW1lID0gJ2Fic2VudF9vdmVyX3RpbWUnLFxuICBTdW0gPSAnc3VtJyxcbiAgQXZnID0gJ2F2ZycsXG4gIE1pbiA9ICdtaW4nLFxuICBNYXggPSAnbWF4JyxcbiAgU3RkZGV2ID0gJ3N0ZGRldicsXG4gIFN0ZHZhciA9ICdzdGR2YXInLFxuICBDb3VudCA9ICdjb3VudCcsXG4gIFRvcEsgPSAndG9waycsXG4gIEJvdHRvbUsgPSAnYm90dG9taycsXG4gIExpbmVDb250YWlucyA9ICdfX2xpbmVfY29udGFpbnMnLFxuICBMaW5lQ29udGFpbnNOb3QgPSAnX19saW5lX2NvbnRhaW5zX25vdCcsXG4gIExpbmVDb250YWluc0Nhc2VJbnNlbnNpdGl2ZSA9ICdfX2xpbmVfY29udGFpbnNfY2FzZV9pbnNlbnNpdGl2ZScsXG4gIExpbmVDb250YWluc05vdENhc2VJbnNlbnNpdGl2ZSA9ICdfX2xpbmVfY29udGFpbnNfbm90X2Nhc2VfaW5zZW5zaXRpdmUnLFxuICBMaW5lTWF0Y2hlc1JlZ2V4ID0gJ19fbGluZV9tYXRjaGVzX3JlZ2V4JyxcbiAgTGluZU1hdGNoZXNSZWdleE5vdCA9ICdfX2xpbmVfbWF0Y2hlc19yZWdleF9ub3QnLFxuICBMaW5lRmlsdGVySXBNYXRjaGVzID0gJ19fbGluZV9maWx0ZXJfaXBfbWF0Y2hlcycsXG4gIExhYmVsRmlsdGVyID0gJ19fbGFiZWxfZmlsdGVyJyxcbiAgTGFiZWxGaWx0ZXJOb0Vycm9ycyA9ICdfX2xhYmVsX2ZpbHRlcl9ub19lcnJvcnMnLFxuICBMYWJlbEZpbHRlcklwTWF0Y2hlcyA9ICdfX2xhYmVsX2ZpbHRlcl9pcF9tYXJjaGVzJyxcbiAgVW53cmFwID0gJ3Vud3JhcCcsXG4gIFN1bUJ5ID0gJ19fc3VtX2J5JyxcbiAgU3VtV2l0aG91dCA9ICdfX3N1bV93aXRob3V0JyxcbiAgLy8gQmluYXJ5IG9wc1xuICBBZGRpdGlvbiA9ICdfX2FkZGl0aW9uJyxcbiAgU3VidHJhY3Rpb24gPSAnX19zdWJ0cmFjdGlvbicsXG4gIE11bHRpcGx5QnkgPSAnX19tdWx0aXBseV9ieScsXG4gIERpdmlkZUJ5ID0gJ19fZGl2aWRlX2J5JyxcbiAgTW9kdWxvID0gJ19fbW9kdWxvJyxcbiAgRXhwb25lbnQgPSAnX19leHBvbmVudCcsXG4gIE5lc3RlZFF1ZXJ5ID0gJ19fbmVzdGVkX3F1ZXJ5JyxcbiAgRXF1YWxUbyA9ICdfX2VxdWFsX3RvJyxcbiAgTm90RXF1YWxUbyA9ICdfX25vdF9lcXVhbF90bycsXG4gIEdyZWF0ZXJUaGFuID0gJ19fZ3JlYXRlcl90aGFuJyxcbiAgTGVzc1RoYW4gPSAnX19sZXNzX3RoYW4nLFxuICBHcmVhdGVyT3JFcXVhbCA9ICdfX2dyZWF0ZXJfb3JfZXF1YWwnLFxuICBMZXNzT3JFcXVhbCA9ICdfX2xlc3Nfb3JfZXF1YWwnLFxufVxuXG5leHBvcnQgZW51bSBMb2tpT3BlcmF0aW9uT3JkZXIge1xuICBMaW5lRmlsdGVycyA9IDEsXG4gIFBhcnNlcnMgPSAyLFxuICBQaXBlT3BlcmF0aW9ucyA9IDMsXG4gIC8vIFVud3JhcCBpcyBhIHNwZWNpYWwgY2FzZSwgYXMgaXQgaXMgdXN1YWxseSB0aGUgbGFzdCBvcGVyYXRpb24sIHNvIHRoZSBvcmRlciBpcyBhZnRlciBwaXBlT3BlcmF0aW9uc1xuICBVbndyYXAgPSA0LFxuICBOb0Vycm9ycyA9IDUsXG4gIFJhbmdlVmVjdG9yRnVuY3Rpb24gPSA1LFxuICBMYXN0ID0gNixcbn1cblxuZXhwb3J0IGNvbnN0IGxva2lPcGVyYXRvcnMgPSB7XG4gIGVxdWFsczogeyBsYWJlbDogJz0nLCB2YWx1ZTogJz0nLCBkZXNjcmlwdGlvbjogJ0VxdWFscycsIGlzTXVsdGlWYWx1ZTogZmFsc2UgfSxcbiAgZG9lc05vdEVxdWFsOiB7IGxhYmVsOiAnIT0nLCB2YWx1ZTogJyE9JywgZGVzY3JpcHRpb246ICdEb2VzIG5vdCBlcXVhbCcsIGlzTXVsdGlWYWx1ZTogZmFsc2UgfSxcbiAgbWF0Y2hlc1JlZ2V4OiB7IGxhYmVsOiAnPX4nLCB2YWx1ZTogJz1+JywgZGVzY3JpcHRpb246ICdNYXRjaGVzIHJlZ2V4JywgaXNNdWx0aVZhbHVlOiB0cnVlIH0sXG4gIGRvZXNOb3RNYXRjaFJlZ2V4OiB7IGxhYmVsOiAnIX4nLCB2YWx1ZTogJyF+JywgZGVzY3JpcHRpb246ICdEb2VzIG5vdCBtYXRjaCByZWdleCcsIGlzTXVsdGlWYWx1ZTogdHJ1ZSB9LFxuICBncmVhdGVyVGhhbjogeyBsYWJlbDogJz4nLCB2YWx1ZTogJz4nLCBkZXNjcmlwdGlvbjogJ0dyZWF0ZXIgdGhhbicsIGlzTXVsdGlWYWx1ZTogZmFsc2UgfSxcbiAgZ3JlYXRlclRoYW5PckVxdWFsOiB7IGxhYmVsOiAnPj0nLCB2YWx1ZTogJz49JywgZGVzY3JpcHRpb246ICdHcmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8nLCBpc011bHRpVmFsdWU6IGZhbHNlIH0sXG4gIGxlc3NUaGFuOiB7IGxhYmVsOiAnPCcsIHZhbHVlOiAnPCcsIGRlc2NyaXB0aW9uOiAnTGVzcyB0aGFuJywgaXNNdWx0aVZhbHVlOiBmYWxzZSB9LFxuICBsZXNzVGhhbk9yRXF1YWw6IHsgbGFiZWw6ICc8PScsIHZhbHVlOiAnPD0nLCBkZXNjcmlwdGlvbjogJ0xlc3MgdGhhbiBvciBlcXVhbCB0bycsIGlzTXVsdGlWYWx1ZTogZmFsc2UgfSxcbiAgY29udGFpbnM6IHsgbGFiZWw6ICd8PScsIHZhbHVlOiAnfD0nLCBkZXNjcmlwdGlvbjogJ0NvbnRhaW5zJywgaXNNdWx0aVZhbHVlOiBmYWxzZSB9LFxuICBkb2VzTm90Q29udGFpbjogeyBsYWJlbDogJyE9JywgdmFsdWU6ICchPScsIGRlc2NyaXB0aW9uOiAnRG9lcyBub3QgY29udGFpbicsIGlzTXVsdGlWYWx1ZTogZmFsc2UgfSxcbn07XG4iXSwibmFtZXMiOlsiTG9raVF1ZXJ5UGF0dGVyblR5cGUiLCJMb2tpVmlzdWFsUXVlcnlPcGVyYXRpb25DYXRlZ29yeSIsIkxva2lPcGVyYXRpb25JZCIsIkxva2lPcGVyYXRpb25PcmRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/querybuilder/types.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/responseUtils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneQueryResponse: () => (/* binding */ cloneQueryResponse),\n/* harmony export */   combineResponses: () => (/* binding */ combineResponses),\n/* harmony export */   dataFrameHasLevelLabel: () => (/* binding */ dataFrameHasLevelLabel),\n/* harmony export */   dataFrameHasLokiError: () => (/* binding */ dataFrameHasLokiError),\n/* harmony export */   extractHasErrorLabelFromDataFrame: () => (/* binding */ extractHasErrorLabelFromDataFrame),\n/* harmony export */   extractLabelKeysFromDataFrame: () => (/* binding */ extractLabelKeysFromDataFrame),\n/* harmony export */   extractLevelLikeLabelFromDataFrame: () => (/* binding */ extractLevelLikeLabelFromDataFrame),\n/* harmony export */   extractLogParserFromDataFrame: () => (/* binding */ extractLogParserFromDataFrame),\n/* harmony export */   extractUnwrapLabelKeysFromDataFrame: () => (/* binding */ extractUnwrapLabelKeysFromDataFrame)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/durationutil.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrameTypes.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/frameComparisons.ts\");\n/* harmony import */ var _languageUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/loki/languageUtils.ts\");\n/* harmony import */ var _lineParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/loki/lineParser.ts\");\n\n\n\n\nfunction dataFrameHasLokiError(frame) {\n  const labelSets = frame.fields.find((f) => f.name === \"labels\")?.values ?? [];\n  return labelSets.some((labels) => labels.__error__ !== void 0);\n}\nfunction dataFrameHasLevelLabel(frame) {\n  const labelSets = frame.fields.find((f) => f.name === \"labels\")?.values ?? [];\n  return labelSets.some((labels) => labels.level !== void 0);\n}\nfunction extractLogParserFromDataFrame(frame) {\n  const lineField = frame.fields.find((field) => field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_2__.FieldType.string);\n  if (lineField == null) {\n    return { hasJSON: false, hasLogfmt: false, hasPack: false };\n  }\n  const logLines = lineField.values;\n  let hasJSON = false;\n  let hasLogfmt = false;\n  let hasPack = false;\n  logLines.forEach((line) => {\n    if ((0,_lineParser__WEBPACK_IMPORTED_MODULE_1__.isLogLineJSON)(line)) {\n      hasJSON = true;\n      hasPack = (0,_lineParser__WEBPACK_IMPORTED_MODULE_1__.isLogLinePacked)(line);\n    }\n    if ((0,_lineParser__WEBPACK_IMPORTED_MODULE_1__.isLogLineLogfmt)(line)) {\n      hasLogfmt = true;\n    }\n  });\n  return { hasLogfmt, hasJSON, hasPack };\n}\nfunction extractLabelKeysFromDataFrame(frame) {\n  const labelsArray = frame?.fields?.find((field) => field.name === \"labels\")?.values ?? [];\n  if (!labelsArray?.length) {\n    return [];\n  }\n  return Object.keys(labelsArray[0]);\n}\nfunction extractUnwrapLabelKeysFromDataFrame(frame) {\n  const labelsArray = frame?.fields?.find((field) => field.name === \"labels\")?.values ?? [];\n  if (!labelsArray?.length) {\n    return [];\n  }\n  const possibleUnwrapLabels = Object.keys(labelsArray[0]).filter((key) => {\n    const value = labelsArray[0][key];\n    if (!value) {\n      return false;\n    }\n    return !isNaN(Number(value)) || (0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.isValidGoDuration)(value) || (0,_languageUtils__WEBPACK_IMPORTED_MODULE_0__.isBytesString)(value);\n  });\n  return possibleUnwrapLabels.filter((label) => labelsArray.every((obj) => obj[label]));\n}\nfunction extractHasErrorLabelFromDataFrame(frame) {\n  const labelField = frame.fields.find((field) => field.name === \"labels\" && field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_2__.FieldType.other);\n  if (labelField == null) {\n    return false;\n  }\n  const labels = labelField.values;\n  return labels.some((label) => label[\"__error__\"]);\n}\nfunction extractLevelLikeLabelFromDataFrame(frame) {\n  const labelField = frame.fields.find((field) => field.name === \"labels\" && field.type === _grafana_data__WEBPACK_IMPORTED_MODULE_2__.FieldType.other);\n  if (labelField == null) {\n    return null;\n  }\n  const labelsArray = labelField.values.slice(0, 2);\n  let levelLikeLabel = null;\n  for (let labels of labelsArray) {\n    const label = Object.keys(labels).find((label2) => label2 === \"lvl\" || label2.includes(\"level\"));\n    if (label) {\n      levelLikeLabel = label;\n      break;\n    }\n  }\n  return levelLikeLabel;\n}\nfunction shouldCombine(frame1, frame2) {\n  if (frame1.refId !== frame2.refId) {\n    return false;\n  }\n  const frameType1 = frame1.meta?.type;\n  const frameType2 = frame2.meta?.type;\n  if (frameType1 !== frameType2) {\n    return false;\n  }\n  if (frameType1 === _grafana_data__WEBPACK_IMPORTED_MODULE_4__.DataFrameType.TimeSeriesMulti) {\n    const field1 = frame1.fields.find((f) => f.type === _grafana_data__WEBPACK_IMPORTED_MODULE_2__.FieldType.number);\n    const field2 = frame2.fields.find((f) => f.type === _grafana_data__WEBPACK_IMPORTED_MODULE_2__.FieldType.number);\n    if (field1 === void 0 || field2 === void 0) {\n      return false;\n    }\n    return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_5__.shallowCompare)(field1.labels ?? {}, field2.labels ?? {});\n  }\n  const customType1 = frame1.meta?.custom?.frameType;\n  const customType2 = frame2.meta?.custom?.frameType;\n  if (customType1 === \"LabeledTimeValues\" && customType2 === \"LabeledTimeValues\") {\n    return true;\n  }\n  return false;\n}\nfunction combineResponses(currentResult, newResult) {\n  if (!currentResult) {\n    return cloneQueryResponse(newResult);\n  }\n  newResult.data.forEach((newFrame) => {\n    const currentFrame = currentResult.data.find((frame) => shouldCombine(frame, newFrame));\n    if (!currentFrame) {\n      currentResult.data.push(cloneDataFrame(newFrame));\n      return;\n    }\n    combineFrames(currentFrame, newFrame);\n  });\n  const mergedErrors = [...currentResult.errors ?? [], ...newResult.errors ?? []];\n  if (mergedErrors.length > 0) {\n    currentResult.errors = mergedErrors;\n  }\n  const mergedError = currentResult.error ?? newResult.error;\n  if (mergedError != null) {\n    currentResult.error = mergedError;\n  }\n  const mergedTraceIds = [...currentResult.traceIds ?? [], ...newResult.traceIds ?? []];\n  if (mergedTraceIds.length > 0) {\n    currentResult.traceIds = mergedTraceIds;\n  }\n  return currentResult;\n}\nfunction combineFrames(dest, source) {\n  const totalFields = dest.fields.length;\n  for (let i = 0; i < totalFields; i++) {\n    dest.fields[i].values = [].concat.apply(source.fields[i].values, dest.fields[i].values);\n    if (source.fields[i].nanos) {\n      const nanos = dest.fields[i].nanos?.slice() || [];\n      dest.fields[i].nanos = source.fields[i].nanos?.concat(nanos);\n    }\n  }\n  dest.length += source.length;\n  dest.meta = {\n    ...dest.meta,\n    stats: getCombinedMetadataStats(dest.meta?.stats ?? [], source.meta?.stats ?? [])\n  };\n}\nconst TOTAL_BYTES_STAT = \"Summary: total bytes processed\";\nfunction getCombinedMetadataStats(destStats, sourceStats) {\n  const destStat = destStats.find((s) => s.displayName === TOTAL_BYTES_STAT);\n  const sourceStat = sourceStats.find((s) => s.displayName === TOTAL_BYTES_STAT);\n  if (sourceStat != null && destStat != null) {\n    return [{ value: sourceStat.value + destStat.value, displayName: TOTAL_BYTES_STAT, unit: destStat.unit }];\n  }\n  const eitherStat = sourceStat ?? destStat;\n  if (eitherStat != null) {\n    return [eitherStat];\n  }\n  return [];\n}\nfunction cloneQueryResponse(response) {\n  const newResponse = {\n    ...response,\n    data: response.data.map(cloneDataFrame)\n  };\n  return newResponse;\n}\nfunction cloneDataFrame(frame) {\n  return {\n    ...frame,\n    fields: frame.fields.map((field) => ({\n      ...field,\n      values: field.values\n    }))\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3Jlc3BvbnNlVXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVdPO0FBRXVCO0FBQ2tDO0FBRXpELFNBQVMsc0JBQXNCLE9BQTJCO0FBQy9ELFFBQU0sWUFBc0IsTUFBTSxPQUFPLEtBQUssQ0FBQyxNQUFNLEVBQUUsU0FBUyxRQUFRLEdBQUcsVUFBVSxDQUFDO0FBQ3RGLFNBQU8sVUFBVSxLQUFLLENBQUMsV0FBVyxPQUFPLGNBQWMsTUFBUztBQUNsRTtBQUVPLFNBQVMsdUJBQXVCLE9BQTJCO0FBQ2hFLFFBQU0sWUFBc0IsTUFBTSxPQUFPLEtBQUssQ0FBQyxNQUFNLEVBQUUsU0FBUyxRQUFRLEdBQUcsVUFBVSxDQUFDO0FBQ3RGLFNBQU8sVUFBVSxLQUFLLENBQUMsV0FBVyxPQUFPLFVBQVUsTUFBUztBQUM5RDtBQUVPLFNBQVMsOEJBQThCLE9BSTVDO0FBQ0EsUUFBTSxZQUFZLE1BQU0sT0FBTyxLQUFLLENBQUMsVUFBVSxNQUFNLFNBQVMsb0RBQVMsQ0FBQyxNQUFNO0FBQzlFLE1BQUksYUFBYSxNQUFNO0FBQ3JCLFdBQU8sRUFBRSxTQUFTLE9BQU8sV0FBVyxPQUFPLFNBQVMsTUFBTTtBQUFBLEVBQzVEO0FBRUEsUUFBTSxXQUFxQixVQUFVO0FBRXJDLE1BQUksVUFBVTtBQUNkLE1BQUksWUFBWTtBQUNoQixNQUFJLFVBQVU7QUFFZCxXQUFTLFFBQVEsQ0FBQyxTQUFTO0FBQ3pCLFFBQUksMERBQWEsQ0FBQyxJQUFJLEdBQUc7QUFDdkIsZ0JBQVU7QUFFVixnQkFBVSw0REFBZSxDQUFDLElBQUk7QUFBQSxJQUNoQztBQUNBLFFBQUksNERBQWUsQ0FBQyxJQUFJLEdBQUc7QUFDekIsa0JBQVk7QUFBQSxJQUNkO0FBQUEsRUFDRixDQUFDO0FBRUQsU0FBTyxFQUFFLFdBQVcsU0FBUyxRQUFRO0FBQ3ZDO0FBRU8sU0FBUyw4QkFBOEIsT0FBNEI7QUFDeEUsUUFBTSxj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IjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9yZXNwb25zZVV0aWxzLnRzPzBmNjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRGF0YUZyYW1lLFxuICBEYXRhRnJhbWVUeXBlLFxuICBEYXRhUXVlcnlSZXNwb25zZSxcbiAgRGF0YVF1ZXJ5UmVzcG9uc2VEYXRhLFxuICBGaWVsZCxcbiAgRmllbGRUeXBlLFxuICBpc1ZhbGlkR29EdXJhdGlvbixcbiAgTGFiZWxzLFxuICBRdWVyeVJlc3VsdE1ldGFTdGF0LFxuICBzaGFsbG93Q29tcGFyZSxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmltcG9ydCB7IGlzQnl0ZXNTdHJpbmcgfSBmcm9tICcuL2xhbmd1YWdlVXRpbHMnO1xuaW1wb3J0IHsgaXNMb2dMaW5lSlNPTiwgaXNMb2dMaW5lTG9nZm10LCBpc0xvZ0xpbmVQYWNrZWQgfSBmcm9tICcuL2xpbmVQYXJzZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZGF0YUZyYW1lSGFzTG9raUVycm9yKGZyYW1lOiBEYXRhRnJhbWUpOiBib29sZWFuIHtcbiAgY29uc3QgbGFiZWxTZXRzOiBMYWJlbHNbXSA9IGZyYW1lLmZpZWxkcy5maW5kKChmKSA9PiBmLm5hbWUgPT09ICdsYWJlbHMnKT8udmFsdWVzID8/IFtdO1xuICByZXR1cm4gbGFiZWxTZXRzLnNvbWUoKGxhYmVscykgPT4gbGFiZWxzLl9fZXJyb3JfXyAhPT0gdW5kZWZpbmVkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFGcmFtZUhhc0xldmVsTGFiZWwoZnJhbWU6IERhdGFGcmFtZSk6IGJvb2xlYW4ge1xuICBjb25zdCBsYWJlbFNldHM6IExhYmVsc1tdID0gZnJhbWUuZmllbGRzLmZpbmQoKGYpID0+IGYubmFtZSA9PT0gJ2xhYmVscycpPy52YWx1ZXMgPz8gW107XG4gIHJldHVybiBsYWJlbFNldHMuc29tZSgobGFiZWxzKSA9PiBsYWJlbHMubGV2ZWwgIT09IHVuZGVmaW5lZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0TG9nUGFyc2VyRnJvbURhdGFGcmFtZShmcmFtZTogRGF0YUZyYW1lKToge1xuICBoYXNMb2dmbXQ6IGJvb2xlYW47XG4gIGhhc0pTT046IGJvb2xlYW47XG4gIGhhc1BhY2s6IGJvb2xlYW47XG59IHtcbiAgY29uc3QgbGluZUZpZWxkID0gZnJhbWUuZmllbGRzLmZpbmQoKGZpZWxkKSA9PiBmaWVsZC50eXBlID09PSBGaWVsZFR5cGUuc3RyaW5nKTtcbiAgaWYgKGxpbmVGaWVsZCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgaGFzSlNPTjogZmFsc2UsIGhhc0xvZ2ZtdDogZmFsc2UsIGhhc1BhY2s6IGZhbHNlIH07XG4gIH1cblxuICBjb25zdCBsb2dMaW5lczogc3RyaW5nW10gPSBsaW5lRmllbGQudmFsdWVzO1xuXG4gIGxldCBoYXNKU09OID0gZmFsc2U7XG4gIGxldCBoYXNMb2dmbXQgPSBmYWxzZTtcbiAgbGV0IGhhc1BhY2sgPSBmYWxzZTtcblxuICBsb2dMaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgaWYgKGlzTG9nTGluZUpTT04obGluZSkpIHtcbiAgICAgIGhhc0pTT04gPSB0cnVlO1xuXG4gICAgICBoYXNQYWNrID0gaXNMb2dMaW5lUGFja2VkKGxpbmUpO1xuICAgIH1cbiAgICBpZiAoaXNMb2dMaW5lTG9nZm10KGxpbmUpKSB7XG4gICAgICBoYXNMb2dmbXQgPSB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHsgaGFzTG9nZm10LCBoYXNKU09OLCBoYXNQYWNrIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0TGFiZWxLZXlzRnJvbURhdGFGcmFtZShmcmFtZTogRGF0YUZyYW1lKTogc3RyaW5nW10ge1xuICBjb25zdCBsYWJlbHNBcnJheTogQXJyYXk8eyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfT4gfCB1bmRlZmluZWQgPVxuICAgIGZyYW1lPy5maWVsZHM/LmZpbmQoKGZpZWxkKSA9PiBmaWVsZC5uYW1lID09PSAnbGFiZWxzJyk/LnZhbHVlcyA/PyBbXTtcblxuICBpZiAoIWxhYmVsc0FycmF5Py5sZW5ndGgpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmtleXMobGFiZWxzQXJyYXlbMF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFVud3JhcExhYmVsS2V5c0Zyb21EYXRhRnJhbWUoZnJhbWU6IERhdGFGcmFtZSk6IHN0cmluZ1tdIHtcbiAgY29uc3QgbGFiZWxzQXJyYXk6IEFycmF5PHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0+IHwgdW5kZWZpbmVkID1cbiAgICBmcmFtZT8uZmllbGRzPy5maW5kKChmaWVsZCkgPT4gZmllbGQubmFtZSA9PT0gJ2xhYmVscycpPy52YWx1ZXMgPz8gW107XG5cbiAgaWYgKCFsYWJlbHNBcnJheT8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gV2UgZG8gdGhpcyBvbmx5IGZvciBmaXJzdCBsYWJlbCBvYmplY3QsIGJlY2F1c2Ugd2Ugd2FudCB0byBjb25zaWRlciBvbmx5IGxhYmVscyB0aGF0IGFyZSBwcmVzZW50IGluIGFsbCBsb2cgbGluZXNcbiAgLy8gcG9zc2libGVVbndyYXBMYWJlbHMgYXJlIGxhYmVscyB3aXRoIDEuIG51bWJlciB2YWx1ZSBPUiAyLiB2YWx1ZSB0aGF0IGlzIHZhbGlkIGdvIGR1cmF0aW9uIE9SIDMuIGJ5dGVzIHN0cmluZyB2YWx1ZVxuICBjb25zdCBwb3NzaWJsZVVud3JhcExhYmVscyA9IE9iamVjdC5rZXlzKGxhYmVsc0FycmF5WzBdKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gbGFiZWxzQXJyYXlbMF1ba2V5XTtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHZhbHVlKSkgfHwgaXNWYWxpZEdvRHVyYXRpb24odmFsdWUpIHx8IGlzQnl0ZXNTdHJpbmcodmFsdWUpO1xuICB9KTtcblxuICAvLyBBZGQgb25seSBsYWJlbHMgdGhhdCBhcmUgcHJlc2VudCBpbiBldmVyeSBsaW5lIHRvIHVud3JhcExhYmVsc1xuICByZXR1cm4gcG9zc2libGVVbndyYXBMYWJlbHMuZmlsdGVyKChsYWJlbCkgPT4gbGFiZWxzQXJyYXkuZXZlcnkoKG9iaikgPT4gb2JqW2xhYmVsXSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEhhc0Vycm9yTGFiZWxGcm9tRGF0YUZyYW1lKGZyYW1lOiBEYXRhRnJhbWUpOiBib29sZWFuIHtcbiAgY29uc3QgbGFiZWxGaWVsZCA9IGZyYW1lLmZpZWxkcy5maW5kKChmaWVsZCkgPT4gZmllbGQubmFtZSA9PT0gJ2xhYmVscycgJiYgZmllbGQudHlwZSA9PT0gRmllbGRUeXBlLm90aGVyKTtcbiAgaWYgKGxhYmVsRmllbGQgPT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGxhYmVsczogQXJyYXk8eyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfT4gPSBsYWJlbEZpZWxkLnZhbHVlcztcbiAgcmV0dXJuIGxhYmVscy5zb21lKChsYWJlbCkgPT4gbGFiZWxbJ19fZXJyb3JfXyddKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RMZXZlbExpa2VMYWJlbEZyb21EYXRhRnJhbWUoZnJhbWU6IERhdGFGcmFtZSk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCBsYWJlbEZpZWxkID0gZnJhbWUuZmllbGRzLmZpbmQoKGZpZWxkKSA9PiBmaWVsZC5uYW1lID09PSAnbGFiZWxzJyAmJiBmaWVsZC50eXBlID09PSBGaWVsZFR5cGUub3RoZXIpO1xuICBpZiAobGFiZWxGaWVsZCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBEZXBlbmRpbmcgb24gbnVtYmVyIG9mIGxhYmVscywgdGhpcyBjYW4gYmUgcHJldHR5IGhlYXZ5IG9wZXJhdGlvbi5cbiAgLy8gTGV0J3MganVzdCBsb29rIGF0IGZpcnN0IDIgbGluZXMgSWYgbmVlZGVkLCB3ZSBjYW4gaW50cm9kdWNlIG1vcmUgbGF0ZXIuXG4gIGNvbnN0IGxhYmVsc0FycmF5OiBBcnJheTx7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9PiA9IGxhYmVsRmllbGQudmFsdWVzLnNsaWNlKDAsIDIpO1xuICBsZXQgbGV2ZWxMaWtlTGFiZWw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8vIEZpbmQgZmlyc3QgbGV2ZWwtbGlrZSBsYWJlbFxuICBmb3IgKGxldCBsYWJlbHMgb2YgbGFiZWxzQXJyYXkpIHtcbiAgICBjb25zdCBsYWJlbCA9IE9iamVjdC5rZXlzKGxhYmVscykuZmluZCgobGFiZWwpID0+IGxhYmVsID09PSAnbHZsJyB8fCBsYWJlbC5pbmNsdWRlcygnbGV2ZWwnKSk7XG4gICAgaWYgKGxhYmVsKSB7XG4gICAgICBsZXZlbExpa2VMYWJlbCA9IGxhYmVsO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBsZXZlbExpa2VMYWJlbDtcbn1cblxuZnVuY3Rpb24gc2hvdWxkQ29tYmluZShmcmFtZTE6IERhdGFGcmFtZSwgZnJhbWUyOiBEYXRhRnJhbWUpOiBib29sZWFuIHtcbiAgaWYgKGZyYW1lMS5yZWZJZCAhPT0gZnJhbWUyLnJlZklkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgZnJhbWVUeXBlMSA9IGZyYW1lMS5tZXRhPy50eXBlO1xuICBjb25zdCBmcmFtZVR5cGUyID0gZnJhbWUyLm1ldGE/LnR5cGU7XG5cbiAgaWYgKGZyYW1lVHlwZTEgIT09IGZyYW1lVHlwZTIpIHtcbiAgICAvLyB3ZSBkbyBub3Qgam9pbiB0aGluZ3MgdGhhdCBoYXZlIGEgZGlmZmVyZW50IHR5cGVcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBtZXRyaWMgcmFuZ2UgcXVlcnkgZGF0YVxuICBpZiAoZnJhbWVUeXBlMSA9PT0gRGF0YUZyYW1lVHlwZS5UaW1lU2VyaWVzTXVsdGkpIHtcbiAgICBjb25zdCBmaWVsZDEgPSBmcmFtZTEuZmllbGRzLmZpbmQoKGYpID0+IGYudHlwZSA9PT0gRmllbGRUeXBlLm51bWJlcik7XG4gICAgY29uc3QgZmllbGQyID0gZnJhbWUyLmZpZWxkcy5maW5kKChmKSA9PiBmLnR5cGUgPT09IEZpZWxkVHlwZS5udW1iZXIpO1xuICAgIGlmIChmaWVsZDEgPT09IHVuZGVmaW5lZCB8fCBmaWVsZDIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gc2hvdWxkIG5ldmVyIGhhcHBlblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBzaGFsbG93Q29tcGFyZShmaWVsZDEubGFiZWxzID8/IHt9LCBmaWVsZDIubGFiZWxzID8/IHt9KTtcbiAgfVxuXG4gIC8vIGxvZ3MgcXVlcnkgZGF0YVxuICAvLyBsb2dzIHVzZSBhIHNwZWNpYWwgYXR0cmlidXRlIGluIHRoZSBkYXRhZnJhbWUncyBcImN1c3RvbVwiIHNlY3Rpb25cbiAgLy8gYmVjYXVzZSB3ZSBkbyBub3QgaGF2ZSBhIGdvb2QgXCJmcmFtZXR5cGVcIiB2YWx1ZSBmb3IgdGhlbSB5ZXQuXG4gIGNvbnN0IGN1c3RvbVR5cGUxID0gZnJhbWUxLm1ldGE/LmN1c3RvbT8uZnJhbWVUeXBlO1xuICBjb25zdCBjdXN0b21UeXBlMiA9IGZyYW1lMi5tZXRhPy5jdXN0b20/LmZyYW1lVHlwZTtcblxuICBpZiAoY3VzdG9tVHlwZTEgPT09ICdMYWJlbGVkVGltZVZhbHVlcycgJiYgY3VzdG9tVHlwZTIgPT09ICdMYWJlbGVkVGltZVZhbHVlcycpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIHNob3VsZCBuZXZlciByZWFjaCBoZXJlXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbWJpbmVSZXNwb25zZXMoY3VycmVudFJlc3VsdDogRGF0YVF1ZXJ5UmVzcG9uc2UgfCBudWxsLCBuZXdSZXN1bHQ6IERhdGFRdWVyeVJlc3BvbnNlKSB7XG4gIGlmICghY3VycmVudFJlc3VsdCkge1xuICAgIHJldHVybiBjbG9uZVF1ZXJ5UmVzcG9uc2UobmV3UmVzdWx0KTtcbiAgfVxuXG4gIG5ld1Jlc3VsdC5kYXRhLmZvckVhY2goKG5ld0ZyYW1lKSA9PiB7XG4gICAgY29uc3QgY3VycmVudEZyYW1lID0gY3VycmVudFJlc3VsdC5kYXRhLmZpbmQoKGZyYW1lKSA9PiBzaG91bGRDb21iaW5lKGZyYW1lLCBuZXdGcmFtZSkpO1xuICAgIGlmICghY3VycmVudEZyYW1lKSB7XG4gICAgICBjdXJyZW50UmVzdWx0LmRhdGEucHVzaChjbG9uZURhdGFGcmFtZShuZXdGcmFtZSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb21iaW5lRnJhbWVzKGN1cnJlbnRGcmFtZSwgbmV3RnJhbWUpO1xuICB9KTtcblxuICBjb25zdCBtZXJnZWRFcnJvcnMgPSBbLi4uKGN1cnJlbnRSZXN1bHQuZXJyb3JzID8/IFtdKSwgLi4uKG5ld1Jlc3VsdC5lcnJvcnMgPz8gW10pXTtcblxuICAvLyB3ZSBtYWtlIHN1cmUgdG8gaGF2ZSBgLmVycm9yc2AgYXMgdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIGVtcHR5LWFycmF5XG4gIC8vIHdoZW4gbm8gZXJyb3JzLlxuXG4gIGlmIChtZXJnZWRFcnJvcnMubGVuZ3RoID4gMCkge1xuICAgIGN1cnJlbnRSZXN1bHQuZXJyb3JzID0gbWVyZ2VkRXJyb3JzO1xuICB9XG5cbiAgLy8gdGhlIGAuZXJyb3JgIGF0dHJpYnV0ZSBpcyBvYnNvbGV0ZSBub3csXG4gIC8vIGJ1dCB3ZSBoYXZlIHRvIG1haW50YWluIGl0LCBvdGhlcndpc2VcbiAgLy8gc29tZSBncmFmYW5hIHBhcnRzIGRvIG5vdCBiZWhhdmUgd2VsbC5cbiAgLy8gd2UganVzdCBjaG9vc2UgdGhlIG9sZCBlcnJvciwgaWYgaXQgZXhpc3RzLFxuICAvLyBvdGhlcndpc2UgdGhlIG5ldyBlcnJvciwgaWYgaXQgZXhpc3RzLlxuICBjb25zdCBtZXJnZWRFcnJvciA9IGN1cnJlbnRSZXN1bHQuZXJyb3IgPz8gbmV3UmVzdWx0LmVycm9yO1xuICBpZiAobWVyZ2VkRXJyb3IgIT0gbnVsbCkge1xuICAgIGN1cnJlbnRSZXN1bHQuZXJyb3IgPSBtZXJnZWRFcnJvcjtcbiAgfVxuXG4gIGNvbnN0IG1lcmdlZFRyYWNlSWRzID0gWy4uLihjdXJyZW50UmVzdWx0LnRyYWNlSWRzID8/IFtdKSwgLi4uKG5ld1Jlc3VsdC50cmFjZUlkcyA/PyBbXSldO1xuICBpZiAobWVyZ2VkVHJhY2VJZHMubGVuZ3RoID4gMCkge1xuICAgIGN1cnJlbnRSZXN1bHQudHJhY2VJZHMgPSBtZXJnZWRUcmFjZUlkcztcbiAgfVxuXG4gIHJldHVybiBjdXJyZW50UmVzdWx0O1xufVxuXG5mdW5jdGlvbiBjb21iaW5lRnJhbWVzKGRlc3Q6IERhdGFGcmFtZSwgc291cmNlOiBEYXRhRnJhbWUpIHtcbiAgY29uc3QgdG90YWxGaWVsZHMgPSBkZXN0LmZpZWxkcy5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxGaWVsZHM7IGkrKykge1xuICAgIGRlc3QuZmllbGRzW2ldLnZhbHVlcyA9IFtdLmNvbmNhdC5hcHBseShzb3VyY2UuZmllbGRzW2ldLnZhbHVlcywgZGVzdC5maWVsZHNbaV0udmFsdWVzKTtcbiAgICBpZiAoc291cmNlLmZpZWxkc1tpXS5uYW5vcykge1xuICAgICAgY29uc3QgbmFub3M6IG51bWJlcltdID0gZGVzdC5maWVsZHNbaV0ubmFub3M/LnNsaWNlKCkgfHwgW107XG4gICAgICBkZXN0LmZpZWxkc1tpXS5uYW5vcyA9IHNvdXJjZS5maWVsZHNbaV0ubmFub3M/LmNvbmNhdChuYW5vcyk7XG4gICAgfVxuICB9XG4gIGRlc3QubGVuZ3RoICs9IHNvdXJjZS5sZW5ndGg7XG4gIGRlc3QubWV0YSA9IHtcbiAgICAuLi5kZXN0Lm1ldGEsXG4gICAgc3RhdHM6IGdldENvbWJpbmVkTWV0YWRhdGFTdGF0cyhkZXN0Lm1ldGE/LnN0YXRzID8/IFtdLCBzb3VyY2UubWV0YT8uc3RhdHMgPz8gW10pLFxuICB9O1xufVxuXG5jb25zdCBUT1RBTF9CWVRFU19TVEFUID0gJ1N1bW1hcnk6IHRvdGFsIGJ5dGVzIHByb2Nlc3NlZCc7XG5cbmZ1bmN0aW9uIGdldENvbWJpbmVkTWV0YWRhdGFTdGF0cyhcbiAgZGVzdFN0YXRzOiBRdWVyeVJlc3VsdE1ldGFTdGF0W10sXG4gIHNvdXJjZVN0YXRzOiBRdWVyeVJlc3VsdE1ldGFTdGF0W11cbik6IFF1ZXJ5UmVzdWx0TWV0YVN0YXRbXSB7XG4gIC8vIGluIHRoZSBjdXJyZW50IGFwcHJvYWNoLCB3ZSBvbmx5IGhhbmRsZSBhIHNpbmdsZSBzdGF0XG4gIGNvbnN0IGRlc3RTdGF0ID0gZGVzdFN0YXRzLmZpbmQoKHMpID0+IHMuZGlzcGxheU5hbWUgPT09IFRPVEFMX0JZVEVTX1NUQVQpO1xuICBjb25zdCBzb3VyY2VTdGF0ID0gc291cmNlU3RhdHMuZmluZCgocykgPT4gcy5kaXNwbGF5TmFtZSA9PT0gVE9UQUxfQllURVNfU1RBVCk7XG5cbiAgaWYgKHNvdXJjZVN0YXQgIT0gbnVsbCAmJiBkZXN0U3RhdCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIFt7IHZhbHVlOiBzb3VyY2VTdGF0LnZhbHVlICsgZGVzdFN0YXQudmFsdWUsIGRpc3BsYXlOYW1lOiBUT1RBTF9CWVRFU19TVEFULCB1bml0OiBkZXN0U3RhdC51bml0IH1dO1xuICB9XG5cbiAgLy8gbWF5YmUgb25lIG9mIHRoZW0gZXhpc3RcbiAgY29uc3QgZWl0aGVyU3RhdCA9IHNvdXJjZVN0YXQgPz8gZGVzdFN0YXQ7XG4gIGlmIChlaXRoZXJTdGF0ICE9IG51bGwpIHtcbiAgICByZXR1cm4gW2VpdGhlclN0YXRdO1xuICB9XG5cbiAgcmV0dXJuIFtdO1xufVxuXG4vKipcbiAqIERlZXAgY2xvbmVzIGEgRGF0YVF1ZXJ5UmVzcG9uc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lUXVlcnlSZXNwb25zZShyZXNwb25zZTogRGF0YVF1ZXJ5UmVzcG9uc2UpOiBEYXRhUXVlcnlSZXNwb25zZSB7XG4gIGNvbnN0IG5ld1Jlc3BvbnNlID0ge1xuICAgIC4uLnJlc3BvbnNlLFxuICAgIGRhdGE6IHJlc3BvbnNlLmRhdGEubWFwKGNsb25lRGF0YUZyYW1lKSxcbiAgfTtcbiAgcmV0dXJuIG5ld1Jlc3BvbnNlO1xufVxuXG5mdW5jdGlvbiBjbG9uZURhdGFGcmFtZShmcmFtZTogRGF0YVF1ZXJ5UmVzcG9uc2VEYXRhKTogRGF0YVF1ZXJ5UmVzcG9uc2VEYXRhIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5mcmFtZSxcbiAgICBmaWVsZHM6IGZyYW1lLmZpZWxkcy5tYXAoKGZpZWxkOiBGaWVsZCkgPT4gKHtcbiAgICAgIC4uLmZpZWxkLFxuICAgICAgdmFsdWVzOiBmaWVsZC52YWx1ZXMsXG4gICAgfSkpLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbImxhYmVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/responseUtils.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/sortDataFrame.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SortDirection: () => (/* binding */ SortDirection),\n/* harmony export */   sortDataFrameByTime: () => (/* binding */ sortDataFrameByTime)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/vector/SortedVector.ts\");\n\n\nvar SortDirection = /* @__PURE__ */ ((SortDirection2) => {\n  SortDirection2[SortDirection2[\"Ascending\"] = 0] = \"Ascending\";\n  SortDirection2[SortDirection2[\"Descending\"] = 1] = \"Descending\";\n  return SortDirection2;\n})(SortDirection || {});\nfunction makeIndex(field, dir) {\n  const fieldValues = field.values;\n  const index = Array(fieldValues.length);\n  for (let i = 0; i < index.length; i++) {\n    index[i] = i;\n  }\n  const isAsc = dir === 0 /* Ascending */;\n  index.sort((a, b) => {\n    const valA = fieldValues[a];\n    const valB = fieldValues[b];\n    if (valA < valB) {\n      return isAsc ? -1 : 1;\n    }\n    if (valA > valB) {\n      return isAsc ? 1 : -1;\n    }\n    return 0;\n  });\n  return index;\n}\nfunction sortDataFrameByTime(frame, dir) {\n  const { fields, ...rest } = frame;\n  const tsNsField = fields.find((field) => field.name === \"tsNs\");\n  if (tsNsField === void 0) {\n    throw new Error(\"missing nanosecond-timestamp field. should never happen\");\n  }\n  const index = makeIndex(tsNsField, dir);\n  return {\n    ...rest,\n    fields: fields.map((field) => ({\n      ...field,\n      values: new _grafana_data__WEBPACK_IMPORTED_MODULE_0__.SortedVector(field.values, index).toArray()\n    }))\n  };\n  return frame;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3NvcnREYXRhRnJhbWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUV4QyxJQUFLLGdCQUFMLGtCQUFLQSxtQkFBTDtBQUNMLEVBQUFBLDhCQUFBO0FBQ0EsRUFBQUEsOEJBQUE7QUFGVSxTQUFBQTtBQUFBO0FBZVosU0FBUyxVQUFVLE9BQXNCLEtBQThCO0FBQ3JFLFFBQU0sY0FBd0IsTUFBTTtBQUdwQyxRQUFNLFFBQVEsTUFBTSxZQUFZLE1BQU07QUFDdEMsV0FBUyxJQUFJLEdBQUcsSUFBSSxNQUFNLFFBQVEsS0FBSztBQUNyQyxVQUFNLENBQUMsSUFBSTtBQUFBLEVBQ2I7QUFFQSxRQUFNLFFBQVEsUUFBUTtBQUV0QixRQUFNLEtBQUssQ0FBQyxHQUFXLE1BQXNCO0FBRzNDLFVBQU0sT0FBTyxZQUFZLENBQUM7QUFDMUIsVUFBTSxPQUFPLFlBQVksQ0FBQztBQUMxQixRQUFJLE9BQU8sTUFBTTtBQUNmLGFBQU8sUUFBUSxLQUFLO0FBQUEsSUFDdEI7QUFFQSxRQUFJLE9BQU8sTUFBTTtBQUNmLGFBQU8sUUFBUSxJQUFJO0FBQUEsSUFDckI7QUFFQSxXQUFPO0FBQUEsRUFDVCxDQUFDO0FBRUQsU0FBTztBQUNUO0FBSU8sU0FBUyxvQkFBb0IsT0FBa0IsS0FBK0I7QUFDbkYsUUFBTSxFQUFFLFFBQVEsR0FBRyxLQUFLLElBQUk7QUFNNUIsUUFBTSxZQUFZLE9BQU8sS0FBSyxDQUFDLFVBQVUsTUFBTSxTQUFTLE1BQU07QUFDOUQsTUFBSSxjQUFjLFFBQVc7QUFDM0IsVUFBTSxJQUFJLE1BQU0seURBQXlEO0FBQUEsRUFDM0U7QUFFQSxRQUFNLFFBQVEsVUFBVSxXQUFXLEdBQUc7QUFFdEMsU0FBTztBQUFBLElBQ0wsR0FBRztBQUFBLElBQ0gsUUFBUSxPQUFPLElBQUksQ0FBQyxXQUFXO0FBQUEsTUFDN0IsR0FBRztBQUFBLE1BQ0gsUUFBUSxJQUFJLHVEQUFZLENBQUMsTUFBTSxRQUFRLEtBQUssRUFBRSxRQUFRO0FBQUEsSUFDeEQsRUFBRTtBQUFBLEVBQ0o7QUFFQSxTQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9zb3J0RGF0YUZyYW1lLnRzPzE4OGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YUZyYW1lLCBGaWVsZCwgU29ydGVkVmVjdG9yIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbmV4cG9ydCBlbnVtIFNvcnREaXJlY3Rpb24ge1xuICBBc2NlbmRpbmcsXG4gIERlc2NlbmRpbmcsXG59XG5cbi8vIGNyZWF0ZXMgdGhlIGBpbmRleGAgZm9yIHRoZSBzb3J0aW5nLlxuLy8gdGhpcyBpcyBuZWVkZWQgYnkgdGhlIGBTb3J0ZWRWZWN0b3JgLlxuLy8gdGhlIGluZGV4IGlzIGFuIGFycmF5IG9mIG51bWJlcnMsIGFuZCBpdCBkZWZpbmVzIGFuIG9yZGVyLlxuLy8gYXQgZXZlcnkgc2xvdCBpbiB0aGUgaW5kZXggdGhlIHZhbHVlcyBpcyB0aGUgcG9zaXRpb24gb2Zcbi8vIHRoZSBzb3J0ZWQgaXRlbS5cbi8vIGZvciBleGFtcGxlLCBhbiBpbmRleCBvZiBbMywxLDJdIG1lYW5zIHRoYXRcbi8vIGluIHRoZSBkYXRhZnJhbWUsIHRoYXQgaGFzIDMgcm93cywgYWZ0ZXIgc29ydGluZzpcbi8vIC0gdGhlIHRoaXJkIHJvdyB3aWxsIGJlY29tZSB0aGUgZmlyc3Rcbi8vIC0gdGhlIGZpcnN0IHJvdyB3aWxsIGJlY29tZSB0aGUgc2Vjb25kXG4vLyAtIHRoZSBzZWNvbmQgcm93IHdpbGwgYmVjb21lIHRoZSB0aGlyZFxuZnVuY3Rpb24gbWFrZUluZGV4KGZpZWxkOiBGaWVsZDxzdHJpbmc+LCBkaXI6IFNvcnREaXJlY3Rpb24pOiBudW1iZXJbXSB7XG4gIGNvbnN0IGZpZWxkVmFsdWVzOiBzdHJpbmdbXSA9IGZpZWxkLnZhbHVlcztcblxuICAvLyB3ZSBmaXJzdCBidWlsZCBhbiBhcnJheSB3aGljaCBpcyBbMCwxLDIsMy4uLi5dXG4gIGNvbnN0IGluZGV4ID0gQXJyYXkoZmllbGRWYWx1ZXMubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleC5sZW5ndGg7IGkrKykge1xuICAgIGluZGV4W2ldID0gaTtcbiAgfVxuXG4gIGNvbnN0IGlzQXNjID0gZGlyID09PSBTb3J0RGlyZWN0aW9uLkFzY2VuZGluZztcblxuICBpbmRleC5zb3J0KChhOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgLy8gd2UgbmVlZCB0byBhbnN3ZXIgdGhpcyBxdWVzdGlvbjpcbiAgICAvLyBpbiB0aGUgZmllbGQtdXNlZC1mb3Itc29ydGluZywgaG93IHdvdWxkIHdlIGNvbXBhcmUgdmFsdWUtYXQtaW5kZXgtYSB0byB2YWx1ZS1hdC1pbmRleC1iP1xuICAgIGNvbnN0IHZhbEEgPSBmaWVsZFZhbHVlc1thXTtcbiAgICBjb25zdCB2YWxCID0gZmllbGRWYWx1ZXNbYl07XG4gICAgaWYgKHZhbEEgPCB2YWxCKSB7XG4gICAgICByZXR1cm4gaXNBc2MgPyAtMSA6IDE7XG4gICAgfVxuXG4gICAgaWYgKHZhbEEgPiB2YWxCKSB7XG4gICAgICByZXR1cm4gaXNBc2MgPyAxIDogLTE7XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH0pO1xuXG4gIHJldHVybiBpbmRleDtcbn1cblxuLy8gc29ydCBhIGRhdGFmcmFtZSB0aGF0IGlzIGluIHRoZSBMb2tpIGZvcm1hdCBhc2NlbmRpbmcgb3IgZGVzY2VuZGluZyxcbi8vIGJhc2VkIG9uIHRoZSBuYW5vc2Vjb25kLXRpbWVzdGFtcFxuZXhwb3J0IGZ1bmN0aW9uIHNvcnREYXRhRnJhbWVCeVRpbWUoZnJhbWU6IERhdGFGcmFtZSwgZGlyOiBTb3J0RGlyZWN0aW9uKTogRGF0YUZyYW1lIHtcbiAgY29uc3QgeyBmaWVsZHMsIC4uLnJlc3QgfSA9IGZyYW1lO1xuXG4gIC8vIHdlIHVzZSB0aGUgYXBwcm9hY2ggdXNlZCBpbiBAZ3JhZmFuYS9kYXRhL3NvcnREYXRhZnJhbWUuXG4gIC8vIHdlIGNhbm5vdCB1c2UgaXQgZGlyZWN0bHksIGJlY2F1c2Ugb3VyIHRzTnMgZmllbGQgaGFzIGEgdHlwZT10aW1lLFxuICAvLyBzbyB3ZSBoYXZlIHRvIGJ1aWxkIHRoZSBgaW5kZXhgIG1hbnVhbGx5LlxuXG4gIGNvbnN0IHRzTnNGaWVsZCA9IGZpZWxkcy5maW5kKChmaWVsZCkgPT4gZmllbGQubmFtZSA9PT0gJ3RzTnMnKTtcbiAgaWYgKHRzTnNGaWVsZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdtaXNzaW5nIG5hbm9zZWNvbmQtdGltZXN0YW1wIGZpZWxkLiBzaG91bGQgbmV2ZXIgaGFwcGVuJyk7XG4gIH1cblxuICBjb25zdCBpbmRleCA9IG1ha2VJbmRleCh0c05zRmllbGQsIGRpcik7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5yZXN0LFxuICAgIGZpZWxkczogZmllbGRzLm1hcCgoZmllbGQpID0+ICh7XG4gICAgICAuLi5maWVsZCxcbiAgICAgIHZhbHVlczogbmV3IFNvcnRlZFZlY3RvcihmaWVsZC52YWx1ZXMsIGluZGV4KS50b0FycmF5KCksXG4gICAgfSkpLFxuICB9O1xuXG4gIHJldHVybiBmcmFtZTtcbn1cbiJdLCJuYW1lcyI6WyJTb3J0RGlyZWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/sortDataFrame.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/streaming.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   doLokiChannelStream: () => (/* binding */ doLokiChannelStream),\n/* harmony export */   getLiveStreamKey: () => (/* binding */ getLiveStreamKey)\n/* harmony export */ });\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/defer.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/StreamingDataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/live.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/data.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/live.ts\");\n\n\n\n\nasync function getLiveStreamKey(query) {\n  const str = JSON.stringify({ expr: query.expr });\n  const msgUint8 = new TextEncoder().encode(str);\n  const hashBuffer = await crypto.subtle.digest(\"SHA-1\", msgUint8);\n  const hashArray = Array.from(new Uint8Array(hashBuffer.slice(0, 8)));\n  return hashArray.map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n}\nfunction doLokiChannelStream(query, ds, options) {\n  const range = options.range;\n  const maxDelta = range.to.valueOf() - range.from.valueOf() + 1e3;\n  let maxLength = options.maxDataPoints ?? 1e3;\n  if (maxLength > 100) {\n    maxLength *= 2;\n  }\n  let frame = void 0;\n  const updateFrame = (msg) => {\n    if (msg?.message) {\n      const p = msg.message;\n      if (!frame) {\n        frame = _grafana_data__WEBPACK_IMPORTED_MODULE_0__.StreamingDataFrame.fromDataFrameJSON(p, {\n          maxLength,\n          maxDelta,\n          displayNameFormat: query.legendFormat\n        });\n      } else {\n        frame.push(p);\n      }\n    }\n    return frame;\n  };\n  return (0,rxjs__WEBPACK_IMPORTED_MODULE_1__.defer)(() => getLiveStreamKey(query)).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_2__.mergeMap)((key) => {\n      return (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_3__.getGrafanaLiveSrv)().getStream({\n        scope: _grafana_data__WEBPACK_IMPORTED_MODULE_4__.LiveChannelScope.DataSource,\n        namespace: ds.uid,\n        path: `tail/${key}`,\n        data: {\n          ...query,\n          timeRange: {\n            from: range.from.valueOf().toString(),\n            to: range.to.valueOf().toString()\n          }\n        }\n      }).pipe(\n        (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.map)((evt) => {\n          const frame2 = updateFrame(evt);\n          return {\n            data: frame2 ? [frame2] : [],\n            state: _grafana_data__WEBPACK_IMPORTED_MODULE_6__.LoadingState.Streaming\n          };\n        })\n      );\n    })\n  );\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3N0cmVhbWluZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWlEO0FBUzFDO0FBQzJCO0FBVTNCLGVBQWUsaUJBQWlCLE9BQW1DO0FBQ3hFLFFBQU0sTUFBTSxLQUFLLFVBQVUsRUFBRSxNQUFNLE1BQU0sS0FBSyxDQUFDO0FBRS9DLFFBQU0sV0FBVyxJQUFJLFlBQVksRUFBRSxPQUFPLEdBQUc7QUFDN0MsUUFBTSxhQUFhLE1BQU0sT0FBTyxPQUFPLE9BQU8sU0FBUyxRQUFRO0FBQy9ELFFBQU0sWUFBWSxNQUFNLEtBQUssSUFBSSxXQUFXLFdBQVcsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ25FLFNBQU8sVUFBVSxJQUFJLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxFQUFFLFNBQVMsR0FBRyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUU7QUFDdEU7QUFHTyxTQUFTLG9CQUNkLE9BQ0EsSUFDQSxTQUMrQjtBQUUvQixRQUFNLFFBQVEsUUFBUTtBQUN0QixRQUFNLFdBQVcsTUFBTSxHQUFHLFFBQVEsSUFBSSxNQUFNLEtBQUssUUFBUSxJQUFJO0FBQzdELE1BQUksWUFBWSxRQUFRLGlCQUFpQjtBQUN6QyxNQUFJLFlBQVksS0FBSztBQUVuQixpQkFBYTtBQUFBLEVBQ2Y7QUFFQSxNQUFJLFFBQXdDO0FBQzVDLFFBQU0sY0FBYyxDQUFDLFFBQWE7QUFDaEMsUUFBSSxLQUFLLFNBQVM7QUFDaEIsWUFBTSxJQUFJLElBQUk7QUFDZCxVQUFJLENBQUMsT0FBTztBQUNWLGdCQUFRLDZEQUFrQixDQUFDLGtCQUFrQixHQUFHO0FBQUEsVUFDOUM7QUFBQSxVQUNBO0FBQUEsVUFDQSxtQkFBbUIsTUFBTTtBQUFBLFFBQzNCLENBQUM7QUFBQSxNQUNILE9BQU87QUFDTCxjQUFNLEtBQUssQ0FBQztBQUFBLE1BQ2Q7QUFBQSxJQUNGO0FBQ0EsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPLDJDQUFLLENBQUMsTUFBTSxpQkFBaUIsS0FBSyxDQUFDLEVBQUU7QUFBQSxJQUMxQyw4Q0FBUSxDQUFDLENBQUMsUUFBUTtBQUNoQixhQUFPLG1FQUFpQixDQUFDLEVBQ3RCLFVBQWU7QUFBQSxRQUNkLE9BQU8sMkRBQWdCLENBQUM7QUFBQSxRQUN4QixXQUFXLEdBQUc7QUFBQSxRQUNkLE1BQU0sUUFBUTtBQUFBLFFBQ2QsTUFBTTtBQUFBLFVBQ0osR0FBRztBQUFBLFVBQ0gsV0FBVztBQUFBLFlBQ1QsTUFBTSxNQUFNLEtBQUssUUFBUSxFQUFFLFNBQVM7QUFBQSxZQUNwQyxJQUFJLE1BQU0sR0FBRyxRQUFRLEVBQUUsU0FBUztBQUFBLFVBQ2xDO0FBQUEsUUFDRjtBQUFBLE1BQ0YsQ0FBQyxFQUNBO0FBQUEsUUFDQyx5Q0FBRyxDQUFDLENBQUMsUUFBUTtBQUNYLGdCQUFNQSxTQUFRLFlBQVksR0FBRztBQUM3QixpQkFBTztBQUFBLFlBQ0wsTUFBTUEsU0FBUSxDQUFDQSxNQUFLLElBQUksQ0FBQztBQUFBLFlBQ3pCLE9BQU8sdURBQVksQ0FBQztBQUFBLFVBQ3RCO0FBQUEsUUFDRixDQUFDO0FBQUEsTUFDSDtBQUFBLElBQ0osQ0FBQztBQUFBLEVBQ0g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3N0cmVhbWluZy50cz9iZTVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hcCwgT2JzZXJ2YWJsZSwgZGVmZXIsIG1lcmdlTWFwIH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7XG4gIERhdGFGcmFtZUpTT04sXG4gIERhdGFRdWVyeVJlcXVlc3QsXG4gIERhdGFRdWVyeVJlc3BvbnNlLFxuICBMaXZlQ2hhbm5lbFNjb3BlLFxuICBMb2FkaW5nU3RhdGUsXG4gIFN0cmVhbWluZ0RhdGFGcmFtZSxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBnZXRHcmFmYW5hTGl2ZVNydiB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuXG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSB9IGZyb20gJy4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBMb2tpUXVlcnkgfSBmcm9tICcuL3R5cGVzJztcblxuLyoqXG4gKiBDYWxjdWxhdGUgYSB1bmlxdWUga2V5IGZvciB0aGUgcXVlcnkuICBUaGUga2V5IGlzIHVzZWQgdG8gcGljayBhIGNoYW5uZWwgYW5kIHNob3VsZFxuICogYmUgdW5pcXVlIGZvciBlYWNoIGRpc3RpbmN0IHF1ZXJ5IGV4ZWN1dGlvbiBwbGFuLiAgVGhpcyBrZXkgaXMgbm90IHNlY3VyZSBhbmQgaXMgb25seSBwaWNrZWQgdG8gYXZvaWRcbiAqIHBvc3NpYmxlIGNvbGxpc2lvbnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExpdmVTdHJlYW1LZXkocXVlcnk6IExva2lRdWVyeSk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHsgZXhwcjogcXVlcnkuZXhwciB9KTtcblxuICBjb25zdCBtc2dVaW50OCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIpOyAvLyBlbmNvZGUgYXMgKHV0Zi04KSBVaW50OEFycmF5XG4gIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTEnLCBtc2dVaW50OCk7IC8vIGhhc2ggdGhlIG1lc3NhZ2VcbiAgY29uc3QgaGFzaEFycmF5ID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShoYXNoQnVmZmVyLnNsaWNlKDAsIDgpKSk7IC8vIGZpcnN0IDggYnl0ZXNcbiAgcmV0dXJuIGhhc2hBcnJheS5tYXAoKGIpID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xufVxuXG4vLyBUaGlzIHdpbGwgZ2V0IGJvdGggdjEgYW5kIHYyIHJlc3VsdCBmb3JtYXRzXG5leHBvcnQgZnVuY3Rpb24gZG9Mb2tpQ2hhbm5lbFN0cmVhbShcbiAgcXVlcnk6IExva2lRdWVyeSxcbiAgZHM6IExva2lEYXRhc291cmNlLFxuICBvcHRpb25zOiBEYXRhUXVlcnlSZXF1ZXN0PExva2lRdWVyeT5cbik6IE9ic2VydmFibGU8RGF0YVF1ZXJ5UmVzcG9uc2U+IHtcbiAgLy8gbWF4aW11bSB0aW1lIHRvIGtlZXAgdmFsdWVzXG4gIGNvbnN0IHJhbmdlID0gb3B0aW9ucy5yYW5nZTtcbiAgY29uc3QgbWF4RGVsdGEgPSByYW5nZS50by52YWx1ZU9mKCkgLSByYW5nZS5mcm9tLnZhbHVlT2YoKSArIDEwMDA7XG4gIGxldCBtYXhMZW5ndGggPSBvcHRpb25zLm1heERhdGFQb2ludHMgPz8gMTAwMDtcbiAgaWYgKG1heExlbmd0aCA+IDEwMCkge1xuICAgIC8vIGZvciBzbWFsbCBidWZmZXJzLCBrZWVwIHRoZW0gc21hbGxcbiAgICBtYXhMZW5ndGggKj0gMjtcbiAgfVxuXG4gIGxldCBmcmFtZTogU3RyZWFtaW5nRGF0YUZyYW1lIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBjb25zdCB1cGRhdGVGcmFtZSA9IChtc2c6IGFueSkgPT4ge1xuICAgIGlmIChtc2c/Lm1lc3NhZ2UpIHtcbiAgICAgIGNvbnN0IHAgPSBtc2cubWVzc2FnZSBhcyBEYXRhRnJhbWVKU09OO1xuICAgICAgaWYgKCFmcmFtZSkge1xuICAgICAgICBmcmFtZSA9IFN0cmVhbWluZ0RhdGFGcmFtZS5mcm9tRGF0YUZyYW1lSlNPTihwLCB7XG4gICAgICAgICAgbWF4TGVuZ3RoLFxuICAgICAgICAgIG1heERlbHRhLFxuICAgICAgICAgIGRpc3BsYXlOYW1lRm9ybWF0OiBxdWVyeS5sZWdlbmRGb3JtYXQsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnJhbWUucHVzaChwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZyYW1lO1xuICB9O1xuXG4gIHJldHVybiBkZWZlcigoKSA9PiBnZXRMaXZlU3RyZWFtS2V5KHF1ZXJ5KSkucGlwZShcbiAgICBtZXJnZU1hcCgoa2V5KSA9PiB7XG4gICAgICByZXR1cm4gZ2V0R3JhZmFuYUxpdmVTcnYoKVxuICAgICAgICAuZ2V0U3RyZWFtPGFueT4oe1xuICAgICAgICAgIHNjb3BlOiBMaXZlQ2hhbm5lbFNjb3BlLkRhdGFTb3VyY2UsXG4gICAgICAgICAgbmFtZXNwYWNlOiBkcy51aWQsXG4gICAgICAgICAgcGF0aDogYHRhaWwvJHtrZXl9YCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAuLi5xdWVyeSxcbiAgICAgICAgICAgIHRpbWVSYW5nZToge1xuICAgICAgICAgICAgICBmcm9tOiByYW5nZS5mcm9tLnZhbHVlT2YoKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICB0bzogcmFuZ2UudG8udmFsdWVPZigpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgIG1hcCgoZXZ0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IHVwZGF0ZUZyYW1lKGV2dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBkYXRhOiBmcmFtZSA/IFtmcmFtZV0gOiBbXSxcbiAgICAgICAgICAgICAgc3RhdGU6IExvYWRpbmdTdGF0ZS5TdHJlYW1pbmcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfSlcbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJmcmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/streaming.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/tracking.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onDashboardLoadedHandler: () => (/* binding */ onDashboardLoadedHandler),\n/* harmony export */   trackGroupedQueries: () => (/* binding */ trackGroupedQueries),\n/* harmony export */   trackQuery: () => (/* binding */ trackQuery)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/app.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var app_features_variables_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/features/variables/utils.ts\");\n/* harmony import */ var _prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/types.ts\");\n/* harmony import */ var _datasource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/datasource.ts\");\n/* harmony import */ var _plugin_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/plugin.json\");\n/* harmony import */ var _queryUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/loki/queryUtils.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/loki/types.ts\");\n\n\n\n\n\n\n\n\n\nconst onDashboardLoadedHandler = ({\n  payload: { dashboardId, orgId, grafanaVersion, queries }\n}) => {\n  try {\n    const lokiQueries = queries[_plugin_json__WEBPACK_IMPORTED_MODULE_3__.id].filter((query) => !query.hide).map((query) => (0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.getNormalizedLokiQuery)(query));\n    if (!lokiQueries?.length) {\n      return;\n    }\n    const logsQueries = lokiQueries.filter((query) => (0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.isLogsQuery)(query.expr));\n    const metricQueries = lokiQueries.filter((query) => !(0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.isLogsQuery)(query.expr));\n    const instantQueries = lokiQueries.filter((query) => query.queryType === _types__WEBPACK_IMPORTED_MODULE_5__.LokiQueryType.Instant);\n    const rangeQueries = lokiQueries.filter((query) => query.queryType === _types__WEBPACK_IMPORTED_MODULE_5__.LokiQueryType.Range);\n    const builderModeQueries = lokiQueries.filter((query) => query.editorMode === _prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_1__.QueryEditorMode.Builder);\n    const codeModeQueries = lokiQueries.filter((query) => query.editorMode === _prometheus_querybuilder_shared_types__WEBPACK_IMPORTED_MODULE_1__.QueryEditorMode.Code);\n    const queriesWithTemplateVariables = lokiQueries.filter(isQueryWithTemplateVariables);\n    const queriesWithChangedResolution = lokiQueries.filter(isQueryWithChangedResolution);\n    const queriesWithChangedLineLimit = lokiQueries.filter(isQueryWithChangedLineLimit);\n    const queriesWithChangedLegend = lokiQueries.filter(isQueryWithChangedLegend);\n    const event = {\n      grafana_version: grafanaVersion,\n      dashboard_id: dashboardId,\n      org_id: orgId,\n      queries_count: lokiQueries.length,\n      logs_queries_count: logsQueries.length,\n      metric_queries_count: metricQueries.length,\n      instant_queries_count: instantQueries.length,\n      range_queries_count: rangeQueries.length,\n      builder_mode_queries_count: builderModeQueries.length,\n      code_mode_queries_count: codeModeQueries.length,\n      queries_with_template_variables_count: queriesWithTemplateVariables.length,\n      queries_with_changed_resolution_count: queriesWithChangedResolution.length,\n      queries_with_changed_line_limit_count: queriesWithChangedLineLimit.length,\n      queries_with_changed_legend_count: queriesWithChangedLegend.length\n    };\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_6__.reportInteraction)(\"grafana_loki_dashboard_loaded\", event);\n  } catch (error) {\n    console.error(\"error in loki tracking handler\", error);\n  }\n};\nconst isQueryWithTemplateVariables = (query) => {\n  return app_features_variables_utils__WEBPACK_IMPORTED_MODULE_0__.variableRegex.test(query.expr);\n};\nconst isQueryWithChangedResolution = (query) => {\n  if (!query.resolution) {\n    return false;\n  }\n  return query.resolution !== 1;\n};\nconst isQueryWithChangedLineLimit = (query) => {\n  return query.maxLines !== null && query.maxLines !== void 0;\n};\nconst isQueryWithChangedLegend = (query) => {\n  if (!query.legendFormat) {\n    return false;\n  }\n  return query.legendFormat !== \"\";\n};\nconst shouldNotReportBasedOnRefId = (refId) => {\n  const starters = [_datasource__WEBPACK_IMPORTED_MODULE_2__.REF_ID_STARTER_ANNOTATION, _datasource__WEBPACK_IMPORTED_MODULE_2__.REF_ID_STARTER_LOG_ROW_CONTEXT, _datasource__WEBPACK_IMPORTED_MODULE_2__.REF_ID_STARTER_LOG_VOLUME];\n  if (refId === _datasource__WEBPACK_IMPORTED_MODULE_2__.REF_ID_DATA_SAMPLES || starters.some((starter) => refId.startsWith(starter))) {\n    return true;\n  }\n  return false;\n};\nconst calculateTotalBytes = (response) => {\n  let totalBytes = 0;\n  for (const frame of response.data) {\n    const byteKey = frame.meta?.custom?.lokiQueryStatKey;\n    if (byteKey) {\n      totalBytes += frame.meta?.stats?.find((stat) => stat.displayName === byteKey)?.value ?? 0;\n    }\n  }\n  return totalBytes;\n};\nfunction trackQuery(response, request, startTime, trackingSettings = {}, extraPayload = {}) {\n  const { app, targets: queries } = request;\n  if (app === _grafana_data__WEBPACK_IMPORTED_MODULE_7__.CoreApp.Dashboard || app === _grafana_data__WEBPACK_IMPORTED_MODULE_7__.CoreApp.PanelViewer) {\n    return;\n  }\n  let totalBytes = calculateTotalBytes(response);\n  for (const query of queries) {\n    if (shouldNotReportBasedOnRefId(query.refId)) {\n      return;\n    }\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_6__.reportInteraction)(\"grafana_loki_query_executed\", {\n      app,\n      grafana_version: _grafana_runtime__WEBPACK_IMPORTED_MODULE_8__.config.buildInfo.version,\n      editor_mode: query.editorMode,\n      has_data: response.data.some((frame) => frame.length > 0),\n      has_error: response.error !== void 0,\n      legend: query.legendFormat,\n      line_limit: query.maxLines,\n      parsed_query: (0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.parseToNodeNamesArray)(query.expr).join(\",\"),\n      obfuscated_query: (0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.obfuscate)(query.expr),\n      query_type: (0,_queryUtils__WEBPACK_IMPORTED_MODULE_4__.isLogsQuery)(query.expr) ? \"logs\" : \"metric\",\n      query_vector_type: query.queryType,\n      resolution: query.resolution,\n      simultaneously_executed_query_count: queries.filter((query2) => !query2.hide).length,\n      simultaneously_hidden_query_count: queries.filter((query2) => query2.hide).length,\n      time_range_from: request?.range?.from?.toISOString(),\n      time_range_to: request?.range?.to?.toISOString(),\n      time_taken: Date.now() - startTime.getTime(),\n      bytes_processed: totalBytes,\n      is_split: false,\n      predefined_operations_applied: trackingSettings.predefinedOperations ? query.expr.includes(trackingSettings.predefinedOperations) : \"n/a\",\n      ...extraPayload\n    });\n  }\n}\nfunction trackGroupedQueries(response, groupedRequests, originalRequest, startTime, trackingSettings = {}) {\n  const splittingPayload = {\n    split_query_group_count: groupedRequests.length,\n    split_query_largest_partition_size: Math.max(...groupedRequests.map(({ partition }) => partition.length)),\n    split_query_total_request_count: groupedRequests.reduce((total, { partition }) => total + partition.length, 0),\n    is_split: true,\n    simultaneously_executed_query_count: originalRequest.targets.filter((query) => !query.hide).length,\n    simultaneously_hidden_query_count: originalRequest.targets.filter((query) => query.hide).length\n  };\n  for (const group of groupedRequests) {\n    const split_query_partition_size = group.partition.length;\n    trackQuery(response, group.request, startTime, trackingSettings, {\n      ...splittingPayload,\n      split_query_partition_size\n    });\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3RyYWNraW5nLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUY7QUFDekM7QUFDWjtBQUVFO0FBT3pCO0FBQ2dCO0FBQytEO0FBQ3pCO0FBNkN0RCxNQUFNLDJCQUEyQixDQUFDO0FBQUEsRUFDdkMsU0FBUyxFQUFFLGFBQWEsT0FBTyxnQkFBZ0IsUUFBUTtBQUN6RCxNQUF1QztBQUNyQyxNQUFJO0FBRUYsVUFBTSxjQUFjLFFBQVEsNENBQWEsRUFDdEMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLElBQUksRUFDN0IsSUFBSSxDQUFDLFVBQVUsbUVBQXNCLENBQUMsS0FBSyxDQUFDO0FBRS9DLFFBQUksQ0FBQyxhQUFhLFFBQVE7QUFDeEI7QUFBQSxJQUNGO0FBRUEsVUFBTSxjQUFjLFlBQVksT0FBTyxDQUFDLFVBQVUsd0RBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQztBQUN6RSxVQUFNLGdCQUFnQixZQUFZLE9BQU8sQ0FBQyxVQUFVLENBQUMsd0RBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQztBQUM1RSxVQUFNLGlCQUFpQixZQUFZLE9BQU8sQ0FBQyxVQUFVLE1BQU0sY0FBYyxpREFBYSxDQUFDLE9BQU87QUFDOUYsVUFBTSxlQUFlLFlBQVksT0FBTyxDQUFDLFVBQVUsTUFBTSxjQUFjLGlEQUFhLENBQUMsS0FBSztBQUMxRixVQUFNLHFCQUFxQixZQUFZLE9BQU8sQ0FBQyxVQUFVLE1BQU0sZUFBZSxrRkFBZSxDQUFDLE9BQU87QUFDckcsVUFBTSxrQkFBa0IsWUFBWSxPQUFPLENBQUMsVUFBVSxNQUFNLGVBQWUsa0ZBQWUsQ0FBQyxJQUFJO0FBQy9GLFVBQU0sK0JBQStCLFlBQVksT0FBTyw0QkFBNEI7QUFDcEYsVUFBTSwrQkFBK0IsWUFBWSxPQUFPLDRCQUE0QjtBQUNwRixVQUFNLDhCQUE4QixZQUFZLE9BQU8sMkJBQTJCO0FBQ2xGLFVBQU0sMkJBQTJCLFlBQVksT0FBTyx3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TUFBTSxTQUFTLFdBQVcsa0JBQWtCO0FBQUEsTUFDL0QsR0FBRztBQUFBLE1BQ0g7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS90cmFja2luZy50cz8zMTY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvcmVBcHAsIERhc2hib2FyZExvYWRlZEV2ZW50LCBEYXRhUXVlcnlSZXF1ZXN0LCBEYXRhUXVlcnlSZXNwb25zZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgcmVwb3J0SW50ZXJhY3Rpb24sIGNvbmZpZyB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHsgdmFyaWFibGVSZWdleCB9IGZyb20gJ2FwcC9mZWF0dXJlcy92YXJpYWJsZXMvdXRpbHMnO1xuXG5pbXBvcnQgeyBRdWVyeUVkaXRvck1vZGUgfSBmcm9tICcuLi9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvdHlwZXMnO1xuXG5pbXBvcnQge1xuICBSRUZfSURfU1RBUlRFUl9BTk5PVEFUSU9OLFxuICBSRUZfSURfREFUQV9TQU1QTEVTLFxuICBSRUZfSURfU1RBUlRFUl9MT0dfUk9XX0NPTlRFWFQsXG4gIFJFRl9JRF9TVEFSVEVSX0xPR19WT0xVTUUsXG59IGZyb20gJy4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgcGx1Z2luSnNvbiBmcm9tICcuL3BsdWdpbi5qc29uJztcbmltcG9ydCB7IGdldE5vcm1hbGl6ZWRMb2tpUXVlcnksIGlzTG9nc1F1ZXJ5LCBvYmZ1c2NhdGUsIHBhcnNlVG9Ob2RlTmFtZXNBcnJheSB9IGZyb20gJy4vcXVlcnlVdGlscyc7XG5pbXBvcnQgeyBMb2tpR3JvdXBlZFJlcXVlc3QsIExva2lRdWVyeSwgTG9raVF1ZXJ5VHlwZSB9IGZyb20gJy4vdHlwZXMnO1xuXG50eXBlIExva2lPbkRhc2hib2FyZExvYWRlZFRyYWNraW5nRXZlbnQgPSB7XG4gIGdyYWZhbmFfdmVyc2lvbj86IHN0cmluZztcbiAgZGFzaGJvYXJkX2lkPzogc3RyaW5nO1xuICBvcmdfaWQ/OiBudW1iZXI7XG5cbiAgLyogVGhlIG51bWJlciBvZiBMb2tpIHF1ZXJpZXMgcHJlc2VudCBpbiB0aGUgZGFzaGJvYXJkKi9cbiAgcXVlcmllc19jb3VudDogbnVtYmVyO1xuXG4gIC8qIFRoZSBudW1iZXIgb2YgTG9raSBsb2dzIHF1ZXJpZXMgcHJlc2VudCBpbiB0aGUgZGFzaGJvYXJkKi9cbiAgbG9nc19xdWVyaWVzX2NvdW50OiBudW1iZXI7XG5cbiAgLyogVGhlIG51bWJlciBvZiBMb2tpIG1ldHJpYyBxdWVyaWVzIHByZXNlbnQgaW4gdGhlIGRhc2hib2FyZCovXG4gIG1ldHJpY19xdWVyaWVzX2NvdW50OiBudW1iZXI7XG5cbiAgLyogVGhlIG51bWJlciBvZiBMb2tpIGluc3RhbnQgcXVlcmllcyBwcmVzZW50IGluIHRoZSBkYXNoYm9hcmQqL1xuICBpbnN0YW50X3F1ZXJpZXNfY291bnQ6IG51bWJlcjtcblxuICAvKiBUaGUgbnVtYmVyIG9mIExva2kgcmFuZ2UgcXVlcmllcyBwcmVzZW50IGluIHRoZSBkYXNoYm9hcmQqL1xuICByYW5nZV9xdWVyaWVzX2NvdW50OiBudW1iZXI7XG5cbiAgLyogVGhlIG51bWJlciBvZiBMb2tpIHF1ZXJpZXMgY3JlYXRlZCBpbiBidWlsZGVyIG1vZGUgcHJlc2VudCBpbiB0aGUgZGFzaGJvYXJkKi9cbiAgYnVpbGRlcl9tb2RlX3F1ZXJpZXNfY291bnQ6IG51bWJlcjtcblxuICAvKiBUaGUgbnVtYmVyIG9mIExva2kgcXVlcmllcyBjcmVhdGVkIGluIGNvZGUgbW9kZSBwcmVzZW50IGluIHRoZSBkYXNoYm9hcmQqL1xuICBjb2RlX21vZGVfcXVlcmllc19jb3VudDogbnVtYmVyO1xuXG4gIC8qIFRoZSBudW1iZXIgb2YgTG9raSBxdWVyaWVzIHdpdGggdXNlZCB0ZW1wbGF0ZSB2YXJpYWJsZXMgcHJlc2VudCBpbiB0aGUgZGFzaGJvYXJkKi9cbiAgcXVlcmllc193aXRoX3RlbXBsYXRlX3ZhcmlhYmxlc19jb3VudDogbnVtYmVyO1xuXG4gIC8qIFRoZSBudW1iZXIgb2YgTG9raSBxdWVyaWVzIHdpdGggY2hhbmdlZCByZXNvbHV0aW9uIHByZXNlbnQgaW4gdGhlIGRhc2hib2FyZCovXG4gIHF1ZXJpZXNfd2l0aF9jaGFuZ2VkX3Jlc29sdXRpb25fY291bnQ6IG51bWJlcjtcblxuICAvKiBUaGUgbnVtYmVyIG9mIExva2kgcXVlcmllcyB3aXRoIGNoYW5nZWQgbGluZSBsaW1pdCBwcmVzZW50IGluIHRoZSBkYXNoYm9hcmQqL1xuICBxdWVyaWVzX3dpdGhfY2hhbmdlZF9saW5lX2xpbWl0X2NvdW50OiBudW1iZXI7XG5cbiAgLyogVGhlIG51bWJlciBvZiBMb2tpIHF1ZXJpZXMgd2l0aCBjaGFuZ2VkIGxlZ2VuZCBwcmVzZW50IGluIHRoZSBkYXNoYm9hcmQqL1xuICBxdWVyaWVzX3dpdGhfY2hhbmdlZF9sZWdlbmRfY291bnQ6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIExva2lUcmFja2luZ1NldHRpbmdzID0ge1xuICBwcmVkZWZpbmVkT3BlcmF0aW9ucz86IHN0cmluZztcbn07XG5cbmV4cG9ydCBjb25zdCBvbkRhc2hib2FyZExvYWRlZEhhbmRsZXIgPSAoe1xuICBwYXlsb2FkOiB7IGRhc2hib2FyZElkLCBvcmdJZCwgZ3JhZmFuYVZlcnNpb24sIHF1ZXJpZXMgfSxcbn06IERhc2hib2FyZExvYWRlZEV2ZW50PExva2lRdWVyeT4pID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdHJhY2sgdmlzaWJsZSBMb2tpIHF1ZXJpZXNcbiAgICBjb25zdCBsb2tpUXVlcmllcyA9IHF1ZXJpZXNbcGx1Z2luSnNvbi5pZF1cbiAgICAgIC5maWx0ZXIoKHF1ZXJ5KSA9PiAhcXVlcnkuaGlkZSlcbiAgICAgIC5tYXAoKHF1ZXJ5KSA9PiBnZXROb3JtYWxpemVkTG9raVF1ZXJ5KHF1ZXJ5KSk7XG5cbiAgICBpZiAoIWxva2lRdWVyaWVzPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBsb2dzUXVlcmllcyA9IGxva2lRdWVyaWVzLmZpbHRlcigocXVlcnkpID0+IGlzTG9nc1F1ZXJ5KHF1ZXJ5LmV4cHIpKTtcbiAgICBjb25zdCBtZXRyaWNRdWVyaWVzID0gbG9raVF1ZXJpZXMuZmlsdGVyKChxdWVyeSkgPT4gIWlzTG9nc1F1ZXJ5KHF1ZXJ5LmV4cHIpKTtcbiAgICBjb25zdCBpbnN0YW50UXVlcmllcyA9IGxva2lRdWVyaWVzLmZpbHRlcigocXVlcnkpID0+IHF1ZXJ5LnF1ZXJ5VHlwZSA9PT0gTG9raVF1ZXJ5VHlwZS5JbnN0YW50KTtcbiAgICBjb25zdCByYW5nZVF1ZXJpZXMgPSBsb2tpUXVlcmllcy5maWx0ZXIoKHF1ZXJ5KSA9PiBxdWVyeS5xdWVyeVR5cGUgPT09IExva2lRdWVyeVR5cGUuUmFuZ2UpO1xuICAgIGNvbnN0IGJ1aWxkZXJNb2RlUXVlcmllcyA9IGxva2lRdWVyaWVzLmZpbHRlcigocXVlcnkpID0+IHF1ZXJ5LmVkaXRvck1vZGUgPT09IFF1ZXJ5RWRpdG9yTW9kZS5CdWlsZGVyKTtcbiAgICBjb25zdCBjb2RlTW9kZVF1ZXJpZXMgPSBsb2tpUXVlcmllcy5maWx0ZXIoKHF1ZXJ5KSA9PiBxdWVyeS5lZGl0b3JNb2RlID09PSBRdWVyeUVkaXRvck1vZGUuQ29kZSk7XG4gICAgY29uc3QgcXVlcmllc1dpdGhUZW1wbGF0ZVZhcmlhYmxlcyA9IGxva2lRdWVyaWVzLmZpbHRlcihpc1F1ZXJ5V2l0aFRlbXBsYXRlVmFyaWFibGVzKTtcbiAgICBjb25zdCBxdWVyaWVzV2l0aENoYW5nZWRSZXNvbHV0aW9uID0gbG9raVF1ZXJpZXMuZmlsdGVyKGlzUXVlcnlXaXRoQ2hhbmdlZFJlc29sdXRpb24pO1xuICAgIGNvbnN0IHF1ZXJpZXNXaXRoQ2hhbmdlZExpbmVMaW1pdCA9IGxva2lRdWVyaWVzLmZpbHRlcihpc1F1ZXJ5V2l0aENoYW5nZWRMaW5lTGltaXQpO1xuICAgIGNvbnN0IHF1ZXJpZXNXaXRoQ2hhbmdlZExlZ2VuZCA9IGxva2lRdWVyaWVzLmZpbHRlcihpc1F1ZXJ5V2l0aENoYW5nZWRMZWdlbmQpO1xuXG4gICAgY29uc3QgZXZlbnQ6IExva2lPbkRhc2hib2FyZExvYWRlZFRyYWNraW5nRXZlbnQgPSB7XG4gICAgICBncmFmYW5hX3ZlcnNpb246IGdyYWZhbmFWZXJzaW9uLFxuICAgICAgZGFzaGJvYXJkX2lkOiBkYXNoYm9hcmRJZCxcbiAgICAgIG9yZ19pZDogb3JnSWQsXG4gICAgICBxdWVyaWVzX2NvdW50OiBsb2tpUXVlcmllcy5sZW5ndGgsXG4gICAgICBsb2dzX3F1ZXJpZXNfY291bnQ6IGxvZ3NRdWVyaWVzLmxlbmd0aCxcbiAgICAgIG1ldHJpY19xdWVyaWVzX2NvdW50OiBtZXRyaWNRdWVyaWVzLmxlbmd0aCxcbiAgICAgIGluc3RhbnRfcXVlcmllc19jb3VudDogaW5zdGFudFF1ZXJpZXMubGVuZ3RoLFxuICAgICAgcmFuZ2VfcXVlcmllc19jb3VudDogcmFuZ2VRdWVyaWVzLmxlbmd0aCxcbiAgICAgIGJ1aWxkZXJfbW9kZV9xdWVyaWVzX2NvdW50OiBidWlsZGVyTW9kZVF1ZXJpZXMubGVuZ3RoLFxuICAgICAgY29kZV9tb2RlX3F1ZXJpZXNfY291bnQ6IGNvZGVNb2RlUXVlcmllcy5sZW5ndGgsXG4gICAgICBxdWVyaWVzX3dpdGhfdGVtcGxhdGVfdmFyaWFibGVzX2NvdW50OiBxdWVyaWVzV2l0aFRlbXBsYXRlVmFyaWFibGVzLmxlbmd0aCxcbiAgICAgIHF1ZXJpZXNfd2l0aF9jaGFuZ2VkX3Jlc29sdXRpb25fY291bnQ6IHF1ZXJpZXNXaXRoQ2hhbmdlZFJlc29sdXRpb24ubGVuZ3RoLFxuICAgICAgcXVlcmllc193aXRoX2NoYW5nZWRfbGluZV9saW1pdF9jb3VudDogcXVlcmllc1dpdGhDaGFuZ2VkTGluZUxpbWl0Lmxlbmd0aCxcbiAgICAgIHF1ZXJpZXNfd2l0aF9jaGFuZ2VkX2xlZ2VuZF9jb3VudDogcXVlcmllc1dpdGhDaGFuZ2VkTGVnZW5kLmxlbmd0aCxcbiAgICB9O1xuXG4gICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfbG9raV9kYXNoYm9hcmRfbG9hZGVkJywgZXZlbnQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGluIGxva2kgdHJhY2tpbmcgaGFuZGxlcicsIGVycm9yKTtcbiAgfVxufTtcblxuY29uc3QgaXNRdWVyeVdpdGhUZW1wbGF0ZVZhcmlhYmxlcyA9IChxdWVyeTogTG9raVF1ZXJ5KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiB2YXJpYWJsZVJlZ2V4LnRlc3QocXVlcnkuZXhwcik7XG59O1xuXG5jb25zdCBpc1F1ZXJ5V2l0aENoYW5nZWRSZXNvbHV0aW9uID0gKHF1ZXJ5OiBMb2tpUXVlcnkpOiBib29sZWFuID0+IHtcbiAgaWYgKCFxdWVyeS5yZXNvbHV0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIDEgaXMgdGhlIGRlZmF1bHQgcmVzb2x1dGlvblxuICByZXR1cm4gcXVlcnkucmVzb2x1dGlvbiAhPT0gMTtcbn07XG5cbmNvbnN0IGlzUXVlcnlXaXRoQ2hhbmdlZExpbmVMaW1pdCA9IChxdWVyeTogTG9raVF1ZXJ5KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBxdWVyeS5tYXhMaW5lcyAhPT0gbnVsbCAmJiBxdWVyeS5tYXhMaW5lcyAhPT0gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaXNRdWVyeVdpdGhDaGFuZ2VkTGVnZW5kID0gKHF1ZXJ5OiBMb2tpUXVlcnkpOiBib29sZWFuID0+IHtcbiAgaWYgKCFxdWVyeS5sZWdlbmRGb3JtYXQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHF1ZXJ5LmxlZ2VuZEZvcm1hdCAhPT0gJyc7XG59O1xuXG5jb25zdCBzaG91bGROb3RSZXBvcnRCYXNlZE9uUmVmSWQgPSAocmVmSWQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBzdGFydGVycyA9IFtSRUZfSURfU1RBUlRFUl9BTk5PVEFUSU9OLCBSRUZfSURfU1RBUlRFUl9MT0dfUk9XX0NPTlRFWFQsIFJFRl9JRF9TVEFSVEVSX0xPR19WT0xVTUVdO1xuXG4gIGlmIChyZWZJZCA9PT0gUkVGX0lEX0RBVEFfU0FNUExFUyB8fCBzdGFydGVycy5zb21lKChzdGFydGVyKSA9PiByZWZJZC5zdGFydHNXaXRoKHN0YXJ0ZXIpKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGNhbGN1bGF0ZVRvdGFsQnl0ZXMgPSAocmVzcG9uc2U6IERhdGFRdWVyeVJlc3BvbnNlKTogbnVtYmVyID0+IHtcbiAgbGV0IHRvdGFsQnl0ZXMgPSAwO1xuICBmb3IgKGNvbnN0IGZyYW1lIG9mIHJlc3BvbnNlLmRhdGEpIHtcbiAgICBjb25zdCBieXRlS2V5ID0gZnJhbWUubWV0YT8uY3VzdG9tPy5sb2tpUXVlcnlTdGF0S2V5O1xuICAgIGlmIChieXRlS2V5KSB7XG4gICAgICB0b3RhbEJ5dGVzICs9XG4gICAgICAgIGZyYW1lLm1ldGE/LnN0YXRzPy5maW5kKChzdGF0OiB7IGRpc3BsYXlOYW1lOiBzdHJpbmcgfSkgPT4gc3RhdC5kaXNwbGF5TmFtZSA9PT0gYnl0ZUtleSk/LnZhbHVlID8/IDA7XG4gICAgfVxuICB9XG4gIHJldHVybiB0b3RhbEJ5dGVzO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRyYWNrUXVlcnkoXG4gIHJlc3BvbnNlOiBEYXRhUXVlcnlSZXNwb25zZSxcbiAgcmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxMb2tpUXVlcnk+LFxuICBzdGFydFRpbWU6IERhdGUsXG4gIHRyYWNraW5nU2V0dGluZ3M6IExva2lUcmFja2luZ1NldHRpbmdzID0ge30sXG4gIGV4dHJhUGF5bG9hZDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuKTogdm9pZCB7XG4gIC8vIFdlIG9ubHkgd2FudCB0byB0cmFjayB1c2FnZSBmb3IgdGhlc2Ugc3BlY2lmaWMgYXBwc1xuICBjb25zdCB7IGFwcCwgdGFyZ2V0czogcXVlcmllcyB9ID0gcmVxdWVzdDtcblxuICBpZiAoYXBwID09PSBDb3JlQXBwLkRhc2hib2FyZCB8fCBhcHAgPT09IENvcmVBcHAuUGFuZWxWaWV3ZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgdG90YWxCeXRlcyA9IGNhbGN1bGF0ZVRvdGFsQnl0ZXMocmVzcG9uc2UpO1xuXG4gIGZvciAoY29uc3QgcXVlcnkgb2YgcXVlcmllcykge1xuICAgIGlmIChzaG91bGROb3RSZXBvcnRCYXNlZE9uUmVmSWQocXVlcnkucmVmSWQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmVwb3J0SW50ZXJhY3Rpb24oJ2dyYWZhbmFfbG9raV9xdWVyeV9leGVjdXRlZCcsIHtcbiAgICAgIGFwcCxcbiAgICAgIGdyYWZhbmFfdmVyc2lvbjogY29uZmlnLmJ1aWxkSW5mby52ZXJzaW9uLFxuICAgICAgZWRpdG9yX21vZGU6IHF1ZXJ5LmVkaXRvck1vZGUsXG4gICAgICBoYXNfZGF0YTogcmVzcG9uc2UuZGF0YS5zb21lKChmcmFtZSkgPT4gZnJhbWUubGVuZ3RoID4gMCksXG4gICAgICBoYXNfZXJyb3I6IHJlc3BvbnNlLmVycm9yICE9PSB1bmRlZmluZWQsXG4gICAgICBsZWdlbmQ6IHF1ZXJ5LmxlZ2VuZEZvcm1hdCxcbiAgICAgIGxpbmVfbGltaXQ6IHF1ZXJ5Lm1heExpbmVzLFxuICAgICAgcGFyc2VkX3F1ZXJ5OiBwYXJzZVRvTm9kZU5hbWVzQXJyYXkocXVlcnkuZXhwcikuam9pbignLCcpLFxuICAgICAgb2JmdXNjYXRlZF9xdWVyeTogb2JmdXNjYXRlKHF1ZXJ5LmV4cHIpLFxuICAgICAgcXVlcnlfdHlwZTogaXNMb2dzUXVlcnkocXVlcnkuZXhwcikgPyAnbG9ncycgOiAnbWV0cmljJyxcbiAgICAgIHF1ZXJ5X3ZlY3Rvcl90eXBlOiBxdWVyeS5xdWVyeVR5cGUsXG4gICAgICByZXNvbHV0aW9uOiBxdWVyeS5yZXNvbHV0aW9uLFxuICAgICAgc2ltdWx0YW5lb3VzbHlfZXhlY3V0ZWRfcXVlcnlfY291bnQ6IHF1ZXJpZXMuZmlsdGVyKChxdWVyeSkgPT4gIXF1ZXJ5LmhpZGUpLmxlbmd0aCxcbiAgICAgIHNpbXVsdGFuZW91c2x5X2hpZGRlbl9xdWVyeV9jb3VudDogcXVlcmllcy5maWx0ZXIoKHF1ZXJ5KSA9PiBxdWVyeS5oaWRlKS5sZW5ndGgsXG4gICAgICB0aW1lX3JhbmdlX2Zyb206IHJlcXVlc3Q/LnJhbmdlPy5mcm9tPy50b0lTT1N0cmluZygpLFxuICAgICAgdGltZV9yYW5nZV90bzogcmVxdWVzdD8ucmFuZ2U/LnRvPy50b0lTT1N0cmluZygpLFxuICAgICAgdGltZV90YWtlbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCksXG4gICAgICBieXRlc19wcm9jZXNzZWQ6IHRvdGFsQnl0ZXMsXG4gICAgICBpc19zcGxpdDogZmFsc2UsXG4gICAgICBwcmVkZWZpbmVkX29wZXJhdGlvbnNfYXBwbGllZDogdHJhY2tpbmdTZXR0aW5ncy5wcmVkZWZpbmVkT3BlcmF0aW9uc1xuICAgICAgICA/IHF1ZXJ5LmV4cHIuaW5jbHVkZXModHJhY2tpbmdTZXR0aW5ncy5wcmVkZWZpbmVkT3BlcmF0aW9ucylcbiAgICAgICAgOiAnbi9hJyxcbiAgICAgIC4uLmV4dHJhUGF5bG9hZCxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhY2tHcm91cGVkUXVlcmllcyhcbiAgcmVzcG9uc2U6IERhdGFRdWVyeVJlc3BvbnNlLFxuICBncm91cGVkUmVxdWVzdHM6IExva2lHcm91cGVkUmVxdWVzdFtdLFxuICBvcmlnaW5hbFJlcXVlc3Q6IERhdGFRdWVyeVJlcXVlc3Q8TG9raVF1ZXJ5PixcbiAgc3RhcnRUaW1lOiBEYXRlLFxuICB0cmFja2luZ1NldHRpbmdzOiBMb2tpVHJhY2tpbmdTZXR0aW5ncyA9IHt9XG4pOiB2b2lkIHtcbiAgY29uc3Qgc3BsaXR0aW5nUGF5bG9hZCA9IHtcbiAgICBzcGxpdF9xdWVyeV9ncm91cF9jb3VudDogZ3JvdXBlZFJlcXVlc3RzLmxlbmd0aCxcbiAgICBzcGxpdF9xdWVyeV9sYXJnZXN0X3BhcnRpdGlvbl9zaXplOiBNYXRoLm1heCguLi5ncm91cGVkUmVxdWVzdHMubWFwKCh7IHBhcnRpdGlvbiB9KSA9PiBwYXJ0aXRpb24ubGVuZ3RoKSksXG4gICAgc3BsaXRfcXVlcnlfdG90YWxfcmVxdWVzdF9jb3VudDogZ3JvdXBlZFJlcXVlc3RzLnJlZHVjZSgodG90YWwsIHsgcGFydGl0aW9uIH0pID0+IHRvdGFsICsgcGFydGl0aW9uLmxlbmd0aCwgMCksXG4gICAgaXNfc3BsaXQ6IHRydWUsXG4gICAgc2ltdWx0YW5lb3VzbHlfZXhlY3V0ZWRfcXVlcnlfY291bnQ6IG9yaWdpbmFsUmVxdWVzdC50YXJnZXRzLmZpbHRlcigocXVlcnkpID0+ICFxdWVyeS5oaWRlKS5sZW5ndGgsXG4gICAgc2ltdWx0YW5lb3VzbHlfaGlkZGVuX3F1ZXJ5X2NvdW50OiBvcmlnaW5hbFJlcXVlc3QudGFyZ2V0cy5maWx0ZXIoKHF1ZXJ5KSA9PiBxdWVyeS5oaWRlKS5sZW5ndGgsXG4gIH07XG5cbiAgZm9yIChjb25zdCBncm91cCBvZiBncm91cGVkUmVxdWVzdHMpIHtcbiAgICBjb25zdCBzcGxpdF9xdWVyeV9wYXJ0aXRpb25fc2l6ZSA9IGdyb3VwLnBhcnRpdGlvbi5sZW5ndGg7XG4gICAgdHJhY2tRdWVyeShyZXNwb25zZSwgZ3JvdXAucmVxdWVzdCwgc3RhcnRUaW1lLCB0cmFja2luZ1NldHRpbmdzLCB7XG4gICAgICAuLi5zcGxpdHRpbmdQYXlsb2FkLFxuICAgICAgc3BsaXRfcXVlcnlfcGFydGl0aW9uX3NpemUsXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJxdWVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/tracking.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/types.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiQueryDirection: () => (/* reexport safe */ _dataquery_gen__WEBPACK_IMPORTED_MODULE_0__.LokiQueryDirection),\n/* harmony export */   LokiQueryType: () => (/* reexport safe */ _dataquery_gen__WEBPACK_IMPORTED_MODULE_0__.LokiQueryType),\n/* harmony export */   LokiResultType: () => (/* binding */ LokiResultType),\n/* harmony export */   LokiVariableQueryType: () => (/* binding */ LokiVariableQueryType),\n/* harmony export */   SupportingQueryType: () => (/* reexport safe */ _dataquery_gen__WEBPACK_IMPORTED_MODULE_0__.SupportingQueryType)\n/* harmony export */ });\n/* harmony import */ var _dataquery_gen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/loki/dataquery.gen.ts\");\n\n\n\nvar LokiResultType = /* @__PURE__ */ ((LokiResultType2) => {\n  LokiResultType2[\"Stream\"] = \"streams\";\n  LokiResultType2[\"Vector\"] = \"vector\";\n  LokiResultType2[\"Matrix\"] = \"matrix\";\n  return LokiResultType2;\n})(LokiResultType || {});\nvar LokiVariableQueryType = /* @__PURE__ */ ((LokiVariableQueryType2) => {\n  LokiVariableQueryType2[LokiVariableQueryType2[\"LabelNames\"] = 0] = \"LabelNames\";\n  LokiVariableQueryType2[LokiVariableQueryType2[\"LabelValues\"] = 1] = \"LabelValues\";\n  return LokiVariableQueryType2;\n})(LokiVariableQueryType || {});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3R5cGVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFFb0c7QUFFbEM7QUFrQjNELElBQUssaUJBQUwsa0JBQUtBLG9CQUFMO0FBQ0wsRUFBQUEsZ0JBQUEsWUFBUztBQUNULEVBQUFBLGdCQUFBLFlBQVM7QUFDVCxFQUFBQSxnQkFBQSxZQUFTO0FBSEMsU0FBQUE7QUFBQTtBQW9ITCxJQUFLLHdCQUFMLGtCQUFLQywyQkFBTDtBQUNMLEVBQUFBLDhDQUFBO0FBQ0EsRUFBQUEsOENBQUE7QUFGVSxTQUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvdHlwZXMudHM/Y2I0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhUXVlcnksIERhdGFRdWVyeVJlcXVlc3QsIERhdGFTb3VyY2VKc29uRGF0YSwgUXVlcnlSZXN1bHRNZXRhLCBTY29wZWRWYXJzLCBUaW1lUmFuZ2UgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxuaW1wb3J0IHsgTG9raSBhcyBMb2tpUXVlcnlGcm9tU2NoZW1hLCBMb2tpUXVlcnlUeXBlLCBTdXBwb3J0aW5nUXVlcnlUeXBlLCBMb2tpUXVlcnlEaXJlY3Rpb24gfSBmcm9tICcuL2RhdGFxdWVyeS5nZW4nO1xuXG5leHBvcnQgeyBMb2tpUXVlcnlEaXJlY3Rpb24sIExva2lRdWVyeVR5cGUsIFN1cHBvcnRpbmdRdWVyeVR5cGUgfTtcblxuZXhwb3J0IGludGVyZmFjZSBMb2tpSW5zdGFudFF1ZXJ5UmVxdWVzdCB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIGxpbWl0PzogbnVtYmVyO1xuICB0aW1lPzogc3RyaW5nO1xuICBkaXJlY3Rpb24/OiBMb2tpUXVlcnlEaXJlY3Rpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9raVJhbmdlUXVlcnlSZXF1ZXN0IHtcbiAgcXVlcnk6IHN0cmluZztcbiAgbGltaXQ/OiBudW1iZXI7XG4gIHN0YXJ0PzogbnVtYmVyO1xuICBlbmQ/OiBudW1iZXI7XG4gIHN0ZXA/OiBudW1iZXI7XG4gIGRpcmVjdGlvbj86IExva2lRdWVyeURpcmVjdGlvbjtcbn1cblxuZXhwb3J0IGVudW0gTG9raVJlc3VsdFR5cGUge1xuICBTdHJlYW0gPSAnc3RyZWFtcycsXG4gIFZlY3RvciA9ICd2ZWN0b3InLFxuICBNYXRyaXggPSAnbWF0cml4Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2tpUXVlcnkgZXh0ZW5kcyBMb2tpUXVlcnlGcm9tU2NoZW1hIHtcbiAgZGlyZWN0aW9uPzogTG9raVF1ZXJ5RGlyZWN0aW9uO1xuICAvKiogVXNlZCBvbmx5IHRvIGlkZW50aWZ5IHN1cHBvcnRpbmcgcXVlcmllcywgZS5nLiBsb2dzIHZvbHVtZSwgbG9ncyBzYW1wbGUgYW5kIGRhdGEgc2FtcGxlICovXG4gIHN1cHBvcnRpbmdRdWVyeVR5cGU/OiBTdXBwb3J0aW5nUXVlcnlUeXBlO1xuICAvLyBDVUUgYXV0b2dlbmVyYXRlcyBgcXVlcnlUeXBlYCBhcyBgP3N0cmluZ2AsIGFzIHRoYXQncyBob3cgaXQgaXMgZGVmaW5lZFxuICAvLyBpbiB0aGUgcGFyZW50LWludGVyZmFjZSAoaW4gRGF0YVF1ZXJ5KS5cbiAgLy8gdGhlIHRlbXBvcmFyeSBmaXggKHVudGlsIHRoaXMgZ2V0cyBpbXByb3ZlZCBpbiB0aGUgY29kZWdlbiksIGlzIHRvXG4gIC8vIG92ZXJyaWRlIGl0IGhlcmVcbiAgcXVlcnlUeXBlPzogTG9raVF1ZXJ5VHlwZTtcblxuICAvKipcbiAgICogVGhpcyBpcyBhIHByb3BlcnR5IGZvciB0aGUgZXhwZXJpbWVudGFsIHF1ZXJ5IHNwbGl0dGluZyBmZWF0dXJlLlxuICAgKiBAZXhwZXJpbWVudGFsXG4gICAqL1xuICBzcGxpdER1cmF0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExva2lPcHRpb25zIGV4dGVuZHMgRGF0YVNvdXJjZUpzb25EYXRhIHtcbiAgbWF4TGluZXM/OiBzdHJpbmc7XG4gIGRlcml2ZWRGaWVsZHM/OiBEZXJpdmVkRmllbGRDb25maWdbXTtcbiAgYWxlcnRtYW5hZ2VyPzogc3RyaW5nO1xuICBrZWVwQ29va2llcz86IHN0cmluZ1tdO1xuICBwcmVkZWZpbmVkT3BlcmF0aW9ucz86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2tpU3RhdHMge1xuICBbY29tcG9uZW50OiBzdHJpbmddOiB7XG4gICAgW2xhYmVsOiBzdHJpbmddOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9raVZlY3RvclJlc3VsdCB7XG4gIG1ldHJpYzogeyBbbGFiZWw6IHN0cmluZ106IHN0cmluZyB9O1xuICB2YWx1ZTogW251bWJlciwgc3RyaW5nXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2tpVmVjdG9yUmVzcG9uc2Uge1xuICBzdGF0dXM6IHN0cmluZztcbiAgZGF0YToge1xuICAgIHJlc3VsdFR5cGU6IExva2lSZXN1bHRUeXBlLlZlY3RvcjtcbiAgICByZXN1bHQ6IExva2lWZWN0b3JSZXN1bHRbXTtcbiAgICBzdGF0cz86IExva2lTdGF0cztcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2tpTWF0cml4UmVzdWx0IHtcbiAgbWV0cmljOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICB2YWx1ZXM6IEFycmF5PFtudW1iZXIsIHN0cmluZ10+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExva2lNYXRyaXhSZXNwb25zZSB7XG4gIHN0YXR1czogc3RyaW5nO1xuICBkYXRhOiB7XG4gICAgcmVzdWx0VHlwZTogTG9raVJlc3VsdFR5cGUuTWF0cml4O1xuICAgIHJlc3VsdDogTG9raU1hdHJpeFJlc3VsdFtdO1xuICAgIHN0YXRzPzogTG9raVN0YXRzO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExva2lTdHJlYW1SZXN1bHQge1xuICBzdHJlYW06IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIHZhbHVlczogQXJyYXk8W3N0cmluZywgc3RyaW5nXT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9raVN0cmVhbVJlc3BvbnNlIHtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGRhdGE6IHtcbiAgICByZXN1bHRUeXBlOiBMb2tpUmVzdWx0VHlwZS5TdHJlYW07XG4gICAgcmVzdWx0OiBMb2tpU3RyZWFtUmVzdWx0W107XG4gICAgc3RhdHM/OiBMb2tpU3RhdHM7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9raVRhaWxSZXNwb25zZSB7XG4gIHN0cmVhbXM6IExva2lTdHJlYW1SZXN1bHRbXTtcbiAgZHJvcHBlZF9lbnRyaWVzPzogQXJyYXk8e1xuICAgIGxhYmVsczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgICB0aW1lc3RhbXA6IHN0cmluZztcbiAgfT4gfCBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBMb2tpUmVzdWx0ID0gTG9raVZlY3RvclJlc3VsdCB8IExva2lNYXRyaXhSZXN1bHQgfCBMb2tpU3RyZWFtUmVzdWx0O1xuZXhwb3J0IHR5cGUgTG9raVJlc3BvbnNlID0gTG9raVZlY3RvclJlc3BvbnNlIHwgTG9raU1hdHJpeFJlc3BvbnNlIHwgTG9raVN0cmVhbVJlc3BvbnNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIExva2lMb2dzU3RyZWFtRW50cnkge1xuICBsaW5lOiBzdHJpbmc7XG4gIHRzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9raUV4cHJlc3Npb24ge1xuICByZWdleHA6IHN0cmluZztcbiAgcXVlcnk6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgRGVyaXZlZEZpZWxkQ29uZmlnID0ge1xuICBtYXRjaGVyUmVnZXg6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB1cmw/OiBzdHJpbmc7XG4gIHVybERpc3BsYXlMYWJlbD86IHN0cmluZztcbiAgZGF0YXNvdXJjZVVpZD86IHN0cmluZztcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNmb3JtZXJPcHRpb25zIHtcbiAgbGVnZW5kRm9ybWF0Pzogc3RyaW5nO1xuICBxdWVyeTogc3RyaW5nO1xuICByZWZJZDogc3RyaW5nO1xuICBzY29wZWRWYXJzOiBTY29wZWRWYXJzO1xuICBtZXRhPzogUXVlcnlSZXN1bHRNZXRhO1xufVxuXG5leHBvcnQgZW51bSBMb2tpVmFyaWFibGVRdWVyeVR5cGUge1xuICBMYWJlbE5hbWVzLFxuICBMYWJlbFZhbHVlcyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2tpVmFyaWFibGVRdWVyeSBleHRlbmRzIERhdGFRdWVyeSB7XG4gIHR5cGU6IExva2lWYXJpYWJsZVF1ZXJ5VHlwZTtcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIHN0cmVhbT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVN0YXRzIHtcbiAgc3RyZWFtczogbnVtYmVyO1xuICBjaHVua3M6IG51bWJlcjtcbiAgYnl0ZXM6IG51bWJlcjtcbiAgZW50cmllczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRleHRGaWx0ZXIge1xuICBlbmFibGVkOiBib29sZWFuO1xuICBsYWJlbDogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xuICBmcm9tUGFyc2VyOiBib29sZWFuO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgTG9raUdyb3VwZWRSZXF1ZXN0ID0geyByZXF1ZXN0OiBEYXRhUXVlcnlSZXF1ZXN0PExva2lRdWVyeT47IHBhcnRpdGlvbjogVGltZVJhbmdlW10gfTtcbiJdLCJuYW1lcyI6WyJMb2tpUmVzdWx0VHlwZSIsIkxva2lWYXJpYWJsZVF1ZXJ5VHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/types.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/variables.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LokiVariableSupport: () => (/* binding */ LokiVariableSupport)\n/* harmony export */ });\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/variables.ts\");\n/* harmony import */ var _components_VariableQueryEditor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/plugins/datasource/loki/components/VariableQueryEditor.tsx\");\n\n\n\n\n\nclass LokiVariableSupport extends _grafana_data__WEBPACK_IMPORTED_MODULE_1__.CustomVariableSupport {\n  constructor(datasource) {\n    super();\n    this.datasource = datasource;\n    this.editor = _components_VariableQueryEditor__WEBPACK_IMPORTED_MODULE_0__.LokiVariableQueryEditor;\n    this.query = this.query.bind(this);\n  }\n  async execute(query) {\n    return this.datasource.metricFindQuery(query);\n  }\n  query(request) {\n    const result = this.execute(request.targets[0]);\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)(result).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((data) => ({ data })));\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3ZhcmlhYmxlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUM7QUFDYjtBQUV1RDtBQUVuQztBQUlqQyxNQUFNLDRCQUE0QixnRUFBcUIsQ0FBb0M7QUFBQSxFQUdoRyxZQUFvQixZQUE0QjtBQUM5QyxVQUFNO0FBRFk7QUFGcEIsa0JBQVMsb0ZBQXVCO0FBSTlCLFNBQUssUUFBUSxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQUEsRUFDbkM7QUFBQSxFQUVBLE1BQU0sUUFBUSxPQUEwQjtBQUN0QyxXQUFPLEtBQUssV0FBVyxnQkFBZ0IsS0FBSztBQUFBLEVBQzlDO0FBQUEsRUFFQSxNQUFNLFNBQTZFO0FBQ2pGLFVBQU0sU0FBUyxLQUFLLFFBQVEsUUFBUSxRQUFRLENBQUMsQ0FBQztBQUU5QyxXQUFPLDBDQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssbURBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQztBQUFBLEVBQ3BEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS92YXJpYWJsZXMudHM/YzVkMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcm9tLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7IEN1c3RvbVZhcmlhYmxlU3VwcG9ydCwgRGF0YVF1ZXJ5UmVxdWVzdCwgRGF0YVF1ZXJ5UmVzcG9uc2UgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxuaW1wb3J0IHsgTG9raVZhcmlhYmxlUXVlcnlFZGl0b3IgfSBmcm9tICcuL2NvbXBvbmVudHMvVmFyaWFibGVRdWVyeUVkaXRvcic7XG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSB9IGZyb20gJy4vZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBMb2tpVmFyaWFibGVRdWVyeSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgTG9raVZhcmlhYmxlU3VwcG9ydCBleHRlbmRzIEN1c3RvbVZhcmlhYmxlU3VwcG9ydDxMb2tpRGF0YXNvdXJjZSwgTG9raVZhcmlhYmxlUXVlcnk+IHtcbiAgZWRpdG9yID0gTG9raVZhcmlhYmxlUXVlcnlFZGl0b3I7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhc291cmNlOiBMb2tpRGF0YXNvdXJjZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGUocXVlcnk6IExva2lWYXJpYWJsZVF1ZXJ5KSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YXNvdXJjZS5tZXRyaWNGaW5kUXVlcnkocXVlcnkpO1xuICB9XG5cbiAgcXVlcnkocmVxdWVzdDogRGF0YVF1ZXJ5UmVxdWVzdDxMb2tpVmFyaWFibGVRdWVyeT4pOiBPYnNlcnZhYmxlPERhdGFRdWVyeVJlc3BvbnNlPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5leGVjdXRlKHJlcXVlc3QudGFyZ2V0c1swXSk7XG5cbiAgICByZXR1cm4gZnJvbShyZXN1bHQpLnBpcGUobWFwKChkYXRhKSA9PiAoeyBkYXRhIH0pKSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/loki/variables.ts\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/LabelFilterItem.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LabelFilterItem: () => (/* binding */ LabelFilterItem)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/selectUtils.ts\");\n/* harmony import */ var _grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./packages/grafana-e2e-selectors/src/selectors/index.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/InputGroup.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/AccessoryButton.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var app_plugins_datasource_loki_querybuilder_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n/* harmony import */ var _operationUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/operationUtils.ts\");\n\n\n\n\n\n\n\n\n\nfunction LabelFilterItem({\n  item,\n  items,\n  defaultOp,\n  onChange,\n  onDelete,\n  onGetLabelNames,\n  onGetLabelValues,\n  invalidLabel,\n  invalidValue\n}) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n  const [labelNamesMenuOpen, setLabelNamesMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [labelValuesMenuOpen, setLabelValuesMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const CONFLICTING_LABEL_FILTER_ERROR_MESSAGE = \"You have conflicting label filters\";\n  const isMultiSelect = (operator = item.op) => {\n    return operators.find((op) => op.label === operator)?.isMultiValue;\n  };\n  const getSelectOptionsFromString = (item2) => {\n    if (item2) {\n      if (item2.indexOf(\"|\") > 0) {\n        return item2.split(\"|\");\n      }\n      return [item2];\n    }\n    return [];\n  };\n  const getOptions = () => {\n    const labelValues = state.labelValues ? [...state.labelValues] : [];\n    const selectedOptions = getSelectOptionsFromString(item?.value).map(_grafana_data__WEBPACK_IMPORTED_MODULE_4__.toOption);\n    return (0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniqBy)([...selectedOptions, ...labelValues], \"value\");\n  };\n  const isConflicting = (0,_operationUtils__WEBPACK_IMPORTED_MODULE_3__.isConflictingSelector)(item, items);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { \"data-testid\": \"prometheus-dimensions-filter-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.InlineField, { error: CONFLICTING_LABEL_FILTER_ERROR_MESSAGE, invalid: isConflicting ? true : void 0 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_6__.InputGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Select,\n    {\n      placeholder: \"Select label\",\n      \"aria-label\": _grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_8__.selectors.components.QueryBuilder.labelSelect,\n      inputId: \"prometheus-dimensions-filter-item-key\",\n      width: \"auto\",\n      value: item.label ? (0,_grafana_data__WEBPACK_IMPORTED_MODULE_4__.toOption)(item.label) : null,\n      allowCustomValue: true,\n      onOpenMenu: async () => {\n        setState({ isLoadingLabelNames: true });\n        const labelNames = await onGetLabelNames(item);\n        setLabelNamesMenuOpen(true);\n        setState({ labelNames, isLoadingLabelNames: void 0 });\n      },\n      onCloseMenu: () => {\n        setLabelNamesMenuOpen(false);\n      },\n      isOpen: labelNamesMenuOpen,\n      isLoading: state.isLoadingLabelNames,\n      options: state.labelNames,\n      onChange: (change) => {\n        if (change.label) {\n          onChange({\n            ...item,\n            op: item.op ?? defaultOp,\n            label: change.label\n          });\n        }\n      },\n      invalid: isConflicting || invalidLabel\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Select,\n    {\n      \"aria-label\": _grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_8__.selectors.components.QueryBuilder.matchOperatorSelect,\n      value: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_4__.toOption)(item.op ?? defaultOp),\n      options: operators,\n      width: \"auto\",\n      onChange: (change) => {\n        if (change.value != null) {\n          onChange({\n            ...item,\n            op: change.value,\n            value: isMultiSelect(change.value) ? item.value : getSelectOptionsFromString(item?.value)[0]\n          });\n        }\n      },\n      invalid: isConflicting\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Select,\n    {\n      placeholder: \"Select value\",\n      \"aria-label\": _grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_8__.selectors.components.QueryBuilder.valueSelect,\n      inputId: \"prometheus-dimensions-filter-item-value\",\n      width: \"auto\",\n      value: isMultiSelect() ? getSelectOptionsFromString(item?.value).map(_grafana_data__WEBPACK_IMPORTED_MODULE_4__.toOption) : getSelectOptionsFromString(item?.value).map(_grafana_data__WEBPACK_IMPORTED_MODULE_4__.toOption)[0],\n      allowCustomValue: true,\n      onOpenMenu: async () => {\n        setState({ isLoadingLabelValues: true });\n        const labelValues = await onGetLabelValues(item);\n        setState({\n          ...state,\n          labelValues,\n          isLoadingLabelValues: void 0\n        });\n        setLabelValuesMenuOpen(true);\n      },\n      onCloseMenu: () => {\n        setLabelValuesMenuOpen(false);\n      },\n      isOpen: labelValuesMenuOpen,\n      isMulti: isMultiSelect(),\n      isLoading: state.isLoadingLabelValues,\n      options: getOptions(),\n      onChange: (change) => {\n        if (change.value) {\n          onChange({\n            ...item,\n            value: change.value,\n            op: item.op ?? defaultOp\n          });\n        } else {\n          const changes = change.map((change2) => {\n            return change2.label;\n          }).join(\"|\");\n          onChange({ ...item, value: changes, op: item.op ?? defaultOp });\n        }\n      },\n      invalid: isConflicting || invalidValue\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_9__.AccessoryButton, { \"aria-label\": \"remove\", icon: \"times\", variant: \"secondary\", onClick: onDelete }))));\n}\nconst operators = [\n  app_plugins_datasource_loki_querybuilder_types__WEBPACK_IMPORTED_MODULE_2__.lokiOperators.equals,\n  app_plugins_datasource_loki_querybuilder_types__WEBPACK_IMPORTED_MODULE_2__.lokiOperators.doesNotEqual,\n  app_plugins_datasource_loki_querybuilder_types__WEBPACK_IMPORTED_MODULE_2__.lokiOperators.matchesRegex,\n  app_plugins_datasource_loki_querybuilder_types__WEBPACK_IMPORTED_MODULE_2__.lokiOperators.doesNotMatchRegex\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvTGFiZWxGaWx0ZXJJdGVtLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUF1QjtBQUNTO0FBRVU7QUFDaEI7QUFDa0I7QUFDUjtBQUNOO0FBRVE7QUFlL0IsU0FBUyxnQkFBZ0I7QUFBQSxFQUM5QjtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0YsR0FBVTtBQUNSLFFBQU0sQ0FBQyxPQUFPLFFBQVEsSUFBSSwrQ0FBUSxDQUsvQixDQUFDLENBQUM7QUFJTCxRQUFNLENBQUMsb0JBQW9CLHFCQUFxQixJQUFJLCtDQUFRLENBQUMsS0FBSztBQUNsRSxRQUFNLENBQUMscUJBQXFCLHNCQUFzQixJQUFJLCtDQUFRLENBQUMsS0FBSztBQUNwRSxRQUFNLHlDQUF5QztBQUUvQyxRQUFNLGdCQUFnQixDQUFDLFdBQVcsS0FBSyxPQUFPO0FBQzVDLFdBQU8sVUFBVSxLQUFLLENBQUMsT0FBTyxHQUFHLFVBQVUsUUFBUSxHQUFHO0FBQUEsRUFDeEQ7QUFFQSxRQUFNLDZCQUE2QixDQUFDQSxVQUE0QjtBQUM5RCxRQUFJQSxPQUFNO0FBQ1IsVUFBSUEsTUFBSyxRQUFRLEdBQUcsSUFBSSxHQUFHO0FBQ3pCLGVBQU9BLE1BQUssTUFBTSxHQUFHO0FBQUEsTUFDdkI7QUFDQSxhQUFPLENBQUNBLEtBQUk7QUFBQSxJQUNkO0FBQ0EsV0FBTyxDQUFDO0FBQUEsRUFDVjtBQUVBLFFBQU0sYUFBYSxNQUF5QjtBQUMxQyxVQUFNLGNBQWMsTUFBTSxjQUFjLENBQUMsR0FBRyxNQUFNLFdBQVcsSUFBSSxDQUFDO0FBQ2xFLFVBQU0sa0JBQWtCLDJCQUEyQixNQUFNLEtBQUssRUFBRSxJQUFJLG1EQUFRO0FBRzVFLFdBQU8sOENBQU0sQ0FBQyxDQUFDLEdB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O0FBQUEsWUFDSCxPQUFPLE9BQU87QUFBQSxZQUNkLElBQUksS0FBSyxNQUFNO0FBQUEsVUFDakIsQ0FBdUM7QUFBQSxRQUN6QyxPQUFPO0FBQ0wsZ0JBQU0sVUFBVSxPQUNiLElBQUksQ0FBQ0MsWUFBZ0I7QUFDcEIsbUJBQU9BLFFBQU87QUFBQSxVQUNoQixDQUFDLEVBQ0EsS0FBSyxHQUFHO0FBQ1gsbUJBQVMsRUFBRSxHQUFHLE1BQU0sT0FBTyxTQUFTLElBQUksS0FBSyxNQUFNLFVBQVUsQ0FBdUM7QUFBQSxRQUN0RztBQUFBLE1BQ0Y7QUFBQSxNQUNBLFNBQVMsaUJBQWlCO0FBQUE7QUFBQSxFQUM1QixHQUNBLDJFQUFDLGtFQUFlLElBQUMsY0FBVyxVQUFTLE1BQUssU0FBUSxTQUFRLGFBQVksU0FBUyxVQUFVLENBQzNGLENBQ0YsQ0FDRjtBQUVKO0FBRUEsTUFBTSxZQUFZO0FBQUEsRUFDaEIseUZBQWEsQ0FBQztBQUFBLEVBQ2QseUZBQWEsQ0FBQztBQUFBLEVBQ2QseUZBQWEsQ0FBQztBQUFBLEVBQ2QseUZBQWEsQ0FBQztBQUNoQiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvTGFiZWxGaWx0ZXJJdGVtLnRzeD8wZTBmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVuaXFCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IFNlbGVjdGFibGVWYWx1ZSwgdG9PcHRpb24gfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IHNlbGVjdG9ycyB9IGZyb20gJ0BncmFmYW5hL2UyZS1zZWxlY3RvcnMnO1xuaW1wb3J0IHsgQWNjZXNzb3J5QnV0dG9uLCBJbnB1dEdyb3VwIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IElubGluZUZpZWxkLCBTZWxlY3QgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBsb2tpT3BlcmF0b3JzIH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci90eXBlcyc7XG5cbmltcG9ydCB7IGlzQ29uZmxpY3RpbmdTZWxlY3RvciB9IGZyb20gJy4vb3BlcmF0aW9uVXRpbHMnO1xuaW1wb3J0IHsgUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XG4gIGRlZmF1bHRPcDogc3RyaW5nO1xuICBpdGVtOiBQYXJ0aWFsPFF1ZXJ5QnVpbGRlckxhYmVsRmlsdGVyPjtcbiAgaXRlbXM6IEFycmF5PFBhcnRpYWw8UXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXI+PjtcbiAgb25DaGFuZ2U6ICh2YWx1ZTogUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIpID0+IHZvaWQ7XG4gIG9uR2V0TGFiZWxOYW1lczogKGZvckxhYmVsOiBQYXJ0aWFsPFF1ZXJ5QnVpbGRlckxhYmVsRmlsdGVyPikgPT4gUHJvbWlzZTxTZWxlY3RhYmxlVmFsdWVbXT47XG4gIG9uR2V0TGFiZWxWYWx1ZXM6IChmb3JMYWJlbDogUGFydGlhbDxRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcj4pID0+IFByb21pc2U8U2VsZWN0YWJsZVZhbHVlW10+O1xuICBvbkRlbGV0ZTogKCkgPT4gdm9pZDtcbiAgaW52YWxpZExhYmVsPzogYm9vbGVhbjtcbiAgaW52YWxpZFZhbHVlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIExhYmVsRmlsdGVySXRlbSh7XG4gIGl0ZW0sXG4gIGl0ZW1zLFxuICBkZWZhdWx0T3AsXG4gIG9uQ2hhbmdlLFxuICBvbkRlbGV0ZSxcbiAgb25HZXRMYWJlbE5hbWVzLFxuICBvbkdldExhYmVsVmFsdWVzLFxuICBpbnZhbGlkTGFiZWwsXG4gIGludmFsaWRWYWx1ZSxcbn06IFByb3BzKSB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8e1xuICAgIGxhYmVsTmFtZXM/OiBTZWxlY3RhYmxlVmFsdWVbXTtcbiAgICBsYWJlbFZhbHVlcz86IFNlbGVjdGFibGVWYWx1ZVtdO1xuICAgIGlzTG9hZGluZ0xhYmVsTmFtZXM/OiBib29sZWFuO1xuICAgIGlzTG9hZGluZ0xhYmVsVmFsdWVzPzogYm9vbGVhbjtcbiAgfT4oe30pO1xuICAvLyB0aGVyZSdzIGEgYnVnIGluIHJlYWN0LXNlbGVjdCB3aGVyZSB0aGUgbWVudSBkb2Vzbid0IHJlY2FsY3VsYXRlIGl0cyBwb3NpdGlvbiB3aGVuIHRoZSBvcHRpb25zIGFyZSBsb2FkZWQgYXN5bmNocm9ub3VzbHlcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFmYW5hL2dyYWZhbmEvaXNzdWVzLzYzNTU4XG4gIC8vIGluc3RlYWQsIHdlIGV4cGxpY2l0bHkgY29udHJvbCB0aGUgbWVudSB2aXNpYmlsaXR5IGFuZCBwcmV2ZW50IHNob3dpbmcgaXQgdW50aWwgdGhlIG9wdGlvbnMgaGF2ZSBmdWxseSBsb2FkZWRcbiAgY29uc3QgW2xhYmVsTmFtZXNNZW51T3Blbiwgc2V0TGFiZWxOYW1lc01lbnVPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xhYmVsVmFsdWVzTWVudU9wZW4sIHNldExhYmVsVmFsdWVzTWVudU9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBDT05GTElDVElOR19MQUJFTF9GSUxURVJfRVJST1JfTUVTU0FHRSA9ICdZb3UgaGF2ZSBjb25mbGljdGluZyBsYWJlbCBmaWx0ZXJzJztcblxuICBjb25zdCBpc011bHRpU2VsZWN0ID0gKG9wZXJhdG9yID0gaXRlbS5vcCkgPT4ge1xuICAgIHJldHVybiBvcGVyYXRvcnMuZmluZCgob3ApID0+IG9wLmxhYmVsID09PSBvcGVyYXRvcik/LmlzTXVsdGlWYWx1ZTtcbiAgfTtcblxuICBjb25zdCBnZXRTZWxlY3RPcHRpb25zRnJvbVN0cmluZyA9IChpdGVtPzogc3RyaW5nKTogc3RyaW5nW10gPT4ge1xuICAgIGlmIChpdGVtKSB7XG4gICAgICBpZiAoaXRlbS5pbmRleE9mKCd8JykgPiAwKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnNwbGl0KCd8Jyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2l0ZW1dO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH07XG5cbiAgY29uc3QgZ2V0T3B0aW9ucyA9ICgpOiBTZWxlY3RhYmxlVmFsdWVbXSA9PiB7XG4gICAgY29uc3QgbGFiZWxWYWx1ZXMgPSBzdGF0ZS5sYWJlbFZhbHVlcyA/IFsuLi5zdGF0ZS5sYWJlbFZhbHVlc10gOiBbXTtcbiAgICBjb25zdCBzZWxlY3RlZE9wdGlvbnMgPSBnZXRTZWxlY3RPcHRpb25zRnJvbVN0cmluZyhpdGVtPy52YWx1ZSkubWFwKHRvT3B0aW9uKTtcblxuICAgIC8vIFJlbW92ZSBwb3NzaWJsZSBkdXBsaWNhdGVkIHZhbHVlc1xuICAgIHJldHVybiB1bmlxQnkoWy4uLnNlbGVjdGVkT3B0aW9ucywgLi4ubGFiZWxWYWx1ZXNdLCAndmFsdWUnKTtcbiAgfTtcblxuICBjb25zdCBpc0NvbmZsaWN0aW5nID0gaXNDb25mbGljdGluZ1NlbGVjdG9yKGl0ZW0sIGl0ZW1zKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJwcm9tZXRoZXVzLWRpbWVuc2lvbnMtZmlsdGVyLWl0ZW1cIj5cbiAgICAgIDxJbmxpbmVGaWVsZCBlcnJvcj17Q09ORkxJQ1RJTkdfTEFCRUxfRklMVEVSX0VSUk9SX01FU1NBR0V9IGludmFsaWQ9e2lzQ29uZmxpY3RpbmcgPyB0cnVlIDogdW5kZWZpbmVkfT5cbiAgICAgICAgPElucHV0R3JvdXA+XG4gICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWxlY3QgbGFiZWxcIlxuICAgICAgICAgICAgYXJpYS1sYWJlbD17c2VsZWN0b3JzLmNvbXBvbmVudHMuUXVlcnlCdWlsZGVyLmxhYmVsU2VsZWN0fVxuICAgICAgICAgICAgaW5wdXRJZD1cInByb21ldGhldXMtZGltZW5zaW9ucy1maWx0ZXItaXRlbS1rZXlcIlxuICAgICAgICAgICAgd2lkdGg9XCJhdXRvXCJcbiAgICAgICAgICAgIHZhbHVlPXtpdGVtLmxhYmVsID8gdG9PcHRpb24oaXRlbS5sYWJlbCkgOiBudWxsfVxuICAgICAgICAgICAgYWxsb3dDdXN0b21WYWx1ZVxuICAgICAgICAgICAgb25PcGVuTWVudT17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBzZXRTdGF0ZSh7IGlzTG9hZGluZ0xhYmVsTmFtZXM6IHRydWUgfSk7XG4gICAgICAgICAgICAgIGNvbnN0IGxhYmVsTmFtZXMgPSBhd2FpdCBvbkdldExhYmVsTmFtZXMoaXRlbSk7XG4gICAgICAgICAgICAgIHNldExhYmVsTmFtZXNNZW51T3Blbih0cnVlKTtcbiAgICAgICAgICAgICAgc2V0U3RhdGUoeyBsYWJlbE5hbWVzLCBpc0xvYWRpbmdMYWJlbE5hbWVzOiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25DbG9zZU1lbnU9eygpID0+IHtcbiAgICAgICAgICAgICAgc2V0TGFiZWxOYW1lc01lbnVPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBpc09wZW49e2xhYmVsTmFtZXNNZW51T3Blbn1cbiAgICAgICAgICAgIGlzTG9hZGluZz17c3RhdGUuaXNMb2FkaW5nTGFiZWxOYW1lc31cbiAgICAgICAgICAgIG9wdGlvbnM9e3N0YXRlLmxhYmVsTmFtZXN9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGNoYW5nZSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoY2hhbmdlLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgb25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgIG9wOiBpdGVtLm9wID8/IGRlZmF1bHRPcCxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBjaGFuZ2UubGFiZWwsXG4gICAgICAgICAgICAgICAgfSBhcyB1bmtub3duIGFzIFF1ZXJ5QnVpbGRlckxhYmVsRmlsdGVyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGludmFsaWQ9e2lzQ29uZmxpY3RpbmcgfHwgaW52YWxpZExhYmVsfVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtzZWxlY3RvcnMuY29tcG9uZW50cy5RdWVyeUJ1aWxkZXIubWF0Y2hPcGVyYXRvclNlbGVjdH1cbiAgICAgICAgICAgIHZhbHVlPXt0b09wdGlvbihpdGVtLm9wID8/IGRlZmF1bHRPcCl9XG4gICAgICAgICAgICBvcHRpb25zPXtvcGVyYXRvcnN9XG4gICAgICAgICAgICB3aWR0aD1cImF1dG9cIlxuICAgICAgICAgICAgb25DaGFuZ2U9eyhjaGFuZ2UpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGNoYW5nZS52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgIG9wOiBjaGFuZ2UudmFsdWUsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogaXNNdWx0aVNlbGVjdChjaGFuZ2UudmFsdWUpID8gaXRlbS52YWx1ZSA6IGdldFNlbGVjdE9wdGlvbnNGcm9tU3RyaW5nKGl0ZW0/LnZhbHVlKVswXSxcbiAgICAgICAgICAgICAgICB9IGFzIHVua25vd24gYXMgUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgaW52YWxpZD17aXNDb25mbGljdGluZ31cbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWxlY3QgdmFsdWVcIlxuICAgICAgICAgICAgYXJpYS1sYWJlbD17c2VsZWN0b3JzLmNvbXBvbmVudHMuUXVlcnlCdWlsZGVyLnZhbHVlU2VsZWN0fVxuICAgICAgICAgICAgaW5wdXRJZD1cInByb21ldGhldXMtZGltZW5zaW9ucy1maWx0ZXItaXRlbS12YWx1ZVwiXG4gICAgICAgICAgICB3aWR0aD1cImF1dG9cIlxuICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICBpc011bHRpU2VsZWN0KClcbiAgICAgICAgICAgICAgICA/IGdldFNlbGVjdE9wdGlvbnNGcm9tU3RyaW5nKGl0ZW0/LnZhbHVlKS5tYXAodG9PcHRpb24pXG4gICAgICAgICAgICAgICAgOiBnZXRTZWxlY3RPcHRpb25zRnJvbVN0cmluZyhpdGVtPy52YWx1ZSkubWFwKHRvT3B0aW9uKVswXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWxsb3dDdXN0b21WYWx1ZVxuICAgICAgICAgICAgb25PcGVuTWVudT17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBzZXRTdGF0ZSh7IGlzTG9hZGluZ0xhYmVsVmFsdWVzOiB0cnVlIH0pO1xuICAgICAgICAgICAgICBjb25zdCBsYWJlbFZhbHVlcyA9IGF3YWl0IG9uR2V0TGFiZWxWYWx1ZXMoaXRlbSk7XG4gICAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICBsYWJlbFZhbHVlcyxcbiAgICAgICAgICAgICAgICBpc0xvYWRpbmdMYWJlbFZhbHVlczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgc2V0TGFiZWxWYWx1ZXNNZW51T3Blbih0cnVlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbkNsb3NlTWVudT17KCkgPT4ge1xuICAgICAgICAgICAgICBzZXRMYWJlbFZhbHVlc01lbnVPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBpc09wZW49e2xhYmVsVmFsdWVzTWVudU9wZW59XG4gICAgICAgICAgICBpc011bHRpPXtpc011bHRpU2VsZWN0KCl9XG4gICAgICAgICAgICBpc0xvYWRpbmc9e3N0YXRlLmlzTG9hZGluZ0xhYmVsVmFsdWVzfVxuICAgICAgICAgICAgb3B0aW9ucz17Z2V0T3B0aW9ucygpfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhjaGFuZ2UpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGNoYW5nZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogY2hhbmdlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgb3A6IGl0ZW0ub3AgPz8gZGVmYXVsdE9wLFxuICAgICAgICAgICAgICAgIH0gYXMgdW5rbm93biBhcyBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlcyA9IGNoYW5nZVxuICAgICAgICAgICAgICAgICAgLm1hcCgoY2hhbmdlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5nZS5sYWJlbDtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAuam9pbignfCcpO1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKHsgLi4uaXRlbSwgdmFsdWU6IGNoYW5nZXMsIG9wOiBpdGVtLm9wID8/IGRlZmF1bHRPcCB9IGFzIHVua25vd24gYXMgUXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgaW52YWxpZD17aXNDb25mbGljdGluZyB8fCBpbnZhbGlkVmFsdWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8QWNjZXNzb3J5QnV0dG9uIGFyaWEtbGFiZWw9XCJyZW1vdmVcIiBpY29uPVwidGltZXNcIiB2YXJpYW50PVwic2Vjb25kYXJ5XCIgb25DbGljaz17b25EZWxldGV9IC8+XG4gICAgICAgIDwvSW5wdXRHcm91cD5cbiAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmNvbnN0IG9wZXJhdG9ycyA9IFtcbiAgbG9raU9wZXJhdG9ycy5lcXVhbHMsXG4gIGxva2lPcGVyYXRvcnMuZG9lc05vdEVxdWFsLFxuICBsb2tpT3BlcmF0b3JzLm1hdGNoZXNSZWdleCxcbiAgbG9raU9wZXJhdG9ycy5kb2VzTm90TWF0Y2hSZWdleCxcbl07XG4iXSwibmFtZXMiOlsiaXRlbSIsImNoYW5nZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/LabelFilterItem.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/LabelFilters.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LabelFilters: () => (/* binding */ LabelFilters),\n/* harmony export */   MISSING_LABEL_FILTER_ERROR_MESSAGE: () => (/* binding */ MISSING_LABEL_FILTER_ERROR_MESSAGE)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorFieldGroup.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorField.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorList.js\");\n/* harmony import */ var _LabelFilterItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/LabelFilterItem.tsx\");\n\n\n\n\n\nconst MISSING_LABEL_FILTER_ERROR_MESSAGE = \"Select at least 1 label filter (label and value)\";\nfunction LabelFilters({\n  labelsFilters,\n  onChange,\n  onGetLabelNames,\n  onGetLabelValues,\n  labelFilterRequired\n}) {\n  const defaultOp = \"=\";\n  const [items, setItems] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([{ op: defaultOp }]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (labelsFilters.length > 0) {\n      setItems(labelsFilters);\n    } else {\n      setItems([{ op: defaultOp }]);\n    }\n  }, [labelsFilters]);\n  const onLabelsChange = (newItems) => {\n    setItems(newItems);\n    const newLabels = newItems.filter((x) => x.label != null && x.value != null);\n    if (!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(newLabels, labelsFilters)) {\n      onChange(newLabels);\n    }\n  };\n  const hasLabelFilter = items.some((item) => item.label && item.value);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_3__.EditorFieldGroup, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_experimental__WEBPACK_IMPORTED_MODULE_4__.EditorField,\n    {\n      label: \"Label filters\",\n      error: MISSING_LABEL_FILTER_ERROR_MESSAGE,\n      invalid: labelFilterRequired && !hasLabelFilter\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_experimental__WEBPACK_IMPORTED_MODULE_5__.EditorList,\n      {\n        items,\n        onChange: onLabelsChange,\n        renderItem: (item, onChangeItem, onDelete) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n          _LabelFilterItem__WEBPACK_IMPORTED_MODULE_2__.LabelFilterItem,\n          {\n            item,\n            items,\n            defaultOp,\n            onChange: onChangeItem,\n            onDelete,\n            onGetLabelNames,\n            onGetLabelValues,\n            invalidLabel: labelFilterRequired && !item.label,\n            invalidValue: labelFilterRequired && !item.value\n          }\n        )\n      }\n    )\n  ));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvTGFiZWxGaWx0ZXJzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNtQjtBQUdlO0FBSTFCO0FBRXpCLE1BQU0scUNBQXFDO0FBVzNDLFNBQVMsYUFBYTtBQUFBLEVBQzNCO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGLEdBQVU7QUFDUixRQUFNLFlBQVk7QUFDbEIsUUFBTSxDQUFDLE9BQU8sUUFBUSxJQUFJLCtDQUFRLENBQTBDLENBQUMsRUFBRSxJQUFJLFVBQVUsQ0FBQyxDQUFDO0FBRS9GLGtEQUFTLENBQUMsTUFBTTtBQUNkLFFBQUksY0FBYyxTQUFTLEdBQUc7QUFDNUIsZUFBUyxhQUFhO0FBQUEsSUFDeEIsT0FBTztBQUNMLGVBQVMsQ0FBQyxFQUFFLElBQUksVUFBVSxDQUFDLENBQUM7QUFBQSxJQUM5QjtBQUFBLEVBQ0YsR0FBRyxDQUFDLGFBQWEsQ0FBQztBQUVsQixRQUFNLGlCQUFpQixDQUFDLGFBQXNEO0FBQzVFLGFBQVMsUUFBUTtBQUdqQixVQUFNLFlBQVksU0FBUyxPQUFPLENBQUMsTUFBTSxFQUFFLFNBQVMsUUFBUSxFQUFFLFNBQVMsSUFBSTtBQUMzRSxRQUFJLENBQUMsK0NBQU8sQ0FBQyxXQUFXLGFBQWEsR0FBRztBQUN0QyxlQUFTLFNBQXNDO0FBQUEsSUFDakQ7QUFBQSxFQUNGO0FBRUEsUUFBTSxpQkFBaUIsTUFBTSxLQUFLLENBQUMsU0FBUyxLQUFLLFNBQVMsS0FBSyxLQUFLO0FBRXBFLFNBQ0UsMkVBQUMsbUVBQWdCLFFBQ2Y7QUFBQSxJQUFDLDhEQUFXO0FBQVg7QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxNQUNQLFNBQVMsdUJBQXVCLENBQUM7QUFBQTtBQUFBLElBRWpDO0FBQUEsTUFBQyw2REFBVTtBQUFWO0FBQUEsUUFDQztBQUFBLFFBQ0EsVUFBVTtBQUFBLFFBQ1YsWUFBWSxDQUFDLE1BQXdDLGNBQWMsYUFDakU7QUFBQSxVQUFDLDZEQUFlO0FBQWY7QUFBQSxZQUNDO0FBQUEsWUFDQTtBQUFBLFlBQ0E7QUFBQSxZQUNBLFVBQVU7QUFBQSxZQUNWO0FBQUEsWUFDQTtBQUFBLFlBQ0E7QUFBQSxZQUNBLGNBQWMsdUJBQXVCLENBQUMsS0FBSztBQUFBLFlBQzNDLGNBQWMsdUJBQXVCLENBQUMsS0FBSztBQUFBO0FBQUEsUUFDN0M7QUFBQTtBQUFBLElBRUo7QUFBQSxFQUNGLENBQ0Y7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvTGFiZWxGaWx0ZXJzLnRzeD9mM2VkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRXF1YWwgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IFNlbGVjdGFibGVWYWx1ZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgRWRpdG9yRmllbGRHcm91cCwgRWRpdG9yRmllbGQsIEVkaXRvckxpc3QgfSBmcm9tICdAZ3JhZmFuYS9leHBlcmltZW50YWwnO1xuXG5pbXBvcnQgeyBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlciB9IGZyb20gJy4uL3NoYXJlZC90eXBlcyc7XG5cbmltcG9ydCB7IExhYmVsRmlsdGVySXRlbSB9IGZyb20gJy4vTGFiZWxGaWx0ZXJJdGVtJztcblxuZXhwb3J0IGNvbnN0IE1JU1NJTkdfTEFCRUxfRklMVEVSX0VSUk9SX01FU1NBR0UgPSAnU2VsZWN0IGF0IGxlYXN0IDEgbGFiZWwgZmlsdGVyIChsYWJlbCBhbmQgdmFsdWUpJztcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XG4gIGxhYmVsc0ZpbHRlcnM6IFF1ZXJ5QnVpbGRlckxhYmVsRmlsdGVyW107XG4gIG9uQ2hhbmdlOiAobGFiZWxGaWx0ZXJzOiBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcltdKSA9PiB2b2lkO1xuICBvbkdldExhYmVsTmFtZXM6IChmb3JMYWJlbDogUGFydGlhbDxRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcj4pID0+IFByb21pc2U8U2VsZWN0YWJsZVZhbHVlW10+O1xuICBvbkdldExhYmVsVmFsdWVzOiAoZm9yTGFiZWw6IFBhcnRpYWw8UXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXI+KSA9PiBQcm9taXNlPFNlbGVjdGFibGVWYWx1ZVtdPjtcbiAgLyoqIElmIHNldCB0byB0cnVlLCBjb21wb25lbnQgd2lsbCBzaG93IGVycm9yIG1lc3NhZ2UgdW50aWwgYXQgbGVhc3QgMSBmaWx0ZXIgaXMgc2VsZWN0ZWQgKi9cbiAgbGFiZWxGaWx0ZXJSZXF1aXJlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBMYWJlbEZpbHRlcnMoe1xuICBsYWJlbHNGaWx0ZXJzLFxuICBvbkNoYW5nZSxcbiAgb25HZXRMYWJlbE5hbWVzLFxuICBvbkdldExhYmVsVmFsdWVzLFxuICBsYWJlbEZpbHRlclJlcXVpcmVkLFxufTogUHJvcHMpIHtcbiAgY29uc3QgZGVmYXVsdE9wID0gJz0nO1xuICBjb25zdCBbaXRlbXMsIHNldEl0ZW1zXSA9IHVzZVN0YXRlPEFycmF5PFBhcnRpYWw8UXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXI+Pj4oW3sgb3A6IGRlZmF1bHRPcCB9XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobGFiZWxzRmlsdGVycy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRJdGVtcyhsYWJlbHNGaWx0ZXJzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SXRlbXMoW3sgb3A6IGRlZmF1bHRPcCB9XSk7XG4gICAgfVxuICB9LCBbbGFiZWxzRmlsdGVyc10pO1xuXG4gIGNvbnN0IG9uTGFiZWxzQ2hhbmdlID0gKG5ld0l0ZW1zOiBBcnJheTxQYXJ0aWFsPFF1ZXJ5QnVpbGRlckxhYmVsRmlsdGVyPj4pID0+IHtcbiAgICBzZXRJdGVtcyhuZXdJdGVtcyk7XG5cbiAgICAvLyBFeHRyYWN0IGZ1bGwgbGFiZWwgZmlsdGVycyB3aXRoIGJvdGggbGFiZWwgJiB2YWx1ZVxuICAgIGNvbnN0IG5ld0xhYmVscyA9IG5ld0l0ZW1zLmZpbHRlcigoeCkgPT4geC5sYWJlbCAhPSBudWxsICYmIHgudmFsdWUgIT0gbnVsbCk7XG4gICAgaWYgKCFpc0VxdWFsKG5ld0xhYmVscywgbGFiZWxzRmlsdGVycykpIHtcbiAgICAgIG9uQ2hhbmdlKG5ld0xhYmVscyBhcyBRdWVyeUJ1aWxkZXJMYWJlbEZpbHRlcltdKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFzTGFiZWxGaWx0ZXIgPSBpdGVtcy5zb21lKChpdGVtKSA9PiBpdGVtLmxhYmVsICYmIGl0ZW0udmFsdWUpO1xuXG4gIHJldHVybiAoXG4gICAgPEVkaXRvckZpZWxkR3JvdXA+XG4gICAgICA8RWRpdG9yRmllbGRcbiAgICAgICAgbGFiZWw9XCJMYWJlbCBmaWx0ZXJzXCJcbiAgICAgICAgZXJyb3I9e01JU1NJTkdfTEFCRUxfRklMVEVSX0VSUk9SX01FU1NBR0V9XG4gICAgICAgIGludmFsaWQ9e2xhYmVsRmlsdGVyUmVxdWlyZWQgJiYgIWhhc0xhYmVsRmlsdGVyfVxuICAgICAgPlxuICAgICAgICA8RWRpdG9yTGlzdFxuICAgICAgICAgIGl0ZW1zPXtpdGVtc31cbiAgICAgICAgICBvbkNoYW5nZT17b25MYWJlbHNDaGFuZ2V9XG4gICAgICAgICAgcmVuZGVySXRlbT17KGl0ZW06IFBhcnRpYWw8UXVlcnlCdWlsZGVyTGFiZWxGaWx0ZXI+LCBvbkNoYW5nZUl0ZW0sIG9uRGVsZXRlKSA9PiAoXG4gICAgICAgICAgICA8TGFiZWxGaWx0ZXJJdGVtXG4gICAgICAgICAgICAgIGl0ZW09e2l0ZW19XG4gICAgICAgICAgICAgIGl0ZW1zPXtpdGVtc31cbiAgICAgICAgICAgICAgZGVmYXVsdE9wPXtkZWZhdWx0T3B9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZUl0ZW19XG4gICAgICAgICAgICAgIG9uRGVsZXRlPXtvbkRlbGV0ZX1cbiAgICAgICAgICAgICAgb25HZXRMYWJlbE5hbWVzPXtvbkdldExhYmVsTmFtZXN9XG4gICAgICAgICAgICAgIG9uR2V0TGFiZWxWYWx1ZXM9e29uR2V0TGFiZWxWYWx1ZXN9XG4gICAgICAgICAgICAgIGludmFsaWRMYWJlbD17bGFiZWxGaWx0ZXJSZXF1aXJlZCAmJiAhaXRlbS5sYWJlbH1cbiAgICAgICAgICAgICAgaW52YWxpZFZhbHVlPXtsYWJlbEZpbHRlclJlcXVpcmVkICYmICFpdGVtLnZhbHVlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAvPlxuICAgICAgPC9FZGl0b3JGaWVsZD5cbiAgICA8L0VkaXRvckZpZWxkR3JvdXA+XG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/LabelFilters.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperationEditor: () => (/* binding */ OperationEditor)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/react-beautiful-dnd-virtual-daef784a91/0/cache/react-beautiful-dnd-npm-13.1.1-ddc8adf565-5f90f7c0ab.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Tooltip/Tooltip.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/InlineField.tsx\");\n/* harmony import */ var app_plugins_datasource_loki_querybuilder_operationUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/operationUtils.ts\");\n/* harmony import */ var app_plugins_datasource_loki_querybuilder_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/datasource/loki/querybuilder/types.ts\");\n/* harmony import */ var _OperationHeader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationHeader.tsx\");\n/* harmony import */ var _OperationParamEditor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationParamEditor.tsx\");\n/* harmony import */ var _operationUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/operationUtils.ts\");\n\n\n\n\n\n\n\n\n\n\n\nfunction OperationEditor({\n  operation,\n  index,\n  onRemove,\n  onChange,\n  onRunQuery,\n  queryModeller,\n  query,\n  datasource,\n  flash,\n  highlight\n}) {\n  const def = queryModeller.getOperationDef(operation.id);\n  const shouldFlash = useFlash(flash);\n  const isConflicting = operation.id === app_plugins_datasource_loki_querybuilder_types__WEBPACK_IMPORTED_MODULE_3__.LokiOperationId.LabelFilter && (0,app_plugins_datasource_loki_querybuilder_operationUtils__WEBPACK_IMPORTED_MODULE_2__.isConflictingFilter)(operation, query.operations);\n  const theme = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.useTheme2)();\n  const styles = getStyles(theme, isConflicting);\n  if (!def) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", null, \"Operation \", operation.id, \" not found\");\n  }\n  const onParamValueChanged = (paramIdx, value) => {\n    const update = { ...operation, params: [...operation.params] };\n    update.params[paramIdx] = value;\n    callParamChangedThenOnChange(def, update, index, paramIdx, onChange);\n  };\n  const onAddRestParam = () => {\n    const update = { ...operation, params: [...operation.params, \"\"] };\n    callParamChangedThenOnChange(def, update, index, operation.params.length, onChange);\n  };\n  const onRemoveRestParam = (paramIdx) => {\n    const update = {\n      ...operation,\n      params: [...operation.params.slice(0, paramIdx), ...operation.params.slice(paramIdx + 1)]\n    };\n    callParamChangedThenOnChange(def, update, index, paramIdx, onChange);\n  };\n  const operationElements = [];\n  for (let paramIndex = 0; paramIndex < operation.params.length; paramIndex++) {\n    const paramDef = def.params[Math.min(def.params.length - 1, paramIndex)];\n    const Editor = (0,_OperationParamEditor__WEBPACK_IMPORTED_MODULE_5__.getOperationParamEditor)(paramDef);\n    operationElements.push(\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.paramRow, key: `${paramIndex}-1` }, !paramDef.hideName && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.paramName }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_6__.getOperationParamId)(index, paramIndex) }, paramDef.name), paramDef.description && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Tooltip, { placement: \"top\", content: paramDef.description, theme: \"info\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Icon, { name: \"info-circle\", size: \"sm\", className: styles.infoIcon }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.paramValue }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_10__.Stack, { gap: 0.5, direction: \"row\", alignItems: \"center\", wrap: false }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        Editor,\n        {\n          index: paramIndex,\n          paramDef,\n          value: operation.params[paramIndex],\n          operation,\n          operationIndex: index,\n          onChange: onParamValueChanged,\n          onRunQuery,\n          query,\n          datasource\n        }\n      ), paramDef.restParam && (operation.params.length > def.params.length || paramDef.optional) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Button,\n        {\n          \"data-testid\": `operations.${index}.remove-rest-param`,\n          size: \"sm\",\n          fill: \"text\",\n          icon: \"times\",\n          variant: \"secondary\",\n          title: `Remove ${paramDef.name}`,\n          onClick: () => onRemoveRestParam(paramIndex)\n        }\n      ))))\n    );\n  }\n  let restParam;\n  if (def.params.length > 0) {\n    const lastParamDef = def.params[def.params.length - 1];\n    if (lastParamDef.restParam) {\n      restParam = renderAddRestParamButton(lastParamDef, onAddRestParam, index, operation.params.length, styles);\n    }\n  }\n  const isInvalid = (isDragging) => {\n    if (isDragging) {\n      return void 0;\n    }\n    return isConflicting ? true : void 0;\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_12__.Draggable, { draggableId: `operation-${index}`, index }, (provided, snapshot) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_13__.InlineField,\n    {\n      error: \"You have conflicting label filters\",\n      invalid: isInvalid(snapshot.isDragging),\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.error, styles.cardWrapper)\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      \"div\",\n      {\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(\n          styles.card,\n          (shouldFlash || highlight) && styles.cardHighlight,\n          isConflicting && styles.cardError\n        ),\n        ref: provided.innerRef,\n        ...provided.draggableProps,\n        \"data-testid\": `operations.${index}.wrapper`\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _OperationHeader__WEBPACK_IMPORTED_MODULE_4__.OperationHeader,\n        {\n          operation,\n          dragHandleProps: provided.dragHandleProps,\n          def,\n          index,\n          onChange,\n          onRemove,\n          queryModeller\n        }\n      ),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.body }, operationElements),\n      restParam,\n      index < query.operations.length - 1 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.arrow }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.arrowLine }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.arrowArrow }))\n    )\n  ));\n}\nfunction useFlash(flash) {\n  const [keepFlash, setKeepFlash] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    let t;\n    if (flash) {\n      t = setTimeout(() => {\n        setKeepFlash(false);\n      }, 1e3);\n    } else {\n      setKeepFlash(true);\n    }\n    return () => clearTimeout(t);\n  }, [flash]);\n  return keepFlash && flash;\n}\nfunction renderAddRestParamButton(paramDef, onAddRestParam, operationIndex, paramIndex, styles) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.restParam, key: `${paramIndex}-2` }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_11__.Button,\n    {\n      size: \"sm\",\n      icon: \"plus\",\n      title: `Add ${paramDef.name}`,\n      variant: \"secondary\",\n      onClick: onAddRestParam,\n      \"data-testid\": `operations.${operationIndex}.add-rest-param`\n    },\n    paramDef.name\n  ));\n}\nfunction callParamChangedThenOnChange(def, operation, operationIndex, paramIndex, onChange) {\n  if (def.paramChangedHandler) {\n    onChange(operationIndex, def.paramChangedHandler(paramIndex, operation, def));\n  } else {\n    onChange(operationIndex, operation);\n  }\n}\nconst getStyles = (theme, isConflicting) => {\n  return {\n    cardWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      alignItems: \"stretch\"\n    }),\n    error: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      marginBottom: theme.spacing(1)\n    }),\n    card: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.medium}`,\n      cursor: \"grab\",\n      borderRadius: theme.shape.borderRadius(1),\n      position: \"relative\",\n      transition: \"all 0.5s ease-in 0s\",\n      height: isConflicting ? \"auto\" : \"100%\"\n    }),\n    cardError: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      boxShadow: `0px 0px 4px 0px ${theme.colors.warning.main}`,\n      border: `1px solid ${theme.colors.warning.main}`\n    }),\n    cardHighlight: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      boxShadow: `0px 0px 4px 0px ${theme.colors.primary.border}`,\n      border: `1px solid ${theme.colors.primary.border}`\n    }),\n    infoIcon: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      marginLeft: theme.spacing(0.5),\n      color: theme.colors.text.secondary,\n      \":hover\": {\n        color: theme.colors.text.primary\n      }\n    }),\n    body: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      margin: theme.spacing(1, 1, 0.5, 1),\n      display: \"table\"\n    }),\n    paramRow: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"paramRow\",\n      display: \"table-row\",\n      verticalAlign: \"middle\"\n    }),\n    paramName: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      display: \"table-cell\",\n      padding: theme.spacing(0, 1, 0, 0),\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      verticalAlign: \"middle\",\n      height: \"32px\"\n    }),\n    paramValue: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"paramValue\",\n      display: \"table-cell\",\n      verticalAlign: \"middle\"\n    }),\n    restParam: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      padding: theme.spacing(0, 1, 1, 1)\n    }),\n    arrow: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      position: \"absolute\",\n      top: \"0\",\n      right: \"-18px\",\n      display: \"flex\"\n    }),\n    arrowLine: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      height: \"2px\",\n      width: \"8px\",\n      backgroundColor: theme.colors.border.strong,\n      position: \"relative\",\n      top: \"14px\"\n    }),\n    arrowArrow: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      width: 0,\n      height: 0,\n      borderTop: `5px solid transparent`,\n      borderBottom: `5px solid transparent`,\n      borderLeft: `7px solid ${theme.colors.border.strong}`,\n      position: \"relative\",\n      top: \"10px\"\n    })\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uRWRpdG9yLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNtQjtBQUNqQjtBQUdKO0FBQ3dDO0FBQzFCO0FBQ0o7QUFFQTtBQUNRO0FBQ0o7QUFzQjdCLFNBQVMsZ0JBQWdCO0FBQUEsRUFDOUI7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRixHQUFVO0FBQ1IsUUFBTSxNQUFNLGNBQWMsZ0JBQWdCLFVBQVUsRUFBRTtBQUN0RCxRQUFNLGNBQWMsU0FBUyxLQUFLO0FBRWxDLFFBQU0sZ0JBQ0osVUFBVSxPQUFPLDJGQUFlLENBQUMsZUFBZSw0R0FBbUIsQ0FBQyxXQUFXLE1BQU0sVUFBVTtBQUVqRyxRQUFNLFFBQVEsc0RBQVMsQ0FBQztBQUN4QixRQUFNLFNBQVMsVUFBVSxPQUFPLGFBQWE7QUFFN0MsTUFBSSxDQUFDLEtBQUs7QUFDUixXQUFPLDJFQUFDLGNBQUssY0FBVyxVQUFVLElBQUcsWUFBVTtBQUFBLEVBQ2pEO0FBRUEsUUFBTSxzQkFBc0IsQ0FBQyxVQUFrQixVQUEyQztBQUN4RixVQUFNLFNBQWdDLEVBQUUsR0FBRyxXQUFXLFFBQVEsQ0FBQyxHQUFHLFVBQVUsTUFBTSxFQUFFO0FBQ3BGLFdBQU8sT0FBTyxRQUFRLElBQUk7QUFDMUIsaUNBQTZCLEtBQUssUUFBUSxPQUFPLFVBQVUsUUFBUTtBQUFBLEVBQ3JFO0FBRUEsUUFBTSxpQkFBaUIsTUFBTTtBQUMzQixVQUFNLFNBQWdDLEVBQUUsR0FBRyxXQUFXLFFBQVEsQ0FBQyxHQUFHLFVBQVUsUUFBUSxFQUFFLEVBQUU7QUFDeEYsaUNBQTZCLEtBQUssUUFBUSxPQUFPLFVBQVUsT0FBTyxRQUFRLFFBQVE7QUFBQSxF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TUFDZCxPQUFPO0FBQUEsTUFDUCxRQUFRO0FBQUEsTUFDUixXQUFXO0FBQUEsTUFDWCxjQUFjO0FBQUEsTUFDZCxZQUFZLGFBQWEsTUFBTSxPQUFPLE9BQU87QUFBQSxNQUM3QyxVQUFVO0FBQUEsTUFDVixLQUFLO0FBQUEsSUFDUCxDQUFDO0FBQUEsRUFDSDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9PcGVyYXRpb25FZGl0b3IudHN4P2M4YzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzLCBjeCB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IERyYWdnYWJsZSB9IGZyb20gJ3JlYWN0LWJlYXV0aWZ1bC1kbmQnO1xuXG5pbXBvcnQgeyBEYXRhU291cmNlQXBpLCBHcmFmYW5hVGhlbWUyIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBTdGFjayB9IGZyb20gJ0BncmFmYW5hL2V4cGVyaW1lbnRhbCc7XG5pbXBvcnQgeyBCdXR0b24sIEljb24sIElubGluZUZpZWxkLCBUb29sdGlwLCB1c2VUaGVtZTIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBpc0NvbmZsaWN0aW5nRmlsdGVyIH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9sb2tpL3F1ZXJ5YnVpbGRlci9vcGVyYXRpb25VdGlscyc7XG5pbXBvcnQgeyBMb2tpT3BlcmF0aW9uSWQgfSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvcXVlcnlidWlsZGVyL3R5cGVzJztcblxuaW1wb3J0IHsgT3BlcmF0aW9uSGVhZGVyIH0gZnJvbSAnLi9PcGVyYXRpb25IZWFkZXInO1xuaW1wb3J0IHsgZ2V0T3BlcmF0aW9uUGFyYW1FZGl0b3IgfSBmcm9tICcuL09wZXJhdGlvblBhcmFtRWRpdG9yJztcbmltcG9ydCB7IGdldE9wZXJhdGlvblBhcmFtSWQgfSBmcm9tICcuL29wZXJhdGlvblV0aWxzJztcbmltcG9ydCB7XG4gIFF1ZXJ5QnVpbGRlck9wZXJhdGlvbixcbiAgUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmLFxuICBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbURlZixcbiAgUXVlcnlCdWlsZGVyT3BlcmF0aW9uUGFyYW1WYWx1ZSxcbiAgVmlzdWFsUXVlcnlNb2RlbGxlcixcbn0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICBvcGVyYXRpb246IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbjtcbiAgaW5kZXg6IG51bWJlcjtcbiAgcXVlcnk6IGFueTtcbiAgZGF0YXNvdXJjZTogRGF0YVNvdXJjZUFwaTtcbiAgcXVlcnlNb2RlbGxlcjogVmlzdWFsUXVlcnlNb2RlbGxlcjtcbiAgb25DaGFuZ2U6IChpbmRleDogbnVtYmVyLCB1cGRhdGU6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbikgPT4gdm9pZDtcbiAgb25SZW1vdmU6IChpbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICBvblJ1blF1ZXJ5OiAoKSA9PiB2b2lkO1xuICBmbGFzaD86IGJvb2xlYW47XG4gIGhpZ2hsaWdodD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBPcGVyYXRpb25FZGl0b3Ioe1xuICBvcGVyYXRpb24sXG4gIGluZGV4LFxuICBvblJlbW92ZSxcbiAgb25DaGFuZ2UsXG4gIG9uUnVuUXVlcnksXG4gIHF1ZXJ5TW9kZWxsZXIsXG4gIHF1ZXJ5LFxuICBkYXRhc291cmNlLFxuICBmbGFzaCxcbiAgaGlnaGxpZ2h0LFxufTogUHJvcHMpIHtcbiAgY29uc3QgZGVmID0gcXVlcnlNb2RlbGxlci5nZXRPcGVyYXRpb25EZWYob3BlcmF0aW9uLmlkKTtcbiAgY29uc3Qgc2hvdWxkRmxhc2ggPSB1c2VGbGFzaChmbGFzaCk7XG5cbiAgY29uc3QgaXNDb25mbGljdGluZyA9XG4gICAgb3BlcmF0aW9uLmlkID09PSBMb2tpT3BlcmF0aW9uSWQuTGFiZWxGaWx0ZXIgJiYgaXNDb25mbGljdGluZ0ZpbHRlcihvcGVyYXRpb24sIHF1ZXJ5Lm9wZXJhdGlvbnMpO1xuXG4gIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUyKCk7XG4gIGNvbnN0IHN0eWxlcyA9IGdldFN0eWxlcyh0aGVtZSwgaXNDb25mbGljdGluZyk7XG5cbiAgaWYgKCFkZWYpIHtcbiAgICByZXR1cm4gPHNwYW4+T3BlcmF0aW9uIHtvcGVyYXRpb24uaWR9IG5vdCBmb3VuZDwvc3Bhbj47XG4gIH1cblxuICBjb25zdCBvblBhcmFtVmFsdWVDaGFuZ2VkID0gKHBhcmFtSWR4OiBudW1iZXIsIHZhbHVlOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbVZhbHVlKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb24gPSB7IC4uLm9wZXJhdGlvbiwgcGFyYW1zOiBbLi4ub3BlcmF0aW9uLnBhcmFtc10gfTtcbiAgICB1cGRhdGUucGFyYW1zW3BhcmFtSWR4XSA9IHZhbHVlO1xuICAgIGNhbGxQYXJhbUNoYW5nZWRUaGVuT25DaGFuZ2UoZGVmLCB1cGRhdGUsIGluZGV4LCBwYXJhbUlkeCwgb25DaGFuZ2UpO1xuICB9O1xuXG4gIGNvbnN0IG9uQWRkUmVzdFBhcmFtID0gKCkgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZTogUXVlcnlCdWlsZGVyT3BlcmF0aW9uID0geyAuLi5vcGVyYXRpb24sIHBhcmFtczogWy4uLm9wZXJhdGlvbi5wYXJhbXMsICcnXSB9O1xuICAgIGNhbGxQYXJhbUNoYW5nZWRUaGVuT25DaGFuZ2UoZGVmLCB1cGRhdGUsIGluZGV4LCBvcGVyYXRpb24ucGFyYW1zLmxlbmd0aCwgb25DaGFuZ2UpO1xuICB9O1xuXG4gIGNvbnN0IG9uUmVtb3ZlUmVzdFBhcmFtID0gKHBhcmFtSWR4OiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB1cGRhdGU6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbiA9IHtcbiAgICAgIC4uLm9wZXJhdGlvbixcbiAgICAgIHBhcmFtczogWy4uLm9wZXJhdGlvbi5wYXJhbXMuc2xpY2UoMCwgcGFyYW1JZHgpLCAuLi5vcGVyYXRpb24ucGFyYW1zLnNsaWNlKHBhcmFtSWR4ICsgMSldLFxuICAgIH07XG4gICAgY2FsbFBhcmFtQ2hhbmdlZFRoZW5PbkNoYW5nZShkZWYsIHVwZGF0ZSwgaW5kZXgsIHBhcmFtSWR4LCBvbkNoYW5nZSk7XG4gIH07XG5cbiAgY29uc3Qgb3BlcmF0aW9uRWxlbWVudHM6IFJlYWN0LlJlYWN0Tm9kZVtdID0gW107XG5cbiAgZm9yIChsZXQgcGFyYW1JbmRleCA9IDA7IHBhcmFtSW5kZXggPCBvcGVyYXRpb24ucGFyYW1zLmxlbmd0aDsgcGFyYW1JbmRleCsrKSB7XG4gICAgY29uc3QgcGFyYW1EZWYgPSBkZWYucGFyYW1zW01hdGgubWluKGRlZi5wYXJhbXMubGVuZ3RoIC0gMSwgcGFyYW1JbmRleCldO1xuICAgIGNvbnN0IEVkaXRvciA9IGdldE9wZXJhdGlvblBhcmFtRWRpdG9yKHBhcmFtRGVmKTtcblxuICAgIG9wZXJhdGlvbkVsZW1lbnRzLnB1c2goXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnBhcmFtUm93fSBrZXk9e2Ake3BhcmFtSW5kZXh9LTFgfT5cbiAgICAgICAgeyFwYXJhbURlZi5oaWRlTmFtZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5wYXJhbU5hbWV9PlxuICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e2dldE9wZXJhdGlvblBhcmFtSWQoaW5kZXgsIHBhcmFtSW5kZXgpfT57cGFyYW1EZWYubmFtZX08L2xhYmVsPlxuICAgICAgICAgICAge3BhcmFtRGVmLmRlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PVwidG9wXCIgY29udGVudD17cGFyYW1EZWYuZGVzY3JpcHRpb259IHRoZW1lPVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJpbmZvLWNpcmNsZVwiIHNpemU9XCJzbVwiIGNsYXNzTmFtZT17c3R5bGVzLmluZm9JY29ufSAvPlxuICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnBhcmFtVmFsdWV9PlxuICAgICAgICAgIDxTdGFjayBnYXA9ezAuNX0gZGlyZWN0aW9uPVwicm93XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHdyYXA9e2ZhbHNlfT5cbiAgICAgICAgICAgIDxFZGl0b3JcbiAgICAgICAgICAgICAgaW5kZXg9e3BhcmFtSW5kZXh9XG4gICAgICAgICAgICAgIHBhcmFtRGVmPXtwYXJhbURlZn1cbiAgICAgICAgICAgICAgdmFsdWU9e29wZXJhdGlvbi5wYXJhbXNbcGFyYW1JbmRleF19XG4gICAgICAgICAgICAgIG9wZXJhdGlvbj17b3BlcmF0aW9ufVxuICAgICAgICAgICAgICBvcGVyYXRpb25JbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtvblBhcmFtVmFsdWVDaGFuZ2VkfVxuICAgICAgICAgICAgICBvblJ1blF1ZXJ5PXtvblJ1blF1ZXJ5fVxuICAgICAgICAgICAgICBxdWVyeT17cXVlcnl9XG4gICAgICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge3BhcmFtRGVmLnJlc3RQYXJhbSAmJiAob3BlcmF0aW9uLnBhcmFtcy5sZW5ndGggPiBkZWYucGFyYW1zLmxlbmd0aCB8fCBwYXJhbURlZi5vcHRpb25hbCkgJiYgKFxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BvcGVyYXRpb25zLiR7aW5kZXh9LnJlbW92ZS1yZXN0LXBhcmFtYH1cbiAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgIGZpbGw9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBpY29uPVwidGltZXNcIlxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgIHRpdGxlPXtgUmVtb3ZlICR7cGFyYW1EZWYubmFtZX1gfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUmVtb3ZlUmVzdFBhcmFtKHBhcmFtSW5kZXgpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L1N0YWNrPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICAvLyBIYW5kbGUgYWRkaW5nIGJ1dHRvbiBmb3IgcmVzdCBwYXJhbXNcbiAgbGV0IHJlc3RQYXJhbTogUmVhY3QuUmVhY3ROb2RlIHwgdW5kZWZpbmVkO1xuICBpZiAoZGVmLnBhcmFtcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgbGFzdFBhcmFtRGVmID0gZGVmLnBhcmFtc1tkZWYucGFyYW1zLmxlbmd0aCAtIDFdO1xuICAgIGlmIChsYXN0UGFyYW1EZWYucmVzdFBhcmFtKSB7XG4gICAgICByZXN0UGFyYW0gPSByZW5kZXJBZGRSZXN0UGFyYW1CdXR0b24obGFzdFBhcmFtRGVmLCBvbkFkZFJlc3RQYXJhbSwgaW5kZXgsIG9wZXJhdGlvbi5wYXJhbXMubGVuZ3RoLCBzdHlsZXMpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGlzSW52YWxpZCA9IChpc0RyYWdnaW5nOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGlzRHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzQ29uZmxpY3RpbmcgPyB0cnVlIDogdW5kZWZpbmVkO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPERyYWdnYWJsZSBkcmFnZ2FibGVJZD17YG9wZXJhdGlvbi0ke2luZGV4fWB9IGluZGV4PXtpbmRleH0+XG4gICAgICB7KHByb3ZpZGVkLCBzbmFwc2hvdCkgPT4gKFxuICAgICAgICA8SW5saW5lRmllbGRcbiAgICAgICAgICBlcnJvcj17J1lvdSBoYXZlIGNvbmZsaWN0aW5nIGxhYmVsIGZpbHRlcnMnfVxuICAgICAgICAgIGludmFsaWQ9e2lzSW52YWxpZChzbmFwc2hvdC5pc0RyYWdnaW5nKX1cbiAgICAgICAgICBjbGFzc05hbWU9e2N4KHN0eWxlcy5lcnJvciwgc3R5bGVzLmNhcmRXcmFwcGVyKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goXG4gICAgICAgICAgICAgIHN0eWxlcy5jYXJkLFxuICAgICAgICAgICAgICAoc2hvdWxkRmxhc2ggfHwgaGlnaGxpZ2h0KSAmJiBzdHlsZXMuY2FyZEhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgaXNDb25mbGljdGluZyAmJiBzdHlsZXMuY2FyZEVycm9yXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgcmVmPXtwcm92aWRlZC5pbm5lclJlZn1cbiAgICAgICAgICAgIHsuLi5wcm92aWRlZC5kcmFnZ2FibGVQcm9wc31cbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgb3BlcmF0aW9ucy4ke2luZGV4fS53cmFwcGVyYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8T3BlcmF0aW9uSGVhZGVyXG4gICAgICAgICAgICAgIG9wZXJhdGlvbj17b3BlcmF0aW9ufVxuICAgICAgICAgICAgICBkcmFnSGFuZGxlUHJvcHM9e3Byb3ZpZGVkLmRyYWdIYW5kbGVQcm9wc31cbiAgICAgICAgICAgICAgZGVmPXtkZWZ9XG4gICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbW92ZT17b25SZW1vdmV9XG4gICAgICAgICAgICAgIHF1ZXJ5TW9kZWxsZXI9e3F1ZXJ5TW9kZWxsZXJ9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ib2R5fT57b3BlcmF0aW9uRWxlbWVudHN9PC9kaXY+XG4gICAgICAgICAgICB7cmVzdFBhcmFtfVxuICAgICAgICAgICAge2luZGV4IDwgcXVlcnkub3BlcmF0aW9ucy5sZW5ndGggLSAxICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5hcnJvd30+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5hcnJvd0xpbmV9IC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5hcnJvd0Fycm93fSAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvSW5saW5lRmllbGQ+XG4gICAgICApfVxuICAgIDwvRHJhZ2dhYmxlPlxuICApO1xufVxuXG4vKipcbiAqIFdoZW4gZmxhc2ggaXMgc3dpdGNoZWQgb24gbWFrZXMgc3VyZSBpdCBpcyBzd2l0Y2hlZCBvZiByaWdodCBhd2F5LCBzbyB3ZSBqdXN0IGZsYXNoIHRoZSBoaWdobGlnaHQgYW5kIHRoZW4gZmFkZVxuICogb3V0LlxuICogQHBhcmFtIGZsYXNoXG4gKi9cbmZ1bmN0aW9uIHVzZUZsYXNoKGZsYXNoPzogYm9vbGVhbikge1xuICBjb25zdCBba2VlcEZsYXNoLCBzZXRLZWVwRmxhc2hdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xuICAgIGlmIChmbGFzaCkge1xuICAgICAgdCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRLZWVwRmxhc2goZmFsc2UpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEtlZXBGbGFzaCh0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHQpO1xuICB9LCBbZmxhc2hdKTtcblxuICByZXR1cm4ga2VlcEZsYXNoICYmIGZsYXNoO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBZGRSZXN0UGFyYW1CdXR0b24oXG4gIHBhcmFtRGVmOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbURlZixcbiAgb25BZGRSZXN0UGFyYW06ICgpID0+IHZvaWQsXG4gIG9wZXJhdGlvbkluZGV4OiBudW1iZXIsXG4gIHBhcmFtSW5kZXg6IG51bWJlcixcbiAgc3R5bGVzOiBPcGVyYXRpb25FZGl0b3JTdHlsZXNcbikge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucmVzdFBhcmFtfSBrZXk9e2Ake3BhcmFtSW5kZXh9LTJgfT5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgaWNvbj1cInBsdXNcIlxuICAgICAgICB0aXRsZT17YEFkZCAke3BhcmFtRGVmLm5hbWV9YH1cbiAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgIG9uQ2xpY2s9e29uQWRkUmVzdFBhcmFtfVxuICAgICAgICBkYXRhLXRlc3RpZD17YG9wZXJhdGlvbnMuJHtvcGVyYXRpb25JbmRleH0uYWRkLXJlc3QtcGFyYW1gfVxuICAgICAgPlxuICAgICAgICB7cGFyYW1EZWYubmFtZX1cbiAgICAgIDwvQnV0dG9uPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5mdW5jdGlvbiBjYWxsUGFyYW1DaGFuZ2VkVGhlbk9uQ2hhbmdlKFxuICBkZWY6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZixcbiAgb3BlcmF0aW9uOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb24sXG4gIG9wZXJhdGlvbkluZGV4OiBudW1iZXIsXG4gIHBhcmFtSW5kZXg6IG51bWJlcixcbiAgb25DaGFuZ2U6IChpbmRleDogbnVtYmVyLCB1cGRhdGU6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbikgPT4gdm9pZFxuKSB7XG4gIGlmIChkZWYucGFyYW1DaGFuZ2VkSGFuZGxlcikge1xuICAgIG9uQ2hhbmdlKG9wZXJhdGlvbkluZGV4LCBkZWYucGFyYW1DaGFuZ2VkSGFuZGxlcihwYXJhbUluZGV4LCBvcGVyYXRpb24sIGRlZikpO1xuICB9IGVsc2Uge1xuICAgIG9uQ2hhbmdlKG9wZXJhdGlvbkluZGV4LCBvcGVyYXRpb24pO1xuICB9XG59XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMiwgaXNDb25mbGljdGluZzogYm9vbGVhbikgPT4ge1xuICByZXR1cm4ge1xuICAgIGNhcmRXcmFwcGVyOiBjc3Moe1xuICAgICAgYWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuICAgIH0pLFxuICAgIGVycm9yOiBjc3Moe1xuICAgICAgbWFyZ2luQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgIH0pLFxuICAgIGNhcmQ6IGNzcyh7XG4gICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5wcmltYXJ5LFxuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlci5tZWRpdW19YCxcbiAgICAgIGN1cnNvcjogJ2dyYWInLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5zaGFwZS5ib3JkZXJSYWRpdXMoMSksXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHRyYW5zaXRpb246ICdhbGwgMC41cyBlYXNlLWluIDBzJyxcbiAgICAgIGhlaWdodDogaXNDb25mbGljdGluZyA/ICdhdXRvJyA6ICcxMDAlJyxcbiAgICB9KSxcbiAgICBjYXJkRXJyb3I6IGNzcyh7XG4gICAgICBib3hTaGFkb3c6IGAwcHggMHB4IDRweCAwcHggJHt0aGVtZS5jb2xvcnMud2FybmluZy5tYWlufWAsXG4gICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMud2FybmluZy5tYWlufWAsXG4gICAgfSksXG4gICAgY2FyZEhpZ2hsaWdodDogY3NzKHtcbiAgICAgIGJveFNoYWRvdzogYDBweCAwcHggNHB4IDBweCAke3RoZW1lLmNvbG9ycy5wcmltYXJ5LmJvcmRlcn1gLFxuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLnByaW1hcnkuYm9yZGVyfWAsXG4gICAgfSksXG4gICAgaW5mb0ljb246IGNzcyh7XG4gICAgICBtYXJnaW5MZWZ0OiB0aGVtZS5zcGFjaW5nKDAuNSksXG4gICAgICBjb2xvcjogdGhlbWUuY29sb3JzLnRleHQuc2Vjb25kYXJ5LFxuICAgICAgJzpob3Zlcic6IHtcbiAgICAgICAgY29sb3I6IHRoZW1lLmNvbG9ycy50ZXh0LnByaW1hcnksXG4gICAgICB9LFxuICAgIH0pLFxuICAgIGJvZHk6IGNzcyh7XG4gICAgICBtYXJnaW46IHRoZW1lLnNwYWNpbmcoMSwgMSwgMC41LCAxKSxcbiAgICAgIGRpc3BsYXk6ICd0YWJsZScsXG4gICAgfSksXG4gICAgcGFyYW1Sb3c6IGNzcyh7XG4gICAgICBsYWJlbDogJ3BhcmFtUm93JyxcbiAgICAgIGRpc3BsYXk6ICd0YWJsZS1yb3cnLFxuICAgICAgdmVydGljYWxBbGlnbjogJ21pZGRsZScsXG4gICAgfSksXG4gICAgcGFyYW1OYW1lOiBjc3Moe1xuICAgICAgZGlzcGxheTogJ3RhYmxlLWNlbGwnLFxuICAgICAgcGFkZGluZzogdGhlbWUuc3BhY2luZygwLCAxLCAwLCAwKSxcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmJvZHlTbWFsbC5mb250U2l6ZSxcbiAgICAgIGZvbnRXZWlnaHQ6IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodE1lZGl1bSxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxuICAgICAgaGVpZ2h0OiAnMzJweCcsXG4gICAgfSksXG4gICAgcGFyYW1WYWx1ZTogY3NzKHtcbiAgICAgIGxhYmVsOiAncGFyYW1WYWx1ZScsXG4gICAgICBkaXNwbGF5OiAndGFibGUtY2VsbCcsXG4gICAgICB2ZXJ0aWNhbEFsaWduOiAnbWlkZGxlJyxcbiAgICB9KSxcbiAgICByZXN0UGFyYW06IGNzcyh7XG4gICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nKDAsIDEsIDEsIDEpLFxuICAgIH0pLFxuICAgIGFycm93OiBjc3Moe1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICB0b3A6ICcwJyxcbiAgICAgIHJpZ2h0OiAnLTE4cHgnLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIH0pLFxuICAgIGFycm93TGluZTogY3NzKHtcbiAgICAgIGhlaWdodDogJzJweCcsXG4gICAgICB3aWR0aDogJzhweCcsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLmNvbG9ycy5ib3JkZXIuc3Ryb25nLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0b3A6ICcxNHB4JyxcbiAgICB9KSxcbiAgICBhcnJvd0Fycm93OiBjc3Moe1xuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDAsXG4gICAgICBib3JkZXJUb3A6IGA1cHggc29saWQgdHJhbnNwYXJlbnRgLFxuICAgICAgYm9yZGVyQm90dG9tOiBgNXB4IHNvbGlkIHRyYW5zcGFyZW50YCxcbiAgICAgIGJvcmRlckxlZnQ6IGA3cHggc29saWQgJHt0aGVtZS5jb2xvcnMuYm9yZGVyLnN0cm9uZ31gLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0b3A6ICcxMHB4JyxcbiAgICB9KSxcbiAgfTtcbn07XG5cbnR5cGUgT3BlcmF0aW9uRWRpdG9yU3R5bGVzID0gUmV0dXJuVHlwZTx0eXBlb2YgZ2V0U3R5bGVzPjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationHeader.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperationHeader: () => (/* binding */ OperationHeader)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/FlexItem.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _OperationInfoButton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationInfoButton.tsx\");\n\n\n\n\n\n\nconst OperationHeader = react__WEBPACK_IMPORTED_MODULE_1___default().memo(\n  ({ operation, def, index, onChange, onRemove, queryModeller, dragHandleProps }) => {\n    const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useStyles2)(getStyles);\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const onToggleSwitcher = () => {\n      if (state.isOpen) {\n        setState({ ...state, isOpen: false });\n      } else {\n        const alternatives = queryModeller.getAlternativeOperations(def.alternativesKey).map((alt) => ({ label: alt.name, value: alt }));\n        setState({ isOpen: true, alternatives });\n      }\n    };\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.header }, !state.isOpen && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { ...dragHandleProps }, def.name ?? def.id), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_4__.FlexItem, { grow: 1 }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: `${styles.operationHeaderButtons} operation-header-show-on-hover` }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Button,\n      {\n        icon: \"angle-down\",\n        size: \"sm\",\n        onClick: onToggleSwitcher,\n        fill: \"text\",\n        variant: \"secondary\",\n        title: \"Click to view alternative operations\"\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_OperationInfoButton__WEBPACK_IMPORTED_MODULE_2__.OperationInfoButton, { def, operation }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Button,\n      {\n        icon: \"times\",\n        size: \"sm\",\n        onClick: () => onRemove(index),\n        fill: \"text\",\n        variant: \"secondary\",\n        title: \"Remove operation\"\n      }\n    ))), state.isOpen && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.selectWrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Select,\n      {\n        autoFocus: true,\n        openMenuOnFocus: true,\n        placeholder: \"Replace with\",\n        options: state.alternatives,\n        isOpen: true,\n        onCloseMenu: onToggleSwitcher,\n        onChange: (value) => {\n          if (value.value) {\n            const newDef = queryModeller.getOperationDef(value.value.id);\n            const newParams = [...newDef.defaultParams];\n            for (let i = 0; i < Math.min(operation.params.length, newParams.length); i++) {\n              if (newDef.params[i].type === def.params[i].type) {\n                newParams[i] = operation.params[i];\n              }\n            }\n            const changedOp = { ...operation, params: newParams, id: value.value.id };\n            onChange(index, def.changeTypeHandler ? def.changeTypeHandler(changedOp, newDef) : changedOp);\n          }\n        }\n      }\n    )));\n  }\n);\nOperationHeader.displayName = \"OperationHeader\";\nconst getStyles = (theme) => {\n  return {\n    header: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      borderBottom: `1px solid ${theme.colors.border.medium}`,\n      padding: theme.spacing(0.5, 0.5, 0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\"\n    }),\n    operationHeaderButtons: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      opacity: 1\n    }),\n    selectWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      paddingRight: theme.spacing(2)\n    })\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uSGVhZGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ1k7QUFJUDtBQUNrQjtBQUVQO0FBa0I3QixNQUFNLGtCQUFrQixpREFBVTtBQUFKLEVBQ25DLENBQUMsRUFBRSxXQUFXLEtBQUssT0FBTyxVQUFVLFVBQVUsZUFBZSxnQkFBZ0IsTUFBTTtBQUNqRixVQUFNLFNBQVMsdURBQVUsQ0FBQyxTQUFTO0FBQ25DLFVBQU0sQ0FBQyxPQUFPLFFBQVEsSUFBSSwrQ0FBUSxDQUFRLENBQUMsQ0FBQztBQUU1QyxVQUFNLG1CQUFtQixNQUFNO0FBQzdCLFVBQUksTUFBTSxRQUFRO0FBQ2hCLGlCQUFTLEVBQUUsR0FBRyxPQUFPLFFBQVEsTUFBTSxDQUFDO0FBQUEsTUFDdEMsT0FBTztBQUNMLGNBQU0sZUFBZSxjQUNsQix5QkFBeUIsSUFBSSxlQUFnQixFQUM3QyxJQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sSUFBSSxNQUFNLE9BQU8sSUFBSSxFQUFFO0FBQ2pELGlCQUFTLEVBQUUsUUFBUSxNQUFNLGFBQWEsQ0FBQztBQUFBLE1BQ3pDO0FBQUEsSUFDRjtBQUVBLFdBQ0UsMkVBQUMsU0FBSSxXQUFXLE9BQU8sVUFDcEIsQ0FBQyxNQUFNLFVBQ04sMElBQ0UsMkVBQUMsU0FBSyxHQUFHLG1CQUFrQixJQUFJLFFBQVEsSUFBSSxFQUFHLEdBQzlDLDJFQUFDLDJEQUFRLElBQUMsTUFBTSxHQUFHLEdBQ25CLDJFQUFDLFNBQUksV0FBVyxHQUFHLE9BQU8sMkRBQ3hCO0FBQUEsTUFBQywrQ0FBTTtBQUFOO0FBQUEsUUFDQyxNQUFLO0FBQUEsUUFDTCxNQUFLO0FBQUEsUUFDTCxTQUFTO0FBQUEsUUFDVCxNQUFLO0FBQUEsUUFDTCxTQUFRO0FBQUEsUUFDUixPQUFNO0FBQUE7QUFBQSxJQUNSLEdBQ0EsMkVBQUMscUVBQW1CLElBQUMsS0FBVSxXQUFzQixHQUNyRDtBQUFBLE1BQUMsK0NBQU07QUFBTjtBQUFBLFFBQ0MsTUFBSztBQUFBLFFBQ0wsTUFBSztBQUFBLFFBQ0wsU0FBUyxNQUFNLFNBQVMsS0FBSztBQUFBLFFBQzdCLE1BQUs7QUFBQSxRQUNMLFNBQVE7QUFBQSxRQUNSLE9BQU07QUFBQTtBQUFBLElBQ1IsQ0FDRixDQUNGLEdBRUQsTUFBTSxVQUNMLDJFQUFDLFNBQUksV0FBVyxPQUFPLGlCQUNyQjtBQUFBLE1BQUMsK0NBQU07QUFBTjtBQUFBLFFBQ0MsV0FBUztBQUFBLFFBQ1QsaUJBQWU7QUFBQSxRQUNmLGFBQVk7QUFBQSxRQUNaLFNBQVMsTUFBTTtBQUFBLFFBQ2YsUUFBUTtBQUFBLFFBQ1IsYUFBYTtBQUFBLFFBQ2IsVUFBVSxDQUFDLFVBQVU7QUFDbkIsY0FBSSxNQUFNLE9BQU87QUFFZixrQkFBTSxTQUFTLGNBQWMsZ0JBQWdCLE1BQU0sTUFBTSxFQUFFO0FBRzNELGtCQUFNLFlBQVksQ0FBQyxHQUFHLE9BQU8sYUFBYTtBQUMxQyxxQkFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLElBQUksVUFBVSxPQUFPLFFBQVEsVUFBVSxNQUFNLEdBQUcsS0FBSztBQUM1RSxrQkFBSSxPQUFPLE9BQU8sQ0FBQyxFQUFFLFNBQVMsSUFBSSxPQUFPLENBQUMsRUFBRSxNQUFNO0FBQ2hELDBCQUFVLENBQUMsSUFBSSxVQUFVLE9BQU8sQ0FBQztBQUFBLGNBQ25DO0FBQUEsWUFDRjtBQUVBLGtCQUFNLFlBQVksRUFBRSxHQUFHLFdBQVcsUUFBUSxXQUFXLElBQUksTUFBTSxNQUFNLEdBQUc7QUFDeEUscUJBQVMsT0FBTyxJQUFJLG9CQUFvQixJQUFJLGtCQUFrQixXQUFXLE1BQU0sSUFBSSxTQUFTO0FBQUEsVUFDOUY7QUFBQSxRQUNGO0FBQUE7QUFBQSxJQUNGLENBQ0YsQ0FFSjtBQUFBLEVBRUo7QUFDRjtBQUVBLGdCQUFnQixjQUFjO0FBRTlCLE1BQU0sWUFBWSxDQUFDLFVBQXlCO0FBQzFDLFNBQU87QUFBQSxJQUNMLFFBQVEsaURBQUcsQ0FBQztBQUFBLE1BQ1YsY0FBYyxhQUFhLE1BQU0sT0FBTyxPQUFPO0FBQUEsTUFDL0MsU0FBUyxNQUFNLFFBQVEsS0FBSyxLQUFLLEtBQUssQ0FBQztBQUFBLE1BQ3ZDLFNBQVM7QUFBQSxNQUNULFlBQVk7QUFBQSxJQUNkLENBQUM7QUFBQSxJQUNELHdCQUF3QixpREFBRyxDQUFDO0FBQUEsTUFDMUIsU0FBUztBQUFBLElBQ1gsQ0FBQztBQUFBLElBQ0QsZUFBZSxpREFBRyxDQUFDO0FBQUEsTUFDakIsY0FBYyxNQUFNLFFBQVEsQ0FBQztBQUFBLElBQy9CLENBQUM7QUFBQSxFQUNIO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL09wZXJhdGlvbkhlYWRlci50c3g/MTZjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRHJhZ2dhYmxlUHJvdmlkZWQgfSBmcm9tICdyZWFjdC1iZWF1dGlmdWwtZG5kJztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiwgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBGbGV4SXRlbSB9IGZyb20gJ0BncmFmYW5hL2V4cGVyaW1lbnRhbCc7XG5pbXBvcnQgeyBCdXR0b24sIFNlbGVjdCwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgT3BlcmF0aW9uSW5mb0J1dHRvbiB9IGZyb20gJy4vT3BlcmF0aW9uSW5mb0J1dHRvbic7XG5pbXBvcnQgeyBWaXN1YWxRdWVyeU1vZGVsbGVyLCBRdWVyeUJ1aWxkZXJPcGVyYXRpb24sIFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZiB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcbiAgb3BlcmF0aW9uOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb247XG4gIGRlZjogUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmO1xuICBpbmRleDogbnVtYmVyO1xuICBxdWVyeU1vZGVsbGVyOiBWaXN1YWxRdWVyeU1vZGVsbGVyO1xuICBkcmFnSGFuZGxlUHJvcHM/OiBEcmFnZ2FibGVQcm92aWRlZFsnZHJhZ0hhbmRsZVByb3BzJ107XG4gIG9uQ2hhbmdlOiAoaW5kZXg6IG51bWJlciwgdXBkYXRlOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb24pID0+IHZvaWQ7XG4gIG9uUmVtb3ZlOiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgaXNPcGVuPzogYm9vbGVhbjtcbiAgYWx0ZXJuYXRpdmVzPzogQXJyYXk8U2VsZWN0YWJsZVZhbHVlPFF1ZXJ5QnVpbGRlck9wZXJhdGlvbkRlZj4+O1xufVxuXG5leHBvcnQgY29uc3QgT3BlcmF0aW9uSGVhZGVyID0gUmVhY3QubWVtbzxQcm9wcz4oXG4gICh7IG9wZXJhdGlvbiwgZGVmLCBpbmRleCwgb25DaGFuZ2UsIG9uUmVtb3ZlLCBxdWVyeU1vZGVsbGVyLCBkcmFnSGFuZGxlUHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcbiAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPFN0YXRlPih7fSk7XG5cbiAgICBjb25zdCBvblRvZ2dsZVN3aXRjaGVyID0gKCkgPT4ge1xuICAgICAgaWYgKHN0YXRlLmlzT3Blbikge1xuICAgICAgICBzZXRTdGF0ZSh7IC4uLnN0YXRlLCBpc09wZW46IGZhbHNlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYWx0ZXJuYXRpdmVzID0gcXVlcnlNb2RlbGxlclxuICAgICAgICAgIC5nZXRBbHRlcm5hdGl2ZU9wZXJhdGlvbnMoZGVmLmFsdGVybmF0aXZlc0tleSEpXG4gICAgICAgICAgLm1hcCgoYWx0KSA9PiAoeyBsYWJlbDogYWx0Lm5hbWUsIHZhbHVlOiBhbHQgfSkpO1xuICAgICAgICBzZXRTdGF0ZSh7IGlzT3BlbjogdHJ1ZSwgYWx0ZXJuYXRpdmVzIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5oZWFkZXJ9PlxuICAgICAgICB7IXN0YXRlLmlzT3BlbiAmJiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxkaXYgey4uLmRyYWdIYW5kbGVQcm9wc30+e2RlZi5uYW1lID8/IGRlZi5pZH08L2Rpdj5cbiAgICAgICAgICAgIDxGbGV4SXRlbSBncm93PXsxfSAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3N0eWxlcy5vcGVyYXRpb25IZWFkZXJCdXR0b25zfSBvcGVyYXRpb24taGVhZGVyLXNob3ctb24taG92ZXJgfT5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGljb249XCJhbmdsZS1kb3duXCJcbiAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uVG9nZ2xlU3dpdGNoZXJ9XG4gICAgICAgICAgICAgICAgZmlsbD1cInRleHRcIlxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgIHRpdGxlPVwiQ2xpY2sgdG8gdmlldyBhbHRlcm5hdGl2ZSBvcGVyYXRpb25zXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPE9wZXJhdGlvbkluZm9CdXR0b24gZGVmPXtkZWZ9IG9wZXJhdGlvbj17b3BlcmF0aW9ufSAvPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgaWNvbj1cInRpbWVzXCJcbiAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUmVtb3ZlKGluZGV4KX1cbiAgICAgICAgICAgICAgICBmaWxsPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmUgb3BlcmF0aW9uXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgICB7c3RhdGUuaXNPcGVuICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnNlbGVjdFdyYXBwZXJ9PlxuICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgICAgICAgb3Blbk1lbnVPbkZvY3VzXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUmVwbGFjZSB3aXRoXCJcbiAgICAgICAgICAgICAgb3B0aW9ucz17c3RhdGUuYWx0ZXJuYXRpdmVzfVxuICAgICAgICAgICAgICBpc09wZW49e3RydWV9XG4gICAgICAgICAgICAgIG9uQ2xvc2VNZW51PXtvblRvZ2dsZVN3aXRjaGVyfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBPcGVyYXRpb24gc2hvdWxkIGV4aXN0IGlmIGl0IGlzIHNlbGVjdGFibGVcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RlZiA9IHF1ZXJ5TW9kZWxsZXIuZ2V0T3BlcmF0aW9uRGVmKHZhbHVlLnZhbHVlLmlkKSE7XG5cbiAgICAgICAgICAgICAgICAgIC8vIGNvcHkgZGVmYXVsdCBwYXJhbXMsIGFuZCBvdmVycmlkZSB3aXRoIGFsbCBjdXJyZW50IHBhcmFtc1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGFyYW1zID0gWy4uLm5ld0RlZi5kZWZhdWx0UGFyYW1zXTtcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4ob3BlcmF0aW9uLnBhcmFtcy5sZW5ndGgsIG5ld1BhcmFtcy5sZW5ndGgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0RlZi5wYXJhbXNbaV0udHlwZSA9PT0gZGVmLnBhcmFtc1tpXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbmV3UGFyYW1zW2ldID0gb3BlcmF0aW9uLnBhcmFtc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VkT3AgPSB7IC4uLm9wZXJhdGlvbiwgcGFyYW1zOiBuZXdQYXJhbXMsIGlkOiB2YWx1ZS52YWx1ZS5pZCB9O1xuICAgICAgICAgICAgICAgICAgb25DaGFuZ2UoaW5kZXgsIGRlZi5jaGFuZ2VUeXBlSGFuZGxlciA/IGRlZi5jaGFuZ2VUeXBlSGFuZGxlcihjaGFuZ2VkT3AsIG5ld0RlZikgOiBjaGFuZ2VkT3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG4pO1xuXG5PcGVyYXRpb25IZWFkZXIuZGlzcGxheU5hbWUgPSAnT3BlcmF0aW9uSGVhZGVyJztcblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaGVhZGVyOiBjc3Moe1xuICAgICAgYm9yZGVyQm90dG9tOiBgMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlci5tZWRpdW19YCxcbiAgICAgIHBhZGRpbmc6IHRoZW1lLnNwYWNpbmcoMC41LCAwLjUsIDAuNSwgMSksXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICB9KSxcbiAgICBvcGVyYXRpb25IZWFkZXJCdXR0b25zOiBjc3Moe1xuICAgICAgb3BhY2l0eTogMSxcbiAgICB9KSxcbiAgICBzZWxlY3RXcmFwcGVyOiBjc3Moe1xuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgIH0pLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationHeader.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationInfoButton.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperationInfoButton: () => (/* binding */ OperationInfoButton)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_popper_tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/react-popper-tooltip-virtual-09b5eebcd2/0/cache/react-popper-tooltip-npm-4.4.2-54ed1200c6-516988b925.zip/node_modules/react-popper-tooltip/dist/esm/react-popper-tooltip.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/text/markdown.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/FlexItem.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Portal/Portal.tsx\");\n\n\n\n\n\n\n\nconst OperationInfoButton = react__WEBPACK_IMPORTED_MODULE_1___default().memo(({ def, operation }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useStyles2)(getStyles);\n  const [show, setShow] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const { getTooltipProps, setTooltipRef, setTriggerRef, visible } = (0,react_popper_tooltip__WEBPACK_IMPORTED_MODULE_3__.usePopperTooltip)({\n    placement: \"top\",\n    visible: show,\n    offset: [0, 16],\n    onVisibleChange: setShow,\n    interactive: true,\n    trigger: [\"click\"]\n  });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Button,\n    {\n      title: \"Click to show description\",\n      ref: setTriggerRef,\n      icon: \"info-circle\",\n      size: \"sm\",\n      variant: \"secondary\",\n      fill: \"text\"\n    }\n  ), visible && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Portal, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { ref: setTooltipRef, ...getTooltipProps(), className: styles.docBox }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.docBoxHeader }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", null, def.renderer(operation, def, \"<expr>\")), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_6__.FlexItem, { grow: 1 }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Button,\n    {\n      icon: \"times\",\n      onClick: () => setShow(false),\n      fill: \"text\",\n      variant: \"secondary\",\n      title: \"Remove operation\"\n    }\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    \"div\",\n    {\n      className: styles.docBoxBody,\n      dangerouslySetInnerHTML: { __html: getOperationDocs(def, operation) }\n    }\n  ))));\n});\nOperationInfoButton.displayName = \"OperationDocs\";\nconst getStyles = (theme) => {\n  return {\n    docBox: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      overflow: \"hidden\",\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.strong}`,\n      boxShadow: theme.shadows.z3,\n      maxWidth: \"600px\",\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius(),\n      zIndex: theme.zIndex.tooltip\n    }),\n    docBoxHeader: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      fontSize: theme.typography.h5.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n      paddingBottom: theme.spacing(1),\n      display: \"flex\",\n      alignItems: \"center\"\n    }),\n    docBoxBody: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      // The markdown paragraph has a marginBottom this removes it\n      marginBottom: theme.spacing(-1),\n      color: theme.colors.text.secondary\n    }),\n    signature: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace\n    }),\n    dropdown: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      opacity: 0,\n      color: theme.colors.text.secondary\n    })\n  };\n};\nfunction getOperationDocs(def, op) {\n  return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.renderMarkdown)(def.explainHandler ? def.explainHandler(op, def) : def.documentation ?? \"no docs\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uSW5mb0J1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDWTtBQUNDO0FBRWE7QUFDckI7QUFDa0I7QUFTcEMsTUFBTSxzQkFBc0IsaURBQVUsQ0FBUSxDQUFDLEVBQUUsS0FBSyxVQUFVLE1BQU07QUFDM0UsUUFBTSxTQUFTLHVEQUFVLENBQUMsU0FBUztBQUNuQyxRQUFNLENBQUMsTUFBTSxPQUFPLElBQUksK0NBQVEsQ0FBQyxLQUFLO0FBQ3RDLFFBQU0sRUFBRSxpQkFBaUIsZUFBZSxlQUFlLFFBQVEsSUFBSSxzRUFBZ0IsQ0FBQztBQUFBLElBQ2xGLFdBQVc7QUFBQSxJQUNYLFNBQVM7QUFBQSxJQUNULFFBQVEsQ0FBQyxHQUFHLEVBQUU7QUFBQSxJQUNkLGlCQUFpQjtBQUFBLElBQ2pCLGFBQWE7QUFBQSxJQUNiLFNBQVMsQ0FBQyxPQUFPO0FBQUEsRUFDbkIsQ0FBQztBQUVELFNBQ0UsMElBQ0U7QUFBQSxJQUFDLCtDQUFNO0FBQU47QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxNQUNMLE1BQUs7QUFBQSxNQUNMLE1BQUs7QUFBQSxNQUNMLFNBQVE7QUFBQSxNQUNSLE1BQUs7QUFBQTtBQUFBLEVBQ1AsR0FDQyxXQUNDLDJFQUFDLCtDQUFNLFFBQ0wsMkVBQUMsU0FBSSxLQUFLLGVBQWdCLEdBQUcsZ0JBQWdCLEdBQUcsV0FBVyxPQUFPLFVBQ2hFLDJFQUFDLFNBQUksV0FBVyxPQUFPLGdCQUNyQiwyRUFBQyxjQUFNLElBQUksU0FBUyxXQUFXLEtBQUssUUFBUSxDQUFFLEdBQzlDLDJFQUFDLDJEQUFRLElBQUMsTUFBTSxHQUFHLEdBQ25CO0FBQUEsSUFBQywrQ0FBTTtBQUFOO0FBQUEsTUFDQyxNQUFLO0FBQUEsTUFDTCxTQUFTLE1BQU0sUUFBUSxLQUFLO0FBQUEsTUFDNUIsTUFBSztBQUFBLE1BQ0wsU0FBUTtBQUFBLE1BQ1IsT0FBTTtBQUFBO0FBQUEsRUFDUixDQUNGLEdBQ0E7QUFBQSxJQUFDO0FBQUE7QUFBQSxNQUNDLFdBQVcsT0FBTztBQUFBLE1BQ2xCLHlCQUF5QixFQUFFLFFBQVEsaUJBQWlCLEtBQUssU0FBUyxFQUFFO0FBQUE7QUFBQSxFQUNyRSxDQUNILENBQ0YsQ0FFSjtBQUVKLENBQUM7QUFFRCxvQkFBb0IsY0FBYztBQUVsQyxNQUFNLFlBQVksQ0FBQyxVQUF5QjtBQUMxQyxTQUFPO0FBQUEsSUFDTCxRQUFRLGlEQUFHLENBQUM7QUFBQSxNQUNWLFVBQVU7QUFBQSxNQUNWLFlBQVksTUFBTSxPQUFPLFdBQVc7QUFBQSxNQUNwQyxRQUFRLGFBQWEsTUFBTSxPQUFPLE9BQU87QUFBQSxNQUN6QyxXQUFXLE1BQU0sUUFBUTtBQUFBLE1BQ3pCLFVBQVU7QUFBQSxNQUNWLFNBQVMsTUFBTSxRQUFRLENBQUM7QUFBQSxNQUN4QixjQUFjLE1BQU0sTUFBTSxhQUFhO0FBQUEsTUFDdkMsUUFBUSxNQUFNLE9BQU87QUFBQSxJQUN2QixDQUFDO0FBQUEsSUFDRCxjQUFjLGlEQUFHLENBQUM7QUFBQSxNQUNoQixVQUFVLE1BQU0sV0FBVyxHQUFHO0FBQUEsTUFDOUIsWUFBWSxNQUFNLFdBQVc7QUFBQSxNQUM3QixlQUFlLE1BQU0sUUFBUSxDQUFDO0FBQUEsTUFDOUIsU0FBUztBQUFBLE1BQ1QsWUFBWTtBQUFBLElBQ2QsQ0FBQztBQUFBLElBQ0QsWUFBWSxpREFBRyxDQUFDO0FBQUE7QUFBQSxNQUVkLGNBQWMsTUFBTSxRQUFRLEVBQUU7QUFBQSxNQUM5QixPQUFPLE1BQU0sT0FBTyxLQUFLO0FBQUEsSUFDM0IsQ0FBQztBQUFBLElBQ0QsV0FBVyxpREFBRyxDQUFDO0FBQUEsTUFDYixVQUFVLE1BQU0sV0FBVyxVQUFVO0FBQUEsTUFDckMsWUFBWSxNQUFNLFdBQVc7QUFBQSxJQUMvQixDQUFDO0FBQUEsSUFDRCxVQUFVLGlEQUFHLENBQUM7QUFBQSxNQUNaLFNBQVM7QUFBQSxNQUNULE9BQU8sTUFBTSxPQUFPLEtBQUs7QUFBQSxJQUMzQixDQUFDO0FBQUEsRUFDSDtBQUNGO0FBQ0EsU0FBUyxpQkFBaUIsS0FBK0IsSUFBbUM7QUFDMUYsU0FBTyw2REFBYyxDQUFDLElBQUksaUJBQWlCLElBQUksZUFBZSxJQUFJLEdBQUcsSUFBSSxJQUFJLGlCQUFpQixTQUFTO0FBQ3pHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9PcGVyYXRpb25JbmZvQnV0dG9uLnRzeD84N2U1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQb3BwZXJUb29sdGlwIH0gZnJvbSAncmVhY3QtcG9wcGVyLXRvb2x0aXAnO1xuXG5pbXBvcnQgeyBHcmFmYW5hVGhlbWUyLCByZW5kZXJNYXJrZG93biB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgRmxleEl0ZW0gfSBmcm9tICdAZ3JhZmFuYS9leHBlcmltZW50YWwnO1xuaW1wb3J0IHsgQnV0dG9uLCBQb3J0YWwsIHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmltcG9ydCB7IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbiwgUXVlcnlCdWlsZGVyT3BlcmF0aW9uRGVmIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICBvcGVyYXRpb246IFF1ZXJ5QnVpbGRlck9wZXJhdGlvbjtcbiAgZGVmOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25EZWY7XG59XG5cbmV4cG9ydCBjb25zdCBPcGVyYXRpb25JbmZvQnV0dG9uID0gUmVhY3QubWVtbzxQcm9wcz4oKHsgZGVmLCBvcGVyYXRpb24gfSkgPT4ge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG4gIGNvbnN0IFtzaG93LCBzZXRTaG93XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgeyBnZXRUb29sdGlwUHJvcHMsIHNldFRvb2x0aXBSZWYsIHNldFRyaWdnZXJSZWYsIHZpc2libGUgfSA9IHVzZVBvcHBlclRvb2x0aXAoe1xuICAgIHBsYWNlbWVudDogJ3RvcCcsXG4gICAgdmlzaWJsZTogc2hvdyxcbiAgICBvZmZzZXQ6IFswLCAxNl0sXG4gICAgb25WaXNpYmxlQ2hhbmdlOiBzZXRTaG93LFxuICAgIGludGVyYWN0aXZlOiB0cnVlLFxuICAgIHRyaWdnZXI6IFsnY2xpY2snXSxcbiAgfSk7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEJ1dHRvblxuICAgICAgICB0aXRsZT1cIkNsaWNrIHRvIHNob3cgZGVzY3JpcHRpb25cIlxuICAgICAgICByZWY9e3NldFRyaWdnZXJSZWZ9XG4gICAgICAgIGljb249XCJpbmZvLWNpcmNsZVwiXG4gICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICBmaWxsPVwidGV4dFwiXG4gICAgICAvPlxuICAgICAge3Zpc2libGUgJiYgKFxuICAgICAgICA8UG9ydGFsPlxuICAgICAgICAgIDxkaXYgcmVmPXtzZXRUb29sdGlwUmVmfSB7Li4uZ2V0VG9vbHRpcFByb3BzKCl9IGNsYXNzTmFtZT17c3R5bGVzLmRvY0JveH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmRvY0JveEhlYWRlcn0+XG4gICAgICAgICAgICAgIDxzcGFuPntkZWYucmVuZGVyZXIob3BlcmF0aW9uLCBkZWYsICc8ZXhwcj4nKX08L3NwYW4+XG4gICAgICAgICAgICAgIDxGbGV4SXRlbSBncm93PXsxfSAvPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgaWNvbj1cInRpbWVzXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93KGZhbHNlKX1cbiAgICAgICAgICAgICAgICBmaWxsPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmUgb3BlcmF0aW9uXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5kb2NCb3hCb2R5fVxuICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IGdldE9wZXJhdGlvbkRvY3MoZGVmLCBvcGVyYXRpb24pIH19XG4gICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvUG9ydGFsPlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKTtcbn0pO1xuXG5PcGVyYXRpb25JbmZvQnV0dG9uLmRpc3BsYXlOYW1lID0gJ09wZXJhdGlvbkRvY3MnO1xuXG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBkb2NCb3g6IGNzcyh7XG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5wcmltYXJ5LFxuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlci5zdHJvbmd9YCxcbiAgICAgIGJveFNoYWRvdzogdGhlbWUuc2hhZG93cy56MyxcbiAgICAgIG1heFdpZHRoOiAnNjAwcHgnLFxuICAgICAgcGFkZGluZzogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIGJvcmRlclJhZGl1czogdGhlbWUuc2hhcGUuYm9yZGVyUmFkaXVzKCksXG4gICAgICB6SW5kZXg6IHRoZW1lLnpJbmRleC50b29sdGlwLFxuICAgIH0pLFxuICAgIGRvY0JveEhlYWRlcjogY3NzKHtcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5Lmg1LmZvbnRTaXplLFxuICAgICAgZm9udEZhbWlseTogdGhlbWUudHlwb2dyYXBoeS5mb250RmFtaWx5TW9ub3NwYWNlLFxuICAgICAgcGFkZGluZ0JvdHRvbTogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIH0pLFxuICAgIGRvY0JveEJvZHk6IGNzcyh7XG4gICAgICAvLyBUaGUgbWFya2Rvd24gcGFyYWdyYXBoIGhhcyBhIG1hcmdpbkJvdHRvbSB0aGlzIHJlbW92ZXMgaXRcbiAgICAgIG1hcmdpbkJvdHRvbTogdGhlbWUuc3BhY2luZygtMSksXG4gICAgICBjb2xvcjogdGhlbWUuY29sb3JzLnRleHQuc2Vjb25kYXJ5LFxuICAgIH0pLFxuICAgIHNpZ25hdHVyZTogY3NzKHtcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmJvZHlTbWFsbC5mb250U2l6ZSxcbiAgICAgIGZvbnRGYW1pbHk6IHRoZW1lLnR5cG9ncmFwaHkuZm9udEZhbWlseU1vbm9zcGFjZSxcbiAgICB9KSxcbiAgICBkcm9wZG93bjogY3NzKHtcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICBjb2xvcjogdGhlbWUuY29sb3JzLnRleHQuc2Vjb25kYXJ5LFxuICAgIH0pLFxuICB9O1xufTtcbmZ1bmN0aW9uIGdldE9wZXJhdGlvbkRvY3MoZGVmOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25EZWYsIG9wOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb24pOiBzdHJpbmcge1xuICByZXR1cm4gcmVuZGVyTWFya2Rvd24oZGVmLmV4cGxhaW5IYW5kbGVyID8gZGVmLmV4cGxhaW5IYW5kbGVyKG9wLCBkZWYpIDogZGVmLmRvY3VtZW50YXRpb24gPz8gJ25vIGRvY3MnKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationInfoButton.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationList.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperationList: () => (/* binding */ OperationList)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/react-beautiful-dnd-virtual-daef784a91/0/cache/react-beautiful-dnd-npm-13.1.1-ddc8adf565-5f90f7c0ab.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js\");\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useMountedState.js\");\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/usePrevious.js\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Cascader/Cascader.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _OperationEditor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationEditor.tsx\");\n\n\n\n\n\n\n\n\nfunction OperationList({\n  query,\n  datasource,\n  queryModeller,\n  onChange,\n  onRunQuery,\n  highlightedOp\n}) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useStyles2)(getStyles);\n  const { operations } = query;\n  const opsToHighlight = useOperationsHighlight(operations);\n  const [cascaderOpen, setCascaderOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const onOperationChange = (index, update) => {\n    const updatedList = [...operations];\n    updatedList.splice(index, 1, update);\n    onChange({ ...query, operations: updatedList });\n  };\n  const onRemove = (index) => {\n    const updatedList = [...operations.slice(0, index), ...operations.slice(index + 1)];\n    onChange({ ...query, operations: updatedList });\n  };\n  const addOptions = queryModeller.getCategories().map((category) => {\n    return {\n      value: category,\n      label: category,\n      items: queryModeller.getOperationsForCategory(category).map((operation) => ({\n        value: operation.id,\n        label: operation.name,\n        isLeaf: true\n      }))\n    };\n  });\n  const onAddOperation = (value) => {\n    const operationDef = queryModeller.getOperationDef(value);\n    if (!operationDef) {\n      return;\n    }\n    onChange(operationDef.addOperationHandler(operationDef, query, queryModeller));\n    setCascaderOpen(false);\n  };\n  const onDragEnd = (result) => {\n    if (!result.destination) {\n      return;\n    }\n    const updatedList = [...operations];\n    const element = updatedList[result.source.index];\n    updatedList.splice(result.source.index, 1);\n    updatedList.splice(result.destination.index, 0, element);\n    onChange({ ...query, operations: updatedList });\n  };\n  const onCascaderBlur = () => {\n    setCascaderOpen(false);\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_4__.Stack, { gap: 1, direction: \"column\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_4__.Stack, { gap: 1 }, operations.length > 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_5__.DragDropContext, { onDragEnd }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_5__.Droppable, { droppableId: \"sortable-field-mappings\", direction: \"horizontal\" }, (provided) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.operationList, ref: provided.innerRef, ...provided.droppableProps }, operations.map((op, index) => {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _OperationEditor__WEBPACK_IMPORTED_MODULE_2__.OperationEditor,\n      {\n        key: op.id + JSON.stringify(op.params) + index,\n        queryModeller,\n        index,\n        operation: op,\n        query,\n        datasource,\n        onChange: onOperationChange,\n        onRemove,\n        onRunQuery,\n        flash: opsToHighlight[index],\n        highlight: highlightedOp === op\n      }\n    );\n  }), provided.placeholder))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.addButton }, cascaderOpen ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_6__.Cascader,\n    {\n      options: addOptions,\n      onSelect: onAddOperation,\n      onBlur: onCascaderBlur,\n      autoFocus: true,\n      alwaysOpen: true,\n      hideActiveLevelLabel: true,\n      placeholder: \"Search\"\n    }\n  ) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Button, { icon: \"plus\", variant: \"secondary\", onClick: () => setCascaderOpen(true), title: \"Add operation\" }, \"Operations\"))));\n}\nfunction useOperationsHighlight(operations) {\n  const isMounted = (0,react_use__WEBPACK_IMPORTED_MODULE_8__[\"default\"])();\n  const prevOperations = (0,react_use__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(operations);\n  if (!isMounted()) {\n    return operations.map(() => false);\n  }\n  if (!prevOperations) {\n    return operations.map(() => true);\n  }\n  let newOps = [];\n  if (prevOperations.length - 1 === operations.length && operations.every((op) => prevOperations.includes(op))) {\n    return operations.map(() => false);\n  }\n  if (prevOperations.length + 1 === operations.length && prevOperations.every((op) => operations.includes(op))) {\n    const newOp = operations.find((op) => !prevOperations.includes(op));\n    newOps = operations.map((op) => {\n      return op === newOp;\n    });\n  } else {\n    newOps = operations.map((op, index) => {\n      return !isSameOp(op.id, prevOperations[index]?.id);\n    });\n  }\n  return newOps;\n}\nfunction isSameOp(op1, op2) {\n  return op1 === op2 || `__${op1}_by` === op2 || op1 === `__${op2}_by`;\n}\nconst getStyles = (theme) => {\n  return {\n    heading: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"heading\",\n      fontSize: 12,\n      fontWeight: theme.typography.fontWeightMedium,\n      marginBottom: 0\n    }),\n    operationList: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"operationList\",\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      gap: theme.spacing(2)\n    }),\n    addButton: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      label: \"addButton\",\n      width: 126,\n      paddingBottom: theme.spacing(1)\n    })\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uTGlzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNZO0FBQ3VCO0FBQ1Y7QUFHdkI7QUFDdUM7QUFFN0I7QUFhekIsU0FBUyxjQUE2QztBQUFBLEVBQzNEO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRixHQUFhO0FBQ1gsUUFBTSxTQUFTLHVEQUFVLENBQUMsU0FBUztBQUNuQyxRQUFNLEVBQUUsV0FBVyxJQUFJO0FBRXZCLFFBQU0saUJBQWlCLHVCQUF1QixVQUFVO0FBRXhELFFBQU0sQ0FBQyxjQUFjLGVBQWUsSUFBSSwrQ0FBUSxDQUFDLEtBQUs7QUFFdEQsUUFBTSxvQkFBb0IsQ0FBQyxPQUFlLFdBQWtDO0FBQzFFLFVBQU0sY0FBYyxDQUFDLEdBQUcsVUFBVTtBQUNsQyxnQkFBWSxPQUFPLE9BQU8sR0FBRyxNQUFNO0FBQ25DLGFBQVMsRUFBRSxHQUFHLE9BQU8sWUFBWSxZQUFZLENBQUM7QUFBQSxFQUNoRDtBQUVBLFFBQU0sV0FBVyxDQUFDLFVBQWtCO0FBQ2xDLFVBQU0sY0FBYyxDQUFDLEdBQUcsV0FBVyxNQUFNLEdBQUcsS0FBSyxHQUFHLEdBQUcsV0FBVyxNQUFNLFFBQVEsQ0FBQyxDQUFDO0FBQ2xGLGFBQVMsRUFBRSxHQUFHLE9BQU8sWUFBWSxZQUFZLENBQUM7QUFBQSxFQUNoRDtBQUVBLFFBQU0sYUFBK0IsY0FBYyxjQUFjLEVBQUUsSUFBSSxDQUFDLGFBQWE7QUFDbkYsV0FBTztBQUFBLE1BQ0wsT0FBTztBQUFBLE1BQ1AsT0FBTztBQUFBLE1BQ1AsT0FBTyxjQUFjLHlCQUF5QixRQUFRLEVBQUUsSUFBSSxDQUFDLGVBQWU7QUFBQSxRQUMxRSxPQUFPLFVBQVU7QUFBQSxRQUNqQixPQUFPLFVBQVU7QUFBQSxRQUNqQixRQUFRO0FB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LENBQUMsT0FBTyxDQUFDLGVBQWUsU0FBUyxFQUFFLENBQUM7QUFDbEUsYUFBUyxXQUFXLElBQUksQ0FBQyxPQUFPO0FBQzlCLGFBQU8sT0FBTztBQUFBLElBQ2hCLENBQUM7QUFBQSxFQUNILE9BQU87QUFFTCxhQUFTLFdBQVcsSUFBSSxDQUFDLElBQUksVUFBVTtBQUNyQyxhQUFPLENBQUMsU0FBUyxHQUFHLElBQUksZUFBZSxLQUFLLEdBQUcsRUFBRTtBQUFBLElBQ25ELENBQUM7QUFBQSxFQUNIO0FBQ0EsU0FBTztBQUNUO0FBRUEsU0FBUyxTQUFTLEtBQWMsS0FBYztBQUM1QyxTQUFPLFFBQVEsT0FBTyxLQUFLLGFBQWEsT0FBTyxRQUFRLEtBQUs7QUFDOUQ7QUFFQSxNQUFNLFlBQVksQ0FBQyxVQUF5QjtBQUMxQyxTQUFPO0FBQUEsSUFDTCxTQUFTLGlEQUFHLENBQUM7QUFBQSxNQUNYLE9BQU87QUFBQSxNQUNQLFVBQVU7QUFBQSxNQUNWLFlBQVksTUFBTSxXQUFXO0FBQUEsTUFDN0IsY0FBYztBQUFBLElBQ2hCLENBQUM7QUFBQSxJQUNELGVBQWUsaURBQUcsQ0FBQztBQUFBLE1BQ2pCLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxNQUNULFVBQVU7QUFBQSxNQUNWLEtBQUssTUFBTSxRQUFRLENBQUM7QUFBQSxJQUN0QixDQUFDO0FBQUEsSUFDRCxXQUFXLGlEQUFHLENBQUM7QUFBQSxNQUNiLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLGVBQWUsTUFBTSxRQUFRLENBQUM7QUFBQSxJQUNoQyxDQUFDO0FBQUEsRUFDSDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9PcGVyYXRpb25MaXN0LnRzeD8zYzE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBEcmFnRHJvcENvbnRleHQsIERyb3BwYWJsZSwgRHJvcFJlc3VsdCB9IGZyb20gJ3JlYWN0LWJlYXV0aWZ1bC1kbmQnO1xuaW1wb3J0IHsgdXNlTW91bnRlZFN0YXRlLCB1c2VQcmV2aW91cyB9IGZyb20gJ3JlYWN0LXVzZSc7XG5cbmltcG9ydCB7IERhdGFTb3VyY2VBcGksIEdyYWZhbmFUaGVtZTIgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IEJ1dHRvbiwgQ2FzY2FkZXIsIENhc2NhZGVyT3B0aW9uLCB1c2VTdHlsZXMyIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyBPcGVyYXRpb25FZGl0b3IgfSBmcm9tICcuL09wZXJhdGlvbkVkaXRvcic7XG5pbXBvcnQgeyBRdWVyeUJ1aWxkZXJPcGVyYXRpb24sIFF1ZXJ5V2l0aE9wZXJhdGlvbnMsIFZpc3VhbFF1ZXJ5TW9kZWxsZXIgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wczxUIGV4dGVuZHMgUXVlcnlXaXRoT3BlcmF0aW9ucz4ge1xuICBxdWVyeTogVDtcbiAgZGF0YXNvdXJjZTogRGF0YVNvdXJjZUFwaTtcbiAgb25DaGFuZ2U6IChxdWVyeTogVCkgPT4gdm9pZDtcbiAgb25SdW5RdWVyeTogKCkgPT4gdm9pZDtcbiAgcXVlcnlNb2RlbGxlcjogVmlzdWFsUXVlcnlNb2RlbGxlcjtcbiAgZXhwbGFpbk1vZGU/OiBib29sZWFuO1xuICBoaWdobGlnaHRlZE9wPzogUXVlcnlCdWlsZGVyT3BlcmF0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gT3BlcmF0aW9uTGlzdDxUIGV4dGVuZHMgUXVlcnlXaXRoT3BlcmF0aW9ucz4oe1xuICBxdWVyeSxcbiAgZGF0YXNvdXJjZSxcbiAgcXVlcnlNb2RlbGxlcixcbiAgb25DaGFuZ2UsXG4gIG9uUnVuUXVlcnksXG4gIGhpZ2hsaWdodGVkT3AsXG59OiBQcm9wczxUPikge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG4gIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gcXVlcnk7XG5cbiAgY29uc3Qgb3BzVG9IaWdobGlnaHQgPSB1c2VPcGVyYXRpb25zSGlnaGxpZ2h0KG9wZXJhdGlvbnMpO1xuXG4gIGNvbnN0IFtjYXNjYWRlck9wZW4sIHNldENhc2NhZGVyT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3Qgb25PcGVyYXRpb25DaGFuZ2UgPSAoaW5kZXg6IG51bWJlciwgdXBkYXRlOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb24pID0+IHtcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IFsuLi5vcGVyYXRpb25zXTtcbiAgICB1cGRhdGVkTGlzdC5zcGxpY2UoaW5kZXgsIDEsIHVwZGF0ZSk7XG4gICAgb25DaGFuZ2UoeyAuLi5xdWVyeSwgb3BlcmF0aW9uczogdXBkYXRlZExpc3QgfSk7XG4gIH07XG5cbiAgY29uc3Qgb25SZW1vdmUgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZWRMaXN0ID0gWy4uLm9wZXJhdGlvbnMuc2xpY2UoMCwgaW5kZXgpLCAuLi5vcGVyYXRpb25zLnNsaWNlKGluZGV4ICsgMSldO1xuICAgIG9uQ2hhbmdlKHsgLi4ucXVlcnksIG9wZXJhdGlvbnM6IHVwZGF0ZWRMaXN0IH0pO1xuICB9O1xuXG4gIGNvbnN0IGFkZE9wdGlvbnM6IENhc2NhZGVyT3B0aW9uW10gPSBxdWVyeU1vZGVsbGVyLmdldENhdGVnb3JpZXMoKS5tYXAoKGNhdGVnb3J5KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBjYXRlZ29yeSxcbiAgICAgIGxhYmVsOiBjYXRlZ29yeSxcbiAgICAgIGl0ZW1zOiBxdWVyeU1vZGVsbGVyLmdldE9wZXJhdGlvbnNGb3JDYXRlZ29yeShjYXRlZ29yeSkubWFwKChvcGVyYXRpb24pID0+ICh7XG4gICAgICAgIHZhbHVlOiBvcGVyYXRpb24uaWQsXG4gICAgICAgIGxhYmVsOiBvcGVyYXRpb24ubmFtZSxcbiAgICAgICAgaXNMZWFmOiB0cnVlLFxuICAgICAgfSkpLFxuICAgIH07XG4gIH0pO1xuXG4gIGNvbnN0IG9uQWRkT3BlcmF0aW9uID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBvcGVyYXRpb25EZWYgPSBxdWVyeU1vZGVsbGVyLmdldE9wZXJhdGlvbkRlZih2YWx1ZSk7XG4gICAgaWYgKCFvcGVyYXRpb25EZWYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb25DaGFuZ2Uob3BlcmF0aW9uRGVmLmFkZE9wZXJhdGlvbkhhbmRsZXIob3BlcmF0aW9uRGVmLCBxdWVyeSwgcXVlcnlNb2RlbGxlcikpO1xuICAgIHNldENhc2NhZGVyT3BlbihmYWxzZSk7XG4gIH07XG5cbiAgY29uc3Qgb25EcmFnRW5kID0gKHJlc3VsdDogRHJvcFJlc3VsdCkgPT4ge1xuICAgIGlmICghcmVzdWx0LmRlc3RpbmF0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlZExpc3QgPSBbLi4ub3BlcmF0aW9uc107XG4gICAgY29uc3QgZWxlbWVudCA9IHVwZGF0ZWRMaXN0W3Jlc3VsdC5zb3VyY2UuaW5kZXhdO1xuICAgIHVwZGF0ZWRMaXN0LnNwbGljZShyZXN1bHQuc291cmNlLmluZGV4LCAxKTtcbiAgICB1cGRhdGVkTGlzdC5zcGxpY2UocmVzdWx0LmRlc3RpbmF0aW9uLmluZGV4LCAwLCBlbGVtZW50KTtcbiAgICBvbkNoYW5nZSh7IC4uLnF1ZXJ5LCBvcGVyYXRpb25zOiB1cGRhdGVkTGlzdCB9KTtcbiAgfTtcblxuICBjb25zdCBvbkNhc2NhZGVyQmx1ciA9ICgpID0+IHtcbiAgICBzZXRDYXNjYWRlck9wZW4oZmFsc2UpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFN0YWNrIGdhcD17MX0gZGlyZWN0aW9uPVwiY29sdW1uXCI+XG4gICAgICA8U3RhY2sgZ2FwPXsxfT5cbiAgICAgICAge29wZXJhdGlvbnMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgPERyYWdEcm9wQ29udGV4dCBvbkRyYWdFbmQ9e29uRHJhZ0VuZH0+XG4gICAgICAgICAgICA8RHJvcHBhYmxlIGRyb3BwYWJsZUlkPVwic29ydGFibGUtZmllbGQtbWFwcGluZ3NcIiBkaXJlY3Rpb249XCJob3Jpem9udGFsXCI+XG4gICAgICAgICAgICAgIHsocHJvdmlkZWQpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLm9wZXJhdGlvbkxpc3R9IHJlZj17cHJvdmlkZWQuaW5uZXJSZWZ9IHsuLi5wcm92aWRlZC5kcm9wcGFibGVQcm9wc30+XG4gICAgICAgICAgICAgICAgICB7b3BlcmF0aW9ucy5tYXAoKG9wLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxPcGVyYXRpb25FZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17b3AuaWQgKyBKU09OLnN0cmluZ2lmeShvcC5wYXJhbXMpICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeU1vZGVsbGVyPXtxdWVyeU1vZGVsbGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uPXtvcH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5PXtxdWVyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25PcGVyYXRpb25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZT17b25SZW1vdmV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblJ1blF1ZXJ5PXtvblJ1blF1ZXJ5fVxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2g9e29wc1RvSGlnaGxpZ2h0W2luZGV4XX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodD17aGlnaGxpZ2h0ZWRPcCA9PT0gb3B9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAge3Byb3ZpZGVkLnBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9Ecm9wcGFibGU+XG4gICAgICAgICAgPC9EcmFnRHJvcENvbnRleHQ+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYWRkQnV0dG9ufT5cbiAgICAgICAgICB7Y2FzY2FkZXJPcGVuID8gKFxuICAgICAgICAgICAgPENhc2NhZGVyXG4gICAgICAgICAgICAgIG9wdGlvbnM9e2FkZE9wdGlvbnN9XG4gICAgICAgICAgICAgIG9uU2VsZWN0PXtvbkFkZE9wZXJhdGlvbn1cbiAgICAgICAgICAgICAgb25CbHVyPXtvbkNhc2NhZGVyQmx1cn1cbiAgICAgICAgICAgICAgYXV0b0ZvY3VzPXt0cnVlfVxuICAgICAgICAgICAgICBhbHdheXNPcGVuPXt0cnVlfVxuICAgICAgICAgICAgICBoaWRlQWN0aXZlTGV2ZWxMYWJlbD17dHJ1ZX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9eydTZWFyY2gnfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPEJ1dHRvbiBpY29uPXsncGx1cyd9IHZhcmlhbnQ9eydzZWNvbmRhcnknfSBvbkNsaWNrPXsoKSA9PiBzZXRDYXNjYWRlck9wZW4odHJ1ZSl9IHRpdGxlPXsnQWRkIG9wZXJhdGlvbid9PlxuICAgICAgICAgICAgICBPcGVyYXRpb25zXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvU3RhY2s+XG4gICAgPC9TdGFjaz5cbiAgKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGluZGV4ZXMgb2Ygb3BlcmF0aW9ucyB0aGF0IHNob3VsZCBiZSBoaWdobGlnaHRlZC4gV2UgY2hlY2sgdGhlIGRpZmYgb2Ygb3BlcmF0aW9ucyBhZGRlZCBidXQgYXQgdGhlIHNhbWUgdGltZVxuICogd2Ugd2FudCB0byBoaWdobGlnaHQgb3BlcmF0aW9ucyBvbmx5IGFmdGVyIHRoZSBpbml0aWFsIHJlbmRlciwgc28gd2UgY2hlY2sgZm9yIG1vdW50ZWQgc3RhdGUgYW5kIGNhbGN1bGF0ZSB0aGUgZGlmZlxuICogb25seSBhZnRlci5cbiAqIEBwYXJhbSBvcGVyYXRpb25zXG4gKi9cbmZ1bmN0aW9uIHVzZU9wZXJhdGlvbnNIaWdobGlnaHQob3BlcmF0aW9uczogUXVlcnlCdWlsZGVyT3BlcmF0aW9uW10pIHtcbiAgY29uc3QgaXNNb3VudGVkID0gdXNlTW91bnRlZFN0YXRlKCk7XG4gIGNvbnN0IHByZXZPcGVyYXRpb25zID0gdXNlUHJldmlvdXMob3BlcmF0aW9ucyk7XG5cbiAgaWYgKCFpc01vdW50ZWQoKSkge1xuICAgIHJldHVybiBvcGVyYXRpb25zLm1hcCgoKSA9PiBmYWxzZSk7XG4gIH1cblxuICBpZiAoIXByZXZPcGVyYXRpb25zKSB7XG4gICAgcmV0dXJuIG9wZXJhdGlvbnMubWFwKCgpID0+IHRydWUpO1xuICB9XG5cbiAgbGV0IG5ld09wczogYm9vbGVhbltdID0gW107XG5cbiAgaWYgKHByZXZPcGVyYXRpb25zLmxlbmd0aCAtIDEgPT09IG9wZXJhdGlvbnMubGVuZ3RoICYmIG9wZXJhdGlvbnMuZXZlcnkoKG9wKSA9PiBwcmV2T3BlcmF0aW9ucy5pbmNsdWRlcyhvcCkpKSB7XG4gICAgLy8gSW4gY2FzZSB3ZSByZW1vdmUgb25lIG9wIGFuZCBkb2VzIG5vdCBjaGFuZ2UgYW55IG9wcyB0aGVuIGRvbid0IGhpZ2hsaWdodCBhbnl0aGluZy5cbiAgICByZXR1cm4gb3BlcmF0aW9ucy5tYXAoKCkgPT4gZmFsc2UpO1xuICB9XG4gIGlmIChwcmV2T3BlcmF0aW9ucy5sZW5ndGggKyAxID09PSBvcGVyYXRpb25zLmxlbmd0aCAmJiBwcmV2T3BlcmF0aW9ucy5ldmVyeSgob3ApID0+IG9wZXJhdGlvbnMuaW5jbHVkZXMob3ApKSkge1xuICAgIC8vIElmIHdlIGFkZCBhIHNpbmdsZSBvcCBqdXN0IGZpbmQgaXQgYW5kIGhpZ2hsaWdodCBqdXN0IHRoYXQuXG4gICAgY29uc3QgbmV3T3AgPSBvcGVyYXRpb25zLmZpbmQoKG9wKSA9PiAhcHJldk9wZXJhdGlvbnMuaW5jbHVkZXMob3ApKTtcbiAgICBuZXdPcHMgPSBvcGVyYXRpb25zLm1hcCgob3ApID0+IHtcbiAgICAgIHJldHVybiBvcCA9PT0gbmV3T3A7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gRGVmYXVsdCBkaWZmIG9mIGFsbCBvcHMuXG4gICAgbmV3T3BzID0gb3BlcmF0aW9ucy5tYXAoKG9wLCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuICFpc1NhbWVPcChvcC5pZCwgcHJldk9wZXJhdGlvbnNbaW5kZXhdPy5pZCk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5ld09wcztcbn1cblxuZnVuY3Rpb24gaXNTYW1lT3Aob3AxPzogc3RyaW5nLCBvcDI/OiBzdHJpbmcpIHtcbiAgcmV0dXJuIG9wMSA9PT0gb3AyIHx8IGBfXyR7b3AxfV9ieWAgPT09IG9wMiB8fCBvcDEgPT09IGBfXyR7b3AyfV9ieWA7XG59XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIGhlYWRpbmc6IGNzcyh7XG4gICAgICBsYWJlbDogJ2hlYWRpbmcnLFxuICAgICAgZm9udFNpemU6IDEyLFxuICAgICAgZm9udFdlaWdodDogdGhlbWUudHlwb2dyYXBoeS5mb250V2VpZ2h0TWVkaXVtLFxuICAgICAgbWFyZ2luQm90dG9tOiAwLFxuICAgIH0pLFxuICAgIG9wZXJhdGlvbkxpc3Q6IGNzcyh7XG4gICAgICBsYWJlbDogJ29wZXJhdGlvbkxpc3QnLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZmxleFdyYXA6ICd3cmFwJyxcbiAgICAgIGdhcDogdGhlbWUuc3BhY2luZygyKSxcbiAgICB9KSxcbiAgICBhZGRCdXR0b246IGNzcyh7XG4gICAgICBsYWJlbDogJ2FkZEJ1dHRvbicsXG4gICAgICB3aWR0aDogMTI2LFxuICAgICAgcGFkZGluZ0JvdHRvbTogdGhlbWUuc3BhY2luZygxKSxcbiAgICB9KSxcbiAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationList.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationParamEditor.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOperationParamEditor: () => (/* binding */ getOperationParamEditor)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/selectUtils.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/AutoSizeInput.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/Checkbox.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Select/Select.tsx\");\n/* harmony import */ var _operationUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/operationUtils.ts\");\n\n\n\n\n\n\n\nfunction getOperationParamEditor(paramDef) {\n  if (paramDef.editor) {\n    return paramDef.editor;\n  }\n  if (paramDef.options) {\n    return SelectInputParamEditor;\n  }\n  switch (paramDef.type) {\n    case \"boolean\":\n      return BoolInputParamEditor;\n    case \"number\":\n    case \"string\":\n    default:\n      return SimpleInputParamEditor;\n  }\n}\nfunction SimpleInputParamEditor(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_3__.AutoSizeInput,\n    {\n      id: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_2__.getOperationParamId)(props.operationIndex, props.index),\n      defaultValue: props.value?.toString(),\n      minWidth: props.paramDef.minWidth,\n      placeholder: props.paramDef.placeholder,\n      title: props.paramDef.description,\n      maxWidth: (props.paramDef.minWidth || 20) * 3,\n      onCommitChange: (evt) => {\n        props.onChange(props.index, evt.currentTarget.value);\n        if (props.paramDef.runQueryOnEnter && evt.type === \"keydown\") {\n          props.onRunQuery();\n        }\n      }\n    }\n  );\n}\nfunction BoolInputParamEditor(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Checkbox,\n    {\n      id: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_2__.getOperationParamId)(props.operationIndex, props.index),\n      value: props.value,\n      onChange: (evt) => props.onChange(props.index, evt.currentTarget.checked)\n    }\n  );\n}\nfunction SelectInputParamEditor({\n  paramDef,\n  value,\n  index,\n  operationIndex,\n  onChange\n}) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.useStyles2)(getStyles);\n  let selectOptions = paramDef.options;\n  if (!selectOptions[0]?.label) {\n    selectOptions = paramDef.options.map((option) => ({\n      label: option.toString(),\n      value: option\n    }));\n  }\n  let valueOption = selectOptions.find((x) => x.value === value) ?? (0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.toOption)(value);\n  if (!value && paramDef.optional) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.optionalParam }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Button,\n      {\n        size: \"sm\",\n        variant: \"secondary\",\n        title: `Add ${paramDef.name}`,\n        icon: \"plus\",\n        onClick: () => onChange(index, selectOptions[0].value)\n      },\n      paramDef.name\n    ));\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_8__.Stack, { gap: 0.5, direction: \"row\", alignItems: \"center\", wrap: false }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Select,\n    {\n      id: (0,_operationUtils__WEBPACK_IMPORTED_MODULE_2__.getOperationParamId)(operationIndex, index),\n      value: valueOption,\n      options: selectOptions,\n      placeholder: paramDef.placeholder,\n      allowCustomValue: true,\n      onChange: (value2) => onChange(index, value2.value),\n      width: paramDef.minWidth || \"auto\"\n    }\n  ), paramDef.optional && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_7__.Button,\n    {\n      \"data-testid\": `operations.${index}.remove-param`,\n      size: \"sm\",\n      fill: \"text\",\n      icon: \"times\",\n      variant: \"secondary\",\n      title: `Remove ${paramDef.name}`,\n      onClick: () => onChange(index, \"\")\n    }\n  ));\n}\nconst getStyles = (theme) => {\n  return {\n    optionalParam: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      marginTop: theme.spacing(1)\n    })\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uUGFyYW1FZGl0b3IudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDaUI7QUFFb0I7QUFDbkM7QUFDOEM7QUFJaEM7QUFFN0IsU0FBUyx3QkFDZCxVQUNzRDtBQUN0RCxNQUFJLFNBQVMsUUFBUTtBQUNuQixXQUFPLFNBQVM7QUFBQSxFQUNsQjtBQUVBLE1BQUksU0FBUyxTQUFTO0FBQ3BCLFdBQU87QUFBQSxFQUNUO0FBRUEsVUFBUSxTQUFTLE1BQU07QUFBQSxJQUNyQixLQUFLO0FBQ0gsYUFBTztBQUFBLElBQ1QsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0w7QUFDRSxhQUFPO0FBQUEsRUFDWDtBQUNGO0FBRUEsU0FBUyx1QkFBdUIsT0FBOEM7QUFDNUUsU0FDRTtBQUFBLElBQUMsc0RBQWE7QUFBYjtBQUFBLE1BQ0MsSUFBSSxvRUFBbUIsQ0FBQyxNQUFNLGdCQUFnQixNQUFNLEtBQUs7QUFBQSxNQUN6RCxjQUFjLE1BQU0sT0FBTyxTQUFTO0FBQUEsTUFDcEMsVUFBVSxNQUFNLFNBQVM7QUFBQSxNQUN6QixhQUFhLE1BQU0sU0FBUztBQUFBLE1BQzVCLE9BQU8sTUFBTSxTQUFTO0FBQUEsTUFDdEIsV0FBVyxNQUFNLFNBQVMsWUFBWSxNQUFNO0FBQUEsTUFDNUMsZ0JBQWdCLENBQUMsUUFBUTtBQUN2QixjQUFNLFNBQVMsTUFBTSxPQUFPLElBQUksY0FBYyxLQUFLO0FBQ25ELFlBQUksTUFBTSxTQUFTLG1CQUFtQixJQUFJLFNBQVMsV0FBVztBQUM1RCxnQkFBTSxXQUFXO0FBQUEsUUFDbkI7QUFBQSxNQUNGO0FBQUE7QUFBQSxFQUNGO0FBRUo7QUFFQSxTQUFTLHFCQUFxQixPQUE4QztBQUMxRSxTQUNFO0FBQUEsSUFBQyxpREFBUTtBQUFSO0FBQUEsTUFDQyxJQUFJLG9FQUFtQixDQUFDLE1BQU0sZ0JBQWdCLE1BQU0sS0FBSztBQUFBLE1BQ3pELE9BQU8sTUFBTTtBQUFBLE1BQ2IsVUFBVSxDQUFDLFFBQVEsTUFBTSxTQUFTLE1BQU0sT0FBTyxJQUFJLGNBQWMsT0FBTztBQUFBO0FBQUEsRUFDMUU7QUFFSjtBQUVBLFNBQVMsdUJBQXVCO0FBQUEsRUFDOUI7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0YsR0FBMEM7QUFDeEMsUUFBTSxTQUFTLHVEQUFVLENBQUMsU0FBUztBQUNuQyxNQUFJLGdCQUFnQixTQUFTO0FBRTdCLE1BQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxPQUFPO0FBQzVCLG9CQUFnQixTQUFTLFFBQVMsSUFBSSxDQUFDLFlBQVk7QUFBQSxNQUNqRCxPQUFPLE9BQU8sU0FBUztBQUFBLE1BQ3ZCLE9BQU87QUFBQSxJQUNULEVBQUU7QUFBQSxFQUNKO0FBRUEsTUFBSSxjQUFjLGNBQWMsS0FBSyxDQUFDLE1BQU0sRUFBRSxVQUFVLEtBQUssS0FBSyx1REFBUSxDQUFDLEtBQWU7QUFJMUYsTUFBSSxDQUFDLFNBQVMsU0FBUyxVQUFVO0FBQy9CLFdBQ0UsMkVBQUMsU0FBSSxXQUFXLE9BQU8saUJBQ3JCO0FBQUEsTUFBQywrQ0FBTTtBQUFOO0FBQUEsUUFDQyxNQUFLO0FBQUEsUUFDTCxTQUFRO0FBQUEsUUFDUixPQUFPLE9BQU8sU0FBUztBQUFBLFFBQ3ZCLE1BQUs7QUFBQSxRQUNMLFNBQVMsTUFBTSxTQUFTLE9BQU8sY0FBYyxDQUFDLEVBQUUsS0FBSztBQUFBO0FBQUEsTUFFcEQsU0FBUztBQUFBLElBQ1osQ0FDRjtBQUFBLEVBRUo7QUFFQSxTQUNFLDJFQUFDLHdEQUFLLElBQUMsS0FBSyxLQUFLLFdBQVUsT0FBTSxZQUFXLFVBQVMsTUFBTSxTQUN6RDtBQUFBLElBQUMsK0NBQU07QUFBTjtBQUFBLE1BQ0MsSUFBSSxvRUFBbUIsQ0FBQyxnQkFBZ0IsS0FBSztBQUFBLE1BQzdDLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxNQUNULGFBQWEsU0FBUztBQUFBLE1BQ3RCLGtCQUFrQjtBQUFBLE1BQ2xCLFVBQVUsQ0FBQ0EsV0FBVSxTQUFTLE9BQU9BLE9BQU0sS0FBTTtBQUFBLE1BQ2pELE9BQU8sU0FBUyxZQUFZO0FBQUE7QUFBQSxFQUM5QixHQUNDLFNBQVMsWUFDUjtBQUFBLElBQUMsK0NBQU07QUFBTjtBQUFBLE1BQ0MsZUFBYSxjQUFjO0FBQUEsTUFDM0IsTUFBSztBQUFBLE1BQ0wsTUFBSztBQUFBLE1BQ0wsTUFBSztBQUFBLE1BQ0wsU0FBUTtBQUFBLE1BQ1IsT0FBTyxVQUFVLFNBQVM7QUFBQSxNQUMxQixTQUFTLE1BQU0sU0FBUyxPQUFPLEVBQUU7QUFBQTtBQUFBLEVBQ25DLENBRUo7QUFFSjtBQUVBLE1BQU0sWUFBWSxDQUFDLFVBQXlCO0FBQzFDLFNBQU87QUFBQSxJQUNMLGVBQWUsaURBQUcsQ0FBQztBQUFBLE1BQ2pCLFdBQVcsTUFBTSxRQUFRLENBQUM7QUFBQSxJQUM1QixDQUFDO0FBQUEsRUFDSDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9PcGVyYXRpb25QYXJhbUVkaXRvci50c3g/Yzk1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudFR5cGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEdyYWZhbmFUaGVtZTIsIFNlbGVjdGFibGVWYWx1ZSwgdG9PcHRpb24gfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IEF1dG9TaXplSW5wdXQsIEJ1dHRvbiwgQ2hlY2tib3gsIFNlbGVjdCwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgUXVlcnlCdWlsZGVyT3BlcmF0aW9uUGFyYW1EZWYsIFF1ZXJ5QnVpbGRlck9wZXJhdGlvblBhcmFtRWRpdG9yUHJvcHMgfSBmcm9tICcuLi9zaGFyZWQvdHlwZXMnO1xuXG5pbXBvcnQgeyBnZXRPcGVyYXRpb25QYXJhbUlkIH0gZnJvbSAnLi9vcGVyYXRpb25VdGlscyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVyYXRpb25QYXJhbUVkaXRvcihcbiAgcGFyYW1EZWY6IFF1ZXJ5QnVpbGRlck9wZXJhdGlvblBhcmFtRGVmXG4pOiBDb21wb25lbnRUeXBlPFF1ZXJ5QnVpbGRlck9wZXJhdGlvblBhcmFtRWRpdG9yUHJvcHM+IHtcbiAgaWYgKHBhcmFtRGVmLmVkaXRvcikge1xuICAgIHJldHVybiBwYXJhbURlZi5lZGl0b3I7XG4gIH1cblxuICBpZiAocGFyYW1EZWYub3B0aW9ucykge1xuICAgIHJldHVybiBTZWxlY3RJbnB1dFBhcmFtRWRpdG9yO1xuICB9XG5cbiAgc3dpdGNoIChwYXJhbURlZi50eXBlKSB7XG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gQm9vbElucHV0UGFyYW1FZGl0b3I7XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gU2ltcGxlSW5wdXRQYXJhbUVkaXRvcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBTaW1wbGVJbnB1dFBhcmFtRWRpdG9yKHByb3BzOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbUVkaXRvclByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPEF1dG9TaXplSW5wdXRcbiAgICAgIGlkPXtnZXRPcGVyYXRpb25QYXJhbUlkKHByb3BzLm9wZXJhdGlvbkluZGV4LCBwcm9wcy5pbmRleCl9XG4gICAgICBkZWZhdWx0VmFsdWU9e3Byb3BzLnZhbHVlPy50b1N0cmluZygpfVxuICAgICAgbWluV2lkdGg9e3Byb3BzLnBhcmFtRGVmLm1pbldpZHRofVxuICAgICAgcGxhY2Vob2xkZXI9e3Byb3BzLnBhcmFtRGVmLnBsYWNlaG9sZGVyfVxuICAgICAgdGl0bGU9e3Byb3BzLnBhcmFtRGVmLmRlc2NyaXB0aW9ufVxuICAgICAgbWF4V2lkdGg9eyhwcm9wcy5wYXJhbURlZi5taW5XaWR0aCB8fCAyMCkgKiAzfVxuICAgICAgb25Db21taXRDaGFuZ2U9eyhldnQpID0+IHtcbiAgICAgICAgcHJvcHMub25DaGFuZ2UocHJvcHMuaW5kZXgsIGV2dC5jdXJyZW50VGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgaWYgKHByb3BzLnBhcmFtRGVmLnJ1blF1ZXJ5T25FbnRlciAmJiBldnQudHlwZSA9PT0gJ2tleWRvd24nKSB7XG4gICAgICAgICAgcHJvcHMub25SdW5RdWVyeSgpO1xuICAgICAgICB9XG4gICAgICB9fVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIEJvb2xJbnB1dFBhcmFtRWRpdG9yKHByb3BzOiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbUVkaXRvclByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPENoZWNrYm94XG4gICAgICBpZD17Z2V0T3BlcmF0aW9uUGFyYW1JZChwcm9wcy5vcGVyYXRpb25JbmRleCwgcHJvcHMuaW5kZXgpfVxuICAgICAgdmFsdWU9e3Byb3BzLnZhbHVlIGFzIGJvb2xlYW59XG4gICAgICBvbkNoYW5nZT17KGV2dCkgPT4gcHJvcHMub25DaGFuZ2UocHJvcHMuaW5kZXgsIGV2dC5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFNlbGVjdElucHV0UGFyYW1FZGl0b3Ioe1xuICBwYXJhbURlZixcbiAgdmFsdWUsXG4gIGluZGV4LFxuICBvcGVyYXRpb25JbmRleCxcbiAgb25DaGFuZ2UsXG59OiBRdWVyeUJ1aWxkZXJPcGVyYXRpb25QYXJhbUVkaXRvclByb3BzKSB7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcbiAgbGV0IHNlbGVjdE9wdGlvbnMgPSBwYXJhbURlZi5vcHRpb25zIGFzIEFycmF5PFNlbGVjdGFibGVWYWx1ZTxhbnk+PjtcblxuICBpZiAoIXNlbGVjdE9wdGlvbnNbMF0/LmxhYmVsKSB7XG4gICAgc2VsZWN0T3B0aW9ucyA9IHBhcmFtRGVmLm9wdGlvbnMhLm1hcCgob3B0aW9uKSA9PiAoe1xuICAgICAgbGFiZWw6IG9wdGlvbi50b1N0cmluZygpLFxuICAgICAgdmFsdWU6IG9wdGlvbiBhcyBzdHJpbmcsXG4gICAgfSkpO1xuICB9XG5cbiAgbGV0IHZhbHVlT3B0aW9uID0gc2VsZWN0T3B0aW9ucy5maW5kKCh4KSA9PiB4LnZhbHVlID09PSB2YWx1ZSkgPz8gdG9PcHRpb24odmFsdWUgYXMgc3RyaW5nKTtcblxuICAvLyBJZiB3ZSBoYXZlIG9wdGlvbmFsIG9wdGlvbnMgcGFyYW0gYW5kIGRvbid0IGhhdmUgdmFsdWUsIHdlIHdhbnQgdG8gcmVuZGVyIGJ1dHRvbiB3aXRoIHdoaWNoIHdlIGFkZCBvcHRpb25hbCBvcHRpb25zLlxuICAvLyBUaGlzIG1ha2VzIGl0IGVhc2llciB0byB1bmRlcnN0YW5kIHdoYXQgbmVlZHMgdG8gYmUgc2VsZWN0ZWQgYW5kIHdoYXQgaXMgb3B0aW9uYWwuXG4gIGlmICghdmFsdWUgJiYgcGFyYW1EZWYub3B0aW9uYWwpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5vcHRpb25hbFBhcmFtfT5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgdGl0bGU9e2BBZGQgJHtwYXJhbURlZi5uYW1lfWB9XG4gICAgICAgICAgaWNvbj1cInBsdXNcIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uQ2hhbmdlKGluZGV4LCBzZWxlY3RPcHRpb25zWzBdLnZhbHVlKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtwYXJhbURlZi5uYW1lfVxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxTdGFjayBnYXA9ezAuNX0gZGlyZWN0aW9uPVwicm93XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHdyYXA9e2ZhbHNlfT5cbiAgICAgIDxTZWxlY3RcbiAgICAgICAgaWQ9e2dldE9wZXJhdGlvblBhcmFtSWQob3BlcmF0aW9uSW5kZXgsIGluZGV4KX1cbiAgICAgICAgdmFsdWU9e3ZhbHVlT3B0aW9ufVxuICAgICAgICBvcHRpb25zPXtzZWxlY3RPcHRpb25zfVxuICAgICAgICBwbGFjZWhvbGRlcj17cGFyYW1EZWYucGxhY2Vob2xkZXJ9XG4gICAgICAgIGFsbG93Q3VzdG9tVmFsdWU9e3RydWV9XG4gICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IG9uQ2hhbmdlKGluZGV4LCB2YWx1ZS52YWx1ZSEpfVxuICAgICAgICB3aWR0aD17cGFyYW1EZWYubWluV2lkdGggfHwgJ2F1dG8nfVxuICAgICAgLz5cbiAgICAgIHtwYXJhbURlZi5vcHRpb25hbCAmJiAoXG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICBkYXRhLXRlc3RpZD17YG9wZXJhdGlvbnMuJHtpbmRleH0ucmVtb3ZlLXBhcmFtYH1cbiAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgIGZpbGw9XCJ0ZXh0XCJcbiAgICAgICAgICBpY29uPVwidGltZXNcIlxuICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgIHRpdGxlPXtgUmVtb3ZlICR7cGFyYW1EZWYubmFtZX1gfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uQ2hhbmdlKGluZGV4LCAnJyl9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgIDwvU3RhY2s+XG4gICk7XG59XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIG9wdGlvbmFsUGFyYW06IGNzcyh7XG4gICAgICBtYXJnaW5Ub3A6IHRoZW1lLnNwYWNpbmcoMSksXG4gICAgfSksXG4gIH07XG59O1xuIl0sIm5hbWVzIjpbInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationParamEditor.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationsEditorRow.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperationsEditorRow: () => (/* binding */ OperationsEditorRow)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n\n\n\n\n\nfunction OperationsEditorRow({ children }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useStyles2)(getStyles);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.root }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_3__.Stack, { gap: 1 }, children));\n}\nconst getStyles = (theme) => {\n  return {\n    root: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      padding: theme.spacing(1, 1, 0, 1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.borderRadius(1)\n    })\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uc0VkaXRvclJvdy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFvQjtBQUNGO0FBR0k7QUFDSztBQU1wQixTQUFTLG9CQUFvQixFQUFFLFNBQVMsR0FBVTtBQUN2RCxRQUFNLFNBQVMsdURBQVUsQ0FBQyxTQUFTO0FBRW5DLFNBQ0UsMkVBQUMsU0FBSSxXQUFXLE9BQU8sUUFDckIsMkVBQUMsd0RBQUssSUFBQyxLQUFLLEtBQUksUUFBUyxDQUMzQjtBQUVKO0FBRUEsTUFBTSxZQUFZLENBQUMsVUFBeUI7QUFDMUMsU0FBTztBQUFBLElBQ0wsTUFBTSxpREFBRyxDQUFDO0FBQUEsTUFDUixTQUFTLE1BQU0sUUFBUSxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQUEsTUFDakMsaUJBQWlCLE1BQU0sT0FBTyxXQUFXO0FBQUEsTUFDekMsY0FBYyxNQUFNLE1BQU0sYUFBYSxDQUFDO0FBQUEsSUFDMUMsQ0FBQztBQUFBLEVBQ0g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvT3BlcmF0aW9uc0VkaXRvclJvdy50c3g/Yzk2OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgU3RhY2sgfSBmcm9tICdAZ3JhZmFuYS9leHBlcmltZW50YWwnO1xuaW1wb3J0IHsgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE9wZXJhdGlvbnNFZGl0b3JSb3coeyBjaGlsZHJlbiB9OiBQcm9wcykge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnJvb3R9PlxuICAgICAgPFN0YWNrIGdhcD17MX0+e2NoaWxkcmVufTwvU3RhY2s+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIHJvb3Q6IGNzcyh7XG4gICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nKDEsIDEsIDAsIDEpLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5zZWNvbmRhcnksXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnNoYXBlLmJvcmRlclJhZGl1cygxKSxcbiAgICB9KSxcbiAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/OperationsEditorRow.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryBuilderHints.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryBuilderHints: () => (/* binding */ QueryBuilderHints)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/analytics/utils.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Tooltip/Tooltip.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n\n\n\n\n\nconst QueryBuilderHints = ({\n  datasource,\n  query: visualQuery,\n  onChange,\n  data,\n  queryModeller,\n  buildVisualQueryFromString\n}) => {\n  const [hints, setHints] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useStyles2)(getStyles);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const query = { expr: queryModeller.renderQuery(visualQuery), refId: \"\" };\n    const hints2 = datasource.getQueryHints(query, data?.series || []).filter((hint) => hint.fix?.action);\n    setHints(hints2);\n  }, [datasource, visualQuery, data, queryModeller]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, hints.length > 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.container }, hints.map((hint) => {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.Tooltip, { content: `${hint.label} ${hint.fix?.label}`, key: hint.type }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Button,\n      {\n        onClick: () => {\n          (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_5__.reportInteraction)(\"grafana_query_builder_hints_clicked\", {\n            hint: hint.type,\n            datasourceType: datasource.type\n          });\n          if (hint?.fix?.action) {\n            const query = { expr: queryModeller.renderQuery(visualQuery), refId: \"\" };\n            const newQuery = datasource.modifyQuery(query, hint.fix.action);\n            const newVisualQuery = buildVisualQueryFromString(newQuery.expr);\n            return onChange(newVisualQuery.query);\n          }\n        },\n        fill: \"outline\",\n        size: \"sm\",\n        className: styles.hint\n      },\n      \"hint: \",\n      hint.fix?.title || hint.fix?.action?.type.toLowerCase().replace(\"_\", \" \")\n    ));\n  })));\n};\nQueryBuilderHints.displayName = \"QueryBuilderHints\";\nconst getStyles = (theme) => {\n  return {\n    container: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      align-items: start;\n    `,\n    hint: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-right: ${theme.spacing(1)};\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvUXVlcnlCdWlsZGVySGludHMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFvQjtBQUN1QjtBQUdUO0FBQ1U7QUFnQnJDLE1BQU0sb0JBQW9CLENBQWdDO0FBQUEsRUFDL0Q7QUFBQSxFQUNBLE9BQU87QUFBQSxFQUNQO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0YsTUFBZ0I7QUFDZCxRQUFNLENBQUMsT0FBTyxRQUFRLElBQUksK0NBQVEsQ0FBYyxDQUFDLENBQUM7QUFDbEQsUUFBTSxTQUFTLHVEQUFVLENBQUMsU0FBUztBQUVuQyxrREFBUyxDQUFDLE1BQU07QUFDZCxVQUFNLFFBQVEsRUFBRSxNQUFNLGNBQWMsWUFBWSxXQUFXLEdBQUcsT0FBTyxHQUFHO0FBRXhFLFVBQU1BLFNBQVEsV0FBVyxjQUFjLE9BQU8sTUFBTSxVQUFVLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxTQUFTLEtBQUssS0FBSyxNQUFNO0FBQ25HLGFBQVNBLE1BQUs7QUFBQSxFQUNoQixHQUFHLENBQUMsWUFBWSxhQUFhLE1BQU0sYUFBYSxDQUFDO0FBRWpELFNBQ0UsMElBQ0csTUFBTSxTQUFTLEtBQ2QsMkVBQUMsU0FBSSxXQUFXLE9BQU8sYUFDcEIsTUFBTSxJQUFJLENBQUMsU0FBUztBQUNuQixXQUNFLDJFQUFDLGdEQUFPLElBQUMsU0FBUyxHQUFHLEtBQUssU0FBUyxLQUFLLEtBQUssU0FBUyxLQUFLLEtBQUssUUFDOUQ7QUFBQSxNQUFDLCtDQUFNO0FBQU47QUFBQSxRQUNDLFNBQVMsTUFBTTtBQUNiLDZFQUFpQixDQUFDLHVDQUF1QztBQUFBLFlBQ3ZELE1BQU0sS0FBSztBQUFBLFlBQ1gsZ0JBQWdCLFdBQVc7QUFBQSxVQUM3QixDQUFDO0FBRUQsY0FBSSxNQUFNLEtBQUssUUFBUTtBQUNyQixrQkFBTSxRQUFRLEVBQUUsTUFBTSxjQUFjLFlBQVksV0FBVyxHQUFHLE9BQU8sR0FBRztBQUN4RSxrQkFBTSxXQUFXLFdBQVcsWUFBWSxPQUFPLEtBQUssSUFBSSxNQUFNO0FBQzlELGtCQUFNLGlCQUFpQiwyQkFBMkIsU0FBUyxJQUFJO0FBQy9ELG1CQUFPLFNBQVMsZUFBZSxLQUFLO0FBQUEsVUFDdEM7QUFBQSxRQUNGO0FBQUEsUUFDQSxNQUFLO0FBQUEsUUFDTCxNQUFLO0FBQUEsUUFDTCxXQUFXLE9BQU87QUFBQTtBQUFBLE1BQ25CO0FBQUEsTUFDUSxLQUFLLEtBQUssU0FBUyxLQUFLLEtBQUssUUFBUSxLQUFLLFlBQVksRUFBRSxRQUFRLEtBQUssR0FBRztBQUFBLElBQ2pGLENBQ0Y7QUFBQSxFQUVKLENBQUMsQ0FDSCxDQUVKO0FBRUo7QUFFQSxrQkFBa0IsY0FBYztBQUVoQyxNQUFNLFlBQVksQ0FBQyxVQUF5QjtBQUMxQyxTQUFPO0FBQUEsSUFDTCxXQUFXLGlEQUFHO0FBQUg7QUFBQTtBQUFBO0FBQUEsSUFJWCxNQUFNLGlEQUFHO0FBQUgsc0JBQ1ksTUFBTSxRQUFRLENBQUM7QUFBQTtBQUFBLEVBRW5DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL1F1ZXJ5QnVpbGRlckhpbnRzLnRzeD9kYWZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiwgUGFuZWxEYXRhLCBRdWVyeUhpbnQgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IHJlcG9ydEludGVyYWN0aW9uIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBMb2tpRGF0YXNvdXJjZSB9IGZyb20gJ2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS9kYXRhc291cmNlJztcblxuaW1wb3J0IHsgUHJvbWV0aGV1c0RhdGFzb3VyY2UgfSBmcm9tICcuLi8uLi9kYXRhc291cmNlJztcblxuaW1wb3J0IHsgTG9raUFuZFByb21RdWVyeU1vZGVsbGVyQmFzZSwgUHJvbUxva2lWaXN1YWxRdWVyeSB9IGZyb20gJy4vTG9raUFuZFByb21RdWVyeU1vZGVsbGVyQmFzZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHM8VCBleHRlbmRzIFByb21Mb2tpVmlzdWFsUXVlcnk+IHtcbiAgcXVlcnk6IFQ7XG4gIGRhdGFzb3VyY2U6IFByb21ldGhldXNEYXRhc291cmNlIHwgTG9raURhdGFzb3VyY2U7XG4gIHF1ZXJ5TW9kZWxsZXI6IExva2lBbmRQcm9tUXVlcnlNb2RlbGxlckJhc2U7XG4gIGJ1aWxkVmlzdWFsUXVlcnlGcm9tU3RyaW5nOiAoZXhwcjogc3RyaW5nKSA9PiB7IHF1ZXJ5OiBUIH07XG4gIG9uQ2hhbmdlOiAodXBkYXRlOiBUKSA9PiB2b2lkO1xuICBkYXRhPzogUGFuZWxEYXRhO1xufVxuXG5leHBvcnQgY29uc3QgUXVlcnlCdWlsZGVySGludHMgPSA8VCBleHRlbmRzIFByb21Mb2tpVmlzdWFsUXVlcnk+KHtcbiAgZGF0YXNvdXJjZSxcbiAgcXVlcnk6IHZpc3VhbFF1ZXJ5LFxuICBvbkNoYW5nZSxcbiAgZGF0YSxcbiAgcXVlcnlNb2RlbGxlcixcbiAgYnVpbGRWaXN1YWxRdWVyeUZyb21TdHJpbmcsXG59OiBQcm9wczxUPikgPT4ge1xuICBjb25zdCBbaGludHMsIHNldEhpbnRzXSA9IHVzZVN0YXRlPFF1ZXJ5SGludFtdPihbXSk7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5ID0geyBleHByOiBxdWVyeU1vZGVsbGVyLnJlbmRlclF1ZXJ5KHZpc3VhbFF1ZXJ5KSwgcmVmSWQ6ICcnIH07XG4gICAgLy8gRm9yIG5vdyBzaG93IG9ubHkgYWN0aW9uYWJsZSBoaW50c1xuICAgIGNvbnN0IGhpbnRzID0gZGF0YXNvdXJjZS5nZXRRdWVyeUhpbnRzKHF1ZXJ5LCBkYXRhPy5zZXJpZXMgfHwgW10pLmZpbHRlcigoaGludCkgPT4gaGludC5maXg/LmFjdGlvbik7XG4gICAgc2V0SGludHMoaGludHMpO1xuICB9LCBbZGF0YXNvdXJjZSwgdmlzdWFsUXVlcnksIGRhdGEsIHF1ZXJ5TW9kZWxsZXJdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7aGludHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY29udGFpbmVyfT5cbiAgICAgICAgICB7aGludHMubWFwKChoaW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8VG9vbHRpcCBjb250ZW50PXtgJHtoaW50LmxhYmVsfSAke2hpbnQuZml4Py5sYWJlbH1gfSBrZXk9e2hpbnQudHlwZX0+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRJbnRlcmFjdGlvbignZ3JhZmFuYV9xdWVyeV9idWlsZGVyX2hpbnRzX2NsaWNrZWQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgaGludDogaGludC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VUeXBlOiBkYXRhc291cmNlLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChoaW50Py5maXg/LmFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0geyBleHByOiBxdWVyeU1vZGVsbGVyLnJlbmRlclF1ZXJ5KHZpc3VhbFF1ZXJ5KSwgcmVmSWQ6ICcnIH07XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UXVlcnkgPSBkYXRhc291cmNlLm1vZGlmeVF1ZXJ5KHF1ZXJ5LCBoaW50LmZpeC5hY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Zpc3VhbFF1ZXJ5ID0gYnVpbGRWaXN1YWxRdWVyeUZyb21TdHJpbmcobmV3UXVlcnkuZXhwcik7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uQ2hhbmdlKG5ld1Zpc3VhbFF1ZXJ5LnF1ZXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGZpbGw9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5oaW50fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIGhpbnQ6IHtoaW50LmZpeD8udGl0bGUgfHwgaGludC5maXg/LmFjdGlvbj8udHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ18nLCAnICcpfVxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG59O1xuXG5RdWVyeUJ1aWxkZXJIaW50cy5kaXNwbGF5TmFtZSA9ICdRdWVyeUJ1aWxkZXJIaW50cyc7XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIGNvbnRhaW5lcjogY3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBzdGFydDtcbiAgICBgLFxuICAgIGhpbnQ6IGNzc2BcbiAgICAgIG1hcmdpbi1yaWdodDogJHt0aGVtZS5zcGFjaW5nKDEpfTtcbiAgICBgLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJoaW50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryBuilderHints.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryEditorModeToggle.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryEditorModeToggle: () => (/* binding */ QueryEditorModeToggle)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/datasource/prometheus/querybuilder/shared/types.ts\");\n\n\n\n\nconst editorModes = [\n  { label: \"Builder\", value: _types__WEBPACK_IMPORTED_MODULE_1__.QueryEditorMode.Builder },\n  { label: \"Code\", value: _types__WEBPACK_IMPORTED_MODULE_1__.QueryEditorMode.Code }\n];\nfunction QueryEditorModeToggle({ mode, onChange }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { \"data-testid\": \"QueryEditorModeToggle\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.RadioButtonGroup, { options: editorModes, size: \"sm\", value: mode, onChange }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvUXVlcnlFZGl0b3JNb2RlVG9nZ2xlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0I7QUFFZTtBQUVEO0FBT2hDLE1BQU0sY0FBYztBQUFBLEVBQ2xCLEVBQUUsT0FBTyxXQUFXLE9BQU8sbURBQWUsQ0FBQyxRQUFRO0FBQUEsRUFDbkQsRUFBRSxPQUFPLFFBQVEsT0FBTyxtREFBZSxDQUFDLEtBQUs7QUFDL0M7QUFFTyxTQUFTLHNCQUFzQixFQUFFLE1BQU0sU0FBUyxHQUFVO0FBQy9ELFNBQ0UsMkVBQUMsU0FBSSxlQUFhLDJCQUNoQiwyRUFBQyx5REFBZ0IsSUFBQyxTQUFTLGFBQWEsTUFBSyxNQUFLLE9BQU8sTUFBTSxVQUFvQixDQUNyRjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9RdWVyeUVkaXRvck1vZGVUb2dnbGUudHN4PzI4NDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgUmFkaW9CdXR0b25Hcm91cCB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgUXVlcnlFZGl0b3JNb2RlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICBtb2RlOiBRdWVyeUVkaXRvck1vZGU7XG4gIG9uQ2hhbmdlOiAobW9kZTogUXVlcnlFZGl0b3JNb2RlKSA9PiB2b2lkO1xufVxuXG5jb25zdCBlZGl0b3JNb2RlcyA9IFtcbiAgeyBsYWJlbDogJ0J1aWxkZXInLCB2YWx1ZTogUXVlcnlFZGl0b3JNb2RlLkJ1aWxkZXIgfSxcbiAgeyBsYWJlbDogJ0NvZGUnLCB2YWx1ZTogUXVlcnlFZGl0b3JNb2RlLkNvZGUgfSxcbl07XG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeUVkaXRvck1vZGVUb2dnbGUoeyBtb2RlLCBvbkNoYW5nZSB9OiBQcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgZGF0YS10ZXN0aWQ9eydRdWVyeUVkaXRvck1vZGVUb2dnbGUnfT5cbiAgICAgIDxSYWRpb0J1dHRvbkdyb3VwIG9wdGlvbnM9e2VkaXRvck1vZGVzfSBzaXplPVwic21cIiB2YWx1ZT17bW9kZX0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryEditorModeToggle.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryHeaderSwitch.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryHeaderSwitch: () => (/* binding */ QueryHeaderSwitch)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Switch/Switch.tsx\");\n\n\n\n\n\n\nfunction QueryHeaderSwitch({ label, ...inputProps }) {\n  const dashedLabel = label.replace(\" \", \"-\");\n  const switchIdRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)((0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(`switch-${dashedLabel}`));\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useStyles2)(getStyles);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_4__.Stack, { gap: 1 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"label\", { htmlFor: switchIdRef.current, className: styles.switchLabel }, label), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Switch, { ...inputProps, id: switchIdRef.current }));\n}\nconst getStyles = (theme) => {\n  return {\n    switchLabel: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      color: theme.colors.text.secondary,\n      cursor: \"pointer\",\n      fontSize: theme.typography.bodySmall.fontSize,\n      \"&:hover\": {\n        color: theme.colors.text.primary\n      }\n    })\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvUXVlcnlIZWFkZXJTd2l0Y2gudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDSztBQUNnQjtBQUduQjtBQUNhO0FBTzVCLFNBQVMsa0JBQWtCLEVBQUUsT0FBTyxHQUFHLFdBQVcsR0FBVTtBQUNqRSxRQUFNLGNBQWMsTUFBTSxRQUFRLEtBQUssR0FBRztBQUMxQyxRQUFNLGNBQWMsNkNBQU0sQ0FBQyxnREFBUSxDQUFDLFVBQVUsYUFBYSxDQUFDO0FBQzVELFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFFbkMsU0FDRSwyRUFBQyx3REFBSyxJQUFDLEtBQUssS0FDViwyRUFBQyxXQUFNLFNBQVMsWUFBWSxTQUFTLFdBQVcsT0FBTyxlQUNwRCxLQUNILEdBQ0EsMkVBQUMsK0NBQU0sSUFBRSxHQUFHLFlBQVksSUFBSSxZQUFZLFNBQVMsQ0FDbkQ7QUFFSjtBQUVBLE1BQU0sWUFBWSxDQUFDLFVBQXlCO0FBQzFDLFNBQU87QUFBQSxJQUNMLGFBQWEsaURBQUcsQ0FBQztBQUFBLE1BQ2YsT0FBTyxNQUFNLE9BQU8sS0FBSztBQUFBLE1BQ3pCLFFBQVE7QUFBQSxNQUNSLFVBQVUsTUFBTSxXQUFXLFVBQVU7QUFBQSxNQUNyQyxXQUFXO0FBQUEsUUFDVCxPQUFPLE1BQU0sT0FBTyxLQUFLO0FBQUEsTUFDM0I7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvcHJvbWV0aGV1cy9xdWVyeWJ1aWxkZXIvc2hhcmVkL1F1ZXJ5SGVhZGVyU3dpdGNoLnRzeD85Yjc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgSFRNTFByb3BzLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEdyYWZhbmFUaGVtZTIgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IFN3aXRjaCwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyBleHRlbmRzIE9taXQ8SFRNTFByb3BzPEhUTUxJbnB1dEVsZW1lbnQ+LCAndmFsdWUnIHwgJ3JlZic+IHtcbiAgdmFsdWU/OiBib29sZWFuO1xuICBsYWJlbDogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlIZWFkZXJTd2l0Y2goeyBsYWJlbCwgLi4uaW5wdXRQcm9wcyB9OiBQcm9wcykge1xuICBjb25zdCBkYXNoZWRMYWJlbCA9IGxhYmVsLnJlcGxhY2UoJyAnLCAnLScpO1xuICBjb25zdCBzd2l0Y2hJZFJlZiA9IHVzZVJlZih1bmlxdWVJZChgc3dpdGNoLSR7ZGFzaGVkTGFiZWx9YCkpO1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG5cbiAgcmV0dXJuIChcbiAgICA8U3RhY2sgZ2FwPXsxfT5cbiAgICAgIDxsYWJlbCBodG1sRm9yPXtzd2l0Y2hJZFJlZi5jdXJyZW50fSBjbGFzc05hbWU9e3N0eWxlcy5zd2l0Y2hMYWJlbH0+XG4gICAgICAgIHtsYWJlbH1cbiAgICAgIDwvbGFiZWw+XG4gICAgICA8U3dpdGNoIHsuLi5pbnB1dFByb3BzfSBpZD17c3dpdGNoSWRSZWYuY3VycmVudH0gLz5cbiAgICA8L1N0YWNrPlxuICApO1xufVxuXG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBzd2l0Y2hMYWJlbDogY3NzKHtcbiAgICAgIGNvbG9yOiB0aGVtZS5jb2xvcnMudGV4dC5zZWNvbmRhcnksXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmJvZHlTbWFsbC5mb250U2l6ZSxcbiAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUuY29sb3JzLnRleHQucHJpbWFyeSxcbiAgICAgIH0sXG4gICAgfSksXG4gIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryHeaderSwitch.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryOptionGroup.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryOptionGroup: () => (/* binding */ QueryOptionGroup)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useToggle.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/valueFormats/valueFormats.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Collapse/Collapse.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Tooltip/Tooltip.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n\n\n\n\n\n\n\n\nfunction QueryOptionGroup({ title, children, collapsedInfo, queryStats }) {\n  const [isOpen, toggleOpen] = (0,react_use__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(false);\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useStyles2)(getStyles);\n  const convertUnits = () => {\n    const { text, suffix } = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_4__.getValueFormat)(\"bytes\")(queryStats.bytes, 1);\n    return text + suffix;\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.wrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.Collapse,\n    {\n      className: styles.collapse,\n      collapsible: true,\n      isOpen,\n      onToggle: toggleOpen,\n      label: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_6__.Stack, { gap: 0, wrap: false }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"h6\", { className: styles.title }, title), !isOpen && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.description }, collapsedInfo.map((x, i) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { key: i }, x))))\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.body }, children)\n  ), queryStats && _grafana_runtime__WEBPACK_IMPORTED_MODULE_7__.config.featureToggles.lokiQuerySplitting && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Tooltip, { content: \"Note: the query will be split into multiple parts and executed in sequence. Query limits will only apply each individual part.\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_9__.Icon, { tabIndex: 0, name: \"info-circle\", className: styles.tooltip, size: \"sm\" })), queryStats && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"p\", { className: styles.stats }, \"This query will process approximately \", convertUnits(), \".\"));\n}\nconst getStyles = (theme) => {\n  return {\n    collapse: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      backgroundColor: \"unset\",\n      border: \"unset\",\n      marginBottom: 0,\n      [\"> button\"]: {\n        padding: theme.spacing(0, 1)\n      }\n    }),\n    wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      width: \"100%\",\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"baseline\"\n    }),\n    title: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      flexGrow: 1,\n      overflow: \"hidden\",\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      margin: 0\n    }),\n    description: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.bodySmall.fontWeight,\n      paddingLeft: theme.spacing(2),\n      gap: theme.spacing(2),\n      display: \"flex\"\n    }),\n    body: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      display: \"flex\",\n      gap: theme.spacing(2),\n      flexWrap: \"wrap\"\n    }),\n    stats: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      margin: \"0px\",\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize\n    }),\n    tooltip: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n      marginRight: theme.spacing(0.25)\n    })\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvUXVlcnlPcHRpb25Hcm91cC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNGO0FBQ1E7QUFFb0I7QUFDeEI7QUFDQztBQUM2QjtBQVU3QyxTQUFTLGlCQUFpQixFQUFFLE9BQU8sVUFBVSxlQUFlLFdBQVcsR0FBVTtBQUN0RixRQUFNLENBQUMsUUFBUSxVQUFVLElBQUkscURBQVMsQ0FBQyxLQUFLO0FBQzVDLFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFFbkMsUUFBTSxlQUFlLE1BQWM7QUFDakMsVUFBTSxFQUFFLE1BQU0sT0FBTyxJQUFJLDZEQUFjLENBQUMsT0FBTyxFQUFFLFdBQVksT0FBTyxDQUFDO0FBQ3JFLFdBQU8sT0FBTztBQUFBLEVBQ2hCO0FBRUEsU0FDRSwyRUFBQyxTQUFJLFdBQVcsT0FBTyxXQUNyQjtBQUFBLElBQUMsaURBQVE7QUFBUjtBQUFBLE1BQ0MsV0FBVyxPQUFPO0FBQUEsTUFDbEIsYUFBVztBQUFBLE1BQ1g7QUFBQSxNQUNBLFVBQVU7QUFBQSxNQUNWLE9BQ0UsMkVBQUMsd0RBQUssSUFBQyxLQUFLLEdBQUcsTUFBTSxTQUNuQiwyRUFBQyxRQUFHLFdBQVcsT0FBTyxTQUFRLEtBQU0sR0FDbkMsQ0FBQyxVQUNBLDJFQUFDLFNBQUksV0FBVyxPQUFPLGVBQ3BCLGNBQWMsSUFBSSxDQUFDLEdBQUcsTUFDckIsMkVBQUMsVUFBSyxLQUFLLEtBQUksQ0FBRSxDQUNsQixDQUNILENBRUo7QUFBQTtBQUFBLElBR0YsMkVBQUMsU0FBSSxXQUFXLE9BQU8sUUFBTyxRQUFTO0FBQUEsRUFDekMsR0FDQyxjQUFjLG9EQUFNLENBQUMsZUFBZSxzQkFDbkMsMkVBQUMsZ0RBQU8sSUFBQyxTQUFRLG9JQUNmLDJFQUFDLDZDQUFJLElBQUMsVUFBVSxHQUFHLE1BQUssZUFBYyxXQUFXLE9BQU8sU0FBUyxNQUFLLE1BQUssQ0FDN0UsR0FFRCxjQUFjLDJFQUFDLE9BQUUsV0FBVyxPQUFPLFNBQU8sMENBQXVDLGFBQWEsR0FBRSxHQUFDLENBQ3BHO0FBRUo7QUFFQSxNQUFNLFlBQVksQ0FBQyxVQUF5QjtBQUMxQyxTQUFPO0FBQUEsSUFDTCxVQUFVLGlEQUFHLENBQUM7QUFBQSxNQUNaLGlCQUFpQjtBQUFBLE1BQ2pCLFFBQVE7QUFBQSxNQUNSLGNBQWM7QUFBQSxNQUVkLENBQUMsVUFBVSxHQUFHO0FBQUEsUUFDWixTQUFTLE1BQU0sUUFBUSxHQUFHLENBQUM7QUFBQSxNQUM3QjtBQUFBLElBQ0YsQ0FBQztBQUFBLElBQ0QsU0FBUyxpREFBRyxDQUFDO0FBQUEsTUFDWCxPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsTUFDVCxnQkFBZ0I7QUFBQSxNQUNoQixZQUFZO0FBQUEsSUFDZCxDQUFDO0FBQUEsSUFDRCxPQUFPLGlEQUFHLENBQUM7QUFBQSxNQUNULFVBQVU7QUFBQSxNQUNWLFVBQVU7QUFBQSxNQUNWLFVBQVUsTUFBTSxXQUFXLFVBQVU7QUFBQSxNQUNyQyxZQUFZLE1BQU0sV0FBVztBQUFBLE1BQzdCLFFBQVE7QUFBQSxJQUNWLENBQUM7QUFBQSxJQUNELGFBQWEsaURBQUcsQ0FBQztBQUFBLE1BQ2YsT0FBTyxNQUFNLE9BQU8sS0FBSztBQUFBLE1BQ3pCLFVBQVUsTUFBTSxXQUFXLFVBQVU7QUFBQSxNQUNyQyxZQUFZLE1BQU0sV0FBVyxVQUFVO0FBQUEsTUFDdkMsYUFBYSxNQUFNLFFBQVEsQ0FBQztBQUFBLE1BQzVCLEtBQUssTUFBTSxRQUFRLENBQUM7QUFBQSxNQUNwQixTQUFTO0FBQUEsSUFDWCxDQUFDO0FBQUEsSUFDRCxNQUFNLGlEQUFHLENBQUM7QUFBQSxNQUNSLFNBQVM7QUFBQSxNQUNULEtBQUssTUFBTSxRQUFRLENBQUM7QUFBQSxNQUNwQixVQUFVO0FBQUEsSUFDWixDQUFDO0FBQUEsSUFDRCxPQUFPLGlEQUFHLENBQUM7QUFBQSxNQUNULFFBQVE7QUFBQSxNQUNSLE9BQU8sTUFBTSxPQUFPLEtBQUs7QUFBQSxNQUN6QixVQUFVLE1BQU0sV0FBVyxVQUFVO0FBQUEsSUFDdkMsQ0FBQztBQUFBLElBQ0QsU0FBUyxpREFBRyxDQUFDO0FBQUEsTUFDWCxhQUFhLE1BQU0sUUFBUSxJQUFJO0FBQUEsSUFDakMsQ0FBQztBQUFBLEVBQ0g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvUXVlcnlPcHRpb25Hcm91cC50c3g/M2U3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVRvZ2dsZSB9IGZyb20gJ3JlYWN0LXVzZSc7XG5cbmltcG9ydCB7IGdldFZhbHVlRm9ybWF0LCBHcmFmYW5hVGhlbWUyIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBTdGFjayB9IGZyb20gJ0BncmFmYW5hL2V4cGVyaW1lbnRhbCc7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcbmltcG9ydCB7IENvbGxhcHNlLCBJY29uLCBUb29sdGlwLCB1c2VTdHlsZXMyIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgUXVlcnlTdGF0cyB9IGZyb20gJ2FwcC9wbHVnaW5zL2RhdGFzb3VyY2UvbG9raS90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICB0aXRsZTogc3RyaW5nO1xuICBjb2xsYXBzZWRJbmZvOiBzdHJpbmdbXTtcbiAgcXVlcnlTdGF0cz86IFF1ZXJ5U3RhdHMgfCBudWxsO1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlPcHRpb25Hcm91cCh7IHRpdGxlLCBjaGlsZHJlbiwgY29sbGFwc2VkSW5mbywgcXVlcnlTdGF0cyB9OiBQcm9wcykge1xuICBjb25zdCBbaXNPcGVuLCB0b2dnbGVPcGVuXSA9IHVzZVRvZ2dsZShmYWxzZSk7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcblxuICBjb25zdCBjb252ZXJ0VW5pdHMgPSAoKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCB7IHRleHQsIHN1ZmZpeCB9ID0gZ2V0VmFsdWVGb3JtYXQoJ2J5dGVzJykocXVlcnlTdGF0cyEuYnl0ZXMsIDEpO1xuICAgIHJldHVybiB0ZXh0ICsgc3VmZml4O1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy53cmFwcGVyfT5cbiAgICAgIDxDb2xsYXBzZVxuICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5jb2xsYXBzZX1cbiAgICAgICAgY29sbGFwc2libGVcbiAgICAgICAgaXNPcGVuPXtpc09wZW59XG4gICAgICAgIG9uVG9nZ2xlPXt0b2dnbGVPcGVufVxuICAgICAgICBsYWJlbD17XG4gICAgICAgICAgPFN0YWNrIGdhcD17MH0gd3JhcD17ZmFsc2V9PlxuICAgICAgICAgICAgPGg2IGNsYXNzTmFtZT17c3R5bGVzLnRpdGxlfT57dGl0bGV9PC9oNj5cbiAgICAgICAgICAgIHshaXNPcGVuICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5kZXNjcmlwdGlvbn0+XG4gICAgICAgICAgICAgICAge2NvbGxhcHNlZEluZm8ubWFwKCh4LCBpKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9e2l9Pnt4fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvU3RhY2s+XG4gICAgICAgIH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ib2R5fT57Y2hpbGRyZW59PC9kaXY+XG4gICAgICA8L0NvbGxhcHNlPlxuICAgICAge3F1ZXJ5U3RhdHMgJiYgY29uZmlnLmZlYXR1cmVUb2dnbGVzLmxva2lRdWVyeVNwbGl0dGluZyAmJiAoXG4gICAgICAgIDxUb29sdGlwIGNvbnRlbnQ9XCJOb3RlOiB0aGUgcXVlcnkgd2lsbCBiZSBzcGxpdCBpbnRvIG11bHRpcGxlIHBhcnRzIGFuZCBleGVjdXRlZCBpbiBzZXF1ZW5jZS4gUXVlcnkgbGltaXRzIHdpbGwgb25seSBhcHBseSBlYWNoIGluZGl2aWR1YWwgcGFydC5cIj5cbiAgICAgICAgICA8SWNvbiB0YWJJbmRleD17MH0gbmFtZT1cImluZm8tY2lyY2xlXCIgY2xhc3NOYW1lPXtzdHlsZXMudG9vbHRpcH0gc2l6ZT1cInNtXCIgLz5cbiAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgKX1cbiAgICAgIHtxdWVyeVN0YXRzICYmIDxwIGNsYXNzTmFtZT17c3R5bGVzLnN0YXRzfT5UaGlzIHF1ZXJ5IHdpbGwgcHJvY2VzcyBhcHByb3hpbWF0ZWx5IHtjb252ZXJ0VW5pdHMoKX0uPC9wPn1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiB7XG4gIHJldHVybiB7XG4gICAgY29sbGFwc2U6IGNzcyh7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd1bnNldCcsXG4gICAgICBib3JkZXI6ICd1bnNldCcsXG4gICAgICBtYXJnaW5Cb3R0b206IDAsXG5cbiAgICAgIFsnPiBidXR0b24nXToge1xuICAgICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nKDAsIDEpLFxuICAgICAgfSxcbiAgICB9KSxcbiAgICB3cmFwcGVyOiBjc3Moe1xuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICBhbGlnbkl0ZW1zOiAnYmFzZWxpbmUnLFxuICAgIH0pLFxuICAgIHRpdGxlOiBjc3Moe1xuICAgICAgZmxleEdyb3c6IDEsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBmb250U2l6ZTogdGhlbWUudHlwb2dyYXBoeS5ib2R5U21hbGwuZm9udFNpemUsXG4gICAgICBmb250V2VpZ2h0OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRXZWlnaHRNZWRpdW0sXG4gICAgICBtYXJnaW46IDAsXG4gICAgfSksXG4gICAgZGVzY3JpcHRpb246IGNzcyh7XG4gICAgICBjb2xvcjogdGhlbWUuY29sb3JzLnRleHQuc2Vjb25kYXJ5LFxuICAgICAgZm9udFNpemU6IHRoZW1lLnR5cG9ncmFwaHkuYm9keVNtYWxsLmZvbnRTaXplLFxuICAgICAgZm9udFdlaWdodDogdGhlbWUudHlwb2dyYXBoeS5ib2R5U21hbGwuZm9udFdlaWdodCxcbiAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgICAgZ2FwOiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIH0pLFxuICAgIGJvZHk6IGNzcyh7XG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBnYXA6IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgICBmbGV4V3JhcDogJ3dyYXAnLFxuICAgIH0pLFxuICAgIHN0YXRzOiBjc3Moe1xuICAgICAgbWFyZ2luOiAnMHB4JyxcbiAgICAgIGNvbG9yOiB0aGVtZS5jb2xvcnMudGV4dC5zZWNvbmRhcnksXG4gICAgICBmb250U2l6ZTogdGhlbWUudHlwb2dyYXBoeS5ib2R5U21hbGwuZm9udFNpemUsXG4gICAgfSksXG4gICAgdG9vbHRpcDogY3NzKHtcbiAgICAgIG1hcmdpblJpZ2h0OiB0aGVtZS5zcGFjaW5nKDAuMjUpLFxuICAgIH0pLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/QueryOptionGroup.tsx\n");

/***/ }),

/***/ "./public/app/plugins/datasource/prometheus/querybuilder/shared/hooks/useFlag.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   lokiQueryEditorExplainKey: () => (/* binding */ lokiQueryEditorExplainKey),\n/* harmony export */   lokiQueryEditorRawQueryKey: () => (/* binding */ lokiQueryEditorRawQueryKey),\n/* harmony export */   promQueryEditorExplainKey: () => (/* binding */ promQueryEditorExplainKey),\n/* harmony export */   promQueryEditorRawQueryKey: () => (/* binding */ promQueryEditorRawQueryKey),\n/* harmony export */   useFlag: () => (/* binding */ useFlag)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/store.ts\");\n\n\n\nconst promQueryEditorExplainKey = \"PrometheusQueryEditorExplainDefault\";\nconst promQueryEditorRawQueryKey = \"PrometheusQueryEditorRawQueryDefault\";\nconst lokiQueryEditorExplainKey = \"LokiQueryEditorExplainDefault\";\nconst lokiQueryEditorRawQueryKey = \"LokiQueryEditorRawQueryDefault\";\nfunction getFlagValue(key, defaultValue = false) {\n  const val = _core_store__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(key);\n  return val === void 0 ? defaultValue : Boolean(parseInt(val, 10));\n}\nfunction setFlagValue(key, value) {\n  _core_store__WEBPACK_IMPORTED_MODULE_1__[\"default\"].set(key, value ? \"1\" : \"0\");\n}\nfunction useFlag(key, defaultValue = false) {\n  const [flag, updateFlag] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getFlagValue(key, defaultValue));\n  const setter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (value) => {\n      setFlagValue(key, value);\n      updateFlag(value);\n    },\n    [key]\n  );\n  return { flag, setFlag: setter };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3F1ZXJ5YnVpbGRlci9zaGFyZWQvaG9va3MvdXNlRmxhZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBc0M7QUFFcEI7QUFFWCxNQUFNLDRCQUE0QjtBQUNsQyxNQUFNLDZCQUE2QjtBQUNuQyxNQUFNLDRCQUE0QjtBQUNsQyxNQUFNLDZCQUE2QjtBQVExQyxTQUFTLGFBQWEsS0FBdUIsZUFBZSxPQUFnQjtBQUMxRSxRQUFNLE1BQU0sbURBQUssQ0FBQyxJQUFJLEdBQUc7QUFDekIsU0FBTyxRQUFRLFNBQVksZUFBZSxRQUFRLFNBQVMsS0FBSyxFQUFFLENBQUM7QUFDckU7QUFFQSxTQUFTLGFBQWEsS0FBdUIsT0FBZ0I7QUFDM0QscURBQUssQ0FBQyxJQUFJLEtBQUssUUFBUSxNQUFNLEdBQUc7QUFDbEM7QUFTTyxTQUFTLFFBQVEsS0FBdUIsZUFBZSxPQUE4QjtBQUMxRixRQUFNLENBQUMsTUFBTSxVQUFVLElBQUksK0NBQVEsQ0FBQyxhQUFhLEtBQUssWUFBWSxDQUFDO0FBQ25FLFFBQU0sU0FBUyxrREFBVztBQUFYLElBQ2IsQ0FBQyxVQUFtQjtBQUNsQixtQkFBYSxLQUFLLEtBQUs7QUFDdkIsaUJBQVcsS0FBSztBQUFBLElBQ2xCO0FBQUEsSUFDQSxDQUFDLEdBQUc7QUFBQSxFQUNOO0FBRUEsU0FBTyxFQUFFLE1BQU0sU0FBUyxPQUFPO0FBQ2pDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9kYXRhc291cmNlL3Byb21ldGhldXMvcXVlcnlidWlsZGVyL3NoYXJlZC9ob29rcy91c2VGbGFnLnRzP2Q5ZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgc3RvcmUgZnJvbSAnLi4vLi4vLi4vLi4vLi4vLi4vY29yZS9zdG9yZSc7XG5cbmV4cG9ydCBjb25zdCBwcm9tUXVlcnlFZGl0b3JFeHBsYWluS2V5ID0gJ1Byb21ldGhldXNRdWVyeUVkaXRvckV4cGxhaW5EZWZhdWx0JztcbmV4cG9ydCBjb25zdCBwcm9tUXVlcnlFZGl0b3JSYXdRdWVyeUtleSA9ICdQcm9tZXRoZXVzUXVlcnlFZGl0b3JSYXdRdWVyeURlZmF1bHQnO1xuZXhwb3J0IGNvbnN0IGxva2lRdWVyeUVkaXRvckV4cGxhaW5LZXkgPSAnTG9raVF1ZXJ5RWRpdG9yRXhwbGFpbkRlZmF1bHQnO1xuZXhwb3J0IGNvbnN0IGxva2lRdWVyeUVkaXRvclJhd1F1ZXJ5S2V5ID0gJ0xva2lRdWVyeUVkaXRvclJhd1F1ZXJ5RGVmYXVsdCc7XG5cbmV4cG9ydCB0eXBlIFF1ZXJ5RWRpdG9yRmxhZ3MgPVxuICB8IHR5cGVvZiBwcm9tUXVlcnlFZGl0b3JFeHBsYWluS2V5XG4gIHwgdHlwZW9mIHByb21RdWVyeUVkaXRvclJhd1F1ZXJ5S2V5XG4gIHwgdHlwZW9mIGxva2lRdWVyeUVkaXRvckV4cGxhaW5LZXlcbiAgfCB0eXBlb2YgbG9raVF1ZXJ5RWRpdG9yUmF3UXVlcnlLZXk7XG5cbmZ1bmN0aW9uIGdldEZsYWdWYWx1ZShrZXk6IFF1ZXJ5RWRpdG9yRmxhZ3MsIGRlZmF1bHRWYWx1ZSA9IGZhbHNlKTogYm9vbGVhbiB7XG4gIGNvbnN0IHZhbCA9IHN0b3JlLmdldChrZXkpO1xuICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiBCb29sZWFuKHBhcnNlSW50KHZhbCwgMTApKTtcbn1cblxuZnVuY3Rpb24gc2V0RmxhZ1ZhbHVlKGtleTogUXVlcnlFZGl0b3JGbGFncywgdmFsdWU6IGJvb2xlYW4pIHtcbiAgc3RvcmUuc2V0KGtleSwgdmFsdWUgPyAnMScgOiAnMCcpO1xufVxuXG50eXBlIFVzZUZsYWdIb29rUmV0dXJuVHlwZSA9IHsgZmxhZzogYm9vbGVhbjsgc2V0RmxhZzogKHZhbDogYm9vbGVhbikgPT4gdm9pZCB9O1xuXG4vKipcbiAqXG4gKiBVc2UgYW5kIHN0b3JlIHZhbHVlIG9mIGV4cGxhaW4vcmF3cXVlcnkgc3dpdGNoIGluIGxvY2FsIHN0b3JhZ2UuXG4gKiBOZWVkcyB0byBiZSBhIGhvb2sgd2l0aCBsb2NhbCBzdGF0ZSB0byB0cmlnZ2VyIHJlLXJlbmRlcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGbGFnKGtleTogUXVlcnlFZGl0b3JGbGFncywgZGVmYXVsdFZhbHVlID0gZmFsc2UpOiBVc2VGbGFnSG9va1JldHVyblR5cGUge1xuICBjb25zdCBbZmxhZywgdXBkYXRlRmxhZ10gPSB1c2VTdGF0ZShnZXRGbGFnVmFsdWUoa2V5LCBkZWZhdWx0VmFsdWUpKTtcbiAgY29uc3Qgc2V0dGVyID0gdXNlQ2FsbGJhY2soXG4gICAgKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICBzZXRGbGFnVmFsdWUoa2V5LCB2YWx1ZSk7XG4gICAgICB1cGRhdGVGbGFnKHZhbHVlKTtcbiAgICB9LFxuICAgIFtrZXldXG4gICk7XG5cbiAgcmV0dXJuIHsgZmxhZywgc2V0RmxhZzogc2V0dGVyIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/datasource/prometheus/querybuilder/shared/hooks/useFlag.ts\n");

/***/ }),

/***/ "./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/dom/WebSocketSubject.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebSocketSubject: () => (/* binding */ WebSocketSubject)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/tslib-npm-2.3.1-0e21e18015-de17a98d46.zip/node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/Subject.js\");\n/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/Subscriber.js\");\n/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/Observable.js\");\n/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js\");\n/* harmony import */ var _ReplaySubject__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n\n\n\n\n\n\nvar DEFAULT_WEBSOCKET_CONFIG = {\n    url: '',\n    deserializer: function (e) { return JSON.parse(e.data); },\n    serializer: function (value) { return JSON.stringify(value); },\n};\nvar WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT = 'WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }';\nvar WebSocketSubject = (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(WebSocketSubject, _super);\n    function WebSocketSubject(urlConfigOrSource, destination) {\n        var _this = _super.call(this) || this;\n        _this._socket = null;\n        if (urlConfigOrSource instanceof _Observable__WEBPACK_IMPORTED_MODULE_1__.Observable) {\n            _this.destination = destination;\n            _this.source = urlConfigOrSource;\n        }\n        else {\n            var config = (_this._config = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, DEFAULT_WEBSOCKET_CONFIG));\n            _this._output = new _Subject__WEBPACK_IMPORTED_MODULE_2__.Subject();\n            if (typeof urlConfigOrSource === 'string') {\n                config.url = urlConfigOrSource;\n            }\n            else {\n                for (var key in urlConfigOrSource) {\n                    if (urlConfigOrSource.hasOwnProperty(key)) {\n                        config[key] = urlConfigOrSource[key];\n                    }\n                }\n            }\n            if (!config.WebSocketCtor && WebSocket) {\n                config.WebSocketCtor = WebSocket;\n            }\n            else if (!config.WebSocketCtor) {\n                throw new Error('no WebSocket constructor can be found');\n            }\n            _this.destination = new _ReplaySubject__WEBPACK_IMPORTED_MODULE_3__.ReplaySubject();\n        }\n        return _this;\n    }\n    WebSocketSubject.prototype.lift = function (operator) {\n        var sock = new WebSocketSubject(this._config, this.destination);\n        sock.operator = operator;\n        sock.source = this;\n        return sock;\n    };\n    WebSocketSubject.prototype._resetState = function () {\n        this._socket = null;\n        if (!this.source) {\n            this.destination = new _ReplaySubject__WEBPACK_IMPORTED_MODULE_3__.ReplaySubject();\n        }\n        this._output = new _Subject__WEBPACK_IMPORTED_MODULE_2__.Subject();\n    };\n    WebSocketSubject.prototype.multiplex = function (subMsg, unsubMsg, messageFilter) {\n        var self = this;\n        return new _Observable__WEBPACK_IMPORTED_MODULE_1__.Observable(function (observer) {\n            try {\n                self.next(subMsg());\n            }\n            catch (err) {\n                observer.error(err);\n            }\n            var subscription = self.subscribe({\n                next: function (x) {\n                    try {\n                        if (messageFilter(x)) {\n                            observer.next(x);\n                        }\n                    }\n                    catch (err) {\n                        observer.error(err);\n                    }\n                },\n                error: function (err) { return observer.error(err); },\n                complete: function () { return observer.complete(); },\n            });\n            return function () {\n                try {\n                    self.next(unsubMsg());\n                }\n                catch (err) {\n                    observer.error(err);\n                }\n                subscription.unsubscribe();\n            };\n        });\n    };\n    WebSocketSubject.prototype._connectSocket = function () {\n        var _this = this;\n        var _a = this._config, WebSocketCtor = _a.WebSocketCtor, protocol = _a.protocol, url = _a.url, binaryType = _a.binaryType;\n        var observer = this._output;\n        var socket = null;\n        try {\n            socket = protocol ? new WebSocketCtor(url, protocol) : new WebSocketCtor(url);\n            this._socket = socket;\n            if (binaryType) {\n                this._socket.binaryType = binaryType;\n            }\n        }\n        catch (e) {\n            observer.error(e);\n            return;\n        }\n        var subscription = new _Subscription__WEBPACK_IMPORTED_MODULE_4__.Subscription(function () {\n            _this._socket = null;\n            if (socket && socket.readyState === 1) {\n                socket.close();\n            }\n        });\n        socket.onopen = function (evt) {\n            var _socket = _this._socket;\n            if (!_socket) {\n                socket.close();\n                _this._resetState();\n                return;\n            }\n            var openObserver = _this._config.openObserver;\n            if (openObserver) {\n                openObserver.next(evt);\n            }\n            var queue = _this.destination;\n            _this.destination = _Subscriber__WEBPACK_IMPORTED_MODULE_5__.Subscriber.create(function (x) {\n                if (socket.readyState === 1) {\n                    try {\n                        var serializer = _this._config.serializer;\n                        socket.send(serializer(x));\n                    }\n                    catch (e) {\n                        _this.destination.error(e);\n                    }\n                }\n            }, function (err) {\n                var closingObserver = _this._config.closingObserver;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                if (err && err.code) {\n                    socket.close(err.code, err.reason);\n                }\n                else {\n                    observer.error(new TypeError(WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT));\n                }\n                _this._resetState();\n            }, function () {\n                var closingObserver = _this._config.closingObserver;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                socket.close();\n                _this._resetState();\n            });\n            if (queue && queue instanceof _ReplaySubject__WEBPACK_IMPORTED_MODULE_3__.ReplaySubject) {\n                subscription.add(queue.subscribe(_this.destination));\n            }\n        };\n        socket.onerror = function (e) {\n            _this._resetState();\n            observer.error(e);\n        };\n        socket.onclose = function (e) {\n            if (socket === _this._socket) {\n                _this._resetState();\n            }\n            var closeObserver = _this._config.closeObserver;\n            if (closeObserver) {\n                closeObserver.next(e);\n            }\n            if (e.wasClean) {\n                observer.complete();\n            }\n            else {\n                observer.error(e);\n            }\n        };\n        socket.onmessage = function (e) {\n            try {\n                var deserializer = _this._config.deserializer;\n                observer.next(deserializer(e));\n            }\n            catch (err) {\n                observer.error(err);\n            }\n        };\n    };\n    WebSocketSubject.prototype._subscribe = function (subscriber) {\n        var _this = this;\n        var source = this.source;\n        if (source) {\n            return source.subscribe(subscriber);\n        }\n        if (!this._socket) {\n            this._connectSocket();\n        }\n        this._output.subscribe(subscriber);\n        subscriber.add(function () {\n            var _socket = _this._socket;\n            if (_this._output.observers.length === 0) {\n                if (_socket && (_socket.readyState === 1 || _socket.readyState === 0)) {\n                    _socket.close();\n                }\n                _this._resetState();\n            }\n        });\n        return subscriber;\n    };\n    WebSocketSubject.prototype.unsubscribe = function () {\n        var _socket = this._socket;\n        if (_socket && (_socket.readyState === 1 || _socket.readyState === 0)) {\n            _socket.close();\n        }\n        this._resetState();\n        _super.prototype.unsubscribe.call(this);\n    };\n    return WebSocketSubject;\n}(_Subject__WEBPACK_IMPORTED_MODULE_2__.AnonymousSubject));\n\n//# sourceMappingURL=WebSocketSubject.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9jYWNoZS9yeGpzLW5wbS03LjguMC03MjJmMWM3MTcyLTYxYjRkNGZkMzIuemlwL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vYnNlcnZhYmxlL2RvbS9XZWJTb2NrZXRTdWJqZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEM7QUFDYztBQUNaO0FBQ0E7QUFDSTtBQUNFO0FBQ3BEO0FBQ0E7QUFDQSxpQ0FBaUMsNEJBQTRCO0FBQzdELG1DQUFtQywrQkFBK0I7QUFDbEU7QUFDQSxnSkFBZ0osOEJBQThCO0FBQzlLO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxtREFBVTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywrQ0FBUSxHQUFHO0FBQ3JELGdDQUFnQyw2Q0FBTztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx5REFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseURBQWE7QUFDaEQ7QUFDQSwyQkFBMkIsNkNBQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1EQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLHdDQUF3Qyw2QkFBNkI7QUFDckUsd0NBQXdDLDZCQUE2QjtBQUNyRSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdURBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG1EQUFVO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiwwQ0FBMEMseURBQWE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxDQUFDLHNEQUFnQjtBQUNVO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uLy55YXJuL2NhY2hlL3J4anMtbnBtLTcuOC4wLTcyMmYxYzcxNzItNjFiNGQ0ZmQzMi56aXAvbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29ic2VydmFibGUvZG9tL1dlYlNvY2tldFN1YmplY3QuanM/YzI5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBTdWJqZWN0LCBBbm9ueW1vdXNTdWJqZWN0IH0gZnJvbSAnLi4vLi4vU3ViamVjdCc7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuLi8uLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgUmVwbGF5U3ViamVjdCB9IGZyb20gJy4uLy4uL1JlcGxheVN1YmplY3QnO1xudmFyIERFRkFVTFRfV0VCU09DS0VUX0NPTkZJRyA9IHtcbiAgICB1cmw6ICcnLFxuICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIEpTT04ucGFyc2UoZS5kYXRhKTsgfSxcbiAgICBzZXJpYWxpemVyOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTsgfSxcbn07XG52YXIgV0VCU09DS0VUU1VCSkVDVF9JTlZBTElEX0VSUk9SX09CSkVDVCA9ICdXZWJTb2NrZXRTdWJqZWN0LmVycm9yIG11c3QgYmUgY2FsbGVkIHdpdGggYW4gb2JqZWN0IHdpdGggYW4gZXJyb3IgY29kZSwgYW5kIGFuIG9wdGlvbmFsIHJlYXNvbjogeyBjb2RlOiBudW1iZXIsIHJlYXNvbjogc3RyaW5nIH0nO1xudmFyIFdlYlNvY2tldFN1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhXZWJTb2NrZXRTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFdlYlNvY2tldFN1YmplY3QodXJsQ29uZmlnT3JTb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9zb2NrZXQgPSBudWxsO1xuICAgICAgICBpZiAodXJsQ29uZmlnT3JTb3VyY2UgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSB7XG4gICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICAgICAgX3RoaXMuc291cmNlID0gdXJsQ29uZmlnT3JTb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgY29uZmlnID0gKF90aGlzLl9jb25maWcgPSBfX2Fzc2lnbih7fSwgREVGQVVMVF9XRUJTT0NLRVRfQ09ORklHKSk7XG4gICAgICAgICAgICBfdGhpcy5fb3V0cHV0ID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsQ29uZmlnT3JTb3VyY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnVybCA9IHVybENvbmZpZ09yU291cmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHVybENvbmZpZ09yU291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmxDb25maWdPclNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWdba2V5XSA9IHVybENvbmZpZ09yU291cmNlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5XZWJTb2NrZXRDdG9yICYmIFdlYlNvY2tldCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5XZWJTb2NrZXRDdG9yID0gV2ViU29ja2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWNvbmZpZy5XZWJTb2NrZXRDdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBXZWJTb2NrZXQgY29uc3RydWN0b3IgY2FuIGJlIGZvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IG5ldyBSZXBsYXlTdWJqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBXZWJTb2NrZXRTdWJqZWN0LnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBzb2NrID0gbmV3IFdlYlNvY2tldFN1YmplY3QodGhpcy5fY29uZmlnLCB0aGlzLmRlc3RpbmF0aW9uKTtcbiAgICAgICAgc29jay5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICBzb2NrLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBzb2NrO1xuICAgIH07XG4gICAgV2ViU29ja2V0U3ViamVjdC5wcm90b3R5cGUuX3Jlc2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3NvY2tldCA9IG51bGw7XG4gICAgICAgIGlmICghdGhpcy5zb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBuZXcgUmVwbGF5U3ViamVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX291dHB1dCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfTtcbiAgICBXZWJTb2NrZXRTdWJqZWN0LnByb3RvdHlwZS5tdWx0aXBsZXggPSBmdW5jdGlvbiAoc3ViTXNnLCB1bnN1Yk1zZywgbWVzc2FnZUZpbHRlcikge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2VsZi5uZXh0KHN1Yk1zZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHNlbGYuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VGaWx0ZXIoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBvYnNlcnZlci5lcnJvcihlcnIpOyB9LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBvYnNlcnZlci5jb21wbGV0ZSgpOyB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubmV4dCh1bnN1Yk1zZygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgV2ViU29ja2V0U3ViamVjdC5wcm90b3R5cGUuX2Nvbm5lY3RTb2NrZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYSA9IHRoaXMuX2NvbmZpZywgV2ViU29ja2V0Q3RvciA9IF9hLldlYlNvY2tldEN0b3IsIHByb3RvY29sID0gX2EucHJvdG9jb2wsIHVybCA9IF9hLnVybCwgYmluYXJ5VHlwZSA9IF9hLmJpbmFyeVR5cGU7XG4gICAgICAgIHZhciBvYnNlcnZlciA9IHRoaXMuX291dHB1dDtcbiAgICAgICAgdmFyIHNvY2tldCA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzb2NrZXQgPSBwcm90b2NvbCA/IG5ldyBXZWJTb2NrZXRDdG9yKHVybCwgcHJvdG9jb2wpIDogbmV3IFdlYlNvY2tldEN0b3IodXJsKTtcbiAgICAgICAgICAgIHRoaXMuX3NvY2tldCA9IHNvY2tldDtcbiAgICAgICAgICAgIGlmIChiaW5hcnlUeXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc29ja2V0LmJpbmFyeVR5cGUgPSBiaW5hcnlUeXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5fc29ja2V0ID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICB2YXIgX3NvY2tldCA9IF90aGlzLl9zb2NrZXQ7XG4gICAgICAgICAgICBpZiAoIV9zb2NrZXQpIHtcbiAgICAgICAgICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVzZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcGVuT2JzZXJ2ZXIgPSBfdGhpcy5fY29uZmlnLm9wZW5PYnNlcnZlcjtcbiAgICAgICAgICAgIGlmIChvcGVuT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICBvcGVuT2JzZXJ2ZXIubmV4dChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHF1ZXVlID0gX3RoaXMuZGVzdGluYXRpb247XG4gICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IFN1YnNjcmliZXIuY3JlYXRlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNvY2tldC5yZWFkeVN0YXRlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VyaWFsaXplciA9IF90aGlzLl9jb25maWcuc2VyaWFsaXplcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5zZW5kKHNlcmlhbGl6ZXIoeCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xvc2luZ09ic2VydmVyID0gX3RoaXMuX2NvbmZpZy5jbG9zaW5nT2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgaWYgKGNsb3NpbmdPYnNlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICBjbG9zaW5nT2JzZXJ2ZXIubmV4dCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyICYmIGVyci5jb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldC5jbG9zZShlcnIuY29kZSwgZXJyLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihuZXcgVHlwZUVycm9yKFdFQlNPQ0tFVFNVQkpFQ1RfSU5WQUxJRF9FUlJPUl9PQkpFQ1QpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Jlc2V0U3RhdGUoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xvc2luZ09ic2VydmVyID0gX3RoaXMuX2NvbmZpZy5jbG9zaW5nT2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgaWYgKGNsb3NpbmdPYnNlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICBjbG9zaW5nT2JzZXJ2ZXIubmV4dCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVzZXRTdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocXVldWUgJiYgcXVldWUgaW5zdGFuY2VvZiBSZXBsYXlTdWJqZWN0KSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChxdWV1ZS5zdWJzY3JpYmUoX3RoaXMuZGVzdGluYXRpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgX3RoaXMuX3Jlc2V0U3RhdGUoKTtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICB9O1xuICAgICAgICBzb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoc29ja2V0ID09PSBfdGhpcy5fc29ja2V0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Jlc2V0U3RhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbG9zZU9ic2VydmVyID0gX3RoaXMuX2NvbmZpZy5jbG9zZU9ic2VydmVyO1xuICAgICAgICAgICAgaWYgKGNsb3NlT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICBjbG9zZU9ic2VydmVyLm5leHQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS53YXNDbGVhbikge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkZXNlcmlhbGl6ZXIgPSBfdGhpcy5fY29uZmlnLmRlc2VyaWFsaXplcjtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KGRlc2VyaWFsaXplcihlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFdlYlNvY2tldFN1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fc29ja2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0U29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb3V0cHV0LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgc3Vic2NyaWJlci5hZGQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9zb2NrZXQgPSBfdGhpcy5fc29ja2V0O1xuICAgICAgICAgICAgaWYgKF90aGlzLl9vdXRwdXQub2JzZXJ2ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChfc29ja2V0ICYmIChfc29ja2V0LnJlYWR5U3RhdGUgPT09IDEgfHwgX3NvY2tldC5yZWFkeVN0YXRlID09PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICBfc29ja2V0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLl9yZXNldFN0YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xuICAgIFdlYlNvY2tldFN1YmplY3QucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3NvY2tldCA9IHRoaXMuX3NvY2tldDtcbiAgICAgICAgaWYgKF9zb2NrZXQgJiYgKF9zb2NrZXQucmVhZHlTdGF0ZSA9PT0gMSB8fCBfc29ja2V0LnJlYWR5U3RhdGUgPT09IDApKSB7XG4gICAgICAgICAgICBfc29ja2V0LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVzZXRTdGF0ZSgpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gV2ViU29ja2V0U3ViamVjdDtcbn0oQW5vbnltb3VzU3ViamVjdCkpO1xuZXhwb3J0IHsgV2ViU29ja2V0U3ViamVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2ViU29ja2V0U3ViamVjdC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/dom/WebSocketSubject.js\n");

/***/ }),

/***/ "./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/dom/webSocket.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   webSocket: () => (/* binding */ webSocket)\n/* harmony export */ });\n/* harmony import */ var _WebSocketSubject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/dom/WebSocketSubject.js\");\n\nfunction webSocket(urlConfigOrSource) {\n    return new _WebSocketSubject__WEBPACK_IMPORTED_MODULE_0__.WebSocketSubject(urlConfigOrSource);\n}\n//# sourceMappingURL=webSocket.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9jYWNoZS9yeGpzLW5wbS03LjguMC03MjJmMWM3MTcyLTYxYjRkNGZkMzIuemlwL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vYnNlcnZhYmxlL2RvbS93ZWJTb2NrZXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0Q7QUFDL0M7QUFDUCxlQUFlLCtEQUFnQjtBQUMvQjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uLy55YXJuL2NhY2hlL3J4anMtbnBtLTcuOC4wLTcyMmYxYzcxNzItNjFiNGQ0ZmQzMi56aXAvbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29ic2VydmFibGUvZG9tL3dlYlNvY2tldC5qcz85Nzc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFdlYlNvY2tldFN1YmplY3QgfSBmcm9tICcuL1dlYlNvY2tldFN1YmplY3QnO1xuZXhwb3J0IGZ1bmN0aW9uIHdlYlNvY2tldCh1cmxDb25maWdPclNvdXJjZSkge1xuICAgIHJldHVybiBuZXcgV2ViU29ja2V0U3ViamVjdCh1cmxDb25maWdPclNvdXJjZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD13ZWJTb2NrZXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/dom/webSocket.js\n");

/***/ }),

/***/ "./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/parse.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/validate.js\");\n\n\nfunction parse(uuid) {\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (parse);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9jYWNoZS91dWlkLW5wbS05LjAuMC00NmM0MWUzZTQzLThkZDJjODNjNDMuemlwL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcGFyc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7O0FBRXJDO0FBQ0EsT0FBTyx3REFBUTtBQUNmO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQSxxQkFBcUI7O0FBRXJCO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFlLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vLnlhcm4vY2FjaGUvdXVpZC1ucG0tOS4wLjAtNDZjNDFlM2U0My04ZGQyYzgzYzQzLnppcC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3BhcnNlLmpzP2E2YzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuXG5mdW5jdGlvbiBwYXJzZSh1dWlkKSB7XG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0ludmFsaWQgVVVJRCcpO1xuICB9XG5cbiAgbGV0IHY7XG4gIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gUGFyc2UgIyMjIyMjIyMtLi4uLi0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDAsIDgpLCAxNikpID4+PiAyNDtcbiAgYXJyWzFdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMl0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzNdID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLSMjIyMtLi4uLi0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFycls0XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSg5LCAxMyksIDE2KSkgPj4+IDg7XG4gIGFycls1XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLSMjIyMtLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbNl0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTQsIDE4KSwgMTYpKSA+Pj4gODtcbiAgYXJyWzddID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tLi4uLi0jIyMjLS4uLi4uLi4uLi4uLlxuXG4gIGFycls4XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgxOSwgMjMpLCAxNikpID4+PiA4O1xuICBhcnJbOV0gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLS4uLi4tIyMjIyMjIyMjIyMjXG4gIC8vIChVc2UgXCIvXCIgdG8gYXZvaWQgMzItYml0IHRydW5jYXRpb24gd2hlbiBiaXQtc2hpZnRpbmcgaGlnaC1vcmRlciBieXRlcylcblxuICBhcnJbMTBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDI0LCAzNiksIDE2KSkgLyAweDEwMDAwMDAwMDAwICYgMHhmZjtcbiAgYXJyWzExXSA9IHYgLyAweDEwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMl0gPSB2ID4+PiAyNCAmIDB4ZmY7XG4gIGFyclsxM10gPSB2ID4+PiAxNiAmIDB4ZmY7XG4gIGFyclsxNF0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzE1XSA9IHYgJiAweGZmO1xuICByZXR1cm4gYXJyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwYXJzZTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/parse.js\n");

/***/ }),

/***/ "./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/sha1.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (let i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  const l = bytes.length / 4 + 2;\n  const N = Math.ceil(l / 16);\n  const M = new Array(N);\n\n  for (let i = 0; i < N; ++i) {\n    const arr = new Uint32Array(16);\n\n    for (let j = 0; j < 16; ++j) {\n      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];\n    }\n\n    M[i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (let i = 0; i < N; ++i) {\n    const W = new Uint32Array(80);\n\n    for (let t = 0; t < 16; ++t) {\n      W[t] = M[i][t];\n    }\n\n    for (let t = 16; t < 80; ++t) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    let a = H[0];\n    let b = H[1];\n    let c = H[2];\n    let d = H[3];\n    let e = H[4];\n\n    for (let t = 0; t < 80; ++t) {\n      const s = Math.floor(t / 20);\n      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (sha1);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9jYWNoZS91dWlkLW5wbS05LjAuMC00NmM0MWUzZTQzLThkZDJjODNjNDMuemlwL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc2hhMS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EscURBQXFEOztBQUVyRDs7QUFFQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixPQUFPO0FBQ3pCOztBQUVBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLE9BQU87QUFDekI7O0FBRUEsb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTs7QUFFQSxxQkFBcUIsUUFBUTtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpRUFBZSxJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uLy55YXJuL2NhY2hlL3V1aWQtbnBtLTkuMC4wLTQ2YzQxZTNlNDMtOGRkMmM4M2M0My56aXAvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zaGExLmpzPzY2NTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQWRhcHRlZCBmcm9tIENocmlzIFZlbmVzcycgU0hBMSBjb2RlIGF0XG4vLyBodHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL3NoYTEuaHRtbFxuZnVuY3Rpb24gZihzLCB4LCB5LCB6KSB7XG4gIHN3aXRjaCAocykge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiB4ICYgeSBeIH54ICYgejtcblxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiB4IF4geSBeIHo7XG5cbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4geCAmIHkgXiB4ICYgeiBeIHkgJiB6O1xuXG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIHggXiB5IF4gejtcbiAgfVxufVxuXG5mdW5jdGlvbiBST1RMKHgsIG4pIHtcbiAgcmV0dXJuIHggPDwgbiB8IHggPj4+IDMyIC0gbjtcbn1cblxuZnVuY3Rpb24gc2hhMShieXRlcykge1xuICBjb25zdCBLID0gWzB4NWE4Mjc5OTksIDB4NmVkOWViYTEsIDB4OGYxYmJjZGMsIDB4Y2E2MmMxZDZdO1xuICBjb25zdCBIID0gWzB4Njc0NTIzMDEsIDB4ZWZjZGFiODksIDB4OThiYWRjZmUsIDB4MTAzMjU0NzYsIDB4YzNkMmUxZjBdO1xuXG4gIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgbXNnID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGJ5dGVzKSk7IC8vIFVURjggZXNjYXBlXG5cbiAgICBieXRlcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyArK2kpIHtcbiAgICAgIGJ5dGVzLnB1c2gobXNnLmNoYXJDb2RlQXQoaSkpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShieXRlcykpIHtcbiAgICAvLyBDb252ZXJ0IEFycmF5LWxpa2UgdG8gQXJyYXlcbiAgICBieXRlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGJ5dGVzKTtcbiAgfVxuXG4gIGJ5dGVzLnB1c2goMHg4MCk7XG4gIGNvbnN0IGwgPSBieXRlcy5sZW5ndGggLyA0ICsgMjtcbiAgY29uc3QgTiA9IE1hdGguY2VpbChsIC8gMTYpO1xuICBjb25zdCBNID0gbmV3IEFycmF5KE4pO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgKytpKSB7XG4gICAgY29uc3QgYXJyID0gbmV3IFVpbnQzMkFycmF5KDE2KTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTY7ICsraikge1xuICAgICAgYXJyW2pdID0gYnl0ZXNbaSAqIDY0ICsgaiAqIDRdIDw8IDI0IHwgYnl0ZXNbaSAqIDY0ICsgaiAqIDQgKyAxXSA8PCAxNiB8IGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgMl0gPDwgOCB8IGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgM107XG4gICAgfVxuXG4gICAgTVtpXSA9IGFycjtcbiAgfVxuXG4gIE1bTiAtIDFdWzE0XSA9IChieXRlcy5sZW5ndGggLSAxKSAqIDggLyBNYXRoLnBvdygyLCAzMik7XG4gIE1bTiAtIDFdWzE0XSA9IE1hdGguZmxvb3IoTVtOIC0gMV1bMTRdKTtcbiAgTVtOIC0gMV1bMTVdID0gKGJ5dGVzLmxlbmd0aCAtIDEpICogOCAmIDB4ZmZmZmZmZmY7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyArK2kpIHtcbiAgICBjb25zdCBXID0gbmV3IFVpbnQzMkFycmF5KDgwKTtcblxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgMTY7ICsrdCkge1xuICAgICAgV1t0XSA9IE1baV1bdF07XG4gICAgfVxuXG4gICAgZm9yIChsZXQgdCA9IDE2OyB0IDwgODA7ICsrdCkge1xuICAgICAgV1t0XSA9IFJPVEwoV1t0IC0gM10gXiBXW3QgLSA4XSBeIFdbdCAtIDE0XSBeIFdbdCAtIDE2XSwgMSk7XG4gICAgfVxuXG4gICAgbGV0IGEgPSBIWzBdO1xuICAgIGxldCBiID0gSFsxXTtcbiAgICBsZXQgYyA9IEhbMl07XG4gICAgbGV0IGQgPSBIWzNdO1xuICAgIGxldCBlID0gSFs0XTtcblxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgODA7ICsrdCkge1xuICAgICAgY29uc3QgcyA9IE1hdGguZmxvb3IodCAvIDIwKTtcbiAgICAgIGNvbnN0IFQgPSBST1RMKGEsIDUpICsgZihzLCBiLCBjLCBkKSArIGUgKyBLW3NdICsgV1t0XSA+Pj4gMDtcbiAgICAgIGUgPSBkO1xuICAgICAgZCA9IGM7XG4gICAgICBjID0gUk9UTChiLCAzMCkgPj4+IDA7XG4gICAgICBiID0gYTtcbiAgICAgIGEgPSBUO1xuICAgIH1cblxuICAgIEhbMF0gPSBIWzBdICsgYSA+Pj4gMDtcbiAgICBIWzFdID0gSFsxXSArIGIgPj4+IDA7XG4gICAgSFsyXSA9IEhbMl0gKyBjID4+PiAwO1xuICAgIEhbM10gPSBIWzNdICsgZCA+Pj4gMDtcbiAgICBIWzRdID0gSFs0XSArIGUgPj4+IDA7XG4gIH1cblxuICByZXR1cm4gW0hbMF0gPj4gMjQgJiAweGZmLCBIWzBdID4+IDE2ICYgMHhmZiwgSFswXSA+PiA4ICYgMHhmZiwgSFswXSAmIDB4ZmYsIEhbMV0gPj4gMjQgJiAweGZmLCBIWzFdID4+IDE2ICYgMHhmZiwgSFsxXSA+PiA4ICYgMHhmZiwgSFsxXSAmIDB4ZmYsIEhbMl0gPj4gMjQgJiAweGZmLCBIWzJdID4+IDE2ICYgMHhmZiwgSFsyXSA+PiA4ICYgMHhmZiwgSFsyXSAmIDB4ZmYsIEhbM10gPj4gMjQgJiAweGZmLCBIWzNdID4+IDE2ICYgMHhmZiwgSFszXSA+PiA4ICYgMHhmZiwgSFszXSAmIDB4ZmYsIEhbNF0gPj4gMjQgJiAweGZmLCBIWzRdID4+IDE2ICYgMHhmZiwgSFs0XSA+PiA4ICYgMHhmZiwgSFs0XSAmIDB4ZmZdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzaGExOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/sha1.js\n");

/***/ }),

/***/ "./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/v35.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DNS: () => (/* binding */ DNS),\n/* harmony export */   URL: () => (/* binding */ URL),\n/* harmony export */   \"default\": () => (/* binding */ v35)\n/* harmony export */ });\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/stringify.js\");\n/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/parse.js\");\n\n\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nconst DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nconst URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nfunction v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(namespace);\n    }\n\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.unsafeStringify)(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9jYWNoZS91dWlkLW5wbS05LjAuMC00NmM0MWUzZTQzLThkZDJjODNjNDMuemlwL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjM1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWlEO0FBQ2xCOztBQUUvQjtBQUNBLDJDQUEyQzs7QUFFM0M7O0FBRUEsa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBOztBQUVBO0FBQ0E7O0FBRU87QUFDQTtBQUNRO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IscURBQUs7QUFDdkI7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxzQkFBc0IsUUFBUTtBQUM5QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsV0FBVyw4REFBZTtBQUMxQixJQUFJOzs7QUFHSjtBQUNBLDhCQUE4QjtBQUM5QixJQUFJLGVBQWU7OztBQUduQjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi8ueWFybi9jYWNoZS91dWlkLW5wbS05LjAuMC00NmM0MWUzZTQzLThkZDJjODNjNDMuemlwL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjM1LmpzP2EyOTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuaW1wb3J0IHBhcnNlIGZyb20gJy4vcGFyc2UuanMnO1xuXG5mdW5jdGlvbiBzdHJpbmdUb0J5dGVzKHN0cikge1xuICBzdHIgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSk7IC8vIFVURjggZXNjYXBlXG5cbiAgY29uc3QgYnl0ZXMgPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGJ5dGVzLnB1c2goc3RyLmNoYXJDb2RlQXQoaSkpO1xuICB9XG5cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG5leHBvcnQgY29uc3QgRE5TID0gJzZiYTdiODEwLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnQgY29uc3QgVVJMID0gJzZiYTdiODExLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB2MzUobmFtZSwgdmVyc2lvbiwgaGFzaGZ1bmMpIHtcbiAgZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKHZhbHVlLCBuYW1lc3BhY2UsIGJ1Ziwgb2Zmc2V0KSB7XG4gICAgdmFyIF9uYW1lc3BhY2U7XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBzdHJpbmdUb0J5dGVzKHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWVzcGFjZSA9IHBhcnNlKG5hbWVzcGFjZSk7XG4gICAgfVxuXG4gICAgaWYgKCgoX25hbWVzcGFjZSA9IG5hbWVzcGFjZSkgPT09IG51bGwgfHwgX25hbWVzcGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25hbWVzcGFjZS5sZW5ndGgpICE9PSAxNikge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdOYW1lc3BhY2UgbXVzdCBiZSBhcnJheS1saWtlICgxNiBpdGVyYWJsZSBpbnRlZ2VyIHZhbHVlcywgMC0yNTUpJyk7XG4gICAgfSAvLyBDb21wdXRlIGhhc2ggb2YgbmFtZXNwYWNlIGFuZCB2YWx1ZSwgUGVyIDQuM1xuICAgIC8vIEZ1dHVyZTogVXNlIHNwcmVhZCBzeW50YXggd2hlbiBzdXBwb3J0ZWQgb24gYWxsIHBsYXRmb3JtcywgZS5nLiBgYnl0ZXMgPVxuICAgIC8vIGhhc2hmdW5jKFsuLi5uYW1lc3BhY2UsIC4uLiB2YWx1ZV0pYFxuXG5cbiAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheSgxNiArIHZhbHVlLmxlbmd0aCk7XG4gICAgYnl0ZXMuc2V0KG5hbWVzcGFjZSk7XG4gICAgYnl0ZXMuc2V0KHZhbHVlLCBuYW1lc3BhY2UubGVuZ3RoKTtcbiAgICBieXRlcyA9IGhhc2hmdW5jKGJ5dGVzKTtcbiAgICBieXRlc1s2XSA9IGJ5dGVzWzZdICYgMHgwZiB8IHZlcnNpb247XG4gICAgYnl0ZXNbOF0gPSBieXRlc1s4XSAmIDB4M2YgfCAweDgwO1xuXG4gICAgaWYgKGJ1Zikge1xuICAgICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICBidWZbb2Zmc2V0ICsgaV0gPSBieXRlc1tpXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1ZjtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KGJ5dGVzKTtcbiAgfSAvLyBGdW5jdGlvbiNuYW1lIGlzIG5vdCBzZXR0YWJsZSBvbiBzb21lIHBsYXRmb3JtcyAoIzI3MClcblxuXG4gIHRyeSB7XG4gICAgZ2VuZXJhdGVVVUlELm5hbWUgPSBuYW1lOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgfSBjYXRjaCAoZXJyKSB7fSAvLyBGb3IgQ29tbW9uSlMgZGVmYXVsdCBleHBvcnQgc3VwcG9ydFxuXG5cbiAgZ2VuZXJhdGVVVUlELkROUyA9IEROUztcbiAgZ2VuZXJhdGVVVUlELlVSTCA9IFVSTDtcbiAgcmV0dXJuIGdlbmVyYXRlVVVJRDtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/v35.js\n");

/***/ }),

/***/ "./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/v5.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/v35.js\");\n/* harmony import */ var _sha1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/sha1.js\");\n\n\nconst v5 = (0,_v35_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('v5', 0x50, _sha1_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v5);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9jYWNoZS91dWlkLW5wbS05LjAuMC00NmM0MWUzZTQzLThkZDJjODNjNDMuemlwL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJCO0FBQ0U7QUFDN0IsV0FBVyxtREFBRyxhQUFhLGdEQUFJO0FBQy9CLGlFQUFlLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vLnlhcm4vY2FjaGUvdXVpZC1ucG0tOS4wLjAtNDZjNDFlM2U0My04ZGQyYzgzYzQzLnppcC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y1LmpzPzAwMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHYzNSBmcm9tICcuL3YzNS5qcyc7XG5pbXBvcnQgc2hhMSBmcm9tICcuL3NoYTEuanMnO1xuY29uc3QgdjUgPSB2MzUoJ3Y1JywgMHg1MCwgc2hhMSk7XG5leHBvcnQgZGVmYXVsdCB2NTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/v5.js\n");

/***/ }),

/***/ "./.yarn/__virtual__/@grafana-lezer-logql-virtual-0b75aafe9e/0/cache/@grafana-lezer-logql-npm-0.1.11-91e9d74a76-6a624b9a8d.zip/node_modules/@grafana/lezer-logql/index.es.js":
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbsentOverTime: () => (/* binding */ AbsentOverTime),\n/* harmony export */   Add: () => (/* binding */ Add),\n/* harmony export */   And: () => (/* binding */ And),\n/* harmony export */   Avg: () => (/* binding */ Avg),\n/* harmony export */   AvgOverTime: () => (/* binding */ AvgOverTime),\n/* harmony export */   BinOpExpr: () => (/* binding */ BinOpExpr),\n/* harmony export */   BinOpModifier: () => (/* binding */ BinOpModifier),\n/* harmony export */   Bool: () => (/* binding */ Bool),\n/* harmony export */   Bottomk: () => (/* binding */ Bottomk),\n/* harmony export */   By: () => (/* binding */ By),\n/* harmony export */   Bytes: () => (/* binding */ Bytes),\n/* harmony export */   BytesConv: () => (/* binding */ BytesConv),\n/* harmony export */   BytesFilter: () => (/* binding */ BytesFilter),\n/* harmony export */   BytesOverTime: () => (/* binding */ BytesOverTime),\n/* harmony export */   BytesRate: () => (/* binding */ BytesRate),\n/* harmony export */   ConvOp: () => (/* binding */ ConvOp),\n/* harmony export */   Count: () => (/* binding */ Count),\n/* harmony export */   CountOverTime: () => (/* binding */ CountOverTime),\n/* harmony export */   Decolorize: () => (/* binding */ Decolorize),\n/* harmony export */   DecolorizeExpr: () => (/* binding */ DecolorizeExpr),\n/* harmony export */   Div: () => (/* binding */ Div),\n/* harmony export */   Drop: () => (/* binding */ Drop),\n/* harmony export */   DropLabel: () => (/* binding */ DropLabel),\n/* harmony export */   DropLabels: () => (/* binding */ DropLabels),\n/* harmony export */   DropLabelsExpr: () => (/* binding */ DropLabelsExpr),\n/* harmony export */   Duration: () => (/* binding */ Duration),\n/* harmony export */   DurationConv: () => (/* binding */ DurationConv),\n/* harmony export */   DurationFilter: () => (/* binding */ DurationFilter),\n/* harmony export */   DurationSecondsConv: () => (/* binding */ DurationSecondsConv),\n/* harmony export */   Eq: () => (/* binding */ Eq),\n/* harmony export */   Eql: () => (/* binding */ Eql),\n/* harmony export */   Expr: () => (/* binding */ Expr),\n/* harmony export */   Filter: () => (/* binding */ Filter),\n/* harmony export */   FilterOp: () => (/* binding */ FilterOp),\n/* harmony export */   FirstOverTime: () => (/* binding */ FirstOverTime),\n/* harmony export */   GroupLeft: () => (/* binding */ GroupLeft),\n/* harmony export */   GroupRight: () => (/* binding */ GroupRight),\n/* harmony export */   Grouping: () => (/* binding */ Grouping),\n/* harmony export */   GroupingLabel: () => (/* binding */ GroupingLabel),\n/* harmony export */   GroupingLabelList: () => (/* binding */ GroupingLabelList),\n/* harmony export */   GroupingLabels: () => (/* binding */ GroupingLabels),\n/* harmony export */   Gte: () => (/* binding */ Gte),\n/* harmony export */   Gtr: () => (/* binding */ Gtr),\n/* harmony export */   Identifier: () => (/* binding */ Identifier),\n/* harmony export */   Ignoring: () => (/* binding */ Ignoring),\n/* harmony export */   Ip: () => (/* binding */ Ip),\n/* harmony export */   IpLabelFilter: () => (/* binding */ IpLabelFilter),\n/* harmony export */   Json: () => (/* binding */ Json),\n/* harmony export */   JsonExpression: () => (/* binding */ JsonExpression),\n/* harmony export */   JsonExpressionList: () => (/* binding */ JsonExpressionList),\n/* harmony export */   JsonExpressionParser: () => (/* binding */ JsonExpressionParser),\n/* harmony export */   Keep: () => (/* binding */ Keep),\n/* harmony export */   KeepLabel: () => (/* binding */ KeepLabel),\n/* harmony export */   KeepLabels: () => (/* binding */ KeepLabels),\n/* harmony export */   KeepLabelsExpr: () => (/* binding */ KeepLabelsExpr),\n/* harmony export */   LabelFilter: () => (/* binding */ LabelFilter),\n/* harmony export */   LabelFormat: () => (/* binding */ LabelFormat),\n/* harmony export */   LabelFormatExpr: () => (/* binding */ LabelFormatExpr),\n/* harmony export */   LabelFormatMatcher: () => (/* binding */ LabelFormatMatcher),\n/* harmony export */   LabelName: () => (/* binding */ LabelName),\n/* harmony export */   LabelParser: () => (/* binding */ LabelParser),\n/* harmony export */   LabelReplace: () => (/* binding */ LabelReplace),\n/* harmony export */   LabelReplaceExpr: () => (/* binding */ LabelReplaceExpr),\n/* harmony export */   Labels: () => (/* binding */ Labels),\n/* harmony export */   LabelsFormat: () => (/* binding */ LabelsFormat),\n/* harmony export */   LastOverTime: () => (/* binding */ LastOverTime),\n/* harmony export */   LineComment: () => (/* binding */ LineComment),\n/* harmony export */   LineFilter: () => (/* binding */ LineFilter),\n/* harmony export */   LineFilters: () => (/* binding */ LineFilters),\n/* harmony export */   LineFormat: () => (/* binding */ LineFormat),\n/* harmony export */   LineFormatExpr: () => (/* binding */ LineFormatExpr),\n/* harmony export */   LiteralExpr: () => (/* binding */ LiteralExpr),\n/* harmony export */   LogExpr: () => (/* binding */ LogExpr),\n/* harmony export */   LogQL: () => (/* binding */ LogQL),\n/* harmony export */   LogRangeExpr: () => (/* binding */ LogRangeExpr),\n/* harmony export */   Logfmt: () => (/* binding */ Logfmt),\n/* harmony export */   Lss: () => (/* binding */ Lss),\n/* harmony export */   Lte: () => (/* binding */ Lte),\n/* harmony export */   Matcher: () => (/* binding */ Matcher),\n/* harmony export */   Matchers: () => (/* binding */ Matchers),\n/* harmony export */   Max: () => (/* binding */ Max),\n/* harmony export */   MaxOverTime: () => (/* binding */ MaxOverTime),\n/* harmony export */   MetricExpr: () => (/* binding */ MetricExpr),\n/* harmony export */   Min: () => (/* binding */ Min),\n/* harmony export */   MinOverTime: () => (/* binding */ MinOverTime),\n/* harmony export */   Mod: () => (/* binding */ Mod),\n/* harmony export */   Mul: () => (/* binding */ Mul),\n/* harmony export */   Neq: () => (/* binding */ Neq),\n/* harmony export */   Nre: () => (/* binding */ Nre),\n/* harmony export */   Number: () => (/* binding */ Number),\n/* harmony export */   NumberFilter: () => (/* binding */ NumberFilter),\n/* harmony export */   Offset: () => (/* binding */ Offset),\n/* harmony export */   OffsetExpr: () => (/* binding */ OffsetExpr),\n/* harmony export */   On: () => (/* binding */ On),\n/* harmony export */   OnOrIgnoringModifier: () => (/* binding */ OnOrIgnoringModifier),\n/* harmony export */   Or: () => (/* binding */ Or),\n/* harmony export */   Pattern: () => (/* binding */ Pattern),\n/* harmony export */   Pipe: () => (/* binding */ Pipe),\n/* harmony export */   PipeExact: () => (/* binding */ PipeExact),\n/* harmony export */   PipeMatch: () => (/* binding */ PipeMatch),\n/* harmony export */   PipelineExpr: () => (/* binding */ PipelineExpr),\n/* harmony export */   PipelineStage: () => (/* binding */ PipelineStage),\n/* harmony export */   Pow: () => (/* binding */ Pow),\n/* harmony export */   QuantileOverTime: () => (/* binding */ QuantileOverTime),\n/* harmony export */   Range: () => (/* binding */ Range),\n/* harmony export */   RangeAggregationExpr: () => (/* binding */ RangeAggregationExpr),\n/* harmony export */   RangeOp: () => (/* binding */ RangeOp),\n/* harmony export */   Rate: () => (/* binding */ Rate),\n/* harmony export */   RateCounter: () => (/* binding */ RateCounter),\n/* harmony export */   Re: () => (/* binding */ Re),\n/* harmony export */   Regexp: () => (/* binding */ Regexp),\n/* harmony export */   Selector: () => (/* binding */ Selector),\n/* harmony export */   Stddev: () => (/* binding */ Stddev),\n/* harmony export */   StddevOverTime: () => (/* binding */ StddevOverTime),\n/* harmony export */   Stdvar: () => (/* binding */ Stdvar),\n/* harmony export */   StdvarOverTime: () => (/* binding */ StdvarOverTime),\n/* harmony export */   String: () => (/* binding */ String),\n/* harmony export */   Sub: () => (/* binding */ Sub),\n/* harmony export */   Sum: () => (/* binding */ Sum),\n/* harmony export */   SumOverTime: () => (/* binding */ SumOverTime),\n/* harmony export */   Topk: () => (/* binding */ Topk),\n/* harmony export */   UnitFilter: () => (/* binding */ UnitFilter),\n/* harmony export */   Unless: () => (/* binding */ Unless),\n/* harmony export */   Unpack: () => (/* binding */ Unpack),\n/* harmony export */   Unwrap: () => (/* binding */ Unwrap),\n/* harmony export */   UnwrapExpr: () => (/* binding */ UnwrapExpr),\n/* harmony export */   Vector: () => (/* binding */ Vector),\n/* harmony export */   VectorAggregationExpr: () => (/* binding */ VectorAggregationExpr),\n/* harmony export */   VectorExpr: () => (/* binding */ VectorExpr),\n/* harmony export */   VectorOp: () => (/* binding */ VectorOp),\n/* harmony export */   Without: () => (/* binding */ Without),\n/* harmony export */   formatLokiQuery: () => (/* binding */ formatLokiQuery),\n/* harmony export */   parser: () => (/* binding */ parser)\n/* harmony export */ });\n/* harmony import */ var _lezer_lr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@lezer-lr-npm-1.3.3-4ce9e8763b-1804074c79.zip/node_modules/@lezer/lr/dist/index.js\");\n\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst Json$1 = 1,\n  Logfmt$1 = 2,\n  Unpack$1 = 3,\n  Pattern$1 = 4,\n  Regexp$1 = 5,\n  Unwrap$1 = 6,\n  Ip$1 = 7,\n  LabelFormat$1 = 8,\n  LineFormat$1 = 9,\n  LabelReplace$1 = 10,\n  Vector$1 = 11,\n  Offset$1 = 12,\n  Bool$1 = 13,\n  On$1 = 14,\n  Ignoring$1 = 15,\n  GroupLeft$1 = 16,\n  GroupRight$1 = 17,\n  Decolorize$1 = 18,\n  Drop$1 = 19,\n  Keep$1 = 20,\n  By$1 = 21,\n  Without$1 = 22,\n  And$1 = 23,\n  Or$1 = 24,\n  Unless$1 = 25,\n  Sum$1 = 26,\n  Avg$1 = 27,\n  Count$1 = 28,\n  Max$1 = 29,\n  Min$1 = 30,\n  Stddev$1 = 31,\n  Stdvar$1 = 32,\n  Bottomk$1 = 33,\n  Topk$1 = 34,\n  LogExpr$1 = 38,\n  MetricExpr$1 = 86;\n\nconst keywordTokens = {\n  json: Json$1,\n  logfmt: Logfmt$1,\n  unpack: Unpack$1,\n  pattern: Pattern$1,\n  regexp: Regexp$1,\n  ip: Ip$1,\n  label_format: LabelFormat$1,\n  line_format: LineFormat$1,\n  label_replace: LabelReplace$1,\n  vector: Vector$1,\n  offset: Offset$1,\n  bool: Bool$1,\n  on: On$1,\n  ignoring: Ignoring$1,\n  group_left: GroupLeft$1,\n  group_right: GroupRight$1,\n  unwrap: Unwrap$1,\n  decolorize: Decolorize$1,\n  drop: Drop$1,\n  keep: Keep$1,\n};\n\nconst specializeIdentifier = (value) => {\n  return keywordTokens[value.toLowerCase()] || -1;\n};\n\nconst contextualKeywordTokens = {\n  by: By$1,\n  without: Without$1,\n  and: And$1,\n  or: Or$1,\n  unless: Unless$1,\n  sum: Sum$1,\n  avg: Avg$1,\n  count: Count$1,\n  max: Max$1,\n  min: Min$1,\n  stddev: Stddev$1,\n  stdvar: Stdvar$1,\n  bottomk: Bottomk$1,\n  topk: Topk$1,\n};\n\nconst extendIdentifier = (value) => {\n  return contextualKeywordTokens[value.toLowerCase()] || -1;\n};\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst spec_Identifier = {__proto__:null,count_over_time:281, rate:283, rate_counter:285, bytes_over_time:287, bytes_rate:289, avg_over_time:291, sum_over_time:293, min_over_time:295, max_over_time:297, stddev_over_time:299, stdvar_over_time:301, quantile_over_time:303, first_over_time:305, last_over_time:307, absent_over_time:309, bytes:315, duration:317, duration_seconds:319};\nconst parser = _lezer_lr__WEBPACK_IMPORTED_MODULE_0__.LRParser.deserialize({\n  version: 14,\n  states: \"CdOYQPOOO#]QPO'#DTO$lQPO'#DSOYQPO'#DSOOQO'#EW'#EWO$yQPO'#EVOOQO'#Es'#EsO%OQPO'#ErQ%ZQPOOOOQO'#FR'#FRO&[QPO'#FRO&aQPO'#FSO&fQPO'#FTOOQO'#EU'#EUOOQO'#DR'#DROOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgO&kQPO'#DVOOQO'#DU'#DUO&yQPO,59oOOQO'#Db'#DbO'RQPO'#DaOOQO'#D`'#D`O'ZQPO'#D_O(tQPO'#D_OOQO'#D^'#D^O*vQPO,59nO,UQPO,59nO,]QPO,5:pO,dQPO,5:qO,oQPO'#EpO.tQPO,5;^O.{QPO,5;^O/QQPO,5;`O/QQPO,5;`O/QQPO,5;`O/QQPO,5;`O/QQPO,5;`O/QQPO,5;`OOQO,5;m,5;mOYQPO,5;nO1^QPO,5;oO1cQPO,59qO#]QPO,59pOOQO1G/Z1G/ZOOQO'#De'#DeOOQO,59{,59{O1hQPO,59{OOQO,59z,59zO1mQPO'#DVO2[QPO'#DgOOQO'#Dg'#DgO3xQPO'#DgOOQO'#Dm'#DmOOQO'#Dk'#DkO)dQPO'#DkO3}QPO,59yO5hQPO'#DyO5mQPO'#DzOOQO'#D}'#D}O5rQPO'#EOO5wQPO'#EROOQO,59y,59yOOQO,59x,59xOOQO1G/Y1G/YOOQO1G0[1G0[O5|QPO'#EhO,gQPO'#EhO6bQPO1G0]O6gQPO1G0]O6lQPO,5;[O6tQPO1G0xO8PQPO1G0xO8WQPO1G0xO8_QPO'#EvO:gQPO'#EuO:qQPO'#EuOYQPO1G0zOYQPO1G0zOYQPO1G0zOYQPO1G0zOYQPO1G0zOYQPO1G0zO:{QPO1G1YO;SQPO1G1ZOOQO1G/]1G/]OOQO1G/[1G/[O;XQPO1G/gO;^QPO,59qO;dQPO,5:YO;oQPO'#DjOOQO'#Di'#DiO;tQPO,5:SOOQO,5:R,5:RO=_QPO,5:VO)dQPO,5:VO)dQPO,5:VOOQO,5:e,5:eO=mQPO'#D|OOQO'#D{'#D{O=rQPO,5:fO?]QPO'#EQOOQO'#EQ'#EQOOQO'#EP'#EPO@|QPO,5:jOBgQPO'#ETOOQO'#ET'#ETOOQO'#ES'#ESODWQPO,5:mOEqQPO'#D_O5|QPO,5;SOExQPO'#EiOE}QPO,5;SOFhQPO,5;SOFrQPO,5;SOFyQPO,5;SOGOQPO7+%wO,gQPO7+%wOOQO'#Eq'#EqOH`QPO1G0vOOQO1G0v1G0vOHhQPO7+&dOYQPO7+&dOIxQPO7+&dOJPQPO7+&dOJWQQO'#EwOOQO,5;b,5;bOL`QPO,5;aOLgQPO,5;aOMxQPO7+&fONPQPO7+&fOOQO7+&f7+&fON^QPO7+&fONeQPO7+&fO! jQPO7+&fO! zQPO7+&tOOQO7+&u7+&uO!!PQPO7+%RO!!UQPO1G/rOOQO1G/t1G/tOOQO1G/{1G/{OOQO1G/}1G/}O!!ZQPO,5:UO!!`QPO,5:TOOQO1G/q1G/qO!!eQPO1G/qO!$OQPO,5:hO5mQPO,5:gO5rQPO,5:kO5wQPO,5:nO!$WQPO,5;VOE}QPO1G0nO!$fQPO1G0nO!$nQPO,5;TO)dQPO,5;VO!$sQPO1G0nO!$zQPO'#EjO!%PQPO1G0nO!$sQPO1G0nO!%XQPO1G0nO!%`QPO1G0nO6]QPO1G0nOOQO1G0n1G0nOOQO<<Ic<<IcO!%kQPO<<IcO!%pQPO,5;]OOQO7+&b7+&bOOQO<<JO<<JOO!%uQPO<<JOOYQPO<<JOOOQO'#Ey'#EyO!%|QPO,5;cOOQO'#Ex'#ExOOQO,5;c,5;cOOQO1G0{1G0{O!&UQPO1G0{O!(XQPO<<J`OOQO<<Hm<<HmO!(^QPO7+%^OOQO1G/p1G/pOOQO1G/o1G/oOOQO1G0S1G0SOOQO1G0R1G0ROOQO1G0V1G0VOOQO1G0Y1G0YOOQO'#El'#ElOOQO1G0q1G0qO!(cQPO1G0qOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO7+&Y7+&YOOQO1G0o1G0oO!(hQPO1G0qO!(|QPO7+&YOOQO,5;U,5;UO!)UQPO7+&YO6]QPO7+&YO!)]QPO7+&YO!)hQPOAN>}OOQO1G0w1G0wO!*xQPOAN?jO!,YQPOAN?jO!,aQQO1G0}OOQO1G0}1G0}OOQO7+&g7+&gO!,iQPOAN?zO!,nQPO<<HxO!,sQPO7+&]O!,xQPO<<ItO!-QQPO<<ItO!-YQPO'#EkO!-_QPO<<ItOOQOG24iG24iOOQOG25UG25UOOQO1G1O1G1OOOQO7+&i7+&iO!-gQPOG25fOOQOAN>dAN>dO!-lQPO<<IwOOQOAN?`AN?`O!-qQPOAN?`O!-yQPOLD+QOOQOAN?cAN?cOOQO,5:f,5:fO!.OQPO!$'NlO!.TQPO!)9DWO!.YQPO!.K9rOOQO!4//^!4//^O5mQPO'#DzO!._QPO'#D_O!/VQPO,59nO!/aQPO'#DSOYQPO1G0zOYQPO1G0zOYQPO1G0zOYQPO1G0zOYQPO1G0zOYQPO1G0zO/QQPO,5;`O/QQPO,5;`O/QQPO,5;`O/QQPO,5;`O/QQPO,5;`O/QQPO,5;`O!0lQPO7+&fO!0sQPO7+&fO!1QQPO7+&fO!2YQPO7+&fO!2aQPO7+&fO!1XQPO'#Et\",\n  stateData: \"!2n~O#zOSsOS~OYZOZ[OjUOkUOlUOmUOnUOoUOpUOqUOrUO!lXO#oYO#pYO#{PO$ORO$Q_O$R`O$SaO$TbO$UcO$VdO$WeO$XfO$YgO$ZhO$[iO$]jO$^kO$_lO$`mO~OznO~O}qO!PqO!VqO!WqOgvXhvXivX!cvX!evX!fvX!gvX!hvX#ovX#pvX#qvX#rvX#svX#tvX~O!YuO#xvX$PvX~P#bO$OzO~Oe{Of{O$O|O~Og!POh!OOi!PO}!TO!c!TO!e!TO!f!TO!g!TO!h!TO#o!QO#p!QO#q!RO#r!RO#s!RO#t!SO~O!l!UO~O$O!VO~O$O!WO~O{!XO}!XO!O!XO!P!XO~O#|!YO#}!ZO~OV![O|!]O~O}qO!PqO!VqO!WqOg!RXh!RXi!RX!Y!RX!c!RX!e!RX!f!RX!g!RX!h!RX#o!RX#p!RX#q!RX#r!RX#s!RX#t!RX#x!RX$P!RX$a!RX#|!RX~OP!aOQ!bOR!bOS!cOT!cOW!iOX!hOb!jOc!kOd!lOz!`O$O!fO~O}qO!PqO!VqO!WqOgvahvaiva!cva!eva!fva!gva!hva#ova#pva#qva#rva#sva#tva~O!YuO#xva$Pva~P)lOguXhuXiuX}uX!cuX!euX!fuX!guX!huX#ouX#puX#quX#ruX#suX#tuX~O$P!oO~P+TO$P!pO~P+TO!l!tO#{PO$O!rO~O$O!uO~OYZOZ[OjUOkUOlUOmUOnUOoUOpUOqUOrUO#oYO#pYO#{PO$ORO$Q_O$R`O$SaO$TbO$UcO$VdO$WeO$XfO$YgO$ZhO$[iO$]jO$^kO$_lO$`mO~O!l!wO~P,tO$O!xO~O]!{O^!yO_!yOY#iPZ#iPj#iPk#iPl#iPm#iPn#iPo#iPp#iPq#iPr#iP!l#iP#o#iP#p#iP#{#iP$O#iP$Q#iP$R#iP$S#iP$T#iP$U#iP$V#iP$W#iP$X#iP$Y#iP$Z#iP$[#iP$]#iP$^#iP$_#iP$`#iP~O!l#TO~O|#UO~O$O#WO~O{#XO}#XO!O!XO!P!XO!c#YO!e#YO!f#YO!g#YO!h#YO~Oz#ZOg!ZXh!ZXi!ZX}!ZX!P!ZX!V!ZX!W!ZX!Y!ZX!c!ZX!e!ZX!f!ZX!g!ZX!h!ZX#o!ZX#p!ZX#q!ZX#r!ZX#s!ZX#t!ZX#x!ZX$P!ZX$a!ZX#|!ZX~O|#^O~Og#`Oh#aO#|#`Oi!Ra}!Ra!P!Ra!V!Ra!W!Ra!Y!Ra!c!Ra!e!Ra!f!Ra!g!Ra!h!Ra#o!Ra#p!Ra#q!Ra#r!Ra#s!Ra#t!Ra#x!Ra$P!Ra$a!Ra~O|#bO~Oz#cO~Oz#fO~Oz#jO~O}qO!PqO!VqO!WqO!Y#nO$a#pO~O$P#uO~O#|#vO~Oz#wO$P#yO~O$P#zO~P+TOg#uXh#uXi#uX}#uX!c#uX!e#uX!f#uX!g#uX!h#uX#o#uX#p#uX#q#uX#r#uX#s#uX#t#uX$P#uX~O#|#{O~P6{O!l#}O~P,tO$O$OO~OY#iXZ#iXj#iXk#iXl#iXm#iXn#iXo#iXp#iXq#iXr#iX!l#iX#o#iX#p#iX#{#iX$O#iX$Q#iX$R#iX$S#iX$T#iX$U#iX$V#iX$W#iX$X#iX$Y#iX$Z#iX$[#iX$]#iX$^#iX$_#iX$`#iX~O`$QOa$QO~P8dO^!yO_!yO~P8dO#|$YO~P+TO$P$ZO~O|$[O~OV$]O|#UO!d$^O!j$_O!l$`O~O{$aO~O#|$bOg![ah![ai![a}![a!P![a!V![a!W![a!Y![a!c![a!e![a!f![a!g![a!h![a#o![a#p![a#q![a#r![a#s![a#t![a#x![a$P![a$a![a~Og#`Oh#aO#|#`O$P$cO~O{$eO~O#|$fOg!nah!nai!na}!na!P!na!V!na!W!na!Y!na!c!na!e!na!f!na!g!na!h!na#o!na#p!na#q!na#r!na#s!na#t!na#x!na$P!na$a!na~O{!XO}!XO!O!XO!P!XOg!tXh!tXi!tX!V!tX!W!tX!Y!tX!c!tX!e!tX!f!tX!g!tX!h!tX#o!tX#p!tX#q!tX#r!tX#s!tX#t!tX#x!tX#|!tX$P!tX$a!tX~O#|$gOg!rah!rai!ra}!ra!P!ra!V!ra!W!ra!Y!ra!c!ra!e!ra!f!ra!g!ra!h!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#x!ra$P!ra$a!ra~O{!XO}!XO!O!XO!P!XOg!wXh!wXi!wX!V!wX!W!wX!Y!wX!c!wX!e!wX!f!wX!g!wX!h!wX#o!wX#p!wX#q!wX#r!wX#s!wX#t!wX#x!wX#|!wX$P!wX$a!wX~O#|$hOg!uah!uai!ua}!ua!P!ua!V!ua!W!ua!Y!ua!c!ua!e!ua!f!ua!g!ua!h!ua#o!ua#p!ua#q!ua#r!ua#s!ua#t!ua#x!ua$P!ua$a!ua~OU$iO~P(tO!d$lO~O!Y$mO$a#pO~O}qO!PqO!VqO!WqO!Y#nO~O[$oO$P#[a~PFVO$P$tO~P5|O$P$uO~Oe{Of{Og!yqh!yqi!yq}!yq!c!yq!e!yq!f!yq!g!yq!h!yq#o!yq#p!yq#q!yq#r!yq#s!yq#t!yq#x!yq$P!yq#|!yq~O#|$xO$P$yO~Oe{Of{Og#fqh#fqi#fq}#fq!c#fq!e#fq!f#fq!g#fq!h#fq#o#fq#p#fq#q#fq#r#fq#s#fq#t#fq#x#fq$P#fq#|#fq~O$P$zO~P+TO#|$|O~P6{O#n$}O$P%QO~OY#iaZ#iaj#iak#ial#iam#ian#iao#iap#iaq#iar#ia!l#ia#o#ia#p#ia#{#ia$Q#ia$R#ia$S#ia$T#ia$U#ia$V#ia$W#ia$X#ia$Y#ia$Z#ia$[#ia$]#ia$^#ia$_#ia$`#ia~O$O$OO~PJ`O`%SOa%SO$O#ia~PJ`Og!POi!PO}!TO!c!TO!e!TO!f!TO!g!TO!h!TO#o!QO#p!QO#q#hq#r#hq#s#hq#t#hq#x#hq$P#hq~Oh#hq~PLtOg#hqh#hqi#hq~PLzOh!OO~PLtO#x#hq$P#hq~P%ZOg#hqh#hqi#hq}#hq!c#hq!e#hq!f#hq!g#hq!h#hq#q#hq#r#hq#s#hq#t#hq~O#o!QO#p!QO#x#hq$P#hq~PNoO|%TO~O$P%UO~O$O%VO~O|%WO~Oz#ZO~Og#`O#|#`Oh!_ii!_i}!_i!P!_i!V!_i!W!_i!Y!_i!c!_i!e!_i!f!_i!g!_i!h!_i#o!_i#p!_i#q!_i#r!_i#s!_i#t!_i#x!_i$P!_i$a!_i~Oz%YO|%YO~Oz%_O$c%aO$d%bO$e%cO~O[$oO$P#[i~O$b%eO~O$P#[i~PFVO!d%hO~O!Y$mO$P#[i~O$P%jO~P5|O!Y$mO$P%jO$a#pO~O$P%lO~Oz%mO~O$P%nO~P+TO#|%pO$P%qO~O$O$OOY#iiZ#iij#iik#iil#iim#iin#iio#iip#iiq#iir#ii!l#ii#o#ii#p#ii#{#ii$Q#ii$R#ii$S#ii$T#ii$U#ii$V#ii$W#ii$X#ii$Y#ii$Z#ii$[#ii$]#ii$^#ii$_#ii$`#ii~O#|%sO~O|%tO~O$O%uO~Og#`Oh#aO#|#`O!Y#_i$a#_i$P#_i~O!Y$mO$P#[q~O$P#[q~PFVO[$oO!Y%xO$P#[q~Oe{Of{Og!y!Rh!y!Ri!y!R}!y!R!c!y!R!e!y!R!f!y!R!g!y!R!h!y!R#o!y!R#p!y!R#q!y!R#r!y!R#s!y!R#t!y!R#x!y!R$P!y!R#|!y!R~Oe{Of{Og#f!Rh#f!Ri#f!R}#f!R!c#f!R!e#f!R!f#f!R!g#f!R!h#f!R#o#f!R#p#f!R#q#f!R#r#f!R#s#f!R#t#f!R#x#f!R$P#f!R#|#f!R~O$P%{O~P+TO#n$}O$P%}O~O|&OO~O$P&PO~Oz&QO~O!Y$mO$P#[y~O[$oO$P#[y~OU$iO~O!Y%xO$P#[y~O#|&TO~O$P&UO~O!Y$mO$P#[!R~O|&WO~O#|&XO~O|&YO~O$P&ZO~OP!aOQ!bOR!bOS!cOT!cOW&[OX!hOb!jOc!kOd!lOz!`O$O!fO~O!Y&]O#|va~P)lO!Y&]O#|vX~P#bOg&gOi&gO}&kO!c&kO!e&kO!f&kO!g&kO!h&kO#o&hO#p&hO#q#hq#r#hq#s#hq#t#hq#|#hq~Oh#hq~P!/kOg#hqh#hqi#hq~P!/qOh&fO~P!/kOg&gOh&fOi&gO}&kO!c&kO!e&kO!f&kO!g&kO!h&kO#o&hO#p&hO#q&iO#r&iO#s&iO#t&jO~O#|#hq~P!1XO#o&hO#p&hO#|#hq~PNoO\",\n  goto: \"0U#xPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP#y$x%a&P&SPPPPPP&k&}'_'m(OPP(_P(b(b(g(j(p)R)R)[PPPPPP)[P)RP(b(b)e)k(b(b)r)u(b){*O*U*w+^+s+s+s+s+s+s+s+s+s+s+s+s+s+s+s,Y,c,v-S-l-o-o-o-r.R*w.U*w.k/a/r/{0OPPPPPPP*w*w*w[WOR|!x#{$|Q$S!|Q$T!}S$U#O&bQ$V#PQ$W#QQ$X#RQ&l&`Q&m&aQ&n&cQ&o&dQ&p&eR&q!Vt^O|!V!x!|!}#O#P#Q#R#{$|&`&a&b&c&d&eRxRjQOR|!V!x!|!}#O#P#Q#R#{$|S!qz#vQ#s!r]&_&`&a&b&c&d&eRpPQoP^!eu!f#`#a#n$m&]Q#V!YS#g!k$gT#k!l$hQwQQ#o!qQ$n#rQ$r#sQ%i$qR&^&_[vQ!q#r#s$q&_]!nw#o$n$r%i&^itQw!q#o#r#s$n$q$r%i&^&_hsQw!q#o#r#s$n$q$r%i&^&_R!_tkrQtw!q#o#r#s$n$q$r%i&^&_R!^rV!mu#n&]R#]!aQ#[!aR%X$bU!gu#n&]Q#_!fQ$c#`Q$d#aR%f$m_!eu!f#`#a#n$m&]_!du!f#`#a#n$m&]Q#e!iR&V&[S#d!i&[R%Z$fR#i!kQ#h!kR%[$gR#m!lQ#l!lR%]$hj^O!|!}#O#P#Q#R&`&a&b&c&d&eQyRQ!v|Q#S!VQ#|!xQ${#{R%o$|w]OR|!V!x!|!}#O#P#Q#R#{$|&`&a&b&c&d&ewTOR|!V!x!|!}#O#P#Q#R#{$|&`&a&b&c&d&ewSOR|!V!x!|!}#O#P#Q#R#{$|&`&a&b&c&d&eQ!szQ#t!rR$w#vS#r!q#sW$k#o#q$r$sQ%d$jQ%k$tR%w%jQ$q#rQ%d$kQ%y%kR&R%wQ#q!qS$j#o$rQ$p#rQ$s#sS%g$n$qS%v%i%kR&S%yR%`$iR%^$iQ}VQ$v#uQ$z#zQ%z%lR%{%nR#x!uwVOR|!V!x!|!}#O#P#Q#R#{$|&`&a&b&c&d&eQ!|!OQ!}!PQ#O!QQ#P!RQ#Q!SQ#R!TQ&`&fQ&a&gQ&b&hQ&c&iQ&d&jR&e&kh!z!O!P!Q!R!S!T&f&g&h&i&j&kR$R!{Q$P!yQ%R$QR%r%SR%O$OQ%P$OR%|%p\",\n  nodeNames: \" Json Logfmt Unpack Pattern Regexp Unwrap Ip LabelFormat LineFormat LabelReplace Vector Offset Bool On Ignoring GroupLeft GroupRight Decolorize Drop Keep By Without And Or Unless Sum Avg Count Max Min Stddev Stdvar Bottomk Topk LineComment LogQL Expr LogExpr Selector Matchers Matcher Identifier Eq String Neq Re Nre PipelineExpr PipelineStage LineFilters LineFilter Filter PipeExact PipeMatch FilterOp Pipe LabelParser JsonExpressionParser JsonExpressionList JsonExpression LabelFilter IpLabelFilter UnitFilter DurationFilter Gtr Duration Gte Lss Lte Eql BytesFilter Bytes NumberFilter Number LineFormatExpr LabelFormatExpr LabelsFormat LabelFormatMatcher DecolorizeExpr DropLabelsExpr DropLabels DropLabel KeepLabelsExpr KeepLabels KeepLabel MetricExpr RangeAggregationExpr RangeOp CountOverTime Rate RateCounter BytesOverTime BytesRate AvgOverTime SumOverTime MinOverTime MaxOverTime StddevOverTime StdvarOverTime QuantileOverTime FirstOverTime LastOverTime AbsentOverTime LogRangeExpr Range OffsetExpr UnwrapExpr ConvOp BytesConv DurationConv DurationSecondsConv Grouping Labels VectorAggregationExpr VectorOp BinOpExpr BinOpModifier OnOrIgnoringModifier GroupingLabels GroupingLabelList GroupingLabel LabelName Add Sub Mul Div Mod Pow LiteralExpr LabelReplaceExpr VectorExpr\",\n  maxTerm: 159,\n  skippedNodes: [0,35],\n  repeatNodeCount: 0,\n  tokenData: \"3X~RvX^#ipq#iqr$^rs$qst%cuv%nxy%syz%xz{%}{|&S|}&X}!O&^!O!P&c!P!Q'c!Q!R'h!R![)O![!]0O!^!_0d!_!`0q!`!a1W!c!}1e!}#O1{#P#Q2Q#Q#R2V#R#S1e#S#T2[#T#o1e#o#p2h#p#q2m#q#r3S#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY#z~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aQ!_!`$g#r#s$l~$lO}~~$qO!P~~$tUOY$qZr$qrs%Ws#O$q#O#P%]#P~$q~%]O|~~%`PO~$q~%hQs~OY%cZ~%c~%sO#s~~%xO$O~~%}O$P~~&SO#q~~&XO#o~~&^O#|~~&cO#p~~&fP!Q![&i~&nR!l~!Q![&i!g!h&w#X#Y&w~&zR{|'T}!O'T!Q!['Z~'WP!Q!['Z~'`P!l~!Q!['Z~'hO#r~~'me!l~!O!P&i!Q![)O!g!h*c!i!j+Q!m!n+Q!o!p+Q!r!s+Q!v!w+Q#U#V*u#W#X+Z#X#Y-]#Z#[-o#[#]+r#_#`-o#a#b-x#d#e-o#g#h,z#h#i-o#k#l.Z#l#m/d#m#n.u~)Td!l~!O!P&i!Q![)O!g!h*c!i!j+Q!m!n+Q!o!p+Q!r!s+Q!v!w+Q#U#V*u#W#X+Z#X#Y-]#Z#[-o#[#]+r#_#`-o#a#b-x#d#e-o#g#h,z#h#i-o#k#l.Z#m#n.u~*fT{|'T}!O'T!Q!['Z!d!e*u#]#^*z~*zO!j~~*}P#U#V*u~+TQ!d!e*u#]#^*z~+`P!d~!Q![+c~+fS!Q![+c#[#]+r#a#b,W#g#h,z~+wP!d~!Q![+z~+}R!Q![+z#a#b,W#g#h,z~,]Q!d~!Q![,c#g#h,u~,fR!Q![,c#a#b,o#g#h,z~,rP#g#h,u~,zO!d~~-PP!d~!Q![-S~-VQ!Q![-S#a#b,o~-`T{|'T}!O'T!Q!['Z#U#V*u#]#^*z~-rQ#U#V*u#]#^*z~-}S!d~!Q![,c#U#V*u#]#^*z#g#h,u~.`P!d~!Q![.c~.fT!Q![.c#W#X+Z#[#]+r#a#b,W#g#h,z~.zP!d~!Q![.}~/QU!Q![.}#W#X+Z#[#]+r#a#b,W#g#h,z#k#l.Z~/gR!Q![/p!c!i/p#T#Z/p~/uR!l~!Q![/p!c!i/p#T#Z/pP0TTzP!Q![0O![!]0O!c!}0O#R#S0O#T#o0O~0iP!f~!_!`0l~0qO!g~~0vQ{~!_!`0|#r#s1R~1RO!h~~1WO!O~~1]P!c~!_!`1`~1eO!e~R1lTzP#nQ!Q![1e![!]0O!c!}1e#R#S1e#T#o1e~2QO$a~~2VO$b~~2[O#t~~2_RO#S2[#S#T%W#T~2[~2mO#{~~2rQ!Y~!_!`2x#r#s2}~2}O!V~~3SO!W~~3XO#}~\",\n  tokenizers: [0, 1],\n  topRules: {\"LogQL\":[0,36]},\n  specialized: [{term: 42, get: (value, stack) => (specializeIdentifier(value) << 1)},{term: 42, get: (value, stack) => (extendIdentifier(value) << 1) | 1},{term: 42, get: value => spec_Identifier[value] || -1}],\n  tokenPrec: 0\n});\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst Json = 1,\n  Logfmt = 2,\n  Unpack = 3,\n  Pattern = 4,\n  Regexp = 5,\n  Unwrap = 6,\n  Ip = 7,\n  LabelFormat = 8,\n  LineFormat = 9,\n  LabelReplace = 10,\n  Vector = 11,\n  Offset = 12,\n  Bool = 13,\n  On = 14,\n  Ignoring = 15,\n  GroupLeft = 16,\n  GroupRight = 17,\n  Decolorize = 18,\n  Drop = 19,\n  Keep = 20,\n  By = 21,\n  Without = 22,\n  And = 23,\n  Or = 24,\n  Unless = 25,\n  Sum = 26,\n  Avg = 27,\n  Count = 28,\n  Max = 29,\n  Min = 30,\n  Stddev = 31,\n  Stdvar = 32,\n  Bottomk = 33,\n  Topk = 34,\n  LineComment = 35,\n  LogQL = 36,\n  Expr = 37,\n  LogExpr = 38,\n  Selector = 39,\n  Matchers = 40,\n  Matcher = 41,\n  Identifier = 42,\n  Eq = 43,\n  String = 44,\n  Neq = 45,\n  Re = 46,\n  Nre = 47,\n  PipelineExpr = 48,\n  PipelineStage = 49,\n  LineFilters = 50,\n  LineFilter = 51,\n  Filter = 52,\n  PipeExact = 53,\n  PipeMatch = 54,\n  FilterOp = 55,\n  Pipe = 56,\n  LabelParser = 57,\n  JsonExpressionParser = 58,\n  JsonExpressionList = 59,\n  JsonExpression = 60,\n  LabelFilter = 61,\n  IpLabelFilter = 62,\n  UnitFilter = 63,\n  DurationFilter = 64,\n  Gtr = 65,\n  Duration = 66,\n  Gte = 67,\n  Lss = 68,\n  Lte = 69,\n  Eql = 70,\n  BytesFilter = 71,\n  Bytes = 72,\n  NumberFilter = 73,\n  Number = 74,\n  LineFormatExpr = 75,\n  LabelFormatExpr = 76,\n  LabelsFormat = 77,\n  LabelFormatMatcher = 78,\n  DecolorizeExpr = 79,\n  DropLabelsExpr = 80,\n  DropLabels = 81,\n  DropLabel = 82,\n  KeepLabelsExpr = 83,\n  KeepLabels = 84,\n  KeepLabel = 85,\n  MetricExpr = 86,\n  RangeAggregationExpr = 87,\n  RangeOp = 88,\n  CountOverTime = 89,\n  Rate = 90,\n  RateCounter = 91,\n  BytesOverTime = 92,\n  BytesRate = 93,\n  AvgOverTime = 94,\n  SumOverTime = 95,\n  MinOverTime = 96,\n  MaxOverTime = 97,\n  StddevOverTime = 98,\n  StdvarOverTime = 99,\n  QuantileOverTime = 100,\n  FirstOverTime = 101,\n  LastOverTime = 102,\n  AbsentOverTime = 103,\n  LogRangeExpr = 104,\n  Range = 105,\n  OffsetExpr = 106,\n  UnwrapExpr = 107,\n  ConvOp = 108,\n  BytesConv = 109,\n  DurationConv = 110,\n  DurationSecondsConv = 111,\n  Grouping = 112,\n  Labels = 113,\n  VectorAggregationExpr = 114,\n  VectorOp = 115,\n  BinOpExpr = 116,\n  BinOpModifier = 117,\n  OnOrIgnoringModifier = 118,\n  GroupingLabels = 119,\n  GroupingLabelList = 120,\n  GroupingLabel = 121,\n  LabelName = 122,\n  Add = 123,\n  Sub = 124,\n  Mul = 125,\n  Div = 126,\n  Mod = 127,\n  Pow = 128,\n  LiteralExpr = 129,\n  LabelReplaceExpr = 130,\n  VectorExpr = 131;\n\nfunction getNodeFromQuery(query, nodeType) {\n  const nodes = [];\n  const tree = parser.parse(query);\n  tree.iterate({\n    enter: (node) => {\n      if (nodeType === undefined || nodeType === node.type.id) {\n        nodes.push(node.node);\n      }\n    },\n  });\n  return nodes[0];\n}\n\nfunction isLogsQuery(query) {\n  if (getNodeFromQuery(query, MetricExpr$1)) {\n    return false;\n  }\n  return true;\n}\n\nfunction indent(level) {\n  return '  '.repeat(level);\n}\n\nfunction indentMultiline(block, level) {\n  const lines = block.split('\\n');\n  return lines.map((line) => indent(level) + line).join('\\n');\n}\n\nfunction trimMultiline(block) {\n  const lines = block.split('\\n');\n  return lines.map((line) => line.trimEnd()).join('\\n');\n}\n\nfunction needsBrackets(node, queryType) {\n  const childNodeIsSame = node.firstChild?.type.id === queryType;\n  let addBrackets = false;\n\n  if (node.firstChild && childNodeIsSame) {\n    addBrackets = true;\n    node = node.firstChild;\n  }\n\n  return { addBrackets, newNode: node };\n}\n\nfunction iterateNode(node, lookingFor) {\n  const nodes = [];\n  let child = node.firstChild;\n\n  while (child) {\n    if (lookingFor.includes(child.type.id)) {\n      nodes.push(child);\n    }\n\n    nodes.push(...iterateNode(child, lookingFor));\n    child = child.nextSibling;\n  }\n\n  return nodes;\n}\n\nfunction buildResponse(pipelineType, lastPipelineType, formattedNode) {\n  if (lastPipelineType === pipelineType) {\n    return ` ${formattedNode}`;\n  }\n\n  return `\\n${indent(1)}${formattedNode}`;\n}\n\nfunction trimEnd(input, charactersToTrim) {\n  let endIndex = input.length - 1;\n  while (endIndex >= 0 && charactersToTrim.includes(input[endIndex])) {\n    endIndex--;\n  }\n  return input.substring(0, endIndex + 1);\n}\n\nconst formatLogExpr = (node, query) => {\n  const { addBrackets, newNode } = needsBrackets(node, LogExpr);\n  node = newNode;\n\n  const tree = parser.parse(query.substring(node.from, node.to));\n  let formatted = '';\n\n  tree.iterate({\n    enter: (ref) => {\n      const node = ref.node;\n\n      switch (node.type.id) {\n        case Selector:\n          formatted += formatSelector(node, query);\n          break;\n\n        case PipelineExpr:\n          node.parent?.type.id !== PipelineExpr && (formatted += formatPipelineExpr(node, query));\n          break;\n      }\n    },\n  });\n\n  return addBrackets ? '(' + formatted + ')' : formatted;\n};\n\nfunction formatSelector(node, query) {\n  const selector = query.substring(node.from, node.to);\n  const subtree = parser.parse(selector);\n  const labelNodes = [];\n  let response = '';\n\n  subtree.iterate({\n    enter: (ref) => {\n      const node = ref.node;\n      if (node.type.id === Matcher) {\n        labelNodes.push(node);\n      }\n    },\n  });\n\n  labelNodes.sort((a, b) => {\n    const labelNodeA = a.getChild(Identifier);\n    const labelNodeB = b.getChild(Identifier);\n\n    const labelValueA = labelNodeA && query.substring(labelNodeA.from, labelNodeA.to);\n    const labelValueB = labelNodeB && query.substring(labelNodeB.from, labelNodeB.to);\n\n    if (!labelValueA || !labelValueB) {\n      return 0;\n    }\n\n    if (labelValueA < labelValueB) {\n      return -1;\n    }\n\n    if (labelValueA > labelValueB) {\n      return 1;\n    }\n\n    return 0;\n  });\n\n  labelNodes.forEach((node) => {\n    const labelNode = node.getChild(Identifier);\n    const operatorNode = labelNode ? labelNode.nextSibling : null;\n    const valueNode = node.getChild(String);\n\n    const label = labelNode ? query.substring(labelNode.from, labelNode.to) : null;\n    const operator = operatorNode ? query.substring(operatorNode.from, operatorNode.to) : null;\n    const value = valueNode ? query.substring(valueNode.from, valueNode.to) : null;\n\n    response += `${label}${operator}${value}, `;\n  });\n\n  return '{' + trimEnd(response, ', ') + '}';\n}\n\nfunction formatPipelineExpr(node, query) {\n  const pipelineExprNodes = [\n    LineFilter,\n    LabelParser,\n    LabelFilter,\n    JsonExpressionParser,\n    LineFormatExpr,\n    LabelFormatExpr,\n    DecolorizeExpr,\n  ];\n  let lastPipelineType;\n  let response = '';\n\n  iterateNode(node, pipelineExprNodes).forEach((node) => {\n    switch (node.type.id) {\n      case LineFilter:\n        response += buildResponse(LineFilter, lastPipelineType, formatLineFilter(node, query));\n        lastPipelineType = LineFilter;\n        break;\n\n      case LabelParser:\n        response += buildResponse(LabelParser, lastPipelineType, formatLabelParser(node, query));\n        lastPipelineType = LabelParser;\n        break;\n\n      case JsonExpressionParser:\n        response += buildResponse(JsonExpressionParser, lastPipelineType, formatJsonExpressionParser(node, query));\n        lastPipelineType = JsonExpressionParser;\n        break;\n\n      case LabelFilter:\n        response += buildResponse(LabelFilter, lastPipelineType, formatLabelFilter(node, query));\n        lastPipelineType = LabelFilter;\n        break;\n\n      case LineFormatExpr:\n        response += buildResponse(LineFormatExpr, lastPipelineType, formatLineFormatExpr(node, query));\n        lastPipelineType = LineFormatExpr;\n        break;\n\n      case LabelFormatExpr:\n        response += buildResponse(LabelFormatExpr, lastPipelineType, formatLabelFormatExpr(node, query));\n        lastPipelineType = LabelFormatExpr;\n        break;\n\n      case DecolorizeExpr:\n        response += buildResponse(DecolorizeExpr, lastPipelineType, formatDecolorizeExpr());\n        lastPipelineType = DecolorizeExpr;\n        break;\n    }\n  });\n\n  return response;\n}\n\nfunction formatLineFilter(node, query) {\n  const filterNode = node.getChild(Filter);\n  const filterOperationNode = node.getChild(FilterOp);\n  const stringNode = node.getChild(String);\n\n  const filter = filterNode && query.substring(filterNode.from, filterNode.to);\n  const string = stringNode && query.substring(stringNode.from, stringNode.to);\n\n  if (filterOperationNode) {\n    return `${filter} ip(${string})`;\n  }\n  return `${filter} ${string}`;\n}\n\nfunction formatLabelParser(node, query) {\n  const hasString = node.getChild(String);\n\n  if (hasString) {\n    const parserNode = node.getChild(Regexp) || node.getChild(Pattern);\n    const stringNode = node.getChild(String);\n\n    const parser = parserNode && query.substring(parserNode.from, parserNode.to);\n    const string = stringNode && query.substring(stringNode.from, stringNode.to);\n\n    return `| ${parser}${string}`;\n  }\n\n  const labelParser = query.substring(node.from, node.to);\n  return `| ${labelParser}`;\n}\n\nfunction formatJsonExpressionParser(node, query) {\n  const jsonExpressionNodes = iterateNode(node, [JsonExpression]);\n  let response = '';\n\n  jsonExpressionNodes.forEach((node) => {\n    const identifierNode = node.getChild(Identifier);\n    const valueNode = node.getChild(String);\n\n    const identifier = identifierNode && query.substring(identifierNode.from, identifierNode.to);\n    const value = valueNode && query.substring(valueNode.from, valueNode.to);\n\n    response += `${identifier}=${value}, `;\n  });\n\n  return `| json ${trimEnd(response, ', ')}`;\n}\n\nfunction formatLabelFilter(node, query) {\n  const selectedFilter =\n    node.getChild(Matcher) ||\n    node.getChild(IpLabelFilter) ||\n    node.getChild(NumberFilter) ||\n    node.getChild(UnitFilter)?.getChild(DurationFilter) ||\n    node.getChild(UnitFilter)?.getChild(BytesFilter);\n\n  if (!selectedFilter) {\n    return '';\n  }\n\n  const selectedFilterType = selectedFilter.type.id;\n\n  const identifierNode = selectedFilter.getChild(Identifier);\n  const operatorNode = identifierNode && identifierNode.nextSibling;\n  let valueNode;\n\n  if (selectedFilterType === DurationFilter) {\n    valueNode = selectedFilter.getChild(Duration);\n  } else if (selectedFilterType === BytesFilter) {\n    valueNode = selectedFilter.getChild(Bytes);\n  } else if (selectedFilterType === NumberFilter) {\n    valueNode = selectedFilter.getChild(Number);\n  } else {\n    valueNode = selectedFilter.getChild(String);\n  }\n\n  const identifier = identifierNode && query.substring(identifierNode.from, identifierNode.to);\n  const operator = operatorNode && query.substring(operatorNode.from, operatorNode.to);\n  const value = valueNode && query.substring(valueNode.from, valueNode.to);\n\n  if (selectedFilterType === IpLabelFilter) {\n    return `| ${identifier}${operator}ip(${value})`;\n  }\n\n  return `| ${identifier}${operator}${value}`;\n}\n\nfunction formatLineFormatExpr(node, query) {\n  const stringNode = node.getChild(String);\n  const string = stringNode && query.substring(stringNode.from, stringNode.to);\n  return `| line_format ${string}`;\n}\n\nfunction formatLabelFormatExpr(node, query) {\n  const labelFormatMatcherNodes = iterateNode(node, [LabelFormatMatcher]);\n  let response = '| label_format ';\n\n  labelFormatMatcherNodes.forEach((labelFormatMatcherNode) => {\n    let identifierNode;\n    let valueNode;\n\n    if (labelFormatMatcherNode.getChildren(Identifier).length === 2) {\n      [identifierNode, valueNode] = labelFormatMatcherNode.getChildren(Identifier);\n    } else {\n      identifierNode = labelFormatMatcherNode.getChild(Identifier);\n      valueNode = labelFormatMatcherNode.getChild(String);\n    }\n\n    const identifier = identifierNode && query.substring(identifierNode.from, identifierNode.to);\n    const value = valueNode && query.substring(valueNode.from, valueNode.to);\n\n    response += `${identifier}=${value}, `;\n  });\n\n  return trimEnd(response, ', ');\n}\n\nfunction formatDecolorizeExpr() {\n  return `| decolorize`;\n}\n\nconst formatMetricExpr = (node, query) => {\n  const { addBrackets, newNode } = needsBrackets(node, MetricExpr);\n  node = newNode;\n  let formatted = '';\n\n  const childNode = node.firstChild;\n  switch (childNode && childNode.type.id) {\n    case RangeAggregationExpr:\n      formatted = formatRangeAggregationExpr(node, query);\n      break;\n\n    case VectorAggregationExpr:\n      formatted = formatVectorAggregationExpr(node, query);\n      break;\n\n    case BinOpExpr:\n      formatted = formatBinOpExpr(node, query);\n      break;\n\n    case LiteralExpr:\n      formatted = formatLiteralExpr(node, query);\n      break;\n\n    case LabelReplaceExpr:\n      formatted = formatLabelReplaceExpr(node, query);\n      break;\n\n    case VectorExpr:\n      formatted = formatVectorExpr(node, query);\n      break;\n  }\n\n  return addBrackets ? '(' + formatted + ')' : formatted;\n};\n\nfunction formatRangeAggregationExpr(node, query) {\n  let response = '';\n\n  iterateNode(node, [RangeOp, Number, LogRangeExpr, Grouping]).forEach((node) => {\n    if (node.parent?.type.id !== RangeAggregationExpr) {\n      return;\n    }\n\n    switch (node.type.id) {\n      case RangeOp:\n        response += `${query.substring(node.from, node.to)}(\\n`;\n        break;\n\n      case Number:\n        response += `${indent(1) + query.substring(node.from, node.to)},\\n`;\n        break;\n\n      case LogRangeExpr:\n        response += formatLogRangeExpr(node, query);\n        break;\n\n      case Grouping:\n        response += formatGrouping(node, query);\n        break;\n    }\n  });\n\n  return response;\n}\n\nfunction formatLogRangeExpr(node, query) {\n  const nodes = [];\n  let selector = '';\n  let pipeline = '';\n  let range = '';\n  let offset = '';\n  let unwrap = '';\n\n  iterateNode(node, [Selector, Range, OffsetExpr, UnwrapExpr, PipelineExpr]).forEach((node) => {\n    if (node.parent?.type.id !== LogRangeExpr) {\n      return;\n    }\n\n    nodes.push(node);\n\n    switch (node.type.id) {\n      case Selector: {\n        let logExpr = query.substring(node.from, node.to);\n        selector += formatSelector({ ...node, from: 0, to: logExpr.length }, logExpr);\n        break;\n      }\n\n      case PipelineExpr:\n        pipeline += formatPipelineExpr(node, query);\n        break;\n\n      case Range:\n        range += query.substring(node.from, node.to);\n        break;\n\n      case OffsetExpr: {\n        const durationNode = node.getChild(Duration);\n        offset += ` offset ${durationNode ? query.substring(durationNode.from, durationNode.to) : ''}`;\n        break;\n      }\n\n      case UnwrapExpr:\n        iterateNode(node, [Identifier, ConvOp, LabelFilter]).forEach((node, _, arr) => {\n          switch (node.type.id) {\n            case Identifier: {\n              if (node.parent?.type.id !== UnwrapExpr) {\n                return;\n              }\n\n              const hasConvOp = arr.find((node) => node.type.id === ConvOp);\n\n              if (hasConvOp) {\n                return;\n              }\n\n              unwrap += `| unwrap ${query.substring(node.from, node.to)} `;\n              return;\n            }\n\n            case ConvOp: {\n              const identifierNode = arr.find((node) => node.type.id === Identifier);\n              const identifier = identifierNode ? query.substring(identifierNode.from, identifierNode.to) : '';\n              unwrap += `| unwrap ${query.substring(node.from, node.to)}(${identifier}) `;\n              return;\n            }\n\n            case LabelFilter:\n              unwrap += formatLabelFilter(node, query);\n              return;\n          }\n        });\n        break;\n    }\n  });\n\n  let response = '';\n  nodes.forEach((node, index, array) => {\n    const previousNode = array[index - 1];\n\n    if (node.type.id === Selector) {\n      response += indent(1) + selector;\n    }\n\n    if (node.type.id === PipelineExpr) {\n      response += indentMultiline(pipeline, 1);\n    }\n\n    if (node.type.id === Range) {\n      response += '\\n' + indent(1) + range;\n    }\n\n    if (node.type.id === OffsetExpr) {\n      response += offset;\n    }\n\n    if (node.type.id === UnwrapExpr) {\n      if (previousNode?.type.id !== OffsetExpr && previousNode?.type.id !== Range) {\n        response += '\\n' + indent(1) + unwrap;\n      } else {\n        response += ' ' + unwrap;\n      }\n    }\n  });\n\n  return (response += '\\n)');\n}\n\nfunction formatGrouping(node, query) {\n  let response = '';\n\n  const labels = iterateNode(node, [Identifier]).map((node) => {\n    return query.substring(node.from, node.to);\n  });\n\n  iterateNode(node, [By, Without]).forEach((node) => {\n    if (node.parent?.type.id !== Grouping) {\n      return;\n    }\n\n    switch (node.type.id) {\n      case By:\n        response = ` by (${labels.join(', ')}) `;\n        break;\n\n      case Without:\n        response = ` without (${labels.join(', ')}) `;\n        break;\n    }\n  });\n\n  return response;\n}\n\nfunction formatVectorAggregationExpr(node, query) {\n  let response = '';\n\n  iterateNode(node, [VectorOp, Number, MetricExpr, Grouping]).forEach((node, _, arr) => {\n    if (node.parent?.type.id !== VectorAggregationExpr) {\n      return;\n    }\n\n    switch (node.type.id) {\n      case VectorOp:\n        response += `${query.substring(node.from, node.to)}`;\n        break;\n\n      case Number:\n        response += `(\\n`;\n        response += `${indent(1) + query.substring(node.from, node.to)},\\n`;\n        break;\n\n      case MetricExpr: {\n        const hasNumber = arr.find((node) => node.type.id === Number && node.parent?.type.id === VectorAggregationExpr);\n        response += hasNumber ? '' : '(\\n';\n\n        const metricExpr = query.substring(node.from, node.to);\n        const metricNode = getNodeFromQuery(metricExpr, MetricExpr);\n        response += indentMultiline(formatMetricExpr(metricNode, metricExpr), 1);\n        response += '\\n)';\n        break;\n      }\n\n      case Grouping:\n        response += formatGrouping(node, query);\n        break;\n    }\n  });\n\n  return response;\n}\n\nfunction formatBinOpExpr(node, query) {\n  let operator;\n\n  const [leftExpr, rightExpr] = iterateNode(node, [Expr]).map((node, idx) => {\n    if (idx === 0) {\n      operator = query.substring(node.nextSibling?.from ?? 0, node.nextSibling?.to);\n    }\n\n    const expr = query.substring(node.from, node.to);\n    let expressionNode;\n\n    if (isLogsQuery(expr)) {\n      expressionNode = getNodeFromQuery(expr, LogExpr$1);\n      return formatLogExpr(expressionNode, expr);\n    } else {\n      expressionNode = getNodeFromQuery(expr, MetricExpr);\n      return formatMetricExpr(expressionNode, expr);\n    }\n  });\n\n  return leftExpr + '\\n' + operator + '\\n' + rightExpr;\n}\n\nfunction formatLiteralExpr(node, query) {\n  node = node.getChild(LiteralExpr) ?? node;\n  const addNode = node.getChild(Add);\n  const subNode = node.getChild(Sub);\n  const numberNode = node.getChild(Number);\n\n  if (!numberNode) {\n    return '';\n  }\n\n  if (addNode) {\n    return `+${query.substring(numberNode.from, numberNode.to)}`;\n  }\n\n  if (subNode) {\n    return `-${query.substring(numberNode.from, numberNode.to)}`;\n  }\n\n  return query.substring(numberNode.from, numberNode.to);\n}\n\nfunction formatLabelReplaceExpr(node, query) {\n  let response = 'label_replace(\\n';\n\n  iterateNode(node, [MetricExpr, String]).forEach((node) => {\n    if (node.parent?.type.id !== LabelReplaceExpr) {\n      return;\n    }\n\n    if (node.type.id === MetricExpr) {\n      const metricExpr = query.substring(node.from, node.to);\n      const metricNode = getNodeFromQuery(metricExpr, MetricExpr);\n      response += indentMultiline(formatMetricExpr(metricNode, metricExpr), 1) + ',\\n';\n    } else {\n      response += indent(1) + query.substring(node.from, node.to) + ',\\n';\n    }\n  });\n\n  return trimEnd(response, ',\\n') + '\\n)';\n}\n\nfunction formatVectorExpr(node, query) {\n  node = node.getChild(VectorExpr) ?? node;\n  const numberNode = node.getChild(Number);\n\n  if (!numberNode) {\n    return '';\n  }\n\n  return `vector(${query.substring(numberNode.from, numberNode.to)})`;\n}\n\n/**\n * @experimental This feature is subject to change or removal in future versions.\n */\nconst formatLokiQuery = (query) => {\n  const tree = parser.parse(query);\n  let formatted = '';\n\n  tree.iterate({\n    enter: (ref) => {\n      const node = ref.node;\n\n      if (node.parent?.type.id !== Expr || node.parent?.parent?.type.id === BinOpExpr) {\n        return;\n      }\n\n      switch (node.type.id) {\n        case MetricExpr:\n          formatted = formatMetricExpr(node, query);\n          return false;\n\n        case LogExpr:\n          formatted = formatLogExpr(node, query);\n          return false;\n      }\n    },\n  });\n\n  return trimMultiline(formatted);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9fX3ZpcnR1YWxfXy9AZ3JhZmFuYS1sZXplci1sb2dxbC12aXJ0dWFsLTBiNzVhYWZlOWUvMC9jYWNoZS9AZ3JhZmFuYS1sZXplci1sb2dxbC1ucG0tMC4xLjExLTkxZTlkNzRhNzYtNmE2MjRiOWE4ZC56aXAvbm9kZV9tb2R1bGVzL0BncmFmYW5hL2xlemVyLWxvZ3FsL2luZGV4LmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFDOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCLGVBQWUsK0NBQVE7QUFDdkI7QUFDQSxzZkFBc2YsSUFBSSxNQUFNLFVBQVUsVUFBVSxVQUFVLFVBQVUsVUFBVSxVQUFVLFFBQVEsSUFBSSxTQUFTLFVBQVUscURBQXFELElBQUksVUFBVSwyRkFBMkYsbUNBQW1DLElBQUkscUhBQXFILHNIQUFzSCxTQUFTLGtDQUFrQyxVQUFVLFVBQVUsVUFBVSxzQkFBc0IsZ0ZBQWdGLElBQUkscUhBQXFILGNBQWMsTUFBTSxVQUFVLFVBQVUsVUFBVSwrR0FBK0csSUFBSSxVQUFVLFVBQVUsaUlBQWlJLElBQUksUUFBUSxJQUFJLGdHQUFnRyxJQUFJLDRCQUE0QixVQUFVLDBIQUEwSCxtRUFBbUUsb0JBQW9CLElBQUksU0FBUyxJQUFJLFdBQVcsc09BQXNPLElBQUksNENBQTRDLDZDQUE2QyxRQUFRLElBQUksaVlBQWlZLFVBQVUsVUFBVSxVQUFVLFVBQVUsVUFBVTtBQUN0dkYsMkVBQTJFLDBFQUEwRSw4RkFBOEYsR0FBRyxvQkFBb0Isa0ZBQWtGLElBQUksc0JBQXNCLGdCQUFnQixnS0FBZ0ssZ0dBQWdHLDJFQUEyRSwyREFBMkQsd0ZBQXdGLHNFQUFzRSwwR0FBMEcsSUFBSSx5REFBeUQsNEhBQTRILHdIQUF3SCwwRUFBMEUscUVBQXFFLEtBQUssS0FBSywwRUFBMEUsZ0tBQWdLLHVCQUF1QixvSEFBb0gsdUJBQXVCLGdHQUFnRyxJQUFJLHVJQUF1SSxnR0FBZ0csSUFBSSx1SUFBdUksNEhBQTRILHNEQUFzRCxHQUFHLGNBQWMseUZBQXlGLEdBQUcsY0FBYyw4RkFBOEYsS0FBSyxxRUFBcUUscUhBQXFILHFJQUFxSSw2SEFBNkgsNlNBQTZTLDBLQUEwSyxHQUFHLGlCQUFpQiw0RkFBNEYsR0FBRyxpQkFBaUIsOEZBQThGLFVBQVUsS0FBSyw0TUFBNE0sb0hBQW9IO0FBQ3BwSSxzRUFBc0UsMkRBQTJELHdFQUF3RSx3QkFBd0IsWUFBWSxnRUFBZ0UsVUFBVSw4QkFBOEIsVUFBVSwyVkFBMlYsd0NBQXdDLEVBQUUsa0JBQWtCLFVBQVUsMkJBQTJCLFVBQVUsMkJBQTJCLFVBQVUsc0lBQXNJLG1CQUFtQixvQkFBb0IsVUFBVSxzQkFBc0Isb0ZBQW9GO0FBQzNtQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxHQUFHLEtBQUssR0FBRyx3REFBd0QsSUFBSSxJQUFJLDRNQUE0TSxxRkFBcUYsd0VBQXdFLElBQUksaVRBQWlULElBQUksZ0NBQWdDLGdGQUFnRiwrR0FBK0csSUFBSSx5Q0FBeUMsd0ZBQXdGLFVBQVUsbUdBQW1HLHVDQUF1Qyx3RUFBd0UsNkRBQTZELG9CQUFvQixHQUFHLGlCQUFpQjtBQUN2OEM7QUFDQSxhQUFhLGVBQWU7QUFDNUIsaUJBQWlCLG9FQUFvRSxFQUFFLG9FQUFvRSxFQUFFLHFEQUFxRDtBQUNsTjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0I7O0FBRUEsY0FBYyxVQUFVLEVBQUUsY0FBYztBQUN4Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsdUJBQXVCO0FBQ2pDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTTtBQUM1QyxHQUFHOztBQUVILFdBQVcsZ0NBQWdDO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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QUFFSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QixvQ0FBb0M7QUFDM0Q7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QixnREFBZ0Q7QUFDdkU7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsZ0RBQWdEO0FBQy9EOztBQUVBO0FBQ0EsZUFBZSxnREFBZ0Q7QUFDL0Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsZ0RBQWdEO0FBQ25FOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTs7QUFFcTZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uLy55YXJuL19fdmlydHVhbF9fL0BncmFmYW5hLWxlemVyLWxvZ3FsLXZpcnR1YWwtMGI3NWFhZmU5ZS8wL2NhY2hlL0BncmFmYW5hLWxlemVyLWxvZ3FsLW5wbS0wLjEuMTEtOTFlOWQ3NGE3Ni02YTYyNGI5YThkLnppcC9ub2RlX21vZHVsZXMvQGdyYWZhbmEvbGV6ZXItbG9ncWwvaW5kZXguZXMuanM/MTc2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMUlBhcnNlciB9IGZyb20gJ0BsZXplci9scic7XG5cbi8vIFRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IGxlemVyLWdlbmVyYXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBlZGl0IGl0LlxuY29uc3QgSnNvbiQxID0gMSxcbiAgTG9nZm10JDEgPSAyLFxuICBVbnBhY2skMSA9IDMsXG4gIFBhdHRlcm4kMSA9IDQsXG4gIFJlZ2V4cCQxID0gNSxcbiAgVW53cmFwJDEgPSA2LFxuICBJcCQxID0gNyxcbiAgTGFiZWxGb3JtYXQkMSA9IDgsXG4gIExpbmVGb3JtYXQkMSA9IDksXG4gIExhYmVsUmVwbGFjZSQxID0gMTAsXG4gIFZlY3RvciQxID0gMTEsXG4gIE9mZnNldCQxID0gMTIsXG4gIEJvb2wkMSA9IDEzLFxuICBPbiQxID0gMTQsXG4gIElnbm9yaW5nJDEgPSAxNSxcbiAgR3JvdXBMZWZ0JDEgPSAxNixcbiAgR3JvdXBSaWdodCQxID0gMTcsXG4gIERlY29sb3JpemUkMSA9IDE4LFxuICBEcm9wJDEgPSAxOSxcbiAgS2VlcCQxID0gMjAsXG4gIEJ5JDEgPSAyMSxcbiAgV2l0aG91dCQxID0gMjIsXG4gIEFuZCQxID0gMjMsXG4gIE9yJDEgPSAyNCxcbiAgVW5sZXNzJDEgPSAyNSxcbiAgU3VtJDEgPSAyNixcbiAgQXZnJDEgPSAyNyxcbiAgQ291bnQkMSA9IDI4LFxuICBNYXgkMSA9IDI5LFxuICBNaW4kMSA9IDMwLFxuICBTdGRkZXYkMSA9IDMxLFxuICBTdGR2YXIkMSA9IDMyLFxuICBCb3R0b21rJDEgPSAzMyxcbiAgVG9wayQxID0gMzQsXG4gIExvZ0V4cHIkMSA9IDM4LFxuICBNZXRyaWNFeHByJDEgPSA4NjtcblxuY29uc3Qga2V5d29yZFRva2VucyA9IHtcbiAganNvbjogSnNvbiQxLFxuICBsb2dmbXQ6IExvZ2ZtdCQxLFxuICB1bnBhY2s6IFVucGFjayQxLFxuICBwYXR0ZXJuOiBQYXR0ZXJuJDEsXG4gIHJlZ2V4cDogUmVnZXhwJDEsXG4gIGlwOiBJcCQxLFxuICBsYWJlbF9mb3JtYXQ6IExhYmVsRm9ybWF0JDEsXG4gIGxpbmVfZm9ybWF0OiBMaW5lRm9ybWF0JDEsXG4gIGxhYmVsX3JlcGxhY2U6IExhYmVsUmVwbGFjZSQxLFxuICB2ZWN0b3I6IFZlY3RvciQxLFxuICBvZmZzZXQ6IE9mZnNldCQxLFxuICBib29sOiBCb29sJDEsXG4gIG9uOiBPbiQxLFxuICBpZ25vcmluZzogSWdub3JpbmckMSxcbiAgZ3JvdXBfbGVmdDogR3JvdXBMZWZ0JDEsXG4gIGdyb3VwX3JpZ2h0OiBHcm91cFJpZ2h0JDEsXG4gIHVud3JhcDogVW53cmFwJDEsXG4gIGRlY29sb3JpemU6IERlY29sb3JpemUkMSxcbiAgZHJvcDogRHJvcCQxLFxuICBrZWVwOiBLZWVwJDEsXG59O1xuXG5jb25zdCBzcGVjaWFsaXplSWRlbnRpZmllciA9ICh2YWx1ZSkgPT4ge1xuICByZXR1cm4ga2V5d29yZFRva2Vuc1t2YWx1ZS50b0xvd2VyQ2FzZSgpXSB8fCAtMTtcbn07XG5cbmNvbnN0IGNvbnRleHR1YWxLZXl3b3JkVG9rZW5zID0ge1xuICBieTogQnkkMSxcbiAgd2l0aG91dDogV2l0aG91dCQxLFxuICBhbmQ6IEFuZCQxLFxuICBvcjogT3IkMSxcbiAgdW5sZXNzOiBVbmxlc3MkMSxcbiAgc3VtOiBTdW0kMSxcbiAgYXZnOiBBdmckMSxcbiAgY291bnQ6IENvdW50JDEsXG4gIG1heDogTWF4JDEsXG4gIG1pbjogTWluJDEsXG4gIHN0ZGRldjogU3RkZGV2JDEsXG4gIHN0ZHZhcjogU3RkdmFyJDEsXG4gIGJvdHRvbWs6IEJvdHRvbWskMSxcbiAgdG9wazogVG9wayQxLFxufTtcblxuY29uc3QgZXh0ZW5kSWRlbnRpZmllciA9ICh2YWx1ZSkgPT4ge1xuICByZXR1cm4gY29udGV4dHVhbEtleXdvcmRUb2tlbnNbdmFsdWUudG9Mb3dlckNhc2UoKV0gfHwgLTE7XG59O1xuXG4vLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC5cbmNvbnN0IHNwZWNfSWRlbnRpZmllciA9IHtfX3Byb3RvX186bnVsbCxjb3VudF9vdmVyX3RpbWU6MjgxLCByYXRlOjI4MywgcmF0ZV9jb3VudGVyOjI4NSwgYnl0ZXNfb3Zlcl90aW1lOjI4NywgYnl0ZXNfcmF0ZToyODksIGF2Z19vdmVyX3RpbWU6MjkxLCBzdW1fb3Zlcl90aW1lOjI5MywgbWluX292ZXJfdGltZToyOTUsIG1heF9vdmVyX3RpbWU6Mjk3LCBzdGRkZXZfb3Zlcl90aW1lOjI5OSwgc3RkdmFyX292ZXJfdGltZTozMDEsIHF1YW50aWxlX292ZXJfdGltZTozMDMsIGZpcnN0X292ZXJfdGltZTozMDUsIGxhc3Rfb3Zlcl90aW1lOjMwNywgYWJzZW50X292ZXJfdGltZTozMDksIGJ5dGVzOjMxNSwgZHVyYXRpb246MzE3LCBkdXJhdGlvbl9zZWNvbmRzOjMxOX07XG5jb25zdCBwYXJzZXIgPSBMUlBhcnNlci5kZXNlcmlhbGl6ZSh7XG4gIHZlcnNpb246IDE0LFxuICBzdGF0ZXM6IFwiQ2RPWVFQT09PI11RUE8nI0RUTyRsUVBPJyNEU09ZUVBPJyNEU09PUU8nI0VXJyNFV08keVFQTycjRVZPT1FPJyNFcycjRXNPJU9RUE8nI0VyUSVaUVBPT09PUU8nI0ZSJyNGUk8mW1FQTycjRlJPJmFRUE8nI0ZTTyZmUVBPJyNGVE9PUU8nI0VVJyNFVU9PUU8nI0RSJyNEUk9PUU8nI0VYJyNFWE9PUU8nI0VZJyNFWU9PUU8nI0VaJyNFWk9PUU8nI0VbJyNFW09PUU8nI0VdJyNFXU9PUU8nI0VeJyNFXk9PUU8nI0VfJyNFX09PUU8nI0VgJyNFYE9PUU8nI0VhJyNFYU9PUU8nI0ViJyNFYk9PUU8nI0VjJyNFY09PUU8nI0VkJyNFZE9PUU8nI0VlJyNFZU9PUU8nI0VmJyNFZk9PUU8nI0VnJyNFZ08ma1FQTycjRFZPT1FPJyNEVScjRFVPJnlRUE8sNTlvT09RTycjRGInI0RiTydSUVBPJyNEYU9PUU8nI0RgJyNEYE8nWlFQTycjRF9PKHRRUE8nI0RfT09RTycjRF4nI0ReTyp2UVBPLDU5bk8sVVFQTyw1OW5PLF1RUE8sNTpwTyxkUVBPLDU6cU8sb1FQTycjRXBPLnRRUE8sNTteTy57UVBPLDU7Xk8vUVFQTyw1O2BPL1FRUE8sNTtgTy9RUVBPLDU7YE8vUVFQTyw1O2BPL1FRUE8sNTtgTy9RUVBPLDU7YE9PUU8sNTttLDU7bU9ZUVBPLDU7bk8xXlFQTyw1O29PMWNRUE8sNTlxTyNdUVBPLDU5cE9PUU8xRy9aMUcvWk9PUU8nI0RlJyNEZU9PUU8sNTl7LDU5e08xaFFQTyw1OXtPT1FPLDU5eiw1OXpPMW1RUE8nI0RWTzJbUVBPJyNEZ09PUU8nI0RnJyNEZ08zeFFQTycjRGdPT1FPJyNEbScjRG1PT1FPJyNEaycjRGtPKWRRUE8nI0RrTzN9UVBPLDU5eU81aFFQTycjRHlPNW1RUE8nI0R6T09RTycjRH0nI0R9TzVyUVBPJyNFT081d1FQTycjRVJPT1FPLDU5eSw1OXlPT1FPLDU5eCw1OXhPT1FPMUcvWTFHL1lPT1FPMUcwWzFHMFtPNXxRUE8nI0VoTyxnUVBPJyNFaE82YlFQTzFHMF1PNmdRUE8xRzBdTzZsUVBPLDU7W082dFFQTzFHMHhPOFBRUE8xRzB4TzhXUVBPMUcweE84X1FQTycjRXZPOmdRUE8nI0V1TzpxUVBPJyNFdU9ZUVBPMUcwek9ZUVBPMUcwek9ZUVBPMUcwek9ZUVBPMUcwek9ZUVBPMUcwek9ZUVBPMUcwek86e1FQTzFHMVlPO1NRUE8xRzFaT09RTzFHL10xRy9dT09RTzFHL1sxRy9bTztYUVBPMUcvZ087XlFQTyw1OXFPO2RRUE8sNTpZTztvUVBPJyNEak9PUU8nI0RpJyNEaU87dFFQTyw1OlNPT1FPLDU6Uiw1OlJPPV9RUE8sNTpWTylkUVBPLDU6Vk8pZFFQTyw1OlZPT1FPLDU6ZSw1OmVPPW1RUE8nI0R8T09RTycjRHsnI0R7Tz1yUVBPLDU6Zk8/XVFQTycjRVFPT1FPJyNFUScjRVFPT1FPJyNFUCcjRVBPQHxRUE8sNTpqT0JnUVBPJyNFVE9PUU8nI0VUJyNFVE9PUU8nI0VTJyNFU09EV1FQTyw1Om1PRXFRUE8nI0RfTzV8UVBPLDU7U09FeFFQTycjRWlPRX1RUE8sNTtTT0ZoUVBPLDU7U09GclFQTyw1O1NPRnlRUE8sNTtTT0dPUVBPNysld08sZ1FQTzcrJXdPT1FPJyNFcScjRXFPSGBRUE8xRzB2T09RTzFHMHYxRzB2T0hoUVBPNysmZE9ZUVBPNysmZE9JeFFQTzcrJmRPSlBRUE83KyZkT0pXUVFPJyNFd09PUU8sNTtiLDU7Yk9MYFFQTyw1O2FPTGdRUE8sNTthT014UVBPNysmZk9OUFFQTzcrJmZPT1FPNysmZjcrJmZPTl5RUE83KyZmT05lUVBPNysmZk8hIGpRUE83KyZmTyEgelFQTzcrJnRPT1FPNysmdTcrJnVPISFQUVBPNyslUk8hIVVRUE8xRy9yT09RTzFHL3QxRy90T09RTzFHL3sxRy97T09RTzFHL30xRy99TyEhWlFQTyw1OlVPISFgUVBPLDU6VE9PUU8xRy9xMUcvcU8hIWVRUE8xRy9xTyEkT1FQTyw1OmhPNW1RUE8sNTpnTzVyUVBPLDU6a081d1FQTyw1Om5PISRXUVBPLDU7Vk9FfVFQTzFHMG5PISRmUVBPMUcwbk8hJG5RUE8sNTtUTylkUVBPLDU7Vk8hJHNRUE8xRzBuTyEkelFQTycjRWpPISVQUVBPMUcwbk8hJHNRUE8xRzBuTyElWFFQTzFHMG5PISVgUVBPMUcwbk82XVFQTzFHMG5PT1FPMUcwbjFHMG5PT1FPPDxJYzw8SWNPISVrUVBPPDxJY08hJXBRUE8sNTtdT09RTzcrJmI3KyZiT09RTzw8Sk88PEpPTyEldVFQTzw8Sk9PWVFQTzw8Sk9PT1FPJyNFeScjRXlPISV8UVBPLDU7Y09PUU8nI0V4JyNFeE9PUU8sNTtjLDU7Y09PUU8xRzB7MUcwe08hJlVRUE8xRzB7TyEoWFFQTzw8SmBPT1FPPDxIbTw8SG1PISheUVBPNyslXk9PUU8xRy9wMUcvcE9PUU8xRy9vMUcvb09PUU8xRzBTMUcwU09PUU8xRzBSMUcwUk9PUU8xRzBWMUcwVk9PUU8xRzBZMUcwWU9PUU8nI0VsJyNFbE9PUU8xRzBxMUcwcU8hKGNRUE8xRzBxT09RTycjRW0nI0VtT09RTycjRW4nI0VuT09RTycjRW8nI0VvT09RTzcrJlk3KyZZT09RTzFHMG8xRzBvTyEoaFFQTzFHMHFPISh8UVBPNysmWU9PUU8sNTtVLDU7VU8hKVVRUE83KyZZTzZdUVBPNysmWU8hKV1RUE83KyZZTyEpaFFQT0FOPn1PT1FPMUcwdzFHMHdPISp4UVBPQU4/ak8hLFlRUE9BTj9qTyEsYVFRTzFHMH1PT1FPMUcwfTFHMH1PT1FPNysmZzcrJmdPISxpUVBPQU4/ek8hLG5RUE88PEh4TyEsc1FQTzcrJl1PISx4UVBPPDxJdE8hLVFRUE88PEl0TyEtWVFQTycjRWtPIS1fUVBPPDxJdE9PUU9HMjRpRzI0aU9PUU9HMjVVRzI1VU9PUU8xRzFPMUcxT09PUU83KyZpNysmaU8hLWdRUE9HMjVmT09RT0FOPmRBTj5kTyEtbFFQTzw8SXdPT1FPQU4/YEFOP2BPIS1xUVBPQU4/YE8hLXlRUE9MRCtRT09RT0FOP2NBTj9jT09RTyw1OmYsNTpmTyEuT1FQTyEkJ05sTyEuVFFQTyEpOURXTyEuWVFQTyEuSzlyT09RTyE0Ly9eITQvL15PNW1RUE8nI0R6TyEuX1FQTycjRF9PIS9WUVBPLDU5bk8hL2FRUE8nI0RTT1lRUE8xRzB6T1lRUE8xRzB6T1lRUE8xRzB6T1lRUE8xRzB6T1lRUE8xRzB6T1lRUE8xRzB6Ty9RUVBPLDU7YE8vUVFQTyw1O2BPL1FRUE8sNTtgTy9RUVBPLDU7YE8vUVFQTyw1O2BPL1FRUE8sNTtgTyEwbFFQTzcrJmZPITBzUVBPNysmZk8hMVFRUE83KyZmTyEyWVFQTzcrJmZPITJhUVBPNysmZk8hMVhRUE8nI0V0XCIsXG4gIHN0YXRlRGF0YTogXCIhMm5+TyN6T1NzT1N+T1laT1pbT2pVT2tVT2xVT21VT25VT29VT3BVT3FVT3JVTyFsWE8jb1lPI3BZTyN7UE8kT1JPJFFfTyRSYE8kU2FPJFRiTyRVY08kVmRPJFdlTyRYZk8kWWdPJFpoTyRbaU8kXWpPJF5rTyRfbE8kYG1Pfk96bk9+T31xTyFQcU8hVnFPIVdxT2d2WGh2WGl2WCFjdlghZXZYIWZ2WCFndlghaHZYI292WCNwdlgjcXZYI3J2WCNzdlgjdHZYfk8hWXVPI3h2WCRQdlh+UCNiTyRPek9+T2V7T2Z7TyRPfE9+T2chUE9oIU9PaSFQT30hVE8hYyFUTyFlIVRPIWYhVE8hZyFUTyFoIVRPI28hUU8jcCFRTyNxIVJPI3IhUk8jcyFSTyN0IVNPfk8hbCFVT35PJE8hVk9+TyRPIVdPfk97IVhPfSFYTyFPIVhPIVAhWE9+TyN8IVlPI30hWk9+T1YhW098IV1Pfk99cU8hUHFPIVZxTyFXcU9nIVJYaCFSWGkhUlghWSFSWCFjIVJYIWUhUlghZiFSWCFnIVJYIWghUlgjbyFSWCNwIVJYI3EhUlgjciFSWCNzIVJYI3QhUlgjeCFSWCRQIVJYJGEhUlgjfCFSWH5PUCFhT1EhYk9SIWJPUyFjT1QhY09XIWlPWCFoT2Ihak9jIWtPZCFsT3ohYE8kTyFmT35PfXFPIVBxTyFWcU8hV3FPZ3ZhaHZhaXZhIWN2YSFldmEhZnZhIWd2YSFodmEjb3ZhI3B2YSNxdmEjcnZhI3N2YSN0dmF+TyFZdU8jeHZhJFB2YX5QKWxPZ3VYaHVYaXVYfXVYIWN1WCFldVghZnVYIWd1WCFodVgjb3VYI3B1WCNxdVgjcnVYI3N1WCN0dVh+TyRQIW9PflArVE8kUCFwT35QK1RPIWwhdE8je1BPJE8hck9+TyRPIXVPfk9ZWk9aW09qVU9rVU9sVU9tVU9uVU9vVU9wVU9xVU9yVU8jb1lPI3BZTyN7UE8kT1JPJFFfTyRSYE8kU2FPJFRiTyRVY08kVmRPJFdlTyRYZk8kWWdPJFpoTyRbaU8kXWpPJF5rTyRfbE8kYG1Pfk8hbCF3T35QLHRPJE8heE9+T10he09eIXlPXyF5T1kjaVBaI2lQaiNpUGsjaVBsI2lQbSNpUG4jaVBvI2lQcCNpUHEjaVByI2lQIWwjaVAjbyNpUCNwI2lQI3sjaVAkTyNpUCRRI2lQJFIjaVAkUyNpUCRUI2lQJFUjaVAkViNpUCRXI2lQJFgjaVAkWSNpUCRaI2lQJFsjaVAkXSNpUCReI2lQJF8jaVAkYCNpUH5PIWwjVE9+T3wjVU9+TyRPI1dPfk97I1hPfSNYTyFPIVhPIVAhWE8hYyNZTyFlI1lPIWYjWU8hZyNZTyFoI1lPfk96I1pPZyFaWGghWlhpIVpYfSFaWCFQIVpYIVYhWlghVyFaWCFZIVpYIWMhWlghZSFaWCFmIVpYIWchWlghaCFaWCNvIVpYI3AhWlgjcSFaWCNyIVpYI3MhWlgjdCFaWCN4IVpYJFAhWlgkYSFaWCN8IVpYfk98I15Pfk9nI2BPaCNhTyN8I2BPaSFSYX0hUmEhUCFSYSFWIVJhIVchUmEhWSFSYSFjIVJhIWUhUmEhZiFSYSFnIVJhIWghUmEjbyFSYSNwIVJhI3EhUmEjciFSYSNzIVJhI3QhUmEjeCFSYSRQIVJhJGEhUmF+T3wjYk9+T3ojY09+T3ojZk9+T3ojak9+T31xTyFQcU8hVnFPIVdxTyFZI25PJGEjcE9+TyRQI3VPfk8jfCN2T35PeiN3TyRQI3lPfk8kUCN6T35QK1RPZyN1WGgjdVhpI3VYfSN1WCFjI3VYIWUjdVghZiN1WCFnI3VYIWgjdVgjbyN1WCNwI3VYI3EjdVgjciN1WCNzI3VYI3QjdVgkUCN1WH5PI3wje09+UDZ7TyFsI31PflAsdE8kTyRPT35PWSNpWFojaVhqI2lYayNpWGwjaVhtI2lYbiNpWG8jaVhwI2lYcSNpWHIjaVghbCNpWCNvI2lYI3AjaVgjeyNpWCRPI2lYJFEjaVgkUiNpWCRTI2lYJFQjaVgkVSNpWCRWI2lYJFcjaVgkWCNpWCRZI2lYJFojaVgkWyNpWCRdI2lYJF4jaVgkXyNpWCRgI2lYfk9gJFFPYSRRT35QOGRPXiF5T18heU9+UDhkTyN8JFlPflArVE8kUCRaT35PfCRbT35PViRdT3wjVU8hZCReTyFqJF9PIWwkYE9+T3skYU9+TyN8JGJPZyFbYWghW2FpIVthfSFbYSFQIVthIVYhW2EhVyFbYSFZIVthIWMhW2EhZSFbYSFmIVthIWchW2EhaCFbYSNvIVthI3AhW2EjcSFbYSNyIVthI3MhW2EjdCFbYSN4IVthJFAhW2EkYSFbYX5PZyNgT2gjYU8jfCNgTyRQJGNPfk97JGVPfk8jfCRmT2chbmFoIW5haSFuYX0hbmEhUCFuYSFWIW5hIVchbmEhWSFuYSFjIW5hIWUhbmEhZiFuYSFnIW5hIWghbmEjbyFuYSNwIW5hI3EhbmEjciFuYSNzIW5hI3QhbmEjeCFuYSRQIW5hJGEhbmF+T3shWE99IVhPIU8hWE8hUCFYT2chdFhoIXRYaSF0WCFWIXRYIVchdFghWSF0WCFjIXRYIWUhdFghZiF0WCFnIXRYIWghdFgjbyF0WCNwIXRYI3EhdFgjciF0WCNzIXRYI3QhdFgjeCF0WCN8IXRYJFAhdFgkYSF0WH5PI3wkZ09nIXJhaCFyYWkhcmF9IXJhIVAhcmEhViFyYSFXIXJhIVkhcmEhYyFyYSFlIXJhIWYhcmEhZyFyYSFoIXJhI28hcmEjcCFyYSNxIXJhI3IhcmEjcyFyYSN0IXJhI3ghcmEkUCFyYSRhIXJhfk97IVhPfSFYTyFPIVhPIVAhWE9nIXdYaCF3WGkhd1ghViF3WCFXIXdYIVkhd1ghYyF3WCFlIXdYIWYhd1ghZyF3WCFoIXdYI28hd1gjcCF3WCNxIXdYI3Ihd1gjcyF3WCN0IXdYI3ghd1gjfCF3WCRQIXdYJGEhd1h+TyN8JGhPZyF1YWghdWFpIXVhfSF1YSFQIXVhIVYhdWEhVyF1YSFZIXVhIWMhdWEhZSF1YSFmIXVhIWchdWEhaCF1YSNvIXVhI3AhdWEjcSF1YSNyIXVhI3MhdWEjdCF1YSN4IXVhJFAhdWEkYSF1YX5PVSRpT35QKHRPIWQkbE9+TyFZJG1PJGEjcE9+T31xTyFQcU8hVnFPIVdxTyFZI25Pfk9bJG9PJFAjW2F+UEZWTyRQJHRPflA1fE8kUCR1T35PZXtPZntPZyF5cWgheXFpIXlxfSF5cSFjIXlxIWUheXEhZiF5cSFnIXlxIWgheXEjbyF5cSNwIXlxI3EheXEjciF5cSNzIXlxI3QheXEjeCF5cSRQIXlxI3wheXF+TyN8JHhPJFAkeU9+T2V7T2Z7T2cjZnFoI2ZxaSNmcX0jZnEhYyNmcSFlI2ZxIWYjZnEhZyNmcSFoI2ZxI28jZnEjcCNmcSNxI2ZxI3IjZnEjcyNmcSN0I2ZxI3gjZnEkUCNmcSN8I2Zxfk8kUCR6T35QK1RPI3wkfE9+UDZ7TyNuJH1PJFAlUU9+T1kjaWFaI2lhaiNpYWsjaWFsI2lhbSNpYW4jaWFvI2lhcCNpYXEjaWFyI2lhIWwjaWEjbyNpYSNwI2lhI3sjaWEkUSNpYSRSI2lhJFMjaWEkVCNpYSRVI2lhJFYjaWEkVyNpYSRYI2lhJFkjaWEkWiNpYSRbI2lhJF0jaWEkXiNpYSRfI2lhJGAjaWF+TyRPJE9PflBKYE9gJVNPYSVTTyRPI2lhflBKYE9nIVBPaSFQT30hVE8hYyFUTyFlIVRPIWYhVE8hZyFUTyFoIVRPI28hUU8jcCFRTyNxI2hxI3IjaHEjcyNocSN0I2hxI3gjaHEkUCNocX5PaCNocX5QTHRPZyNocWgjaHFpI2hxflBMek9oIU9PflBMdE8jeCNocSRQI2hxflAlWk9nI2hxaCNocWkjaHF9I2hxIWMjaHEhZSNocSFmI2hxIWcjaHEhaCNocSNxI2hxI3IjaHEjcyNocSN0I2hxfk8jbyFRTyNwIVFPI3gjaHEkUCNocX5QTm9PfCVUT35PJFAlVU9+TyRPJVZPfk98JVdPfk96I1pPfk9nI2BPI3wjYE9oIV9paSFfaX0hX2khUCFfaSFWIV9pIVchX2khWSFfaSFjIV9pIWUhX2khZiFfaSFnIV9pIWghX2kjbyFfaSNwIV9pI3EhX2kjciFfaSNzIV9pI3QhX2kjeCFfaSRQIV9pJGEhX2l+T3olWU98JVlPfk96JV9PJGMlYU8kZCViTyRlJWNPfk9bJG9PJFAjW2l+TyRiJWVPfk8kUCNbaX5QRlZPIWQlaE9+TyFZJG1PJFAjW2l+TyRQJWpPflA1fE8hWSRtTyRQJWpPJGEjcE9+TyRQJWxPfk96JW1Pfk8kUCVuT35QK1RPI3wlcE8kUCVxT35PJE8kT09ZI2lpWiNpaWojaWlrI2lpbCNpaW0jaWluI2lpbyNpaXAjaWlxI2lpciNpaSFsI2lpI28jaWkjcCNpaSN7I2lpJFEjaWkkUiNpaSRTI2lpJFQjaWkkVSNpaSRWI2lpJFcjaWkkWCNpaSRZI2lpJFojaWkkWyNpaSRdI2lpJF4jaWkkXyNpaSRgI2lpfk8jfCVzT35PfCV0T35PJE8ldU9+T2cjYE9oI2FPI3wjYE8hWSNfaSRhI19pJFAjX2l+TyFZJG1PJFAjW3F+TyRQI1txflBGVk9bJG9PIVkleE8kUCNbcX5PZXtPZntPZyF5IVJoIXkhUmkheSFSfSF5IVIhYyF5IVIhZSF5IVIhZiF5IVIhZyF5IVIhaCF5IVIjbyF5IVIjcCF5IVIjcSF5IVIjciF5IVIjcyF5IVIjdCF5IVIjeCF5IVIkUCF5IVIjfCF5IVJ+T2V7T2Z7T2cjZiFSaCNmIVJpI2YhUn0jZiFSIWMjZiFSIWUjZiFSIWYjZiFSIWcjZiFSIWgjZiFSI28jZiFSI3AjZiFSI3EjZiFSI3IjZiFSI3MjZiFSI3QjZiFSI3gjZiFSJFAjZiFSI3wjZiFSfk8kUCV7T35QK1RPI24kfU8kUCV9T35PfCZPT35PJFAmUE9+T3omUU9+TyFZJG1PJFAjW3l+T1skb08kUCNbeX5PVSRpT35PIVkleE8kUCNbeX5PI3wmVE9+TyRQJlVPfk8hWSRtTyRQI1shUn5PfCZXT35PI3wmWE9+T3wmWU9+TyRQJlpPfk9QIWFPUSFiT1IhYk9TIWNPVCFjT1cmW09YIWhPYiFqT2Mha09kIWxPeiFgTyRPIWZPfk8hWSZdTyN8dmF+UClsTyFZJl1PI3x2WH5QI2JPZyZnT2kmZ099JmtPIWMma08hZSZrTyFmJmtPIWcma08haCZrTyNvJmhPI3AmaE8jcSNocSNyI2hxI3MjaHEjdCNocSN8I2hxfk9oI2hxflAhL2tPZyNocWgjaHFpI2hxflAhL3FPaCZmT35QIS9rT2cmZ09oJmZPaSZnT30ma08hYyZrTyFlJmtPIWYma08hZyZrTyFoJmtPI28maE8jcCZoTyNxJmlPI3ImaU8jcyZpTyN0JmpPfk8jfCNocX5QITFYTyNvJmhPI3AmaE8jfCNocX5QTm9PXCIsXG4gIGdvdG86IFwiMFUjeFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFAjeSR4JWEmUCZTUFBQUFBQJmsmfSdfJ20oT1BQKF9QKGIoYihnKGoocClSKVIpW1BQUFBQUClbUClSUChiKGIpZSlrKGIoYilyKXUoYil7Kk8qVSp3K14rcytzK3MrcytzK3MrcytzK3MrcytzK3MrcytzK3MsWSxjLHYtUy1sLW8tby1vLXIuUip3LlUqdy5rL2Evci97ME9QUFBQUFBQKncqdyp3W1dPUnwheCN7JHxRJFMhfFEkVCF9UyRVI08mYlEkViNQUSRXI1FRJFgjUlEmbCZgUSZtJmFRJm4mY1EmbyZkUSZwJmVSJnEhVnReT3whViF4IXwhfSNPI1AjUSNSI3skfCZgJmEmYiZjJmQmZVJ4UmpRT1J8IVYheCF8IX0jTyNQI1EjUiN7JHxTIXF6I3ZRI3Mhcl0mXyZgJmEmYiZjJmQmZVJwUFFvUF4hZXUhZiNgI2EjbiRtJl1RI1YhWVMjZyFrJGdUI2shbCRoUXdRUSNvIXFRJG4jclEkciNzUSVpJHFSJl4mX1t2USFxI3IjcyRxJl9dIW53I28kbiRyJWkmXml0UXchcSNvI3IjcyRuJHEkciVpJl4mX2hzUXchcSNvI3IjcyRuJHEkciVpJl4mX1IhX3RrclF0dyFxI28jciNzJG4kcSRyJWkmXiZfUiFeclYhbXUjbiZdUiNdIWFRI1shYVIlWCRiVSFndSNuJl1RI18hZlEkYyNgUSRkI2FSJWYkbV8hZXUhZiNgI2EjbiRtJl1fIWR1IWYjYCNhI24kbSZdUSNlIWlSJlYmW1MjZCFpJltSJVokZlIjaSFrUSNoIWtSJVskZ1IjbSFsUSNsIWxSJV0kaGpeTyF8IX0jTyNQI1EjUiZgJmEmYiZjJmQmZVF5UlEhdnxRI1MhVlEjfCF4USR7I3tSJW8kfHddT1J8IVYheCF8IX0jTyNQI1EjUiN7JHwmYCZhJmImYyZkJmV3VE9SfCFWIXghfCF9I08jUCNRI1IjeyR8JmAmYSZiJmMmZCZld1NPUnwhViF4IXwhfSNPI1AjUSNSI3skfCZgJmEmYiZjJmQmZVEhc3pRI3QhclIkdyN2UyNyIXEjc1ckayNvI3EkciRzUSVkJGpRJWskdFIldyVqUSRxI3JRJWQka1EleSVrUiZSJXdRI3EhcVMkaiNvJHJRJHAjclEkcyNzUyVnJG4kcVMldiVpJWtSJlMleVIlYCRpUiVeJGlRfVZRJHYjdVEkeiN6USV6JWxSJXslblIjeCF1d1ZPUnwhViF4IXwhfSNPI1AjUSNSI3skfCZgJmEmYiZjJmQmZVEhfCFPUSF9IVBRI08hUVEjUCFSUSNRIVNRI1IhVFEmYCZmUSZhJmdRJmImaFEmYyZpUSZkJmpSJmUma2gheiFPIVAhUSFSIVMhVCZmJmcmaCZpJmoma1IkUiF7USRQIXlRJVIkUVIlciVTUiVPJE9RJVAkT1IlfCVwXCIsXG4gIG5vZGVOYW1lczogXCLimqAgSnNvbiBMb2dmbXQgVW5wYWNrIFBhdHRlcm4gUmVnZXhwIFVud3JhcCBJcCBMYWJlbEZvcm1hdCBMaW5lRm9ybWF0IExhYmVsUmVwbGFjZSBWZWN0b3IgT2Zmc2V0IEJvb2wgT24gSWdub3JpbmcgR3JvdXBMZWZ0IEdyb3VwUmlnaHQgRGVjb2xvcml6ZSBEcm9wIEtlZXAgQnkgV2l0aG91dCBBbmQgT3IgVW5sZXNzIFN1bSBBdmcgQ291bnQgTWF4IE1pbiBTdGRkZXYgU3RkdmFyIEJvdHRvbWsgVG9wayBMaW5lQ29tbWVudCBMb2dRTCBFeHByIExvZ0V4cHIgU2VsZWN0b3IgTWF0Y2hlcnMgTWF0Y2hlciBJZGVudGlmaWVyIEVxIFN0cmluZyBOZXEgUmUgTnJlIFBpcGVsaW5lRXhwciBQaXBlbGluZVN0YWdlIExpbmVGaWx0ZXJzIExpbmVGaWx0ZXIgRmlsdGVyIFBpcGVFeGFjdCBQaXBlTWF0Y2ggRmlsdGVyT3AgUGlwZSBMYWJlbFBhcnNlciBKc29uRXhwcmVzc2lvblBhcnNlciBKc29uRXhwcmVzc2lvbkxpc3QgSnNvbkV4cHJlc3Npb24gTGFiZWxGaWx0ZXIgSXBMYWJlbEZpbHRlciBVbml0RmlsdGVyIER1cmF0aW9uRmlsdGVyIEd0ciBEdXJhdGlvbiBHdGUgTHNzIEx0ZSBFcWwgQnl0ZXNGaWx0ZXIgQnl0ZXMgTnVtYmVyRmlsdGVyIE51bWJlciBMaW5lRm9ybWF0RXhwciBMYWJlbEZvcm1hdEV4cHIgTGFiZWxzRm9ybWF0IExhYmVsRm9ybWF0TWF0Y2hlciBEZWNvbG9yaXplRXhwciBEcm9wTGFiZWxzRXhwciBEcm9wTGFiZWxzIERyb3BMYWJlbCBLZWVwTGFiZWxzRXhwciBLZWVwTGFiZWxzIEtlZXBMYWJlbCBNZXRyaWNFeHByIFJhbmdlQWdncmVnYXRpb25FeHByIFJhbmdlT3AgQ291bnRPdmVyVGltZSBSYXRlIFJhdGVDb3VudGVyIEJ5dGVzT3ZlclRpbWUgQnl0ZXNSYXRlIEF2Z092ZXJUaW1lIFN1bU92ZXJUaW1lIE1pbk92ZXJUaW1lIE1heE92ZXJUaW1lIFN0ZGRldk92ZXJUaW1lIFN0ZHZhck92ZXJUaW1lIFF1YW50aWxlT3ZlclRpbWUgRmlyc3RPdmVyVGltZSBMYXN0T3ZlclRpbWUgQWJzZW50T3ZlclRpbWUgTG9nUmFuZ2VFeHByIFJhbmdlIE9mZnNldEV4cHIgVW53cmFwRXhwciBDb252T3AgQnl0ZXNDb252IER1cmF0aW9uQ29udiBEdXJhdGlvblNlY29uZHNDb252IEdyb3VwaW5nIExhYmVscyBWZWN0b3JBZ2dyZWdhdGlvbkV4cHIgVmVjdG9yT3AgQmluT3BFeHByIEJpbk9wTW9kaWZpZXIgT25Pcklnbm9yaW5nTW9kaWZpZXIgR3JvdXBpbmdMYWJlbHMgR3JvdXBpbmdMYWJlbExpc3QgR3JvdXBpbmdMYWJlbCBMYWJlbE5hbWUgQWRkIFN1YiBNdWwgRGl2IE1vZCBQb3cgTGl0ZXJhbEV4cHIgTGFiZWxSZXBsYWNlRXhwciBWZWN0b3JFeHByXCIsXG4gIG1heFRlcm06IDE1OSxcbiAgc2tpcHBlZE5vZGVzOiBbMCwzNV0sXG4gIHJlcGVhdE5vZGVDb3VudDogMCxcbiAgdG9rZW5EYXRhOiBcIjNYflJ2WF4jaXBxI2lxciRecnMkcXN0JWN1diVueHklc3l6JXh6eyV9e3wmU3x9Jlh9IU8mXiFPIVAmYyFQIVEnYyFRIVInaCFSIVspTyFbIV0wTyFeIV8wZCFfIWAwcSFgIWExVyFjIX0xZSF9I08xeyNQI1EyUSNRI1IyViNSI1MxZSNTI1QyWyNUI28xZSNvI3AyaCNwI3EybSNxI3IzUyN5I3ojaSRmJGcjaSNCWSNCWiNpJElTJElfI2kkSXwkSk8jaSRKVCRKVSNpJEtWJEtXI2kmRlUmRlYjaX4jblkjen5YXiNpcHEjaSN5I3ojaSRmJGcjaSNCWSNCWiNpJElTJElfI2kkSXwkSk8jaSRKVCRKVSNpJEtWJEtXI2kmRlUmRlYjaX4kYVEhXyFgJGcjciNzJGx+JGxPfX5+JHFPIVB+fiR0VU9ZJHFaciRxcnMlV3MjTyRxI08jUCVdI1B+JHF+JV1PfH5+JWBQT34kcX4laFFzfk9ZJWNafiVjfiVzTyNzfn4leE8kT35+JX1PJFB+fiZTTyNxfn4mWE8jb35+Jl5PI3x+fiZjTyNwfn4mZlAhUSFbJml+Jm5SIWx+IVEhWyZpIWchaCZ3I1gjWSZ3fiZ6Unt8J1R9IU8nVCFRIVsnWn4nV1AhUSFbJ1p+J2BQIWx+IVEhWydafidoTyNyfn4nbWUhbH4hTyFQJmkhUSFbKU8hZyFoKmMhaSFqK1EhbSFuK1EhbyFwK1EhciFzK1EhdiF3K1EjVSNWKnUjVyNYK1ojWCNZLV0jWiNbLW8jWyNdK3IjXyNgLW8jYSNiLXgjZCNlLW8jZyNoLHojaCNpLW8jayNsLlojbCNtL2QjbSNuLnV+KVRkIWx+IU8hUCZpIVEhWylPIWchaCpjIWkhaitRIW0hbitRIW8hcCtRIXIhcytRIXYhdytRI1UjVip1I1cjWCtaI1gjWS1dI1ojWy1vI1sjXStyI18jYC1vI2EjYi14I2QjZS1vI2cjaCx6I2gjaS1vI2sjbC5aI20jbi51fipmVHt8J1R9IU8nVCFRIVsnWiFkIWUqdSNdI14qen4qek8han5+Kn1QI1UjVip1fitUUSFkIWUqdSNdI14qen4rYFAhZH4hUSFbK2N+K2ZTIVEhWytjI1sjXStyI2EjYixXI2cjaCx6fit3UCFkfiFRIVsren4rfVIhUSFbK3ojYSNiLFcjZyNoLHp+LF1RIWR+IVEhWyxjI2cjaCx1fixmUiFRIVssYyNhI2IsbyNnI2gsen4sclAjZyNoLHV+LHpPIWR+fi1QUCFkfiFRIVstU34tVlEhUSFbLVMjYSNiLG9+LWBUe3wnVH0hTydUIVEhWydaI1UjVip1I10jXip6fi1yUSNVI1YqdSNdI14qen4tfVMhZH4hUSFbLGMjVSNWKnUjXSNeKnojZyNoLHV+LmBQIWR+IVEhWy5jfi5mVCFRIVsuYyNXI1grWiNbI10rciNhI2IsVyNnI2gsen4uelAhZH4hUSFbLn1+L1FVIVEhWy59I1cjWCtaI1sjXStyI2EjYixXI2cjaCx6I2sjbC5afi9nUiFRIVsvcCFjIWkvcCNUI1ovcH4vdVIhbH4hUSFbL3AhYyFpL3AjVCNaL3BQMFRUelAhUSFbME8hWyFdME8hYyF9ME8jUiNTME8jVCNvME9+MGlQIWZ+IV8hYDBsfjBxTyFnfn4wdlF7fiFfIWAwfCNyI3MxUn4xUk8haH5+MVdPIU9+fjFdUCFjfiFfIWAxYH4xZU8hZX5SMWxUelAjblEhUSFbMWUhWyFdME8hYyF9MWUjUiNTMWUjVCNvMWV+MlFPJGF+fjJWTyRifn4yW08jdH5+Ml9STyNTMlsjUyNUJVcjVH4yW34ybU8je35+MnJRIVl+IV8hYDJ4I3IjczJ9fjJ9TyFWfn4zU08hV35+M1hPI31+XCIsXG4gIHRva2VuaXplcnM6IFswLCAxXSxcbiAgdG9wUnVsZXM6IHtcIkxvZ1FMXCI6WzAsMzZdfSxcbiAgc3BlY2lhbGl6ZWQ6IFt7dGVybTogNDIsIGdldDogKHZhbHVlLCBzdGFjaykgPT4gKHNwZWNpYWxpemVJZGVudGlmaWVyKHZhbHVlKSA8PCAxKX0se3Rlcm06IDQyLCBnZXQ6ICh2YWx1ZSwgc3RhY2spID0+IChleHRlbmRJZGVudGlmaWVyKHZhbHVlKSA8PCAxKSB8IDF9LHt0ZXJtOiA0MiwgZ2V0OiB2YWx1ZSA9PiBzcGVjX0lkZW50aWZpZXJbdmFsdWVdIHx8IC0xfV0sXG4gIHRva2VuUHJlYzogMFxufSk7XG4vLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC5cbmNvbnN0IEpzb24gPSAxLFxuICBMb2dmbXQgPSAyLFxuICBVbnBhY2sgPSAzLFxuICBQYXR0ZXJuID0gNCxcbiAgUmVnZXhwID0gNSxcbiAgVW53cmFwID0gNixcbiAgSXAgPSA3LFxuICBMYWJlbEZvcm1hdCA9IDgsXG4gIExpbmVGb3JtYXQgPSA5LFxuICBMYWJlbFJlcGxhY2UgPSAxMCxcbiAgVmVjdG9yID0gMTEsXG4gIE9mZnNldCA9IDEyLFxuICBCb29sID0gMTMsXG4gIE9uID0gMTQsXG4gIElnbm9yaW5nID0gMTUsXG4gIEdyb3VwTGVmdCA9IDE2LFxuICBHcm91cFJpZ2h0ID0gMTcsXG4gIERlY29sb3JpemUgPSAxOCxcbiAgRHJvcCA9IDE5LFxuICBLZWVwID0gMjAsXG4gIEJ5ID0gMjEsXG4gIFdpdGhvdXQgPSAyMixcbiAgQW5kID0gMjMsXG4gIE9yID0gMjQsXG4gIFVubGVzcyA9IDI1LFxuICBTdW0gPSAyNixcbiAgQXZnID0gMjcsXG4gIENvdW50ID0gMjgsXG4gIE1heCA9IDI5LFxuICBNaW4gPSAzMCxcbiAgU3RkZGV2ID0gMzEsXG4gIFN0ZHZhciA9IDMyLFxuICBCb3R0b21rID0gMzMsXG4gIFRvcGsgPSAzNCxcbiAgTGluZUNvbW1lbnQgPSAzNSxcbiAgTG9nUUwgPSAzNixcbiAgRXhwciA9IDM3LFxuICBMb2dFeHByID0gMzgsXG4gIFNlbGVjdG9yID0gMzksXG4gIE1hdGNoZXJzID0gNDAsXG4gIE1hdGNoZXIgPSA0MSxcbiAgSWRlbnRpZmllciA9IDQyLFxuICBFcSA9IDQzLFxuICBTdHJpbmcgPSA0NCxcbiAgTmVxID0gNDUsXG4gIFJlID0gNDYsXG4gIE5yZSA9IDQ3LFxuICBQaXBlbGluZUV4cHIgPSA0OCxcbiAgUGlwZWxpbmVTdGFnZSA9IDQ5LFxuICBMaW5lRmlsdGVycyA9IDUwLFxuICBMaW5lRmlsdGVyID0gNTEsXG4gIEZpbHRlciA9IDUyLFxuICBQaXBlRXhhY3QgPSA1MyxcbiAgUGlwZU1hdGNoID0gNTQsXG4gIEZpbHRlck9wID0gNTUsXG4gIFBpcGUgPSA1NixcbiAgTGFiZWxQYXJzZXIgPSA1NyxcbiAgSnNvbkV4cHJlc3Npb25QYXJzZXIgPSA1OCxcbiAgSnNvbkV4cHJlc3Npb25MaXN0ID0gNTksXG4gIEpzb25FeHByZXNzaW9uID0gNjAsXG4gIExhYmVsRmlsdGVyID0gNjEsXG4gIElwTGFiZWxGaWx0ZXIgPSA2MixcbiAgVW5pdEZpbHRlciA9IDYzLFxuICBEdXJhdGlvbkZpbHRlciA9IDY0LFxuICBHdHIgPSA2NSxcbiAgRHVyYXRpb24gPSA2NixcbiAgR3RlID0gNjcsXG4gIExzcyA9IDY4LFxuICBMdGUgPSA2OSxcbiAgRXFsID0gNzAsXG4gIEJ5dGVzRmlsdGVyID0gNzEsXG4gIEJ5dGVzID0gNzIsXG4gIE51bWJlckZpbHRlciA9IDczLFxuICBOdW1iZXIgPSA3NCxcbiAgTGluZUZvcm1hdEV4cHIgPSA3NSxcbiAgTGFiZWxGb3JtYXRFeHByID0gNzYsXG4gIExhYmVsc0Zvcm1hdCA9IDc3LFxuICBMYWJlbEZvcm1hdE1hdGNoZXIgPSA3OCxcbiAgRGVjb2xvcml6ZUV4cHIgPSA3OSxcbiAgRHJvcExhYmVsc0V4cHIgPSA4MCxcbiAgRHJvcExhYmVscyA9IDgxLFxuICBEcm9wTGFiZWwgPSA4MixcbiAgS2VlcExhYmVsc0V4cHIgPSA4MyxcbiAgS2VlcExhYmVscyA9IDg0LFxuICBLZWVwTGFiZWwgPSA4NSxcbiAgTWV0cmljRXhwciA9IDg2LFxuICBSYW5nZUFnZ3JlZ2F0aW9uRXhwciA9IDg3LFxuICBSYW5nZU9wID0gODgsXG4gIENvdW50T3ZlclRpbWUgPSA4OSxcbiAgUmF0ZSA9IDkwLFxuICBSYXRlQ291bnRlciA9IDkxLFxuICBCeXRlc092ZXJUaW1lID0gOTIsXG4gIEJ5dGVzUmF0ZSA9IDkzLFxuICBBdmdPdmVyVGltZSA9IDk0LFxuICBTdW1PdmVyVGltZSA9IDk1LFxuICBNaW5PdmVyVGltZSA9IDk2LFxuICBNYXhPdmVyVGltZSA9IDk3LFxuICBTdGRkZXZPdmVyVGltZSA9IDk4LFxuICBTdGR2YXJPdmVyVGltZSA9IDk5LFxuICBRdWFudGlsZU92ZXJUaW1lID0gMTAwLFxuICBGaXJzdE92ZXJUaW1lID0gMTAxLFxuICBMYXN0T3ZlclRpbWUgPSAxMDIsXG4gIEFic2VudE92ZXJUaW1lID0gMTAzLFxuICBMb2dSYW5nZUV4cHIgPSAxMDQsXG4gIFJhbmdlID0gMTA1LFxuICBPZmZzZXRFeHByID0gMTA2LFxuICBVbndyYXBFeHByID0gMTA3LFxuICBDb252T3AgPSAxMDgsXG4gIEJ5dGVzQ29udiA9IDEwOSxcbiAgRHVyYXRpb25Db252ID0gMTEwLFxuICBEdXJhdGlvblNlY29uZHNDb252ID0gMTExLFxuICBHcm91cGluZyA9IDExMixcbiAgTGFiZWxzID0gMTEzLFxuICBWZWN0b3JBZ2dyZWdhdGlvbkV4cHIgPSAxMTQsXG4gIFZlY3Rvck9wID0gMTE1LFxuICBCaW5PcEV4cHIgPSAxMTYsXG4gIEJpbk9wTW9kaWZpZXIgPSAxMTcsXG4gIE9uT3JJZ25vcmluZ01vZGlmaWVyID0gMTE4LFxuICBHcm91cGluZ0xhYmVscyA9IDExOSxcbiAgR3JvdXBpbmdMYWJlbExpc3QgPSAxMjAsXG4gIEdyb3VwaW5nTGFiZWwgPSAxMjEsXG4gIExhYmVsTmFtZSA9IDEyMixcbiAgQWRkID0gMTIzLFxuICBTdWIgPSAxMjQsXG4gIE11bCA9IDEyNSxcbiAgRGl2ID0gMTI2LFxuICBNb2QgPSAxMjcsXG4gIFBvdyA9IDEyOCxcbiAgTGl0ZXJhbEV4cHIgPSAxMjksXG4gIExhYmVsUmVwbGFjZUV4cHIgPSAxMzAsXG4gIFZlY3RvckV4cHIgPSAxMzE7XG5cbmZ1bmN0aW9uIGdldE5vZGVGcm9tUXVlcnkocXVlcnksIG5vZGVUeXBlKSB7XG4gIGNvbnN0IG5vZGVzID0gW107XG4gIGNvbnN0IHRyZWUgPSBwYXJzZXIucGFyc2UocXVlcnkpO1xuICB0cmVlLml0ZXJhdGUoe1xuICAgIGVudGVyOiAobm9kZSkgPT4ge1xuICAgICAgaWYgKG5vZGVUeXBlID09PSB1bmRlZmluZWQgfHwgbm9kZVR5cGUgPT09IG5vZGUudHlwZS5pZCkge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUubm9kZSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBub2Rlc1swXTtcbn1cblxuZnVuY3Rpb24gaXNMb2dzUXVlcnkocXVlcnkpIHtcbiAgaWYgKGdldE5vZGVGcm9tUXVlcnkocXVlcnksIE1ldHJpY0V4cHIkMSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGluZGVudChsZXZlbCkge1xuICByZXR1cm4gJyAgJy5yZXBlYXQobGV2ZWwpO1xufVxuXG5mdW5jdGlvbiBpbmRlbnRNdWx0aWxpbmUoYmxvY2ssIGxldmVsKSB7XG4gIGNvbnN0IGxpbmVzID0gYmxvY2suc3BsaXQoJ1xcbicpO1xuICByZXR1cm4gbGluZXMubWFwKChsaW5lKSA9PiBpbmRlbnQobGV2ZWwpICsgbGluZSkuam9pbignXFxuJyk7XG59XG5cbmZ1bmN0aW9uIHRyaW1NdWx0aWxpbmUoYmxvY2spIHtcbiAgY29uc3QgbGluZXMgPSBibG9jay5zcGxpdCgnXFxuJyk7XG4gIHJldHVybiBsaW5lcy5tYXAoKGxpbmUpID0+IGxpbmUudHJpbUVuZCgpKS5qb2luKCdcXG4nKTtcbn1cblxuZnVuY3Rpb24gbmVlZHNCcmFja2V0cyhub2RlLCBxdWVyeVR5cGUpIHtcbiAgY29uc3QgY2hpbGROb2RlSXNTYW1lID0gbm9kZS5maXJzdENoaWxkPy50eXBlLmlkID09PSBxdWVyeVR5cGU7XG4gIGxldCBhZGRCcmFja2V0cyA9IGZhbHNlO1xuXG4gIGlmIChub2RlLmZpcnN0Q2hpbGQgJiYgY2hpbGROb2RlSXNTYW1lKSB7XG4gICAgYWRkQnJhY2tldHMgPSB0cnVlO1xuICAgIG5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gIH1cblxuICByZXR1cm4geyBhZGRCcmFja2V0cywgbmV3Tm9kZTogbm9kZSB9O1xufVxuXG5mdW5jdGlvbiBpdGVyYXRlTm9kZShub2RlLCBsb29raW5nRm9yKSB7XG4gIGNvbnN0IG5vZGVzID0gW107XG4gIGxldCBjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDtcblxuICB3aGlsZSAoY2hpbGQpIHtcbiAgICBpZiAobG9va2luZ0Zvci5pbmNsdWRlcyhjaGlsZC50eXBlLmlkKSkge1xuICAgICAgbm9kZXMucHVzaChjaGlsZCk7XG4gICAgfVxuXG4gICAgbm9kZXMucHVzaCguLi5pdGVyYXRlTm9kZShjaGlsZCwgbG9va2luZ0ZvcikpO1xuICAgIGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmc7XG4gIH1cblxuICByZXR1cm4gbm9kZXM7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVzcG9uc2UocGlwZWxpbmVUeXBlLCBsYXN0UGlwZWxpbmVUeXBlLCBmb3JtYXR0ZWROb2RlKSB7XG4gIGlmIChsYXN0UGlwZWxpbmVUeXBlID09PSBwaXBlbGluZVR5cGUpIHtcbiAgICByZXR1cm4gYCAke2Zvcm1hdHRlZE5vZGV9YDtcbiAgfVxuXG4gIHJldHVybiBgXFxuJHtpbmRlbnQoMSl9JHtmb3JtYXR0ZWROb2RlfWA7XG59XG5cbmZ1bmN0aW9uIHRyaW1FbmQoaW5wdXQsIGNoYXJhY3RlcnNUb1RyaW0pIHtcbiAgbGV0IGVuZEluZGV4ID0gaW5wdXQubGVuZ3RoIC0gMTtcbiAgd2hpbGUgKGVuZEluZGV4ID49IDAgJiYgY2hhcmFjdGVyc1RvVHJpbS5pbmNsdWRlcyhpbnB1dFtlbmRJbmRleF0pKSB7XG4gICAgZW5kSW5kZXgtLTtcbiAgfVxuICByZXR1cm4gaW5wdXQuc3Vic3RyaW5nKDAsIGVuZEluZGV4ICsgMSk7XG59XG5cbmNvbnN0IGZvcm1hdExvZ0V4cHIgPSAobm9kZSwgcXVlcnkpID0+IHtcbiAgY29uc3QgeyBhZGRCcmFja2V0cywgbmV3Tm9kZSB9ID0gbmVlZHNCcmFja2V0cyhub2RlLCBMb2dFeHByKTtcbiAgbm9kZSA9IG5ld05vZGU7XG5cbiAgY29uc3QgdHJlZSA9IHBhcnNlci5wYXJzZShxdWVyeS5zdWJzdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKSk7XG4gIGxldCBmb3JtYXR0ZWQgPSAnJztcblxuICB0cmVlLml0ZXJhdGUoe1xuICAgIGVudGVyOiAocmVmKSA9PiB7XG4gICAgICBjb25zdCBub2RlID0gcmVmLm5vZGU7XG5cbiAgICAgIHN3aXRjaCAobm9kZS50eXBlLmlkKSB7XG4gICAgICAgIGNhc2UgU2VsZWN0b3I6XG4gICAgICAgICAgZm9ybWF0dGVkICs9IGZvcm1hdFNlbGVjdG9yKG5vZGUsIHF1ZXJ5KTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFBpcGVsaW5lRXhwcjpcbiAgICAgICAgICBub2RlLnBhcmVudD8udHlwZS5pZCAhPT0gUGlwZWxpbmVFeHByICYmIChmb3JtYXR0ZWQgKz0gZm9ybWF0UGlwZWxpbmVFeHByKG5vZGUsIHF1ZXJ5KSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIGFkZEJyYWNrZXRzID8gJygnICsgZm9ybWF0dGVkICsgJyknIDogZm9ybWF0dGVkO1xufTtcblxuZnVuY3Rpb24gZm9ybWF0U2VsZWN0b3Iobm9kZSwgcXVlcnkpIHtcbiAgY29uc3Qgc2VsZWN0b3IgPSBxdWVyeS5zdWJzdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKTtcbiAgY29uc3Qgc3VidHJlZSA9IHBhcnNlci5wYXJzZShzZWxlY3Rvcik7XG4gIGNvbnN0IGxhYmVsTm9kZXMgPSBbXTtcbiAgbGV0IHJlc3BvbnNlID0gJyc7XG5cbiAgc3VidHJlZS5pdGVyYXRlKHtcbiAgICBlbnRlcjogKHJlZikgPT4ge1xuICAgICAgY29uc3Qgbm9kZSA9IHJlZi5ub2RlO1xuICAgICAgaWYgKG5vZGUudHlwZS5pZCA9PT0gTWF0Y2hlcikge1xuICAgICAgICBsYWJlbE5vZGVzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG5cbiAgbGFiZWxOb2Rlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgbGFiZWxOb2RlQSA9IGEuZ2V0Q2hpbGQoSWRlbnRpZmllcik7XG4gICAgY29uc3QgbGFiZWxOb2RlQiA9IGIuZ2V0Q2hpbGQoSWRlbnRpZmllcik7XG5cbiAgICBjb25zdCBsYWJlbFZhbHVlQSA9IGxhYmVsTm9kZUEgJiYgcXVlcnkuc3Vic3RyaW5nKGxhYmVsTm9kZUEuZnJvbSwgbGFiZWxOb2RlQS50byk7XG4gICAgY29uc3QgbGFiZWxWYWx1ZUIgPSBsYWJlbE5vZGVCICYmIHF1ZXJ5LnN1YnN0cmluZyhsYWJlbE5vZGVCLmZyb20sIGxhYmVsTm9kZUIudG8pO1xuXG4gICAgaWYgKCFsYWJlbFZhbHVlQSB8fCAhbGFiZWxWYWx1ZUIpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmIChsYWJlbFZhbHVlQSA8IGxhYmVsVmFsdWVCKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgaWYgKGxhYmVsVmFsdWVBID4gbGFiZWxWYWx1ZUIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9KTtcblxuICBsYWJlbE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICBjb25zdCBsYWJlbE5vZGUgPSBub2RlLmdldENoaWxkKElkZW50aWZpZXIpO1xuICAgIGNvbnN0IG9wZXJhdG9yTm9kZSA9IGxhYmVsTm9kZSA/IGxhYmVsTm9kZS5uZXh0U2libGluZyA6IG51bGw7XG4gICAgY29uc3QgdmFsdWVOb2RlID0gbm9kZS5nZXRDaGlsZChTdHJpbmcpO1xuXG4gICAgY29uc3QgbGFiZWwgPSBsYWJlbE5vZGUgPyBxdWVyeS5zdWJzdHJpbmcobGFiZWxOb2RlLmZyb20sIGxhYmVsTm9kZS50bykgOiBudWxsO1xuICAgIGNvbnN0IG9wZXJhdG9yID0gb3BlcmF0b3JOb2RlID8gcXVlcnkuc3Vic3RyaW5nKG9wZXJhdG9yTm9kZS5mcm9tLCBvcGVyYXRvck5vZGUudG8pIDogbnVsbDtcbiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlTm9kZSA/IHF1ZXJ5LnN1YnN0cmluZyh2YWx1ZU5vZGUuZnJvbSwgdmFsdWVOb2RlLnRvKSA6IG51bGw7XG5cbiAgICByZXNwb25zZSArPSBgJHtsYWJlbH0ke29wZXJhdG9yfSR7dmFsdWV9LCBgO1xuICB9KTtcblxuICByZXR1cm4gJ3snICsgdHJpbUVuZChyZXNwb25zZSwgJywgJykgKyAnfSc7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFBpcGVsaW5lRXhwcihub2RlLCBxdWVyeSkge1xuICBjb25zdCBwaXBlbGluZUV4cHJOb2RlcyA9IFtcbiAgICBMaW5lRmlsdGVyLFxuICAgIExhYmVsUGFyc2VyLFxuICAgIExhYmVsRmlsdGVyLFxuICAgIEpzb25FeHByZXNzaW9uUGFyc2VyLFxuICAgIExpbmVGb3JtYXRFeHByLFxuICAgIExhYmVsRm9ybWF0RXhwcixcbiAgICBEZWNvbG9yaXplRXhwcixcbiAgXTtcbiAgbGV0IGxhc3RQaXBlbGluZVR5cGU7XG4gIGxldCByZXNwb25zZSA9ICcnO1xuXG4gIGl0ZXJhdGVOb2RlKG5vZGUsIHBpcGVsaW5lRXhwck5vZGVzKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgc3dpdGNoIChub2RlLnR5cGUuaWQpIHtcbiAgICAgIGNhc2UgTGluZUZpbHRlcjpcbiAgICAgICAgcmVzcG9uc2UgKz0gYnVpbGRSZXNwb25zZShMaW5lRmlsdGVyLCBsYXN0UGlwZWxpbmVUeXBlLCBmb3JtYXRMaW5lRmlsdGVyKG5vZGUsIHF1ZXJ5KSk7XG4gICAgICAgIGxhc3RQaXBlbGluZVR5cGUgPSBMaW5lRmlsdGVyO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBMYWJlbFBhcnNlcjpcbiAgICAgICAgcmVzcG9uc2UgKz0gYnVpbGRSZXNwb25zZShMYWJlbFBhcnNlciwgbGFzdFBpcGVsaW5lVHlwZSwgZm9ybWF0TGFiZWxQYXJzZXIobm9kZSwgcXVlcnkpKTtcbiAgICAgICAgbGFzdFBpcGVsaW5lVHlwZSA9IExhYmVsUGFyc2VyO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBKc29uRXhwcmVzc2lvblBhcnNlcjpcbiAgICAgICAgcmVzcG9uc2UgKz0gYnVpbGRSZXNwb25zZShKc29uRXhwcmVzc2lvblBhcnNlciwgbGFzdFBpcGVsaW5lVHlwZSwgZm9ybWF0SnNvbkV4cHJlc3Npb25QYXJzZXIobm9kZSwgcXVlcnkpKTtcbiAgICAgICAgbGFzdFBpcGVsaW5lVHlwZSA9IEpzb25FeHByZXNzaW9uUGFyc2VyO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBMYWJlbEZpbHRlcjpcbiAgICAgICAgcmVzcG9uc2UgKz0gYnVpbGRSZXNwb25zZShMYWJlbEZpbHRlciwgbGFzdFBpcGVsaW5lVHlwZSwgZm9ybWF0TGFiZWxGaWx0ZXIobm9kZSwgcXVlcnkpKTtcbiAgICAgICAgbGFzdFBpcGVsaW5lVHlwZSA9IExhYmVsRmlsdGVyO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBMaW5lRm9ybWF0RXhwcjpcbiAgICAgICAgcmVzcG9uc2UgKz0gYnVpbGRSZXNwb25zZShMaW5lRm9ybWF0RXhwciwgbGFzdFBpcGVsaW5lVHlwZSwgZm9ybWF0TGluZUZvcm1hdEV4cHIobm9kZSwgcXVlcnkpKTtcbiAgICAgICAgbGFzdFBpcGVsaW5lVHlwZSA9IExpbmVGb3JtYXRFeHByO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBMYWJlbEZvcm1hdEV4cHI6XG4gICAgICAgIHJlc3BvbnNlICs9IGJ1aWxkUmVzcG9uc2UoTGFiZWxGb3JtYXRFeHByLCBsYXN0UGlwZWxpbmVUeXBlLCBmb3JtYXRMYWJlbEZvcm1hdEV4cHIobm9kZSwgcXVlcnkpKTtcbiAgICAgICAgbGFzdFBpcGVsaW5lVHlwZSA9IExhYmVsRm9ybWF0RXhwcjtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgRGVjb2xvcml6ZUV4cHI6XG4gICAgICAgIHJlc3BvbnNlICs9IGJ1aWxkUmVzcG9uc2UoRGVjb2xvcml6ZUV4cHIsIGxhc3RQaXBlbGluZVR5cGUsIGZvcm1hdERlY29sb3JpemVFeHByKCkpO1xuICAgICAgICBsYXN0UGlwZWxpbmVUeXBlID0gRGVjb2xvcml6ZUV4cHI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRMaW5lRmlsdGVyKG5vZGUsIHF1ZXJ5KSB7XG4gIGNvbnN0IGZpbHRlck5vZGUgPSBub2RlLmdldENoaWxkKEZpbHRlcik7XG4gIGNvbnN0IGZpbHRlck9wZXJhdGlvbk5vZGUgPSBub2RlLmdldENoaWxkKEZpbHRlck9wKTtcbiAgY29uc3Qgc3RyaW5nTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoU3RyaW5nKTtcblxuICBjb25zdCBmaWx0ZXIgPSBmaWx0ZXJOb2RlICYmIHF1ZXJ5LnN1YnN0cmluZyhmaWx0ZXJOb2RlLmZyb20sIGZpbHRlck5vZGUudG8pO1xuICBjb25zdCBzdHJpbmcgPSBzdHJpbmdOb2RlICYmIHF1ZXJ5LnN1YnN0cmluZyhzdHJpbmdOb2RlLmZyb20sIHN0cmluZ05vZGUudG8pO1xuXG4gIGlmIChmaWx0ZXJPcGVyYXRpb25Ob2RlKSB7XG4gICAgcmV0dXJuIGAke2ZpbHRlcn0gaXAoJHtzdHJpbmd9KWA7XG4gIH1cbiAgcmV0dXJuIGAke2ZpbHRlcn0gJHtzdHJpbmd9YDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGFiZWxQYXJzZXIobm9kZSwgcXVlcnkpIHtcbiAgY29uc3QgaGFzU3RyaW5nID0gbm9kZS5nZXRDaGlsZChTdHJpbmcpO1xuXG4gIGlmIChoYXNTdHJpbmcpIHtcbiAgICBjb25zdCBwYXJzZXJOb2RlID0gbm9kZS5nZXRDaGlsZChSZWdleHApIHx8IG5vZGUuZ2V0Q2hpbGQoUGF0dGVybik7XG4gICAgY29uc3Qgc3RyaW5nTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoU3RyaW5nKTtcblxuICAgIGNvbnN0IHBhcnNlciA9IHBhcnNlck5vZGUgJiYgcXVlcnkuc3Vic3RyaW5nKHBhcnNlck5vZGUuZnJvbSwgcGFyc2VyTm9kZS50byk7XG4gICAgY29uc3Qgc3RyaW5nID0gc3RyaW5nTm9kZSAmJiBxdWVyeS5zdWJzdHJpbmcoc3RyaW5nTm9kZS5mcm9tLCBzdHJpbmdOb2RlLnRvKTtcblxuICAgIHJldHVybiBgfCAke3BhcnNlcn0ke3N0cmluZ31gO1xuICB9XG5cbiAgY29uc3QgbGFiZWxQYXJzZXIgPSBxdWVyeS5zdWJzdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKTtcbiAgcmV0dXJuIGB8ICR7bGFiZWxQYXJzZXJ9YDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0SnNvbkV4cHJlc3Npb25QYXJzZXIobm9kZSwgcXVlcnkpIHtcbiAgY29uc3QganNvbkV4cHJlc3Npb25Ob2RlcyA9IGl0ZXJhdGVOb2RlKG5vZGUsIFtKc29uRXhwcmVzc2lvbl0pO1xuICBsZXQgcmVzcG9uc2UgPSAnJztcblxuICBqc29uRXhwcmVzc2lvbk5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICBjb25zdCBpZGVudGlmaWVyTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoSWRlbnRpZmllcik7XG4gICAgY29uc3QgdmFsdWVOb2RlID0gbm9kZS5nZXRDaGlsZChTdHJpbmcpO1xuXG4gICAgY29uc3QgaWRlbnRpZmllciA9IGlkZW50aWZpZXJOb2RlICYmIHF1ZXJ5LnN1YnN0cmluZyhpZGVudGlmaWVyTm9kZS5mcm9tLCBpZGVudGlmaWVyTm9kZS50byk7XG4gICAgY29uc3QgdmFsdWUgPSB2YWx1ZU5vZGUgJiYgcXVlcnkuc3Vic3RyaW5nKHZhbHVlTm9kZS5mcm9tLCB2YWx1ZU5vZGUudG8pO1xuXG4gICAgcmVzcG9uc2UgKz0gYCR7aWRlbnRpZmllcn09JHt2YWx1ZX0sIGA7XG4gIH0pO1xuXG4gIHJldHVybiBgfCBqc29uICR7dHJpbUVuZChyZXNwb25zZSwgJywgJyl9YDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGFiZWxGaWx0ZXIobm9kZSwgcXVlcnkpIHtcbiAgY29uc3Qgc2VsZWN0ZWRGaWx0ZXIgPVxuICAgIG5vZGUuZ2V0Q2hpbGQoTWF0Y2hlcikgfHxcbiAgICBub2RlLmdldENoaWxkKElwTGFiZWxGaWx0ZXIpIHx8XG4gICAgbm9kZS5nZXRDaGlsZChOdW1iZXJGaWx0ZXIpIHx8XG4gICAgbm9kZS5nZXRDaGlsZChVbml0RmlsdGVyKT8uZ2V0Q2hpbGQoRHVyYXRpb25GaWx0ZXIpIHx8XG4gICAgbm9kZS5nZXRDaGlsZChVbml0RmlsdGVyKT8uZ2V0Q2hpbGQoQnl0ZXNGaWx0ZXIpO1xuXG4gIGlmICghc2VsZWN0ZWRGaWx0ZXIpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBjb25zdCBzZWxlY3RlZEZpbHRlclR5cGUgPSBzZWxlY3RlZEZpbHRlci50eXBlLmlkO1xuXG4gIGNvbnN0IGlkZW50aWZpZXJOb2RlID0gc2VsZWN0ZWRGaWx0ZXIuZ2V0Q2hpbGQoSWRlbnRpZmllcik7XG4gIGNvbnN0IG9wZXJhdG9yTm9kZSA9IGlkZW50aWZpZXJOb2RlICYmIGlkZW50aWZpZXJOb2RlLm5leHRTaWJsaW5nO1xuICBsZXQgdmFsdWVOb2RlO1xuXG4gIGlmIChzZWxlY3RlZEZpbHRlclR5cGUgPT09IER1cmF0aW9uRmlsdGVyKSB7XG4gICAgdmFsdWVOb2RlID0gc2VsZWN0ZWRGaWx0ZXIuZ2V0Q2hpbGQoRHVyYXRpb24pO1xuICB9IGVsc2UgaWYgKHNlbGVjdGVkRmlsdGVyVHlwZSA9PT0gQnl0ZXNGaWx0ZXIpIHtcbiAgICB2YWx1ZU5vZGUgPSBzZWxlY3RlZEZpbHRlci5nZXRDaGlsZChCeXRlcyk7XG4gIH0gZWxzZSBpZiAoc2VsZWN0ZWRGaWx0ZXJUeXBlID09PSBOdW1iZXJGaWx0ZXIpIHtcbiAgICB2YWx1ZU5vZGUgPSBzZWxlY3RlZEZpbHRlci5nZXRDaGlsZChOdW1iZXIpO1xuICB9IGVsc2Uge1xuICAgIHZhbHVlTm9kZSA9IHNlbGVjdGVkRmlsdGVyLmdldENoaWxkKFN0cmluZyk7XG4gIH1cblxuICBjb25zdCBpZGVudGlmaWVyID0gaWRlbnRpZmllck5vZGUgJiYgcXVlcnkuc3Vic3RyaW5nKGlkZW50aWZpZXJOb2RlLmZyb20sIGlkZW50aWZpZXJOb2RlLnRvKTtcbiAgY29uc3Qgb3BlcmF0b3IgPSBvcGVyYXRvck5vZGUgJiYgcXVlcnkuc3Vic3RyaW5nKG9wZXJhdG9yTm9kZS5mcm9tLCBvcGVyYXRvck5vZGUudG8pO1xuICBjb25zdCB2YWx1ZSA9IHZhbHVlTm9kZSAmJiBxdWVyeS5zdWJzdHJpbmcodmFsdWVOb2RlLmZyb20sIHZhbHVlTm9kZS50byk7XG5cbiAgaWYgKHNlbGVjdGVkRmlsdGVyVHlwZSA9PT0gSXBMYWJlbEZpbHRlcikge1xuICAgIHJldHVybiBgfCAke2lkZW50aWZpZXJ9JHtvcGVyYXRvcn1pcCgke3ZhbHVlfSlgO1xuICB9XG5cbiAgcmV0dXJuIGB8ICR7aWRlbnRpZmllcn0ke29wZXJhdG9yfSR7dmFsdWV9YDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGluZUZvcm1hdEV4cHIobm9kZSwgcXVlcnkpIHtcbiAgY29uc3Qgc3RyaW5nTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoU3RyaW5nKTtcbiAgY29uc3Qgc3RyaW5nID0gc3RyaW5nTm9kZSAmJiBxdWVyeS5zdWJzdHJpbmcoc3RyaW5nTm9kZS5mcm9tLCBzdHJpbmdOb2RlLnRvKTtcbiAgcmV0dXJuIGB8IGxpbmVfZm9ybWF0ICR7c3RyaW5nfWA7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdExhYmVsRm9ybWF0RXhwcihub2RlLCBxdWVyeSkge1xuICBjb25zdCBsYWJlbEZvcm1hdE1hdGNoZXJOb2RlcyA9IGl0ZXJhdGVOb2RlKG5vZGUsIFtMYWJlbEZvcm1hdE1hdGNoZXJdKTtcbiAgbGV0IHJlc3BvbnNlID0gJ3wgbGFiZWxfZm9ybWF0ICc7XG5cbiAgbGFiZWxGb3JtYXRNYXRjaGVyTm9kZXMuZm9yRWFjaCgobGFiZWxGb3JtYXRNYXRjaGVyTm9kZSkgPT4ge1xuICAgIGxldCBpZGVudGlmaWVyTm9kZTtcbiAgICBsZXQgdmFsdWVOb2RlO1xuXG4gICAgaWYgKGxhYmVsRm9ybWF0TWF0Y2hlck5vZGUuZ2V0Q2hpbGRyZW4oSWRlbnRpZmllcikubGVuZ3RoID09PSAyKSB7XG4gICAgICBbaWRlbnRpZmllck5vZGUsIHZhbHVlTm9kZV0gPSBsYWJlbEZvcm1hdE1hdGNoZXJOb2RlLmdldENoaWxkcmVuKElkZW50aWZpZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZGVudGlmaWVyTm9kZSA9IGxhYmVsRm9ybWF0TWF0Y2hlck5vZGUuZ2V0Q2hpbGQoSWRlbnRpZmllcik7XG4gICAgICB2YWx1ZU5vZGUgPSBsYWJlbEZvcm1hdE1hdGNoZXJOb2RlLmdldENoaWxkKFN0cmluZyk7XG4gICAgfVxuXG4gICAgY29uc3QgaWRlbnRpZmllciA9IGlkZW50aWZpZXJOb2RlICYmIHF1ZXJ5LnN1YnN0cmluZyhpZGVudGlmaWVyTm9kZS5mcm9tLCBpZGVudGlmaWVyTm9kZS50byk7XG4gICAgY29uc3QgdmFsdWUgPSB2YWx1ZU5vZGUgJiYgcXVlcnkuc3Vic3RyaW5nKHZhbHVlTm9kZS5mcm9tLCB2YWx1ZU5vZGUudG8pO1xuXG4gICAgcmVzcG9uc2UgKz0gYCR7aWRlbnRpZmllcn09JHt2YWx1ZX0sIGA7XG4gIH0pO1xuXG4gIHJldHVybiB0cmltRW5kKHJlc3BvbnNlLCAnLCAnKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RGVjb2xvcml6ZUV4cHIoKSB7XG4gIHJldHVybiBgfCBkZWNvbG9yaXplYDtcbn1cblxuY29uc3QgZm9ybWF0TWV0cmljRXhwciA9IChub2RlLCBxdWVyeSkgPT4ge1xuICBjb25zdCB7IGFkZEJyYWNrZXRzLCBuZXdOb2RlIH0gPSBuZWVkc0JyYWNrZXRzKG5vZGUsIE1ldHJpY0V4cHIpO1xuICBub2RlID0gbmV3Tm9kZTtcbiAgbGV0IGZvcm1hdHRlZCA9ICcnO1xuXG4gIGNvbnN0IGNoaWxkTm9kZSA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgc3dpdGNoIChjaGlsZE5vZGUgJiYgY2hpbGROb2RlLnR5cGUuaWQpIHtcbiAgICBjYXNlIFJhbmdlQWdncmVnYXRpb25FeHByOlxuICAgICAgZm9ybWF0dGVkID0gZm9ybWF0UmFuZ2VBZ2dyZWdhdGlvbkV4cHIobm9kZSwgcXVlcnkpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZlY3RvckFnZ3JlZ2F0aW9uRXhwcjpcbiAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdFZlY3RvckFnZ3JlZ2F0aW9uRXhwcihub2RlLCBxdWVyeSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgQmluT3BFeHByOlxuICAgICAgZm9ybWF0dGVkID0gZm9ybWF0QmluT3BFeHByKG5vZGUsIHF1ZXJ5KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBMaXRlcmFsRXhwcjpcbiAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdExpdGVyYWxFeHByKG5vZGUsIHF1ZXJ5KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBMYWJlbFJlcGxhY2VFeHByOlxuICAgICAgZm9ybWF0dGVkID0gZm9ybWF0TGFiZWxSZXBsYWNlRXhwcihub2RlLCBxdWVyeSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgVmVjdG9yRXhwcjpcbiAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdFZlY3RvckV4cHIobm9kZSwgcXVlcnkpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gYWRkQnJhY2tldHMgPyAnKCcgKyBmb3JtYXR0ZWQgKyAnKScgOiBmb3JtYXR0ZWQ7XG59O1xuXG5mdW5jdGlvbiBmb3JtYXRSYW5nZUFnZ3JlZ2F0aW9uRXhwcihub2RlLCBxdWVyeSkge1xuICBsZXQgcmVzcG9uc2UgPSAnJztcblxuICBpdGVyYXRlTm9kZShub2RlLCBbUmFuZ2VPcCwgTnVtYmVyLCBMb2dSYW5nZUV4cHIsIEdyb3VwaW5nXSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgIGlmIChub2RlLnBhcmVudD8udHlwZS5pZCAhPT0gUmFuZ2VBZ2dyZWdhdGlvbkV4cHIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG5vZGUudHlwZS5pZCkge1xuICAgICAgY2FzZSBSYW5nZU9wOlxuICAgICAgICByZXNwb25zZSArPSBgJHtxdWVyeS5zdWJzdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKX0oXFxuYDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICByZXNwb25zZSArPSBgJHtpbmRlbnQoMSkgKyBxdWVyeS5zdWJzdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKX0sXFxuYDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgTG9nUmFuZ2VFeHByOlxuICAgICAgICByZXNwb25zZSArPSBmb3JtYXRMb2dSYW5nZUV4cHIobm9kZSwgcXVlcnkpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBHcm91cGluZzpcbiAgICAgICAgcmVzcG9uc2UgKz0gZm9ybWF0R3JvdXBpbmcobm9kZSwgcXVlcnkpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiByZXNwb25zZTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TG9nUmFuZ2VFeHByKG5vZGUsIHF1ZXJ5KSB7XG4gIGNvbnN0IG5vZGVzID0gW107XG4gIGxldCBzZWxlY3RvciA9ICcnO1xuICBsZXQgcGlwZWxpbmUgPSAnJztcbiAgbGV0IHJhbmdlID0gJyc7XG4gIGxldCBvZmZzZXQgPSAnJztcbiAgbGV0IHVud3JhcCA9ICcnO1xuXG4gIGl0ZXJhdGVOb2RlKG5vZGUsIFtTZWxlY3RvciwgUmFuZ2UsIE9mZnNldEV4cHIsIFVud3JhcEV4cHIsIFBpcGVsaW5lRXhwcl0pLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICBpZiAobm9kZS5wYXJlbnQ/LnR5cGUuaWQgIT09IExvZ1JhbmdlRXhwcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5vZGVzLnB1c2gobm9kZSk7XG5cbiAgICBzd2l0Y2ggKG5vZGUudHlwZS5pZCkge1xuICAgICAgY2FzZSBTZWxlY3Rvcjoge1xuICAgICAgICBsZXQgbG9nRXhwciA9IHF1ZXJ5LnN1YnN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pO1xuICAgICAgICBzZWxlY3RvciArPSBmb3JtYXRTZWxlY3Rvcih7IC4uLm5vZGUsIGZyb206IDAsIHRvOiBsb2dFeHByLmxlbmd0aCB9LCBsb2dFeHByKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgUGlwZWxpbmVFeHByOlxuICAgICAgICBwaXBlbGluZSArPSBmb3JtYXRQaXBlbGluZUV4cHIobm9kZSwgcXVlcnkpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYW5nZTpcbiAgICAgICAgcmFuZ2UgKz0gcXVlcnkuc3Vic3RyaW5nKG5vZGUuZnJvbSwgbm9kZS50byk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIE9mZnNldEV4cHI6IHtcbiAgICAgICAgY29uc3QgZHVyYXRpb25Ob2RlID0gbm9kZS5nZXRDaGlsZChEdXJhdGlvbik7XG4gICAgICAgIG9mZnNldCArPSBgIG9mZnNldCAke2R1cmF0aW9uTm9kZSA/IHF1ZXJ5LnN1YnN0cmluZyhkdXJhdGlvbk5vZGUuZnJvbSwgZHVyYXRpb25Ob2RlLnRvKSA6ICcnfWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFVud3JhcEV4cHI6XG4gICAgICAgIGl0ZXJhdGVOb2RlKG5vZGUsIFtJZGVudGlmaWVyLCBDb252T3AsIExhYmVsRmlsdGVyXSkuZm9yRWFjaCgobm9kZSwgXywgYXJyKSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChub2RlLnR5cGUuaWQpIHtcbiAgICAgICAgICAgIGNhc2UgSWRlbnRpZmllcjoge1xuICAgICAgICAgICAgICBpZiAobm9kZS5wYXJlbnQ/LnR5cGUuaWQgIT09IFVud3JhcEV4cHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCBoYXNDb252T3AgPSBhcnIuZmluZCgobm9kZSkgPT4gbm9kZS50eXBlLmlkID09PSBDb252T3ApO1xuXG4gICAgICAgICAgICAgIGlmIChoYXNDb252T3ApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB1bndyYXAgKz0gYHwgdW53cmFwICR7cXVlcnkuc3Vic3RyaW5nKG5vZGUuZnJvbSwgbm9kZS50byl9IGA7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSBDb252T3A6IHtcbiAgICAgICAgICAgICAgY29uc3QgaWRlbnRpZmllck5vZGUgPSBhcnIuZmluZCgobm9kZSkgPT4gbm9kZS50eXBlLmlkID09PSBJZGVudGlmaWVyKTtcbiAgICAgICAgICAgICAgY29uc3QgaWRlbnRpZmllciA9IGlkZW50aWZpZXJOb2RlID8gcXVlcnkuc3Vic3RyaW5nKGlkZW50aWZpZXJOb2RlLmZyb20sIGlkZW50aWZpZXJOb2RlLnRvKSA6ICcnO1xuICAgICAgICAgICAgICB1bndyYXAgKz0gYHwgdW53cmFwICR7cXVlcnkuc3Vic3RyaW5nKG5vZGUuZnJvbSwgbm9kZS50byl9KCR7aWRlbnRpZmllcn0pIGA7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSBMYWJlbEZpbHRlcjpcbiAgICAgICAgICAgICAgdW53cmFwICs9IGZvcm1hdExhYmVsRmlsdGVyKG5vZGUsIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgbGV0IHJlc3BvbnNlID0gJyc7XG4gIG5vZGVzLmZvckVhY2goKG5vZGUsIGluZGV4LCBhcnJheSkgPT4ge1xuICAgIGNvbnN0IHByZXZpb3VzTm9kZSA9IGFycmF5W2luZGV4IC0gMV07XG5cbiAgICBpZiAobm9kZS50eXBlLmlkID09PSBTZWxlY3Rvcikge1xuICAgICAgcmVzcG9uc2UgKz0gaW5kZW50KDEpICsgc2VsZWN0b3I7XG4gICAgfVxuXG4gICAgaWYgKG5vZGUudHlwZS5pZCA9PT0gUGlwZWxpbmVFeHByKSB7XG4gICAgICByZXNwb25zZSArPSBpbmRlbnRNdWx0aWxpbmUocGlwZWxpbmUsIDEpO1xuICAgIH1cblxuICAgIGlmIChub2RlLnR5cGUuaWQgPT09IFJhbmdlKSB7XG4gICAgICByZXNwb25zZSArPSAnXFxuJyArIGluZGVudCgxKSArIHJhbmdlO1xuICAgIH1cblxuICAgIGlmIChub2RlLnR5cGUuaWQgPT09IE9mZnNldEV4cHIpIHtcbiAgICAgIHJlc3BvbnNlICs9IG9mZnNldDtcbiAgICB9XG5cbiAgICBpZiAobm9kZS50eXBlLmlkID09PSBVbndyYXBFeHByKSB7XG4gICAgICBpZiAocHJldmlvdXNOb2RlPy50eXBlLmlkICE9PSBPZmZzZXRFeHByICYmIHByZXZpb3VzTm9kZT8udHlwZS5pZCAhPT0gUmFuZ2UpIHtcbiAgICAgICAgcmVzcG9uc2UgKz0gJ1xcbicgKyBpbmRlbnQoMSkgKyB1bndyYXA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNwb25zZSArPSAnICcgKyB1bndyYXA7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gKHJlc3BvbnNlICs9ICdcXG4pJyk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEdyb3VwaW5nKG5vZGUsIHF1ZXJ5KSB7XG4gIGxldCByZXNwb25zZSA9ICcnO1xuXG4gIGNvbnN0IGxhYmVscyA9IGl0ZXJhdGVOb2RlKG5vZGUsIFtJZGVudGlmaWVyXSkubWFwKChub2RlKSA9PiB7XG4gICAgcmV0dXJuIHF1ZXJ5LnN1YnN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pO1xuICB9KTtcblxuICBpdGVyYXRlTm9kZShub2RlLCBbQnksIFdpdGhvdXRdKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgaWYgKG5vZGUucGFyZW50Py50eXBlLmlkICE9PSBHcm91cGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAobm9kZS50eXBlLmlkKSB7XG4gICAgICBjYXNlIEJ5OlxuICAgICAgICByZXNwb25zZSA9IGAgYnkgKCR7bGFiZWxzLmpvaW4oJywgJyl9KSBgO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBXaXRob3V0OlxuICAgICAgICByZXNwb25zZSA9IGAgd2l0aG91dCAoJHtsYWJlbHMuam9pbignLCAnKX0pIGA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRWZWN0b3JBZ2dyZWdhdGlvbkV4cHIobm9kZSwgcXVlcnkpIHtcbiAgbGV0IHJlc3BvbnNlID0gJyc7XG5cbiAgaXRlcmF0ZU5vZGUobm9kZSwgW1ZlY3Rvck9wLCBOdW1iZXIsIE1ldHJpY0V4cHIsIEdyb3VwaW5nXSkuZm9yRWFjaCgobm9kZSwgXywgYXJyKSA9PiB7XG4gICAgaWYgKG5vZGUucGFyZW50Py50eXBlLmlkICE9PSBWZWN0b3JBZ2dyZWdhdGlvbkV4cHIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG5vZGUudHlwZS5pZCkge1xuICAgICAgY2FzZSBWZWN0b3JPcDpcbiAgICAgICAgcmVzcG9uc2UgKz0gYCR7cXVlcnkuc3Vic3RyaW5nKG5vZGUuZnJvbSwgbm9kZS50byl9YDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICByZXNwb25zZSArPSBgKFxcbmA7XG4gICAgICAgIHJlc3BvbnNlICs9IGAke2luZGVudCgxKSArIHF1ZXJ5LnN1YnN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pfSxcXG5gO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBNZXRyaWNFeHByOiB7XG4gICAgICAgIGNvbnN0IGhhc051bWJlciA9IGFyci5maW5kKChub2RlKSA9PiBub2RlLnR5cGUuaWQgPT09IE51bWJlciAmJiBub2RlLnBhcmVudD8udHlwZS5pZCA9PT0gVmVjdG9yQWdncmVnYXRpb25FeHByKTtcbiAgICAgICAgcmVzcG9uc2UgKz0gaGFzTnVtYmVyID8gJycgOiAnKFxcbic7XG5cbiAgICAgICAgY29uc3QgbWV0cmljRXhwciA9IHF1ZXJ5LnN1YnN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pO1xuICAgICAgICBjb25zdCBtZXRyaWNOb2RlID0gZ2V0Tm9kZUZyb21RdWVyeShtZXRyaWNFeHByLCBNZXRyaWNFeHByKTtcbiAgICAgICAgcmVzcG9uc2UgKz0gaW5kZW50TXVsdGlsaW5lKGZvcm1hdE1ldHJpY0V4cHIobWV0cmljTm9kZSwgbWV0cmljRXhwciksIDEpO1xuICAgICAgICByZXNwb25zZSArPSAnXFxuKSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIEdyb3VwaW5nOlxuICAgICAgICByZXNwb25zZSArPSBmb3JtYXRHcm91cGluZyhub2RlLCBxdWVyeSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRCaW5PcEV4cHIobm9kZSwgcXVlcnkpIHtcbiAgbGV0IG9wZXJhdG9yO1xuXG4gIGNvbnN0IFtsZWZ0RXhwciwgcmlnaHRFeHByXSA9IGl0ZXJhdGVOb2RlKG5vZGUsIFtFeHByXSkubWFwKChub2RlLCBpZHgpID0+IHtcbiAgICBpZiAoaWR4ID09PSAwKSB7XG4gICAgICBvcGVyYXRvciA9IHF1ZXJ5LnN1YnN0cmluZyhub2RlLm5leHRTaWJsaW5nPy5mcm9tID8/IDAsIG5vZGUubmV4dFNpYmxpbmc/LnRvKTtcbiAgICB9XG5cbiAgICBjb25zdCBleHByID0gcXVlcnkuc3Vic3RyaW5nKG5vZGUuZnJvbSwgbm9kZS50byk7XG4gICAgbGV0IGV4cHJlc3Npb25Ob2RlO1xuXG4gICAgaWYgKGlzTG9nc1F1ZXJ5KGV4cHIpKSB7XG4gICAgICBleHByZXNzaW9uTm9kZSA9IGdldE5vZGVGcm9tUXVlcnkoZXhwciwgTG9nRXhwciQxKTtcbiAgICAgIHJldHVybiBmb3JtYXRMb2dFeHByKGV4cHJlc3Npb25Ob2RlLCBleHByKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwcmVzc2lvbk5vZGUgPSBnZXROb2RlRnJvbVF1ZXJ5KGV4cHIsIE1ldHJpY0V4cHIpO1xuICAgICAgcmV0dXJuIGZvcm1hdE1ldHJpY0V4cHIoZXhwcmVzc2lvbk5vZGUsIGV4cHIpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGxlZnRFeHByICsgJ1xcbicgKyBvcGVyYXRvciArICdcXG4nICsgcmlnaHRFeHByO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRMaXRlcmFsRXhwcihub2RlLCBxdWVyeSkge1xuICBub2RlID0gbm9kZS5nZXRDaGlsZChMaXRlcmFsRXhwcikgPz8gbm9kZTtcbiAgY29uc3QgYWRkTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoQWRkKTtcbiAgY29uc3Qgc3ViTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoU3ViKTtcbiAgY29uc3QgbnVtYmVyTm9kZSA9IG5vZGUuZ2V0Q2hpbGQoTnVtYmVyKTtcblxuICBpZiAoIW51bWJlck5vZGUpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBpZiAoYWRkTm9kZSkge1xuICAgIHJldHVybiBgKyR7cXVlcnkuc3Vic3RyaW5nKG51bWJlck5vZGUuZnJvbSwgbnVtYmVyTm9kZS50byl9YDtcbiAgfVxuXG4gIGlmIChzdWJOb2RlKSB7XG4gICAgcmV0dXJuIGAtJHtxdWVyeS5zdWJzdHJpbmcobnVtYmVyTm9kZS5mcm9tLCBudW1iZXJOb2RlLnRvKX1gO1xuICB9XG5cbiAgcmV0dXJuIHF1ZXJ5LnN1YnN0cmluZyhudW1iZXJOb2RlLmZyb20sIG51bWJlck5vZGUudG8pO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRMYWJlbFJlcGxhY2VFeHByKG5vZGUsIHF1ZXJ5KSB7XG4gIGxldCByZXNwb25zZSA9ICdsYWJlbF9yZXBsYWNlKFxcbic7XG5cbiAgaXRlcmF0ZU5vZGUobm9kZSwgW01ldHJpY0V4cHIsIFN0cmluZ10pLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICBpZiAobm9kZS5wYXJlbnQ/LnR5cGUuaWQgIT09IExhYmVsUmVwbGFjZUV4cHIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9kZS50eXBlLmlkID09PSBNZXRyaWNFeHByKSB7XG4gICAgICBjb25zdCBtZXRyaWNFeHByID0gcXVlcnkuc3Vic3RyaW5nKG5vZGUuZnJvbSwgbm9kZS50byk7XG4gICAgICBjb25zdCBtZXRyaWNOb2RlID0gZ2V0Tm9kZUZyb21RdWVyeShtZXRyaWNFeHByLCBNZXRyaWNFeHByKTtcbiAgICAgIHJlc3BvbnNlICs9IGluZGVudE11bHRpbGluZShmb3JtYXRNZXRyaWNFeHByKG1ldHJpY05vZGUsIG1ldHJpY0V4cHIpLCAxKSArICcsXFxuJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzcG9uc2UgKz0gaW5kZW50KDEpICsgcXVlcnkuc3Vic3RyaW5nKG5vZGUuZnJvbSwgbm9kZS50bykgKyAnLFxcbic7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdHJpbUVuZChyZXNwb25zZSwgJyxcXG4nKSArICdcXG4pJztcbn1cblxuZnVuY3Rpb24gZm9ybWF0VmVjdG9yRXhwcihub2RlLCBxdWVyeSkge1xuICBub2RlID0gbm9kZS5nZXRDaGlsZChWZWN0b3JFeHByKSA/PyBub2RlO1xuICBjb25zdCBudW1iZXJOb2RlID0gbm9kZS5nZXRDaGlsZChOdW1iZXIpO1xuXG4gIGlmICghbnVtYmVyTm9kZSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHJldHVybiBgdmVjdG9yKCR7cXVlcnkuc3Vic3RyaW5nKG51bWJlck5vZGUuZnJvbSwgbnVtYmVyTm9kZS50byl9KWA7XG59XG5cbi8qKlxuICogQGV4cGVyaW1lbnRhbCBUaGlzIGZlYXR1cmUgaXMgc3ViamVjdCB0byBjaGFuZ2Ugb3IgcmVtb3ZhbCBpbiBmdXR1cmUgdmVyc2lvbnMuXG4gKi9cbmNvbnN0IGZvcm1hdExva2lRdWVyeSA9IChxdWVyeSkgPT4ge1xuICBjb25zdCB0cmVlID0gcGFyc2VyLnBhcnNlKHF1ZXJ5KTtcbiAgbGV0IGZvcm1hdHRlZCA9ICcnO1xuXG4gIHRyZWUuaXRlcmF0ZSh7XG4gICAgZW50ZXI6IChyZWYpID0+IHtcbiAgICAgIGNvbnN0IG5vZGUgPSByZWYubm9kZTtcblxuICAgICAgaWYgKG5vZGUucGFyZW50Py50eXBlLmlkICE9PSBFeHByIHx8IG5vZGUucGFyZW50Py5wYXJlbnQ/LnR5cGUuaWQgPT09IEJpbk9wRXhwcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAobm9kZS50eXBlLmlkKSB7XG4gICAgICAgIGNhc2UgTWV0cmljRXhwcjpcbiAgICAgICAgICBmb3JtYXR0ZWQgPSBmb3JtYXRNZXRyaWNFeHByKG5vZGUsIHF1ZXJ5KTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY2FzZSBMb2dFeHByOlxuICAgICAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdExvZ0V4cHIobm9kZSwgcXVlcnkpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gdHJpbU11bHRpbGluZShmb3JtYXR0ZWQpO1xufTtcblxuZXhwb3J0IHsgQWJzZW50T3ZlclRpbWUsIEFkZCwgQW5kLCBBdmcsIEF2Z092ZXJUaW1lLCBCaW5PcEV4cHIsIEJpbk9wTW9kaWZpZXIsIEJvb2wsIEJvdHRvbWssIEJ5LCBCeXRlcywgQnl0ZXNDb252LCBCeXRlc0ZpbHRlciwgQnl0ZXNPdmVyVGltZSwgQnl0ZXNSYXRlLCBDb252T3AsIENvdW50LCBDb3VudE92ZXJUaW1lLCBEZWNvbG9yaXplLCBEZWNvbG9yaXplRXhwciwgRGl2LCBEcm9wLCBEcm9wTGFiZWwsIERyb3BMYWJlbHMsIERyb3BMYWJlbHNFeHByLCBEdXJhdGlvbiwgRHVyYXRpb25Db252LCBEdXJhdGlvbkZpbHRlciwgRHVyYXRpb25TZWNvbmRzQ29udiwgRXEsIEVxbCwgRXhwciwgRmlsdGVyLCBGaWx0ZXJPcCwgRmlyc3RPdmVyVGltZSwgR3JvdXBMZWZ0LCBHcm91cFJpZ2h0LCBHcm91cGluZywgR3JvdXBpbmdMYWJlbCwgR3JvdXBpbmdMYWJlbExpc3QsIEdyb3VwaW5nTGFiZWxzLCBHdGUsIEd0ciwgSWRlbnRpZmllciwgSWdub3JpbmcsIElwLCBJcExhYmVsRmlsdGVyLCBKc29uLCBKc29uRXhwcmVzc2lvbiwgSnNvbkV4cHJlc3Npb25MaXN0LCBKc29uRXhwcmVzc2lvblBhcnNlciwgS2VlcCwgS2VlcExhYmVsLCBLZWVwTGFiZWxzLCBLZWVwTGFiZWxzRXhwciwgTGFiZWxGaWx0ZXIsIExhYmVsRm9ybWF0LCBMYWJlbEZvcm1hdEV4cHIsIExhYmVsRm9ybWF0TWF0Y2hlciwgTGFiZWxOYW1lLCBMYWJlbFBhcnNlciwgTGFiZWxSZXBsYWNlLCBMYWJlbFJlcGxhY2VFeHByLCBMYWJlbHMsIExhYmVsc0Zvcm1hdCwgTGFzdE92ZXJUaW1lLCBMaW5lQ29tbWVudCwgTGluZUZpbHRlciwgTGluZUZpbHRlcnMsIExpbmVGb3JtYXQsIExpbmVGb3JtYXRFeHByLCBMaXRlcmFsRXhwciwgTG9nRXhwciwgTG9nUUwsIExvZ1JhbmdlRXhwciwgTG9nZm10LCBMc3MsIEx0ZSwgTWF0Y2hlciwgTWF0Y2hlcnMsIE1heCwgTWF4T3ZlclRpbWUsIE1ldHJpY0V4cHIsIE1pbiwgTWluT3ZlclRpbWUsIE1vZCwgTXVsLCBOZXEsIE5yZSwgTnVtYmVyLCBOdW1iZXJGaWx0ZXIsIE9mZnNldCwgT2Zmc2V0RXhwciwgT24sIE9uT3JJZ25vcmluZ01vZGlmaWVyLCBPciwgUGF0dGVybiwgUGlwZSwgUGlwZUV4YWN0LCBQaXBlTWF0Y2gsIFBpcGVsaW5lRXhwciwgUGlwZWxpbmVTdGFnZSwgUG93LCBRdWFudGlsZU92ZXJUaW1lLCBSYW5nZSwgUmFuZ2VBZ2dyZWdhdGlvbkV4cHIsIFJhbmdlT3AsIFJhdGUsIFJhdGVDb3VudGVyLCBSZSwgUmVnZXhwLCBTZWxlY3RvciwgU3RkZGV2LCBTdGRkZXZPdmVyVGltZSwgU3RkdmFyLCBTdGR2YXJPdmVyVGltZSwgU3RyaW5nLCBTdWIsIFN1bSwgU3VtT3ZlclRpbWUsIFRvcGssIFVuaXRGaWx0ZXIsIFVubGVzcywgVW5wYWNrLCBVbndyYXAsIFVud3JhcEV4cHIsIFZlY3RvciwgVmVjdG9yQWdncmVnYXRpb25FeHByLCBWZWN0b3JFeHByLCBWZWN0b3JPcCwgV2l0aG91dCwgZm9ybWF0TG9raVF1ZXJ5LCBwYXJzZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./.yarn/__virtual__/@grafana-lezer-logql-virtual-0b75aafe9e/0/cache/@grafana-lezer-logql-npm-0.1.11-91e9d74a76-6a624b9a8d.zip/node_modules/@grafana/lezer-logql/index.es.js\n");

/***/ }),

/***/ "./public/app/plugins/datasource/loki/plugin.json":
/***/ ((module) => {

module.exports = JSON.parse('{"type":"datasource","name":"Loki","id":"loki","category":"logging","logs":true,"metrics":true,"alerting":true,"annotations":true,"streaming":true,"backend":true,"queryOptions":{"maxDataPoints":true},"info":{"description":"Like Prometheus but for logs. OSS logging solution from Grafana Labs","author":{"name":"Grafana Labs","url":"https://grafana.com"},"logos":{"small":"img/loki_icon.svg","large":"img/loki_icon.svg"},"links":[{"name":"Learn more","url":"https://grafana.com/loki"},{"name":"GitHub Project","url":"https://github.com/grafana/loki"}]}}');

/***/ })

}]);