"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkgrafana"] = self["webpackChunkgrafana"] || []).push([["tableOldPlugin"],{

/***/ "./public/app/angular/AngularLocationWrapper.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AngularLocationWrapper: () => (/* binding */ AngularLocationWrapper)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/deprecationWarning.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/url.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/LocationService.ts\");\n\n\n\nconst DEFAULT_PORTS = { http: 80, https: 443, ftp: 21 };\nclass AngularLocationWrapper {\n  constructor() {\n    this.absUrl = this.wrapInDeprecationWarning(this.absUrl);\n    this.hash = this.wrapInDeprecationWarning(this.hash);\n    this.host = this.wrapInDeprecationWarning(this.host);\n    this.path = this.wrapInDeprecationWarning(this.path);\n    this.port = this.wrapInDeprecationWarning(this.port, \"window.location\");\n    this.protocol = this.wrapInDeprecationWarning(this.protocol, \"window.location\");\n    this.replace = this.wrapInDeprecationWarning(this.replace);\n    this.search = this.wrapInDeprecationWarning(this.search);\n    this.state = this.wrapInDeprecationWarning(this.state);\n    this.url = this.wrapInDeprecationWarning(this.url);\n  }\n  wrapInDeprecationWarning(fn, replacement) {\n    let self = this;\n    return function wrapper() {\n      (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.deprecationWarning)(\"$location\", fn.name, replacement || \"locationService\");\n      return fn.apply(self, arguments);\n    };\n  }\n  absUrl() {\n    return `${window.location.origin}${this.url()}`;\n  }\n  hash(newHash) {\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.navigationLogger)(\"AngularLocationWrapper\", false, \"Angular compat layer: hash\");\n    if (!newHash) {\n      return _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.getLocation().hash.slice(1);\n    } else {\n      throw new Error(\"AngularLocationWrapper method not implemented.\");\n    }\n  }\n  host() {\n    return new URL(window.location.href).hostname;\n  }\n  path(pathname) {\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.navigationLogger)(\"AngularLocationWrapper\", false, \"Angular compat layer: path\");\n    const location = _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.getLocation();\n    if (pathname !== void 0 && pathname !== null) {\n      let parsedPath = String(pathname);\n      parsedPath = parsedPath.startsWith(\"/\") ? parsedPath : `/${parsedPath}`;\n      const url = new URL(`${window.location.origin}${parsedPath}`);\n      _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.push({\n        pathname: url.pathname,\n        search: url.search.length > 0 ? url.search : location.search,\n        hash: url.hash.length > 0 ? url.hash : location.hash\n      });\n      return this;\n    }\n    if (pathname === null) {\n      _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.push(\"/\");\n      return this;\n    }\n    return location.pathname;\n  }\n  port() {\n    const url = new URL(window.location.href);\n    return parseInt(url.port, 10) || DEFAULT_PORTS[url.protocol] || null;\n  }\n  protocol() {\n    return new URL(window.location.href).protocol.slice(0, -1);\n  }\n  replace() {\n    throw new Error(\"AngularLocationWrapper method not implemented.\");\n  }\n  search(search, paramValue) {\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.navigationLogger)(\"AngularLocationWrapper\", false, \"Angular compat layer: search\");\n    if (!search) {\n      return _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.getSearchObject();\n    }\n    if (search && arguments.length > 1) {\n      _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.partial({\n        [search]: paramValue\n      });\n      return this;\n    }\n    if (search) {\n      let newQuery;\n      if (typeof search === \"object\") {\n        newQuery = { ...search };\n      } else {\n        newQuery = (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationSearchToObject)(search);\n      }\n      for (const key of Object.keys(newQuery)) {\n        if (newQuery[key] === null || newQuery[key] === void 0) {\n          delete newQuery[key];\n        }\n      }\n      const updatedUrl = _grafana_data__WEBPACK_IMPORTED_MODULE_2__.urlUtil.renderUrl(_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.getLocation().pathname, newQuery);\n      _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.push(updatedUrl);\n    }\n    return this;\n  }\n  state(state) {\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.navigationLogger)(\"AngularLocationWrapper\", false, \"Angular compat layer: state\");\n    throw new Error(\"AngularLocationWrapper method not implemented.\");\n  }\n  url(newUrl) {\n    (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.navigationLogger)(\"AngularLocationWrapper\", false, \"Angular compat layer: url\");\n    if (newUrl !== void 0) {\n      if (newUrl.startsWith(\"#\")) {\n        _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.push({ ..._grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.getLocation(), hash: newUrl });\n      } else if (newUrl.startsWith(\"?\")) {\n        _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.push({ ..._grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.getLocation(), search: newUrl });\n      } else if (newUrl.trim().length === 0) {\n        _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.push(\"/\");\n      } else {\n        _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.push(newUrl);\n      }\n      return _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService;\n    }\n    const location = _grafana_runtime__WEBPACK_IMPORTED_MODULE_1__.locationService.getLocation();\n    return `${location.pathname}${location.search}${location.hash}`;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2FuZ3VsYXIvQW5ndWxhckxvY2F0aW9uV3JhcHBlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0QztBQUM4QjtBQUcxRSxNQUFNLGdCQUF3QyxFQUFFLE1BQU0sSUFBSSxPQUFPLEtBQUssS0FBSyxHQUFHO0FBRXZFLE1BQU0sdUJBQXVCO0FBQUEsRUFDbEMsY0FBYztBQUNaLFNBQUssU0FBUyxLQUFLLHlCQUF5QixLQUFLLE1BQU07QUFDdkQsU0FBSyxPQUFPLEtBQUsseUJBQXlCLEtBQUssSUFBSTtBQUNuRCxTQUFLLE9BQU8sS0FBSyx5QkFBeUIsS0FBSyxJQUFJO0FBQ25ELFNBQUssT0FBTyxLQUFLLHlCQUF5QixLQUFLLElBQUk7QUFDbkQsU0FBSyxPQUFPLEtBQUsseUJBQXlCLEtBQUssTUFBTSxpQkFBaUI7QUFDdEUsU0FBSyxXQUFXLEtBQUsseUJBQXlCLEtBQUssVUFBVSxpQkFBaUI7QUFDOUUsU0FBSyxVQUFVLEtBQUsseUJBQXlCLEtBQUssT0FBTztBQUN6RCxTQUFLLFNBQVMsS0FBSyx5QkFBeUIsS0FBSyxNQUFNO0FBQ3ZELFNBQUssUUFBUSxLQUFLLHlCQUF5QixLQUFLLEtBQUs7QUFDckQsU0FBSyxNQUFNLEtBQUsseUJBQXlCLEtBQUssR0FBRztBQUFBLEVBQ25EO0FBQUEsRUFFQSx5QkFBeUIsSUFBYyxhQUFzQjtBQUMzRCxRQUFJLE9BQU87QUFFWCxXQUFPLFNBQVMsVUFBVTtBQUN4Qix1RUFBa0IsQ0FBQyxhQUFhLEdBQUcsTUFBTSxlQUFlLGlCQUFpQjtBQUN6RSxhQUFPLEdBQUcsTUFBTSxNQUFNLFNBQVM7QUFBQSxJQUNqQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFNBQWlCO0FBQ2YsV0FBTyxHQUFHLE9BQU8sU0FBUyxTQUFTLEtBQUssSUFBSTtBQUFBLEVBQzlDO0FBQUEsRUFFQSxLQUFLLFNBQXlCO0FBQzVCLHNFQUFnQixDQUFDLDBCQUEwQixPQUFPLDRCQUE0QjtBQUU5RSxRQUFJLENBQUMsU0FBUztB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QUFFLEdBQUcsNkRBQWUsQ0FBQyxZQUFZLEdBQUcsTUFBTSxPQUFPLENBQUM7QUFBQSxNQUN6RSxXQUFXLE9BQU8sV0FBVyxHQUFHLEdBQUc7QUFDakMscUVBQWUsQ0FBQyxLQUFLLEVBQUUsR0FBRyw2REFBZSxDQUFDLFlBQVksR0FBRyxRQUFRLE9BQU8sQ0FBQztBQUFBLE1BQzNFLFdBQVcsT0FBTyxLQUFLLEVBQUUsV0FBVyxHQUFHO0FBQ3JDLHFFQUFlLENBQUMsS0FBSyxHQUFHO0FBQUEsTUFDMUIsT0FBTztBQUNMLHFFQUFlLENBQUMsS0FBSyxNQUFNO0FBQUEsTUFDN0I7QUFFQSxhQUFPLDZEQUFlO0FBQWYsSUFDVDtBQUVBLFVBQU0sV0FBVyw2REFBZSxDQUFDLFlBQVk7QUFDN0MsV0FBTyxHQUFHLFNBQVMsV0FBVyxTQUFTLFNBQVMsU0FBUztBQUFBLEVBQzNEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9hbmd1bGFyL0FuZ3VsYXJMb2NhdGlvbldyYXBwZXIudHM/ZmI0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXByZWNhdGlvbldhcm5pbmcsIHVybFV0aWwgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IGxvY2F0aW9uU2VhcmNoVG9PYmplY3QsIGxvY2F0aW9uU2VydmljZSwgbmF2aWdhdGlvbkxvZ2dlciB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuXG4vLyBSZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvYmxvYi9hZThlOTAzZWRmODhhODNmZWRkMTE2YWUwMmMwNjI4YmY3MmIxNTBjL3NyYy9uZy9sb2NhdGlvbi5qcyNMNVxuY29uc3QgREVGQVVMVF9QT1JUUzogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgaHR0cDogODAsIGh0dHBzOiA0NDMsIGZ0cDogMjEgfTtcblxuZXhwb3J0IGNsYXNzIEFuZ3VsYXJMb2NhdGlvbldyYXBwZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmFic1VybCA9IHRoaXMud3JhcEluRGVwcmVjYXRpb25XYXJuaW5nKHRoaXMuYWJzVXJsKTtcbiAgICB0aGlzLmhhc2ggPSB0aGlzLndyYXBJbkRlcHJlY2F0aW9uV2FybmluZyh0aGlzLmhhc2gpO1xuICAgIHRoaXMuaG9zdCA9IHRoaXMud3JhcEluRGVwcmVjYXRpb25XYXJuaW5nKHRoaXMuaG9zdCk7XG4gICAgdGhpcy5wYXRoID0gdGhpcy53cmFwSW5EZXByZWNhdGlvbldhcm5pbmcodGhpcy5wYXRoKTtcbiAgICB0aGlzLnBvcnQgPSB0aGlzLndyYXBJbkRlcHJlY2F0aW9uV2FybmluZyh0aGlzLnBvcnQsICd3aW5kb3cubG9jYXRpb24nKTtcbiAgICB0aGlzLnByb3RvY29sID0gdGhpcy53cmFwSW5EZXByZWNhdGlvbldhcm5pbmcodGhpcy5wcm90b2NvbCwgJ3dpbmRvdy5sb2NhdGlvbicpO1xuICAgIHRoaXMucmVwbGFjZSA9IHRoaXMud3JhcEluRGVwcmVjYXRpb25XYXJuaW5nKHRoaXMucmVwbGFjZSk7XG4gICAgdGhpcy5zZWFyY2ggPSB0aGlzLndyYXBJbkRlcHJlY2F0aW9uV2FybmluZyh0aGlzLnNlYXJjaCk7XG4gICAgdGhpcy5zdGF0ZSA9IHRoaXMud3JhcEluRGVwcmVjYXRpb25XYXJuaW5nKHRoaXMuc3RhdGUpO1xuICAgIHRoaXMudXJsID0gdGhpcy53cmFwSW5EZXByZWNhdGlvbldhcm5pbmcodGhpcy51cmwpO1xuICB9XG5cbiAgd3JhcEluRGVwcmVjYXRpb25XYXJuaW5nKGZuOiBGdW5jdGlvbiwgcmVwbGFjZW1lbnQ/OiBzdHJpbmcpIHtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgIGRlcHJlY2F0aW9uV2FybmluZygnJGxvY2F0aW9uJywgZm4ubmFtZSwgcmVwbGFjZW1lbnQgfHwgJ2xvY2F0aW9uU2VydmljZScpO1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuXG4gIGFic1VybCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufSR7dGhpcy51cmwoKX1gO1xuICB9XG5cbiAgaGFzaChuZXdIYXNoPzogc3RyaW5nIHwgbnVsbCkge1xuICAgIG5hdmlnYXRpb25Mb2dnZXIoJ0FuZ3VsYXJMb2NhdGlvbldyYXBwZXInLCBmYWxzZSwgJ0FuZ3VsYXIgY29tcGF0IGxheWVyOiBoYXNoJyk7XG5cbiAgICBpZiAoIW5ld0hhc2gpIHtcbiAgICAgIHJldHVybiBsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb24oKS5oYXNoLnNsaWNlKDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FuZ3VsYXJMb2NhdGlvbldyYXBwZXIgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICB9XG4gIH1cblxuICBob3N0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLmhvc3RuYW1lO1xuICB9XG5cbiAgcGF0aChwYXRobmFtZT86IGFueSkge1xuICAgIG5hdmlnYXRpb25Mb2dnZXIoJ0FuZ3VsYXJMb2NhdGlvbldyYXBwZXInLCBmYWxzZSwgJ0FuZ3VsYXIgY29tcGF0IGxheWVyOiBwYXRoJyk7XG5cbiAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbigpO1xuXG4gICAgaWYgKHBhdGhuYW1lICE9PSB1bmRlZmluZWQgJiYgcGF0aG5hbWUgIT09IG51bGwpIHtcbiAgICAgIGxldCBwYXJzZWRQYXRoID0gU3RyaW5nKHBhdGhuYW1lKTtcbiAgICAgIHBhcnNlZFBhdGggPSBwYXJzZWRQYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhcnNlZFBhdGggOiBgLyR7cGFyc2VkUGF0aH1gO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufSR7cGFyc2VkUGF0aH1gKTtcblxuICAgICAgbG9jYXRpb25TZXJ2aWNlLnB1c2goe1xuICAgICAgICBwYXRobmFtZTogdXJsLnBhdGhuYW1lLFxuICAgICAgICBzZWFyY2g6IHVybC5zZWFyY2gubGVuZ3RoID4gMCA/IHVybC5zZWFyY2ggOiBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgIGhhc2g6IHVybC5oYXNoLmxlbmd0aCA+IDAgPyB1cmwuaGFzaCA6IGxvY2F0aW9uLmhhc2gsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmIChwYXRobmFtZSA9PT0gbnVsbCkge1xuICAgICAgbG9jYXRpb25TZXJ2aWNlLnB1c2goJy8nKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiBsb2NhdGlvbi5wYXRobmFtZTtcbiAgfVxuXG4gIHBvcnQoKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgcmV0dXJuIHBhcnNlSW50KHVybC5wb3J0LCAxMCkgfHwgREVGQVVMVF9QT1JUU1t1cmwucHJvdG9jb2xdIHx8IG51bGw7XG4gIH1cblxuICBwcm90b2NvbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5wcm90b2NvbC5zbGljZSgwLCAtMSk7XG4gIH1cblxuICByZXBsYWNlKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQW5ndWxhckxvY2F0aW9uV3JhcHBlciBtZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgc2VhcmNoKHNlYXJjaD86IGFueSwgcGFyYW1WYWx1ZT86IGFueSkge1xuICAgIG5hdmlnYXRpb25Mb2dnZXIoJ0FuZ3VsYXJMb2NhdGlvbldyYXBwZXInLCBmYWxzZSwgJ0FuZ3VsYXIgY29tcGF0IGxheWVyOiBzZWFyY2gnKTtcbiAgICBpZiAoIXNlYXJjaCkge1xuICAgICAgcmV0dXJuIGxvY2F0aW9uU2VydmljZS5nZXRTZWFyY2hPYmplY3QoKTtcbiAgICB9XG5cbiAgICBpZiAoc2VhcmNoICYmIGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICBsb2NhdGlvblNlcnZpY2UucGFydGlhbCh7XG4gICAgICAgIFtzZWFyY2hdOiBwYXJhbVZhbHVlLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmIChzZWFyY2gpIHtcbiAgICAgIGxldCBuZXdRdWVyeTtcblxuICAgICAgaWYgKHR5cGVvZiBzZWFyY2ggPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG5ld1F1ZXJ5ID0geyAuLi5zZWFyY2ggfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld1F1ZXJ5ID0gbG9jYXRpb25TZWFyY2hUb09iamVjdChzZWFyY2gpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhuZXdRdWVyeSkpIHtcbiAgICAgICAgLy8gcmVtb3ZpbmcgcGFyYW1zIHdpdGggbnVsbCB8IHVuZGVmaW5lZFxuICAgICAgICBpZiAobmV3UXVlcnlba2V5XSA9PT0gbnVsbCB8fCBuZXdRdWVyeVtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBkZWxldGUgbmV3UXVlcnlba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVkVXJsID0gdXJsVXRpbC5yZW5kZXJVcmwobG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uKCkucGF0aG5hbWUsIG5ld1F1ZXJ5KTtcbiAgICAgIGxvY2F0aW9uU2VydmljZS5wdXNoKHVwZGF0ZWRVcmwpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc3RhdGUoc3RhdGU/OiBhbnkpIHtcbiAgICBuYXZpZ2F0aW9uTG9nZ2VyKCdBbmd1bGFyTG9jYXRpb25XcmFwcGVyJywgZmFsc2UsICdBbmd1bGFyIGNvbXBhdCBsYXllcjogc3RhdGUnKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0FuZ3VsYXJMb2NhdGlvbldyYXBwZXIgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuXG4gIHVybChuZXdVcmw/OiBhbnkpIHtcbiAgICBuYXZpZ2F0aW9uTG9nZ2VyKCdBbmd1bGFyTG9jYXRpb25XcmFwcGVyJywgZmFsc2UsICdBbmd1bGFyIGNvbXBhdCBsYXllcjogdXJsJyk7XG5cbiAgICBpZiAobmV3VXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChuZXdVcmwuc3RhcnRzV2l0aCgnIycpKSB7XG4gICAgICAgIGxvY2F0aW9uU2VydmljZS5wdXNoKHsgLi4ubG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uKCksIGhhc2g6IG5ld1VybCB9KTtcbiAgICAgIH0gZWxzZSBpZiAobmV3VXJsLnN0YXJ0c1dpdGgoJz8nKSkge1xuICAgICAgICBsb2NhdGlvblNlcnZpY2UucHVzaCh7IC4uLmxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbigpLCBzZWFyY2g6IG5ld1VybCB9KTtcbiAgICAgIH0gZWxzZSBpZiAobmV3VXJsLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbG9jYXRpb25TZXJ2aWNlLnB1c2goJy8nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2F0aW9uU2VydmljZS5wdXNoKG5ld1VybCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsb2NhdGlvblNlcnZpY2U7XG4gICAgfVxuXG4gICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb24oKTtcbiAgICByZXR1cm4gYCR7bG9jYXRpb24ucGF0aG5hbWV9JHtsb2NhdGlvbi5zZWFyY2h9JHtsb2NhdGlvbi5oYXNofWA7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/angular/AngularLocationWrapper.ts\n");

/***/ }),

/***/ "./public/app/angular/panel/metrics_panel_ctrl.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetricsPanelCtrl: () => (/* binding */ MetricsPanelCtrl)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/data.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/legacyEvents.ts\");\n/* harmony import */ var app_angular_panel_panel_ctrl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/angular/panel/panel_ctrl.ts\");\n/* harmony import */ var app_features_dashboard_utils_panel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/dashboard/utils/panel.ts\");\n\n\n\n\n\nclass MetricsPanelCtrl extends app_angular_panel_panel_ctrl__WEBPACK_IMPORTED_MODULE_1__.PanelCtrl {\n  constructor($scope, $injector) {\n    super($scope, $injector);\n    this.skipDataOnInit = false;\n    this.dataList = [];\n    this.useDataFrames = false;\n    // Updates the response with information from the stream\n    this.panelDataObserver = {\n      next: (data) => {\n        this.panelData = data;\n        if (data.state === _grafana_data__WEBPACK_IMPORTED_MODULE_3__.LoadingState.Error) {\n          this.loading = false;\n          this.processDataError(data.error);\n        }\n        if (data.state === _grafana_data__WEBPACK_IMPORTED_MODULE_3__.LoadingState.Loading) {\n          this.loading = true;\n          this.angularDirtyCheck();\n          return;\n        }\n        if (data.request) {\n          const { timeInfo } = data.request;\n          if (timeInfo) {\n            this.timeInfo = timeInfo;\n          }\n        }\n        if (data.timeRange) {\n          this.range = data.timeRange;\n        }\n        if (this.useDataFrames) {\n          this.handleDataFrames(data.series);\n        } else {\n          const legacy = data.series.map((v) => (0,_grafana_data__WEBPACK_IMPORTED_MODULE_4__.toLegacyResponseData)(v));\n          this.handleQueryResult({ data: legacy });\n        }\n        this.angularDirtyCheck();\n      }\n    };\n    this.contextSrv = $injector.get(\"contextSrv\");\n    this.datasourceSrv = $injector.get(\"datasourceSrv\");\n    this.timeSrv = $injector.get(\"timeSrv\");\n    this.templateSrv = $injector.get(\"templateSrv\");\n    this.panel.datasource = this.panel.datasource || null;\n    this.events.on(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.refresh, this.onMetricsPanelRefresh.bind(this));\n    this.events.on(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.panelTeardown, this.onPanelTearDown.bind(this));\n    this.events.on(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.componentDidMount, this.onMetricsPanelMounted.bind(this));\n  }\n  onMetricsPanelMounted() {\n    const queryRunner = this.panel.getQueryRunner();\n    this.querySubscription = queryRunner.getData({ withTransforms: true, withFieldConfig: true }).subscribe(this.panelDataObserver);\n  }\n  onPanelTearDown() {\n    if (this.querySubscription) {\n      this.querySubscription.unsubscribe();\n      this.querySubscription = null;\n    }\n  }\n  onMetricsPanelRefresh() {\n    if (this.otherPanelInFullscreenMode()) {\n      return;\n    }\n    if (this.panel.snapshotData) {\n      this.updateTimeRange();\n      let data = this.panel.snapshotData;\n      if (!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isArray)(data)) {\n        data = data.data;\n      }\n      this.panelData = {\n        state: _grafana_data__WEBPACK_IMPORTED_MODULE_3__.LoadingState.Done,\n        series: data,\n        timeRange: this.range\n      };\n      return this.$timeout(() => {\n        this.events.emit(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.dataSnapshotLoad, data);\n      });\n    }\n    delete this.error;\n    this.loading = true;\n    return this.datasourceSrv.get(this.panel.datasource, this.panel.scopedVars).then(this.issueQueries.bind(this)).catch((err) => {\n      this.processDataError(err);\n    });\n  }\n  processDataError(err) {\n    if (err.cancelled) {\n      console.log(\"Panel request cancelled\", err);\n      return;\n    }\n    this.error = err.message || \"Request Error\";\n    if (err.data) {\n      if (err.data.message) {\n        this.error = err.data.message;\n      } else if (err.data.error) {\n        this.error = err.data.error;\n      }\n    }\n    this.angularDirtyCheck();\n  }\n  angularDirtyCheck() {\n    if (!this.$scope.$root.$$phase) {\n      this.$scope.$digest();\n    }\n  }\n  updateTimeRange(datasource) {\n    this.datasource = datasource || this.datasource;\n    this.range = this.timeSrv.timeRange();\n    const newTimeData = (0,app_features_dashboard_utils_panel__WEBPACK_IMPORTED_MODULE_2__.applyPanelTimeOverrides)(this.panel, this.range);\n    this.timeInfo = newTimeData.timeInfo;\n    this.range = newTimeData.timeRange;\n  }\n  issueQueries(datasource) {\n    this.updateTimeRange(datasource);\n    this.datasource = datasource;\n    const panel = this.panel;\n    const queryRunner = panel.getQueryRunner();\n    return queryRunner.run({\n      datasource: panel.datasource,\n      queries: panel.targets,\n      panelId: panel.id,\n      dashboardUID: this.dashboard.uid,\n      timezone: this.dashboard.getTimezone(),\n      timeInfo: this.timeInfo,\n      timeRange: this.range,\n      maxDataPoints: panel.maxDataPoints || this.width,\n      minInterval: panel.interval,\n      publicDashboardAccessToken: this.dashboard.meta.publicDashboardAccessToken,\n      scopedVars: panel.scopedVars,\n      cacheTimeout: panel.cacheTimeout,\n      queryCachingTTL: panel.queryCachingTTL,\n      transformations: panel.transformations\n    });\n  }\n  handleDataFrames(data) {\n    this.loading = false;\n    if (this.dashboard && this.dashboard.snapshot) {\n      this.panel.snapshotData = data.map((frame) => (0,_grafana_data__WEBPACK_IMPORTED_MODULE_4__.toDataFrameDTO)(frame));\n    }\n    try {\n      this.events.emit(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.dataFramesReceived, data);\n    } catch (err) {\n      this.processDataError(err);\n    }\n  }\n  handleQueryResult(result) {\n    this.loading = false;\n    if (this.dashboard.snapshot) {\n      this.panel.snapshotData = result.data;\n    }\n    if (!result || !result.data) {\n      console.log(\"Data source query result invalid, missing data field:\", result);\n      result = { data: [] };\n    }\n    try {\n      this.events.emit(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.dataReceived, result.data);\n    } catch (err) {\n      this.processDataError(err);\n    }\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2FuZ3VsYXIvcGFuZWwvbWV0cmljc19wYW5lbF9jdHJsLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF3QjtBQWNqQjtBQUNtQjtBQUdjO0FBSXhDLE1BQU0seUJBQXlCLG1FQUFTLENBQUM7QUFBQSxFQWtCdkMsWUFBWSxRQUFhLFdBQWdCO0FBQ3ZDLFVBQU0sUUFBUSxTQUFTO0FBUHpCLDBCQUFpQjtBQUNqQixvQkFBaUMsQ0FBQztBQUVsQyx5QkFBZ0I7QUFtR2hCO0FBQUEsNkJBQW9CO0FBQUEsTUFDbEIsTUFBTSxDQUFDLFNBQW9CO0FBQ3pCLGFBQUssWUFBWTtBQUVqQixZQUFJLEtBQUssVUFBVSx1REFBWSxDQUFDLE9BQU87QUFDckMsZUFBSyxVQUFVO0FBQ2YsZUFBSyxpQkFBaUIsS0FBSyxLQUFLO0FBQUEsUUFDbEM7QUFHQSxZQUFJLEtBQUssVUFBVSx1REFBWSxDQUFDLFNBQVM7QUFDdkMsZUFBSyxVQUFVO0FBQ2YsZUFBSyxrQkFBa0I7QUFDdkI7QUFBQSxRQUNGO0FBRUEsWUFBSSxLQUFLLFNBQVM7QUFDaEIsZ0JBQU0sRUFBRSxTQUFTLElBQUksS0FBSztBQUMxQixjQUFJLFVBQVU7QUFDWixpQkFBSyxXQUFXO0FBQUEsVUFDbEI7QUFBQSxRQUNGO0FBRUEsWUFBSSxLQUFLLFdBQVc7QUFDbEIsZUFBSyxRQUFRLEtBQUs7QUFBQSxRQUNwQjtBQUVBLFlBQUksS0FBSyxlQUFlO0FBQ3RCLGVBQUssaUJBQWlCLEtBQUssTUFBTTtBQUFBLFFBQ25DLE9BQU87QUFFTCxnQkFBTSxTQUFTLEtBQUssT0FBTyxJQUFJLENBQUMsTUFBTSxtRUFBb0IsQ0FBQyxDQUFDLENBQUM7QUFDN0QsZUFBSyxrQkFBa0IsRUFBRSxNQUFNLE9BQU8sQ0FBQztBQUFBLFFBQ3pDO0FBRUEsYUFBSyxrQkFBa0I7QUFBQSxNQUN6QjtBQUFBLElBQ0Y7QUFsSUUsU0FBSyxhQUFhLFVBQVUsSUFBSSxZQUFZO0FBQzVDLFNBQUssZ0JBQWdCLFVB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LE9BQU8sSUFBSTtBQUFBLElBQ3hELFNBQVMsS0FBUDtBQUNBLFdBQUssaUJBQWlCLEdBQUc7QUFBQSxJQUMzQjtBQUFBLEVBQ0Y7QUFDRjtBQUU0QiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2FuZ3VsYXIvcGFuZWwvbWV0cmljc19wYW5lbF9jdHJsLnRzPzY4NTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBVbnN1YnNjcmliYWJsZSB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQge1xuICBEYXRhRnJhbWUsXG4gIERhdGFRdWVyeVJlc3BvbnNlLFxuICBEYXRhU291cmNlQXBpLFxuICBMZWdhY3lSZXNwb25zZURhdGEsXG4gIExvYWRpbmdTdGF0ZSxcbiAgUGFuZWxEYXRhLFxuICBQYW5lbEV2ZW50cyxcbiAgVGltZVJhbmdlLFxuICB0b0RhdGFGcmFtZURUTyxcbiAgdG9MZWdhY3lSZXNwb25zZURhdGEsXG59IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgUGFuZWxDdHJsIH0gZnJvbSAnYXBwL2FuZ3VsYXIvcGFuZWwvcGFuZWxfY3RybCc7XG5pbXBvcnQgeyBDb250ZXh0U3J2IH0gZnJvbSAnYXBwL2NvcmUvc2VydmljZXMvY29udGV4dF9zcnYnO1xuaW1wb3J0IHsgUGFuZWxNb2RlbCB9IGZyb20gJ2FwcC9mZWF0dXJlcy9kYXNoYm9hcmQvc3RhdGUnO1xuaW1wb3J0IHsgYXBwbHlQYW5lbFRpbWVPdmVycmlkZXMgfSBmcm9tICdhcHAvZmVhdHVyZXMvZGFzaGJvYXJkL3V0aWxzL3BhbmVsJztcblxuaW1wb3J0IHsgUGFuZWxRdWVyeVJ1bm5lciB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3F1ZXJ5L3N0YXRlL1BhbmVsUXVlcnlSdW5uZXInO1xuXG5jbGFzcyBNZXRyaWNzUGFuZWxDdHJsIGV4dGVuZHMgUGFuZWxDdHJsIHtcbiAgZGVjbGFyZSBkYXRhc291cmNlOiBEYXRhU291cmNlQXBpO1xuICBkZWNsYXJlIHJhbmdlOiBUaW1lUmFuZ2U7XG5cbiAgY29udGV4dFNydjogQ29udGV4dFNydjtcbiAgZGF0YXNvdXJjZVNydjogYW55O1xuICB0aW1lU3J2OiBhbnk7XG4gIHRlbXBsYXRlU3J2OiBhbnk7XG4gIGludGVydmFsOiBhbnk7XG4gIGludGVydmFsTXM6IGFueTtcbiAgcmVzb2x1dGlvbjogYW55O1xuICB0aW1lSW5mbz86IHN0cmluZztcbiAgc2tpcERhdGFPbkluaXQgPSBmYWxzZTtcbiAgZGF0YUxpc3Q6IExlZ2FjeVJlc3BvbnNlRGF0YVtdID0gW107XG4gIHF1ZXJ5U3Vic2NyaXB0aW9uPzogVW5zdWJzY3JpYmFibGUgfCBudWxsO1xuICB1c2VEYXRhRnJhbWVzID0gZmFsc2U7XG4gIHBhbmVsRGF0YT86IFBhbmVsRGF0YTtcblxuICBjb25zdHJ1Y3Rvcigkc2NvcGU6IGFueSwgJGluamVjdG9yOiBhbnkpIHtcbiAgICBzdXBlcigkc2NvcGUsICRpbmplY3Rvcik7XG5cbiAgICB0aGlzLmNvbnRleHRTcnYgPSAkaW5qZWN0b3IuZ2V0KCdjb250ZXh0U3J2Jyk7XG4gICAgdGhpcy5kYXRhc291cmNlU3J2ID0gJGluamVjdG9yLmdldCgnZGF0YXNvdXJjZVNydicpO1xuICAgIHRoaXMudGltZVNydiA9ICRpbmplY3Rvci5nZXQoJ3RpbWVTcnYnKTtcbiAgICB0aGlzLnRlbXBsYXRlU3J2ID0gJGluamVjdG9yLmdldCgndGVtcGxhdGVTcnYnKTtcbiAgICB0aGlzLnBhbmVsLmRhdGFzb3VyY2UgPSB0aGlzLnBhbmVsLmRhdGFzb3VyY2UgfHwgbnVsbDtcblxuICAgIHRoaXMuZXZlbnRzLm9uKFBhbmVsRXZlbnRzLnJlZnJlc2gsIHRoaXMub25NZXRyaWNzUGFuZWxSZWZyZXNoLmJpbmQodGhpcykpO1xuICAgIHRoaXMuZXZlbnRzLm9uKFBhbmVsRXZlbnRzLnBhbmVsVGVhcmRvd24sIHRoaXMub25QYW5lbFRlYXJEb3duLmJpbmQodGhpcykpO1xuICAgIHRoaXMuZXZlbnRzLm9uKFBhbmVsRXZlbnRzLmNvbXBvbmVudERpZE1vdW50LCB0aGlzLm9uTWV0cmljc1BhbmVsTW91bnRlZC5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHByaXZhdGUgb25NZXRyaWNzUGFuZWxNb3VudGVkKCkge1xuICAgIGNvbnN0IHF1ZXJ5UnVubmVyID0gdGhpcy5wYW5lbC5nZXRRdWVyeVJ1bm5lcigpIGFzIFBhbmVsUXVlcnlSdW5uZXI7XG4gICAgdGhpcy5xdWVyeVN1YnNjcmlwdGlvbiA9IHF1ZXJ5UnVubmVyXG4gICAgICAuZ2V0RGF0YSh7IHdpdGhUcmFuc2Zvcm1zOiB0cnVlLCB3aXRoRmllbGRDb25maWc6IHRydWUgfSlcbiAgICAgIC5zdWJzY3JpYmUodGhpcy5wYW5lbERhdGFPYnNlcnZlcik7XG4gIH1cblxuICBwcml2YXRlIG9uUGFuZWxUZWFyRG93bigpIHtcbiAgICBpZiAodGhpcy5xdWVyeVN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5xdWVyeVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgdGhpcy5xdWVyeVN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvbk1ldHJpY3NQYW5lbFJlZnJlc2goKSB7XG4gICAgLy8gaWdub3JlIGZldGNoaW5nIGRhdGEgaWYgYW5vdGhlciBwYW5lbCBpcyBpbiBmdWxsc2NyZWVuXG4gICAgaWYgKHRoaXMub3RoZXJQYW5lbEluRnVsbHNjcmVlbk1vZGUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlmIHdlIGhhdmUgc25hcHNob3QgZGF0YSB1c2UgdGhhdFxuICAgIGlmICh0aGlzLnBhbmVsLnNuYXBzaG90RGF0YSkge1xuICAgICAgdGhpcy51cGRhdGVUaW1lUmFuZ2UoKTtcbiAgICAgIGxldCBkYXRhID0gdGhpcy5wYW5lbC5zbmFwc2hvdERhdGE7XG4gICAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICBpZiAoIWlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgZGF0YSA9IGRhdGEuZGF0YTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wYW5lbERhdGEgPSB7XG4gICAgICAgIHN0YXRlOiBMb2FkaW5nU3RhdGUuRG9uZSxcbiAgICAgICAgc2VyaWVzOiBkYXRhLFxuICAgICAgICB0aW1lUmFuZ2U6IHRoaXMucmFuZ2UsXG4gICAgICB9O1xuXG4gICAgICAvLyBEZWZlciBwYW5lbCByZW5kZXJpbmcgdGlsbCB0aGUgbmV4dCBkaWdlc3QgY3ljbGUuXG4gICAgICAvLyBGb3Igc29tZSByZWFzb24gc25hcHNob3QgcGFuZWxzIGRvbid0IGluaXQgYXQgdGhpcyB0aW1lLCBzbyB0aGlzIGhlbHBzIHRvIGF2b2lkIHJlbmRlcmluZyBpc3N1ZXMuXG4gICAgICByZXR1cm4gdGhpcy4kdGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoUGFuZWxFdmVudHMuZGF0YVNuYXBzaG90TG9hZCwgZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBjbGVhciBsb2FkaW5nL2Vycm9yIHN0YXRlXG4gICAgZGVsZXRlIHRoaXMuZXJyb3I7XG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcblxuICAgIC8vIGxvYWQgZGF0YXNvdXJjZSBzZXJ2aWNlXG4gICAgcmV0dXJuIHRoaXMuZGF0YXNvdXJjZVNydlxuICAgICAgLmdldCh0aGlzLnBhbmVsLmRhdGFzb3VyY2UsIHRoaXMucGFuZWwuc2NvcGVkVmFycylcbiAgICAgIC50aGVuKHRoaXMuaXNzdWVRdWVyaWVzLmJpbmQodGhpcykpXG4gICAgICAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgIHRoaXMucHJvY2Vzc0RhdGFFcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcm9jZXNzRGF0YUVycm9yKGVycjogYW55KSB7XG4gICAgLy8gaWYgY2FuY2VsZWQgIGtlZXAgbG9hZGluZyBzZXQgdG8gdHJ1ZVxuICAgIGlmIChlcnIuY2FuY2VsbGVkKSB7XG4gICAgICBjb25zb2xlLmxvZygnUGFuZWwgcmVxdWVzdCBjYW5jZWxsZWQnLCBlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZXJyb3IgPSBlcnIubWVzc2FnZSB8fCAnUmVxdWVzdCBFcnJvcic7XG5cbiAgICBpZiAoZXJyLmRhdGEpIHtcbiAgICAgIGlmIChlcnIuZGF0YS5tZXNzYWdlKSB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnIuZGF0YS5tZXNzYWdlO1xuICAgICAgfSBlbHNlIGlmIChlcnIuZGF0YS5lcnJvcikge1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyLmRhdGEuZXJyb3I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hbmd1bGFyRGlydHlDaGVjaygpO1xuICB9XG5cbiAgYW5ndWxhckRpcnR5Q2hlY2soKSB7XG4gICAgaWYgKCF0aGlzLiRzY29wZS4kcm9vdC4kJHBoYXNlKSB7XG4gICAgICB0aGlzLiRzY29wZS4kZGlnZXN0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlcyB0aGUgcmVzcG9uc2Ugd2l0aCBpbmZvcm1hdGlvbiBmcm9tIHRoZSBzdHJlYW1cbiAgcGFuZWxEYXRhT2JzZXJ2ZXIgPSB7XG4gICAgbmV4dDogKGRhdGE6IFBhbmVsRGF0YSkgPT4ge1xuICAgICAgdGhpcy5wYW5lbERhdGEgPSBkYXRhO1xuXG4gICAgICBpZiAoZGF0YS5zdGF0ZSA9PT0gTG9hZGluZ1N0YXRlLkVycm9yKSB7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb2Nlc3NEYXRhRXJyb3IoZGF0YS5lcnJvcik7XG4gICAgICB9XG5cbiAgICAgIC8vIElnbm9yZSBkYXRhIGluIGxvYWRpbmcgc3RhdGVcbiAgICAgIGlmIChkYXRhLnN0YXRlID09PSBMb2FkaW5nU3RhdGUuTG9hZGluZykge1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmFuZ3VsYXJEaXJ0eUNoZWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEucmVxdWVzdCkge1xuICAgICAgICBjb25zdCB7IHRpbWVJbmZvIH0gPSBkYXRhLnJlcXVlc3Q7XG4gICAgICAgIGlmICh0aW1lSW5mbykge1xuICAgICAgICAgIHRoaXMudGltZUluZm8gPSB0aW1lSW5mbztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS50aW1lUmFuZ2UpIHtcbiAgICAgICAgdGhpcy5yYW5nZSA9IGRhdGEudGltZVJhbmdlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy51c2VEYXRhRnJhbWVzKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRGF0YUZyYW1lcyhkYXRhLnNlcmllcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNYWtlIHRoZSByZXN1bHRzIGxvb2sgYXMgaWYgdGhleSBjYW1lIGRpcmVjdGx5IGZyb20gYSA8Ni4yIGRhdGFzb3VyY2UgcmVxdWVzdFxuICAgICAgICBjb25zdCBsZWdhY3kgPSBkYXRhLnNlcmllcy5tYXAoKHYpID0+IHRvTGVnYWN5UmVzcG9uc2VEYXRhKHYpKTtcbiAgICAgICAgdGhpcy5oYW5kbGVRdWVyeVJlc3VsdCh7IGRhdGE6IGxlZ2FjeSB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hbmd1bGFyRGlydHlDaGVjaygpO1xuICAgIH0sXG4gIH07XG5cbiAgdXBkYXRlVGltZVJhbmdlKGRhdGFzb3VyY2U/OiBEYXRhU291cmNlQXBpKSB7XG4gICAgdGhpcy5kYXRhc291cmNlID0gZGF0YXNvdXJjZSB8fCB0aGlzLmRhdGFzb3VyY2U7XG4gICAgdGhpcy5yYW5nZSA9IHRoaXMudGltZVNydi50aW1lUmFuZ2UoKTtcblxuICAgIGNvbnN0IG5ld1RpbWVEYXRhID0gYXBwbHlQYW5lbFRpbWVPdmVycmlkZXModGhpcy5wYW5lbCwgdGhpcy5yYW5nZSk7XG4gICAgdGhpcy50aW1lSW5mbyA9IG5ld1RpbWVEYXRhLnRpbWVJbmZvO1xuICAgIHRoaXMucmFuZ2UgPSBuZXdUaW1lRGF0YS50aW1lUmFuZ2U7XG4gIH1cblxuICBpc3N1ZVF1ZXJpZXMoZGF0YXNvdXJjZTogRGF0YVNvdXJjZUFwaSkge1xuICAgIHRoaXMudXBkYXRlVGltZVJhbmdlKGRhdGFzb3VyY2UpO1xuXG4gICAgdGhpcy5kYXRhc291cmNlID0gZGF0YXNvdXJjZTtcblxuICAgIGNvbnN0IHBhbmVsID0gdGhpcy5wYW5lbCBhcyBQYW5lbE1vZGVsO1xuICAgIGNvbnN0IHF1ZXJ5UnVubmVyID0gcGFuZWwuZ2V0UXVlcnlSdW5uZXIoKTtcblxuICAgIHJldHVybiBxdWVyeVJ1bm5lci5ydW4oe1xuICAgICAgZGF0YXNvdXJjZTogcGFuZWwuZGF0YXNvdXJjZSxcbiAgICAgIHF1ZXJpZXM6IHBhbmVsLnRhcmdldHMsXG4gICAgICBwYW5lbElkOiBwYW5lbC5pZCxcbiAgICAgIGRhc2hib2FyZFVJRDogdGhpcy5kYXNoYm9hcmQudWlkLFxuICAgICAgdGltZXpvbmU6IHRoaXMuZGFzaGJvYXJkLmdldFRpbWV6b25lKCksXG4gICAgICB0aW1lSW5mbzogdGhpcy50aW1lSW5mbyxcbiAgICAgIHRpbWVSYW5nZTogdGhpcy5yYW5nZSxcbiAgICAgIG1heERhdGFQb2ludHM6IHBhbmVsLm1heERhdGFQb2ludHMgfHwgdGhpcy53aWR0aCxcbiAgICAgIG1pbkludGVydmFsOiBwYW5lbC5pbnRlcnZhbCxcbiAgICAgIHB1YmxpY0Rhc2hib2FyZEFjY2Vzc1Rva2VuOiB0aGlzLmRhc2hib2FyZC5tZXRhLnB1YmxpY0Rhc2hib2FyZEFjY2Vzc1Rva2VuLFxuICAgICAgc2NvcGVkVmFyczogcGFuZWwuc2NvcGVkVmFycyxcbiAgICAgIGNhY2hlVGltZW91dDogcGFuZWwuY2FjaGVUaW1lb3V0LFxuICAgICAgcXVlcnlDYWNoaW5nVFRMOiBwYW5lbC5xdWVyeUNhY2hpbmdUVEwsXG4gICAgICB0cmFuc2Zvcm1hdGlvbnM6IHBhbmVsLnRyYW5zZm9ybWF0aW9ucyxcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZURhdGFGcmFtZXMoZGF0YTogRGF0YUZyYW1lW10pIHtcbiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLmRhc2hib2FyZCAmJiB0aGlzLmRhc2hib2FyZC5zbmFwc2hvdCkge1xuICAgICAgdGhpcy5wYW5lbC5zbmFwc2hvdERhdGEgPSBkYXRhLm1hcCgoZnJhbWUpID0+IHRvRGF0YUZyYW1lRFRPKGZyYW1lKSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoUGFuZWxFdmVudHMuZGF0YUZyYW1lc1JlY2VpdmVkLCBkYXRhKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMucHJvY2Vzc0RhdGFFcnJvcihlcnIpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVF1ZXJ5UmVzdWx0KHJlc3VsdDogRGF0YVF1ZXJ5UmVzcG9uc2UpIHtcbiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLmRhc2hib2FyZC5zbmFwc2hvdCkge1xuICAgICAgdGhpcy5wYW5lbC5zbmFwc2hvdERhdGEgPSByZXN1bHQuZGF0YTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LmRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEYXRhIHNvdXJjZSBxdWVyeSByZXN1bHQgaW52YWxpZCwgbWlzc2luZyBkYXRhIGZpZWxkOicsIHJlc3VsdCk7XG4gICAgICByZXN1bHQgPSB7IGRhdGE6IFtdIH07XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoUGFuZWxFdmVudHMuZGF0YVJlY2VpdmVkLCByZXN1bHQuZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLnByb2Nlc3NEYXRhRXJyb3IoZXJyKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgTWV0cmljc1BhbmVsQ3RybCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/angular/panel/metrics_panel_ctrl.ts\n");

/***/ }),

/***/ "./public/app/angular/panel/panel_ctrl.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PanelCtrl: () => (/* binding */ PanelCtrl)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/EventBus.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/legacyEvents.ts\");\n/* harmony import */ var app_angular_AngularLocationWrapper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/angular/AngularLocationWrapper.ts\");\n/* harmony import */ var app_core_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/config.ts\");\n/* harmony import */ var app_core_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/core/core.ts\");\n\n\n\n\n\n\nclass PanelCtrl {\n  constructor($scope, $injector) {\n    this.pluginName = \"\";\n    this.pluginId = \"\";\n    this.editModeInitiated = false;\n    this.loading = false;\n    // overriden from react\n    this.onPluginTypeChange = (plugin) => {\n    };\n    this.panel = this.panel ?? $scope.$parent.panel;\n    this.dashboard = this.dashboard ?? $scope.$parent.dashboard;\n    this.$injector = $injector;\n    this.$scope = $scope;\n    this.$timeout = $injector.get(\"$timeout\");\n    this.editorTabs = [];\n    this.$location = new app_angular_AngularLocationWrapper__WEBPACK_IMPORTED_MODULE_1__.AngularLocationWrapper();\n    this.events = new _grafana_data__WEBPACK_IMPORTED_MODULE_4__.EventBusSrv();\n    this.timing = {};\n    const plugin = app_core_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].panels[this.panel.type];\n    if (plugin) {\n      this.pluginId = plugin.id;\n      this.pluginName = plugin.name;\n    }\n    $scope.$on(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.componentDidMount.name, () => this.panelDidMount());\n  }\n  panelDidMount() {\n    this.events.emit(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.componentDidMount);\n    this.events.emit(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.initialized);\n    this.dashboard.panelInitialized(this.panel);\n  }\n  renderingCompleted() {\n    app_core_core__WEBPACK_IMPORTED_MODULE_3__.profiler.renderingCompleted();\n  }\n  refresh() {\n    this.panel.refresh();\n  }\n  publishAppEvent(event, payload) {\n    this.$scope.$root.appEvent(event, payload);\n  }\n  initEditMode() {\n    if (!this.editModeInitiated) {\n      this.editModeInitiated = true;\n      this.events.emit(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.editModeInitialized);\n    }\n  }\n  addEditorTab(title, directiveFn, index, icon) {\n    const editorTab = { title, directiveFn, icon };\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isString)(directiveFn)) {\n      editorTab.directiveFn = () => {\n        return { templateUrl: directiveFn };\n      };\n    }\n    if (index) {\n      this.editorTabs.splice(index, 0, editorTab);\n    } else {\n      this.editorTabs.push(editorTab);\n    }\n  }\n  getExtendedMenu() {\n    const menu = [];\n    this.events.emit(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.initPanelActions, menu);\n    return menu;\n  }\n  // Override in sub-class to add items before extended menu\n  async getAdditionalMenuItems() {\n    return [];\n  }\n  otherPanelInFullscreenMode() {\n    return this.dashboard.otherPanelInFullscreen(this.panel);\n  }\n  render(payload) {\n    this.events.emit(_grafana_data__WEBPACK_IMPORTED_MODULE_5__.PanelEvents.render, payload);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2FuZ3VsYXIvcGFuZWwvcGFuZWxfY3RybC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFDeUI7QUFTbEI7QUFDZ0M7QUFDcEI7QUFDTTtBQUlsQixNQUFNLFVBQVU7QUFBQSxFQW1CckIsWUFBWSxRQUFhLFdBQWtDO0FBZjNELHNCQUFhO0FBQ2Isb0JBQVc7QUFLWCw2QkFBb0I7QUFLcEIsbUJBQVU7QUFxRlY7QUFBQSw4QkFBcUIsQ0FBQyxXQUE0QjtBQUFBLElBQUM7QUFoRmpELFNBQUssUUFBUSxLQUFLLFNBQVMsT0FBTyxRQUFRO0FBQzFDLFNBQUssWUFBWSxLQUFLLGFBQWEsT0FBTyxRQUFRO0FBQ2xELFNBQUssWUFBWTtBQUNqQixTQUFLLFNBQVM7QUFDZCxTQUFLLFdBQVcsVUFBVSxJQUFJLFVBQVU7QUFDeEMsU0FBSyxhQUFhLENBQUM7QUFDbkIsU0FBSyxZQUFZLElBQUksc0ZBQXNCLENBQUM7QUFDNUMsU0FBSyxTQUFTLElBQUksc0RBQVcsQ0FBQztBQUM5QixTQUFLLFNBQVMsQ0FBQztBQUVmLFVBQU0sU0FBUyx1REFBTSxDQUFDLE9BQU8sS0FBSyxNQUFNLElBQUk7QUFDNUMsUUFBSSxRQUFRO0FBQ1YsV0FBSyxXQUFXLE9BQU87QUFDdkIsV0FBSyxhQUFhLE9BQU87QUFBQSxJQUMzQjtBQUVBLFdBQU8sSUFBSSxzREFBVyxDQUFDLGtCQUFrQixNQUFNLE1BQU0sS0FBSyxjQUFjLENBQUM7QUFBQSxFQUMzRTtBQUFBLEVBRUEsZ0JBQWdCO0FBQ2QsU0FBSyxPQUFPLEtBQUssc0RBQVcsQ0FBQyxpQkFBaUI7QUFDOUMsU0FBSyxPQUFPLEtBQUssc0RBQVcsQ0FBQyxXQUFXO0FBQ3hDLFNBQUssVUFBVSxpQkFBaUIsS0FBSyxLQUFLO0FBQUEsRUFDNUM7QUFBQSxFQUVBLHFCQUFxQjtBQUNuQix1REFBUSxDQUFDLG1CQUFtQjtBQUFBLEVBQzlCO0FBQUEsRUFFQSxVQUFVO0FBQ1IsU0FBSyxNQUFNLFFBQVE7QUFBQSxFQUNyQjtBQUFBLEVBRUEsZ0JBQW1CLE9BQW9CLFNBQWE7QUFDbEQsU0FBSyxPQUFPLE1BQU0sU0FBUyxPQUFPLE9BQU87QUFBQSxFQUMzQztBQUFBLEVBRUEsZUFBZTtBQUNiLFFBQUksQ0FBQyxLQUFLLG1CQUFtQjtBQUMzQixXQUFLLG9CQUFvQjtBQUN6QixXQUFLLE9BQU8sS0FBSyxzREFBVyxDQUFDLG1CQUFtQjtBQUFBLElBQ2xEO0FBQUEsRUFDRjtBQUFBLEVBRUEsYUFBYSxPQUFlLGFBQWtCLE9BQWdCLE1BQVk7QUFDeEUsVUFBTSxZQUFZLEVBQUUsT0FBTyxhQUFhLEtBQUs7QUFFN0MsUUFBSSxnREFBUSxDQUFDLFdBQVcsR0FBRztBQUN6QixnQkFBVSxjQUFjLE1BQU07QUFDNUIsZUFBTyxFQUFFLGFBQWEsWUFBWTtBQUFBLE1BQ3BDO0FBQUEsSUFDRjtBQUVBLFFBQUksT0FBTztBQUNULFdBQUssV0FBVyxPQUFPLE9BQU8sR0FBRyxTQUFTO0FBQUEsSUFDNUMsT0FBTztBQUNMLFdBQUssV0FBVyxLQUFLLFNBQVM7QUFBQSxJQUNoQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLGtCQUFrQjtBQUNoQixVQUFNLE9BQStCLENBQUM7QUFDdEMsU0FBSyxPQUFPLEtBQUssc0RBQVcsQ0FBQyxrQkFBa0IsSUFBSTtBQUNuRCxXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUEsRUFHQSxNQUFNLHlCQUF5QztBQUM3QyxXQUFPLENBQUM7QUFBQSxFQUNWO0FBQUEsRUFFQSw2QkFBNkI7QUFDM0IsV0FBTyxLQUFLLFVBQVUsdUJBQXVCLEtBQUssS0FBSztBQUFBLEVBQ3pEO0FBQUEsRUFFQSxPQUFPLFNBQWU7QUFDcEIsU0FBSyxPQUFPLEtBQUssc0RBQVcsQ0FBQyxRQUFRLE9BQU87QUFBQSxFQUM5QztBQUlGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvYW5ndWxhci9wYW5lbC9wYW5lbF9jdHJsLnRzPzFkNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXV0byB9IGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICBBcHBFdmVudCxcbiAgUGFuZWxFdmVudHMsXG4gIFBhbmVsUGx1Z2luTWV0YSxcbiAgQW5ndWxhclBhbmVsTWVudUl0ZW0sXG4gIEV2ZW50QnVzRXh0ZW5kZWQsXG4gIEV2ZW50QnVzU3J2LFxufSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEFuZ3VsYXJMb2NhdGlvbldyYXBwZXIgfSBmcm9tICdhcHAvYW5ndWxhci9Bbmd1bGFyTG9jYXRpb25XcmFwcGVyJztcbmltcG9ydCBjb25maWcgZnJvbSAnYXBwL2NvcmUvY29uZmlnJztcbmltcG9ydCB7IHByb2ZpbGVyIH0gZnJvbSAnYXBwL2NvcmUvY29yZSc7XG5cbmltcG9ydCB7IERhc2hib2FyZE1vZGVsIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvZGFzaGJvYXJkL3N0YXRlJztcblxuZXhwb3J0IGNsYXNzIFBhbmVsQ3RybCB7XG4gIHBhbmVsOiBhbnk7XG4gIGVycm9yOiBhbnk7XG4gIGRlY2xhcmUgZGFzaGJvYXJkOiBEYXNoYm9hcmRNb2RlbDtcbiAgcGx1Z2luTmFtZSA9ICcnO1xuICBwbHVnaW5JZCA9ICcnO1xuICBlZGl0b3JUYWJzOiBhbnk7XG4gICRzY29wZTogYW55O1xuICAkaW5qZWN0b3I6IGF1dG8uSUluamVjdG9yU2VydmljZTtcbiAgJHRpbWVvdXQ6IGFueTtcbiAgZWRpdE1vZGVJbml0aWF0ZWQgPSBmYWxzZTtcbiAgZGVjbGFyZSBoZWlnaHQ6IG51bWJlcjtcbiAgZGVjbGFyZSB3aWR0aDogbnVtYmVyO1xuICBjb250YWluZXJIZWlnaHQ6IGFueTtcbiAgZXZlbnRzOiBFdmVudEJ1c0V4dGVuZGVkO1xuICBsb2FkaW5nID0gZmFsc2U7XG4gIHRpbWluZzogYW55O1xuICAkbG9jYXRpb246IEFuZ3VsYXJMb2NhdGlvbldyYXBwZXI7XG5cbiAgY29uc3RydWN0b3IoJHNjb3BlOiBhbnksICRpbmplY3RvcjogYXV0by5JSW5qZWN0b3JTZXJ2aWNlKSB7XG4gICAgdGhpcy5wYW5lbCA9IHRoaXMucGFuZWwgPz8gJHNjb3BlLiRwYXJlbnQucGFuZWw7XG4gICAgdGhpcy5kYXNoYm9hcmQgPSB0aGlzLmRhc2hib2FyZCA/PyAkc2NvcGUuJHBhcmVudC5kYXNoYm9hcmQ7XG4gICAgdGhpcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgdGhpcy4kdGltZW91dCA9ICRpbmplY3Rvci5nZXQoJyR0aW1lb3V0Jyk7XG4gICAgdGhpcy5lZGl0b3JUYWJzID0gW107XG4gICAgdGhpcy4kbG9jYXRpb24gPSBuZXcgQW5ndWxhckxvY2F0aW9uV3JhcHBlcigpO1xuICAgIHRoaXMuZXZlbnRzID0gbmV3IEV2ZW50QnVzU3J2KCk7XG4gICAgdGhpcy50aW1pbmcgPSB7fTsgLy8gbm90IHVzZWQgYnV0IGhlcmUgdG8gbm90IGJyZWFrIHBsdWdpbnNcblxuICAgIGNvbnN0IHBsdWdpbiA9IGNvbmZpZy5wYW5lbHNbdGhpcy5wYW5lbC50eXBlXTtcbiAgICBpZiAocGx1Z2luKSB7XG4gICAgICB0aGlzLnBsdWdpbklkID0gcGx1Z2luLmlkO1xuICAgICAgdGhpcy5wbHVnaW5OYW1lID0gcGx1Z2luLm5hbWU7XG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbihQYW5lbEV2ZW50cy5jb21wb25lbnREaWRNb3VudC5uYW1lLCAoKSA9PiB0aGlzLnBhbmVsRGlkTW91bnQoKSk7XG4gIH1cblxuICBwYW5lbERpZE1vdW50KCkge1xuICAgIHRoaXMuZXZlbnRzLmVtaXQoUGFuZWxFdmVudHMuY29tcG9uZW50RGlkTW91bnQpO1xuICAgIHRoaXMuZXZlbnRzLmVtaXQoUGFuZWxFdmVudHMuaW5pdGlhbGl6ZWQpO1xuICAgIHRoaXMuZGFzaGJvYXJkLnBhbmVsSW5pdGlhbGl6ZWQodGhpcy5wYW5lbCk7XG4gIH1cblxuICByZW5kZXJpbmdDb21wbGV0ZWQoKSB7XG4gICAgcHJvZmlsZXIucmVuZGVyaW5nQ29tcGxldGVkKCk7XG4gIH1cblxuICByZWZyZXNoKCkge1xuICAgIHRoaXMucGFuZWwucmVmcmVzaCgpO1xuICB9XG5cbiAgcHVibGlzaEFwcEV2ZW50PFQ+KGV2ZW50OiBBcHBFdmVudDxUPiwgcGF5bG9hZD86IFQpIHtcbiAgICB0aGlzLiRzY29wZS4kcm9vdC5hcHBFdmVudChldmVudCwgcGF5bG9hZCk7XG4gIH1cblxuICBpbml0RWRpdE1vZGUoKSB7XG4gICAgaWYgKCF0aGlzLmVkaXRNb2RlSW5pdGlhdGVkKSB7XG4gICAgICB0aGlzLmVkaXRNb2RlSW5pdGlhdGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoUGFuZWxFdmVudHMuZWRpdE1vZGVJbml0aWFsaXplZCk7XG4gICAgfVxuICB9XG5cbiAgYWRkRWRpdG9yVGFiKHRpdGxlOiBzdHJpbmcsIGRpcmVjdGl2ZUZuOiBhbnksIGluZGV4PzogbnVtYmVyLCBpY29uPzogYW55KSB7XG4gICAgY29uc3QgZWRpdG9yVGFiID0geyB0aXRsZSwgZGlyZWN0aXZlRm4sIGljb24gfTtcblxuICAgIGlmIChpc1N0cmluZyhkaXJlY3RpdmVGbikpIHtcbiAgICAgIGVkaXRvclRhYi5kaXJlY3RpdmVGbiA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHsgdGVtcGxhdGVVcmw6IGRpcmVjdGl2ZUZuIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChpbmRleCkge1xuICAgICAgdGhpcy5lZGl0b3JUYWJzLnNwbGljZShpbmRleCwgMCwgZWRpdG9yVGFiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lZGl0b3JUYWJzLnB1c2goZWRpdG9yVGFiKTtcbiAgICB9XG4gIH1cblxuICBnZXRFeHRlbmRlZE1lbnUoKSB7XG4gICAgY29uc3QgbWVudTogQW5ndWxhclBhbmVsTWVudUl0ZW1bXSA9IFtdO1xuICAgIHRoaXMuZXZlbnRzLmVtaXQoUGFuZWxFdmVudHMuaW5pdFBhbmVsQWN0aW9ucywgbWVudSk7XG4gICAgcmV0dXJuIG1lbnU7XG4gIH1cblxuICAvLyBPdmVycmlkZSBpbiBzdWItY2xhc3MgdG8gYWRkIGl0ZW1zIGJlZm9yZSBleHRlbmRlZCBtZW51XG4gIGFzeW5jIGdldEFkZGl0aW9uYWxNZW51SXRlbXMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIG90aGVyUGFuZWxJbkZ1bGxzY3JlZW5Nb2RlKCkge1xuICAgIHJldHVybiB0aGlzLmRhc2hib2FyZC5vdGhlclBhbmVsSW5GdWxsc2NyZWVuKHRoaXMucGFuZWwpO1xuICB9XG5cbiAgcmVuZGVyKHBheWxvYWQ/OiBhbnkpIHtcbiAgICB0aGlzLmV2ZW50cy5lbWl0KFBhbmVsRXZlbnRzLnJlbmRlciwgcGF5bG9hZCk7XG4gIH1cblxuICAvLyBvdmVycmlkZW4gZnJvbSByZWFjdFxuICBvblBsdWdpblR5cGVDaGFuZ2UgPSAocGx1Z2luOiBQYW5lbFBsdWdpbk1ldGEpID0+IHt9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/angular/panel/panel_ctrl.ts\n");

/***/ }),

/***/ "./public/app/angular/panel/query_ctrl.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryCtrl: () => (/* binding */ QueryCtrl)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass QueryCtrl {\n  constructor($scope, $injector) {\n    this.$scope = $scope;\n    this.$injector = $injector;\n    this.panelCtrl = this.panelCtrl ?? $scope.ctrl.panelCtrl;\n    this.target = this.target ?? $scope.ctrl.target;\n    this.datasource = this.datasource ?? $scope.ctrl.datasource;\n    this.panel = this.panelCtrl?.panel ?? $scope.ctrl.panelCtrl.panel;\n    this.isLastQuery = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.indexOf)(this.panel.targets, this.target) === this.panel.targets.length - 1;\n  }\n  refresh() {\n    this.panelCtrl.refresh();\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2FuZ3VsYXIvcGFuZWwvcXVlcnlfY3RybC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ3dCO0FBRWpCLE1BQU0sVUFBbUI7QUFBQSxFQVM5QixZQUNTLFFBQ0EsV0FDUDtBQUZPO0FBQ0E7QUFFUCxTQUFLLFlBQVksS0FBSyxhQUFhLE9BQU8sS0FBSztBQUMvQyxTQUFLLFNBQVMsS0FBSyxVQUFVLE9BQU8sS0FBSztBQUN6QyxTQUFLLGFBQWEsS0FBSyxjQUFjLE9BQU8sS0FBSztBQUNqRCxTQUFLLFFBQVEsS0FBSyxXQUFXLFNBQVMsT0FBTyxLQUFLLFVBQVU7QUFDNUQsU0FBSyxjQUFjLCtDQUFPLENBQUMsS0FBSyxNQUFNLFNBQVMsS0FBSyxNQUFNLE1BQU0sS0FBSyxNQUFNLFFBQVEsU0FBUztBQUFBLEVBQzlGO0FBQUEsRUFFQSxVQUFVO0FBQ1IsU0FBSyxVQUFVLFFBQVE7QUFBQSxFQUN6QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvYW5ndWxhci9wYW5lbC9xdWVyeV9jdHJsLnRzP2Q2ZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXV0byB9IGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgaW5kZXhPZiB9IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBjbGFzcyBRdWVyeUN0cmw8VCA9IGFueT4ge1xuICB0YXJnZXQhOiBUO1xuICBkYXRhc291cmNlITogYW55O1xuICBwYW5lbEN0cmwhOiBhbnk7XG4gIHBhbmVsOiBhbnk7XG4gIGhhc1Jhd01vZGUhOiBib29sZWFuO1xuICBlcnJvcj86IHN0cmluZyB8IG51bGw7XG4gIGlzTGFzdFF1ZXJ5OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyAkc2NvcGU6IGFueSxcbiAgICBwdWJsaWMgJGluamVjdG9yOiBhdXRvLklJbmplY3RvclNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5wYW5lbEN0cmwgPSB0aGlzLnBhbmVsQ3RybCA/PyAkc2NvcGUuY3RybC5wYW5lbEN0cmw7XG4gICAgdGhpcy50YXJnZXQgPSB0aGlzLnRhcmdldCA/PyAkc2NvcGUuY3RybC50YXJnZXQ7XG4gICAgdGhpcy5kYXRhc291cmNlID0gdGhpcy5kYXRhc291cmNlID8/ICRzY29wZS5jdHJsLmRhdGFzb3VyY2U7XG4gICAgdGhpcy5wYW5lbCA9IHRoaXMucGFuZWxDdHJsPy5wYW5lbCA/PyAkc2NvcGUuY3RybC5wYW5lbEN0cmwucGFuZWw7XG4gICAgdGhpcy5pc0xhc3RRdWVyeSA9IGluZGV4T2YodGhpcy5wYW5lbC50YXJnZXRzLCB0aGlzLnRhcmdldCkgPT09IHRoaXMucGFuZWwudGFyZ2V0cy5sZW5ndGggLSAxO1xuICB9XG5cbiAgcmVmcmVzaCgpIHtcbiAgICB0aGlzLnBhbmVsQ3RybC5yZWZyZXNoKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/angular/panel/query_ctrl.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/table-old/column_options.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ColumnOptionsCtrl: () => (/* binding */ ColumnOptionsCtrl),\n/* harmony export */   columnOptionsTab: () => (/* binding */ columnOptionsTab)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/valueFormats/valueFormats.ts\");\n\n\n\nconst _ColumnOptionsCtrl = class {\n  constructor($scope) {\n    $scope.editor = this;\n    this.activeStyleIndex = 0;\n    this.panelCtrl = $scope.ctrl;\n    this.panel = this.panelCtrl.panel;\n    this.unitFormats = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_1__.getValueFormats)();\n    this.colorModes = [\n      { text: \"Disabled\", value: null },\n      { text: \"Cell\", value: \"cell\" },\n      { text: \"Value\", value: \"value\" },\n      { text: \"Row\", value: \"row\" }\n    ];\n    this.columnTypes = [\n      { text: \"Number\", value: \"number\" },\n      { text: \"String\", value: \"string\" },\n      { text: \"Date\", value: \"date\" },\n      { text: \"Hidden\", value: \"hidden\" }\n    ];\n    this.fontSizes = [\"80%\", \"90%\", \"100%\", \"110%\", \"120%\", \"130%\", \"150%\", \"160%\", \"180%\", \"200%\", \"220%\", \"250%\"];\n    this.dateFormats = [\n      { text: \"YYYY-MM-DD HH:mm:ss\", value: \"YYYY-MM-DD HH:mm:ss\" },\n      { text: \"YYYY-MM-DD HH:mm:ss.SSS\", value: \"YYYY-MM-DD HH:mm:ss.SSS\" },\n      { text: \"MM/DD/YY h:mm:ss a\", value: \"MM/DD/YY h:mm:ss a\" },\n      { text: \"MMMM D, YYYY LT\", value: \"MMMM D, YYYY LT\" },\n      { text: \"YYYY-MM-DD\", value: \"YYYY-MM-DD\" }\n    ];\n    this.mappingTypes = [\n      { text: \"Value to text\", value: 1 },\n      { text: \"Range to text\", value: 2 }\n    ];\n    this.alignTypes = _ColumnOptionsCtrl.alignTypesEnum;\n    this.getColumnNames = () => {\n      if (!this.panelCtrl.table) {\n        return [];\n      }\n      return (0,lodash__WEBPACK_IMPORTED_MODULE_0__.map)(this.panelCtrl.table.columns, (col) => {\n        return col.text;\n      });\n    };\n    this.onColorChange = this.onColorChange.bind(this);\n  }\n  render() {\n    this.panelCtrl.render();\n  }\n  setUnitFormat(column) {\n    return (value) => {\n      column.unit = value;\n      this.panelCtrl.render();\n    };\n  }\n  addColumnStyle() {\n    const newStyleRule = {\n      unit: \"short\",\n      type: \"number\",\n      alias: \"\",\n      decimals: 2,\n      colors: [\"rgba(245, 54, 54, 0.9)\", \"rgba(237, 129, 40, 0.89)\", \"rgba(50, 172, 45, 0.97)\"],\n      colorMode: null,\n      pattern: \"\",\n      dateFormat: \"YYYY-MM-DD HH:mm:ss\",\n      thresholds: [],\n      mappingType: 1,\n      align: \"auto\"\n    };\n    const styles = this.panel.styles;\n    const stylesCount = styles.length;\n    let indexToInsert = stylesCount;\n    if (stylesCount > 0) {\n      const last = styles[stylesCount - 1];\n      if (last.pattern === \"/.*/\") {\n        indexToInsert = stylesCount - 1;\n      }\n    }\n    styles.splice(indexToInsert, 0, newStyleRule);\n    this.activeStyleIndex = indexToInsert;\n  }\n  removeColumnStyle(style) {\n    this.panel.styles = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.without)(this.panel.styles, style);\n  }\n  invertColorOrder(index) {\n    const ref = this.panel.styles[index].colors;\n    const copy = ref[0];\n    ref[0] = ref[2];\n    ref[2] = copy;\n    this.panelCtrl.render();\n  }\n  onColorChange(style, colorIndex) {\n    return (newColor) => {\n      style.colors[colorIndex] = newColor;\n      this.render();\n    };\n  }\n  addValueMap(style) {\n    if (!style.valueMaps) {\n      style.valueMaps = [];\n    }\n    style.valueMaps.push({ value: \"\", text: \"\" });\n    this.panelCtrl.render();\n  }\n  removeValueMap(style, index) {\n    style.valueMaps.splice(index, 1);\n    this.panelCtrl.render();\n  }\n  addRangeMap(style) {\n    if (!style.rangeMaps) {\n      style.rangeMaps = [];\n    }\n    style.rangeMaps.push({ from: \"\", to: \"\", text: \"\" });\n    this.panelCtrl.render();\n  }\n  removeRangeMap(style, index) {\n    style.rangeMaps.splice(index, 1);\n    this.panelCtrl.render();\n  }\n};\nlet ColumnOptionsCtrl = _ColumnOptionsCtrl;\nColumnOptionsCtrl.alignTypesEnum = [\n  { text: \"auto\", value: \"\" },\n  { text: \"left\", value: \"left\" },\n  { text: \"center\", value: \"center\" },\n  { text: \"right\", value: \"right\" }\n];\nColumnOptionsCtrl.$inject = [\"$scope\"];\nfunction columnOptionsTab() {\n  \"use strict\";\n  return {\n    restrict: \"E\",\n    scope: true,\n    templateUrl: \"public/app/plugins/panel/table-old/column_options.html\",\n    controller: ColumnOptionsCtrl\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvdGFibGUtb2xkL2NvbHVtbl9vcHRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE2QjtBQUVHO0FBRXpCLE1BQU0scUJBQU4sTUFBd0I7QUFBQSxFQXdCN0IsWUFBWSxRQUFhO0FBQ3ZCLFdBQU8sU0FBUztBQUVoQixTQUFLLG1CQUFtQjtBQUN4QixTQUFLLFlBQVksT0FBTztBQUN4QixTQUFLLFFBQVEsS0FBSyxVQUFVO0FBQzVCLFNBQUssY0FBYyw4REFBZSxDQUFDO0FBQ25DLFNBQUssYUFBYTtBQUFBLE1BQ2hCLEVBQUUsTUFBTSxZQUFZLE9BQU8sS0FBSztBQUFBLE1BQ2hDLEVBQUUsTUFBTSxRQUFRLE9BQU8sT0FBTztBQUFBLE1BQzlCLEVBQUUsTUFBTSxTQUFTLE9BQU8sUUFBUTtBQUFBLE1BQ2hDLEVBQUUsTUFBTSxPQUFPLE9BQU8sTUFBTTtBQUFBLElBQzlCO0FBQ0EsU0FBSyxjQUFjO0FBQUEsTUFDakIsRUFBRSxNQUFNLFVBQVUsT0FBTyxTQUFTO0FBQUEsTUFDbEMsRUFBRSxNQUFNLFVBQVUsT0FBTyxTQUFTO0FBQUEsTUFDbEMsRUFBRSxNQUFNLFFBQVEsT0FBTyxPQUFPO0FBQUEsTUFDOUIsRUFBRSxNQUFNLFVBQVUsT0FBTyxTQUFTO0FBQUEsSUFDcEM7QUFDQSxTQUFLLFlBQVksQ0FBQyxPQUFPLE9BQU8sUUFBUSxRQUFRLFFBQVEsUUFBUSxRQUFRLFFBQVEsUUFBUSxRQUFRLFFBQVEsTUFBTTtBQUM5RyxTQUFLLGNBQWM7QUFBQSxNQUNqQixFQUFFLE1BQU0sdUJBQXVCLE9BQU8sc0JBQXNCO0FBQUEsTUFDNUQsRUFBRSxNQUFNLDJCQUEyQixPQUFPLDBCQUEwQjtBQUFBLE1BQ3BFLEVBQUUsTUFBTSxzQkFBc0IsT0FBTyxxQkFBcUI7QUFBQSxNQUMxRCxFQUFFLE1BQU0sbUJBQW1CLE9BQU8sa0JBQWtCO0FBQUEsTUFDcEQsRUFBRSxNQUFNLGNBQWMsT0FBTyxhQUFhO0FBQUEs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T0FBTyxPQUFPLENBQUM7QUFDL0IsU0FBSyxVQUFVLE9BQU87QUFBQSxFQUN4QjtBQUNGO0FBM0pPLElBQU0sb0JBQU47QUFBTSxrQkFlSyxpQkFBaUI7QUFBQSxFQUMvQixFQUFFLE1BQU0sUUFBUSxPQUFPLEdBQUc7QUFBQSxFQUMxQixFQUFFLE1BQU0sUUFBUSxPQUFPLE9BQU87QUFBQSxFQUM5QixFQUFFLE1BQU0sVUFBVSxPQUFPLFNBQVM7QUFBQSxFQUNsQyxFQUFFLE1BQU0sU0FBUyxPQUFPLFFBQVE7QUFDbEM7QUFwQlcsa0JBc0JKLFVBQVUsQ0FBQyxRQUFRO0FBdUlyQixTQUFTLG1CQUFtQjtBQUNqQztBQUNBLFNBQU87QUFBQSxJQUNMLFVBQVU7QUFBQSxJQUNWLE9BQU87QUFBQSxJQUNQLGFBQWE7QUFBQSxJQUNiLFlBQVk7QUFBQSxFQUNkO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL3RhYmxlLW9sZC9jb2x1bW5fb3B0aW9ucy50cz9iNjg0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hcCwgd2l0aG91dCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IGdldFZhbHVlRm9ybWF0cyB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuXG5leHBvcnQgY2xhc3MgQ29sdW1uT3B0aW9uc0N0cmwge1xuICBwYW5lbDogYW55O1xuICBwYW5lbEN0cmw6IGFueTtcbiAgY29sb3JNb2RlczogYW55O1xuICBjb2x1bW5TdHlsZXM6IGFueTtcbiAgY29sdW1uVHlwZXM6IGFueTtcbiAgZm9udFNpemVzOiBhbnk7XG4gIGRhdGVGb3JtYXRzOiBhbnk7XG4gIGFkZENvbHVtblNlZ21lbnQ6IGFueTtcbiAgdW5pdEZvcm1hdHM6IGFueTtcbiAgZ2V0Q29sdW1uTmFtZXM6IGFueTtcbiAgYWN0aXZlU3R5bGVJbmRleDogbnVtYmVyO1xuICBtYXBwaW5nVHlwZXM6IGFueTtcblxuICBhbGlnblR5cGVzOiBhbnk7XG4gIHN0YXRpYyByZWFkb25seSBhbGlnblR5cGVzRW51bSA9IFtcbiAgICB7IHRleHQ6ICdhdXRvJywgdmFsdWU6ICcnIH0sXG4gICAgeyB0ZXh0OiAnbGVmdCcsIHZhbHVlOiAnbGVmdCcgfSxcbiAgICB7IHRleHQ6ICdjZW50ZXInLCB2YWx1ZTogJ2NlbnRlcicgfSxcbiAgICB7IHRleHQ6ICdyaWdodCcsIHZhbHVlOiAncmlnaHQnIH0sXG4gIF07XG5cbiAgc3RhdGljICRpbmplY3QgPSBbJyRzY29wZSddO1xuXG4gIGNvbnN0cnVjdG9yKCRzY29wZTogYW55KSB7XG4gICAgJHNjb3BlLmVkaXRvciA9IHRoaXM7XG5cbiAgICB0aGlzLmFjdGl2ZVN0eWxlSW5kZXggPSAwO1xuICAgIHRoaXMucGFuZWxDdHJsID0gJHNjb3BlLmN0cmw7XG4gICAgdGhpcy5wYW5lbCA9IHRoaXMucGFuZWxDdHJsLnBhbmVsO1xuICAgIHRoaXMudW5pdEZvcm1hdHMgPSBnZXRWYWx1ZUZvcm1hdHMoKTtcbiAgICB0aGlzLmNvbG9yTW9kZXMgPSBbXG4gICAgICB7IHRleHQ6ICdEaXNhYmxlZCcsIHZhbHVlOiBudWxsIH0sXG4gICAgICB7IHRleHQ6ICdDZWxsJywgdmFsdWU6ICdjZWxsJyB9LFxuICAgICAgeyB0ZXh0OiAnVmFsdWUnLCB2YWx1ZTogJ3ZhbHVlJyB9LFxuICAgICAgeyB0ZXh0OiAnUm93JywgdmFsdWU6ICdyb3cnIH0sXG4gICAgXTtcbiAgICB0aGlzLmNvbHVtblR5cGVzID0gW1xuICAgICAgeyB0ZXh0OiAnTnVtYmVyJywgdmFsdWU6ICdudW1iZXInIH0sXG4gICAgICB7IHRleHQ6ICdTdHJpbmcnLCB2YWx1ZTogJ3N0cmluZycgfSxcbiAgICAgIHsgdGV4dDogJ0RhdGUnLCB2YWx1ZTogJ2RhdGUnIH0sXG4gICAgICB7IHRleHQ6ICdIaWRkZW4nLCB2YWx1ZTogJ2hpZGRlbicgfSxcbiAgICBdO1xuICAgIHRoaXMuZm9udFNpemVzID0gWyc4MCUnLCAnOTAlJywgJzEwMCUnLCAnMTEwJScsICcxMjAlJywgJzEzMCUnLCAnMTUwJScsICcxNjAlJywgJzE4MCUnLCAnMjAwJScsICcyMjAlJywgJzI1MCUnXTtcbiAgICB0aGlzLmRhdGVGb3JtYXRzID0gW1xuICAgICAgeyB0ZXh0OiAnWVlZWS1NTS1ERCBISDptbTpzcycsIHZhbHVlOiAnWVlZWS1NTS1ERCBISDptbTpzcycgfSxcbiAgICAgIHsgdGV4dDogJ1lZWVktTU0tREQgSEg6bW06c3MuU1NTJywgdmFsdWU6ICdZWVlZLU1NLUREIEhIOm1tOnNzLlNTUycgfSxcbiAgICAgIHsgdGV4dDogJ01NL0REL1lZIGg6bW06c3MgYScsIHZhbHVlOiAnTU0vREQvWVkgaDptbTpzcyBhJyB9LFxuICAgICAgeyB0ZXh0OiAnTU1NTSBELCBZWVlZIExUJywgdmFsdWU6ICdNTU1NIEQsIFlZWVkgTFQnIH0sXG4gICAgICB7IHRleHQ6ICdZWVlZLU1NLUREJywgdmFsdWU6ICdZWVlZLU1NLUREJyB9LFxuICAgIF07XG4gICAgdGhpcy5tYXBwaW5nVHlwZXMgPSBbXG4gICAgICB7IHRleHQ6ICdWYWx1ZSB0byB0ZXh0JywgdmFsdWU6IDEgfSxcbiAgICAgIHsgdGV4dDogJ1JhbmdlIHRvIHRleHQnLCB2YWx1ZTogMiB9LFxuICAgIF07XG4gICAgdGhpcy5hbGlnblR5cGVzID0gQ29sdW1uT3B0aW9uc0N0cmwuYWxpZ25UeXBlc0VudW07XG5cbiAgICB0aGlzLmdldENvbHVtbk5hbWVzID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnBhbmVsQ3RybC50YWJsZSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFwKHRoaXMucGFuZWxDdHJsLnRhYmxlLmNvbHVtbnMsIChjb2w6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4gY29sLnRleHQ7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5vbkNvbG9yQ2hhbmdlID0gdGhpcy5vbkNvbG9yQ2hhbmdlLmJpbmQodGhpcyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5wYW5lbEN0cmwucmVuZGVyKCk7XG4gIH1cblxuICBzZXRVbml0Rm9ybWF0KGNvbHVtbjogYW55KSB7XG4gICAgcmV0dXJuICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICBjb2x1bW4udW5pdCA9IHZhbHVlO1xuICAgICAgdGhpcy5wYW5lbEN0cmwucmVuZGVyKCk7XG4gICAgfTtcbiAgfVxuXG4gIGFkZENvbHVtblN0eWxlKCkge1xuICAgIGNvbnN0IG5ld1N0eWxlUnVsZTogb2JqZWN0ID0ge1xuICAgICAgdW5pdDogJ3Nob3J0JyxcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgYWxpYXM6ICcnLFxuICAgICAgZGVjaW1hbHM6IDIsXG4gICAgICBjb2xvcnM6IFsncmdiYSgyNDUsIDU0LCA1NCwgMC45KScsICdyZ2JhKDIzNywgMTI5LCA0MCwgMC44OSknLCAncmdiYSg1MCwgMTcyLCA0NSwgMC45NyknXSxcbiAgICAgIGNvbG9yTW9kZTogbnVsbCxcbiAgICAgIHBhdHRlcm46ICcnLFxuICAgICAgZGF0ZUZvcm1hdDogJ1lZWVktTU0tREQgSEg6bW06c3MnLFxuICAgICAgdGhyZXNob2xkczogW10sXG4gICAgICBtYXBwaW5nVHlwZTogMSxcbiAgICAgIGFsaWduOiAnYXV0bycsXG4gICAgfTtcblxuICAgIGNvbnN0IHN0eWxlcyA9IHRoaXMucGFuZWwuc3R5bGVzO1xuICAgIGNvbnN0IHN0eWxlc0NvdW50ID0gc3R5bGVzLmxlbmd0aDtcbiAgICBsZXQgaW5kZXhUb0luc2VydCA9IHN0eWxlc0NvdW50O1xuXG4gICAgLy8gY2hlY2sgaWYgbGFzdCBpcyBhIGNhdGNoIGFsbCBydWxlLCB0aGVuIGFkZCBpdCBiZWZvcmUgdGhhdCBvbmVcbiAgICBpZiAoc3R5bGVzQ291bnQgPiAwKSB7XG4gICAgICBjb25zdCBsYXN0ID0gc3R5bGVzW3N0eWxlc0NvdW50IC0gMV07XG4gICAgICBpZiAobGFzdC5wYXR0ZXJuID09PSAnLy4qLycpIHtcbiAgICAgICAgaW5kZXhUb0luc2VydCA9IHN0eWxlc0NvdW50IC0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdHlsZXMuc3BsaWNlKGluZGV4VG9JbnNlcnQsIDAsIG5ld1N0eWxlUnVsZSk7XG4gICAgdGhpcy5hY3RpdmVTdHlsZUluZGV4ID0gaW5kZXhUb0luc2VydDtcbiAgfVxuXG4gIHJlbW92ZUNvbHVtblN0eWxlKHN0eWxlOiBhbnkpIHtcbiAgICB0aGlzLnBhbmVsLnN0eWxlcyA9IHdpdGhvdXQodGhpcy5wYW5lbC5zdHlsZXMsIHN0eWxlKTtcbiAgfVxuXG4gIGludmVydENvbG9yT3JkZXIoaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IHJlZiA9IHRoaXMucGFuZWwuc3R5bGVzW2luZGV4XS5jb2xvcnM7XG4gICAgY29uc3QgY29weSA9IHJlZlswXTtcbiAgICByZWZbMF0gPSByZWZbMl07XG4gICAgcmVmWzJdID0gY29weTtcbiAgICB0aGlzLnBhbmVsQ3RybC5yZW5kZXIoKTtcbiAgfVxuXG4gIG9uQ29sb3JDaGFuZ2Uoc3R5bGU6IGFueSwgY29sb3JJbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIChuZXdDb2xvcjogc3RyaW5nKSA9PiB7XG4gICAgICBzdHlsZS5jb2xvcnNbY29sb3JJbmRleF0gPSBuZXdDb2xvcjtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgfVxuXG4gIGFkZFZhbHVlTWFwKHN0eWxlOiBhbnkpIHtcbiAgICBpZiAoIXN0eWxlLnZhbHVlTWFwcykge1xuICAgICAgc3R5bGUudmFsdWVNYXBzID0gW107XG4gICAgfVxuICAgIHN0eWxlLnZhbHVlTWFwcy5wdXNoKHsgdmFsdWU6ICcnLCB0ZXh0OiAnJyB9KTtcbiAgICB0aGlzLnBhbmVsQ3RybC5yZW5kZXIoKTtcbiAgfVxuXG4gIHJlbW92ZVZhbHVlTWFwKHN0eWxlOiBhbnksIGluZGV4OiBudW1iZXIpIHtcbiAgICBzdHlsZS52YWx1ZU1hcHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnBhbmVsQ3RybC5yZW5kZXIoKTtcbiAgfVxuXG4gIGFkZFJhbmdlTWFwKHN0eWxlOiBhbnkpIHtcbiAgICBpZiAoIXN0eWxlLnJhbmdlTWFwcykge1xuICAgICAgc3R5bGUucmFuZ2VNYXBzID0gW107XG4gICAgfVxuICAgIHN0eWxlLnJhbmdlTWFwcy5wdXNoKHsgZnJvbTogJycsIHRvOiAnJywgdGV4dDogJycgfSk7XG4gICAgdGhpcy5wYW5lbEN0cmwucmVuZGVyKCk7XG4gIH1cblxuICByZW1vdmVSYW5nZU1hcChzdHlsZTogYW55LCBpbmRleDogbnVtYmVyKSB7XG4gICAgc3R5bGUucmFuZ2VNYXBzLnNwbGljZShpbmRleCwgMSk7XG4gICAgdGhpcy5wYW5lbEN0cmwucmVuZGVyKCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbHVtbk9wdGlvbnNUYWIoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHNjb3BlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAncHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL3RhYmxlLW9sZC9jb2x1bW5fb3B0aW9ucy5odG1sJyxcbiAgICBjb250cm9sbGVyOiBDb2x1bW5PcHRpb25zQ3RybCxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/table-old/column_options.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/table-old/editor.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TablePanelEditorCtrl: () => (/* binding */ TablePanelEditorCtrl),\n/* harmony export */   tablePanelEditor: () => (/* binding */ tablePanelEditor)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _transformers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/panel/table-old/transformers.ts\");\n\n\n\nclass TablePanelEditorCtrl {\n  constructor($scope, uiSegmentSrv) {\n    this.uiSegmentSrv = uiSegmentSrv;\n    this.canSetColumns = false;\n    this.columnsHelpMessage = \"\";\n    $scope.editor = this;\n    this.panelCtrl = $scope.ctrl;\n    this.panel = this.panelCtrl.panel;\n    this.transformers = _transformers__WEBPACK_IMPORTED_MODULE_1__.transformers;\n    this.fontSizes = [\"80%\", \"90%\", \"100%\", \"110%\", \"120%\", \"130%\", \"150%\", \"160%\", \"180%\", \"200%\", \"220%\", \"250%\"];\n    this.addColumnSegment = uiSegmentSrv.newPlusButton();\n    this.updateTransformHints();\n  }\n  updateTransformHints() {\n    this.canSetColumns = false;\n    this.columnsHelpMessage = \"\";\n    switch (this.panel.transform) {\n      case \"timeseries_aggregations\": {\n        this.canSetColumns = true;\n        break;\n      }\n      case \"json\": {\n        this.canSetColumns = true;\n        break;\n      }\n      case \"table\": {\n        this.columnsHelpMessage = \"Columns and their order are determined by the data query\";\n      }\n    }\n  }\n  getColumnOptions() {\n    if (!this.panelCtrl.dataRaw) {\n      return Promise.resolve([]);\n    }\n    const columns = this.transformers[this.panel.transform].getColumns(this.panelCtrl.dataRaw);\n    const segments = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.map)(columns, (c) => this.uiSegmentSrv.newSegment({ value: c.text }));\n    return Promise.resolve(segments);\n  }\n  addColumn() {\n    const columns = _transformers__WEBPACK_IMPORTED_MODULE_1__.transformers[this.panel.transform].getColumns(this.panelCtrl.dataRaw);\n    const column = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.find)(columns, { text: this.addColumnSegment.value });\n    if (column) {\n      this.panel.columns.push(column);\n      this.render();\n    }\n    const plusButton = this.uiSegmentSrv.newPlusButton();\n    this.addColumnSegment.html = plusButton.html;\n    this.addColumnSegment.value = plusButton.value;\n  }\n  transformChanged() {\n    this.panel.columns = [];\n    if (this.panel.transform === \"annotations\") {\n      this.panelCtrl.refresh();\n    } else {\n      if (this.panel.transform === \"timeseries_aggregations\") {\n        this.panel.columns.push({ text: \"Avg\", value: \"avg\" });\n      }\n      this.updateTransformHints();\n      this.render();\n    }\n  }\n  render() {\n    this.panelCtrl.render();\n  }\n  removeColumn(column) {\n    this.panel.columns = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.without)(this.panel.columns, column);\n    this.panelCtrl.render();\n  }\n}\nTablePanelEditorCtrl.$inject = [\"$scope\", \"uiSegmentSrv\"];\nfunction tablePanelEditor(uiSegmentSrv) {\n  \"use strict\";\n  return {\n    restrict: \"E\",\n    scope: true,\n    templateUrl: \"public/app/plugins/panel/table-old/editor.html\",\n    controller: TablePanelEditorCtrl\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvdGFibGUtb2xkL2VkaXRvci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBbUM7QUFFTjtBQUd0QixNQUFNLHFCQUFxQjtBQUFBLEVBWWhDLFlBQ0UsUUFDUSxjQUNSO0FBRFE7QUFQVix5QkFBZ0I7QUFDaEIsOEJBQXFCO0FBUW5CLFdBQU8sU0FBUztBQUNoQixTQUFLLFlBQVksT0FBTztBQUN4QixTQUFLLFFBQVEsS0FBSyxVQUFVO0FBQzVCLFNBQUssZUFBZSx1REFBWTtBQUNoQyxTQUFLLFlBQVksQ0FBQyxPQUFPLE9BQU8sUUFBUSxRQUFRLFFBQVEsUUFBUSxRQUFRLFFBQVEsUUFBUSxRQUFRLFFBQVEsTUFBTTtBQUM5RyxTQUFLLG1CQUFtQixhQUFhLGNBQWM7QUFDbkQsU0FBSyxxQkFBcUI7QUFBQSxFQUM1QjtBQUFBLEVBRUEsdUJBQXVCO0FBQ3JCLFNBQUssZ0JBQWdCO0FBQ3JCLFNBQUsscUJBQXFCO0FBRTFCLFlBQVEsS0FBSyxNQUFNLFdBQVc7QUFBQSxNQUM1QixLQUFLLDJCQUEyQjtBQUM5QixhQUFLLGdCQUFnQjtBQUNyQjtBQUFBLE1BQ0Y7QUFBQSxNQUNBLEtBQUssUUFBUTtBQUNYLGFBQUssZ0JBQWdCO0FBQ3JCO0FBQUEsTUFDRjtBQUFBLE1BQ0EsS0FBSyxTQUFTO0FBQ1osYUFBSyxxQkFBcUI7QUFBQSxNQUM1QjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFFQSxtQkFBbUI7QUFDakIsUUFBSSxDQUFDLEtBQUssVUFBVSxTQUFTO0FBQzNCLGFBQU8sUUFBUSxRQUFRLENBQUMsQ0FBQztBQUFBLElBQzNCO0FBQ0EsVUFBTSxVQUFVLEtBQUssYUFBYSxLQUFLLE1BQU0sU0FBUyxFQUFFLFdBQVcsS0FBSyxVQUFVLE9BQU87QUFDekYsVUFBTSxXQUFXLDJDQUFHLENBQUMsU0FBUyxDQUFDLE1BQVcsS0FBSyxhQUFhLFdBQVcsRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekYsV0FBTyxRQUFRLFFBQVEsUUFBUTtBQUFBLEVBQ2pDO0FBQUEsRUFFQSxZQUFZO0FBQ1YsVUFBTSxVQUFVLHVEQUFZLENBQUMsS0FBSyxNQUFNLFNBQVMsRUFBRSxXQUFXLEtBQUssVUFBVSxPQUFPO0FBQ3BGLFVBQU0sU0FBYyw0Q0FBSSxDQUFDLFNBQVMsRUFBRSxNQUFNLEtBQUssaUJBQWlCLE1BQU0sQ0FBQztBQUV2RSxRQUFJLFFBQVE7QUFDVixXQUFLLE1BQU0sUUFBUSxLQUFLLE1BQU07QUFDOUIsV0FBSyxPQUFPO0FBQUEsSUFDZDtBQUVBLFVBQU0sYUFBYSxLQUFLLGFBQWEsY0FBYztBQUNuRCxTQUFLLGlCQUFpQixPQUFPLFdBQVc7QUFDeEMsU0FBSyxpQkFBaUIsUUFBUSxXQUFXO0FBQUEsRUFDM0M7QUFBQSxFQUVBLG1CQUFtQjtBQUNqQixTQUFLLE1BQU0sVUFBVSxDQUFDO0FBQ3RCLFFBQUksS0FBSyxNQUFNLGNBQWMsZUFBZTtBQUMxQyxXQUFLLFVBQVUsUUFBUTtBQUFBLElBQ3pCLE9BQU87QUFDTCxVQUFJLEtBQUssTUFBTSxjQUFjLDJCQUEyQjtBQUN0RCxhQUFLLE1BQU0sUUFBUSxLQUFLLEVBQUUsTUFBTSxPQUFPLE9BQU8sTUFBTSxDQUFDO0FBQUEsTUFDdkQ7QUFFQSxXQUFLLHFCQUFxQjtBQUMxQixXQUFLLE9BQU87QUFBQSxJQUNkO0FBQUEsRUFDRjtBQUFBLEVBRUEsU0FBUztBQUNQLFNBQUssVUFBVSxPQUFPO0FBQUEsRUFDeEI7QUFBQSxFQUVBLGFBQWEsUUFBcUI7QUFDaEMsU0FBSyxNQUFNLFVBQVUsK0NBQU8sQ0FBQyxLQUFLLE1BQU0sU0FBUyxNQUFNO0FBQ3ZELFNBQUssVUFBVSxPQUFPO0FBQUEsRUFDeEI7QUFDRjtBQXpGYSxxQkFVSixVQUFVLENBQUMsVUFBVSxjQUFjO0FBaUZyQyxTQUFTLGlCQUFpQixjQUFtQjtBQUNsRDtBQUNBLFNBQU87QUFBQSxJQUNMLFVBQVU7QUFBQSxJQUNWLE9BQU87QUFBQSxJQUNQLGFBQWE7QUFBQSxJQUNiLFlBQVk7QUFBQSxFQUNkO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL3RhYmxlLW9sZC9lZGl0b3IudHM/NzZjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmaW5kLCBtYXAsIHdpdGhvdXQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyB0cmFuc2Zvcm1lcnMgfSBmcm9tICcuL3RyYW5zZm9ybWVycyc7XG5pbXBvcnQgeyBDb2x1bW5TdHlsZSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgVGFibGVQYW5lbEVkaXRvckN0cmwge1xuICBwYW5lbDogYW55O1xuICBwYW5lbEN0cmw6IGFueTtcbiAgdHJhbnNmb3JtZXJzOiBhbnk7XG4gIGZvbnRTaXplczogYW55O1xuICBhZGRDb2x1bW5TZWdtZW50OiBhbnk7XG4gIGdldENvbHVtbk5hbWVzOiBhbnk7XG4gIGNhblNldENvbHVtbnMgPSBmYWxzZTtcbiAgY29sdW1uc0hlbHBNZXNzYWdlID0gJyc7XG5cbiAgc3RhdGljICRpbmplY3QgPSBbJyRzY29wZScsICd1aVNlZ21lbnRTcnYnXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAkc2NvcGU6IGFueSxcbiAgICBwcml2YXRlIHVpU2VnbWVudFNydjogYW55XG4gICkge1xuICAgICRzY29wZS5lZGl0b3IgPSB0aGlzO1xuICAgIHRoaXMucGFuZWxDdHJsID0gJHNjb3BlLmN0cmw7XG4gICAgdGhpcy5wYW5lbCA9IHRoaXMucGFuZWxDdHJsLnBhbmVsO1xuICAgIHRoaXMudHJhbnNmb3JtZXJzID0gdHJhbnNmb3JtZXJzO1xuICAgIHRoaXMuZm9udFNpemVzID0gWyc4MCUnLCAnOTAlJywgJzEwMCUnLCAnMTEwJScsICcxMjAlJywgJzEzMCUnLCAnMTUwJScsICcxNjAlJywgJzE4MCUnLCAnMjAwJScsICcyMjAlJywgJzI1MCUnXTtcbiAgICB0aGlzLmFkZENvbHVtblNlZ21lbnQgPSB1aVNlZ21lbnRTcnYubmV3UGx1c0J1dHRvbigpO1xuICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtSGludHMoKTtcbiAgfVxuXG4gIHVwZGF0ZVRyYW5zZm9ybUhpbnRzKCkge1xuICAgIHRoaXMuY2FuU2V0Q29sdW1ucyA9IGZhbHNlO1xuICAgIHRoaXMuY29sdW1uc0hlbHBNZXNzYWdlID0gJyc7XG5cbiAgICBzd2l0Y2ggKHRoaXMucGFuZWwudHJhbnNmb3JtKSB7XG4gICAgICBjYXNlICd0aW1lc2VyaWVzX2FnZ3JlZ2F0aW9ucyc6IHtcbiAgICAgICAgdGhpcy5jYW5TZXRDb2x1bW5zID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdqc29uJzoge1xuICAgICAgICB0aGlzLmNhblNldENvbHVtbnMgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3RhYmxlJzoge1xuICAgICAgICB0aGlzLmNvbHVtbnNIZWxwTWVzc2FnZSA9ICdDb2x1bW5zIGFuZCB0aGVpciBvcmRlciBhcmUgZGV0ZXJtaW5lZCBieSB0aGUgZGF0YSBxdWVyeSc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29sdW1uT3B0aW9ucygpIHtcbiAgICBpZiAoIXRoaXMucGFuZWxDdHJsLmRhdGFSYXcpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cbiAgICBjb25zdCBjb2x1bW5zID0gdGhpcy50cmFuc2Zvcm1lcnNbdGhpcy5wYW5lbC50cmFuc2Zvcm1dLmdldENvbHVtbnModGhpcy5wYW5lbEN0cmwuZGF0YVJhdyk7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBtYXAoY29sdW1ucywgKGM6IGFueSkgPT4gdGhpcy51aVNlZ21lbnRTcnYubmV3U2VnbWVudCh7IHZhbHVlOiBjLnRleHQgfSkpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2VnbWVudHMpO1xuICB9XG5cbiAgYWRkQ29sdW1uKCkge1xuICAgIGNvbnN0IGNvbHVtbnMgPSB0cmFuc2Zvcm1lcnNbdGhpcy5wYW5lbC50cmFuc2Zvcm1dLmdldENvbHVtbnModGhpcy5wYW5lbEN0cmwuZGF0YVJhdyk7XG4gICAgY29uc3QgY29sdW1uOiBhbnkgPSBmaW5kKGNvbHVtbnMsIHsgdGV4dDogdGhpcy5hZGRDb2x1bW5TZWdtZW50LnZhbHVlIH0pO1xuXG4gICAgaWYgKGNvbHVtbikge1xuICAgICAgdGhpcy5wYW5lbC5jb2x1bW5zLnB1c2goY29sdW1uKTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcGx1c0J1dHRvbiA9IHRoaXMudWlTZWdtZW50U3J2Lm5ld1BsdXNCdXR0b24oKTtcbiAgICB0aGlzLmFkZENvbHVtblNlZ21lbnQuaHRtbCA9IHBsdXNCdXR0b24uaHRtbDtcbiAgICB0aGlzLmFkZENvbHVtblNlZ21lbnQudmFsdWUgPSBwbHVzQnV0dG9uLnZhbHVlO1xuICB9XG5cbiAgdHJhbnNmb3JtQ2hhbmdlZCgpIHtcbiAgICB0aGlzLnBhbmVsLmNvbHVtbnMgPSBbXTtcbiAgICBpZiAodGhpcy5wYW5lbC50cmFuc2Zvcm0gPT09ICdhbm5vdGF0aW9ucycpIHtcbiAgICAgIHRoaXMucGFuZWxDdHJsLnJlZnJlc2goKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucGFuZWwudHJhbnNmb3JtID09PSAndGltZXNlcmllc19hZ2dyZWdhdGlvbnMnKSB7XG4gICAgICAgIHRoaXMucGFuZWwuY29sdW1ucy5wdXNoKHsgdGV4dDogJ0F2ZycsIHZhbHVlOiAnYXZnJyB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm1IaW50cygpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5wYW5lbEN0cmwucmVuZGVyKCk7XG4gIH1cblxuICByZW1vdmVDb2x1bW4oY29sdW1uOiBDb2x1bW5TdHlsZSkge1xuICAgIHRoaXMucGFuZWwuY29sdW1ucyA9IHdpdGhvdXQodGhpcy5wYW5lbC5jb2x1bW5zLCBjb2x1bW4pO1xuICAgIHRoaXMucGFuZWxDdHJsLnJlbmRlcigpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0YWJsZVBhbmVsRWRpdG9yKHVpU2VnbWVudFNydjogYW55KSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHNjb3BlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAncHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL3RhYmxlLW9sZC9lZGl0b3IuaHRtbCcsXG4gICAgY29udHJvbGxlcjogVGFibGVQYW5lbEVkaXRvckN0cmwsXG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/table-old/editor.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/table-old/module.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TablePanelCtrl: () => (/* binding */ TablePanelCtrl),\n/* harmony export */   plugin: () => (/* binding */ plugin)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/jquery-npm-3.7.0-a02a382bf4-907785e133.zip/node_modules/jquery/dist/jquery-exposed.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/legacyEvents.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/panel/PanelPlugin.ts\");\n/* harmony import */ var app_core_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/config.ts\");\n/* harmony import */ var app_features_variables_adhoc_actions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/variables/adhoc/actions.ts\");\n/* harmony import */ var app_plugins_sdk__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/plugins/sdk.ts\");\n/* harmony import */ var app_store_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/store/store.ts\");\n/* harmony import */ var _column_options__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/plugins/panel/table-old/column_options.ts\");\n/* harmony import */ var _editor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/plugins/panel/table-old/editor.ts\");\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/plugins/panel/table-old/renderer.ts\");\n/* harmony import */ var _transformers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/plugins/panel/table-old/transformers.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nclass TablePanelCtrl extends app_plugins_sdk__WEBPACK_IMPORTED_MODULE_4__.MetricsPanelCtrl {\n  constructor($scope, $injector, annotationsSrv, $sanitize) {\n    super($scope, $injector);\n    this.annotationsSrv = annotationsSrv;\n    this.$sanitize = $sanitize;\n    this.panelDefaults = {\n      targets: [{}],\n      transform: \"timeseries_to_columns\",\n      pageSize: null,\n      showHeader: true,\n      styles: [\n        {\n          type: \"date\",\n          pattern: \"Time\",\n          alias: \"Time\",\n          dateFormat: \"YYYY-MM-DD HH:mm:ss\",\n          align: \"auto\"\n        },\n        {\n          unit: \"short\",\n          type: \"number\",\n          alias: \"\",\n          decimals: 2,\n          colors: [\"rgba(245, 54, 54, 0.9)\", \"rgba(237, 129, 40, 0.89)\", \"rgba(50, 172, 45, 0.97)\"],\n          colorMode: null,\n          pattern: \"/.*/\",\n          thresholds: [],\n          align: \"right\"\n        }\n      ],\n      columns: [],\n      fontSize: \"100%\",\n      sort: { col: 0, desc: true }\n    };\n    this.pageIndex = 0;\n    if (this.panel.styles === void 0) {\n      this.panel.styles = this.panel.columns;\n      this.panel.columns = this.panel.fields;\n      delete this.panel.columns;\n      delete this.panel.fields;\n    }\n    (0,lodash__WEBPACK_IMPORTED_MODULE_1__.defaults)(this.panel, this.panelDefaults);\n    this.panelHasRowColorMode = Boolean(this.panel.styles.find((style) => style.colorMode === \"row\"));\n    this.panelHasLinks = Boolean(this.panel.styles.find((style) => style.link));\n    this.events.on(_grafana_data__WEBPACK_IMPORTED_MODULE_10__.PanelEvents.dataReceived, this.onDataReceived.bind(this));\n    this.events.on(_grafana_data__WEBPACK_IMPORTED_MODULE_10__.PanelEvents.dataSnapshotLoad, this.onDataReceived.bind(this));\n    this.events.on(_grafana_data__WEBPACK_IMPORTED_MODULE_10__.PanelEvents.editModeInitialized, this.onInitEditMode.bind(this));\n  }\n  onInitEditMode() {\n    this.addEditorTab(\"Options\", _editor__WEBPACK_IMPORTED_MODULE_7__.tablePanelEditor, 2);\n    this.addEditorTab(\"Column Styles\", _column_options__WEBPACK_IMPORTED_MODULE_6__.columnOptionsTab, 3);\n  }\n  migrateToPanel(type) {\n    this.onPluginTypeChange(app_core_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].panels[type]);\n  }\n  issueQueries(datasource) {\n    this.pageIndex = 0;\n    if (this.panel.transform === \"annotations\") {\n      return this.annotationsSrv.getAnnotations({\n        dashboard: this.dashboard,\n        panel: this.panel,\n        range: this.range\n      }).then((anno) => {\n        this.loading = false;\n        this.dataRaw = anno;\n        this.pageIndex = 0;\n        this.render();\n        return { data: this.dataRaw };\n      });\n    }\n    return super.issueQueries(datasource);\n  }\n  onDataReceived(dataList) {\n    this.dataRaw = dataList;\n    this.pageIndex = 0;\n    if (this.dataRaw && this.dataRaw.length) {\n      if ((0,_grafana_data__WEBPACK_IMPORTED_MODULE_11__.isTableData)(this.dataRaw[0])) {\n        this.panel.transform = \"table\";\n      } else {\n        if (this.dataRaw[0].type === \"docs\") {\n          this.panel.transform = \"json\";\n        } else {\n          if (this.panel.transform === \"table\" || this.panel.transform === \"json\") {\n            this.panel.transform = \"timeseries_to_rows\";\n          }\n        }\n      }\n    }\n    this.render();\n  }\n  render() {\n    this.table = (0,_transformers__WEBPACK_IMPORTED_MODULE_9__.transformDataToTable)(this.dataRaw, this.panel);\n    this.table.sort(this.panel.sort);\n    this.renderer = new _renderer__WEBPACK_IMPORTED_MODULE_8__.TableRenderer(\n      this.panel,\n      this.table,\n      this.dashboard.getTimezone(),\n      this.$sanitize,\n      this.templateSrv,\n      app_core_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].theme2\n    );\n    return super.render(this.table);\n  }\n  toggleColumnSort(col, colIndex) {\n    if (this.table.columns[this.panel.sort.col]) {\n      this.table.columns[this.panel.sort.col].sort = false;\n    }\n    if (this.panel.sort.col === colIndex) {\n      if (this.panel.sort.desc) {\n        this.panel.sort.desc = false;\n      } else {\n        this.panel.sort.col = null;\n      }\n    } else {\n      this.panel.sort.col = colIndex;\n      this.panel.sort.desc = true;\n    }\n    this.render();\n  }\n  link(scope, elem, attrs, ctrl) {\n    let data;\n    const panel = ctrl.panel;\n    let pageCount = 0;\n    function getTableHeight() {\n      let panelHeight = ctrl.height;\n      if (pageCount > 1) {\n        panelHeight -= 26;\n      }\n      return panelHeight - 31 + \"px\";\n    }\n    function appendTableRows(tbodyElem) {\n      ctrl.renderer.setTable(data);\n      tbodyElem.empty();\n      tbodyElem.html(ctrl.renderer.render(ctrl.pageIndex));\n    }\n    function switchPage(e) {\n      const el = jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.currentTarget);\n      ctrl.pageIndex = parseInt(el.text(), 10) - 1;\n      renderPanel();\n    }\n    function appendPaginationControls(footerElem) {\n      footerElem.empty();\n      const pageSize = panel.pageSize || 100;\n      pageCount = Math.ceil(data.rows.length / pageSize);\n      if (pageCount === 1) {\n        return;\n      }\n      const startPage = Math.max(ctrl.pageIndex - 3, 0);\n      const endPage = Math.min(pageCount, startPage + 9);\n      const paginationList = jquery__WEBPACK_IMPORTED_MODULE_0___default()(\"<ul></ul>\");\n      for (let i = startPage; i < endPage; i++) {\n        const activeClass = i === ctrl.pageIndex ? \"active\" : \"\";\n        const pageLinkElem = jquery__WEBPACK_IMPORTED_MODULE_0___default()(\n          '<li><a class=\"table-panel-page-link pointer ' + activeClass + '\">' + (i + 1) + \"</a></li>\"\n        );\n        paginationList.append(pageLinkElem);\n      }\n      footerElem.append(paginationList);\n    }\n    function renderPanel() {\n      const panelElem = elem.parents(\".panel-content\");\n      const rootElem = elem.find(\".table-panel-scroll\");\n      const tbodyElem = elem.find(\"tbody\");\n      const footerElem = elem.find(\".table-panel-footer\");\n      elem.css({ \"font-size\": panel.fontSize });\n      panelElem.addClass(\"table-panel-content\");\n      appendTableRows(tbodyElem);\n      appendPaginationControls(footerElem);\n      rootElem.css({ \"max-height\": getTableHeight() });\n    }\n    elem.tooltip({\n      selector: \"[data-link-tooltip]\"\n    });\n    function addFilterClicked(e) {\n      const filterData = jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.currentTarget).data();\n      const options = {\n        datasource: panel.datasource,\n        key: data.columns[filterData.column].text,\n        value: data.rows[filterData.row][filterData.column],\n        operator: filterData.operator\n      };\n      (0,app_store_store__WEBPACK_IMPORTED_MODULE_5__.dispatch)((0,app_features_variables_adhoc_actions__WEBPACK_IMPORTED_MODULE_3__.applyFilterFromTable)(options));\n    }\n    elem.on(\"click\", \".table-panel-page-link\", switchPage);\n    elem.on(\"click\", \".table-panel-filter-link\", addFilterClicked);\n    const unbindDestroy = scope.$on(\"$destroy\", () => {\n      elem.off(\"click\", \".table-panel-page-link\");\n      elem.off(\"click\", \".table-panel-filter-link\");\n      unbindDestroy();\n    });\n    ctrl.events.on(_grafana_data__WEBPACK_IMPORTED_MODULE_10__.PanelEvents.render, (renderData) => {\n      data = renderData || data;\n      if (data) {\n        renderPanel();\n      }\n      ctrl.renderingCompleted();\n    });\n  }\n}\nTablePanelCtrl.templateUrl = \"module.html\";\nTablePanelCtrl.$inject = [\"$scope\", \"$injector\", \"annotationsSrv\", \"$sanitize\"];\nconst plugin = new _grafana_data__WEBPACK_IMPORTED_MODULE_12__.PanelPlugin(null);\nplugin.angularPanelCtrl = TablePanelCtrl;\nplugin.setNoPadding();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvdGFibGUtb2xkL21vZHVsZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBYztBQUNXO0FBR3lDO0FBQy9DO0FBQ2tCO0FBQ0o7QUFDUjtBQUVRO0FBQ0E7QUFDSDtBQUNPO0FBRTlCLE1BQU0sdUJBQXVCLDZEQUFnQixDQUFDO0FBQUEsRUEyQ25ELFlBQ0UsUUFDQSxXQUNRLGdCQUNBLFdBQ1I7QUFDQSxVQUFNLFFBQVEsU0FBUztBQUhmO0FBQ0E7QUFyQ1YseUJBQXFCO0FBQUEsTUFDbkIsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUFBLE1BQ1osV0FBVztBQUFBLE1BQ1gsVUFBVTtBQUFBLE1BQ1YsWUFBWTtBQUFBLE1BQ1osUUFBUTtBQUFBLFFBQ047QUFBQSxVQUNFLE1BQU07QUFBQSxVQUNOLFNBQVM7QUFBQSxVQUNULE9BQU87QUFBQSxVQUNQLFlBQVk7QUFBQSxVQUNaLE9BQU87QUFBQSxRQUNUO0FBQUEsUUFDQTtBQUFBLFVBQ0UsTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sT0FBTztBQUFBLFVBQ1AsVUFBVTtBQUFBLFVBQ1YsUUFBUSxDQUFDLDBCQUEwQiw0QkFBNEIseUJBQXlCO0FBQUEsVUFDeEYsV0FBVztBQUFBLFVBQ1gsU0FBUztBQUFBLFVBQ1QsWUFBWSxDQUFDO0FBQUEsVUFDYixPQUFPO0FBQUEsUUFDVDtBQUFBLE1BQ0Y7QUFBQSxNQUNBLFNBQVMsQ0FBQztBQUFBLE1BRVYsVUFBVTtBQUFBLE1BQ1YsTUFBTSxFQUFFLEtBQUssR0FBRyxNQUFNLEtBQUs7QUFBQSxJQUM3QjtBQVlFLFNBQUssWUFBWTtBQUVqQixRQUFJLEtBQUssTUFBTSxXQUFXLFFBQVE7QUFDaEMsV0FBSyxNQUFNLFNBQVMsS0FBSyxNQUFNO0FBQy9CLFdBQUssTUFBTSxVQUFVLEtBQUssTUFBTTtBQUNoQyxhQUFPLEtBQUssTUFBTTtBQUNsQixhQUFPLEtBQUssTUFBTTtBQUFBLElBQ3BCO0FBRUEsb0RBQVEsQ0FBQyxLQUFLLE9BQU8sS0FBSyxhQUFhO0FBRXZDLFNBQUssdUJBQXVCLFFBQVEsS0FBSyxNQUFNLE9BQU8sS0FBSyxDQUFDLFVBQWUsTUFBTSxjQUFjLEtBQUssQ0FBQztBQUNyRyxTQUFLLGdCQUFnQixRQUFRLEtBQUssTUFBTSxPQUFPLEtBQUssQ0FBQyxVQUFlLE1BQU0sSUFBSSxDQUFDO0FBRS9FLFNBQUssT0FBTyxHQUFHLHVEQUFXLENBQUMsY0FBYyxLQUFLLGVBQWUsS0FBSyxJQUFJLENBQUM7QUFDdkUsU0FBSyxPQUFPLEdBQUcsdURBQVcsQ0FBQyxrQkFBa0IsS0FBSyxlQUFlLEtBQUssSUFBSSxDQUFDO0FBQzNFLFNBQUssT0FBTyxHQUFHLHVEQUFXLENBQUMscUJBQXFCLEtBQUssZUFBZSxLQUFLLElBQUksQ0FBQztBQUFBLEVBQ2hGO0FBQUEsRUFFQSxpQkFBaUI7QUFDZixTQUFLLGFBQWEsV0FBVyxxREFBZ0IsRUFBRSxDQUFDO0FBQ2hELFNBQUssYUFBYSxpQkFBaUIsNkRBQWdCLEVBQUUsQ0FBQztBQUFBLEVBQ3hEO0FBQUEsRUFFQSxlQUFlLE1BQWM7QUFDM0IsU0FBSyxtQkFBbUIsdURBQU0sQ0FBQyxPQUFPLElBQUksQ0FBQztBQUFBLEVBQzdDO0FBQUEsRUFFQSxhQUFhLFlBQWlCO0FBQzVCLFNBQUssWUFBWTtBQUVqQixRQUFJLEtBQUssTUFBTSxjQUFjLGVBQWU7QUFDMUMsYUFBTyxLQUFLLGVBQ1QsZUFBZTtBQUFBLFFBQ2QsV0FBVyxLQUFLO0FBQUEsUUFDaEIsT0FBTyxLQUFLO0FBQUEsUUFDWixPQUFPLEtBQUs7QUFBQSxNQUNkLENBQUMsRUFDQSxLQUFLLENBQUMsU0FBYztBQUNuQixhQUFLLFVBQVU7QUFDZixhQUFLLFVBQVU7QUFDZixhQUFLLFlBQVk7QUFDakIsYUFBSyxPQUFPO0FBQ1osZUFBTyxFQUFFLE1BQU0sS0FBSyxRQUFRO0FBQUEsTUFDOUIsQ0FBQztBQUFBLElBQ0w7QUFFQSxXQUFPLE1BQU0sYUFBYSxVQUFVO0FBQUEsRUFDdEM7QUFBQSxFQUVBLGVBQWUsVUFBZTtBQUM1QixTQUFLLFVBQVU7QUFDZixTQUFLLFlBQVk7QUFHakIsUUFBSSxLQUFLLFdBQVcsS0FBSyxRQUFRLFFBQVE7QUFDdkMsVUFBSSwyREFBVyxDQUFDLEtBQUssUUFBUSxDQUFDLENBQUMsR0FBRztBQUNoQyxhQUFLLE1BQU0sWUFBWTtBQUFBLE1BQ3pCLE9BQU87QUFDTCxZQUFJLEtBQUssUUFBUSxDQUFDLEVBQUUsU0FBUyxRQUFRO0FBQ25DLGVBQUssTUFBTSxZQUFZO0FBQUEsUUFDekIsT0FBTztBQUNMLGNBQUksS0FBSyxNQUFNLGNBQWMsV0FBVyxLQUFLLE1BQU0sY0FBYyxRQUFRO0FBQ3ZFLGlCQUFLLE1BQU0sWUFBWTtBQUFBLFVBQ3pCO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBRUEsU0FBSyxPQUFPO0FBQUEsRUFDZDtBQUFBLEVBRUEsU0FBUztBQUNQLFNBQUssUUFBUSxtRUFBb0IsQ0FBQyxLQUFLLFNBQVMsS0FBSyxLQUFLO0FBQzFELFNBQUssTUFBTSxLQUFLLEtBQUssTUFBTSxJQUFJO0FBRS9CLFNBQUssV0FBVyxJQUFJLG9EQUFhO0FBQWIsTUFDbEIsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsS0FBSyxVQUFVLFlBQVk7QUFBQSxNQUMzQixLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsTUFDTCx1REFBTSxDQUFDO0FBQUEsSUFDVDtBQUVBLFdBQU8sTUFBTSxPQUFPLEtBQUssS0FBSztBQUFBLEVBQ2hDO0FBQUEsRUFFQSxpQkFBaUIsS0FBVSxVQUFlO0FBRXhDLFFBQUksS0FBSyxNQUFNLFFBQVEsS0FBSyxNQUFNLEtBQUssR0FBRyxHQUFHO0FBQzNDLFdBQUssTUFBTSxRQUFRLEtBQUssTUFBTSxLQUFLLEdBQUcsRUFBRSxPQUFPO0FBQUEsSUFDakQ7QUFFQSxRQUFJLEtBQUssTUFBTSxLQUFLLFFBQVEsVUFBVTtBQUNwQyxVQUFJLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDeEIsYUFBSyxNQUFNLEtBQUssT0FBTztBQUFBLE1BQ3pCLE9BQU87QUFDTCxhQUFLLE1BQU0sS0FBSyxNQUFNO0FBQUEsTUFDeEI7QUFBQSxJQUNGLE9BQU87QUFDTCxXQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ3RCLFdBQUssTUFBTSxLQUFLLE9BQU87QUFBQSxJQUN6QjtBQUNBLFNBQUssT0FBTztBQUFBLEVBQ2Q7QUFBQSxFQUVBLEtBQUssT0FBWSxNQUFjLE9BQVksTUFBc0I7QUFDL0QsUUFBSTtBQUNKLFVBQU0sUUFBUSxLQUFLO0FBQ25CLFFBQUksWUFBWTtBQUVoQixhQUFTLGlCQUFpQjtBQUN4QixVQUFJLGNBQWMsS0FBSztBQUV2QixVQUFJLFlBQVksR0FBRztBQUNqQix1QkFBZTtBQUFBLE1BQ2pCO0FBRUEsYUFBTyxjQUFjLEtBQUs7QUFBQSxJQUM1QjtBQUVBLGFBQVMsZ0JBQWdCLFdBQW1CO0FBQzFDLFdBQUssU0FBUyxTQUFTLElBQUk7QUFDM0IsZ0JBQVUsTUFBTTtBQUNoQixnQkFBVSxLQUFLLEtBQUssU0FBUyxPQUFPLEtBQUssU0FBUyxDQUFDO0FBQUEsSUFDckQ7QUFFQSxhQUFTLFdBQVcsR0FBUTtBQUMxQixZQUFNLEtBQUssNkNBQUMsQ0FBQyxFQUFFLGFBQWE7QUFDNUIsV0FBSyxZQUFZLFNBQVMsR0FBRyxLQUFLLEdBQUcsRUFBRSxJQUFJO0FBQzNDLGtCQUFZO0FBQUEsSUFDZDtBQUVBLGFBQVMseUJBQXlCLFlBQW9CO0FBQ3BELGlCQUFXLE1BQU07QUFFakIsWUFBTSxXQUFXLE1BQU0sWUFBWTtBQUNuQyxrQkFBWSxLQUFLLEtBQUssS0FBSyxLQUFLLFNBQVMsUUFBUTtBQUNqRCxVQUFJLGNBQWMsR0FBRztBQUNuQjtBQUFBLE1BQ0Y7QUFFQSxZQUFNLFlBQVksS0FBSyxJQUFJLEtBQUssWUFBWSxHQUFHLENBQUM7QUFDaEQsWUFBTSxVQUFVLEtBQUssSUFBSSxXQUFXLFlBQVksQ0FBQztBQUVqRCxZQUFNLGlCQUFpQiw2Q0FBQyxDQUFDLFdBQVc7QUFFcEMsZUFBUyxJQUFJLFdBQVcsSUFBSSxTQUFTLEtBQUs7QUFDeEMsY0FBTSxjQUFjLE1BQU0sS0FBSyxZQUFZLFdBQVc7QUFDdEQsY0FBTSxlQUFlLDZDQUFDO0FBQUQsVUFDbkIsaURBQWlELGNBQWMsUUFBUSxJQUFJLEtBQUs7QUFBQSxRQUNsRjtBQUNBLHVCQUFlLE9BQU8sWUFBWTtBQUFBLE1BQ3BDO0FBRUEsaUJBQVcsT0FBTyxjQUFjO0FBQUEsSUFDbEM7QUFFQSxhQUFTLGNBQWM7QUFDckIsWUFBTSxZQUFZLEtBQUssUUFBUSxnQkFBZ0I7QUFDL0MsWUFBTSxXQUFXLEtBQUssS0FBSyxxQkFBcUI7QUFDaEQsWUFBTSxZQUFZLEtBQUssS0FBSyxPQUFPO0FBQ25DLFlBQU0sYUFBYSxLQUFLLEtBQUsscUJBQXFCO0FBRWxELFdBQUssSUFBSSxFQUFFLGFBQWEsTUFBTSxTQUFTLENBQUM7QUFDeEMsZ0JBQVUsU0FBUyxxQkFBcUI7QUFFeEMsc0JBQWdCLFNBQVM7QUFDekIsK0JBQXlCLFVBQVU7QUFFbkMsZUFBUyxJQUFJLEVBQUUsY0FBYyxlQUFlLEVBQUUsQ0FBQztBQUFBLElBQ2pEO0FBR0EsU0FBSyxRQUFRO0FBQUEsTUFDWCxVQUFVO0FBQUEsSUFDWixDQUFDO0FBRUQsYUFBUyxpQkFBaUIsR0FBUTtBQUNoQyxZQUFNLGFBQWEsNkNBQUMsQ0FBQyxFQUFFLGFBQWEsRUFBRSxLQUFLO0FBQzNDLFlBQU0sVUFBVTtBQUFBLFFBQ2QsWUFBWSxNQUFNO0FBQUEsUUFDbEIsS0FBSyxLQUFLLFFBQVEsV0FBVyxNQUFNLEVBQUU7QUFBQSxRQUNyQyxPQUFPLEtBQUssS0FBSyxXQUFXLEdBQUcsRUFBRSxXQUFXLE1BQU07QUFBQSxRQUNsRCxVQUFVLFdBQVc7QUFBQSxNQUN2QjtBQUVBLCtEQUFRLENBQUMsMEZBQW9CLENBQUMsT0FBTyxDQUFDO0FBQUEsSUFDeEM7QUFFQSxTQUFLLEdBQUcsU0FBUywwQkFBMEIsVUFBVTtBQUNyRCxTQUFLLEdBQUcsU0FBUyw0QkFBNEIsZ0JBQWdCO0FBRTdELFVBQU0sZ0JBQWdCLE1BQU0sSUFBSSxZQUFZLE1BQU07QUFDaEQsV0FBSyxJQUFJLFNBQVMsd0JBQXdCO0FBQzFDLFdBQUssSUFBSSxTQUFTLDBCQUEwQjtBQUM1QyxvQkFBYztBQUFBLElBQ2hCLENBQUM7QUFFRCxTQUFLLE9BQU8sR0FBRyx1REFBVyxDQUFDLFFBQVEsQ0FBQyxlQUFvQjtBQUN0RCxhQUFPLGNBQWM7QUFDckIsVUFBSSxNQUFNO0FBQ1Isb0JBQVk7QUFBQSxNQUNkO0FBQ0EsV0FBSyxtQkFBbUI7QUFBQSxJQUMxQixDQUFDO0FBQUEsRUFDSDtBQUNGO0FBblFhLGVBQ0osY0FBYztBQURWLGVBeUNKLFVBQVUsQ0FBQyxVQUFVLGFBQWEsa0JBQWtCLFdBQVc7QUE0TmpFLE1BQU0sU0FBUyxJQUFJLHVEQUFXLENBQUMsSUFBaUQ7QUFDdkYsT0FBTyxtQkFBbUI7QUFDMUIsT0FBTyxhQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvcGx1Z2lucy9wYW5lbC90YWJsZS1vbGQvbW9kdWxlLnRzP2MwMjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCB7IGRlZmF1bHRzIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IENvbXBvbmVudFR5cGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IGlzVGFibGVEYXRhLCBQYW5lbEV2ZW50cywgUGFuZWxQbHVnaW4sIFBhbmVsUHJvcHMgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCBjb25maWcgZnJvbSAnYXBwL2NvcmUvY29uZmlnJztcbmltcG9ydCB7IGFwcGx5RmlsdGVyRnJvbVRhYmxlIH0gZnJvbSAnYXBwL2ZlYXR1cmVzL3ZhcmlhYmxlcy9hZGhvYy9hY3Rpb25zJztcbmltcG9ydCB7IE1ldHJpY3NQYW5lbEN0cmwgfSBmcm9tICdhcHAvcGx1Z2lucy9zZGsnO1xuaW1wb3J0IHsgZGlzcGF0Y2ggfSBmcm9tICdhcHAvc3RvcmUvc3RvcmUnO1xuXG5pbXBvcnQgeyBjb2x1bW5PcHRpb25zVGFiIH0gZnJvbSAnLi9jb2x1bW5fb3B0aW9ucyc7XG5pbXBvcnQgeyB0YWJsZVBhbmVsRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3InO1xuaW1wb3J0IHsgVGFibGVSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXInO1xuaW1wb3J0IHsgdHJhbnNmb3JtRGF0YVRvVGFibGUgfSBmcm9tICcuL3RyYW5zZm9ybWVycyc7XG5cbmV4cG9ydCBjbGFzcyBUYWJsZVBhbmVsQ3RybCBleHRlbmRzIE1ldHJpY3NQYW5lbEN0cmwge1xuICBzdGF0aWMgdGVtcGxhdGVVcmwgPSAnbW9kdWxlLmh0bWwnO1xuXG4gIHBhZ2VJbmRleDogbnVtYmVyO1xuICBkYXRhUmF3OiBhbnk7XG4gIHRhYmxlOiBhbnk7XG4gIHJlbmRlcmVyOiBhbnk7XG4gIHBhbmVsSGFzUm93Q29sb3JNb2RlOiBib29sZWFuO1xuICBwYW5lbEhhc0xpbmtzOiBib29sZWFuO1xuXG4gIHBhbmVsRGVmYXVsdHM6IGFueSA9IHtcbiAgICB0YXJnZXRzOiBbe31dLFxuICAgIHRyYW5zZm9ybTogJ3RpbWVzZXJpZXNfdG9fY29sdW1ucycsXG4gICAgcGFnZVNpemU6IG51bGwsXG4gICAgc2hvd0hlYWRlcjogdHJ1ZSxcbiAgICBzdHlsZXM6IFtcbiAgICAgIHtcbiAgICAgICAgdHlwZTogJ2RhdGUnLFxuICAgICAgICBwYXR0ZXJuOiAnVGltZScsXG4gICAgICAgIGFsaWFzOiAnVGltZScsXG4gICAgICAgIGRhdGVGb3JtYXQ6ICdZWVlZLU1NLUREIEhIOm1tOnNzJyxcbiAgICAgICAgYWxpZ246ICdhdXRvJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHVuaXQ6ICdzaG9ydCcsXG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICBhbGlhczogJycsXG4gICAgICAgIGRlY2ltYWxzOiAyLFxuICAgICAgICBjb2xvcnM6IFsncmdiYSgyNDUsIDU0LCA1NCwgMC45KScsICdyZ2JhKDIzNywgMTI5LCA0MCwgMC44OSknLCAncmdiYSg1MCwgMTcyLCA0NSwgMC45NyknXSxcbiAgICAgICAgY29sb3JNb2RlOiBudWxsLFxuICAgICAgICBwYXR0ZXJuOiAnLy4qLycsXG4gICAgICAgIHRocmVzaG9sZHM6IFtdLFxuICAgICAgICBhbGlnbjogJ3JpZ2h0JyxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBjb2x1bW5zOiBbXSxcblxuICAgIGZvbnRTaXplOiAnMTAwJScsXG4gICAgc29ydDogeyBjb2w6IDAsIGRlc2M6IHRydWUgfSxcbiAgfTtcblxuICBzdGF0aWMgJGluamVjdCA9IFsnJHNjb3BlJywgJyRpbmplY3RvcicsICdhbm5vdGF0aW9uc1NydicsICckc2FuaXRpemUnXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAkc2NvcGU6IGFueSxcbiAgICAkaW5qZWN0b3I6IGFueSxcbiAgICBwcml2YXRlIGFubm90YXRpb25zU3J2OiBhbnksXG4gICAgcHJpdmF0ZSAkc2FuaXRpemU6IGFueVxuICApIHtcbiAgICBzdXBlcigkc2NvcGUsICRpbmplY3Rvcik7XG5cbiAgICB0aGlzLnBhZ2VJbmRleCA9IDA7XG5cbiAgICBpZiAodGhpcy5wYW5lbC5zdHlsZXMgPT09IHZvaWQgMCkge1xuICAgICAgdGhpcy5wYW5lbC5zdHlsZXMgPSB0aGlzLnBhbmVsLmNvbHVtbnM7XG4gICAgICB0aGlzLnBhbmVsLmNvbHVtbnMgPSB0aGlzLnBhbmVsLmZpZWxkcztcbiAgICAgIGRlbGV0ZSB0aGlzLnBhbmVsLmNvbHVtbnM7XG4gICAgICBkZWxldGUgdGhpcy5wYW5lbC5maWVsZHM7XG4gICAgfVxuXG4gICAgZGVmYXVsdHModGhpcy5wYW5lbCwgdGhpcy5wYW5lbERlZmF1bHRzKTtcblxuICAgIHRoaXMucGFuZWxIYXNSb3dDb2xvck1vZGUgPSBCb29sZWFuKHRoaXMucGFuZWwuc3R5bGVzLmZpbmQoKHN0eWxlOiBhbnkpID0+IHN0eWxlLmNvbG9yTW9kZSA9PT0gJ3JvdycpKTtcbiAgICB0aGlzLnBhbmVsSGFzTGlua3MgPSBCb29sZWFuKHRoaXMucGFuZWwuc3R5bGVzLmZpbmQoKHN0eWxlOiBhbnkpID0+IHN0eWxlLmxpbmspKTtcblxuICAgIHRoaXMuZXZlbnRzLm9uKFBhbmVsRXZlbnRzLmRhdGFSZWNlaXZlZCwgdGhpcy5vbkRhdGFSZWNlaXZlZC5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmV2ZW50cy5vbihQYW5lbEV2ZW50cy5kYXRhU25hcHNob3RMb2FkLCB0aGlzLm9uRGF0YVJlY2VpdmVkLmJpbmQodGhpcykpO1xuICAgIHRoaXMuZXZlbnRzLm9uKFBhbmVsRXZlbnRzLmVkaXRNb2RlSW5pdGlhbGl6ZWQsIHRoaXMub25Jbml0RWRpdE1vZGUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBvbkluaXRFZGl0TW9kZSgpIHtcbiAgICB0aGlzLmFkZEVkaXRvclRhYignT3B0aW9ucycsIHRhYmxlUGFuZWxFZGl0b3IsIDIpO1xuICAgIHRoaXMuYWRkRWRpdG9yVGFiKCdDb2x1bW4gU3R5bGVzJywgY29sdW1uT3B0aW9uc1RhYiwgMyk7XG4gIH1cblxuICBtaWdyYXRlVG9QYW5lbCh0eXBlOiBzdHJpbmcpIHtcbiAgICB0aGlzLm9uUGx1Z2luVHlwZUNoYW5nZShjb25maWcucGFuZWxzW3R5cGVdKTtcbiAgfVxuXG4gIGlzc3VlUXVlcmllcyhkYXRhc291cmNlOiBhbnkpIHtcbiAgICB0aGlzLnBhZ2VJbmRleCA9IDA7XG5cbiAgICBpZiAodGhpcy5wYW5lbC50cmFuc2Zvcm0gPT09ICdhbm5vdGF0aW9ucycpIHtcbiAgICAgIHJldHVybiB0aGlzLmFubm90YXRpb25zU3J2XG4gICAgICAgIC5nZXRBbm5vdGF0aW9ucyh7XG4gICAgICAgICAgZGFzaGJvYXJkOiB0aGlzLmRhc2hib2FyZCxcbiAgICAgICAgICBwYW5lbDogdGhpcy5wYW5lbCxcbiAgICAgICAgICByYW5nZTogdGhpcy5yYW5nZSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKGFubm86IGFueSkgPT4ge1xuICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuZGF0YVJhdyA9IGFubm87XG4gICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSAwO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgcmV0dXJuIHsgZGF0YTogdGhpcy5kYXRhUmF3IH07IC8vIE5vdCB1c2VkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBzdXBlci5pc3N1ZVF1ZXJpZXMoZGF0YXNvdXJjZSk7XG4gIH1cblxuICBvbkRhdGFSZWNlaXZlZChkYXRhTGlzdDogYW55KSB7XG4gICAgdGhpcy5kYXRhUmF3ID0gZGF0YUxpc3Q7XG4gICAgdGhpcy5wYWdlSW5kZXggPSAwO1xuXG4gICAgLy8gYXV0b21hdGljYWxseSBjb3JyZWN0IHRyYW5zZm9ybSBtb2RlIGJhc2VkIG9uIGRhdGFcbiAgICBpZiAodGhpcy5kYXRhUmF3ICYmIHRoaXMuZGF0YVJhdy5sZW5ndGgpIHtcbiAgICAgIGlmIChpc1RhYmxlRGF0YSh0aGlzLmRhdGFSYXdbMF0pKSB7XG4gICAgICAgIHRoaXMucGFuZWwudHJhbnNmb3JtID0gJ3RhYmxlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFSYXdbMF0udHlwZSA9PT0gJ2RvY3MnKSB7XG4gICAgICAgICAgdGhpcy5wYW5lbC50cmFuc2Zvcm0gPSAnanNvbic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRoaXMucGFuZWwudHJhbnNmb3JtID09PSAndGFibGUnIHx8IHRoaXMucGFuZWwudHJhbnNmb3JtID09PSAnanNvbicpIHtcbiAgICAgICAgICAgIHRoaXMucGFuZWwudHJhbnNmb3JtID0gJ3RpbWVzZXJpZXNfdG9fcm93cyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLnRhYmxlID0gdHJhbnNmb3JtRGF0YVRvVGFibGUodGhpcy5kYXRhUmF3LCB0aGlzLnBhbmVsKTtcbiAgICB0aGlzLnRhYmxlLnNvcnQodGhpcy5wYW5lbC5zb3J0KTtcblxuICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgVGFibGVSZW5kZXJlcihcbiAgICAgIHRoaXMucGFuZWwsXG4gICAgICB0aGlzLnRhYmxlLFxuICAgICAgdGhpcy5kYXNoYm9hcmQuZ2V0VGltZXpvbmUoKSxcbiAgICAgIHRoaXMuJHNhbml0aXplLFxuICAgICAgdGhpcy50ZW1wbGF0ZVNydixcbiAgICAgIGNvbmZpZy50aGVtZTJcbiAgICApO1xuXG4gICAgcmV0dXJuIHN1cGVyLnJlbmRlcih0aGlzLnRhYmxlKTtcbiAgfVxuXG4gIHRvZ2dsZUNvbHVtblNvcnQoY29sOiBhbnksIGNvbEluZGV4OiBhbnkpIHtcbiAgICAvLyByZW1vdmUgc29ydCBmbGFnIGZyb20gY3VycmVudCBjb2x1bW5cbiAgICBpZiAodGhpcy50YWJsZS5jb2x1bW5zW3RoaXMucGFuZWwuc29ydC5jb2xdKSB7XG4gICAgICB0aGlzLnRhYmxlLmNvbHVtbnNbdGhpcy5wYW5lbC5zb3J0LmNvbF0uc29ydCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhbmVsLnNvcnQuY29sID09PSBjb2xJbmRleCkge1xuICAgICAgaWYgKHRoaXMucGFuZWwuc29ydC5kZXNjKSB7XG4gICAgICAgIHRoaXMucGFuZWwuc29ydC5kZXNjID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhbmVsLnNvcnQuY29sID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wYW5lbC5zb3J0LmNvbCA9IGNvbEluZGV4O1xuICAgICAgdGhpcy5wYW5lbC5zb3J0LmRlc2MgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgbGluayhzY29wZTogYW55LCBlbGVtOiBKUXVlcnksIGF0dHJzOiBhbnksIGN0cmw6IFRhYmxlUGFuZWxDdHJsKSB7XG4gICAgbGV0IGRhdGE6IGFueTtcbiAgICBjb25zdCBwYW5lbCA9IGN0cmwucGFuZWw7XG4gICAgbGV0IHBhZ2VDb3VudCA9IDA7XG5cbiAgICBmdW5jdGlvbiBnZXRUYWJsZUhlaWdodCgpIHtcbiAgICAgIGxldCBwYW5lbEhlaWdodCA9IGN0cmwuaGVpZ2h0O1xuXG4gICAgICBpZiAocGFnZUNvdW50ID4gMSkge1xuICAgICAgICBwYW5lbEhlaWdodCAtPSAyNjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhbmVsSGVpZ2h0IC0gMzEgKyAncHgnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcGVuZFRhYmxlUm93cyh0Ym9keUVsZW06IEpRdWVyeSkge1xuICAgICAgY3RybC5yZW5kZXJlci5zZXRUYWJsZShkYXRhKTtcbiAgICAgIHRib2R5RWxlbS5lbXB0eSgpO1xuICAgICAgdGJvZHlFbGVtLmh0bWwoY3RybC5yZW5kZXJlci5yZW5kZXIoY3RybC5wYWdlSW5kZXgpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzd2l0Y2hQYWdlKGU6IGFueSkge1xuICAgICAgY29uc3QgZWwgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICBjdHJsLnBhZ2VJbmRleCA9IHBhcnNlSW50KGVsLnRleHQoKSwgMTApIC0gMTtcbiAgICAgIHJlbmRlclBhbmVsKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwZW5kUGFnaW5hdGlvbkNvbnRyb2xzKGZvb3RlckVsZW06IEpRdWVyeSkge1xuICAgICAgZm9vdGVyRWxlbS5lbXB0eSgpO1xuXG4gICAgICBjb25zdCBwYWdlU2l6ZSA9IHBhbmVsLnBhZ2VTaXplIHx8IDEwMDtcbiAgICAgIHBhZ2VDb3VudCA9IE1hdGguY2VpbChkYXRhLnJvd3MubGVuZ3RoIC8gcGFnZVNpemUpO1xuICAgICAgaWYgKHBhZ2VDb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXJ0UGFnZSA9IE1hdGgubWF4KGN0cmwucGFnZUluZGV4IC0gMywgMCk7XG4gICAgICBjb25zdCBlbmRQYWdlID0gTWF0aC5taW4ocGFnZUNvdW50LCBzdGFydFBhZ2UgKyA5KTtcblxuICAgICAgY29uc3QgcGFnaW5hdGlvbkxpc3QgPSAkKCc8dWw+PC91bD4nKTtcblxuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0UGFnZTsgaSA8IGVuZFBhZ2U7IGkrKykge1xuICAgICAgICBjb25zdCBhY3RpdmVDbGFzcyA9IGkgPT09IGN0cmwucGFnZUluZGV4ID8gJ2FjdGl2ZScgOiAnJztcbiAgICAgICAgY29uc3QgcGFnZUxpbmtFbGVtID0gJChcbiAgICAgICAgICAnPGxpPjxhIGNsYXNzPVwidGFibGUtcGFuZWwtcGFnZS1saW5rIHBvaW50ZXIgJyArIGFjdGl2ZUNsYXNzICsgJ1wiPicgKyAoaSArIDEpICsgJzwvYT48L2xpPidcbiAgICAgICAgKTtcbiAgICAgICAgcGFnaW5hdGlvbkxpc3QuYXBwZW5kKHBhZ2VMaW5rRWxlbSk7XG4gICAgICB9XG5cbiAgICAgIGZvb3RlckVsZW0uYXBwZW5kKHBhZ2luYXRpb25MaXN0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJQYW5lbCgpIHtcbiAgICAgIGNvbnN0IHBhbmVsRWxlbSA9IGVsZW0ucGFyZW50cygnLnBhbmVsLWNvbnRlbnQnKTtcbiAgICAgIGNvbnN0IHJvb3RFbGVtID0gZWxlbS5maW5kKCcudGFibGUtcGFuZWwtc2Nyb2xsJyk7XG4gICAgICBjb25zdCB0Ym9keUVsZW0gPSBlbGVtLmZpbmQoJ3Rib2R5Jyk7XG4gICAgICBjb25zdCBmb290ZXJFbGVtID0gZWxlbS5maW5kKCcudGFibGUtcGFuZWwtZm9vdGVyJyk7XG5cbiAgICAgIGVsZW0uY3NzKHsgJ2ZvbnQtc2l6ZSc6IHBhbmVsLmZvbnRTaXplIH0pO1xuICAgICAgcGFuZWxFbGVtLmFkZENsYXNzKCd0YWJsZS1wYW5lbC1jb250ZW50Jyk7XG5cbiAgICAgIGFwcGVuZFRhYmxlUm93cyh0Ym9keUVsZW0pO1xuICAgICAgYXBwZW5kUGFnaW5hdGlvbkNvbnRyb2xzKGZvb3RlckVsZW0pO1xuXG4gICAgICByb290RWxlbS5jc3MoeyAnbWF4LWhlaWdodCc6IGdldFRhYmxlSGVpZ2h0KCkgfSk7XG4gICAgfVxuXG4gICAgLy8gaG9vayB1cCBsaW5rIHRvb2x0aXBzXG4gICAgZWxlbS50b29sdGlwKHtcbiAgICAgIHNlbGVjdG9yOiAnW2RhdGEtbGluay10b29sdGlwXScsXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBhZGRGaWx0ZXJDbGlja2VkKGU6IGFueSkge1xuICAgICAgY29uc3QgZmlsdGVyRGF0YSA9ICQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKCk7XG4gICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBkYXRhc291cmNlOiBwYW5lbC5kYXRhc291cmNlLFxuICAgICAgICBrZXk6IGRhdGEuY29sdW1uc1tmaWx0ZXJEYXRhLmNvbHVtbl0udGV4dCxcbiAgICAgICAgdmFsdWU6IGRhdGEucm93c1tmaWx0ZXJEYXRhLnJvd11bZmlsdGVyRGF0YS5jb2x1bW5dLFxuICAgICAgICBvcGVyYXRvcjogZmlsdGVyRGF0YS5vcGVyYXRvcixcbiAgICAgIH07XG5cbiAgICAgIGRpc3BhdGNoKGFwcGx5RmlsdGVyRnJvbVRhYmxlKG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICBlbGVtLm9uKCdjbGljaycsICcudGFibGUtcGFuZWwtcGFnZS1saW5rJywgc3dpdGNoUGFnZSk7XG4gICAgZWxlbS5vbignY2xpY2snLCAnLnRhYmxlLXBhbmVsLWZpbHRlci1saW5rJywgYWRkRmlsdGVyQ2xpY2tlZCk7XG5cbiAgICBjb25zdCB1bmJpbmREZXN0cm95ID0gc2NvcGUuJG9uKCckZGVzdHJveScsICgpID0+IHtcbiAgICAgIGVsZW0ub2ZmKCdjbGljaycsICcudGFibGUtcGFuZWwtcGFnZS1saW5rJyk7XG4gICAgICBlbGVtLm9mZignY2xpY2snLCAnLnRhYmxlLXBhbmVsLWZpbHRlci1saW5rJyk7XG4gICAgICB1bmJpbmREZXN0cm95KCk7XG4gICAgfSk7XG5cbiAgICBjdHJsLmV2ZW50cy5vbihQYW5lbEV2ZW50cy5yZW5kZXIsIChyZW5kZXJEYXRhOiBhbnkpID0+IHtcbiAgICAgIGRhdGEgPSByZW5kZXJEYXRhIHx8IGRhdGE7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICByZW5kZXJQYW5lbCgpO1xuICAgICAgfVxuICAgICAgY3RybC5yZW5kZXJpbmdDb21wbGV0ZWQoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcGx1Z2luID0gbmV3IFBhbmVsUGx1Z2luKG51bGwgYXMgdW5rbm93biBhcyBDb21wb25lbnRUeXBlPFBhbmVsUHJvcHM8YW55Pj4pO1xucGx1Z2luLmFuZ3VsYXJQYW5lbEN0cmwgPSBUYWJsZVBhbmVsQ3RybDtcbnBsdWdpbi5zZXROb1BhZGRpbmcoKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/table-old/module.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/table-old/renderer.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TableRenderer: () => (/* binding */ TableRenderer)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/text/string.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/text/index.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/formatter.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/valueFormats/valueFormats.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/templateSrv.ts\");\n/* harmony import */ var _column_options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/plugins/panel/table-old/column_options.ts\");\n\n\n\n\n\nclass TableRenderer {\n  constructor(panel, table, timeZone, sanitize, templateSrv = (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_2__.getTemplateSrv)(), theme) {\n    this.panel = panel;\n    this.table = table;\n    this.timeZone = timeZone;\n    this.sanitize = sanitize;\n    this.templateSrv = templateSrv;\n    this.theme = theme;\n    this.formatters = [];\n    this.initColumns();\n  }\n  setTable(table) {\n    this.table = table;\n    this.initColumns();\n  }\n  initColumns() {\n    this.formatters = [];\n    this.colorState = {};\n    for (let colIndex = 0; colIndex < this.table.columns.length; colIndex++) {\n      const column = this.table.columns[colIndex];\n      column.title = column.text;\n      for (let i = 0; i < this.panel.styles.length; i++) {\n        const style = this.panel.styles[i];\n        const escapedPattern = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.stringStartsAsRegEx)(style.pattern) ? style.pattern : (0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.escapeStringForRegex)((0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.unEscapeStringFromRegex)(style.pattern));\n        const regex = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.stringToJsRegex)(escapedPattern);\n        if (column.text.match(regex)) {\n          column.style = style;\n          if (style.alias) {\n            column.title = _grafana_data__WEBPACK_IMPORTED_MODULE_4__.textUtil.escapeHtml(column.text.replace(regex, style.alias));\n          }\n          break;\n        }\n      }\n      this.formatters[colIndex] = this.createColumnFormatter(column);\n    }\n  }\n  getColorForValue(value, style) {\n    if (!style.thresholds || !style.colors) {\n      return null;\n    }\n    for (let i = style.thresholds.length; i > 0; i--) {\n      if (value >= style.thresholds[i - 1]) {\n        return this.theme.visualization.getColorByName(style.colors[i]);\n      }\n    }\n    return this.theme.visualization.getColorByName((0,lodash__WEBPACK_IMPORTED_MODULE_0__.first)(style.colors));\n  }\n  defaultCellFormatter(v, style) {\n    if (v === null || v === void 0 || v === void 0) {\n      return \"\";\n    }\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isArray)(v)) {\n      v = v.join(\", \");\n    }\n    if (style && style.sanitize) {\n      return this.sanitize(v);\n    } else {\n      return (0,lodash__WEBPACK_IMPORTED_MODULE_0__.escape)(v);\n    }\n  }\n  createColumnFormatter(column) {\n    if (!column.style) {\n      return this.defaultCellFormatter;\n    }\n    if (column.style.type === \"hidden\") {\n      return (v) => void 0;\n    }\n    if (column.style.type === \"date\") {\n      return (v) => {\n        if (v === void 0 || v === null) {\n          return \"-\";\n        }\n        if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isArray)(v)) {\n          v = v[0];\n        }\n        if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isString)(v) && !isNaN(v) && v.length > 12) {\n          v = parseInt(v, 10);\n        }\n        if (!column.style.dateFormat) {\n          return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_5__.dateTimeFormatISO)(v, {\n            timeZone: this.timeZone\n          });\n        }\n        return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_5__.dateTimeFormat)(v, {\n          format: column.style.dateFormat,\n          timeZone: this.timeZone\n        });\n      };\n    }\n    if (column.style.type === \"string\") {\n      return (v) => {\n        if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isArray)(v)) {\n          v = v.join(\", \");\n        }\n        const mappingType = column.style.mappingType || 0;\n        if (mappingType === 1 && column.style.valueMaps) {\n          for (let i = 0; i < column.style.valueMaps.length; i++) {\n            const map = column.style.valueMaps[i];\n            if (v === null) {\n              if (map.value === \"null\") {\n                return map.text;\n              }\n              continue;\n            }\n            if (!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isString)(v) && Number(map.value) === Number(v) || map.value === v) {\n              this.setColorState(v, column.style);\n              return this.defaultCellFormatter(map.text, column.style);\n            }\n          }\n        }\n        if (mappingType === 2 && column.style.rangeMaps) {\n          for (let i = 0; i < column.style.rangeMaps.length; i++) {\n            const map = column.style.rangeMaps[i];\n            if (v === null) {\n              if (map.from === \"null\" && map.to === \"null\") {\n                return map.text;\n              }\n              continue;\n            }\n            if (Number(map.from) <= Number(v) && Number(map.to) >= Number(v)) {\n              this.setColorState(v, column.style);\n              return this.defaultCellFormatter(map.text, column.style);\n            }\n          }\n        }\n        if (v === null || v === void 0) {\n          return \"-\";\n        }\n        this.setColorState(v, column.style);\n        return this.defaultCellFormatter(v, column.style);\n      };\n    }\n    if (column.style.type === \"number\") {\n      const valueFormatter = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.getValueFormat)(column.unit || column.style.unit);\n      return (v) => {\n        if (v === null || v === void 0) {\n          return \"-\";\n        }\n        if (isNaN(v) || (0,lodash__WEBPACK_IMPORTED_MODULE_0__.isArray)(v)) {\n          return this.defaultCellFormatter(v, column.style);\n        }\n        this.setColorState(v, column.style);\n        return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.formattedValueToString)(valueFormatter(v, column.style.decimals, null));\n      };\n    }\n    return (value) => {\n      return this.defaultCellFormatter(value, column.style);\n    };\n  }\n  setColorState(value, style) {\n    if (!style.colorMode) {\n      return;\n    }\n    if (value === null || value === void 0 || (0,lodash__WEBPACK_IMPORTED_MODULE_0__.isArray)(value)) {\n      return;\n    }\n    const numericValue = Number(value);\n    if (isNaN(numericValue)) {\n      return;\n    }\n    this.colorState[style.colorMode] = this.getColorForValue(numericValue, style);\n  }\n  renderRowVariables(rowIndex) {\n    const scopedVars = {};\n    let cellVariable;\n    const row = this.table.rows[rowIndex];\n    for (let i = 0; i < row.length; i++) {\n      cellVariable = `__cell_${i}`;\n      scopedVars[cellVariable] = { value: row[i], text: row[i] ? row[i].toString() : \"\" };\n    }\n    return scopedVars;\n  }\n  formatColumnValue(colIndex, value) {\n    const fmt = this.formatters[colIndex];\n    if (fmt) {\n      return fmt(value);\n    }\n    return value;\n  }\n  renderCell(columnIndex, rowIndex, value, addWidthHack = false) {\n    value = this.formatColumnValue(columnIndex, value);\n    const column = this.table.columns[columnIndex];\n    const cellStyles = [];\n    let cellStyle = \"\";\n    const cellClasses = [];\n    let cellClass = \"\";\n    if (this.colorState.cell) {\n      cellStyles.push(\"background-color:\" + this.colorState.cell);\n      cellClasses.push(\"table-panel-color-cell\");\n      this.colorState.cell = null;\n    } else if (this.colorState.value) {\n      cellStyles.push(\"color:\" + this.colorState.value);\n      this.colorState.value = null;\n    }\n    let columnHtml = \"\";\n    if (addWidthHack) {\n      columnHtml = '<div class=\"table-panel-width-hack\">' + this.table.columns[columnIndex].title + \"</div>\";\n    }\n    if (value === void 0) {\n      cellStyles.push(\"display:none\");\n      column.hidden = true;\n    } else {\n      column.hidden = false;\n    }\n    if (column.hidden === true) {\n      return \"\";\n    }\n    if (column.style && column.style.preserveFormat) {\n      cellClasses.push(\"table-panel-cell-pre\");\n    }\n    if (column.style && column.style.align) {\n      const textAlign = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.find)(_column_options__WEBPACK_IMPORTED_MODULE_1__.ColumnOptionsCtrl.alignTypesEnum, [\"text\", column.style.align]);\n      if (textAlign && textAlign[\"value\"]) {\n        cellStyles.push(`text-align:${textAlign[\"value\"]}`);\n      }\n    }\n    if (cellStyles.length) {\n      cellStyle = ' style=\"' + cellStyles.join(\";\") + '\"';\n    }\n    if (column.style && column.style.link) {\n      const scopedVars = this.renderRowVariables(rowIndex);\n      scopedVars[\"__cell\"] = { value, text: value ? value.toString() : \"\" };\n      const cellLink = this.templateSrv.replace(column.style.linkUrl, scopedVars, encodeURIComponent);\n      const sanitizedCellLink = _grafana_data__WEBPACK_IMPORTED_MODULE_4__.textUtil.sanitizeUrl(cellLink);\n      const cellLinkTooltip = _grafana_data__WEBPACK_IMPORTED_MODULE_4__.textUtil.escapeHtml(this.templateSrv.replace(column.style.linkTooltip, scopedVars));\n      const cellTarget = column.style.linkTargetBlank ? \"_blank\" : \"\";\n      cellClasses.push(\"table-panel-cell-link\");\n      columnHtml += `<a href=\"${sanitizedCellLink}\" target=\"${cellTarget}\" data-link-tooltip data-original-title=\"${cellLinkTooltip}\" data-placement=\"right\"${cellStyle}>`;\n      columnHtml += `${value}`;\n      columnHtml += `</a>`;\n    } else {\n      columnHtml += value;\n    }\n    if (column.filterable) {\n      cellClasses.push(\"table-panel-cell-filterable\");\n      columnHtml += `<a class=\"table-panel-filter-link\" data-link-tooltip data-original-title=\"Filter out value\" data-placement=\"bottom\"\n           data-row=\"${rowIndex}\" data-column=\"${columnIndex}\" data-operator=\"!=\">`;\n      columnHtml += `<i class=\"fa fa-search-minus\"></i>`;\n      columnHtml += `</a>`;\n      columnHtml += `<a class=\"table-panel-filter-link\" data-link-tooltip data-original-title=\"Filter for value\" data-placement=\"bottom\"\n           data-row=\"${rowIndex}\" data-column=\"${columnIndex}\" data-operator=\"=\">`;\n      columnHtml += `<i class=\"fa fa-search-plus\"></i>`;\n      columnHtml += `</a>`;\n    }\n    if (cellClasses.length) {\n      cellClass = ' class=\"' + cellClasses.join(\" \") + '\"';\n    }\n    columnHtml = \"<td\" + cellClass + cellStyle + \">\" + columnHtml + \"</td>\";\n    return columnHtml;\n  }\n  render(page) {\n    const pageSize = this.panel.pageSize || 100;\n    const startPos = page * pageSize;\n    const endPos = Math.min(startPos + pageSize, this.table.rows.length);\n    let html = \"\";\n    for (let y = startPos; y < endPos; y++) {\n      const row = this.table.rows[y];\n      let cellHtml = \"\";\n      let rowStyle = \"\";\n      const rowClasses = [];\n      let rowClass = \"\";\n      for (let i = 0; i < this.table.columns.length; i++) {\n        cellHtml += this.renderCell(i, y, row[i], y === startPos);\n      }\n      if (this.colorState.row) {\n        rowStyle = ' style=\"background-color:' + this.colorState.row + '\"';\n        rowClasses.push(\"table-panel-color-row\");\n        this.colorState.row = null;\n      }\n      if (rowClasses.length) {\n        rowClass = ' class=\"' + rowClasses.join(\" \") + '\"';\n      }\n      html += \"<tr \" + rowClass + rowStyle + \">\" + cellHtml + \"</tr>\";\n    }\n    return html;\n  }\n  render_values() {\n    const rows = [];\n    const visibleColumns = this.table.columns.filter((column) => !column.hidden);\n    for (let y = 0; y < this.table.rows.length; y++) {\n      const row = this.table.rows[y];\n      const newRow = [];\n      for (let i = 0; i < this.table.columns.length; i++) {\n        if (!this.table.columns[i].hidden) {\n          newRow.push(this.formatColumnValue(i, row[i]));\n        }\n      }\n      rows.push(newRow);\n    }\n    return {\n      columns: visibleColumns,\n      rows\n    };\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvdGFibGUtb2xkL3JlbmRlcmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFlaEQ7QUFDcUM7QUFFVjtBQUczQixNQUFNLGNBQWM7QUFBQSxFQUl6QixZQUNVLE9BQ0EsT0FDQSxVQUNBLFVBQ0EsY0FBMkIsZ0VBQWMsQ0FBQyxHQUMxQyxPQUNSO0FBTlE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVFYsc0JBQW9CLENBQUM7QUFXbkIsU0FBSyxZQUFZO0FBQUEsRUFDbkI7QUFBQSxFQUVBLFNBQVMsT0FBeUI7QUFDaEMsU0FBSyxRQUFRO0FBRWIsU0FBSyxZQUFZO0FBQUEsRUFDbkI7QUFBQSxFQUVBLGNBQWM7QUFDWixTQUFLLGFBQWEsQ0FBQztBQUNuQixTQUFLLGFBQWEsQ0FBQztBQUVuQixhQUFTLFdBQVcsR0FBRyxXQUFXLEtBQUssTUFBTSxRQUFRLFFBQVEsWUFBWTtBQUN2RSxZQUFNLFNBQVMsS0FBSyxNQUFNLFFBQVEsUUFBUTtBQUMxQyxhQUFPLFFBQVEsT0FBTztBQUV0QixlQUFTLElBQUksR0FBRyxJQUFJLEtBQUssTUFBTSxPQUFPLFFBQVEsS0FBSztBQUNqRCxjQUFNLFFBQVEsS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUVqQyxjQUFNLGlCQUFpQixrRUFBbUIsQ0FBQyxNQUFNLE9BQU8sSUFDcEQsTUFBTSxVQUNOLG1FQUFvQixDQUFDLHNFQUF1QixDQUFDLE1BQU0sT0FBTyxDQUFDO0FBQy9ELGNBQU0sUUFBUSw4REFBZSxDQUFDLGNBQWM7QUFDNUMsWUFBSSxPQUFPLEtBQUssTUFBTSxLQUFLLEdBQUc7QUFDNUIsaUJBQU8sUUFBUTtBQUVmLGNBQUksTUFBTSxPQUFPO0FBQ2YsbUJBQU8sUUFBUSxtREFBUSxDQUFDLFdBQVcsT0FBTyxLQUFLLFFBQVEsT0FBTyxNQUFNLEtBQUssQ0FBQztBQUFBLFVBQzVFO0FBRUE7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUVBLFdBQUss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O0FBQUEsTUFDVDtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL3RhYmxlLW9sZC9yZW5kZXJlci50cz9hODdkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZpbmQsIGZpcnN0LCBpc0FycmF5LCBpc1N0cmluZywgZXNjYXBlIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgZXNjYXBlU3RyaW5nRm9yUmVnZXgsXG4gIGZvcm1hdHRlZFZhbHVlVG9TdHJpbmcsXG4gIGdldFZhbHVlRm9ybWF0LFxuICBTY29wZWRWYXJzLFxuICBzdHJpbmdTdGFydHNBc1JlZ0V4LFxuICBzdHJpbmdUb0pzUmVnZXgsXG4gIHRleHRVdGlsLFxuICB1bkVzY2FwZVN0cmluZ0Zyb21SZWdleCxcbiAgVGltZVpvbmUsXG4gIGRhdGVUaW1lRm9ybWF0SVNPLFxuICBkYXRlVGltZUZvcm1hdCxcbiAgR3JhZmFuYVRoZW1lMixcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBnZXRUZW1wbGF0ZVNydiwgVGVtcGxhdGVTcnYgfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcblxuaW1wb3J0IHsgQ29sdW1uT3B0aW9uc0N0cmwgfSBmcm9tICcuL2NvbHVtbl9vcHRpb25zJztcbmltcG9ydCB7IENvbHVtblJlbmRlciwgVGFibGVSZW5kZXJNb2RlbCwgQ29sdW1uU3R5bGUgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIge1xuICBmb3JtYXR0ZXJzOiBhbnlbXSA9IFtdO1xuICBjb2xvclN0YXRlOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBwYW5lbDogeyBzdHlsZXM6IENvbHVtblN0eWxlW107IHBhZ2VTaXplOiBudW1iZXIgfSxcbiAgICBwcml2YXRlIHRhYmxlOiBUYWJsZVJlbmRlck1vZGVsLFxuICAgIHByaXZhdGUgdGltZVpvbmU6IFRpbWVab25lLFxuICAgIHByaXZhdGUgc2FuaXRpemU6ICh2OiBhbnkpID0+IGFueSxcbiAgICBwcml2YXRlIHRlbXBsYXRlU3J2OiBUZW1wbGF0ZVNydiA9IGdldFRlbXBsYXRlU3J2KCksXG4gICAgcHJpdmF0ZSB0aGVtZTogR3JhZmFuYVRoZW1lMlxuICApIHtcbiAgICB0aGlzLmluaXRDb2x1bW5zKCk7XG4gIH1cblxuICBzZXRUYWJsZSh0YWJsZTogVGFibGVSZW5kZXJNb2RlbCkge1xuICAgIHRoaXMudGFibGUgPSB0YWJsZTtcblxuICAgIHRoaXMuaW5pdENvbHVtbnMoKTtcbiAgfVxuXG4gIGluaXRDb2x1bW5zKCkge1xuICAgIHRoaXMuZm9ybWF0dGVycyA9IFtdO1xuICAgIHRoaXMuY29sb3JTdGF0ZSA9IHt9O1xuXG4gICAgZm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IHRoaXMudGFibGUuY29sdW1ucy5sZW5ndGg7IGNvbEluZGV4KyspIHtcbiAgICAgIGNvbnN0IGNvbHVtbiA9IHRoaXMudGFibGUuY29sdW1uc1tjb2xJbmRleF07XG4gICAgICBjb2x1bW4udGl0bGUgPSBjb2x1bW4udGV4dDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhbmVsLnN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMucGFuZWwuc3R5bGVzW2ldO1xuXG4gICAgICAgIGNvbnN0IGVzY2FwZWRQYXR0ZXJuID0gc3RyaW5nU3RhcnRzQXNSZWdFeChzdHlsZS5wYXR0ZXJuKVxuICAgICAgICAgID8gc3R5bGUucGF0dGVyblxuICAgICAgICAgIDogZXNjYXBlU3RyaW5nRm9yUmVnZXgodW5Fc2NhcGVTdHJpbmdGcm9tUmVnZXgoc3R5bGUucGF0dGVybikpO1xuICAgICAgICBjb25zdCByZWdleCA9IHN0cmluZ1RvSnNSZWdleChlc2NhcGVkUGF0dGVybik7XG4gICAgICAgIGlmIChjb2x1bW4udGV4dC5tYXRjaChyZWdleCkpIHtcbiAgICAgICAgICBjb2x1bW4uc3R5bGUgPSBzdHlsZTtcblxuICAgICAgICAgIGlmIChzdHlsZS5hbGlhcykge1xuICAgICAgICAgICAgY29sdW1uLnRpdGxlID0gdGV4dFV0aWwuZXNjYXBlSHRtbChjb2x1bW4udGV4dC5yZXBsYWNlKHJlZ2V4LCBzdHlsZS5hbGlhcykpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZm9ybWF0dGVyc1tjb2xJbmRleF0gPSB0aGlzLmNyZWF0ZUNvbHVtbkZvcm1hdHRlcihjb2x1bW4pO1xuICAgIH1cbiAgfVxuXG4gIGdldENvbG9yRm9yVmFsdWUodmFsdWU6IG51bWJlciwgc3R5bGU6IENvbHVtblN0eWxlKSB7XG4gICAgaWYgKCFzdHlsZS50aHJlc2hvbGRzIHx8ICFzdHlsZS5jb2xvcnMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gc3R5bGUudGhyZXNob2xkcy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcbiAgICAgIGlmICh2YWx1ZSA+PSBzdHlsZS50aHJlc2hvbGRzW2kgLSAxXSkge1xuICAgICAgICByZXR1cm4gdGhpcy50aGVtZS52aXN1YWxpemF0aW9uLmdldENvbG9yQnlOYW1lKHN0eWxlLmNvbG9yc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRoZW1lLnZpc3VhbGl6YXRpb24uZ2V0Q29sb3JCeU5hbWUoZmlyc3Qoc3R5bGUuY29sb3JzKSk7XG4gIH1cblxuICBkZWZhdWx0Q2VsbEZvcm1hdHRlcih2OiBhbnksIHN0eWxlOiBDb2x1bW5TdHlsZSkge1xuICAgIGlmICh2ID09PSBudWxsIHx8IHYgPT09IHZvaWQgMCB8fCB2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBpZiAoaXNBcnJheSh2KSkge1xuICAgICAgdiA9IHYuam9pbignLCAnKTtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUgJiYgc3R5bGUuc2FuaXRpemUpIHtcbiAgICAgIHJldHVybiB0aGlzLnNhbml0aXplKHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZXNjYXBlKHYpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNvbHVtbkZvcm1hdHRlcihjb2x1bW46IENvbHVtblJlbmRlcikge1xuICAgIGlmICghY29sdW1uLnN0eWxlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q2VsbEZvcm1hdHRlcjtcbiAgICB9XG5cbiAgICBpZiAoY29sdW1uLnN0eWxlLnR5cGUgPT09ICdoaWRkZW4nKSB7XG4gICAgICByZXR1cm4gKHY6IGFueSk6IHVuZGVmaW5lZCA9PiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKGNvbHVtbi5zdHlsZS50eXBlID09PSAnZGF0ZScpIHtcbiAgICAgIHJldHVybiAodjogYW55KSA9PiB7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiAnLSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNBcnJheSh2KSkge1xuICAgICAgICAgIHYgPSB2WzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgaXMgYW4gZXBvY2ggKG51bWVyaWMgc3RyaW5nIGFuZCBsZW4gPiAxMilcbiAgICAgICAgaWYgKGlzU3RyaW5nKHYpICYmICFpc05hTih2IGFzIGFueSkgJiYgdi5sZW5ndGggPiAxMikge1xuICAgICAgICAgIHYgPSBwYXJzZUludCh2LCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbHVtbi5zdHlsZS5kYXRlRm9ybWF0KSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGVUaW1lRm9ybWF0SVNPKHYsIHtcbiAgICAgICAgICAgIHRpbWVab25lOiB0aGlzLnRpbWVab25lLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGVUaW1lRm9ybWF0KHYsIHtcbiAgICAgICAgICBmb3JtYXQ6IGNvbHVtbi5zdHlsZS5kYXRlRm9ybWF0LFxuICAgICAgICAgIHRpbWVab25lOiB0aGlzLnRpbWVab25lLFxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGNvbHVtbi5zdHlsZS50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuICh2OiBhbnkpOiBhbnkgPT4ge1xuICAgICAgICBpZiAoaXNBcnJheSh2KSkge1xuICAgICAgICAgIHYgPSB2LmpvaW4oJywgJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXBwaW5nVHlwZSA9IGNvbHVtbi5zdHlsZS5tYXBwaW5nVHlwZSB8fCAwO1xuXG4gICAgICAgIGlmIChtYXBwaW5nVHlwZSA9PT0gMSAmJiBjb2x1bW4uc3R5bGUudmFsdWVNYXBzKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2x1bW4uc3R5bGUudmFsdWVNYXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBtYXAgPSBjb2x1bW4uc3R5bGUudmFsdWVNYXBzW2ldO1xuXG4gICAgICAgICAgICBpZiAodiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAobWFwLnZhbHVlID09PSAnbnVsbCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwLnRleHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFsbG93IGJvdGggbnVtZXJpYyBhbmQgc3RyaW5nIHZhbHVlcyB0byBiZSBtYXBwZWRcbiAgICAgICAgICAgIGlmICgoIWlzU3RyaW5nKHYpICYmIE51bWJlcihtYXAudmFsdWUpID09PSBOdW1iZXIodikpIHx8IG1hcC52YWx1ZSA9PT0gdikge1xuICAgICAgICAgICAgICB0aGlzLnNldENvbG9yU3RhdGUodiwgY29sdW1uLnN0eWxlKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENlbGxGb3JtYXR0ZXIobWFwLnRleHQsIGNvbHVtbi5zdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hcHBpbmdUeXBlID09PSAyICYmIGNvbHVtbi5zdHlsZS5yYW5nZU1hcHMpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbi5zdHlsZS5yYW5nZU1hcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IGNvbHVtbi5zdHlsZS5yYW5nZU1hcHNbaV07XG5cbiAgICAgICAgICAgIGlmICh2ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmIChtYXAuZnJvbSA9PT0gJ251bGwnICYmIG1hcC50byA9PT0gJ251bGwnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcC50ZXh0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoTnVtYmVyKG1hcC5mcm9tKSA8PSBOdW1iZXIodikgJiYgTnVtYmVyKG1hcC50bykgPj0gTnVtYmVyKHYpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0Q29sb3JTdGF0ZSh2LCBjb2x1bW4uc3R5bGUpO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q2VsbEZvcm1hdHRlcihtYXAudGV4dCwgY29sdW1uLnN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodiA9PT0gbnVsbCB8fCB2ID09PSB2b2lkIDApIHtcbiAgICAgICAgICByZXR1cm4gJy0nO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRDb2xvclN0YXRlKHYsIGNvbHVtbi5zdHlsZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDZWxsRm9ybWF0dGVyKHYsIGNvbHVtbi5zdHlsZSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChjb2x1bW4uc3R5bGUudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGNvbnN0IHZhbHVlRm9ybWF0dGVyID0gZ2V0VmFsdWVGb3JtYXQoY29sdW1uLnVuaXQgfHwgY29sdW1uLnN0eWxlLnVuaXQpO1xuXG4gICAgICByZXR1cm4gKHY6IGFueSk6IGFueSA9PiB7XG4gICAgICAgIGlmICh2ID09PSBudWxsIHx8IHYgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHJldHVybiAnLSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNOYU4odikgfHwgaXNBcnJheSh2KSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDZWxsRm9ybWF0dGVyKHYsIGNvbHVtbi5zdHlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldENvbG9yU3RhdGUodiwgY29sdW1uLnN0eWxlKTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlVG9TdHJpbmcodmFsdWVGb3JtYXR0ZXIodiwgY29sdW1uLnN0eWxlLmRlY2ltYWxzLCBudWxsKSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENlbGxGb3JtYXR0ZXIodmFsdWUsIGNvbHVtbi5zdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHNldENvbG9yU3RhdGUodmFsdWU6IGFueSwgc3R5bGU6IENvbHVtblN0eWxlKSB7XG4gICAgaWYgKCFzdHlsZS5jb2xvck1vZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMCB8fCBpc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG51bWVyaWNWYWx1ZSA9IE51bWJlcih2YWx1ZSk7XG4gICAgaWYgKGlzTmFOKG51bWVyaWNWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmNvbG9yU3RhdGVbc3R5bGUuY29sb3JNb2RlXSA9IHRoaXMuZ2V0Q29sb3JGb3JWYWx1ZShudW1lcmljVmFsdWUsIHN0eWxlKTtcbiAgfVxuXG4gIHJlbmRlclJvd1ZhcmlhYmxlcyhyb3dJbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3Qgc2NvcGVkVmFyczogU2NvcGVkVmFycyA9IHt9O1xuICAgIGxldCBjZWxsVmFyaWFibGU7XG4gICAgY29uc3Qgcm93ID0gdGhpcy50YWJsZS5yb3dzW3Jvd0luZGV4XTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvdy5sZW5ndGg7IGkrKykge1xuICAgICAgY2VsbFZhcmlhYmxlID0gYF9fY2VsbF8ke2l9YDtcbiAgICAgIHNjb3BlZFZhcnNbY2VsbFZhcmlhYmxlXSA9IHsgdmFsdWU6IHJvd1tpXSwgdGV4dDogcm93W2ldID8gcm93W2ldLnRvU3RyaW5nKCkgOiAnJyB9O1xuICAgIH1cbiAgICByZXR1cm4gc2NvcGVkVmFycztcbiAgfVxuXG4gIGZvcm1hdENvbHVtblZhbHVlKGNvbEluZGV4OiBudW1iZXIsIHZhbHVlOiBhbnkpIHtcbiAgICBjb25zdCBmbXQgPSB0aGlzLmZvcm1hdHRlcnNbY29sSW5kZXhdO1xuICAgIGlmIChmbXQpIHtcbiAgICAgIHJldHVybiBmbXQodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZW5kZXJDZWxsKGNvbHVtbkluZGV4OiBudW1iZXIsIHJvd0luZGV4OiBudW1iZXIsIHZhbHVlOiBhbnksIGFkZFdpZHRoSGFjayA9IGZhbHNlKSB7XG4gICAgdmFsdWUgPSB0aGlzLmZvcm1hdENvbHVtblZhbHVlKGNvbHVtbkluZGV4LCB2YWx1ZSk7XG5cbiAgICBjb25zdCBjb2x1bW4gPSB0aGlzLnRhYmxlLmNvbHVtbnNbY29sdW1uSW5kZXhdO1xuICAgIGNvbnN0IGNlbGxTdHlsZXMgPSBbXTtcbiAgICBsZXQgY2VsbFN0eWxlID0gJyc7XG4gICAgY29uc3QgY2VsbENsYXNzZXMgPSBbXTtcbiAgICBsZXQgY2VsbENsYXNzID0gJyc7XG5cbiAgICBpZiAodGhpcy5jb2xvclN0YXRlLmNlbGwpIHtcbiAgICAgIGNlbGxTdHlsZXMucHVzaCgnYmFja2dyb3VuZC1jb2xvcjonICsgdGhpcy5jb2xvclN0YXRlLmNlbGwpO1xuICAgICAgY2VsbENsYXNzZXMucHVzaCgndGFibGUtcGFuZWwtY29sb3ItY2VsbCcpO1xuICAgICAgdGhpcy5jb2xvclN0YXRlLmNlbGwgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb2xvclN0YXRlLnZhbHVlKSB7XG4gICAgICBjZWxsU3R5bGVzLnB1c2goJ2NvbG9yOicgKyB0aGlzLmNvbG9yU3RhdGUudmFsdWUpO1xuICAgICAgdGhpcy5jb2xvclN0YXRlLnZhbHVlID0gbnVsbDtcbiAgICB9XG4gICAgLy8gYmVjYXVzZSBvZiB0aGUgZml4ZWQgdGFibGUgaGVhZGVycyBjc3Mgb25seSBzb2x1dGlvblxuICAgIC8vIHRoZXJlIGlzIGFuIGlzc3VlIGlmIGhlYWRlciBjZWxsIGlzIHdpZGVyIHRoZSBjZWxsXG4gICAgLy8gdGhpcyBoYWNrIGFkZHMgaGVhZGVyIGNvbnRlbnQgdG8gY2VsbCAobm90IHZpc2libGUpXG4gICAgbGV0IGNvbHVtbkh0bWwgPSAnJztcbiAgICBpZiAoYWRkV2lkdGhIYWNrKSB7XG4gICAgICBjb2x1bW5IdG1sID0gJzxkaXYgY2xhc3M9XCJ0YWJsZS1wYW5lbC13aWR0aC1oYWNrXCI+JyArIHRoaXMudGFibGUuY29sdW1uc1tjb2x1bW5JbmRleF0udGl0bGUgKyAnPC9kaXY+JztcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY2VsbFN0eWxlcy5wdXNoKCdkaXNwbGF5Om5vbmUnKTtcbiAgICAgIGNvbHVtbi5oaWRkZW4gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb2x1bW4uaGlkZGVuID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGNvbHVtbi5oaWRkZW4gPT09IHRydWUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBpZiAoY29sdW1uLnN0eWxlICYmIGNvbHVtbi5zdHlsZS5wcmVzZXJ2ZUZvcm1hdCkge1xuICAgICAgY2VsbENsYXNzZXMucHVzaCgndGFibGUtcGFuZWwtY2VsbC1wcmUnKTtcbiAgICB9XG5cbiAgICBpZiAoY29sdW1uLnN0eWxlICYmIGNvbHVtbi5zdHlsZS5hbGlnbikge1xuICAgICAgY29uc3QgdGV4dEFsaWduID0gZmluZChDb2x1bW5PcHRpb25zQ3RybC5hbGlnblR5cGVzRW51bSwgWyd0ZXh0JywgY29sdW1uLnN0eWxlLmFsaWduXSk7XG4gICAgICBpZiAodGV4dEFsaWduICYmIHRleHRBbGlnblsndmFsdWUnXSkge1xuICAgICAgICBjZWxsU3R5bGVzLnB1c2goYHRleHQtYWxpZ246JHt0ZXh0QWxpZ25bJ3ZhbHVlJ119YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNlbGxTdHlsZXMubGVuZ3RoKSB7XG4gICAgICBjZWxsU3R5bGUgPSAnIHN0eWxlPVwiJyArIGNlbGxTdHlsZXMuam9pbignOycpICsgJ1wiJztcbiAgICB9XG5cbiAgICBpZiAoY29sdW1uLnN0eWxlICYmIGNvbHVtbi5zdHlsZS5saW5rKSB7XG4gICAgICAvLyBSZW5kZXIgY2VsbCBhcyBsaW5rXG4gICAgICBjb25zdCBzY29wZWRWYXJzID0gdGhpcy5yZW5kZXJSb3dWYXJpYWJsZXMocm93SW5kZXgpO1xuICAgICAgc2NvcGVkVmFyc1snX19jZWxsJ10gPSB7IHZhbHVlOiB2YWx1ZSwgdGV4dDogdmFsdWUgPyB2YWx1ZS50b1N0cmluZygpIDogJycgfTtcblxuICAgICAgY29uc3QgY2VsbExpbmsgPSB0aGlzLnRlbXBsYXRlU3J2LnJlcGxhY2UoY29sdW1uLnN0eWxlLmxpbmtVcmwsIHNjb3BlZFZhcnMsIGVuY29kZVVSSUNvbXBvbmVudCk7XG4gICAgICBjb25zdCBzYW5pdGl6ZWRDZWxsTGluayA9IHRleHRVdGlsLnNhbml0aXplVXJsKGNlbGxMaW5rKTtcblxuICAgICAgY29uc3QgY2VsbExpbmtUb29sdGlwID0gdGV4dFV0aWwuZXNjYXBlSHRtbCh0aGlzLnRlbXBsYXRlU3J2LnJlcGxhY2UoY29sdW1uLnN0eWxlLmxpbmtUb29sdGlwLCBzY29wZWRWYXJzKSk7XG4gICAgICBjb25zdCBjZWxsVGFyZ2V0ID0gY29sdW1uLnN0eWxlLmxpbmtUYXJnZXRCbGFuayA/ICdfYmxhbmsnIDogJyc7XG5cbiAgICAgIGNlbGxDbGFzc2VzLnB1c2goJ3RhYmxlLXBhbmVsLWNlbGwtbGluaycpO1xuXG4gICAgICBjb2x1bW5IdG1sICs9IGA8YSBocmVmPVwiJHtzYW5pdGl6ZWRDZWxsTGlua31cIiB0YXJnZXQ9XCIke2NlbGxUYXJnZXR9XCIgZGF0YS1saW5rLXRvb2x0aXAgZGF0YS1vcmlnaW5hbC10aXRsZT1cIiR7Y2VsbExpbmtUb29sdGlwfVwiIGRhdGEtcGxhY2VtZW50PVwicmlnaHRcIiR7Y2VsbFN0eWxlfT5gO1xuICAgICAgY29sdW1uSHRtbCArPSBgJHt2YWx1ZX1gO1xuICAgICAgY29sdW1uSHRtbCArPSBgPC9hPmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbHVtbkh0bWwgKz0gdmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKGNvbHVtbi5maWx0ZXJhYmxlKSB7XG4gICAgICBjZWxsQ2xhc3Nlcy5wdXNoKCd0YWJsZS1wYW5lbC1jZWxsLWZpbHRlcmFibGUnKTtcbiAgICAgIGNvbHVtbkh0bWwgKz0gYDxhIGNsYXNzPVwidGFibGUtcGFuZWwtZmlsdGVyLWxpbmtcIiBkYXRhLWxpbmstdG9vbHRpcCBkYXRhLW9yaWdpbmFsLXRpdGxlPVwiRmlsdGVyIG91dCB2YWx1ZVwiIGRhdGEtcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgZGF0YS1yb3c9XCIke3Jvd0luZGV4fVwiIGRhdGEtY29sdW1uPVwiJHtjb2x1bW5JbmRleH1cIiBkYXRhLW9wZXJhdG9yPVwiIT1cIj5gO1xuICAgICAgY29sdW1uSHRtbCArPSBgPGkgY2xhc3M9XCJmYSBmYS1zZWFyY2gtbWludXNcIj48L2k+YDtcbiAgICAgIGNvbHVtbkh0bWwgKz0gYDwvYT5gO1xuICAgICAgY29sdW1uSHRtbCArPSBgPGEgY2xhc3M9XCJ0YWJsZS1wYW5lbC1maWx0ZXItbGlua1wiIGRhdGEtbGluay10b29sdGlwIGRhdGEtb3JpZ2luYWwtdGl0bGU9XCJGaWx0ZXIgZm9yIHZhbHVlXCIgZGF0YS1wbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICBkYXRhLXJvdz1cIiR7cm93SW5kZXh9XCIgZGF0YS1jb2x1bW49XCIke2NvbHVtbkluZGV4fVwiIGRhdGEtb3BlcmF0b3I9XCI9XCI+YDtcbiAgICAgIGNvbHVtbkh0bWwgKz0gYDxpIGNsYXNzPVwiZmEgZmEtc2VhcmNoLXBsdXNcIj48L2k+YDtcbiAgICAgIGNvbHVtbkh0bWwgKz0gYDwvYT5gO1xuICAgIH1cblxuICAgIGlmIChjZWxsQ2xhc3Nlcy5sZW5ndGgpIHtcbiAgICAgIGNlbGxDbGFzcyA9ICcgY2xhc3M9XCInICsgY2VsbENsYXNzZXMuam9pbignICcpICsgJ1wiJztcbiAgICB9XG5cbiAgICBjb2x1bW5IdG1sID0gJzx0ZCcgKyBjZWxsQ2xhc3MgKyBjZWxsU3R5bGUgKyAnPicgKyBjb2x1bW5IdG1sICsgJzwvdGQ+JztcbiAgICByZXR1cm4gY29sdW1uSHRtbDtcbiAgfVxuXG4gIHJlbmRlcihwYWdlOiBudW1iZXIpIHtcbiAgICBjb25zdCBwYWdlU2l6ZSA9IHRoaXMucGFuZWwucGFnZVNpemUgfHwgMTAwO1xuICAgIGNvbnN0IHN0YXJ0UG9zID0gcGFnZSAqIHBhZ2VTaXplO1xuICAgIGNvbnN0IGVuZFBvcyA9IE1hdGgubWluKHN0YXJ0UG9zICsgcGFnZVNpemUsIHRoaXMudGFibGUucm93cy5sZW5ndGgpO1xuICAgIGxldCBodG1sID0gJyc7XG5cbiAgICBmb3IgKGxldCB5ID0gc3RhcnRQb3M7IHkgPCBlbmRQb3M7IHkrKykge1xuICAgICAgY29uc3Qgcm93ID0gdGhpcy50YWJsZS5yb3dzW3ldO1xuICAgICAgbGV0IGNlbGxIdG1sID0gJyc7XG4gICAgICBsZXQgcm93U3R5bGUgPSAnJztcbiAgICAgIGNvbnN0IHJvd0NsYXNzZXMgPSBbXTtcbiAgICAgIGxldCByb3dDbGFzcyA9ICcnO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYmxlLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2VsbEh0bWwgKz0gdGhpcy5yZW5kZXJDZWxsKGksIHksIHJvd1tpXSwgeSA9PT0gc3RhcnRQb3MpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jb2xvclN0YXRlLnJvdykge1xuICAgICAgICByb3dTdHlsZSA9ICcgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicgKyB0aGlzLmNvbG9yU3RhdGUucm93ICsgJ1wiJztcbiAgICAgICAgcm93Q2xhc3Nlcy5wdXNoKCd0YWJsZS1wYW5lbC1jb2xvci1yb3cnKTtcbiAgICAgICAgdGhpcy5jb2xvclN0YXRlLnJvdyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChyb3dDbGFzc2VzLmxlbmd0aCkge1xuICAgICAgICByb3dDbGFzcyA9ICcgY2xhc3M9XCInICsgcm93Q2xhc3Nlcy5qb2luKCcgJykgKyAnXCInO1xuICAgICAgfVxuXG4gICAgICBodG1sICs9ICc8dHIgJyArIHJvd0NsYXNzICsgcm93U3R5bGUgKyAnPicgKyBjZWxsSHRtbCArICc8L3RyPic7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWw7XG4gIH1cblxuICByZW5kZXJfdmFsdWVzKCkge1xuICAgIGNvbnN0IHJvd3MgPSBbXTtcbiAgICBjb25zdCB2aXNpYmxlQ29sdW1ucyA9IHRoaXMudGFibGUuY29sdW1ucy5maWx0ZXIoKGNvbHVtbikgPT4gIWNvbHVtbi5oaWRkZW4pO1xuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnRhYmxlLnJvd3MubGVuZ3RoOyB5KyspIHtcbiAgICAgIGNvbnN0IHJvdyA9IHRoaXMudGFibGUucm93c1t5XTtcbiAgICAgIGNvbnN0IG5ld1JvdyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYmxlLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCF0aGlzLnRhYmxlLmNvbHVtbnNbaV0uaGlkZGVuKSB7XG4gICAgICAgICAgbmV3Um93LnB1c2godGhpcy5mb3JtYXRDb2x1bW5WYWx1ZShpLCByb3dbaV0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcm93cy5wdXNoKG5ld1Jvdyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb2x1bW5zOiB2aXNpYmxlQ29sdW1ucyxcbiAgICAgIHJvd3M6IHJvd3MsXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/table-old/renderer.ts\n");

/***/ }),

/***/ "./public/app/plugins/panel/table-old/transformers.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tableDataFormatFilterer: () => (/* binding */ tableDataFormatFilterer),\n/* harmony export */   timeSeriesFormatFilterer: () => (/* binding */ timeSeriesFormatFilterer),\n/* harmony export */   transformDataToTable: () => (/* binding */ transformDataToTable),\n/* harmony export */   transformers: () => (/* binding */ transformers)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var app_core_TableModel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/TableModel.ts\");\n/* harmony import */ var app_core_time_series2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/time_series2.ts\");\n/* harmony import */ var app_core_utils_flatten__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/core/utils/flatten.ts\");\n\n\n\n\n\nconst transformers = {};\nconst timeSeriesFormatFilterer = (data) => {\n  if (!Array.isArray(data)) {\n    return data.datapoints ? [data] : [];\n  }\n  return data.reduce((acc, series) => {\n    if (!series.datapoints) {\n      return acc;\n    }\n    return acc.concat(series);\n  }, []);\n};\nconst tableDataFormatFilterer = (data) => {\n  if (!Array.isArray(data)) {\n    return data.columns ? [data] : [];\n  }\n  return data.reduce((acc, series) => {\n    if (!series.columns) {\n      return acc;\n    }\n    return acc.concat(series);\n  }, []);\n};\ntransformers[\"timeseries_to_rows\"] = {\n  description: \"Time series to rows\",\n  getColumns: () => {\n    return [];\n  },\n  transform: (data, panel, model) => {\n    model.columns = [{ text: \"Time\", type: \"date\" }, { text: \"Metric\" }, { text: \"Value\" }];\n    const filteredData = timeSeriesFormatFilterer(data);\n    for (let i = 0; i < filteredData.length; i++) {\n      const series = filteredData[i];\n      for (let y = 0; y < series.datapoints.length; y++) {\n        const dp = series.datapoints[y];\n        model.rows.push([dp[1], series.target, dp[0]]);\n      }\n    }\n  }\n};\ntransformers[\"timeseries_to_columns\"] = {\n  description: \"Time series to columns\",\n  getColumns: () => {\n    return [];\n  },\n  transform: (data, panel, model) => {\n    model.columns.push({ text: \"Time\", type: \"date\" });\n    const points = {};\n    const filteredData = timeSeriesFormatFilterer(data);\n    for (let i = 0; i < filteredData.length; i++) {\n      const series = filteredData[i];\n      model.columns.push({ text: series.target });\n      for (let y = 0; y < series.datapoints.length; y++) {\n        const dp = series.datapoints[y];\n        const timeKey = dp[1].toString();\n        if (!points[timeKey]) {\n          points[timeKey] = { time: dp[1] };\n          points[timeKey][i] = dp[0];\n        } else {\n          points[timeKey][i] = dp[0];\n        }\n      }\n    }\n    for (const time in points) {\n      const point = points[time];\n      const values = [point.time];\n      for (let i = 0; i < filteredData.length; i++) {\n        const value = point[i];\n        values.push(value);\n      }\n      model.rows.push(values);\n    }\n  }\n};\ntransformers[\"timeseries_aggregations\"] = {\n  description: \"Time series aggregations\",\n  getColumns: () => {\n    return [\n      { text: \"Avg\", value: \"avg\" },\n      { text: \"Min\", value: \"min\" },\n      { text: \"Max\", value: \"max\" },\n      { text: \"Total\", value: \"total\" },\n      { text: \"Current\", value: \"current\" },\n      { text: \"Count\", value: \"count\" }\n    ];\n  },\n  transform: (data, panel, model) => {\n    let i, y;\n    model.columns.push({ text: \"Metric\" });\n    for (i = 0; i < panel.columns.length; i++) {\n      model.columns.push({ text: panel.columns[i].text });\n    }\n    const filteredData = timeSeriesFormatFilterer(data);\n    for (i = 0; i < filteredData.length; i++) {\n      const series = new app_core_time_series2__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        datapoints: filteredData[i].datapoints,\n        alias: filteredData[i].target\n      });\n      series.getFlotPairs(\"connected\");\n      const cells = [series.alias];\n      for (y = 0; y < panel.columns.length; y++) {\n        cells.push(series.stats[panel.columns[y].value]);\n      }\n      model.rows.push(cells);\n    }\n  }\n};\ntransformers[\"annotations\"] = {\n  description: \"Annotations\",\n  getColumns: () => {\n    return [];\n  },\n  transform: (data, panel, model) => {\n    model.columns.push({ text: \"Time\", type: \"date\" });\n    model.columns.push({ text: \"Title\" });\n    model.columns.push({ text: \"Text\" });\n    model.columns.push({ text: \"Tags\" });\n    if (!data || !data.annotations || data.annotations.length === 0) {\n      return;\n    }\n    for (let i = 0; i < data.annotations.length; i++) {\n      const evt = data.annotations[i];\n      model.rows.push([evt.time, evt.title, evt.text, evt.tags]);\n    }\n  }\n};\ntransformers[\"table\"] = {\n  description: \"Table\",\n  getColumns: (data) => {\n    if (!data || data.length === 0) {\n      return [];\n    }\n    if (data.length === 1) {\n      return [...data[0].columns];\n    }\n    const filteredData = tableDataFormatFilterer(data);\n    const columnNames = {};\n    const columns = filteredData.reduce((acc, series) => {\n      series.columns.forEach((col) => {\n        const { text } = col;\n        if (columnNames[text] === void 0) {\n          columnNames[text] = acc.length;\n          acc.push(col);\n        }\n      });\n      return acc;\n    }, []);\n    return columns;\n  },\n  transform: (data, panel, model) => {\n    if (!data || data.length === 0) {\n      return;\n    }\n    const filteredData = tableDataFormatFilterer(data);\n    const noTableIndex = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.findIndex)(filteredData, (d) => \"columns\" in d && \"rows\" in d);\n    if (noTableIndex < 0) {\n      throw {\n        message: `Result of query #${String.fromCharCode(\n          65 + noTableIndex\n        )} is not in table format, try using another transform.`\n      };\n    }\n    (0,app_core_TableModel__WEBPACK_IMPORTED_MODULE_1__.mergeTablesIntoModel)(model, ...filteredData);\n  }\n};\ntransformers[\"json\"] = {\n  description: \"JSON Data\",\n  getColumns: (data) => {\n    if (!data || data.length === 0) {\n      return [];\n    }\n    const names = {};\n    for (let i = 0; i < data.length; i++) {\n      const series = data[i];\n      if (series.type !== \"docs\") {\n        continue;\n      }\n      const maxDocs = Math.min(series.datapoints.length, 100);\n      for (let y = 0; y < maxDocs; y++) {\n        const doc = series.datapoints[y];\n        const flattened = (0,app_core_utils_flatten__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(doc, {});\n        for (const propName in flattened) {\n          names[propName] = true;\n        }\n      }\n    }\n    return (0,lodash__WEBPACK_IMPORTED_MODULE_0__.map)(names, (value, key) => {\n      return { text: key, value: key };\n    });\n  },\n  transform: (data, panel, model) => {\n    let i, y, z;\n    for (const column of panel.columns) {\n      const tableCol = { text: column.text };\n      if (data.length > 0 && data[0].filterable) {\n        tableCol.filterable = true;\n      }\n      model.columns.push(tableCol);\n    }\n    if (model.columns.length === 0) {\n      model.columns.push({ text: \"JSON\" });\n    }\n    for (i = 0; i < data.length; i++) {\n      const series = data[i];\n      for (y = 0; y < series.datapoints.length; y++) {\n        const dp = series.datapoints[y];\n        const values = [];\n        if ((0,lodash__WEBPACK_IMPORTED_MODULE_0__.isObject)(dp) && panel.columns.length > 0) {\n          const flattened = (0,app_core_utils_flatten__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(dp);\n          for (z = 0; z < panel.columns.length; z++) {\n            values.push(flattened[panel.columns[z].value]);\n          }\n        } else {\n          values.push(JSON.stringify(dp));\n        }\n        model.rows.push(values);\n      }\n    }\n  }\n};\nfunction transformDataToTable(data, panel) {\n  const model = new app_core_TableModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n  if (!data || data.length === 0) {\n    return model;\n  }\n  const transformer = transformers[panel.transform];\n  if (!transformer) {\n    throw { message: \"Transformer \" + panel.transform + \" not found\" };\n  }\n  transformer.transform(data, panel, model);\n  return model;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvcGFuZWwvdGFibGUtb2xkL3RyYW5zZm9ybWVycy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXlDO0FBR1E7QUFDMUI7QUFDSDtBQUlwQixNQUFNLGVBQWtELENBQUM7QUFDbEQsTUFBTSwyQkFBMkIsQ0FBQyxTQUFxQjtBQUM1RCxNQUFJLENBQUMsTUFBTSxRQUFRLElBQUksR0FBRztBQUN4QixXQUFPLEtBQUssYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDO0FBQUEsRUFDckM7QUFFQSxTQUFPLEtBQUssT0FBTyxDQUFDLEtBQUssV0FBVztBQUNsQyxRQUFJLENBQUMsT0FBTyxZQUFZO0FBQ3RCLGFBQU87QUFBQSxJQUNUO0FBRUEsV0FBTyxJQUFJLE9BQU8sTUFBTTtBQUFBLEVBQzFCLEdBQUcsQ0FBQyxDQUFDO0FBQ1A7QUFFTyxNQUFNLDBCQUEwQixDQUFDLFNBQXFCO0FBQzNELE1BQUksQ0FBQyxNQUFNLFFBQVEsSUFBSSxHQUFHO0FBQ3hCLFdBQU8sS0FBSyxVQUFVLENBQUMsSUFBSSxJQUFJLENBQUM7QUFBQSxFQUNsQztBQUVBLFNBQU8sS0FBSyxPQUFPLENBQUMsS0FBSyxXQUFXO0FBQ2xDLFFBQUksQ0FBQyxPQUFPLFNBQVM7QUFDbkIsYUFBTztBQUFBLElBQ1Q7QUFFQSxXQUFPLElBQUksT0FBTyxNQUFNO0FBQUEsRUFDMUIsR0FBRyxDQUFDLENBQUM7QUFDUDtBQUVBLGFBQWEsb0JBQW9CLElBQUk7QUFBQSxFQUNuQyxhQUFhO0FBQUEsRUFDYixZQUFZLE1BQU07QUFDaEIsV0FBTyxDQUFDO0FBQUEsRUFDVjtBQUFBLEVBQ0EsV0FBVyxDQUFDLE1BQU0sT0FBTyxVQUFVO0FBQ2pDLFVBQU0sVUFBVSxDQUFDLEVBQUUsTUFBTSxRQUFRLE1BQU0sT0FBTyxHQUFHLEVBQUUsTUFBTSxTQUFTLEdBQUcsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUN0RixVQUFNLGVBQWUseUJBQXlCLElBQUk7QUFFbEQsYUFB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LFNBQVMsR0FBRztBQUM1QyxnQkFBTSxZQUFZLGtFQUFPLENBQUMsRUFBRTtBQUM1QixlQUFLLElBQUksR0FBRyxJQUFJLE1BQU0sUUFBUSxRQUFRLEtBQUs7QUFDekMsbUJBQU8sS0FBSyxVQUFVLE1BQU0sUUFBUSxDQUFDLEVBQUUsS0FBSyxDQUFDO0FBQUEsVUFDL0M7QUFBQSxRQUNGLE9BQU87QUFDTCxpQkFBTyxLQUFLLEtBQUssVUFBVSxFQUFFLENBQUM7QUFBQSxRQUNoQztBQUVBLGNBQU0sS0FBSyxLQUFLLE1BQU07QUFBQSxNQUN4QjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0Y7QUFFQSxTQUFTLHFCQUFxQixNQUFXLE9BQVk7QUFDbkQsUUFBTSxRQUFRLElBQUksMkRBQVUsQ0FBQztBQUU3QixNQUFJLENBQUMsUUFBUSxLQUFLLFdBQVcsR0FBRztBQUM5QixXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sY0FBYyxhQUFhLE1BQU0sU0FBUztBQUNoRCxNQUFJLENBQUMsYUFBYTtBQUNoQixVQUFNLEVBQUUsU0FBUyxpQkFBaUIsTUFBTSxZQUFZLGFBQWE7QUFBQSxFQUNuRTtBQUVBLGNBQVksVUFBVSxNQUFNLE9BQU8sS0FBSztBQUN4QyxTQUFPO0FBQ1Q7QUFFOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9wbHVnaW5zL3BhbmVsL3RhYmxlLW9sZC90cmFuc2Zvcm1lcnMudHM/MGM5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmaW5kSW5kZXgsIGlzT2JqZWN0LCBtYXAgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBDb2x1bW4sIFRhYmxlRGF0YSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IFRhYmxlTW9kZWwsIHsgbWVyZ2VUYWJsZXNJbnRvTW9kZWwgfSBmcm9tICdhcHAvY29yZS9UYWJsZU1vZGVsJztcbmltcG9ydCBUaW1lU2VyaWVzIGZyb20gJ2FwcC9jb3JlL3RpbWVfc2VyaWVzMic7XG5pbXBvcnQgZmxhdHRlbiBmcm9tICdhcHAvY29yZS91dGlscy9mbGF0dGVuJztcblxuaW1wb3J0IHsgVGFibGVUcmFuc2Zvcm0gfSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgdHJhbnNmb3JtZXJzOiB7IFtrZXk6IHN0cmluZ106IFRhYmxlVHJhbnNmb3JtIH0gPSB7fTtcbmV4cG9ydCBjb25zdCB0aW1lU2VyaWVzRm9ybWF0RmlsdGVyZXIgPSAoZGF0YTogYW55KTogYW55W10gPT4ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICByZXR1cm4gZGF0YS5kYXRhcG9pbnRzID8gW2RhdGFdIDogW107XG4gIH1cblxuICByZXR1cm4gZGF0YS5yZWR1Y2UoKGFjYywgc2VyaWVzKSA9PiB7XG4gICAgaWYgKCFzZXJpZXMuZGF0YXBvaW50cykge1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9XG5cbiAgICByZXR1cm4gYWNjLmNvbmNhdChzZXJpZXMpO1xuICB9LCBbXSk7XG59O1xuXG5leHBvcnQgY29uc3QgdGFibGVEYXRhRm9ybWF0RmlsdGVyZXIgPSAoZGF0YTogYW55KTogYW55W10gPT4ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICByZXR1cm4gZGF0YS5jb2x1bW5zID8gW2RhdGFdIDogW107XG4gIH1cblxuICByZXR1cm4gZGF0YS5yZWR1Y2UoKGFjYywgc2VyaWVzKSA9PiB7XG4gICAgaWYgKCFzZXJpZXMuY29sdW1ucykge1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9XG5cbiAgICByZXR1cm4gYWNjLmNvbmNhdChzZXJpZXMpO1xuICB9LCBbXSk7XG59O1xuXG50cmFuc2Zvcm1lcnNbJ3RpbWVzZXJpZXNfdG9fcm93cyddID0ge1xuICBkZXNjcmlwdGlvbjogJ1RpbWUgc2VyaWVzIHRvIHJvd3MnLFxuICBnZXRDb2x1bW5zOiAoKSA9PiB7XG4gICAgcmV0dXJuIFtdO1xuICB9LFxuICB0cmFuc2Zvcm06IChkYXRhLCBwYW5lbCwgbW9kZWwpID0+IHtcbiAgICBtb2RlbC5jb2x1bW5zID0gW3sgdGV4dDogJ1RpbWUnLCB0eXBlOiAnZGF0ZScgfSwgeyB0ZXh0OiAnTWV0cmljJyB9LCB7IHRleHQ6ICdWYWx1ZScgfV07XG4gICAgY29uc3QgZmlsdGVyZWREYXRhID0gdGltZVNlcmllc0Zvcm1hdEZpbHRlcmVyKGRhdGEpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJlZERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNlcmllcyA9IGZpbHRlcmVkRGF0YVtpXTtcbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgc2VyaWVzLmRhdGFwb2ludHMubGVuZ3RoOyB5KyspIHtcbiAgICAgICAgY29uc3QgZHAgPSBzZXJpZXMuZGF0YXBvaW50c1t5XTtcbiAgICAgICAgbW9kZWwucm93cy5wdXNoKFtkcFsxXSwgc2VyaWVzLnRhcmdldCwgZHBbMF1dKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG59O1xuXG50cmFuc2Zvcm1lcnNbJ3RpbWVzZXJpZXNfdG9fY29sdW1ucyddID0ge1xuICBkZXNjcmlwdGlvbjogJ1RpbWUgc2VyaWVzIHRvIGNvbHVtbnMnLFxuICBnZXRDb2x1bW5zOiAoKSA9PiB7XG4gICAgcmV0dXJuIFtdO1xuICB9LFxuICB0cmFuc2Zvcm06IChkYXRhLCBwYW5lbCwgbW9kZWwpID0+IHtcbiAgICBtb2RlbC5jb2x1bW5zLnB1c2goeyB0ZXh0OiAnVGltZScsIHR5cGU6ICdkYXRlJyB9KTtcblxuICAgIC8vIGdyb3VwIGJ5IHRpbWVcbiAgICBjb25zdCBwb2ludHM6IGFueSA9IHt9O1xuICAgIGNvbnN0IGZpbHRlcmVkRGF0YSA9IHRpbWVTZXJpZXNGb3JtYXRGaWx0ZXJlcihkYXRhKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVyZWREYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzZXJpZXMgPSBmaWx0ZXJlZERhdGFbaV07XG4gICAgICBtb2RlbC5jb2x1bW5zLnB1c2goeyB0ZXh0OiBzZXJpZXMudGFyZ2V0IH0pO1xuXG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHNlcmllcy5kYXRhcG9pbnRzLmxlbmd0aDsgeSsrKSB7XG4gICAgICAgIGNvbnN0IGRwID0gc2VyaWVzLmRhdGFwb2ludHNbeV07XG4gICAgICAgIGNvbnN0IHRpbWVLZXkgPSBkcFsxXS50b1N0cmluZygpO1xuXG4gICAgICAgIGlmICghcG9pbnRzW3RpbWVLZXldKSB7XG4gICAgICAgICAgcG9pbnRzW3RpbWVLZXldID0geyB0aW1lOiBkcFsxXSB9O1xuICAgICAgICAgIHBvaW50c1t0aW1lS2V5XVtpXSA9IGRwWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvaW50c1t0aW1lS2V5XVtpXSA9IGRwWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB0aW1lIGluIHBvaW50cykge1xuICAgICAgY29uc3QgcG9pbnQgPSBwb2ludHNbdGltZV07XG4gICAgICBjb25zdCB2YWx1ZXMgPSBbcG9pbnQudGltZV07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVyZWREYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcG9pbnRbaV07XG4gICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgbW9kZWwucm93cy5wdXNoKHZhbHVlcyk7XG4gICAgfVxuICB9LFxufTtcblxudHJhbnNmb3JtZXJzWyd0aW1lc2VyaWVzX2FnZ3JlZ2F0aW9ucyddID0ge1xuICBkZXNjcmlwdGlvbjogJ1RpbWUgc2VyaWVzIGFnZ3JlZ2F0aW9ucycsXG4gIGdldENvbHVtbnM6ICgpID0+IHtcbiAgICByZXR1cm4gW1xuICAgICAgeyB0ZXh0OiAnQXZnJywgdmFsdWU6ICdhdmcnIH0sXG4gICAgICB7IHRleHQ6ICdNaW4nLCB2YWx1ZTogJ21pbicgfSxcbiAgICAgIHsgdGV4dDogJ01heCcsIHZhbHVlOiAnbWF4JyB9LFxuICAgICAgeyB0ZXh0OiAnVG90YWwnLCB2YWx1ZTogJ3RvdGFsJyB9LFxuICAgICAgeyB0ZXh0OiAnQ3VycmVudCcsIHZhbHVlOiAnY3VycmVudCcgfSxcbiAgICAgIHsgdGV4dDogJ0NvdW50JywgdmFsdWU6ICdjb3VudCcgfSxcbiAgICBdO1xuICB9LFxuICB0cmFuc2Zvcm06IChkYXRhLCBwYW5lbCwgbW9kZWwpID0+IHtcbiAgICBsZXQgaSwgeTtcbiAgICBtb2RlbC5jb2x1bW5zLnB1c2goeyB0ZXh0OiAnTWV0cmljJyB9KTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBwYW5lbC5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBtb2RlbC5jb2x1bW5zLnB1c2goeyB0ZXh0OiBwYW5lbC5jb2x1bW5zW2ldLnRleHQgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsdGVyZWREYXRhID0gdGltZVNlcmllc0Zvcm1hdEZpbHRlcmVyKGRhdGEpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGZpbHRlcmVkRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc2VyaWVzID0gbmV3IFRpbWVTZXJpZXMoe1xuICAgICAgICBkYXRhcG9pbnRzOiBmaWx0ZXJlZERhdGFbaV0uZGF0YXBvaW50cyxcbiAgICAgICAgYWxpYXM6IGZpbHRlcmVkRGF0YVtpXS50YXJnZXQsXG4gICAgICB9KTtcblxuICAgICAgc2VyaWVzLmdldEZsb3RQYWlycygnY29ubmVjdGVkJyk7XG4gICAgICBjb25zdCBjZWxscyA9IFtzZXJpZXMuYWxpYXNdO1xuXG4gICAgICBmb3IgKHkgPSAwOyB5IDwgcGFuZWwuY29sdW1ucy5sZW5ndGg7IHkrKykge1xuICAgICAgICBjZWxscy5wdXNoKHNlcmllcy5zdGF0c1twYW5lbC5jb2x1bW5zW3ldLnZhbHVlXSk7XG4gICAgICB9XG5cbiAgICAgIG1vZGVsLnJvd3MucHVzaChjZWxscyk7XG4gICAgfVxuICB9LFxufTtcblxudHJhbnNmb3JtZXJzWydhbm5vdGF0aW9ucyddID0ge1xuICBkZXNjcmlwdGlvbjogJ0Fubm90YXRpb25zJyxcbiAgZ2V0Q29sdW1uczogKCkgPT4ge1xuICAgIHJldHVybiBbXTtcbiAgfSxcbiAgdHJhbnNmb3JtOiAoZGF0YSwgcGFuZWwsIG1vZGVsKSA9PiB7XG4gICAgbW9kZWwuY29sdW1ucy5wdXNoKHsgdGV4dDogJ1RpbWUnLCB0eXBlOiAnZGF0ZScgfSk7XG4gICAgbW9kZWwuY29sdW1ucy5wdXNoKHsgdGV4dDogJ1RpdGxlJyB9KTtcbiAgICBtb2RlbC5jb2x1bW5zLnB1c2goeyB0ZXh0OiAnVGV4dCcgfSk7XG4gICAgbW9kZWwuY29sdW1ucy5wdXNoKHsgdGV4dDogJ1RhZ3MnIH0pO1xuXG4gICAgaWYgKCFkYXRhIHx8ICFkYXRhLmFubm90YXRpb25zIHx8IGRhdGEuYW5ub3RhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmFubm90YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBldnQgPSBkYXRhLmFubm90YXRpb25zW2ldO1xuICAgICAgbW9kZWwucm93cy5wdXNoKFtldnQudGltZSwgZXZ0LnRpdGxlLCBldnQudGV4dCwgZXZ0LnRhZ3NdKTtcbiAgICB9XG4gIH0sXG59O1xuXG50cmFuc2Zvcm1lcnNbJ3RhYmxlJ10gPSB7XG4gIGRlc2NyaXB0aW9uOiAnVGFibGUnLFxuICBnZXRDb2x1bW5zOiAoZGF0YSkgPT4ge1xuICAgIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIFNpbmdsZSBxdWVyeSByZXR1cm5zIGRhdGEgY29sdW1ucyBhcyBpc1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIFsuLi5kYXRhWzBdLmNvbHVtbnNdO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlcmVkRGF0YSA9IHRhYmxlRGF0YUZvcm1hdEZpbHRlcmVyKGRhdGEpO1xuXG4gICAgLy8gVHJhY2sgY29sdW1uIGluZGV4ZXM6IG5hbWUgLT4gaW5kZXhcbiAgICBjb25zdCBjb2x1bW5OYW1lczogYW55ID0ge307XG5cbiAgICAvLyBVbmlvbiBvZiBhbGwgY29sdW1uc1xuICAgIGNvbnN0IGNvbHVtbnMgPSBmaWx0ZXJlZERhdGEucmVkdWNlKChhY2M6IENvbHVtbltdLCBzZXJpZXM6IFRhYmxlRGF0YSkgPT4ge1xuICAgICAgc2VyaWVzLmNvbHVtbnMuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdGV4dCB9ID0gY29sO1xuICAgICAgICBpZiAoY29sdW1uTmFtZXNbdGV4dF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbHVtbk5hbWVzW3RleHRdID0gYWNjLmxlbmd0aDtcbiAgICAgICAgICBhY2MucHVzaChjb2wpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIGNvbHVtbnM7XG4gIH0sXG4gIHRyYW5zZm9ybTogKGRhdGE6IGFueVtdLCBwYW5lbCwgbW9kZWwpID0+IHtcbiAgICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZmlsdGVyZWREYXRhID0gdGFibGVEYXRhRm9ybWF0RmlsdGVyZXIoZGF0YSk7XG4gICAgY29uc3Qgbm9UYWJsZUluZGV4ID0gZmluZEluZGV4KGZpbHRlcmVkRGF0YSwgKGQpID0+ICdjb2x1bW5zJyBpbiBkICYmICdyb3dzJyBpbiBkKTtcbiAgICBpZiAobm9UYWJsZUluZGV4IDwgMCkge1xuICAgICAgdGhyb3cge1xuICAgICAgICBtZXNzYWdlOiBgUmVzdWx0IG9mIHF1ZXJ5ICMke1N0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAgICAgNjUgKyBub1RhYmxlSW5kZXhcbiAgICAgICAgKX0gaXMgbm90IGluIHRhYmxlIGZvcm1hdCwgdHJ5IHVzaW5nIGFub3RoZXIgdHJhbnNmb3JtLmAsXG4gICAgICB9O1xuICAgIH1cblxuICAgIG1lcmdlVGFibGVzSW50b01vZGVsKG1vZGVsLCAuLi5maWx0ZXJlZERhdGEpO1xuICB9LFxufTtcblxudHJhbnNmb3JtZXJzWydqc29uJ10gPSB7XG4gIGRlc2NyaXB0aW9uOiAnSlNPTiBEYXRhJyxcbiAgZ2V0Q29sdW1uczogKGRhdGEpID0+IHtcbiAgICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBuYW1lczogYW55ID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzZXJpZXMgPSBkYXRhW2ldO1xuICAgICAgaWYgKHNlcmllcy50eXBlICE9PSAnZG9jcycpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG9ubHkgbG9vayBhdCAxMDAgZG9jc1xuICAgICAgY29uc3QgbWF4RG9jcyA9IE1hdGgubWluKHNlcmllcy5kYXRhcG9pbnRzLmxlbmd0aCwgMTAwKTtcbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgbWF4RG9jczsgeSsrKSB7XG4gICAgICAgIGNvbnN0IGRvYyA9IHNlcmllcy5kYXRhcG9pbnRzW3ldO1xuICAgICAgICBjb25zdCBmbGF0dGVuZWQgPSBmbGF0dGVuKGRvYywge30pO1xuICAgICAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIGZsYXR0ZW5lZCkge1xuICAgICAgICAgIG5hbWVzW3Byb3BOYW1lXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWFwKG5hbWVzLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgcmV0dXJuIHsgdGV4dDoga2V5LCB2YWx1ZToga2V5IH07XG4gICAgfSk7XG4gIH0sXG4gIHRyYW5zZm9ybTogKGRhdGEsIHBhbmVsLCBtb2RlbCkgPT4ge1xuICAgIGxldCBpLCB5LCB6O1xuXG4gICAgZm9yIChjb25zdCBjb2x1bW4gb2YgcGFuZWwuY29sdW1ucykge1xuICAgICAgY29uc3QgdGFibGVDb2w6IGFueSA9IHsgdGV4dDogY29sdW1uLnRleHQgfTtcblxuICAgICAgLy8gaWYgZmlsdGVyYWJsZSBkYXRhIHRoZW4gc2V0IGNvbHVtbnMgdG8gZmlsdGVyYWJsZVxuICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCAmJiBkYXRhWzBdLmZpbHRlcmFibGUpIHtcbiAgICAgICAgdGFibGVDb2wuZmlsdGVyYWJsZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIG1vZGVsLmNvbHVtbnMucHVzaCh0YWJsZUNvbCk7XG4gICAgfVxuXG4gICAgaWYgKG1vZGVsLmNvbHVtbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICBtb2RlbC5jb2x1bW5zLnB1c2goeyB0ZXh0OiAnSlNPTicgfSk7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNlcmllcyA9IGRhdGFbaV07XG5cbiAgICAgIGZvciAoeSA9IDA7IHkgPCBzZXJpZXMuZGF0YXBvaW50cy5sZW5ndGg7IHkrKykge1xuICAgICAgICBjb25zdCBkcCA9IHNlcmllcy5kYXRhcG9pbnRzW3ldO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcblxuICAgICAgICBpZiAoaXNPYmplY3QoZHApICYmIHBhbmVsLmNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGZsYXR0ZW5lZCA9IGZsYXR0ZW4oZHApO1xuICAgICAgICAgIGZvciAoeiA9IDA7IHogPCBwYW5lbC5jb2x1bW5zLmxlbmd0aDsgeisrKSB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChmbGF0dGVuZWRbcGFuZWwuY29sdW1uc1t6XS52YWx1ZV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZXMucHVzaChKU09OLnN0cmluZ2lmeShkcCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kZWwucm93cy5wdXNoKHZhbHVlcyk7XG4gICAgICB9XG4gICAgfVxuICB9LFxufTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtRGF0YVRvVGFibGUoZGF0YTogYW55LCBwYW5lbDogYW55KSB7XG4gIGNvbnN0IG1vZGVsID0gbmV3IFRhYmxlTW9kZWwoKTtcblxuICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbW9kZWw7XG4gIH1cblxuICBjb25zdCB0cmFuc2Zvcm1lciA9IHRyYW5zZm9ybWVyc1twYW5lbC50cmFuc2Zvcm1dO1xuICBpZiAoIXRyYW5zZm9ybWVyKSB7XG4gICAgdGhyb3cgeyBtZXNzYWdlOiAnVHJhbnNmb3JtZXIgJyArIHBhbmVsLnRyYW5zZm9ybSArICcgbm90IGZvdW5kJyB9O1xuICB9XG5cbiAgdHJhbnNmb3JtZXIudHJhbnNmb3JtKGRhdGEsIHBhbmVsLCBtb2RlbCk7XG4gIHJldHVybiBtb2RlbDtcbn1cblxuZXhwb3J0IHsgdHJhbnNmb3JtZXJzLCB0cmFuc2Zvcm1EYXRhVG9UYWJsZSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/plugins/panel/table-old/transformers.ts\n");

/***/ }),

/***/ "./public/app/plugins/sdk.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetricsPanelCtrl: () => (/* binding */ MetricsPanelCtrl),\n/* harmony export */   PanelCtrl: () => (/* binding */ PanelCtrl),\n/* harmony export */   QueryCtrl: () => (/* binding */ QueryCtrl),\n/* harmony export */   loadPluginCss: () => (/* reexport safe */ _grafana_runtime__WEBPACK_IMPORTED_MODULE_4__.loadPluginCss)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/makeClassES5Compatible.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/utils/plugin.ts\");\n/* harmony import */ var app_angular_panel_metrics_panel_ctrl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/angular/panel/metrics_panel_ctrl.ts\");\n/* harmony import */ var app_angular_panel_panel_ctrl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/angular/panel/panel_ctrl.ts\");\n/* harmony import */ var app_angular_panel_query_ctrl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/angular/panel/query_ctrl.ts\");\n\n\n\n\n\n\nconst PanelCtrl = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.makeClassES5Compatible)(app_angular_panel_panel_ctrl__WEBPACK_IMPORTED_MODULE_1__.PanelCtrl);\nconst MetricsPanelCtrl = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.makeClassES5Compatible)(app_angular_panel_metrics_panel_ctrl__WEBPACK_IMPORTED_MODULE_0__.MetricsPanelCtrl);\nconst QueryCtrl = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.makeClassES5Compatible)(app_angular_panel_query_ctrl__WEBPACK_IMPORTED_MODULE_2__.QueryCtrl);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL3BsdWdpbnMvc2RrLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFDVDtBQUMwQjtBQUNkO0FBQ0E7QUFFMUMsTUFBTSxZQUFZLHFFQUFzQixDQUFDLG1FQUFZO0FBQ3JELE1BQU0sbUJBQW1CLHFFQUFzQixDQUFDLGtGQUFtQjtBQUNuRSxNQUFNLFlBQVkscUVBQXNCLENBQUMsbUVBQVk7QUFFWSIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL3BsdWdpbnMvc2RrLnRzPzJmMzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWFrZUNsYXNzRVM1Q29tcGF0aWJsZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgbG9hZFBsdWdpbkNzcyB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHsgTWV0cmljc1BhbmVsQ3RybCBhcyBNZXRyaWNzUGFuZWxDdHJsRVM2IH0gZnJvbSAnYXBwL2FuZ3VsYXIvcGFuZWwvbWV0cmljc19wYW5lbF9jdHJsJztcbmltcG9ydCB7IFBhbmVsQ3RybCBhcyBQYW5lbEN0cmxFUzYgfSBmcm9tICdhcHAvYW5ndWxhci9wYW5lbC9wYW5lbF9jdHJsJztcbmltcG9ydCB7IFF1ZXJ5Q3RybCBhcyBRdWVyeUN0cmxFUzYgfSBmcm9tICdhcHAvYW5ndWxhci9wYW5lbC9xdWVyeV9jdHJsJztcblxuY29uc3QgUGFuZWxDdHJsID0gbWFrZUNsYXNzRVM1Q29tcGF0aWJsZShQYW5lbEN0cmxFUzYpO1xuY29uc3QgTWV0cmljc1BhbmVsQ3RybCA9IG1ha2VDbGFzc0VTNUNvbXBhdGlibGUoTWV0cmljc1BhbmVsQ3RybEVTNik7XG5jb25zdCBRdWVyeUN0cmwgPSBtYWtlQ2xhc3NFUzVDb21wYXRpYmxlKFF1ZXJ5Q3RybEVTNik7XG5cbmV4cG9ydCB7IFBhbmVsQ3RybCwgTWV0cmljc1BhbmVsQ3RybCwgUXVlcnlDdHJsLCBsb2FkUGx1Z2luQ3NzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/plugins/sdk.ts\n");

/***/ })

}]);