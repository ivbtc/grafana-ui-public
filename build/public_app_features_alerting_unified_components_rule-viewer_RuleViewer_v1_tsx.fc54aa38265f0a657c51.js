"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkgrafana"] = self["webpackChunkgrafana"] || []).push([["public_app_features_alerting_unified_components_rule-viewer_RuleViewer_v1_tsx"],{

/***/ "./public/app/features/alerting/unified/GrafanaRuleQueryViewer.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GrafanaRuleQueryViewer: () => (/* binding */ GrafanaRuleQueryViewer),\n/* harmony export */   QueryPreview: () => (/* binding */ QueryPreview)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var js_yaml__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/js-yaml-npm-4.1.0-3606f32312-c7830dfd45.zip/node_modules/js-yaml/dist/js-yaml.mjs\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Badge/Badge.tsx\");\n/* harmony import */ var _grafana_ui_src_components_DateTimePickers_RelativeTimeRangePicker_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/DateTimePickers/RelativeTimeRangePicker/utils.ts\");\n/* harmony import */ var _expressions_guards__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/expressions/guards.ts\");\n/* harmony import */ var _expressions_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/expressions/types.ts\");\n/* harmony import */ var _state_alertDef__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/features/alerting/state/alertDef.ts\");\n/* harmony import */ var _components_expressions_Expression__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/features/alerting/unified/components/expressions/Expression.tsx\");\n/* harmony import */ var _components_rule_editor_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rule-editor/util.ts\");\n/* harmony import */ var _components_rule_viewer_RuleViewerVisualization__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rule-viewer/RuleViewerVisualization.tsx\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction GrafanaRuleQueryViewer({\n  queries,\n  condition,\n  evalDataByQuery = {},\n  evalTimeRanges = {},\n  onTimeRangeChange\n}) {\n  const dsByUid = (0,lodash__WEBPACK_IMPORTED_MODULE_2__.keyBy)(Object.values(_grafana_runtime__WEBPACK_IMPORTED_MODULE_10__.config.datasources), (ds) => ds.uid);\n  const dataQueries = queries.filter((q) => !(0,_expressions_guards__WEBPACK_IMPORTED_MODULE_4__.isExpressionQuery)(q.model));\n  const expressions = queries.filter((q) => (0,_expressions_guards__WEBPACK_IMPORTED_MODULE_4__.isExpressionQuery)(q.model));\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.useStyles2)(getExpressionViewerStyles);\n  const thresholds = (0,_components_rule_editor_util__WEBPACK_IMPORTED_MODULE_8__.getThresholdsForQueries)(queries);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_12__.Stack, { gap: 2, direction: \"column\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.maxWidthContainer }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_12__.Stack, { gap: 2 }, dataQueries.map(({ model, relativeTimeRange, refId, datasourceUid }, index) => {\n    const dataSource = dsByUid[datasourceUid];\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\n      QueryPreview,\n      {\n        key: index,\n        refId,\n        isAlertCondition: condition === refId,\n        model,\n        relativeTimeRange,\n        evalTimeRange: evalTimeRanges[refId],\n        dataSource,\n        thresholds: thresholds[refId],\n        queryData: evalDataByQuery[refId],\n        onEvalTimeRangeChange: (timeRange) => onTimeRangeChange(refId, timeRange)\n      }\n    );\n  }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.maxWidthContainer }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_12__.Stack, { gap: 1 }, expressions.map(({ model, refId, datasourceUid }, index) => {\n    const dataSource = dsByUid[datasourceUid];\n    return (0,_expressions_guards__WEBPACK_IMPORTED_MODULE_4__.isExpressionQuery)(model) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\n      ExpressionPreview,\n      {\n        key: index,\n        refId,\n        isAlertCondition: condition === refId,\n        model,\n        dataSource,\n        evalData: evalDataByQuery[refId]\n      }\n    );\n  }))));\n}\nfunction QueryPreview({\n  refId,\n  relativeTimeRange,\n  thresholds,\n  model,\n  dataSource,\n  queryData,\n  evalTimeRange,\n  onEvalTimeRangeChange\n}) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.useStyles2)(getQueryPreviewStyles);\n  const headerItems = [dataSource?.name ?? \"[[Data source not found]]\"];\n  if (relativeTimeRange) {\n    headerItems.push((0,_grafana_ui_src_components_DateTimePickers_RelativeTimeRangePicker_utils__WEBPACK_IMPORTED_MODULE_13__.mapRelativeTimeRangeToOption)(relativeTimeRange).display);\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(QueryBox, { refId, headerItems, className: styles.contentBox }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"pre\", { className: styles.code }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"code\", null, (0,js_yaml__WEBPACK_IMPORTED_MODULE_1__.dump)(model))), dataSource && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\n    _components_rule_viewer_RuleViewerVisualization__WEBPACK_IMPORTED_MODULE_9__.RuleViewerVisualization,\n    {\n      refId,\n      dsSettings: dataSource,\n      model,\n      data: queryData,\n      thresholds,\n      relativeTimeRange: evalTimeRange,\n      onTimeRangeChange: onEvalTimeRangeChange,\n      className: styles.visualization\n    }\n  ));\n}\nconst getQueryPreviewStyles = (theme) => ({\n  code: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin: ${theme.spacing(1)};\n  `,\n  contentBox: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 1 0 100%;\n  `,\n  visualization: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    padding: ${theme.spacing(1)};\n  `\n});\nfunction ExpressionPreview({ refId, model, evalData, isAlertCondition }) {\n  function renderPreview() {\n    switch (model.type) {\n      case _expressions_types__WEBPACK_IMPORTED_MODULE_5__.ExpressionQueryType.math:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(MathExpressionViewer, { model });\n      case _expressions_types__WEBPACK_IMPORTED_MODULE_5__.ExpressionQueryType.reduce:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(ReduceConditionViewer, { model });\n      case _expressions_types__WEBPACK_IMPORTED_MODULE_5__.ExpressionQueryType.resample:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(ResampleExpressionViewer, { model });\n      case _expressions_types__WEBPACK_IMPORTED_MODULE_5__.ExpressionQueryType.classic:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(ClassicConditionViewer, { model });\n      case _expressions_types__WEBPACK_IMPORTED_MODULE_5__.ExpressionQueryType.threshold:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(ThresholdExpressionViewer, { model });\n      default:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), null, \"Expression not supported: \", model.type);\n    }\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(QueryBox, { refId, headerItems: [(0,lodash__WEBPACK_IMPORTED_MODULE_2__.startCase)(model.type)], isAlertCondition }, renderPreview(), evalData && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_components_expressions_Expression__WEBPACK_IMPORTED_MODULE_7__.ExpressionResult, { series: evalData.series, isAlertCondition }));\n}\nfunction QueryBox({ refId, headerItems = [], children, isAlertCondition, className }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.useStyles2)(getQueryBoxStyles);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.container, className) }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"header\", { className: styles.header }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"span\", { className: styles.refId }, refId), headerItems.map((item, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"span\", { key: index, className: styles.textBlock }, item)), isAlertCondition && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.conditionIndicator }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_14__.Badge, { color: \"green\", icon: \"check\", text: \"Alert condition\" }))), children);\n}\nconst getQueryBoxStyles = (theme) => ({\n  container: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    flex: 1 0 25%;\n    border: 1px solid ${theme.colors.border.strong};\n    max-width: 100%;\n  `,\n  header: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: flex;\n    align-items: center;\n    gap: ${theme.spacing(1)};\n    padding: ${theme.spacing(1)};\n    background-color: ${theme.colors.background.secondary};\n  `,\n  textBlock: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    border: 1px solid ${theme.colors.border.weak};\n    padding: ${theme.spacing(0.5, 1)};\n    background-color: ${theme.colors.background.primary};\n  `,\n  refId: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    color: ${theme.colors.text.link};\n    padding: ${theme.spacing(0.5, 1)};\n    border: 1px solid ${theme.colors.border.weak};\n  `,\n  conditionIndicator: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-left: auto;\n  `\n});\nfunction ClassicConditionViewer({ model }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.useStyles2)(getClassicConditionViewerStyles);\n  const reducerFunctions = (0,lodash__WEBPACK_IMPORTED_MODULE_2__.keyBy)(_state_alertDef__WEBPACK_IMPORTED_MODULE_6__[\"default\"].reducerTypes, (rt) => rt.value);\n  const evalOperators = (0,lodash__WEBPACK_IMPORTED_MODULE_2__.keyBy)(_state_alertDef__WEBPACK_IMPORTED_MODULE_6__[\"default\"].evalOperators, (eo) => eo.value);\n  const evalFunctions = (0,lodash__WEBPACK_IMPORTED_MODULE_2__.keyBy)(_state_alertDef__WEBPACK_IMPORTED_MODULE_6__[\"default\"].evalFunctions, (ef) => ef.value);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.container }, model.conditions?.map(({ query, operator, reducer, evaluator }, index) => {\n    const isRange = isRangeEvaluator(evaluator);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), { key: index }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.blue }, index === 0 ? \"WHEN\" : !!operator?.type && evalOperators[operator?.type]?.text), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.bold }, reducer?.type && reducerFunctions[reducer.type]?.text), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.blue }, \"OF\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.bold }, query.params[0]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.blue }, evalFunctions[evaluator.type].text), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.bold }, isRange ? `(${evaluator.params[0]}; ${evaluator.params[1]})` : evaluator.params[0]));\n  }));\n}\nconst getClassicConditionViewerStyles = (theme) => ({\n  container: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    padding: ${theme.spacing(1)};\n    display: grid;\n    grid-template-columns: max-content max-content max-content max-content max-content max-content;\n    gap: ${theme.spacing(0, 1)};\n  `,\n  ...getCommonQueryStyles(theme)\n});\nfunction ReduceConditionViewer({ model }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.useStyles2)(getReduceConditionViewerStyles);\n  const { reducer, expression, settings } = model;\n  const reducerType = _expressions_types__WEBPACK_IMPORTED_MODULE_5__.reducerTypes.find((rt) => rt.value === reducer);\n  const reducerMode = settings?.mode ?? _expressions_types__WEBPACK_IMPORTED_MODULE_5__.ReducerMode.Strict;\n  const modeName = _expressions_types__WEBPACK_IMPORTED_MODULE_5__.reducerModes.find((rm) => rm.value === reducerMode);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.container }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Function\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, reducerType?.label), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Input\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, expression), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Mode\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, modeName?.label));\n}\nconst getReduceConditionViewerStyles = (theme) => ({\n  container: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    padding: ${theme.spacing(1)};\n    display: grid;\n    gap: ${theme.spacing(1)};\n    grid-template-rows: 1fr 1fr;\n    grid-template-columns: 1fr 1fr 1fr 1fr;\n\n    > :nth-child(6) {\n      grid-column: span 3;\n    }\n  `,\n  ...getCommonQueryStyles(theme)\n});\nfunction ResampleExpressionViewer({ model }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.useStyles2)(getResampleExpressionViewerStyles);\n  const { expression, window, downsampler, upsampler } = model;\n  const downsamplerType = _expressions_types__WEBPACK_IMPORTED_MODULE_5__.downsamplingTypes.find((dt) => dt.value === downsampler);\n  const upsamplerType = _expressions_types__WEBPACK_IMPORTED_MODULE_5__.upsamplingTypes.find((ut) => ut.value === upsampler);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.container }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Input\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, expression), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Resample to\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, window), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Downsample\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, downsamplerType?.label), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Upsample\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, upsamplerType?.label));\n}\nconst getResampleExpressionViewerStyles = (theme) => ({\n  container: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    padding: ${theme.spacing(1)};\n    display: grid;\n    gap: ${theme.spacing(1)};\n    grid-template-columns: 1fr 1fr 1fr 1fr;\n    grid-template-rows: 1fr 1fr;\n  `,\n  ...getCommonQueryStyles(theme)\n});\nfunction ThresholdExpressionViewer({ model }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.useStyles2)(getExpressionViewerStyles);\n  const { expression, conditions } = model;\n  const evaluator = conditions && conditions[0]?.evaluator;\n  const thresholdFunction = _expressions_types__WEBPACK_IMPORTED_MODULE_5__.thresholdFunctions.find((tf) => tf.value === evaluator?.type);\n  const isRange = evaluator ? isRangeEvaluator(evaluator) : false;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.container }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Input\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, expression), evaluator && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.blue }, thresholdFunction?.label), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.bold }, isRange ? `(${evaluator.params[0]}; ${evaluator.params[1]})` : evaluator.params[0])));\n}\nconst getExpressionViewerStyles = (theme) => {\n  const { blue, bold, ...common } = getCommonQueryStyles(theme);\n  return {\n    ...common,\n    maxWidthContainer: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      max-width: 100%;\n    `,\n    container: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      padding: ${theme.spacing(1)};\n      display: flex;\n      gap: ${theme.spacing(1)};\n    `,\n    blue: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      ${blue};\n      margin: auto 0;\n    `,\n    bold: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      ${bold};\n      margin: auto 0;\n    `\n  };\n};\nfunction MathExpressionViewer({ model }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_11__.useStyles2)(getExpressionViewerStyles);\n  const { expression } = model;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.container }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.label }, \"Input\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: styles.value }, expression));\n}\nconst getCommonQueryStyles = (theme) => ({\n  blue: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    color: ${theme.colors.text.link};\n  `,\n  bold: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    font-weight: ${theme.typography.fontWeightBold};\n  `,\n  label: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: flex;\n    align-items: center;\n    padding: ${theme.spacing(0.5, 1)};\n    background-color: ${theme.colors.background.secondary};\n    font-size: ${theme.typography.bodySmall.fontSize};\n    line-height: ${theme.typography.bodySmall.lineHeight};\n    font-weight: ${theme.typography.fontWeightBold};\n  `,\n  value: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    padding: ${theme.spacing(0.5, 1)};\n    border: 1px solid ${theme.colors.border.weak};\n  `\n});\nfunction isRangeEvaluator(evaluator) {\n  return evaluator.type === _state_alertDef__WEBPACK_IMPORTED_MODULE_6__.EvalFunction.IsWithinRange || evaluator.type === _state_alertDef__WEBPACK_IMPORTED_MODULE_6__.EvalFunction.IsOutsideRange;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvR3JhZmFuYVJ1bGVRdWVyeVZpZXdlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFDSDtBQUNZO0FBQ2Y7QUFHSTtBQUNDO0FBQ1c7QUFDVztBQUdYO0FBVTNCO0FBQ2dDO0FBRU47QUFDNEI7QUFDckI7QUFVakMsU0FBUyx1QkFBdUI7QUFBQSxFQUNyQztBQUFBLEVBQ0E7QUFBQSxFQUNBLGtCQUFrQixDQUFDO0FBQUEsRUFDbkIsaUJBQWlCLENBQUM7QUFBQSxFQUNsQjtBQUNGLEdBQTJCO0FBQ3pCLFFBQU0sVUFBVSw2Q0FBSyxDQUFDLE9BQU8sT0FBTyxxREFBTSxDQUFDLFdBQVcsR0FBRyxDQUFDLE9BQU8sR0FBRyxHQUFHO0FBQ3ZFLFFBQU0sY0FBYyxRQUFRLE9BQU8sQ0FBQyxNQUFNLENBQUMsc0VBQWlCLENBQUMsRUFBRSxLQUFLLENBQUM7QUFDckUsUUFBTSxjQUFjLFFBQVEsT0FBTyxDQUFDLE1BQU0sc0VBQWlCLENBQUMsRUFBRSxLQUFLLENBQUM7QUFDcEUsUUFBTSxTQUFTLHdEQUFVLENBQUMseUJBQXlCO0FBRW5ELFFBQU0sYUFBYSxxRkFBdUIsQ0FBQyxPQUFPO0FBRWxELFNBQ0UsMkVBQUMseURBQUssSUFBQyxLQUFLLEdBQUcsV0FBVSxZQUN2QiwyRUFBQyxTQUFJLFdBQVcsT0FBTyxxQkFDckIsMkVBQUMseURBQUssSUFBQyxLQUFLLEtBQ1QsWUFBWSxJQUFJLENBQUMsRUFBRSxPQUFPLG1CQUFtQixPQUFPLGNBQWMsR0FBRyxVQUFVO0FBQzlFLFVBQU0sYUFBYSxRQUFRLGFBQWE7QUFFeEMsV0FDRTtBQUFBLE1BQUM7QUFBQTtBQUFBLFFBQ0MsS0FBSztBQUFBLFFBQ0w7QUFBQSxRQUNBLGtCQUFrQixjQUFjO0FBQUEsUUFDaEM7QUFBQSxRQUNBO0FBQUEsUUFDQSxlQUFlLGVBQWUsS0FBSztBQUFBLFFBQ25DO0FBQUEsUUFD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LEtBQUssQ0FBQztBQUFBLHdCQUNYLE1BQU0sT0FBTyxXQUFXO0FBQUEsaUJBQy9CLE1BQU0sV0FBVyxVQUFVO0FBQUEsbUJBQ3pCLE1BQU0sV0FBVyxVQUFVO0FBQUEsbUJBQzNCLE1BQU0sV0FBVztBQUFBO0FBQUEsRUFFbEMsT0FBTyxpREFBRztBQUFILGVBQ00sTUFBTSxRQUFRLEtBQUssQ0FBQztBQUFBLHdCQUNYLE1BQU0sT0FBTyxPQUFPO0FBQUE7QUFFNUM7QUFFQSxTQUFTLGlCQUFpQixXQUFxRDtBQUM3RSxTQUFPLFVBQVUsU0FBUyx5REFBWSxDQUFDLGlCQUFpQixVQUFVLFNBQVMseURBQVksQ0FBQztBQUMxRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvR3JhZmFuYVJ1bGVRdWVyeVZpZXdlci50c3g/OTlkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MsIGN4IH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCB7IGR1bXAgfSBmcm9tICdqcy15YW1sJztcbmltcG9ydCB7IGtleUJ5LCBzdGFydENhc2UgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgRGF0YVNvdXJjZUluc3RhbmNlU2V0dGluZ3MsIEdyYWZhbmFUaGVtZTIsIFBhbmVsRGF0YSwgUmVsYXRpdmVUaW1lUmFuZ2UgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHsgQmFkZ2UsIHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBtYXBSZWxhdGl2ZVRpbWVSYW5nZVRvT3B0aW9uIH0gZnJvbSAnQGdyYWZhbmEvdWkvc3JjL2NvbXBvbmVudHMvRGF0ZVRpbWVQaWNrZXJzL1JlbGF0aXZlVGltZVJhbmdlUGlja2VyL3V0aWxzJztcblxuaW1wb3J0IHsgQWxlcnRRdWVyeSB9IGZyb20gJy4uLy4uLy4uL3R5cGVzL3VuaWZpZWQtYWxlcnRpbmctZHRvJztcbmltcG9ydCB7IGlzRXhwcmVzc2lvblF1ZXJ5IH0gZnJvbSAnLi4vLi4vZXhwcmVzc2lvbnMvZ3VhcmRzJztcbmltcG9ydCB7XG4gIGRvd25zYW1wbGluZ1R5cGVzLFxuICBFeHByZXNzaW9uUXVlcnksXG4gIEV4cHJlc3Npb25RdWVyeVR5cGUsXG4gIHJlZHVjZXJNb2RlcyxcbiAgUmVkdWNlck1vZGUsXG4gIHJlZHVjZXJUeXBlcyxcbiAgdGhyZXNob2xkRnVuY3Rpb25zLFxuICB1cHNhbXBsaW5nVHlwZXMsXG59IGZyb20gJy4uLy4uL2V4cHJlc3Npb25zL3R5cGVzJztcbmltcG9ydCBhbGVydERlZiwgeyBFdmFsRnVuY3Rpb24gfSBmcm9tICcuLi9zdGF0ZS9hbGVydERlZic7XG5cbmltcG9ydCB7IEV4cHJlc3Npb25SZXN1bHQgfSBmcm9tICcuL2NvbXBvbmVudHMvZXhwcmVzc2lvbnMvRXhwcmVzc2lvbic7XG5pbXBvcnQgeyBnZXRUaHJlc2hvbGRzRm9yUXVlcmllcywgVGhyZXNob2xkRGVmaW5pdGlvbiB9IGZyb20gJy4vY29tcG9uZW50cy9ydWxlLWVkaXRvci91dGlsJztcbmltcG9ydCB7IFJ1bGVWaWV3ZXJWaXN1YWxpemF0aW9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3J1bGUtdmlld2VyL1J1bGVWaWV3ZXJWaXN1YWxpemF0aW9uJztcblxuaW50ZXJmYWNlIEdyYWZhbmFSdWxlVmlld2VyUHJvcHMge1xuICBxdWVyaWVzOiBBbGVydFF1ZXJ5W107XG4gIGNvbmRpdGlvbjogc3RyaW5nO1xuICBldmFsRGF0YUJ5UXVlcnk/OiBSZWNvcmQ8c3RyaW5nLCBQYW5lbERhdGE+O1xuICBldmFsVGltZVJhbmdlcz86IFJlY29yZDxzdHJpbmcsIFJlbGF0aXZlVGltZVJhbmdlPjtcbiAgb25UaW1lUmFuZ2VDaGFuZ2U6IChxdWVyeVJlZjogc3RyaW5nLCB0aW1lUmFuZ2U6IFJlbGF0aXZlVGltZVJhbmdlKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR3JhZmFuYVJ1bGVRdWVyeVZpZXdlcih7XG4gIHF1ZXJpZXMsXG4gIGNvbmRpdGlvbixcbiAgZXZhbERhdGFCeVF1ZXJ5ID0ge30sXG4gIGV2YWxUaW1lUmFuZ2VzID0ge30sXG4gIG9uVGltZVJhbmdlQ2hhbmdlLFxufTogR3JhZmFuYVJ1bGVWaWV3ZXJQcm9wcykge1xuICBjb25zdCBkc0J5VWlkID0ga2V5QnkoT2JqZWN0LnZhbHVlcyhjb25maWcuZGF0YXNvdXJjZXMpLCAoZHMpID0+IGRzLnVpZCk7XG4gIGNvbnN0IGRhdGFRdWVyaWVzID0gcXVlcmllcy5maWx0ZXIoKHEpID0+ICFpc0V4cHJlc3Npb25RdWVyeShxLm1vZGVsKSk7XG4gIGNvbnN0IGV4cHJlc3Npb25zID0gcXVlcmllcy5maWx0ZXIoKHEpID0+IGlzRXhwcmVzc2lvblF1ZXJ5KHEubW9kZWwpKTtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRFeHByZXNzaW9uVmlld2VyU3R5bGVzKTtcblxuICBjb25zdCB0aHJlc2hvbGRzID0gZ2V0VGhyZXNob2xkc0ZvclF1ZXJpZXMocXVlcmllcyk7XG5cbiAgcmV0dXJuIChcbiAgICA8U3RhY2sgZ2FwPXsyfSBkaXJlY3Rpb249XCJjb2x1bW5cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubWF4V2lkdGhDb250YWluZXJ9PlxuICAgICAgICA8U3RhY2sgZ2FwPXsyfT5cbiAgICAgICAgICB7ZGF0YVF1ZXJpZXMubWFwKCh7IG1vZGVsLCByZWxhdGl2ZVRpbWVSYW5nZSwgcmVmSWQsIGRhdGFzb3VyY2VVaWQgfSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFTb3VyY2UgPSBkc0J5VWlkW2RhdGFzb3VyY2VVaWRdO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8UXVlcnlQcmV2aWV3XG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICByZWZJZD17cmVmSWR9XG4gICAgICAgICAgICAgICAgaXNBbGVydENvbmRpdGlvbj17Y29uZGl0aW9uID09PSByZWZJZH1cbiAgICAgICAgICAgICAgICBtb2RlbD17bW9kZWx9XG4gICAgICAgICAgICAgICAgcmVsYXRpdmVUaW1lUmFuZ2U9e3JlbGF0aXZlVGltZVJhbmdlfVxuICAgICAgICAgICAgICAgIGV2YWxUaW1lUmFuZ2U9e2V2YWxUaW1lUmFuZ2VzW3JlZklkXX1cbiAgICAgICAgICAgICAgICBkYXRhU291cmNlPXtkYXRhU291cmNlfVxuICAgICAgICAgICAgICAgIHRocmVzaG9sZHM9e3RocmVzaG9sZHNbcmVmSWRdfVxuICAgICAgICAgICAgICAgIHF1ZXJ5RGF0YT17ZXZhbERhdGFCeVF1ZXJ5W3JlZklkXX1cbiAgICAgICAgICAgICAgICBvbkV2YWxUaW1lUmFuZ2VDaGFuZ2U9eyh0aW1lUmFuZ2UpID0+IG9uVGltZVJhbmdlQ2hhbmdlKHJlZklkLCB0aW1lUmFuZ2UpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC9TdGFjaz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5tYXhXaWR0aENvbnRhaW5lcn0+XG4gICAgICAgIDxTdGFjayBnYXA9ezF9PlxuICAgICAgICAgIHtleHByZXNzaW9ucy5tYXAoKHsgbW9kZWwsIHJlZklkLCBkYXRhc291cmNlVWlkIH0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhU291cmNlID0gZHNCeVVpZFtkYXRhc291cmNlVWlkXTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgaXNFeHByZXNzaW9uUXVlcnkobW9kZWwpICYmIChcbiAgICAgICAgICAgICAgICA8RXhwcmVzc2lvblByZXZpZXdcbiAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICByZWZJZD17cmVmSWR9XG4gICAgICAgICAgICAgICAgICBpc0FsZXJ0Q29uZGl0aW9uPXtjb25kaXRpb24gPT09IHJlZklkfVxuICAgICAgICAgICAgICAgICAgbW9kZWw9e21vZGVsfVxuICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZT17ZGF0YVNvdXJjZX1cbiAgICAgICAgICAgICAgICAgIGV2YWxEYXRhPXtldmFsRGF0YUJ5UXVlcnlbcmVmSWRdfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvU3RhY2s+XG4gICAgICA8L2Rpdj5cbiAgICA8L1N0YWNrPlxuICApO1xufVxuXG5pbnRlcmZhY2UgUXVlcnlQcmV2aWV3UHJvcHMgZXh0ZW5kcyBQaWNrPEFsZXJ0UXVlcnksICdyZWZJZCcgfCAncmVsYXRpdmVUaW1lUmFuZ2UnIHwgJ21vZGVsJz4ge1xuICBpc0FsZXJ0Q29uZGl0aW9uOiBib29sZWFuO1xuICBkYXRhU291cmNlPzogRGF0YVNvdXJjZUluc3RhbmNlU2V0dGluZ3M7XG4gIHF1ZXJ5RGF0YT86IFBhbmVsRGF0YTtcbiAgdGhyZXNob2xkcz86IFRocmVzaG9sZERlZmluaXRpb247XG4gIGV2YWxUaW1lUmFuZ2U/OiBSZWxhdGl2ZVRpbWVSYW5nZTtcbiAgb25FdmFsVGltZVJhbmdlQ2hhbmdlOiAodGltZVJhbmdlOiBSZWxhdGl2ZVRpbWVSYW5nZSkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5UHJldmlldyh7XG4gIHJlZklkLFxuICByZWxhdGl2ZVRpbWVSYW5nZSxcbiAgdGhyZXNob2xkcyxcbiAgbW9kZWwsXG4gIGRhdGFTb3VyY2UsXG4gIHF1ZXJ5RGF0YSxcbiAgZXZhbFRpbWVSYW5nZSxcbiAgb25FdmFsVGltZVJhbmdlQ2hhbmdlLFxufTogUXVlcnlQcmV2aWV3UHJvcHMpIHtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRRdWVyeVByZXZpZXdTdHlsZXMpO1xuXG4gIC8vIHJlbGF0aXZlVGltZVJhbmdlIGlzIHdoYXQgaXMgZGVmaW5lZCBmb3IgYSBxdWVyeVxuICAvLyBldmFsVGltZVJhbmdlIGlzIHRlbXBvcmFyeSB2YWx1ZSB3aGljaCB0aGUgdXNlciBjYW4gY2hhbmdlXG4gIGNvbnN0IGhlYWRlckl0ZW1zID0gW2RhdGFTb3VyY2U/Lm5hbWUgPz8gJ1tbRGF0YSBzb3VyY2Ugbm90IGZvdW5kXV0nXTtcbiAgaWYgKHJlbGF0aXZlVGltZVJhbmdlKSB7XG4gICAgaGVhZGVySXRlbXMucHVzaChtYXBSZWxhdGl2ZVRpbWVSYW5nZVRvT3B0aW9uKHJlbGF0aXZlVGltZVJhbmdlKS5kaXNwbGF5KTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPFF1ZXJ5Qm94IHJlZklkPXtyZWZJZH0gaGVhZGVySXRlbXM9e2hlYWRlckl0ZW1zfSBjbGFzc05hbWU9e3N0eWxlcy5jb250ZW50Qm94fT5cbiAgICAgIDxwcmUgY2xhc3NOYW1lPXtzdHlsZXMuY29kZX0+XG4gICAgICAgIDxjb2RlPntkdW1wKG1vZGVsKX08L2NvZGU+XG4gICAgICA8L3ByZT5cbiAgICAgIHtkYXRhU291cmNlICYmIChcbiAgICAgICAgPFJ1bGVWaWV3ZXJWaXN1YWxpemF0aW9uXG4gICAgICAgICAgcmVmSWQ9e3JlZklkfVxuICAgICAgICAgIGRzU2V0dGluZ3M9e2RhdGFTb3VyY2V9XG4gICAgICAgICAgbW9kZWw9e21vZGVsfVxuICAgICAgICAgIGRhdGE9e3F1ZXJ5RGF0YX1cbiAgICAgICAgICB0aHJlc2hvbGRzPXt0aHJlc2hvbGRzfVxuICAgICAgICAgIHJlbGF0aXZlVGltZVJhbmdlPXtldmFsVGltZVJhbmdlfVxuICAgICAgICAgIG9uVGltZVJhbmdlQ2hhbmdlPXtvbkV2YWxUaW1lUmFuZ2VDaGFuZ2V9XG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMudmlzdWFsaXphdGlvbn1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgPC9RdWVyeUJveD5cbiAgKTtcbn1cblxuY29uc3QgZ2V0UXVlcnlQcmV2aWV3U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICBjb2RlOiBjc3NgXG4gICAgbWFyZ2luOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICBgLFxuICBjb250ZW50Qm94OiBjc3NgXG4gICAgZmxleDogMSAwIDEwMCU7XG4gIGAsXG4gIHZpc3VhbGl6YXRpb246IGNzc2BcbiAgICBwYWRkaW5nOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICBgLFxufSk7XG5cbmludGVyZmFjZSBFeHByZXNzaW9uUHJldmlld1Byb3BzIGV4dGVuZHMgUGljazxBbGVydFF1ZXJ5LCAncmVmSWQnPiB7XG4gIGlzQWxlcnRDb25kaXRpb246IGJvb2xlYW47XG4gIG1vZGVsOiBFeHByZXNzaW9uUXVlcnk7XG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VJbnN0YW5jZVNldHRpbmdzO1xuICBldmFsRGF0YT86IFBhbmVsRGF0YTtcbn1cblxuZnVuY3Rpb24gRXhwcmVzc2lvblByZXZpZXcoeyByZWZJZCwgbW9kZWwsIGV2YWxEYXRhLCBpc0FsZXJ0Q29uZGl0aW9uIH06IEV4cHJlc3Npb25QcmV2aWV3UHJvcHMpIHtcbiAgZnVuY3Rpb24gcmVuZGVyUHJldmlldygpIHtcbiAgICBzd2l0Y2ggKG1vZGVsLnR5cGUpIHtcbiAgICAgIGNhc2UgRXhwcmVzc2lvblF1ZXJ5VHlwZS5tYXRoOlxuICAgICAgICByZXR1cm4gPE1hdGhFeHByZXNzaW9uVmlld2VyIG1vZGVsPXttb2RlbH0gLz47XG5cbiAgICAgIGNhc2UgRXhwcmVzc2lvblF1ZXJ5VHlwZS5yZWR1Y2U6XG4gICAgICAgIHJldHVybiA8UmVkdWNlQ29uZGl0aW9uVmlld2VyIG1vZGVsPXttb2RlbH0gLz47XG5cbiAgICAgIGNhc2UgRXhwcmVzc2lvblF1ZXJ5VHlwZS5yZXNhbXBsZTpcbiAgICAgICAgcmV0dXJuIDxSZXNhbXBsZUV4cHJlc3Npb25WaWV3ZXIgbW9kZWw9e21vZGVsfSAvPjtcblxuICAgICAgY2FzZSBFeHByZXNzaW9uUXVlcnlUeXBlLmNsYXNzaWM6XG4gICAgICAgIHJldHVybiA8Q2xhc3NpY0NvbmRpdGlvblZpZXdlciBtb2RlbD17bW9kZWx9IC8+O1xuXG4gICAgICBjYXNlIEV4cHJlc3Npb25RdWVyeVR5cGUudGhyZXNob2xkOlxuICAgICAgICByZXR1cm4gPFRocmVzaG9sZEV4cHJlc3Npb25WaWV3ZXIgbW9kZWw9e21vZGVsfSAvPjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDw+RXhwcmVzc2lvbiBub3Qgc3VwcG9ydGVkOiB7bW9kZWwudHlwZX08Lz47XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8UXVlcnlCb3ggcmVmSWQ9e3JlZklkfSBoZWFkZXJJdGVtcz17W3N0YXJ0Q2FzZShtb2RlbC50eXBlKV19IGlzQWxlcnRDb25kaXRpb249e2lzQWxlcnRDb25kaXRpb259PlxuICAgICAge3JlbmRlclByZXZpZXcoKX1cbiAgICAgIHtldmFsRGF0YSAmJiA8RXhwcmVzc2lvblJlc3VsdCBzZXJpZXM9e2V2YWxEYXRhLnNlcmllc30gaXNBbGVydENvbmRpdGlvbj17aXNBbGVydENvbmRpdGlvbn0gLz59XG4gICAgPC9RdWVyeUJveD5cbiAgKTtcbn1cblxuaW50ZXJmYWNlIFF1ZXJ5Qm94UHJvcHMgZXh0ZW5kcyBSZWFjdC5Qcm9wc1dpdGhDaGlsZHJlbjx1bmtub3duPiB7XG4gIHJlZklkOiBzdHJpbmc7XG4gIGhlYWRlckl0ZW1zPzogc3RyaW5nW107XG4gIGlzQWxlcnRDb25kaXRpb24/OiBib29sZWFuO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIFF1ZXJ5Qm94KHsgcmVmSWQsIGhlYWRlckl0ZW1zID0gW10sIGNoaWxkcmVuLCBpc0FsZXJ0Q29uZGl0aW9uLCBjbGFzc05hbWUgfTogUXVlcnlCb3hQcm9wcykge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFF1ZXJ5Qm94U3R5bGVzKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjeChzdHlsZXMuY29udGFpbmVyLCBjbGFzc05hbWUpfT5cbiAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPXtzdHlsZXMuaGVhZGVyfT5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMucmVmSWR9PntyZWZJZH08L3NwYW4+XG4gICAgICAgIHtoZWFkZXJJdGVtcy5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoXG4gICAgICAgICAgPHNwYW4ga2V5PXtpbmRleH0gY2xhc3NOYW1lPXtzdHlsZXMudGV4dEJsb2NrfT5cbiAgICAgICAgICAgIHtpdGVtfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKSl9XG4gICAgICAgIHtpc0FsZXJ0Q29uZGl0aW9uICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNvbmRpdGlvbkluZGljYXRvcn0+XG4gICAgICAgICAgICA8QmFkZ2UgY29sb3I9XCJncmVlblwiIGljb249XCJjaGVja1wiIHRleHQ9XCJBbGVydCBjb25kaXRpb25cIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9oZWFkZXI+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmNvbnN0IGdldFF1ZXJ5Qm94U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICBjb250YWluZXI6IGNzc2BcbiAgICBmbGV4OiAxIDAgMjUlO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlci5zdHJvbmd9O1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgYCxcbiAgaGVhZGVyOiBjc3NgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogJHt0aGVtZS5zcGFjaW5nKDEpfTtcbiAgICBwYWRkaW5nOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLmJhY2tncm91bmQuc2Vjb25kYXJ5fTtcbiAgYCxcbiAgdGV4dEJsb2NrOiBjc3NgXG4gICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMuYm9yZGVyLndlYWt9O1xuICAgIHBhZGRpbmc6ICR7dGhlbWUuc3BhY2luZygwLjUsIDEpfTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5iYWNrZ3JvdW5kLnByaW1hcnl9O1xuICBgLFxuICByZWZJZDogY3NzYFxuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy50ZXh0Lmxpbmt9O1xuICAgIHBhZGRpbmc6ICR7dGhlbWUuc3BhY2luZygwLjUsIDEpfTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ib3JkZXIud2Vha307XG4gIGAsXG4gIGNvbmRpdGlvbkluZGljYXRvcjogY3NzYFxuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBgLFxufSk7XG5cbmZ1bmN0aW9uIENsYXNzaWNDb25kaXRpb25WaWV3ZXIoeyBtb2RlbCB9OiB7IG1vZGVsOiBFeHByZXNzaW9uUXVlcnkgfSkge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldENsYXNzaWNDb25kaXRpb25WaWV3ZXJTdHlsZXMpO1xuXG4gIGNvbnN0IHJlZHVjZXJGdW5jdGlvbnMgPSBrZXlCeShhbGVydERlZi5yZWR1Y2VyVHlwZXMsIChydCkgPT4gcnQudmFsdWUpO1xuICBjb25zdCBldmFsT3BlcmF0b3JzID0ga2V5QnkoYWxlcnREZWYuZXZhbE9wZXJhdG9ycywgKGVvKSA9PiBlby52YWx1ZSk7XG4gIGNvbnN0IGV2YWxGdW5jdGlvbnMgPSBrZXlCeShhbGVydERlZi5ldmFsRnVuY3Rpb25zLCAoZWYpID0+IGVmLnZhbHVlKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY29udGFpbmVyfT5cbiAgICAgIHttb2RlbC5jb25kaXRpb25zPy5tYXAoKHsgcXVlcnksIG9wZXJhdG9yLCByZWR1Y2VyLCBldmFsdWF0b3IgfSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaXNSYW5nZSA9IGlzUmFuZ2VFdmFsdWF0b3IoZXZhbHVhdG9yKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYmx1ZX0+XG4gICAgICAgICAgICAgIHtpbmRleCA9PT0gMCA/ICdXSEVOJyA6ICEhb3BlcmF0b3I/LnR5cGUgJiYgZXZhbE9wZXJhdG9yc1tvcGVyYXRvcj8udHlwZV0/LnRleHR9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYm9sZH0+e3JlZHVjZXI/LnR5cGUgJiYgcmVkdWNlckZ1bmN0aW9uc1tyZWR1Y2VyLnR5cGVdPy50ZXh0fTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ibHVlfT5PRjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ib2xkfT57cXVlcnkucGFyYW1zWzBdfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ibHVlfT57ZXZhbEZ1bmN0aW9uc1tldmFsdWF0b3IudHlwZV0udGV4dH08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYm9sZH0+XG4gICAgICAgICAgICAgIHtpc1JhbmdlID8gYCgke2V2YWx1YXRvci5wYXJhbXNbMF19OyAke2V2YWx1YXRvci5wYXJhbXNbMV19KWAgOiBldmFsdWF0b3IucGFyYW1zWzBdfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgKTtcbiAgICAgIH0pfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG5jb25zdCBnZXRDbGFzc2ljQ29uZGl0aW9uVmlld2VyU3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICBjb250YWluZXI6IGNzc2BcbiAgICBwYWRkaW5nOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBtYXgtY29udGVudCBtYXgtY29udGVudCBtYXgtY29udGVudCBtYXgtY29udGVudCBtYXgtY29udGVudCBtYXgtY29udGVudDtcbiAgICBnYXA6ICR7dGhlbWUuc3BhY2luZygwLCAxKX07XG4gIGAsXG4gIC4uLmdldENvbW1vblF1ZXJ5U3R5bGVzKHRoZW1lKSxcbn0pO1xuXG5mdW5jdGlvbiBSZWR1Y2VDb25kaXRpb25WaWV3ZXIoeyBtb2RlbCB9OiB7IG1vZGVsOiBFeHByZXNzaW9uUXVlcnkgfSkge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFJlZHVjZUNvbmRpdGlvblZpZXdlclN0eWxlcyk7XG5cbiAgY29uc3QgeyByZWR1Y2VyLCBleHByZXNzaW9uLCBzZXR0aW5ncyB9ID0gbW9kZWw7XG4gIGNvbnN0IHJlZHVjZXJUeXBlID0gcmVkdWNlclR5cGVzLmZpbmQoKHJ0KSA9PiBydC52YWx1ZSA9PT0gcmVkdWNlcik7XG5cbiAgY29uc3QgcmVkdWNlck1vZGUgPSBzZXR0aW5ncz8ubW9kZSA/PyBSZWR1Y2VyTW9kZS5TdHJpY3Q7XG4gIGNvbnN0IG1vZGVOYW1lID0gcmVkdWNlck1vZGVzLmZpbmQoKHJtKSA9PiBybS52YWx1ZSA9PT0gcmVkdWNlck1vZGUpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sYWJlbH0+RnVuY3Rpb248L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudmFsdWV9PntyZWR1Y2VyVHlwZT8ubGFiZWx9PC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubGFiZWx9PklucHV0PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnZhbHVlfT57ZXhwcmVzc2lvbn08L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sYWJlbH0+TW9kZTwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy52YWx1ZX0+e21vZGVOYW1lPy5sYWJlbH08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuY29uc3QgZ2V0UmVkdWNlQ29uZGl0aW9uVmlld2VyU3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICBjb250YWluZXI6IGNzc2BcbiAgICBwYWRkaW5nOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ2FwOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICAgIGdyaWQtdGVtcGxhdGUtcm93czogMWZyIDFmcjtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyIDFmcjtcblxuICAgID4gOm50aC1jaGlsZCg2KSB7XG4gICAgICBncmlkLWNvbHVtbjogc3BhbiAzO1xuICAgIH1cbiAgYCxcbiAgLi4uZ2V0Q29tbW9uUXVlcnlTdHlsZXModGhlbWUpLFxufSk7XG5cbmZ1bmN0aW9uIFJlc2FtcGxlRXhwcmVzc2lvblZpZXdlcih7IG1vZGVsIH06IHsgbW9kZWw6IEV4cHJlc3Npb25RdWVyeSB9KSB7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0UmVzYW1wbGVFeHByZXNzaW9uVmlld2VyU3R5bGVzKTtcblxuICBjb25zdCB7IGV4cHJlc3Npb24sIHdpbmRvdywgZG93bnNhbXBsZXIsIHVwc2FtcGxlciB9ID0gbW9kZWw7XG4gIGNvbnN0IGRvd25zYW1wbGVyVHlwZSA9IGRvd25zYW1wbGluZ1R5cGVzLmZpbmQoKGR0KSA9PiBkdC52YWx1ZSA9PT0gZG93bnNhbXBsZXIpO1xuICBjb25zdCB1cHNhbXBsZXJUeXBlID0gdXBzYW1wbGluZ1R5cGVzLmZpbmQoKHV0KSA9PiB1dC52YWx1ZSA9PT0gdXBzYW1wbGVyKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY29udGFpbmVyfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubGFiZWx9PklucHV0PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnZhbHVlfT57ZXhwcmVzc2lvbn08L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sYWJlbH0+UmVzYW1wbGUgdG88L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudmFsdWV9Pnt3aW5kb3d9PC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubGFiZWx9PkRvd25zYW1wbGU8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudmFsdWV9Pntkb3duc2FtcGxlclR5cGU/LmxhYmVsfTwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmxhYmVsfT5VcHNhbXBsZTwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy52YWx1ZX0+e3Vwc2FtcGxlclR5cGU/LmxhYmVsfTwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5jb25zdCBnZXRSZXNhbXBsZUV4cHJlc3Npb25WaWV3ZXJTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+ICh7XG4gIGNvbnRhaW5lcjogY3NzYFxuICAgIHBhZGRpbmc6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgZGlzcGxheTogZ3JpZDtcbiAgICBnYXA6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmciAxZnI7XG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxZnIgMWZyO1xuICBgLFxuICAuLi5nZXRDb21tb25RdWVyeVN0eWxlcyh0aGVtZSksXG59KTtcblxuZnVuY3Rpb24gVGhyZXNob2xkRXhwcmVzc2lvblZpZXdlcih7IG1vZGVsIH06IHsgbW9kZWw6IEV4cHJlc3Npb25RdWVyeSB9KSB7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0RXhwcmVzc2lvblZpZXdlclN0eWxlcyk7XG5cbiAgY29uc3QgeyBleHByZXNzaW9uLCBjb25kaXRpb25zIH0gPSBtb2RlbDtcblxuICBjb25zdCBldmFsdWF0b3IgPSBjb25kaXRpb25zICYmIGNvbmRpdGlvbnNbMF0/LmV2YWx1YXRvcjtcbiAgY29uc3QgdGhyZXNob2xkRnVuY3Rpb24gPSB0aHJlc2hvbGRGdW5jdGlvbnMuZmluZCgodGYpID0+IHRmLnZhbHVlID09PSBldmFsdWF0b3I/LnR5cGUpO1xuXG4gIGNvbnN0IGlzUmFuZ2UgPSBldmFsdWF0b3IgPyBpc1JhbmdlRXZhbHVhdG9yKGV2YWx1YXRvcikgOiBmYWxzZTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY29udGFpbmVyfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubGFiZWx9PklucHV0PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnZhbHVlfT57ZXhwcmVzc2lvbn08L2Rpdj5cblxuICAgICAge2V2YWx1YXRvciAmJiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ibHVlfT57dGhyZXNob2xkRnVuY3Rpb24/LmxhYmVsfTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYm9sZH0+XG4gICAgICAgICAgICB7aXNSYW5nZSA/IGAoJHtldmFsdWF0b3IucGFyYW1zWzBdfTsgJHtldmFsdWF0b3IucGFyYW1zWzFdfSlgIDogZXZhbHVhdG9yLnBhcmFtc1swXX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG5jb25zdCBnZXRFeHByZXNzaW9uVmlld2VyU3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiB7XG4gIGNvbnN0IHsgYmx1ZSwgYm9sZCwgLi4uY29tbW9uIH0gPSBnZXRDb21tb25RdWVyeVN0eWxlcyh0aGVtZSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5jb21tb24sXG4gICAgbWF4V2lkdGhDb250YWluZXI6IGNzc2BcbiAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICBgLFxuICAgIGNvbnRhaW5lcjogY3NzYFxuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDEpfTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgYCxcbiAgICBibHVlOiBjc3NgXG4gICAgICAke2JsdWV9O1xuICAgICAgbWFyZ2luOiBhdXRvIDA7XG4gICAgYCxcbiAgICBib2xkOiBjc3NgXG4gICAgICAke2JvbGR9O1xuICAgICAgbWFyZ2luOiBhdXRvIDA7XG4gICAgYCxcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIE1hdGhFeHByZXNzaW9uVmlld2VyKHsgbW9kZWwgfTogeyBtb2RlbDogRXhwcmVzc2lvblF1ZXJ5IH0pIHtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRFeHByZXNzaW9uVmlld2VyU3R5bGVzKTtcblxuICBjb25zdCB7IGV4cHJlc3Npb24gfSA9IG1vZGVsO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sYWJlbH0+SW5wdXQ8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudmFsdWV9PntleHByZXNzaW9ufTwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5jb25zdCBnZXRDb21tb25RdWVyeVN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4gKHtcbiAgYmx1ZTogY3NzYFxuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy50ZXh0Lmxpbmt9O1xuICBgLFxuICBib2xkOiBjc3NgXG4gICAgZm9udC13ZWlnaHQ6ICR7dGhlbWUudHlwb2dyYXBoeS5mb250V2VpZ2h0Qm9sZH07XG4gIGAsXG4gIGxhYmVsOiBjc3NgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6ICR7dGhlbWUuc3BhY2luZygwLjUsIDEpfTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5iYWNrZ3JvdW5kLnNlY29uZGFyeX07XG4gICAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuYm9keVNtYWxsLmZvbnRTaXplfTtcbiAgICBsaW5lLWhlaWdodDogJHt0aGVtZS50eXBvZ3JhcGh5LmJvZHlTbWFsbC5saW5lSGVpZ2h0fTtcbiAgICBmb250LXdlaWdodDogJHt0aGVtZS50eXBvZ3JhcGh5LmZvbnRXZWlnaHRCb2xkfTtcbiAgYCxcbiAgdmFsdWU6IGNzc2BcbiAgICBwYWRkaW5nOiAke3RoZW1lLnNwYWNpbmcoMC41LCAxKX07XG4gICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMuYm9yZGVyLndlYWt9O1xuICBgLFxufSk7XG5cbmZ1bmN0aW9uIGlzUmFuZ2VFdmFsdWF0b3IoZXZhbHVhdG9yOiB7IHBhcmFtczogbnVtYmVyW107IHR5cGU6IEV2YWxGdW5jdGlvbiB9KSB7XG4gIHJldHVybiBldmFsdWF0b3IudHlwZSA9PT0gRXZhbEZ1bmN0aW9uLklzV2l0aGluUmFuZ2UgfHwgZXZhbHVhdG9yLnR5cGUgPT09IEV2YWxGdW5jdGlvbi5Jc091dHNpZGVSYW5nZTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/GrafanaRuleQueryViewer.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/Authorize.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Authorize: () => (/* binding */ Authorize)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var app_core_services_context_srv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/services/context_srv.ts\");\n\n\n\nconst Authorize = ({ actions, children, fallback = true }) => {\n  if (actions.some((action) => app_core_services_context_srv__WEBPACK_IMPORTED_MODULE_1__.contextSrv.hasAccess(action, fallback))) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n  } else {\n    return null;\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9BdXRob3JpemUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWtCO0FBRVM7QUFRcEIsTUFBTSxZQUFZLENBQUMsRUFBRSxTQUFTLFVBQVUsV0FBVyxLQUFLLE1BQXNDO0FBQ25HLE1BQUksUUFBUSxLQUFLLENBQUMsV0FBVyxxRUFBVSxDQUFDLFVBQVUsUUFBUSxRQUFRLENBQUMsR0FBRztBQUNwRSxXQUFPLDBJQUFHLFFBQVM7QUFBQSxFQUNyQixPQUFPO0FBQ0wsV0FBTztBQUFBLEVBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9BdXRob3JpemUudHN4P2Q4Y2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgY29udGV4dFNydiB9IGZyb20gJ2FwcC9jb3JlL3NlcnZpY2VzL2NvbnRleHRfc3J2JztcbmltcG9ydCB7IEFjY2Vzc0NvbnRyb2xBY3Rpb24gfSBmcm9tICdhcHAvdHlwZXMnO1xuXG50eXBlIFByb3BzID0ge1xuICBhY3Rpb25zOiBBY2Nlc3NDb250cm9sQWN0aW9uW107XG4gIGZhbGxiYWNrPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBjb25zdCBBdXRob3JpemUgPSAoeyBhY3Rpb25zLCBjaGlsZHJlbiwgZmFsbGJhY2sgPSB0cnVlIH06IFJlYWN0LlByb3BzV2l0aENoaWxkcmVuPFByb3BzPikgPT4ge1xuICBpZiAoYWN0aW9ucy5zb21lKChhY3Rpb24pID0+IGNvbnRleHRTcnYuaGFzQWNjZXNzKGFjdGlvbiwgZmFsbGJhY2spKSkge1xuICAgIHJldHVybiA8PntjaGlsZHJlbn08Lz47XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/Authorize.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/Provisioning.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProvisionedResource: () => (/* binding */ ProvisionedResource),\n/* harmony export */   ProvisioningAlert: () => (/* binding */ ProvisioningAlert),\n/* harmony export */   ProvisioningBadge: () => (/* binding */ ProvisioningBadge)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Alert/Alert.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Badge/Badge.tsx\");\n\n\n\nvar ProvisionedResource = /* @__PURE__ */ ((ProvisionedResource2) => {\n  ProvisionedResource2[\"ContactPoint\"] = \"contact point\";\n  ProvisionedResource2[\"Template\"] = \"template\";\n  ProvisionedResource2[\"MuteTiming\"] = \"mute timing\";\n  ProvisionedResource2[\"AlertRule\"] = \"alert rule\";\n  ProvisionedResource2[\"RootNotificationPolicy\"] = \"root notification policy\";\n  return ProvisionedResource2;\n})(ProvisionedResource || {});\nconst ProvisioningAlert = ({ resource }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_1__.Alert, { title: `This ${resource} cannot be edited through the UI`, severity: \"info\" }, \"This \", resource, \" has been provisioned, that means it was created by config. Please contact your server admin to update this \", resource, \".\");\n};\nconst ProvisioningBadge = () => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.Badge, { text: \"Provisioned\", color: \"purple\" });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9Qcm92aXNpb25pbmcudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWtCO0FBRVc7QUFFdEIsSUFBSyxzQkFBTCxrQkFBS0EseUJBQUw7QUFDTCxFQUFBQSxxQkFBQSxrQkFBZTtBQUNmLEVBQUFBLHFCQUFBLGNBQVc7QUFDWCxFQUFBQSxxQkFBQSxnQkFBYTtBQUNiLEVBQUFBLHFCQUFBLGVBQVk7QUFDWixFQUFBQSxxQkFBQSw0QkFBeUI7QUFMZixTQUFBQTtBQUFBO0FBWUwsTUFBTSxvQkFBb0IsQ0FBQyxFQUFFLFNBQVMsTUFBOEI7QUFDekUsU0FDRSwyRUFBQyw4Q0FBSyxJQUFDLE9BQU8sUUFBUSw0Q0FBNEMsVUFBUyxVQUFPLFNBQzFFLFVBQVMsZ0hBQ0YsVUFBUyxHQUN4QjtBQUVKO0FBRU8sTUFBTSxvQkFBb0IsTUFBTTtBQUNyQyxTQUFPLDJFQUFDLDhDQUFLLElBQUMsTUFBTSxlQUFlLE9BQU8sVUFBVTtBQUN0RCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9Qcm92aXNpb25pbmcudHN4PzYzZDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgQWxlcnQsIEJhZGdlIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5leHBvcnQgZW51bSBQcm92aXNpb25lZFJlc291cmNlIHtcbiAgQ29udGFjdFBvaW50ID0gJ2NvbnRhY3QgcG9pbnQnLFxuICBUZW1wbGF0ZSA9ICd0ZW1wbGF0ZScsXG4gIE11dGVUaW1pbmcgPSAnbXV0ZSB0aW1pbmcnLFxuICBBbGVydFJ1bGUgPSAnYWxlcnQgcnVsZScsXG4gIFJvb3ROb3RpZmljYXRpb25Qb2xpY3kgPSAncm9vdCBub3RpZmljYXRpb24gcG9saWN5Jyxcbn1cblxuaW50ZXJmYWNlIFByb3Zpc2lvbmluZ0FsZXJ0UHJvcHMge1xuICByZXNvdXJjZTogUHJvdmlzaW9uZWRSZXNvdXJjZTtcbn1cblxuZXhwb3J0IGNvbnN0IFByb3Zpc2lvbmluZ0FsZXJ0ID0gKHsgcmVzb3VyY2UgfTogUHJvdmlzaW9uaW5nQWxlcnRQcm9wcykgPT4ge1xuICByZXR1cm4gKFxuICAgIDxBbGVydCB0aXRsZT17YFRoaXMgJHtyZXNvdXJjZX0gY2Fubm90IGJlIGVkaXRlZCB0aHJvdWdoIHRoZSBVSWB9IHNldmVyaXR5PVwiaW5mb1wiPlxuICAgICAgVGhpcyB7cmVzb3VyY2V9IGhhcyBiZWVuIHByb3Zpc2lvbmVkLCB0aGF0IG1lYW5zIGl0IHdhcyBjcmVhdGVkIGJ5IGNvbmZpZy4gUGxlYXNlIGNvbnRhY3QgeW91ciBzZXJ2ZXIgYWRtaW4gdG9cbiAgICAgIHVwZGF0ZSB0aGlzIHtyZXNvdXJjZX0uXG4gICAgPC9BbGVydD5cbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBQcm92aXNpb25pbmdCYWRnZSA9ICgpID0+IHtcbiAgcmV0dXJuIDxCYWRnZSB0ZXh0PXsnUHJvdmlzaW9uZWQnfSBjb2xvcj17J3B1cnBsZSd9IC8+O1xufTtcbiJdLCJuYW1lcyI6WyJQcm92aXNpb25lZFJlc291cmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/Provisioning.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/expressions/AlertConditionIndicator.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AlertConditionIndicator: () => (/* binding */ AlertConditionIndicator)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Badge/Badge.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n\n\n\n\nconst AlertConditionIndicator = ({ enabled = false, error, warning, onSetCondition }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useStyles2)(getStyles);\n  if (enabled && error) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.Badge, { color: \"red\", icon: \"exclamation-circle\", text: \"Alert condition\", tooltip: error.message });\n  }\n  if (enabled && warning) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.Badge, { color: \"orange\", icon: \"exclamation-triangle\", text: \"Alert condition\", tooltip: warning.message });\n  }\n  if (enabled && !error && !warning) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.Badge, { color: \"green\", icon: \"check\", text: \"Alert condition\" });\n  }\n  if (!enabled) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"button\", { type: \"button\", className: styles.actionLink, onClick: () => onSetCondition && onSetCondition() }, \"Set as alert condition\");\n  }\n  return null;\n};\nconst getStyles = (theme) => {\n  const clearButton = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.clearButtonStyles)(theme);\n  return {\n    actionLink: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      ${clearButton};\n      color: ${theme.colors.text.link};\n      cursor: pointer;\n\n      &:hover {\n        text-decoration: underline;\n      }\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9leHByZXNzaW9ucy9BbGVydENvbmRpdGlvbkluZGljYXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBb0I7QUFDRjtBQUdtQztBQVM5QyxNQUFNLDBCQUEwQixDQUFDLEVBQUUsVUFBVSxPQUFPLE9BQU8sU0FBUyxlQUFlLE1BQTJCO0FBQ25ILFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFFbkMsTUFBSSxXQUFXLE9BQU87QUFDcEIsV0FBTywyRUFBQyw4Q0FBSyxJQUFDLE9BQU0sT0FBTSxNQUFLLHNCQUFxQixNQUFLLG1CQUFrQixTQUFTLE1BQU0sU0FBUztBQUFBLEVBQ3JHO0FBRUEsTUFBSSxXQUFXLFNBQVM7QUFDdEIsV0FBTywyRUFBQyw4Q0FBSyxJQUFDLE9BQU0sVUFBUyxNQUFLLHdCQUF1QixNQUFLLG1CQUFrQixTQUFTLFFBQVEsU0FBUztBQUFBLEVBQzVHO0FBRUEsTUFBSSxXQUFXLENBQUMsU0FBUyxDQUFDLFNBQVM7QUFDakMsV0FBTywyRUFBQyw4Q0FBSyxJQUFDLE9BQU0sU0FBUSxNQUFLLFNBQVEsTUFBSyxtQkFBa0I7QUFBQSxFQUNsRTtBQUVBLE1BQUksQ0FBQyxTQUFTO0FBQ1osV0FDRSwyRUFBQyxZQUFPLE1BQUssVUFBUyxXQUFXLE9BQU8sWUFBWSxTQUFTLE1BQU0sa0JBQWtCLGVBQWUsS0FBRyx3QkFFdkc7QUFBQSxFQUVKO0FBRUEsU0FBTztBQUNUO0FBRUEsTUFBTSxZQUFZLENBQUMsVUFBeUI7QUFDMUMsUUFBTSxjQUFjLDhEQUFpQixDQUFDLEtBQUs7QUFFM0MsU0FBTztBQUFBLElBQ0wsWUFBWSxpREFBRztBQUFILFFBQ1I7QUFBQSxlQUNPLE1BQU0sT0FBTyxLQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPL0I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9leHByZXNzaW9ucy9BbGVydENvbmRpdGlvbkluZGljYXRvci50c3g/YTY5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgQmFkZ2UsIGNsZWFyQnV0dG9uU3R5bGVzLCB1c2VTdHlsZXMyIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbnRlcmZhY2UgQWxlcnRDb25kaXRpb25Qcm9wcyB7XG4gIGVuYWJsZWQ/OiBib29sZWFuO1xuICBlcnJvcj86IEVycm9yO1xuICB3YXJuaW5nPzogRXJyb3I7XG4gIG9uU2V0Q29uZGl0aW9uPzogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IEFsZXJ0Q29uZGl0aW9uSW5kaWNhdG9yID0gKHsgZW5hYmxlZCA9IGZhbHNlLCBlcnJvciwgd2FybmluZywgb25TZXRDb25kaXRpb24gfTogQWxlcnRDb25kaXRpb25Qcm9wcykgPT4ge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG5cbiAgaWYgKGVuYWJsZWQgJiYgZXJyb3IpIHtcbiAgICByZXR1cm4gPEJhZGdlIGNvbG9yPVwicmVkXCIgaWNvbj1cImV4Y2xhbWF0aW9uLWNpcmNsZVwiIHRleHQ9XCJBbGVydCBjb25kaXRpb25cIiB0b29sdGlwPXtlcnJvci5tZXNzYWdlfSAvPjtcbiAgfVxuXG4gIGlmIChlbmFibGVkICYmIHdhcm5pbmcpIHtcbiAgICByZXR1cm4gPEJhZGdlIGNvbG9yPVwib3JhbmdlXCIgaWNvbj1cImV4Y2xhbWF0aW9uLXRyaWFuZ2xlXCIgdGV4dD1cIkFsZXJ0IGNvbmRpdGlvblwiIHRvb2x0aXA9e3dhcm5pbmcubWVzc2FnZX0gLz47XG4gIH1cblxuICBpZiAoZW5hYmxlZCAmJiAhZXJyb3IgJiYgIXdhcm5pbmcpIHtcbiAgICByZXR1cm4gPEJhZGdlIGNvbG9yPVwiZ3JlZW5cIiBpY29uPVwiY2hlY2tcIiB0ZXh0PVwiQWxlcnQgY29uZGl0aW9uXCIgLz47XG4gIH1cblxuICBpZiAoIWVuYWJsZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPXtzdHlsZXMuYWN0aW9uTGlua30gb25DbGljaz17KCkgPT4gb25TZXRDb25kaXRpb24gJiYgb25TZXRDb25kaXRpb24oKX0+XG4gICAgICAgIFNldCBhcyBhbGVydCBjb25kaXRpb25cbiAgICAgIDwvYnV0dG9uPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICBjb25zdCBjbGVhckJ1dHRvbiA9IGNsZWFyQnV0dG9uU3R5bGVzKHRoZW1lKTtcblxuICByZXR1cm4ge1xuICAgIGFjdGlvbkxpbms6IGNzc2BcbiAgICAgICR7Y2xlYXJCdXR0b259O1xuICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnRleHQubGlua307XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICAgIH1cbiAgICBgLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/expressions/AlertConditionIndicator.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/expressions/Expression.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Expression: () => (/* binding */ Expression),\n/* harmony export */   ExpressionResult: () => (/* binding */ ExpressionResult),\n/* harmony export */   PAGE_SIZE: () => (/* binding */ PAGE_SIZE),\n/* harmony export */   PreviewSummary: () => (/* binding */ PreviewSummary)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/data.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/utils.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/formatter.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Input/AutoSizeInput.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/IconButton/IconButton.tsx\");\n/* harmony import */ var app_features_expressions_components_ClassicConditions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/expressions/components/ClassicConditions.tsx\");\n/* harmony import */ var app_features_expressions_components_Math__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/expressions/components/Math.tsx\");\n/* harmony import */ var app_features_expressions_components_Reduce__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/expressions/components/Reduce.tsx\");\n/* harmony import */ var app_features_expressions_components_Resample__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/features/expressions/components/Resample.tsx\");\n/* harmony import */ var app_features_expressions_components_Threshold__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/features/expressions/components/Threshold.tsx\");\n/* harmony import */ var app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/features/expressions/types.ts\");\n/* harmony import */ var app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/types/unified-alerting-dto.ts\");\n/* harmony import */ var _hooks_usePagination__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/features/alerting/unified/hooks/usePagination.ts\");\n/* harmony import */ var _HoverCard__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/features/alerting/unified/components/HoverCard.tsx\");\n/* harmony import */ var _Spacer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/features/alerting/unified/components/Spacer.tsx\");\n/* harmony import */ var _rules_AlertStateTag__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/AlertStateTag.tsx\");\n/* harmony import */ var _AlertConditionIndicator__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./public/app/features/alerting/unified/components/expressions/AlertConditionIndicator.tsx\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./public/app/features/alerting/unified/components/expressions/util.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Expression = ({\n  queries = [],\n  query,\n  data,\n  error,\n  warning,\n  isAlertCondition,\n  onSetCondition,\n  onUpdateRefId,\n  onRemoveExpression,\n  onUpdateExpressionType,\n  onChangeQuery\n}) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.useStyles2)(getStyles);\n  const queryType = query?.type;\n  const isLoading = data && Object.values(data).some((d) => Boolean(d) && d.state === _grafana_data__WEBPACK_IMPORTED_MODULE_17__.LoadingState.Loading);\n  const hasResults = Array.isArray(data?.series) && !isLoading;\n  const series = data?.series ?? [];\n  const seriesCount = series.length;\n  const alertCondition = isAlertCondition ?? false;\n  const groupedByState = {\n    [app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_9__.PromAlertingRuleState.Firing]: series.filter((serie) => (0,_util__WEBPACK_IMPORTED_MODULE_15__.getSeriesValue)(serie) !== 0),\n    [app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_9__.PromAlertingRuleState.Inactive]: series.filter((serie) => (0,_util__WEBPACK_IMPORTED_MODULE_15__.getSeriesValue)(serie) === 0)\n  };\n  const renderExpressionType = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (query2) => {\n      const availableRefIds = queries.filter((q) => query2.refId !== q.refId).map((q) => ({ value: q.refId, label: q.refId }));\n      switch (query2.type) {\n        case app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.ExpressionQueryType.math:\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(app_features_expressions_components_Math__WEBPACK_IMPORTED_MODULE_4__.Math, { onChange: onChangeQuery, query: query2, labelWidth: \"auto\", onRunQuery: () => {\n          } });\n        case app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.ExpressionQueryType.reduce:\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(app_features_expressions_components_Reduce__WEBPACK_IMPORTED_MODULE_5__.Reduce, { onChange: onChangeQuery, refIds: availableRefIds, labelWidth: \"auto\", query: query2 });\n        case app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.ExpressionQueryType.resample:\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(app_features_expressions_components_Resample__WEBPACK_IMPORTED_MODULE_6__.Resample, { onChange: onChangeQuery, query: query2, labelWidth: \"auto\", refIds: availableRefIds });\n        case app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.ExpressionQueryType.classic:\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(app_features_expressions_components_ClassicConditions__WEBPACK_IMPORTED_MODULE_3__.ClassicConditions, { onChange: onChangeQuery, query: query2, refIds: availableRefIds });\n        case app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.ExpressionQueryType.threshold:\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(app_features_expressions_components_Threshold__WEBPACK_IMPORTED_MODULE_7__.Threshold, { onChange: onChangeQuery, query: query2, labelWidth: \"auto\", refIds: availableRefIds });\n        default:\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null, \"Expression not supported: \", query2.type);\n      }\n    },\n    [onChangeQuery, queries]\n  );\n  const selectedExpressionType = app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.expressionTypes.find((o) => o.value === queryType);\n  const selectedExpressionDescription = selectedExpressionType?.description ?? \"\";\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    \"div\",\n    {\n      className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(\n        styles.expression.wrapper,\n        alertCondition && styles.expression.alertCondition,\n        queryType === app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.ExpressionQueryType.classic && styles.expression.classic,\n        queryType !== app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.ExpressionQueryType.classic && styles.expression.nonClassic\n      )\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.stack }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      Header,\n      {\n        refId: query.refId,\n        queryType,\n        onRemoveExpression: () => onRemoveExpression(query.refId),\n        onUpdateRefId: (newRefId) => onUpdateRefId(query.refId, newRefId),\n        onUpdateExpressionType: (type) => onUpdateExpressionType(query.refId, type),\n        onSetCondition,\n        warning,\n        error,\n        query,\n        alertCondition\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.body }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.description }, selectedExpressionDescription), renderExpressionType(query)), hasResults && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(ExpressionResult, { series, isAlertCondition }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_18__.Stack, { direction: \"row\", alignItems: \"center\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_Spacer__WEBPACK_IMPORTED_MODULE_12__.Spacer, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n      PreviewSummary,\n      {\n        isCondition: Boolean(isAlertCondition),\n        firing: groupedByState[app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_9__.PromAlertingRuleState.Firing].length,\n        normal: groupedByState[app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_9__.PromAlertingRuleState.Inactive].length,\n        seriesCount\n      }\n    )))))\n  );\n};\nconst PAGE_SIZE = 20;\nconst ExpressionResult = ({ series, isAlertCondition }) => {\n  const { pageItems, previousPage, nextPage, numberOfPages, pageStart, pageEnd } = (0,_hooks_usePagination__WEBPACK_IMPORTED_MODULE_10__.usePagination)(series, 1, PAGE_SIZE);\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.useStyles2)(getStyles);\n  const emptyResults = (0,_util__WEBPACK_IMPORTED_MODULE_15__.isEmptySeries)(series);\n  const isTimeSeriesResults = !emptyResults && (0,_grafana_data__WEBPACK_IMPORTED_MODULE_19__.isTimeSeriesFrames)(series);\n  const shouldShowPagination = numberOfPages > 1;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.results }, !emptyResults && isTimeSeriesResults && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", null, pageItems.map((frame, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    TimeseriesRow,\n    {\n      key: (0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(),\n      frame,\n      index: pageStart + index,\n      isAlertCondition\n    }\n  ))), !emptyResults && !isTimeSeriesResults && pageItems.map((frame, index) => (\n    // There's no way to uniquely identify a frame that doesn't cause render bugs :/ (Gilles)\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(FrameRow, { key: (0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(), frame, index: pageStart + index, isAlertCondition })\n  )), emptyResults && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.expression.noData, styles.mutedText) }, \"No data\"), shouldShowPagination && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.pagination.wrapper, \"data-testid\": \"paginate-expression\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_18__.Stack, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_20__.Button,\n    {\n      variant: \"secondary\",\n      fill: \"outline\",\n      onClick: previousPage,\n      icon: \"angle-left\",\n      size: \"sm\",\n      \"aria-label\": \"previous-page\"\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_Spacer__WEBPACK_IMPORTED_MODULE_12__.Spacer, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: styles.mutedText }, pageStart, \" - \", pageEnd, \" of \", series.length), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_Spacer__WEBPACK_IMPORTED_MODULE_12__.Spacer, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_20__.Button,\n    {\n      variant: \"secondary\",\n      fill: \"outline\",\n      onClick: nextPage,\n      icon: \"angle-right\",\n      size: \"sm\",\n      \"aria-label\": \"next-page\"\n    }\n  ))));\n};\nconst PreviewSummary = ({\n  firing,\n  normal,\n  isCondition,\n  seriesCount\n}) => {\n  const { mutedText } = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.useStyles2)(getStyles);\n  if (seriesCount === 0) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: mutedText }, \"No series\");\n  }\n  if (isCondition) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: mutedText }, `${seriesCount} series: ${firing} firing, ${normal} normal`);\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: mutedText }, `${seriesCount} series`);\n};\nconst Header = ({\n  refId,\n  queryType,\n  onUpdateRefId,\n  onRemoveExpression,\n  warning,\n  onSetCondition,\n  alertCondition,\n  query,\n  error\n}) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.useStyles2)(getStyles);\n  const clearButton = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.useStyles2)(_grafana_ui__WEBPACK_IMPORTED_MODULE_20__.clearButtonStyles);\n  const [editMode, setEditMode] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const editing = editMode !== false;\n  const editingRefId = editing && editMode === \"refId\";\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"header\", { className: styles.header.wrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_18__.Stack, { direction: \"row\", gap: 0.5, alignItems: \"center\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_18__.Stack, { direction: \"row\", gap: 1, alignItems: \"center\", wrap: false }, !editingRefId && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"button\", { type: \"button\", className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(clearButton, styles.editable), onClick: () => setEditMode(\"refId\") }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.refId }, refId)), editingRefId && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_21__.AutoSizeInput,\n    {\n      autoFocus: true,\n      defaultValue: refId,\n      minWidth: 5,\n      onChange: (event) => {\n        onUpdateRefId(event.currentTarget.value);\n        setEditMode(false);\n      },\n      onFocus: (event) => event.target.select(),\n      onBlur: (event) => {\n        onUpdateRefId(event.currentTarget.value);\n        setEditMode(false);\n      }\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", null, (0,app_features_expressions_types__WEBPACK_IMPORTED_MODULE_8__.getExpressionLabel)(queryType))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_Spacer__WEBPACK_IMPORTED_MODULE_12__.Spacer, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _AlertConditionIndicator__WEBPACK_IMPORTED_MODULE_14__.AlertConditionIndicator,\n    {\n      onSetCondition: () => onSetCondition(query.refId),\n      enabled: alertCondition,\n      error,\n      warning\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_22__.IconButton,\n    {\n      name: \"trash-alt\",\n      variant: \"secondary\",\n      className: styles.mutedIcon,\n      onClick: onRemoveExpression,\n      tooltip: \"Remove expression\"\n    }\n  )));\n};\nconst FrameRow = ({ frame, index, isAlertCondition }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.useStyles2)(getStyles);\n  const name = (0,_util__WEBPACK_IMPORTED_MODULE_15__.getSeriesName)(frame) || \"Series \" + index;\n  const value = (0,_util__WEBPACK_IMPORTED_MODULE_15__.getSeriesValue)(frame);\n  const labelsRecord = (0,_util__WEBPACK_IMPORTED_MODULE_15__.getSeriesLabels)(frame);\n  const labels = Object.entries(labelsRecord);\n  const hasLabels = labels.length > 0;\n  const showFiring = isAlertCondition && value !== 0;\n  const showNormal = isAlertCondition && value === 0;\n  const title = `${hasLabels ? \"\" : name}${hasLabels ? `{${(0,_util__WEBPACK_IMPORTED_MODULE_15__.formatLabels)(labelsRecord)}}` : \"\"}`;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.resultsRow }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_18__.Stack, { direction: \"row\", gap: 1, alignItems: \"center\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.resultLabel, title }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, hasLabels ? \"\" : name), hasLabels && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, \"{\"), labels.map(([key, value2], index2) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { key: (0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqueId)() }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: styles.expression.labelKey }, key), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, \"=\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, '\"'), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: styles.expression.labelValue }, value2), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, '\"'), index2 < labels.length - 1 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, \", \"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, \"}\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.resultValue }, value), showFiring && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_rules_AlertStateTag__WEBPACK_IMPORTED_MODULE_13__.AlertStateTag, { state: app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_9__.PromAlertingRuleState.Firing, size: \"sm\" }), showNormal && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_rules_AlertStateTag__WEBPACK_IMPORTED_MODULE_13__.AlertStateTag, { state: app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_9__.PromAlertingRuleState.Inactive, size: \"sm\" })));\n};\nconst TimeseriesRow = ({ frame, index }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.useStyles2)(getStyles);\n  const valueField = frame.fields[1];\n  const hasLabels = valueField.labels;\n  const displayNameFromDS = valueField.config?.displayNameFromDS;\n  const name = displayNameFromDS ?? (hasLabels ? (0,_util__WEBPACK_IMPORTED_MODULE_15__.formatLabels)(valueField.labels ?? {}) : \"Series \" + index);\n  const timestamps = frame.fields[0].values;\n  const getTimestampFromIndex = (index2) => frame.fields[0].values[index2];\n  const getValueFromIndex = (index2) => frame.fields[1].values[index2];\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.resultsRow }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_18__.Stack, { direction: \"row\", alignItems: \"center\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", { className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.cx)(styles.mutedText, styles.expression.resultLabel), title: name }, name), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: styles.expression.resultValue }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _HoverCard__WEBPACK_IMPORTED_MODULE_11__.HoverCard,\n    {\n      placement: \"right\",\n      wrapperClassName: styles.timeseriesTableWrapper,\n      content: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"table\", { className: styles.timeseriesTable }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"thead\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"tr\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"th\", null, \"Timestamp\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"th\", null, \"Value\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"tbody\", null, timestamps.map((_, index2) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"tr\", { key: index2 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"td\", { className: styles.mutedText }, (0,_grafana_data__WEBPACK_IMPORTED_MODULE_23__.dateTimeFormat)(getTimestampFromIndex(index2))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"td\", { className: styles.expression.resultValue }, getValueFromIndex(index2))))))\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", null, \"Time series data\")\n  ))));\n};\nconst getStyles = (theme) => ({\n  expression: {\n    wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      border: solid 1px ${theme.colors.border.medium};\n      flex: 1;\n      flex-basis: 400px;\n      border-radius: ${theme.shape.borderRadius()};\n    `,\n    stack: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      flex-direction: column;\n      flex-wrap: nowrap;\n      gap: 0;\n      width: 100%;\n      min-width: 0; // this one is important to prevent text overflow\n    `,\n    classic: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      max-width: 100%;\n    `,\n    nonClassic: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      max-width: 640px;\n    `,\n    alertCondition: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)``,\n    body: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      padding: ${theme.spacing(1)};\n      flex: 1;\n    `,\n    description: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-bottom: ${theme.spacing(1)};\n      font-size: ${theme.typography.size.xs};\n      color: ${theme.colors.text.secondary};\n    `,\n    refId: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      font-weight: ${theme.typography.fontWeightBold};\n      color: ${theme.colors.primary.text};\n    `,\n    results: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      flex-direction: column;\n      flex-wrap: nowrap;\n\n      border-top: solid 1px ${theme.colors.border.medium};\n    `,\n    noResults: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `,\n    resultsRow: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      padding: ${theme.spacing(0.75)} ${theme.spacing(1)};\n\n      &:nth-child(odd) {\n        background-color: ${theme.colors.background.secondary};\n      }\n\n      &:hover {\n        background-color: ${theme.colors.background.canvas};\n      }\n    `,\n    labelKey: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      color: ${theme.isDark ? \"#73bf69\" : \"#56a64b\"};\n    `,\n    labelValue: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      color: ${theme.isDark ? \"#ce9178\" : \"#a31515\"};\n    `,\n    resultValue: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      text-align: right;\n    `,\n    resultLabel: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      flex: 1;\n      overflow-x: auto;\n\n      display: inline-block;\n      white-space: nowrap;\n    `,\n    noData: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: ${theme.spacing()};\n    `\n  },\n  mutedText: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    color: ${theme.colors.text.secondary};\n    font-size: 0.9em;\n\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  `,\n  header: {\n    wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      background: ${theme.colors.background.secondary};\n      padding: ${theme.spacing(0.5)} ${theme.spacing(1)};\n      border-bottom: solid 1px ${theme.colors.border.weak};\n    `\n  },\n  footer: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    background: ${theme.colors.background.secondary};\n    padding: ${theme.spacing(1)};\n    border-top: solid 1px ${theme.colors.border.weak};\n  `,\n  draggableIcon: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    cursor: grab;\n  `,\n  mutedIcon: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    color: ${theme.colors.text.secondary};\n  `,\n  editable: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    padding: ${theme.spacing(0.5)} ${theme.spacing(1)};\n    border: solid 1px ${theme.colors.border.weak};\n    border-radius: ${theme.shape.borderRadius()};\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: ${theme.spacing(1)};\n\n    cursor: pointer;\n  `,\n  timeseriesTableWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    max-height: 500px;\n\n    overflow-y: scroll;\n  `,\n  timeseriesTable: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    table-layout: auto;\n\n    width: 100%;\n    height: 100%;\n\n    td,\n    th {\n      padding: ${theme.spacing(1)};\n    }\n\n    td {\n      background: ${theme.colors.background.primary};\n    }\n\n    th {\n      background: ${theme.colors.background.secondary};\n    }\n\n    tr {\n      border-bottom: 1px solid ${theme.colors.border.medium};\n\n      &:last-of-type {\n        border-bottom: none;\n      }\n    }\n  `,\n  pagination: {\n    wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      border-top: 1px solid ${theme.colors.border.medium};\n      padding: ${theme.spacing()};\n    `\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9leHByZXNzaW9ucy9FeHByZXNzaW9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0M7QUFDd0I7QUFFcUQ7QUFDaEY7QUFDMkQ7QUFDL0M7QUFDYjtBQUNFO0FBQ0U7QUFDQztBQU1uQjtBQUMyQztBQUVwQjtBQUNKO0FBQ0g7QUFDTztBQUVVO0FBQ29EO0FBZ0JyRixNQUFNLGFBQWtDLENBQUM7QUFBQSxFQUM5QyxVQUFVLENBQUM7QUFBQSxFQUNYO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0YsTUFBTTtBQUNKLFFBQU0sU0FBUyx3REFBVSxDQUFDLFNBQVM7QUFFbkMsUUFBTSxZQUFZLE9BQU87QUFFekIsUUFBTSxZQUFZLFFBQVEsT0FBTyxPQUFPLElBQUksRUFBRSxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUMsS0FBSyxFQUFFLFVBQVUsd0RBQVksQ0FBQyxPQUFPO0FBQ3hHLFFBQU0sYUFBYSxNQUFNLFFBQVEsTUFBTSxNQUFNLEtBQUssQ0FBQztBQUNuRCxRQUFNLFNBQVMsTUFBTSxVQUFVLENBQUM7QUFDaEMsUUFBTSxjQUFjLE9BQU87QUFFM0IsUUFBTSxpQkFBaUIsb0JBQW9CO0FBRTNDLFFBQU0saUJBQWlCO0FBQUEsSUFDckIsQ0FBQyxpRkFBcUIsQ0FBQyxNQUFNLEdBQUcsT0FBTyxPQUFPLENBQUMsVUFBVSxzREFBYyxDQUFDLEtBQUssTUFBTSxDQUFDO0FBQUEsSUFDcEYsQ0FBQyxpRkFBcUIsQ0FBQyxRQUFRLEdBQUcsT0FBTyxPQUFPLENBQUMsVUFBVSxzREFBYyxDQUFDLEtBQUssTUFBTSxDQUFDO0FBQUEsRUFDeEY7QUFFQSxRQUFNLHVCQUF1QixrREFBVztBQUFY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QUl4Qix3QkFBd0IsaURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS3hCLGlCQUFpQixpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsaUJBUUYsTUFBTSxRQUFRLENBQUM7QUFBQTtBQUFBO0FBQUE7QUFBQSxvQkFJWixNQUFNLE9BQU8sV0FBVztBQUFBO0FBQUE7QUFBQTtBQUFBLG9CQUl4QixNQUFNLE9BQU8sV0FBVztBQUFBO0FBQUE7QUFBQTtBQUFBLGlDQUlYLE1BQU0sT0FBTyxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPbkQsWUFBWTtBQUFBLElBQ1YsU0FBUyxpREFBRztBQUFILDhCQUNpQixNQUFNLE9BQU8sT0FBTztBQUFBLGlCQUNqQyxNQUFNLFFBQVE7QUFBQTtBQUFBLEVBRTdCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9mZWF0dXJlcy9hbGVydGluZy91bmlmaWVkL2NvbXBvbmVudHMvZXhwcmVzc2lvbnMvRXhwcmVzc2lvbi50c3g/MjlmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MsIGN4IH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCB7IHVuaXF1ZUlkIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyBGQywgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBEYXRhRnJhbWUsIGRhdGVUaW1lRm9ybWF0LCBHcmFmYW5hVGhlbWUyLCBpc1RpbWVTZXJpZXNGcmFtZXMsIExvYWRpbmdTdGF0ZSwgUGFuZWxEYXRhIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBTdGFjayB9IGZyb20gJ0BncmFmYW5hL2V4cGVyaW1lbnRhbCc7XG5pbXBvcnQgeyBBdXRvU2l6ZUlucHV0LCBCdXR0b24sIGNsZWFyQnV0dG9uU3R5bGVzLCBJY29uQnV0dG9uLCB1c2VTdHlsZXMyIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgQ2xhc3NpY0NvbmRpdGlvbnMgfSBmcm9tICdhcHAvZmVhdHVyZXMvZXhwcmVzc2lvbnMvY29tcG9uZW50cy9DbGFzc2ljQ29uZGl0aW9ucyc7XG5pbXBvcnQgeyBNYXRoIH0gZnJvbSAnYXBwL2ZlYXR1cmVzL2V4cHJlc3Npb25zL2NvbXBvbmVudHMvTWF0aCc7XG5pbXBvcnQgeyBSZWR1Y2UgfSBmcm9tICdhcHAvZmVhdHVyZXMvZXhwcmVzc2lvbnMvY29tcG9uZW50cy9SZWR1Y2UnO1xuaW1wb3J0IHsgUmVzYW1wbGUgfSBmcm9tICdhcHAvZmVhdHVyZXMvZXhwcmVzc2lvbnMvY29tcG9uZW50cy9SZXNhbXBsZSc7XG5pbXBvcnQgeyBUaHJlc2hvbGQgfSBmcm9tICdhcHAvZmVhdHVyZXMvZXhwcmVzc2lvbnMvY29tcG9uZW50cy9UaHJlc2hvbGQnO1xuaW1wb3J0IHtcbiAgRXhwcmVzc2lvblF1ZXJ5LFxuICBFeHByZXNzaW9uUXVlcnlUeXBlLFxuICBleHByZXNzaW9uVHlwZXMsXG4gIGdldEV4cHJlc3Npb25MYWJlbCxcbn0gZnJvbSAnYXBwL2ZlYXR1cmVzL2V4cHJlc3Npb25zL3R5cGVzJztcbmltcG9ydCB7IEFsZXJ0UXVlcnksIFByb21BbGVydGluZ1J1bGVTdGF0ZSB9IGZyb20gJ2FwcC90eXBlcy91bmlmaWVkLWFsZXJ0aW5nLWR0byc7XG5cbmltcG9ydCB7IHVzZVBhZ2luYXRpb24gfSBmcm9tICcuLi8uLi9ob29rcy91c2VQYWdpbmF0aW9uJztcbmltcG9ydCB7IEhvdmVyQ2FyZCB9IGZyb20gJy4uL0hvdmVyQ2FyZCc7XG5pbXBvcnQgeyBTcGFjZXIgfSBmcm9tICcuLi9TcGFjZXInO1xuaW1wb3J0IHsgQWxlcnRTdGF0ZVRhZyB9IGZyb20gJy4uL3J1bGVzL0FsZXJ0U3RhdGVUYWcnO1xuXG5pbXBvcnQgeyBBbGVydENvbmRpdGlvbkluZGljYXRvciB9IGZyb20gJy4vQWxlcnRDb25kaXRpb25JbmRpY2F0b3InO1xuaW1wb3J0IHsgZm9ybWF0TGFiZWxzLCBnZXRTZXJpZXNMYWJlbHMsIGdldFNlcmllc05hbWUsIGdldFNlcmllc1ZhbHVlLCBpc0VtcHR5U2VyaWVzIH0gZnJvbSAnLi91dGlsJztcblxuaW50ZXJmYWNlIEV4cHJlc3Npb25Qcm9wcyB7XG4gIGlzQWxlcnRDb25kaXRpb24/OiBib29sZWFuO1xuICBkYXRhPzogUGFuZWxEYXRhO1xuICBlcnJvcj86IEVycm9yO1xuICB3YXJuaW5nPzogRXJyb3I7XG4gIHF1ZXJpZXM6IEFsZXJ0UXVlcnlbXTtcbiAgcXVlcnk6IEV4cHJlc3Npb25RdWVyeTtcbiAgb25TZXRDb25kaXRpb246IChyZWZJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBvblVwZGF0ZVJlZklkOiAob2xkUmVmSWQ6IHN0cmluZywgbmV3UmVmSWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgb25SZW1vdmVFeHByZXNzaW9uOiAocmVmSWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgb25VcGRhdGVFeHByZXNzaW9uVHlwZTogKHJlZklkOiBzdHJpbmcsIHR5cGU6IEV4cHJlc3Npb25RdWVyeVR5cGUpID0+IHZvaWQ7XG4gIG9uQ2hhbmdlUXVlcnk6IChxdWVyeTogRXhwcmVzc2lvblF1ZXJ5KSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgRXhwcmVzc2lvbjogRkM8RXhwcmVzc2lvblByb3BzPiA9ICh7XG4gIHF1ZXJpZXMgPSBbXSxcbiAgcXVlcnksXG4gIGRhdGEsXG4gIGVycm9yLFxuICB3YXJuaW5nLFxuICBpc0FsZXJ0Q29uZGl0aW9uLFxuICBvblNldENvbmRpdGlvbixcbiAgb25VcGRhdGVSZWZJZCxcbiAgb25SZW1vdmVFeHByZXNzaW9uLFxuICBvblVwZGF0ZUV4cHJlc3Npb25UeXBlLFxuICBvbkNoYW5nZVF1ZXJ5LFxufSkgPT4ge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG5cbiAgY29uc3QgcXVlcnlUeXBlID0gcXVlcnk/LnR5cGU7XG5cbiAgY29uc3QgaXNMb2FkaW5nID0gZGF0YSAmJiBPYmplY3QudmFsdWVzKGRhdGEpLnNvbWUoKGQpID0+IEJvb2xlYW4oZCkgJiYgZC5zdGF0ZSA9PT0gTG9hZGluZ1N0YXRlLkxvYWRpbmcpO1xuICBjb25zdCBoYXNSZXN1bHRzID0gQXJyYXkuaXNBcnJheShkYXRhPy5zZXJpZXMpICYmICFpc0xvYWRpbmc7XG4gIGNvbnN0IHNlcmllcyA9IGRhdGE/LnNlcmllcyA/PyBbXTtcbiAgY29uc3Qgc2VyaWVzQ291bnQgPSBzZXJpZXMubGVuZ3RoO1xuXG4gIGNvbnN0IGFsZXJ0Q29uZGl0aW9uID0gaXNBbGVydENvbmRpdGlvbiA/PyBmYWxzZTtcblxuICBjb25zdCBncm91cGVkQnlTdGF0ZSA9IHtcbiAgICBbUHJvbUFsZXJ0aW5nUnVsZVN0YXRlLkZpcmluZ106IHNlcmllcy5maWx0ZXIoKHNlcmllKSA9PiBnZXRTZXJpZXNWYWx1ZShzZXJpZSkgIT09IDApLFxuICAgIFtQcm9tQWxlcnRpbmdSdWxlU3RhdGUuSW5hY3RpdmVdOiBzZXJpZXMuZmlsdGVyKChzZXJpZSkgPT4gZ2V0U2VyaWVzVmFsdWUoc2VyaWUpID09PSAwKSxcbiAgfTtcblxuICBjb25zdCByZW5kZXJFeHByZXNzaW9uVHlwZSA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVyeTogRXhwcmVzc2lvblF1ZXJ5KSA9PiB7XG4gICAgICAvLyB0aGVzZSBhcmUgdGhlIHJlZnMgd2UgY2FuIGNob29zZSBmcm9tIHRoYXQgZG9uJ3QgaW5jbHVkZSB0aGUgY3VycmVudCBvbmVcbiAgICAgIGNvbnN0IGF2YWlsYWJsZVJlZklkcyA9IHF1ZXJpZXNcbiAgICAgICAgLmZpbHRlcigocSkgPT4gcXVlcnkucmVmSWQgIT09IHEucmVmSWQpXG4gICAgICAgIC5tYXAoKHEpID0+ICh7IHZhbHVlOiBxLnJlZklkLCBsYWJlbDogcS5yZWZJZCB9KSk7XG5cbiAgICAgIHN3aXRjaCAocXVlcnkudHlwZSkge1xuICAgICAgICBjYXNlIEV4cHJlc3Npb25RdWVyeVR5cGUubWF0aDpcbiAgICAgICAgICByZXR1cm4gPE1hdGggb25DaGFuZ2U9e29uQ2hhbmdlUXVlcnl9IHF1ZXJ5PXtxdWVyeX0gbGFiZWxXaWR0aD17J2F1dG8nfSBvblJ1blF1ZXJ5PXsoKSA9PiB7fX0gLz47XG5cbiAgICAgICAgY2FzZSBFeHByZXNzaW9uUXVlcnlUeXBlLnJlZHVjZTpcbiAgICAgICAgICByZXR1cm4gPFJlZHVjZSBvbkNoYW5nZT17b25DaGFuZ2VRdWVyeX0gcmVmSWRzPXthdmFpbGFibGVSZWZJZHN9IGxhYmVsV2lkdGg9eydhdXRvJ30gcXVlcnk9e3F1ZXJ5fSAvPjtcblxuICAgICAgICBjYXNlIEV4cHJlc3Npb25RdWVyeVR5cGUucmVzYW1wbGU6XG4gICAgICAgICAgcmV0dXJuIDxSZXNhbXBsZSBvbkNoYW5nZT17b25DaGFuZ2VRdWVyeX0gcXVlcnk9e3F1ZXJ5fSBsYWJlbFdpZHRoPXsnYXV0byd9IHJlZklkcz17YXZhaWxhYmxlUmVmSWRzfSAvPjtcblxuICAgICAgICBjYXNlIEV4cHJlc3Npb25RdWVyeVR5cGUuY2xhc3NpYzpcbiAgICAgICAgICByZXR1cm4gPENsYXNzaWNDb25kaXRpb25zIG9uQ2hhbmdlPXtvbkNoYW5nZVF1ZXJ5fSBxdWVyeT17cXVlcnl9IHJlZklkcz17YXZhaWxhYmxlUmVmSWRzfSAvPjtcblxuICAgICAgICBjYXNlIEV4cHJlc3Npb25RdWVyeVR5cGUudGhyZXNob2xkOlxuICAgICAgICAgIHJldHVybiA8VGhyZXNob2xkIG9uQ2hhbmdlPXtvbkNoYW5nZVF1ZXJ5fSBxdWVyeT17cXVlcnl9IGxhYmVsV2lkdGg9eydhdXRvJ30gcmVmSWRzPXthdmFpbGFibGVSZWZJZHN9IC8+O1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIDw+RXhwcmVzc2lvbiBub3Qgc3VwcG9ydGVkOiB7cXVlcnkudHlwZX08Lz47XG4gICAgICB9XG4gICAgfSxcbiAgICBbb25DaGFuZ2VRdWVyeSwgcXVlcmllc11cbiAgKTtcbiAgY29uc3Qgc2VsZWN0ZWRFeHByZXNzaW9uVHlwZSA9IGV4cHJlc3Npb25UeXBlcy5maW5kKChvKSA9PiBvLnZhbHVlID09PSBxdWVyeVR5cGUpO1xuICBjb25zdCBzZWxlY3RlZEV4cHJlc3Npb25EZXNjcmlwdGlvbiA9IHNlbGVjdGVkRXhwcmVzc2lvblR5cGU/LmRlc2NyaXB0aW9uID8/ICcnO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjeChcbiAgICAgICAgc3R5bGVzLmV4cHJlc3Npb24ud3JhcHBlcixcbiAgICAgICAgYWxlcnRDb25kaXRpb24gJiYgc3R5bGVzLmV4cHJlc3Npb24uYWxlcnRDb25kaXRpb24sXG4gICAgICAgIHF1ZXJ5VHlwZSA9PT0gRXhwcmVzc2lvblF1ZXJ5VHlwZS5jbGFzc2ljICYmIHN0eWxlcy5leHByZXNzaW9uLmNsYXNzaWMsXG4gICAgICAgIHF1ZXJ5VHlwZSAhPT0gRXhwcmVzc2lvblF1ZXJ5VHlwZS5jbGFzc2ljICYmIHN0eWxlcy5leHByZXNzaW9uLm5vbkNsYXNzaWNcbiAgICAgICl9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5leHByZXNzaW9uLnN0YWNrfT5cbiAgICAgICAgPEhlYWRlclxuICAgICAgICAgIHJlZklkPXtxdWVyeS5yZWZJZH1cbiAgICAgICAgICBxdWVyeVR5cGU9e3F1ZXJ5VHlwZX1cbiAgICAgICAgICBvblJlbW92ZUV4cHJlc3Npb249eygpID0+IG9uUmVtb3ZlRXhwcmVzc2lvbihxdWVyeS5yZWZJZCl9XG4gICAgICAgICAgb25VcGRhdGVSZWZJZD17KG5ld1JlZklkKSA9PiBvblVwZGF0ZVJlZklkKHF1ZXJ5LnJlZklkLCBuZXdSZWZJZCl9XG4gICAgICAgICAgb25VcGRhdGVFeHByZXNzaW9uVHlwZT17KHR5cGUpID0+IG9uVXBkYXRlRXhwcmVzc2lvblR5cGUocXVlcnkucmVmSWQsIHR5cGUpfVxuICAgICAgICAgIG9uU2V0Q29uZGl0aW9uPXtvblNldENvbmRpdGlvbn1cbiAgICAgICAgICB3YXJuaW5nPXt3YXJuaW5nfVxuICAgICAgICAgIGVycm9yPXtlcnJvcn1cbiAgICAgICAgICBxdWVyeT17cXVlcnl9XG4gICAgICAgICAgYWxlcnRDb25kaXRpb249e2FsZXJ0Q29uZGl0aW9ufVxuICAgICAgICAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmV4cHJlc3Npb24uYm9keX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5leHByZXNzaW9uLmRlc2NyaXB0aW9ufT57c2VsZWN0ZWRFeHByZXNzaW9uRGVzY3JpcHRpb259PC9kaXY+XG4gICAgICAgICAge3JlbmRlckV4cHJlc3Npb25UeXBlKHF1ZXJ5KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtoYXNSZXN1bHRzICYmIChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPEV4cHJlc3Npb25SZXN1bHQgc2VyaWVzPXtzZXJpZXN9IGlzQWxlcnRDb25kaXRpb249e2lzQWxlcnRDb25kaXRpb259IC8+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZm9vdGVyfT5cbiAgICAgICAgICAgICAgPFN0YWNrIGRpcmVjdGlvbj1cInJvd1wiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8U3BhY2VyIC8+XG5cbiAgICAgICAgICAgICAgICA8UHJldmlld1N1bW1hcnlcbiAgICAgICAgICAgICAgICAgIGlzQ29uZGl0aW9uPXtCb29sZWFuKGlzQWxlcnRDb25kaXRpb24pfVxuICAgICAgICAgICAgICAgICAgZmlyaW5nPXtncm91cGVkQnlTdGF0ZVtQcm9tQWxlcnRpbmdSdWxlU3RhdGUuRmlyaW5nXS5sZW5ndGh9XG4gICAgICAgICAgICAgICAgICBub3JtYWw9e2dyb3VwZWRCeVN0YXRlW1Byb21BbGVydGluZ1J1bGVTdGF0ZS5JbmFjdGl2ZV0ubGVuZ3RofVxuICAgICAgICAgICAgICAgICAgc2VyaWVzQ291bnQ9e3Nlcmllc0NvdW50fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvU3RhY2s+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuaW50ZXJmYWNlIEV4cHJlc3Npb25SZXN1bHRQcm9wcyB7XG4gIHNlcmllczogRGF0YUZyYW1lW107XG4gIGlzQWxlcnRDb25kaXRpb24/OiBib29sZWFuO1xufVxuZXhwb3J0IGNvbnN0IFBBR0VfU0laRSA9IDIwO1xuZXhwb3J0IGNvbnN0IEV4cHJlc3Npb25SZXN1bHQ6IEZDPEV4cHJlc3Npb25SZXN1bHRQcm9wcz4gPSAoeyBzZXJpZXMsIGlzQWxlcnRDb25kaXRpb24gfSkgPT4ge1xuICBjb25zdCB7IHBhZ2VJdGVtcywgcHJldmlvdXNQYWdlLCBuZXh0UGFnZSwgbnVtYmVyT2ZQYWdlcywgcGFnZVN0YXJ0LCBwYWdlRW5kIH0gPSB1c2VQYWdpbmF0aW9uKHNlcmllcywgMSwgUEFHRV9TSVpFKTtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRTdHlsZXMpO1xuXG4gIC8vIHNvbWV0aW1lcyB3ZSByZWNlaXZlIHJlc3VsdHMgd2hlcmUgZXZlcnkgdmFsdWUgaXMganVzdCBcIm51bGxcIiB3aGVuIG5vRGF0YSBvY2N1cnNcbiAgY29uc3QgZW1wdHlSZXN1bHRzID0gaXNFbXB0eVNlcmllcyhzZXJpZXMpO1xuICBjb25zdCBpc1RpbWVTZXJpZXNSZXN1bHRzID0gIWVtcHR5UmVzdWx0cyAmJiBpc1RpbWVTZXJpZXNGcmFtZXMoc2VyaWVzKTtcblxuICBjb25zdCBzaG91bGRTaG93UGFnaW5hdGlvbiA9IG51bWJlck9mUGFnZXMgPiAxO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5leHByZXNzaW9uLnJlc3VsdHN9PlxuICAgICAgeyFlbXB0eVJlc3VsdHMgJiYgaXNUaW1lU2VyaWVzUmVzdWx0cyAmJiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge3BhZ2VJdGVtcy5tYXAoKGZyYW1lLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgPFRpbWVzZXJpZXNSb3dcbiAgICAgICAgICAgICAga2V5PXt1bmlxdWVJZCgpfVxuICAgICAgICAgICAgICBmcmFtZT17ZnJhbWV9XG4gICAgICAgICAgICAgIGluZGV4PXtwYWdlU3RhcnQgKyBpbmRleH1cbiAgICAgICAgICAgICAgaXNBbGVydENvbmRpdGlvbj17aXNBbGVydENvbmRpdGlvbn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIHshZW1wdHlSZXN1bHRzICYmXG4gICAgICAgICFpc1RpbWVTZXJpZXNSZXN1bHRzICYmXG4gICAgICAgIHBhZ2VJdGVtcy5tYXAoKGZyYW1lLCBpbmRleCkgPT4gKFxuICAgICAgICAgIC8vIFRoZXJlJ3Mgbm8gd2F5IHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGEgZnJhbWUgdGhhdCBkb2Vzbid0IGNhdXNlIHJlbmRlciBidWdzIDovIChHaWxsZXMpXG4gICAgICAgICAgPEZyYW1lUm93IGtleT17dW5pcXVlSWQoKX0gZnJhbWU9e2ZyYW1lfSBpbmRleD17cGFnZVN0YXJ0ICsgaW5kZXh9IGlzQWxlcnRDb25kaXRpb249e2lzQWxlcnRDb25kaXRpb259IC8+XG4gICAgICAgICkpfVxuICAgICAge2VtcHR5UmVzdWx0cyAmJiA8ZGl2IGNsYXNzTmFtZT17Y3goc3R5bGVzLmV4cHJlc3Npb24ubm9EYXRhLCBzdHlsZXMubXV0ZWRUZXh0KX0+Tm8gZGF0YTwvZGl2Pn1cbiAgICAgIHtzaG91bGRTaG93UGFnaW5hdGlvbiAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucGFnaW5hdGlvbi53cmFwcGVyfSBkYXRhLXRlc3RpZD1cInBhZ2luYXRlLWV4cHJlc3Npb25cIj5cbiAgICAgICAgICA8U3RhY2s+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICBmaWxsPVwib3V0bGluZVwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3ByZXZpb3VzUGFnZX1cbiAgICAgICAgICAgICAgaWNvbj1cImFuZ2xlLWxlZnRcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwicHJldmlvdXMtcGFnZVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPFNwYWNlciAvPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMubXV0ZWRUZXh0fT5cbiAgICAgICAgICAgICAge3BhZ2VTdGFydH0gLSB7cGFnZUVuZH0gb2Yge3Nlcmllcy5sZW5ndGh9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8U3BhY2VyIC8+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICBmaWxsPVwib3V0bGluZVwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e25leHRQYWdlfVxuICAgICAgICAgICAgICBpY29uPVwiYW5nbGUtcmlnaHRcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwibmV4dC1wYWdlXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9TdGFjaz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IFByZXZpZXdTdW1tYXJ5OiBGQzx7IGZpcmluZzogbnVtYmVyOyBub3JtYWw6IG51bWJlcjsgaXNDb25kaXRpb246IGJvb2xlYW47IHNlcmllc0NvdW50OiBudW1iZXIgfT4gPSAoe1xuICBmaXJpbmcsXG4gIG5vcm1hbCxcbiAgaXNDb25kaXRpb24sXG4gIHNlcmllc0NvdW50LFxufSkgPT4ge1xuICBjb25zdCB7IG11dGVkVGV4dCB9ID0gdXNlU3R5bGVzMihnZXRTdHlsZXMpO1xuXG4gIGlmIChzZXJpZXNDb3VudCA9PT0gMCkge1xuICAgIHJldHVybiA8c3BhbiBjbGFzc05hbWU9e211dGVkVGV4dH0+Tm8gc2VyaWVzPC9zcGFuPjtcbiAgfVxuXG4gIGlmIChpc0NvbmRpdGlvbikge1xuICAgIHJldHVybiA8c3BhbiBjbGFzc05hbWU9e211dGVkVGV4dH0+e2Ake3Nlcmllc0NvdW50fSBzZXJpZXM6ICR7ZmlyaW5nfSBmaXJpbmcsICR7bm9ybWFsfSBub3JtYWxgfTwvc3Bhbj47XG4gIH1cblxuICByZXR1cm4gPHNwYW4gY2xhc3NOYW1lPXttdXRlZFRleHR9PntgJHtzZXJpZXNDb3VudH0gc2VyaWVzYH08L3NwYW4+O1xufTtcblxuaW50ZXJmYWNlIEhlYWRlclByb3BzIHtcbiAgcmVmSWQ6IHN0cmluZztcbiAgcXVlcnlUeXBlOiBFeHByZXNzaW9uUXVlcnlUeXBlO1xuICBvblVwZGF0ZVJlZklkOiAocmVmSWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgb25SZW1vdmVFeHByZXNzaW9uOiAoKSA9PiB2b2lkO1xuICBvblVwZGF0ZUV4cHJlc3Npb25UeXBlOiAodHlwZTogRXhwcmVzc2lvblF1ZXJ5VHlwZSkgPT4gdm9pZDtcbiAgd2FybmluZz86IEVycm9yO1xuICBlcnJvcj86IEVycm9yO1xuICBvblNldENvbmRpdGlvbjogKHJlZklkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHF1ZXJ5OiBFeHByZXNzaW9uUXVlcnk7XG4gIGFsZXJ0Q29uZGl0aW9uOiBib29sZWFuO1xufVxuXG5jb25zdCBIZWFkZXI6IEZDPEhlYWRlclByb3BzPiA9ICh7XG4gIHJlZklkLFxuICBxdWVyeVR5cGUsXG4gIG9uVXBkYXRlUmVmSWQsXG4gIG9uUmVtb3ZlRXhwcmVzc2lvbixcbiAgd2FybmluZyxcbiAgb25TZXRDb25kaXRpb24sXG4gIGFsZXJ0Q29uZGl0aW9uLFxuICBxdWVyeSxcbiAgZXJyb3IsXG59KSA9PiB7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcbiAgY29uc3QgY2xlYXJCdXR0b24gPSB1c2VTdHlsZXMyKGNsZWFyQnV0dG9uU3R5bGVzKTtcbiAgLyoqXG4gICAqIFRoZXJlIGFyZSAzIGVkaXQgbW9kZXM6XG4gICAqXG4gICAqIDEuIFwicmVmSWRcIjogRWRpdGluZyB0aGUgcmVmSWQgKGllLiBBIC0+IEIpXG4gICAqIDIuIFwiZXhwcmVzc2lvblR5cGVcIjogRWRpdGluZyB0aGUgdHlwZSBvZiB0aGUgZXhwcmVzc2lvbiAoaWUuIFJlZHVjZSAtPiBNYXRoKVxuICAgKiAzLiBcImZhbHNlXCI6IFRoaXMgbWVhbnMgd2UncmUgbm90IGVkaXRpbmcgZWl0aGVyIG9mIHRob3NlXG4gICAqL1xuICBjb25zdCBbZWRpdE1vZGUsIHNldEVkaXRNb2RlXSA9IHVzZVN0YXRlPCdyZWZJZCcgfCAnZXhwcmVzc2lvblR5cGUnIHwgZmFsc2U+KGZhbHNlKTtcblxuICBjb25zdCBlZGl0aW5nID0gZWRpdE1vZGUgIT09IGZhbHNlO1xuICBjb25zdCBlZGl0aW5nUmVmSWQgPSBlZGl0aW5nICYmIGVkaXRNb2RlID09PSAncmVmSWQnO1xuXG4gIHJldHVybiAoXG4gICAgPGhlYWRlciBjbGFzc05hbWU9e3N0eWxlcy5oZWFkZXIud3JhcHBlcn0+XG4gICAgICA8U3RhY2sgZGlyZWN0aW9uPVwicm93XCIgZ2FwPXswLjV9IGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgPFN0YWNrIGRpcmVjdGlvbj1cInJvd1wiIGdhcD17MX0gYWxpZ25JdGVtcz1cImNlbnRlclwiIHdyYXA9e2ZhbHNlfT5cbiAgICAgICAgICB7IWVkaXRpbmdSZWZJZCAmJiAoXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9e2N4KGNsZWFyQnV0dG9uLCBzdHlsZXMuZWRpdGFibGUpfSBvbkNsaWNrPXsoKSA9PiBzZXRFZGl0TW9kZSgncmVmSWQnKX0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZXhwcmVzc2lvbi5yZWZJZH0+e3JlZklkfTwvZGl2PlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZWRpdGluZ1JlZklkICYmIChcbiAgICAgICAgICAgIDxBdXRvU2l6ZUlucHV0XG4gICAgICAgICAgICAgIGF1dG9Gb2N1c1xuICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3JlZklkfVxuICAgICAgICAgICAgICBtaW5XaWR0aD17NX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIG9uVXBkYXRlUmVmSWQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgc2V0RWRpdE1vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBvbkZvY3VzPXsoZXZlbnQpID0+IGV2ZW50LnRhcmdldC5zZWxlY3QoKX1cbiAgICAgICAgICAgICAgb25CbHVyPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBvblVwZGF0ZVJlZklkKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHNldEVkaXRNb2RlKGZhbHNlKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8ZGl2PntnZXRFeHByZXNzaW9uTGFiZWwocXVlcnlUeXBlKX08L2Rpdj5cbiAgICAgICAgPC9TdGFjaz5cbiAgICAgICAgPFNwYWNlciAvPlxuICAgICAgICA8QWxlcnRDb25kaXRpb25JbmRpY2F0b3JcbiAgICAgICAgICBvblNldENvbmRpdGlvbj17KCkgPT4gb25TZXRDb25kaXRpb24ocXVlcnkucmVmSWQpfVxuICAgICAgICAgIGVuYWJsZWQ9e2FsZXJ0Q29uZGl0aW9ufVxuICAgICAgICAgIGVycm9yPXtlcnJvcn1cbiAgICAgICAgICB3YXJuaW5nPXt3YXJuaW5nfVxuICAgICAgICAvPlxuICAgICAgICA8SWNvbkJ1dHRvblxuICAgICAgICAgIG5hbWU9XCJ0cmFzaC1hbHRcIlxuICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLm11dGVkSWNvbn1cbiAgICAgICAgICBvbkNsaWNrPXtvblJlbW92ZUV4cHJlc3Npb259XG4gICAgICAgICAgdG9vbHRpcD1cIlJlbW92ZSBleHByZXNzaW9uXCJcbiAgICAgICAgLz5cbiAgICAgIDwvU3RhY2s+XG4gICAgPC9oZWFkZXI+XG4gICk7XG59O1xuXG5pbnRlcmZhY2UgRnJhbWVQcm9wcyBleHRlbmRzIFBpY2s8RXhwcmVzc2lvblByb3BzLCAnaXNBbGVydENvbmRpdGlvbic+IHtcbiAgZnJhbWU6IERhdGFGcmFtZTtcbiAgaW5kZXg6IG51bWJlcjtcbn1cblxuY29uc3QgRnJhbWVSb3c6IEZDPEZyYW1lUHJvcHM+ID0gKHsgZnJhbWUsIGluZGV4LCBpc0FsZXJ0Q29uZGl0aW9uIH0pID0+IHtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRTdHlsZXMpO1xuXG4gIGNvbnN0IG5hbWUgPSBnZXRTZXJpZXNOYW1lKGZyYW1lKSB8fCAnU2VyaWVzICcgKyBpbmRleDtcbiAgY29uc3QgdmFsdWUgPSBnZXRTZXJpZXNWYWx1ZShmcmFtZSk7XG4gIGNvbnN0IGxhYmVsc1JlY29yZCA9IGdldFNlcmllc0xhYmVscyhmcmFtZSk7XG4gIGNvbnN0IGxhYmVscyA9IE9iamVjdC5lbnRyaWVzKGxhYmVsc1JlY29yZCk7XG4gIGNvbnN0IGhhc0xhYmVscyA9IGxhYmVscy5sZW5ndGggPiAwO1xuXG4gIGNvbnN0IHNob3dGaXJpbmcgPSBpc0FsZXJ0Q29uZGl0aW9uICYmIHZhbHVlICE9PSAwO1xuICBjb25zdCBzaG93Tm9ybWFsID0gaXNBbGVydENvbmRpdGlvbiAmJiB2YWx1ZSA9PT0gMDtcblxuICBjb25zdCB0aXRsZSA9IGAke2hhc0xhYmVscyA/ICcnIDogbmFtZX0ke2hhc0xhYmVscyA/IGB7JHtmb3JtYXRMYWJlbHMobGFiZWxzUmVjb3JkKX19YCA6ICcnfWA7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmV4cHJlc3Npb24ucmVzdWx0c1Jvd30+XG4gICAgICA8U3RhY2sgZGlyZWN0aW9uPVwicm93XCIgZ2FwPXsxfSBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZXhwcmVzc2lvbi5yZXN1bHRMYWJlbH0gdGl0bGU9e3RpdGxlfT5cbiAgICAgICAgICA8c3Bhbj57aGFzTGFiZWxzID8gJycgOiBuYW1lfTwvc3Bhbj5cbiAgICAgICAgICB7aGFzTGFiZWxzICYmIChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIDxzcGFuPnsneyd9PC9zcGFuPlxuICAgICAgICAgICAgICB7bGFiZWxzLm1hcCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGtleT17dW5pcXVlSWQoKX0+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlcy5leHByZXNzaW9uLmxhYmVsS2V5fT57a2V5fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuPj08L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3Bhbj4mcXVvdDs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlcy5leHByZXNzaW9uLmxhYmVsVmFsdWV9Pnt2YWx1ZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3Bhbj4mcXVvdDs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICB7aW5kZXggPCBsYWJlbHMubGVuZ3RoIC0gMSAmJiA8c3Bhbj4sIDwvc3Bhbj59XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPHNwYW4+eyd9J308L3NwYW4+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5leHByZXNzaW9uLnJlc3VsdFZhbHVlfT57dmFsdWV9PC9kaXY+XG4gICAgICAgIHtzaG93RmlyaW5nICYmIDxBbGVydFN0YXRlVGFnIHN0YXRlPXtQcm9tQWxlcnRpbmdSdWxlU3RhdGUuRmlyaW5nfSBzaXplPVwic21cIiAvPn1cbiAgICAgICAge3Nob3dOb3JtYWwgJiYgPEFsZXJ0U3RhdGVUYWcgc3RhdGU9e1Byb21BbGVydGluZ1J1bGVTdGF0ZS5JbmFjdGl2ZX0gc2l6ZT1cInNtXCIgLz59XG4gICAgICA8L1N0YWNrPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuY29uc3QgVGltZXNlcmllc1JvdzogRkM8RnJhbWVQcm9wcyAmIHsgaW5kZXg6IG51bWJlciB9PiA9ICh7IGZyYW1lLCBpbmRleCB9KSA9PiB7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcblxuICBjb25zdCB2YWx1ZUZpZWxkID0gZnJhbWUuZmllbGRzWzFdOyAvLyBmaWVsZCAwIGlzIFwidGltZVwiLCBmaWVsZCAxIGlzIFwidmFsdWVcIlxuXG4gIGNvbnN0IGhhc0xhYmVscyA9IHZhbHVlRmllbGQubGFiZWxzO1xuICBjb25zdCBkaXNwbGF5TmFtZUZyb21EUyA9IHZhbHVlRmllbGQuY29uZmlnPy5kaXNwbGF5TmFtZUZyb21EUztcbiAgY29uc3QgbmFtZSA9IGRpc3BsYXlOYW1lRnJvbURTID8/IChoYXNMYWJlbHMgPyBmb3JtYXRMYWJlbHModmFsdWVGaWVsZC5sYWJlbHMgPz8ge30pIDogJ1NlcmllcyAnICsgaW5kZXgpO1xuXG4gIGNvbnN0IHRpbWVzdGFtcHMgPSBmcmFtZS5maWVsZHNbMF0udmFsdWVzO1xuXG4gIGNvbnN0IGdldFRpbWVzdGFtcEZyb21JbmRleCA9IChpbmRleDogbnVtYmVyKSA9PiBmcmFtZS5maWVsZHNbMF0udmFsdWVzW2luZGV4XTtcbiAgY29uc3QgZ2V0VmFsdWVGcm9tSW5kZXggPSAoaW5kZXg6IG51bWJlcikgPT4gZnJhbWUuZmllbGRzWzFdLnZhbHVlc1tpbmRleF07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmV4cHJlc3Npb24ucmVzdWx0c1Jvd30+XG4gICAgICA8U3RhY2sgZGlyZWN0aW9uPVwicm93XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2N4KHN0eWxlcy5tdXRlZFRleHQsIHN0eWxlcy5leHByZXNzaW9uLnJlc3VsdExhYmVsKX0gdGl0bGU9e25hbWV9PlxuICAgICAgICAgIHtuYW1lfVxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZXhwcmVzc2lvbi5yZXN1bHRWYWx1ZX0+XG4gICAgICAgICAgPEhvdmVyQ2FyZFxuICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgd3JhcHBlckNsYXNzTmFtZT17c3R5bGVzLnRpbWVzZXJpZXNUYWJsZVdyYXBwZXJ9XG4gICAgICAgICAgICBjb250ZW50PXtcbiAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT17c3R5bGVzLnRpbWVzZXJpZXNUYWJsZX0+XG4gICAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGg+VGltZXN0YW1wPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRoPlZhbHVlPC90aD5cbiAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICB7dGltZXN0YW1wcy5tYXAoKF8sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPXtzdHlsZXMubXV0ZWRUZXh0fT57ZGF0ZVRpbWVGb3JtYXQoZ2V0VGltZXN0YW1wRnJvbUluZGV4KGluZGV4KSl9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPXtzdHlsZXMuZXhwcmVzc2lvbi5yZXN1bHRWYWx1ZX0+e2dldFZhbHVlRnJvbUluZGV4KGluZGV4KX08L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3Bhbj5UaW1lIHNlcmllcyBkYXRhPC9zcGFuPlxuICAgICAgICAgIDwvSG92ZXJDYXJkPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvU3RhY2s+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+ICh7XG4gIGV4cHJlc3Npb246IHtcbiAgICB3cmFwcGVyOiBjc3NgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYm9yZGVyOiBzb2xpZCAxcHggJHt0aGVtZS5jb2xvcnMuYm9yZGVyLm1lZGl1bX07XG4gICAgICBmbGV4OiAxO1xuICAgICAgZmxleC1iYXNpczogNDAwcHg7XG4gICAgICBib3JkZXItcmFkaXVzOiAke3RoZW1lLnNoYXBlLmJvcmRlclJhZGl1cygpfTtcbiAgICBgLFxuICAgIHN0YWNrOiBjc3NgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xuICAgICAgZ2FwOiAwO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBtaW4td2lkdGg6IDA7IC8vIHRoaXMgb25lIGlzIGltcG9ydGFudCB0byBwcmV2ZW50IHRleHQgb3ZlcmZsb3dcbiAgICBgLFxuICAgIGNsYXNzaWM6IGNzc2BcbiAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICBgLFxuICAgIG5vbkNsYXNzaWM6IGNzc2BcbiAgICAgIG1heC13aWR0aDogNjQwcHg7XG4gICAgYCxcbiAgICBhbGVydENvbmRpdGlvbjogY3NzYGAsXG4gICAgYm9keTogY3NzYFxuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDEpfTtcbiAgICAgIGZsZXg6IDE7XG4gICAgYCxcbiAgICBkZXNjcmlwdGlvbjogY3NzYFxuICAgICAgbWFyZ2luLWJvdHRvbTogJHt0aGVtZS5zcGFjaW5nKDEpfTtcbiAgICAgIGZvbnQtc2l6ZTogJHt0aGVtZS50eXBvZ3JhcGh5LnNpemUueHN9O1xuICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnRleHQuc2Vjb25kYXJ5fTtcbiAgICBgLFxuICAgIHJlZklkOiBjc3NgXG4gICAgICBmb250LXdlaWdodDogJHt0aGVtZS50eXBvZ3JhcGh5LmZvbnRXZWlnaHRCb2xkfTtcbiAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wcmltYXJ5LnRleHR9O1xuICAgIGAsXG4gICAgcmVzdWx0czogY3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcblxuICAgICAgYm9yZGVyLXRvcDogc29saWQgMXB4ICR7dGhlbWUuY29sb3JzLmJvcmRlci5tZWRpdW19O1xuICAgIGAsXG4gICAgbm9SZXN1bHRzOiBjc3NgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGAsXG4gICAgcmVzdWx0c1JvdzogY3NzYFxuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDAuNzUpfSAke3RoZW1lLnNwYWNpbmcoMSl9O1xuXG4gICAgICAmOm50aC1jaGlsZChvZGQpIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5zZWNvbmRhcnl9O1xuICAgICAgfVxuXG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5jYW52YXN9O1xuICAgICAgfVxuICAgIGAsXG4gICAgbGFiZWxLZXk6IGNzc2BcbiAgICAgIGNvbG9yOiAke3RoZW1lLmlzRGFyayA/ICcjNzNiZjY5JyA6ICcjNTZhNjRiJ307XG4gICAgYCxcbiAgICBsYWJlbFZhbHVlOiBjc3NgXG4gICAgICBjb2xvcjogJHt0aGVtZS5pc0RhcmsgPyAnI2NlOTE3OCcgOiAnI2EzMTUxNSd9O1xuICAgIGAsXG4gICAgcmVzdWx0VmFsdWU6IGNzc2BcbiAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgIGAsXG4gICAgcmVzdWx0TGFiZWw6IGNzc2BcbiAgICAgIGZsZXg6IDE7XG4gICAgICBvdmVyZmxvdy14OiBhdXRvO1xuXG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIGAsXG4gICAgbm9EYXRhOiBjc3NgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKCl9O1xuICAgIGAsXG4gIH0sXG4gIG11dGVkVGV4dDogY3NzYFxuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy50ZXh0LnNlY29uZGFyeX07XG4gICAgZm9udC1zaXplOiAwLjllbTtcblxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgYCxcbiAgaGVhZGVyOiB7XG4gICAgd3JhcHBlcjogY3NzYFxuICAgICAgYmFja2dyb3VuZDogJHt0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5zZWNvbmRhcnl9O1xuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDAuNSl9ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgICBib3JkZXItYm90dG9tOiBzb2xpZCAxcHggJHt0aGVtZS5jb2xvcnMuYm9yZGVyLndlYWt9O1xuICAgIGAsXG4gIH0sXG4gIGZvb3RlcjogY3NzYFxuICAgIGJhY2tncm91bmQ6ICR7dGhlbWUuY29sb3JzLmJhY2tncm91bmQuc2Vjb25kYXJ5fTtcbiAgICBwYWRkaW5nOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICAgIGJvcmRlci10b3A6IHNvbGlkIDFweCAke3RoZW1lLmNvbG9ycy5ib3JkZXIud2Vha307XG4gIGAsXG4gIGRyYWdnYWJsZUljb246IGNzc2BcbiAgICBjdXJzb3I6IGdyYWI7XG4gIGAsXG4gIG11dGVkSWNvbjogY3NzYFxuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy50ZXh0LnNlY29uZGFyeX07XG4gIGAsXG4gIGVkaXRhYmxlOiBjc3NgXG4gICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKDAuNSl9ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgYm9yZGVyOiBzb2xpZCAxcHggJHt0aGVtZS5jb2xvcnMuYm9yZGVyLndlYWt9O1xuICAgIGJvcmRlci1yYWRpdXM6ICR7dGhlbWUuc2hhcGUuYm9yZGVyUmFkaXVzKCl9O1xuXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuXG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICBgLFxuICB0aW1lc2VyaWVzVGFibGVXcmFwcGVyOiBjc3NgXG4gICAgbWF4LWhlaWdodDogNTAwcHg7XG5cbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XG4gIGAsXG4gIHRpbWVzZXJpZXNUYWJsZTogY3NzYFxuICAgIHRhYmxlLWxheW91dDogYXV0bztcblxuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcblxuICAgIHRkLFxuICAgIHRoIHtcbiAgICAgIHBhZGRpbmc6ICR7dGhlbWUuc3BhY2luZygxKX07XG4gICAgfVxuXG4gICAgdGQge1xuICAgICAgYmFja2dyb3VuZDogJHt0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5wcmltYXJ5fTtcbiAgICB9XG5cbiAgICB0aCB7XG4gICAgICBiYWNrZ3JvdW5kOiAke3RoZW1lLmNvbG9ycy5iYWNrZ3JvdW5kLnNlY29uZGFyeX07XG4gICAgfVxuXG4gICAgdHIge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlci5tZWRpdW19O1xuXG4gICAgICAmOmxhc3Qtb2YtdHlwZSB7XG4gICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICB9XG4gICAgfVxuICBgLFxuICBwYWdpbmF0aW9uOiB7XG4gICAgd3JhcHBlcjogY3NzYFxuICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlci5tZWRpdW19O1xuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKCl9O1xuICAgIGAsXG4gIH0sXG59KTtcbiJdLCJuYW1lcyI6WyJxdWVyeSIsInZhbHVlIiwiaW5kZXgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/expressions/Expression.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/expressions/util.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatLabels: () => (/* binding */ formatLabels),\n/* harmony export */   getSeriesLabels: () => (/* binding */ getSeriesLabels),\n/* harmony export */   getSeriesName: () => (/* binding */ getSeriesName),\n/* harmony export */   getSeriesValue: () => (/* binding */ getSeriesValue),\n/* harmony export */   isEmptySeries: () => (/* binding */ isEmptySeries)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/numbers.ts\");\n\n\nconst getSeriesName = (frame) => {\n  const firstField = frame.fields[0];\n  const displayNameFromDS = firstField?.config?.displayNameFromDS;\n  return displayNameFromDS ?? frame.name ?? firstField?.labels?.__name__;\n};\nconst getSeriesValue = (frame) => {\n  const value = frame.fields[0]?.values[0];\n  if (Number.isFinite(value)) {\n    return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.roundDecimals)(value, 5);\n  }\n  return value;\n};\nconst getSeriesLabels = (frame) => {\n  const firstField = frame.fields[0];\n  return firstField?.labels ?? {};\n};\nconst formatLabels = (labels) => {\n  return Object.entries(labels).map(([key, value]) => key + \"=\" + value).join(\", \");\n};\nconst isEmptySeries = (series) => {\n  const isEmpty = series.every((serie) => serie.fields.every((field) => field.values.every((value) => value == null)));\n  return isEmpty;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9leHByZXNzaW9ucy91dGlsLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUQ7QUFXakQsTUFBTSxnQkFBZ0IsQ0FBQyxVQUF5QztBQUM5RCxRQUFNLGFBQWEsTUFBTSxPQUFPLENBQUM7QUFFakMsUUFBTSxvQkFBb0IsWUFBWSxRQUFRO0FBQzlDLFNBQU8scUJBQXFCLE1BQU0sUUFBUSxZQUFZLFFBQVE7QUFDaEU7QUFFQSxNQUFNLGlCQUFpQixDQUFDLFVBQXFCO0FBQzNDLFFBQU0sUUFBUSxNQUFNLE9BQU8sQ0FBQyxHQUFHLE9BQU8sQ0FBQztBQUV2QyxNQUFJLE9BQU8sU0FBUyxLQUFLLEdBQUc7QUFDMUIsV0FBTyw0REFBYSxDQUFDLE9BQU8sQ0FBQztBQUFBLEVBQy9CO0FBRUEsU0FBTztBQUNUO0FBRUEsTUFBTSxrQkFBa0IsQ0FBQyxVQUE2QztBQUNwRSxRQUFNLGFBQWEsTUFBTSxPQUFPLENBQUM7QUFDakMsU0FBTyxZQUFZLFVBQVUsQ0FBQztBQUNoQztBQUVBLE1BQU0sZUFBZSxDQUFDLFdBQTJCO0FBQy9DLFNBQU8sT0FBTyxRQUFRLE1BQU0sRUFDekIsSUFBSSxDQUFDLENBQUMsS0FBSyxLQUFLLE1BQU0sTUFBTSxNQUFNLEtBQUssRUFDdkMsS0FBSyxJQUFJO0FBQ2Q7QUFFQSxNQUFNLGdCQUFnQixDQUFDLFdBQWlDO0FBQ3RELFFBQU0sVUFBVSxPQUFPLE1BQU0sQ0FBQyxVQUFVLE1BQU0sT0FBTyxNQUFNLENBQUMsVUFBVSxNQUFNLE9BQU8sTUFBTSxDQUFDLFVBQVUsU0FBUyxJQUFJLENBQUMsQ0FBQztBQUVuSCxTQUFPO0FBQ1Q7QUFFdUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9mZWF0dXJlcy9hbGVydGluZy91bmlmaWVkL2NvbXBvbmVudHMvZXhwcmVzc2lvbnMvdXRpbC50cz80NGM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFGcmFtZSwgTGFiZWxzLCByb3VuZERlY2ltYWxzIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5cbi8qKlxuICog4pqg77iPIGBmcmFtZS5maWVsZHNgIGNvdWxkIGJlIGFuIGVtcHR5IGFycmF5IOKaoO+4j1xuICpcbiAqIFR5cGVTY3JpcHQgd2lsbCBOT1QgY29tcGxhaW4gYWJvdXQgaXQgd2hlbiBhY2Nlc3NpbmcgaXRlbXMgdmlhIGluZGV4IHNpZ25hdHVyZXMuXG4gKiBNYWtlIHN1cmUgdG8gY2hlY2sgZm9yIGVtcHR5IGFycmF5IG9yIHVzZSBvcHRpb25hbCBjaGFpbmluZyFcbiAqXG4gKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xMzc3OFxuICovXG5cbmNvbnN0IGdldFNlcmllc05hbWUgPSAoZnJhbWU6IERhdGFGcmFtZSk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IGZpcnN0RmllbGQgPSBmcmFtZS5maWVsZHNbMF07XG5cbiAgY29uc3QgZGlzcGxheU5hbWVGcm9tRFMgPSBmaXJzdEZpZWxkPy5jb25maWc/LmRpc3BsYXlOYW1lRnJvbURTO1xuICByZXR1cm4gZGlzcGxheU5hbWVGcm9tRFMgPz8gZnJhbWUubmFtZSA/PyBmaXJzdEZpZWxkPy5sYWJlbHM/Ll9fbmFtZV9fO1xufTtcblxuY29uc3QgZ2V0U2VyaWVzVmFsdWUgPSAoZnJhbWU6IERhdGFGcmFtZSkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGZyYW1lLmZpZWxkc1swXT8udmFsdWVzWzBdO1xuXG4gIGlmIChOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSB7XG4gICAgcmV0dXJuIHJvdW5kRGVjaW1hbHModmFsdWUsIDUpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuY29uc3QgZ2V0U2VyaWVzTGFiZWxzID0gKGZyYW1lOiBEYXRhRnJhbWUpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgY29uc3QgZmlyc3RGaWVsZCA9IGZyYW1lLmZpZWxkc1swXTtcbiAgcmV0dXJuIGZpcnN0RmllbGQ/LmxhYmVscyA/PyB7fTtcbn07XG5cbmNvbnN0IGZvcm1hdExhYmVscyA9IChsYWJlbHM6IExhYmVscyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhsYWJlbHMpXG4gICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBrZXkgKyAnPScgKyB2YWx1ZSlcbiAgICAuam9pbignLCAnKTtcbn07XG5cbmNvbnN0IGlzRW1wdHlTZXJpZXMgPSAoc2VyaWVzOiBEYXRhRnJhbWVbXSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBpc0VtcHR5ID0gc2VyaWVzLmV2ZXJ5KChzZXJpZSkgPT4gc2VyaWUuZmllbGRzLmV2ZXJ5KChmaWVsZCkgPT4gZmllbGQudmFsdWVzLmV2ZXJ5KCh2YWx1ZSkgPT4gdmFsdWUgPT0gbnVsbCkpKTtcblxuICByZXR1cm4gaXNFbXB0eTtcbn07XG5cbmV4cG9ydCB7IGdldFNlcmllc05hbWUsIGdldFNlcmllc1ZhbHVlLCBnZXRTZXJpZXNMYWJlbHMsIGZvcm1hdExhYmVscywgaXNFbXB0eVNlcmllcyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/expressions/util.ts\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rule-editor/VizWrapper.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VizWrapper: () => (/* binding */ VizWrapper)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-ccdf6e64af/0/cache/react-virtualized-auto-sizer-npm-1.0.7-9879645d5c-7f2f013c42.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/utils.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var app_core_app_events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/core/app_events.ts\");\n/* harmony import */ var app_features_explore_Graph_GraphContainer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/explore/Graph/GraphContainer.tsx\");\n/* harmony import */ var _expressions_Expression__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/alerting/unified/components/expressions/Expression.tsx\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rule-editor/util.ts\");\n\n\n\n\n\n\n\n\n\n\nconst VizWrapper = ({ data, thresholds, thresholdsType }) => {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_7__.useStyles2)(getStyles);\n  const isTimeSeriesData = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_8__.isTimeSeriesFrames)(data.series);\n  const statusMessage = (0,_util__WEBPACK_IMPORTED_MODULE_6__.getStatusMessage)(data);\n  const thresholdsStyle = thresholdsType ? { mode: thresholdsType } : void 0;\n  const timeRange = {\n    from: data.timeRange.from.valueOf(),\n    to: data.timeRange.to.valueOf()\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.wrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { disableHeight: true }, ({ width }) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { style: { width } }, isTimeSeriesData ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    app_features_explore_Graph_GraphContainer__WEBPACK_IMPORTED_MODULE_4__.GraphContainer,\n    {\n      statusMessage,\n      data: data.series,\n      eventBus: app_core_app_events__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n      height: 300,\n      width,\n      absoluteRange: timeRange,\n      timeZone: \"browser\",\n      onChangeTime: () => {\n      },\n      splitOpenFn: () => {\n      },\n      loadingState: data.state,\n      thresholdsConfig: thresholds,\n      thresholdsStyle\n    }\n  ) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.instantVectorResultWrapper }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"header\", { className: styles.title }, \"Table\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_expressions_Expression__WEBPACK_IMPORTED_MODULE_5__.ExpressionResult, { series: data.series })))));\n};\nconst getStyles = (theme) => ({\n  wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    width: 100%;\n    position: relative;\n  `,\n  instantVectorResultWrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    border: solid 1px ${theme.colors.border.medium};\n    border-radius: ${theme.shape.borderRadius()};\n    padding: 0;\n\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n  `,\n  title: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)({\n    label: \"panel-title\",\n    padding: theme.spacing(),\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    fontSize: theme.typography.h6.fontSize,\n    fontWeight: theme.typography.h6.fontWeight\n  })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLWVkaXRvci9WaXpXcmFwcGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDRjtBQUNJO0FBRXlEO0FBRXBEO0FBQ0w7QUFDUztBQUVFO0FBRUE7QUFVMUIsTUFBTSxhQUFhLENBQUMsRUFBRSxNQUFNLFlBQVksZUFBZSxNQUFhO0FBQ3pFLFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFDbkMsUUFBTSxtQkFBbUIsaUVBQWtCLENBQUMsS0FBSyxNQUFNO0FBQ3ZELFFBQU0sZ0JBQWdCLHVEQUFnQixDQUFDLElBQUk7QUFDM0MsUUFBTSxrQkFBa0IsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLElBQUk7QUFDcEUsUUFBTSxZQUFZO0FBQUEsSUFDaEIsTUFBTSxLQUFLLFVBQVUsS0FBSyxRQUFRO0FBQUEsSUFDbEMsSUFBSSxLQUFLLFVBQVUsR0FBRyxRQUFRO0FBQUEsRUFDaEM7QUFFQSxTQUNFLDJFQUFDLFNBQUksV0FBVyxPQUFPLFdBQ3JCLDJFQUFDLG9FQUFTLElBQUMsZUFBYSxRQUNyQixDQUFDLEVBQUUsTUFBTSxNQUNSLDJFQUFDLFNBQUksT0FBTyxFQUFFLE1BQU0sS0FDakIsbUJBQ0M7QUFBQSxJQUFDLHFGQUFjO0FBQWQ7QUFBQSxNQUNDO0FBQUEsTUFDQSxNQUFNLEtBQUs7QUFBQSxNQUNYLFVBQVUsMkRBQVM7QUFBVCxNQUNWLFFBQVE7QUFBQSxNQUNSO0FBQUEsTUFDQSxlQUFlO0FBQUEsTUFDZixVQUFTO0FBQUEsTUFDVCxjQUFjLE1BQU07QUFBQSxNQUFDO0FBQUEsTUFDckIsYUFBYSxNQUFNO0FBQUEsTUFBQztBQUFBLE1BQ3BCLGNBQWMsS0FBSztBQUFBLE1BQ25CLGtCQUFrQjtBQUFBLE1BQ2xCO0FBQUE7QUFBQSxFQUNGLElBRUEsMkVBQUMsU0FBSSxXQUFXLE9BQU8sOEJBQ3JCLDJFQUFDLFlBQU8sV0FBVyxPQUFPLFNBQU8sT0FBSyxHQUN0QywyRUFBQyxxRUFBZ0IsSUFBQyxRQUFRLEtBQUssUUFBUSxDQUN6QyxDQUVKLENBRUosQ0FDRjtBQUVKO0FBRUEsTUFBTSxZQUFZLENBQUMsV0FBMEI7QUFBQSxFQUMzQyxTQUFTLGlEQUFHO0FBQUg7QUFBQTtBQUFBO0FBQUEsRUFJVCw0QkFBNEIsaURBQUc7QUFBSCx3QkFDTixNQUFNLE9BQU8sT0FBTztBQUFBLHFCQUN2QixNQUFNLE1BQU0sYUFBYTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTzVDLE9BQU8saURBQUcsQ0FBQztBQUFBLElBQ1QsT0FBTztBQUFBLElBQ1AsU0FBUyxNQUFNLFFBQVE7QUFBQSxJQUN2QixjQUFjO0FBQUEsSUFDZCxVQUFVO0FBQUEsSUFDVixZQUFZO0FBQUEsSUFDWixVQUFVLE1BQU0sV0FBVyxHQUFHO0FBQUEsSUFDOUIsWUFBWSxNQUFNLFdBQVcsR0FBRztBQUFBLEVBQ2xDLENBQUM7QUFDSCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLWVkaXRvci9WaXpXcmFwcGVyLnRzeD8wZjJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEF1dG9TaXplciBmcm9tICdyZWFjdC12aXJ0dWFsaXplZC1hdXRvLXNpemVyJztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiwgaXNUaW1lU2VyaWVzRnJhbWVzLCBQYW5lbERhdGEsIFRocmVzaG9sZHNDb25maWcgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEdyYXBoVHJlc2hvbGRzU3R5bGVNb2RlIH0gZnJvbSAnQGdyYWZhbmEvc2NoZW1hJztcbmltcG9ydCB7IHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgYXBwRXZlbnRzIGZyb20gJ2FwcC9jb3JlL2FwcF9ldmVudHMnO1xuaW1wb3J0IHsgR3JhcGhDb250YWluZXIgfSBmcm9tICdhcHAvZmVhdHVyZXMvZXhwbG9yZS9HcmFwaC9HcmFwaENvbnRhaW5lcic7XG5cbmltcG9ydCB7IEV4cHJlc3Npb25SZXN1bHQgfSBmcm9tICcuLi9leHByZXNzaW9ucy9FeHByZXNzaW9uJztcblxuaW1wb3J0IHsgZ2V0U3RhdHVzTWVzc2FnZSB9IGZyb20gJy4vdXRpbCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGRhdGE6IFBhbmVsRGF0YTtcbiAgdGhyZXNob2xkcz86IFRocmVzaG9sZHNDb25maWc7XG4gIHRocmVzaG9sZHNUeXBlPzogR3JhcGhUcmVzaG9sZHNTdHlsZU1vZGU7XG4gIG9uVGhyZXNob2xkc0NoYW5nZT86ICh0aHJlc2hvbGRzOiBUaHJlc2hvbGRzQ29uZmlnKSA9PiB2b2lkO1xufVxuXG4vKiogVGhlIFZpeldyYXBwZXIgaXMganVzdCBhIHNpbXBsZSBjb21wb25lbnQgdGhhdCByZW5kZXJzIGVpdGhlciBhIHRhYmxlIG9yIGEgZ3JhcGggYmFzZWQgb24gdGhlIHR5cGUgb2YgZGF0YSB3ZSByZWNlaXZlIGZyb20gXCJQYW5lbERhdGFcIiAqL1xuZXhwb3J0IGNvbnN0IFZpeldyYXBwZXIgPSAoeyBkYXRhLCB0aHJlc2hvbGRzLCB0aHJlc2hvbGRzVHlwZSB9OiBQcm9wcykgPT4ge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG4gIGNvbnN0IGlzVGltZVNlcmllc0RhdGEgPSBpc1RpbWVTZXJpZXNGcmFtZXMoZGF0YS5zZXJpZXMpO1xuICBjb25zdCBzdGF0dXNNZXNzYWdlID0gZ2V0U3RhdHVzTWVzc2FnZShkYXRhKTtcbiAgY29uc3QgdGhyZXNob2xkc1N0eWxlID0gdGhyZXNob2xkc1R5cGUgPyB7IG1vZGU6IHRocmVzaG9sZHNUeXBlIH0gOiB1bmRlZmluZWQ7XG4gIGNvbnN0IHRpbWVSYW5nZSA9IHtcbiAgICBmcm9tOiBkYXRhLnRpbWVSYW5nZS5mcm9tLnZhbHVlT2YoKSxcbiAgICB0bzogZGF0YS50aW1lUmFuZ2UudG8udmFsdWVPZigpLFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy53cmFwcGVyfT5cbiAgICAgIDxBdXRvU2l6ZXIgZGlzYWJsZUhlaWdodD5cbiAgICAgICAgeyh7IHdpZHRoIH0pID0+IChcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoIH19PlxuICAgICAgICAgICAge2lzVGltZVNlcmllc0RhdGEgPyAoXG4gICAgICAgICAgICAgIDxHcmFwaENvbnRhaW5lclxuICAgICAgICAgICAgICAgIHN0YXR1c01lc3NhZ2U9e3N0YXR1c01lc3NhZ2V9XG4gICAgICAgICAgICAgICAgZGF0YT17ZGF0YS5zZXJpZXN9XG4gICAgICAgICAgICAgICAgZXZlbnRCdXM9e2FwcEV2ZW50c31cbiAgICAgICAgICAgICAgICBoZWlnaHQ9ezMwMH1cbiAgICAgICAgICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgICAgICAgICAgYWJzb2x1dGVSYW5nZT17dGltZVJhbmdlfVxuICAgICAgICAgICAgICAgIHRpbWVab25lPVwiYnJvd3NlclwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2VUaW1lPXsoKSA9PiB7fX1cbiAgICAgICAgICAgICAgICBzcGxpdE9wZW5Gbj17KCkgPT4ge319XG4gICAgICAgICAgICAgICAgbG9hZGluZ1N0YXRlPXtkYXRhLnN0YXRlfVxuICAgICAgICAgICAgICAgIHRocmVzaG9sZHNDb25maWc9e3RocmVzaG9sZHN9XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkc1N0eWxlPXt0aHJlc2hvbGRzU3R5bGV9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmluc3RhbnRWZWN0b3JSZXN1bHRXcmFwcGVyfT5cbiAgICAgICAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT17c3R5bGVzLnRpdGxlfT5UYWJsZTwvaGVhZGVyPlxuICAgICAgICAgICAgICAgIDxFeHByZXNzaW9uUmVzdWx0IHNlcmllcz17ZGF0YS5zZXJpZXN9IC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvQXV0b1NpemVyPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuY29uc3QgZ2V0U3R5bGVzID0gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiAoe1xuICB3cmFwcGVyOiBjc3NgXG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBgLFxuICBpbnN0YW50VmVjdG9yUmVzdWx0V3JhcHBlcjogY3NzYFxuICAgIGJvcmRlcjogc29saWQgMXB4ICR7dGhlbWUuY29sb3JzLmJvcmRlci5tZWRpdW19O1xuICAgIGJvcmRlci1yYWRpdXM6ICR7dGhlbWUuc2hhcGUuYm9yZGVyUmFkaXVzKCl9O1xuICAgIHBhZGRpbmc6IDA7XG5cbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZmxleC13cmFwOiBub3dyYXA7XG4gIGAsXG4gIHRpdGxlOiBjc3Moe1xuICAgIGxhYmVsOiAncGFuZWwtdGl0bGUnLFxuICAgIHBhZGRpbmc6IHRoZW1lLnNwYWNpbmcoKSxcbiAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5Lmg2LmZvbnRTaXplLFxuICAgIGZvbnRXZWlnaHQ6IHRoZW1lLnR5cG9ncmFwaHkuaDYuZm9udFdlaWdodCxcbiAgfSksXG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rule-editor/VizWrapper.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rule-editor/dag.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _createDagFromQueries: () => (/* binding */ _createDagFromQueries),\n/* harmony export */   _getOriginsOfRefId: () => (/* binding */ _getOriginsOfRefId),\n/* harmony export */   createDagFromQueries: () => (/* binding */ createDagFromQueries),\n/* harmony export */   fingerPrintQueries: () => (/* binding */ fingerPrintQueries),\n/* harmony export */   fingerprintGraph: () => (/* binding */ fingerprintGraph),\n/* harmony export */   getOriginOfRefId: () => (/* binding */ getOriginOfRefId),\n/* harmony export */   parseRefsFromMathExpression: () => (/* binding */ parseRefsFromMathExpression)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/cache/memoize-one-npm-6.0.0-8b2a2cd020-f185ea69f7.zip/node_modules/memoize-one/dist/memoize-one.esm.js\");\n/* harmony import */ var app_core_utils_dag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/utils/dag.ts\");\n/* harmony import */ var app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/expressions/guards.ts\");\n\n\n\n\n\nconst createDagFromQueries = (0,memoize_one__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\n  _createDagFromQueries,\n  (previous, next) => {\n    return fingerPrintQueries(previous[0]) === fingerPrintQueries(next[0]);\n  }\n);\nfunction _createDagFromQueries(queries) {\n  const graph = new app_core_utils_dag__WEBPACK_IMPORTED_MODULE_1__.Graph();\n  const nodes = queries.map((query) => query.refId);\n  graph.createNodes(nodes);\n  queries.forEach((query) => {\n    const source = query.refId;\n    const isMathExpression = (0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_2__.isExpressionQuery)(query.model) && query.model.type === \"math\";\n    const targets = isMathExpression ? parseRefsFromMathExpression(query.model.expression ?? \"\") : [query.model.expression];\n    targets.forEach((target) => {\n      const isSelf = source === target;\n      if (source && target && !isSelf) {\n        graph.link(target, source);\n      }\n    });\n  });\n  return graph;\n}\nfunction parseRefsFromMathExpression(input) {\n  const r1 = new RegExp(/\\$\\{(?<var>[a-zA-Z0-9_ ]+?)\\}/gm);\n  const r2 = new RegExp(/\\$(?<var>[a-zA-Z0-9_]+)/gm);\n  const m1 = Array.from(input.matchAll(r1)).map((m) => m.groups?.var);\n  const m2 = Array.from(input.matchAll(r2)).map((m) => m.groups?.var);\n  return (0,lodash__WEBPACK_IMPORTED_MODULE_0__.compact)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniq)([...m1, ...m2]));\n}\nconst getOriginOfRefId = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.memoize)(_getOriginsOfRefId, (refId, graph) => refId + fingerprintGraph(graph));\nfunction _getOriginsOfRefId(refId, graph) {\n  const node = graph.getNode(refId);\n  let origins = [];\n  function findChildNode(node2) {\n    const inputEdges = node2.inputEdges;\n    if (inputEdges.length > 0) {\n      inputEdges.forEach((edge) => {\n        if (edge.inputNode) {\n          findChildNode(edge.inputNode);\n        }\n      });\n    } else {\n      origins?.push(node2);\n    }\n  }\n  findChildNode(node);\n  return origins.map((origin) => origin.name);\n}\nfunction fingerprintGraph(graph) {\n  return Object.keys(graph.nodes).map((name) => {\n    const n = graph.nodes[name];\n    let outputEdges = n.outputEdges.map((e) => e.outputNode?.name).join(\", \");\n    let inputEdges = n.inputEdges.map((e) => e.inputNode?.name).join(\", \");\n    return `${n.name}:${outputEdges}:${inputEdges}`;\n  }).join(\" \");\n}\nfunction fingerPrintQueries(queries) {\n  return queries.map((query) => {\n    const type = (0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_2__.isExpressionQuery)(query.model) ? query.model.type : query.queryType;\n    return query.refId + (query.model.expression ?? \"\") + type;\n  }).join();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLWVkaXRvci9kYWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUF1QztBQUNoQjtBQUVXO0FBQ0E7QUFJM0IsTUFBTSx1QkFBdUIsdURBQVU7QUFBVixFQUNsQztBQUFBLEVBQ0EsQ0FBQyxVQUFvRCxTQUFtRDtBQUN0RyxXQUFPLG1CQUFtQixTQUFTLENBQUMsQ0FBQyxNQUFNLG1CQUFtQixLQUFLLENBQUMsQ0FBQztBQUFBLEVBQ3ZFO0FBQ0Y7QUFNTyxTQUFTLHNCQUFzQixTQUE4QjtBQUNsRSxRQUFNLFFBQVEsSUFBSSxxREFBSyxDQUFDO0FBRXhCLFFBQU0sUUFBUSxRQUFRLElBQUksQ0FBQyxVQUFVLE1BQU0sS0FBSztBQUNoRCxRQUFNLFlBQVksS0FBSztBQUV2QixVQUFRLFFBQVEsQ0FBQyxVQUFVO0FBQ3pCLFVBQU0sU0FBUyxNQUFNO0FBQ3JCLFVBQU0sbUJBQW1CLGtGQUFpQixDQUFDLE1BQU0sS0FBSyxLQUFLLE1BQU0sTUFBTSxTQUFTO0FBR2hGLFVBQU0sVUFBVSxtQkFDWiw0QkFBNEIsTUFBTSxNQUFNLGNBQWMsRUFBRSxJQUN4RCxDQUFDLE1BQU0sTUFBTSxVQUFVO0FBRTNCLFlBQVEsUUFBUSxDQUFDLFdBQVc7QUFDMUIsWUFBTSxTQUFTLFdBQVc7QUFFMUIsVUFBSSxVQUFVLFVBQVUsQ0FBQyxRQUFRO0FBQy9CLGNBQU0sS0FBSyxRQUFRLE1BQU07QUFBQSxNQUMzQjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0gsQ0FBQztBQUVELFNBQU87QUFDVDtBQUtPLFNBQVMsNEJBQTRCLE9BQXlCO0FBRW5FLFFBQU0sS0FBSyxJQUFJLE9BQU8saUNBQWlDO0FBQ3ZELFFBQU0sS0FBSyxJQUFJLE9BQU8sMkJBQTJCO0FBRWpELFFBQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxTQUFTLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxHQUFHO0FBQ2xFLFFBQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxTQUFTLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxHQUFHO0FBRWxFLFNBQU8sK0NBQU8sQ0FBQyw0Q0FBSSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDckM7QUFFTyxNQUFNLG1CQUFtQiwrQ0FBTyxDQUFDLG9CQUFvQixDQUFDLE9BQU8sVUFBVSxRQUFRLGlCQUFpQixLQUFLLENBQUM7QUFFdEcsU0FBUyxtQkFBbUIsT0FBZSxPQUF3QjtBQUN4RSxRQUFNLE9BQU8sTUFBTSxRQUFRLEtBQUs7QUFFaEMsTUFBSSxVQUFrQixDQUFDO0FBR3ZCLFdBQVMsY0FBY0EsT0FBWTtBQUNqQyxVQUFNLGFBQWFBLE1BQUs7QUFFeEIsUUFBSSxXQUFXLFNBQVMsR0FBRztBQUN6QixpQkFBVyxRQUFRLENBQUMsU0FBUztBQUMzQixZQUFJLEtBQUssV0FBVztBQUNsQix3QkFBYyxLQUFLLFNBQVM7QUFBQSxRQUM5QjtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0gsT0FBTztBQUNMLGVBQVMsS0FBS0EsS0FBSTtBQUFBLElBQ3BCO0FBQUEsRUFDRjtBQUVBLGdCQUFjLElBQUk7QUFFbEIsU0FBTyxRQUFRLElBQUksQ0FBQyxXQUFXLE9BQU8sSUFBSTtBQUM1QztBQUdPLFNBQVMsaUJBQWlCLE9BQWM7QUFDN0MsU0FBTyxPQUFPLEtBQUssTUFBTSxLQUFLLEVBQzNCLElBQUksQ0FBQyxTQUFTO0FBQ2IsVUFBTSxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQzFCLFFBQUksY0FBYyxFQUFFLFlBQVksSUFBSSxDQUFDLE1BQVksRUFBRSxZQUFZLElBQUksRUFBRSxLQUFLLElBQUk7QUFDOUUsUUFBSSxhQUFhLEVBQUUsV0FBVyxJQUFJLENBQUMsTUFBWSxFQUFFLFdBQVcsSUFBSSxFQUFFLEtBQUssSUFBSTtBQUMzRSxXQUFPLEdBQUcsRUFBRSxRQUFRLGVBQWU7QUFBQSxFQUNyQyxDQUFDLEVBQ0EsS0FBSyxHQUFHO0FBQ2I7QUFHTyxTQUFTLG1CQUFtQixTQUF1QjtBQUN4RCxTQUFPLFFBQ0osSUFBSSxDQUFDLFVBQVU7QUFDZCxVQUFNLE9BQU8sa0ZBQWlCLENBQUMsTUFBTSxLQUFLLElBQUksTUFBTSxNQUFNLE9BQU8sTUFBTTtBQUN2RSxXQUFPLE1BQU0sU0FBUyxNQUFNLE1BQU0sY0FBYyxNQUFNO0FBQUEsRUFDeEQsQ0FBQyxFQUNBLEtBQUs7QUFDViIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLWVkaXRvci9kYWcudHM/MmMyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wYWN0LCBtZW1vaXplLCB1bmlxIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBtZW1vaXplT25lIGZyb20gJ21lbW9pemUtb25lJztcblxuaW1wb3J0IHsgRWRnZSwgR3JhcGgsIE5vZGUgfSBmcm9tICdhcHAvY29yZS91dGlscy9kYWcnO1xuaW1wb3J0IHsgaXNFeHByZXNzaW9uUXVlcnkgfSBmcm9tICdhcHAvZmVhdHVyZXMvZXhwcmVzc2lvbnMvZ3VhcmRzJztcbmltcG9ydCB7IEFsZXJ0UXVlcnkgfSBmcm9tICdhcHAvdHlwZXMvdW5pZmllZC1hbGVydGluZy1kdG8nO1xuXG4vLyBtZW1vaXplZCB2ZXJzaW9uIG9mIF9jcmVhdGVEYWdGcm9tUXVlcmllcyB0byBwcmV2ZW50IHJlY3JlYXRpbmcgdGhlIERBRyBpZiBubyBzb3VyY2VzIG9yIHRhcmdldHMgYXJlIG1vZGlmaWVkXG5leHBvcnQgY29uc3QgY3JlYXRlRGFnRnJvbVF1ZXJpZXMgPSBtZW1vaXplT25lKFxuICBfY3JlYXRlRGFnRnJvbVF1ZXJpZXMsXG4gIChwcmV2aW91czogUGFyYW1ldGVyczx0eXBlb2YgX2NyZWF0ZURhZ0Zyb21RdWVyaWVzPiwgbmV4dDogUGFyYW1ldGVyczx0eXBlb2YgX2NyZWF0ZURhZ0Zyb21RdWVyaWVzPikgPT4ge1xuICAgIHJldHVybiBmaW5nZXJQcmludFF1ZXJpZXMocHJldmlvdXNbMF0pID09PSBmaW5nZXJQcmludFF1ZXJpZXMobmV4dFswXSk7XG4gIH1cbik7XG5cbi8qKlxuICogVHVybiB0aGUgYXJyYXkgb2YgYWxlcnQgcXVlcmllcyAodGhpcyBtZWFucyBkYXRhIHF1ZXJpZXMgYW5kIGV4cHJlc3Npb25zKVxuICogaW4gdG8gYSBEQUcsIGEgZGlyZWN0ZWQgYWN5Y2xpY2FsIGdyYXBoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfY3JlYXRlRGFnRnJvbVF1ZXJpZXMocXVlcmllczogQWxlcnRRdWVyeVtdKTogR3JhcGgge1xuICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaCgpO1xuXG4gIGNvbnN0IG5vZGVzID0gcXVlcmllcy5tYXAoKHF1ZXJ5KSA9PiBxdWVyeS5yZWZJZCk7XG4gIGdyYXBoLmNyZWF0ZU5vZGVzKG5vZGVzKTtcblxuICBxdWVyaWVzLmZvckVhY2goKHF1ZXJ5KSA9PiB7XG4gICAgY29uc3Qgc291cmNlID0gcXVlcnkucmVmSWQ7XG4gICAgY29uc3QgaXNNYXRoRXhwcmVzc2lvbiA9IGlzRXhwcmVzc2lvblF1ZXJ5KHF1ZXJ5Lm1vZGVsKSAmJiBxdWVyeS5tb2RlbC50eXBlID09PSAnbWF0aCc7XG5cbiAgICAvLyBzb21lIGV4cHJlc3Npb25zIGhhdmUgbXVsdGlwbGUgdGFyZ2V0cyAobGlrZSB0aGUgbWF0aCBleHByZXNzaW9uKVxuICAgIGNvbnN0IHRhcmdldHMgPSBpc01hdGhFeHByZXNzaW9uXG4gICAgICA/IHBhcnNlUmVmc0Zyb21NYXRoRXhwcmVzc2lvbihxdWVyeS5tb2RlbC5leHByZXNzaW9uID8/ICcnKVxuICAgICAgOiBbcXVlcnkubW9kZWwuZXhwcmVzc2lvbl07XG5cbiAgICB0YXJnZXRzLmZvckVhY2goKHRhcmdldCkgPT4ge1xuICAgICAgY29uc3QgaXNTZWxmID0gc291cmNlID09PSB0YXJnZXQ7XG5cbiAgICAgIGlmIChzb3VyY2UgJiYgdGFyZ2V0ICYmICFpc1NlbGYpIHtcbiAgICAgICAgZ3JhcGgubGluayh0YXJnZXQsIHNvdXJjZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBncmFwaDtcbn1cblxuLyoqXG4gKiBwYXJzZSBhbiBleHByZXNzaW9uIGxpa2UgXCIkQSA+ICRCXCIgb3IgXCIke0ZPTyBCQVJ9ID4gMFwiIHRvIGFuIGFycmF5IG9mIHJlZklkc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWZzRnJvbU1hdGhFeHByZXNzaW9uKGlucHV0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIC8vIHdlJ2xsIHVzZSB0d28gcmVndWxhciBleHByZXNzaW9ucywgb25lIGZvciBcIiR7dmFyfVwiIGFuZCBvbmUgZm9yIFwiJHZhclwiXG4gIGNvbnN0IHIxID0gbmV3IFJlZ0V4cCgvXFwkXFx7KD88dmFyPlthLXpBLVowLTlfIF0rPylcXH0vZ20pO1xuICBjb25zdCByMiA9IG5ldyBSZWdFeHAoL1xcJCg/PHZhcj5bYS16QS1aMC05X10rKS9nbSk7XG5cbiAgY29uc3QgbTEgPSBBcnJheS5mcm9tKGlucHV0Lm1hdGNoQWxsKHIxKSkubWFwKChtKSA9PiBtLmdyb3Vwcz8udmFyKTtcbiAgY29uc3QgbTIgPSBBcnJheS5mcm9tKGlucHV0Lm1hdGNoQWxsKHIyKSkubWFwKChtKSA9PiBtLmdyb3Vwcz8udmFyKTtcblxuICByZXR1cm4gY29tcGFjdCh1bmlxKFsuLi5tMSwgLi4ubTJdKSk7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRPcmlnaW5PZlJlZklkID0gbWVtb2l6ZShfZ2V0T3JpZ2luc09mUmVmSWQsIChyZWZJZCwgZ3JhcGgpID0+IHJlZklkICsgZmluZ2VycHJpbnRHcmFwaChncmFwaCkpO1xuXG5leHBvcnQgZnVuY3Rpb24gX2dldE9yaWdpbnNPZlJlZklkKHJlZklkOiBzdHJpbmcsIGdyYXBoOiBHcmFwaCk6IHN0cmluZ1tdIHtcbiAgY29uc3Qgbm9kZSA9IGdyYXBoLmdldE5vZGUocmVmSWQpO1xuXG4gIGxldCBvcmlnaW5zOiBOb2RlW10gPSBbXTtcblxuICAvLyByZWN1cnNlIHRocm91Z2ggXCJub2RlID4gaW5wdXRFZGdlcyA+IGlucHV0Tm9kZVwiXG4gIGZ1bmN0aW9uIGZpbmRDaGlsZE5vZGUobm9kZTogTm9kZSkge1xuICAgIGNvbnN0IGlucHV0RWRnZXMgPSBub2RlLmlucHV0RWRnZXM7XG5cbiAgICBpZiAoaW5wdXRFZGdlcy5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dEVkZ2VzLmZvckVhY2goKGVkZ2UpID0+IHtcbiAgICAgICAgaWYgKGVkZ2UuaW5wdXROb2RlKSB7XG4gICAgICAgICAgZmluZENoaWxkTm9kZShlZGdlLmlucHV0Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5zPy5wdXNoKG5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIGZpbmRDaGlsZE5vZGUobm9kZSk7XG5cbiAgcmV0dXJuIG9yaWdpbnMubWFwKChvcmlnaW4pID0+IG9yaWdpbi5uYW1lKTtcbn1cblxuLy8gY3JlYXRlIGEgdW5pcXVlIGZpbmdlcnByaW50IG9mIHRoZSBEQUdcbmV4cG9ydCBmdW5jdGlvbiBmaW5nZXJwcmludEdyYXBoKGdyYXBoOiBHcmFwaCkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoZ3JhcGgubm9kZXMpXG4gICAgLm1hcCgobmFtZSkgPT4ge1xuICAgICAgY29uc3QgbiA9IGdyYXBoLm5vZGVzW25hbWVdO1xuICAgICAgbGV0IG91dHB1dEVkZ2VzID0gbi5vdXRwdXRFZGdlcy5tYXAoKGU6IEVkZ2UpID0+IGUub3V0cHV0Tm9kZT8ubmFtZSkuam9pbignLCAnKTtcbiAgICAgIGxldCBpbnB1dEVkZ2VzID0gbi5pbnB1dEVkZ2VzLm1hcCgoZTogRWRnZSkgPT4gZS5pbnB1dE5vZGU/Lm5hbWUpLmpvaW4oJywgJyk7XG4gICAgICByZXR1cm4gYCR7bi5uYW1lfToke291dHB1dEVkZ2VzfToke2lucHV0RWRnZXN9YDtcbiAgICB9KVxuICAgIC5qb2luKCcgJyk7XG59XG5cbi8vIGNyZWF0ZSBhIHVuaXF1ZSBmaW5nZXJwcmludCBvZiB0aGUgYXJyYXkgb2YgcXVlcmllc1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmdlclByaW50UXVlcmllcyhxdWVyaWVzOiBBbGVydFF1ZXJ5W10pIHtcbiAgcmV0dXJuIHF1ZXJpZXNcbiAgICAubWFwKChxdWVyeSkgPT4ge1xuICAgICAgY29uc3QgdHlwZSA9IGlzRXhwcmVzc2lvblF1ZXJ5KHF1ZXJ5Lm1vZGVsKSA/IHF1ZXJ5Lm1vZGVsLnR5cGUgOiBxdWVyeS5xdWVyeVR5cGU7XG4gICAgICByZXR1cm4gcXVlcnkucmVmSWQgKyAocXVlcnkubW9kZWwuZXhwcmVzc2lvbiA/PyAnJykgKyB0eXBlO1xuICAgIH0pXG4gICAgLmpvaW4oKTtcbn1cbiJdLCJuYW1lcyI6WyJub2RlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rule-editor/dag.ts\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rule-editor/util.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkForPathSeparator: () => (/* binding */ checkForPathSeparator),\n/* harmony export */   errorFromSeries: () => (/* binding */ errorFromSeries),\n/* harmony export */   findRenamedDataQueryReferences: () => (/* binding */ findRenamedDataQueryReferences),\n/* harmony export */   getStatusMessage: () => (/* binding */ getStatusMessage),\n/* harmony export */   getThresholdsForQueries: () => (/* binding */ getThresholdsForQueries),\n/* harmony export */   queriesWithUpdatedReferences: () => (/* binding */ queriesWithUpdatedReferences),\n/* harmony export */   refIdExists: () => (/* binding */ refIdExists),\n/* harmony export */   translateRouteParamToRuleType: () => (/* binding */ translateRouteParamToRuleType),\n/* harmony export */   updateMathExpressionRefs: () => (/* binding */ updateMathExpressionRefs),\n/* harmony export */   warningFromSeries: () => (/* binding */ warningFromSeries)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/utils.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/thresholds.ts\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./packages/grafana-schema/src/raw/dashboard/x/dashboard_types.gen.ts\");\n/* harmony import */ var app_core_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/config.ts\");\n/* harmony import */ var app_features_alerting_state_alertDef__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/alerting/state/alertDef.ts\");\n/* harmony import */ var app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/expressions/guards.ts\");\n/* harmony import */ var app_features_expressions_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/expressions/types.ts\");\n/* harmony import */ var _types_rule_form__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/alerting/unified/types/rule-form.ts\");\n/* harmony import */ var _dag__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rule-editor/dag.ts\");\n\n\n\n\n\n\n\n\n\n\nfunction queriesWithUpdatedReferences(queries, previousRefId, newRefId) {\n  return queries.map((query) => {\n    if (previousRefId === newRefId) {\n      return query;\n    }\n    if (!(0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_3__.isExpressionQuery)(query.model)) {\n      return query;\n    }\n    const isMathExpression = query.model.type === \"math\";\n    const isReduceExpression = query.model.type === \"reduce\";\n    const isResampleExpression = query.model.type === \"resample\";\n    const isClassicExpression = query.model.type === \"classic_conditions\";\n    const isThresholdExpression = query.model.type === \"threshold\";\n    if (isMathExpression) {\n      return {\n        ...query,\n        model: {\n          ...query.model,\n          expression: updateMathExpressionRefs(query.model.expression ?? \"\", previousRefId, newRefId)\n        }\n      };\n    }\n    if (isResampleExpression || isReduceExpression || isThresholdExpression) {\n      const isReferencing = query.model.expression === previousRefId;\n      return {\n        ...query,\n        model: {\n          ...query.model,\n          expression: isReferencing ? newRefId : query.model.expression\n        }\n      };\n    }\n    if (isClassicExpression) {\n      const conditions = query.model.conditions?.map((condition) => ({\n        ...condition,\n        query: {\n          ...condition.query,\n          params: condition.query.params.map((param) => param === previousRefId ? newRefId : param)\n        }\n      }));\n      return { ...query, model: { ...query.model, conditions } };\n    }\n    return query;\n  });\n}\nfunction updateMathExpressionRefs(expression, previousRefId, newRefId) {\n  const oldExpression = new RegExp(\"(\\\\$\" + previousRefId + \"\\\\b)|(\\\\${\" + previousRefId + \"})\", \"gm\");\n  const newExpression = \"${\" + newRefId + \"}\";\n  return expression.replace(oldExpression, newExpression);\n}\nfunction refIdExists(queries, refId) {\n  return queries.find((query) => query.refId === refId) !== void 0;\n}\nfunction checkForPathSeparator(value) {\n  const containsPathSeparator = value.includes(\"/\") || value.includes(\"\\\\\");\n  if (containsPathSeparator) {\n    return 'Cannot contain \"/\" or \"\\\\\" characters';\n  }\n  return true;\n}\nfunction errorFromSeries(series) {\n  if (series.length === 0) {\n    return;\n  }\n  const isTimeSeriesResults = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.isTimeSeriesFrames)(series);\n  let error;\n  if (isTimeSeriesResults) {\n    error = new Error(\"You cannot use time series data as an alert condition, consider adding a reduce expression.\");\n  }\n  return error;\n}\nfunction warningFromSeries(series) {\n  const notices = series[0]?.meta?.notices ?? [];\n  const warning = notices.find((notice) => notice.severity === \"warning\")?.text;\n  return warning ? new Error(warning) : void 0;\n}\nfunction getThresholdsForQueries(queries) {\n  const thresholds = {};\n  const SUPPORTED_EXPRESSION_TYPES = [app_features_expressions_types__WEBPACK_IMPORTED_MODULE_4__.ExpressionQueryType.threshold, app_features_expressions_types__WEBPACK_IMPORTED_MODULE_4__.ExpressionQueryType.classic];\n  for (const query of queries) {\n    if (!(0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_3__.isExpressionQuery)(query.model)) {\n      continue;\n    }\n    if (!SUPPORTED_EXPRESSION_TYPES.includes(query.model.type)) {\n      continue;\n    }\n    if (!Array.isArray(query.model.conditions)) {\n      continue;\n    }\n    const hasRangeThreshold = query.model.conditions.some(isRangeCondition);\n    query.model.conditions.forEach((condition) => {\n      const threshold = condition.evaluator.params;\n      const refId = condition.query?.params[0] ?? query.model.expression;\n      if (!refId) {\n        return;\n      }\n      const isRangeThreshold = isRangeCondition(condition);\n      try {\n        const graph = (0,_dag__WEBPACK_IMPORTED_MODULE_6__.createDagFromQueries)(queries);\n        const originRefIDs = (0,_dag__WEBPACK_IMPORTED_MODULE_6__.getOriginOfRefId)(refId, graph);\n        const originQueries = queries.filter((query2) => originRefIDs.includes(query2.refId));\n        originQueries.forEach((originQuery) => {\n          const originRefID = originQuery.refId;\n          const originIsDataQuery = !(0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_3__.isExpressionQuery)(originQuery?.model);\n          const hasValidOrigin = Boolean(originIsDataQuery && originRefID);\n          if (originRefID && !thresholds[originRefID]) {\n            thresholds[originRefID] = {\n              config: {\n                mode: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.ThresholdsMode.Absolute,\n                steps: []\n              },\n              mode: _grafana_schema__WEBPACK_IMPORTED_MODULE_9__.GraphTresholdsStyleMode.Line\n            };\n          }\n          if (originRefID && hasValidOrigin && !isRangeThreshold && !hasRangeThreshold) {\n            appendSingleThreshold(originRefID, threshold[0]);\n          } else if (originRefID && hasValidOrigin && isRangeThreshold) {\n            appendRangeThreshold(originRefID, threshold, condition.evaluator.type);\n            thresholds[originRefID].mode = _grafana_schema__WEBPACK_IMPORTED_MODULE_9__.GraphTresholdsStyleMode.LineAndArea;\n          }\n        });\n      } catch (err) {\n        console.error(\"Failed to parse thresholds\", err);\n        return;\n      }\n    });\n  }\n  function appendSingleThreshold(refId, value) {\n    thresholds[refId].config.steps.push(\n      ...[\n        {\n          value: -Infinity,\n          color: \"transparent\"\n        },\n        {\n          value,\n          color: app_core_config__WEBPACK_IMPORTED_MODULE_1__.config.theme2.colors.error.main\n        }\n      ]\n    );\n  }\n  function appendRangeThreshold(refId, values, type) {\n    if (type === app_features_alerting_state_alertDef__WEBPACK_IMPORTED_MODULE_2__.EvalFunction.IsWithinRange) {\n      thresholds[refId].config.steps.push(\n        ...[\n          {\n            value: -Infinity,\n            color: \"transparent\"\n          },\n          {\n            value: values[0],\n            color: app_core_config__WEBPACK_IMPORTED_MODULE_1__.config.theme2.colors.error.main\n          },\n          {\n            value: values[1],\n            color: app_core_config__WEBPACK_IMPORTED_MODULE_1__.config.theme2.colors.error.main\n          },\n          {\n            value: values[1],\n            color: \"transparent\"\n          }\n        ]\n      );\n    }\n    if (type === app_features_alerting_state_alertDef__WEBPACK_IMPORTED_MODULE_2__.EvalFunction.IsOutsideRange) {\n      thresholds[refId].config.steps.push(\n        ...[\n          {\n            value: -Infinity,\n            color: app_core_config__WEBPACK_IMPORTED_MODULE_1__.config.theme2.colors.error.main\n          },\n          // we have to duplicate this value, or the graph will not display the handle in the right color\n          {\n            value: values[0],\n            color: app_core_config__WEBPACK_IMPORTED_MODULE_1__.config.theme2.colors.error.main\n          },\n          {\n            value: values[0],\n            color: \"transparent\"\n          },\n          {\n            value: values[1],\n            color: app_core_config__WEBPACK_IMPORTED_MODULE_1__.config.theme2.colors.error.main\n          }\n        ]\n      );\n    }\n    thresholds[refId].config.steps.sort((a, b) => a.value - b.value);\n    thresholds[refId].config.steps = thresholds[refId].config.steps.filter((step) => step.value !== void 0);\n  }\n  return thresholds;\n}\nfunction isRangeCondition(condition) {\n  return condition.evaluator.type === app_features_alerting_state_alertDef__WEBPACK_IMPORTED_MODULE_2__.EvalFunction.IsWithinRange || condition.evaluator.type === app_features_alerting_state_alertDef__WEBPACK_IMPORTED_MODULE_2__.EvalFunction.IsOutsideRange;\n}\nfunction getStatusMessage(data) {\n  const genericErrorMessage = \"Failed to fetch data\";\n  if (data.state !== _grafana_schema__WEBPACK_IMPORTED_MODULE_10__.LoadingState.Error) {\n    return;\n  }\n  const errors = data.errors;\n  if (errors?.length) {\n    return errors.map((error) => error.message ?? genericErrorMessage).join(\", \");\n  }\n  return data.error?.message ?? genericErrorMessage;\n}\nfunction translateRouteParamToRuleType(param = \"\") {\n  if (param === \"recording\") {\n    return _types_rule_form__WEBPACK_IMPORTED_MODULE_5__.RuleFormType.cloudRecording;\n  }\n  return _types_rule_form__WEBPACK_IMPORTED_MODULE_5__.RuleFormType.grafana;\n}\nfunction findRenamedDataQueryReferences(previousQueries, updatedQueries) {\n  const updatedDataQueries = updatedQueries.filter((query) => !(0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_3__.isExpressionQuery)(query.model)).map((query) => query.refId);\n  const previousDataQueries = previousQueries.filter((query) => !(0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_3__.isExpressionQuery)(query.model)).map((query) => query.refId);\n  const [oldRefId, newRefId] = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.xor)(previousDataQueries, updatedDataQueries);\n  return [oldRefId, newRefId];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLWVkaXRvci91dGlsLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBR3VFO0FBQ3JDO0FBQy9CO0FBQ007QUFDSztBQUNvQjtBQUd6QjtBQUUwQjtBQUVoRCxTQUFTLDZCQUNkLFNBQ0EsZUFDQSxVQUNjO0FBQ2QsU0FBTyxRQUFRLElBQUksQ0FBQyxVQUFVO0FBQzVCLFFBQUksa0JBQWtCLFVBQVU7QUFDOUIsYUFBTztBQUFBLElBQ1Q7QUFFQSxRQUFJLENBQUMsa0ZBQWlCLENBQUMsTUFBTSxLQUFLLEdBQUc7QUFDbkMsYUFBTztBQUFBLElBQ1Q7QUFFQSxVQUFNLG1CQUFtQixNQUFNLE1BQU0sU0FBUztBQUM5QyxVQUFNLHFCQUFxQixNQUFNLE1BQU0sU0FBUztBQUNoRCxVQUFNLHVCQUF1QixNQUFNLE1BQU0sU0FBUztBQUNsRCxVQUFNLHNCQUFzQixNQUFNLE1BQU0sU0FBUztBQUNqRCxVQUFNLHdCQUF3QixNQUFNLE1BQU0sU0FBUztBQUVuRCxRQUFJLGtCQUFrQjtBQUNwQixhQUFPO0FBQUEsUUFDTCxHQUFHO0FBQUEsUUFDSCxPQUFPO0FBQUEsVUFDTCxHQUFHLE1BQU07QUFBQSxVQUNULFlBQVkseUJBQXlCLE1BQU0sTUFBTSxjQUFjLElBQUksZUFBZSxRQUFRO0FBQUEsUUFDNUY7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUVBLFFBQUksd0JBQXdCLHNCQUFzQix1QkFBdUI7QUFDdkUsWUFBTSxnQkFBZ0IsTUFBTSxNQUFNLGVBQWU7QUFFakQsYUFBTztBQUFBLFFBQ0wsR0FBRztBQUFBLFFBQ0gsT0FBTztBQUFBLFVBQ0wsR0FBRyxNQUFNO0FBQUEsVUFDVCxZQUFZLGdCQUFnQixXQUFXLE1BQU0sTUFBTTtBQUFBLFFBQ3JEO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFFQSxRQUFJLHFCQUFxQjtBQUN2QixZQUFNLGFB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VUFBVSxTQUFTLDhFQUFZLENBQUMsaUJBQWlCLFVBQVUsVUFBVSxTQUFTLDhFQUFZLENBQUM7QUFFekc7QUFFTyxTQUFTLGlCQUFpQixNQUFxQztBQUNwRSxRQUFNLHNCQUFzQjtBQUM1QixNQUFJLEtBQUssVUFBVSwwREFBWSxDQUFDLE9BQU87QUFDckM7QUFBQSxFQUNGO0FBRUEsUUFBTSxTQUFTLEtBQUs7QUFDcEIsTUFBSSxRQUFRLFFBQVE7QUFDbEIsV0FBTyxPQUFPLElBQUksQ0FBQyxVQUFVLE1BQU0sV0FBVyxtQkFBbUIsRUFBRSxLQUFLLElBQUk7QUFBQSxFQUM5RTtBQUVBLFNBQU8sS0FBSyxPQUFPLFdBQVc7QUFDaEM7QUFFTyxTQUFTLDhCQUE4QixRQUFRLElBQWtCO0FBQ3RFLE1BQUksVUFBVSxhQUFhO0FBQ3pCLFdBQU8sMERBQVksQ0FBQztBQUFBLEVBQ3RCO0FBRUEsU0FBTywwREFBWSxDQUFDO0FBQ3RCO0FBUU8sU0FBUywrQkFDZCxpQkFDQSxnQkFDa0I7QUFDbEIsUUFBTSxxQkFBcUIsZUFDeEIsT0FBTyxDQUFDLFVBQVUsQ0FBQyxrRkFBaUIsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUNqRCxJQUFJLENBQUMsVUFBVSxNQUFNLEtBQUs7QUFDN0IsUUFBTSxzQkFBc0IsZ0JBQ3pCLE9BQU8sQ0FBQyxVQUFVLENBQUMsa0ZBQWlCLENBQUMsTUFBTSxLQUFLLENBQUMsRUFDakQsSUFBSSxDQUFDLFVBQVUsTUFBTSxLQUFLO0FBSzdCLFFBQU0sQ0FBQyxVQUFVLFFBQVEsSUFBSSwyQ0FBRyxDQUFDLHFCQUFxQixrQkFBa0I7QUFFeEUsU0FBTyxDQUFDLFVBQVUsUUFBUTtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLWVkaXRvci91dGlsLnRzPzhjZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeG9yIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IFZhbGlkYXRlUmVzdWx0IH0gZnJvbSAncmVhY3QtaG9vay1mb3JtJztcblxuaW1wb3J0IHsgRGF0YUZyYW1lLCBUaHJlc2hvbGRzQ29uZmlnLCBUaHJlc2hvbGRzTW9kZSwgaXNUaW1lU2VyaWVzRnJhbWVzLCBQYW5lbERhdGEgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEdyYXBoVHJlc2hvbGRzU3R5bGVNb2RlLCBMb2FkaW5nU3RhdGUgfSBmcm9tICdAZ3JhZmFuYS9zY2hlbWEnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnYXBwL2NvcmUvY29uZmlnJztcbmltcG9ydCB7IEV2YWxGdW5jdGlvbiB9IGZyb20gJ2FwcC9mZWF0dXJlcy9hbGVydGluZy9zdGF0ZS9hbGVydERlZic7XG5pbXBvcnQgeyBpc0V4cHJlc3Npb25RdWVyeSB9IGZyb20gJ2FwcC9mZWF0dXJlcy9leHByZXNzaW9ucy9ndWFyZHMnO1xuaW1wb3J0IHsgQ2xhc3NpY0NvbmRpdGlvbiwgRXhwcmVzc2lvblF1ZXJ5VHlwZSB9IGZyb20gJ2FwcC9mZWF0dXJlcy9leHByZXNzaW9ucy90eXBlcyc7XG5pbXBvcnQgeyBBbGVydFF1ZXJ5IH0gZnJvbSAnYXBwL3R5cGVzL3VuaWZpZWQtYWxlcnRpbmctZHRvJztcblxuaW1wb3J0IHsgUnVsZUZvcm1UeXBlIH0gZnJvbSAnLi4vLi4vdHlwZXMvcnVsZS1mb3JtJztcblxuaW1wb3J0IHsgY3JlYXRlRGFnRnJvbVF1ZXJpZXMsIGdldE9yaWdpbk9mUmVmSWQgfSBmcm9tICcuL2RhZyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWVyaWVzV2l0aFVwZGF0ZWRSZWZlcmVuY2VzKFxuICBxdWVyaWVzOiBBbGVydFF1ZXJ5W10sXG4gIHByZXZpb3VzUmVmSWQ6IHN0cmluZyxcbiAgbmV3UmVmSWQ6IHN0cmluZ1xuKTogQWxlcnRRdWVyeVtdIHtcbiAgcmV0dXJuIHF1ZXJpZXMubWFwKChxdWVyeSkgPT4ge1xuICAgIGlmIChwcmV2aW91c1JlZklkID09PSBuZXdSZWZJZCkge1xuICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgIH1cblxuICAgIGlmICghaXNFeHByZXNzaW9uUXVlcnkocXVlcnkubW9kZWwpKSB7XG4gICAgICByZXR1cm4gcXVlcnk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNNYXRoRXhwcmVzc2lvbiA9IHF1ZXJ5Lm1vZGVsLnR5cGUgPT09ICdtYXRoJztcbiAgICBjb25zdCBpc1JlZHVjZUV4cHJlc3Npb24gPSBxdWVyeS5tb2RlbC50eXBlID09PSAncmVkdWNlJztcbiAgICBjb25zdCBpc1Jlc2FtcGxlRXhwcmVzc2lvbiA9IHF1ZXJ5Lm1vZGVsLnR5cGUgPT09ICdyZXNhbXBsZSc7XG4gICAgY29uc3QgaXNDbGFzc2ljRXhwcmVzc2lvbiA9IHF1ZXJ5Lm1vZGVsLnR5cGUgPT09ICdjbGFzc2ljX2NvbmRpdGlvbnMnO1xuICAgIGNvbnN0IGlzVGhyZXNob2xkRXhwcmVzc2lvbiA9IHF1ZXJ5Lm1vZGVsLnR5cGUgPT09ICd0aHJlc2hvbGQnO1xuXG4gICAgaWYgKGlzTWF0aEV4cHJlc3Npb24pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnF1ZXJ5LFxuICAgICAgICBtb2RlbDoge1xuICAgICAgICAgIC4uLnF1ZXJ5Lm1vZGVsLFxuICAgICAgICAgIGV4cHJlc3Npb246IHVwZGF0ZU1hdGhFeHByZXNzaW9uUmVmcyhxdWVyeS5tb2RlbC5leHByZXNzaW9uID8/ICcnLCBwcmV2aW91c1JlZklkLCBuZXdSZWZJZCksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChpc1Jlc2FtcGxlRXhwcmVzc2lvbiB8fCBpc1JlZHVjZUV4cHJlc3Npb24gfHwgaXNUaHJlc2hvbGRFeHByZXNzaW9uKSB7XG4gICAgICBjb25zdCBpc1JlZmVyZW5jaW5nID0gcXVlcnkubW9kZWwuZXhwcmVzc2lvbiA9PT0gcHJldmlvdXNSZWZJZDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucXVlcnksXG4gICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgLi4ucXVlcnkubW9kZWwsXG4gICAgICAgICAgZXhwcmVzc2lvbjogaXNSZWZlcmVuY2luZyA/IG5ld1JlZklkIDogcXVlcnkubW9kZWwuZXhwcmVzc2lvbixcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGlzQ2xhc3NpY0V4cHJlc3Npb24pIHtcbiAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBxdWVyeS5tb2RlbC5jb25kaXRpb25zPy5tYXAoKGNvbmRpdGlvbikgPT4gKHtcbiAgICAgICAgLi4uY29uZGl0aW9uLFxuICAgICAgICBxdWVyeToge1xuICAgICAgICAgIC4uLmNvbmRpdGlvbi5xdWVyeSxcbiAgICAgICAgICBwYXJhbXM6IGNvbmRpdGlvbi5xdWVyeS5wYXJhbXMubWFwKChwYXJhbTogc3RyaW5nKSA9PiAocGFyYW0gPT09IHByZXZpb3VzUmVmSWQgPyBuZXdSZWZJZCA6IHBhcmFtKSksXG4gICAgICAgIH0sXG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiB7IC4uLnF1ZXJ5LCBtb2RlbDogeyAuLi5xdWVyeS5tb2RlbCwgY29uZGl0aW9ucyB9IH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1hdGhFeHByZXNzaW9uUmVmcyhleHByZXNzaW9uOiBzdHJpbmcsIHByZXZpb3VzUmVmSWQ6IHN0cmluZywgbmV3UmVmSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG9sZEV4cHJlc3Npb24gPSBuZXcgUmVnRXhwKCcoXFxcXCQnICsgcHJldmlvdXNSZWZJZCArICdcXFxcYil8KFxcXFwkeycgKyBwcmV2aW91c1JlZklkICsgJ30pJywgJ2dtJyk7XG4gIGNvbnN0IG5ld0V4cHJlc3Npb24gPSAnJHsnICsgbmV3UmVmSWQgKyAnfSc7XG5cbiAgcmV0dXJuIGV4cHJlc3Npb24ucmVwbGFjZShvbGRFeHByZXNzaW9uLCBuZXdFeHByZXNzaW9uKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZklkRXhpc3RzKHF1ZXJpZXM6IEFsZXJ0UXVlcnlbXSwgcmVmSWQ6IHN0cmluZyB8IG51bGwpOiBib29sZWFuIHtcbiAgcmV0dXJuIHF1ZXJpZXMuZmluZCgocXVlcnkpID0+IHF1ZXJ5LnJlZklkID09PSByZWZJZCkgIT09IHVuZGVmaW5lZDtcbn1cblxuLy8gc29tZSBnYXRld2F5cyAobGlrZSBJc3Rpbykgd2lsbCBkZWNvZGUgXCIvXCIgYW5kIFwiXFxcIiBjaGFyYWN0ZXJzIOKAkyB0aGlzIHdpbGwgY2F1c2UgNDA0IGVycm9ycyBmb3IgYW55IEFQSSBjYWxsXG4vLyB0aGF0IGluY2x1ZGVzIHRoZXNlIHZhbHVlcyBpbiB0aGUgVVJMIChpZS4gL215L3BhdGglMmZ0by9yZXNvdXJjZSAtPiAvbXkvcGF0aC90by9yZXNvdXJjZSlcbi8vXG4vLyBzZWUgaHR0cHM6Ly9pc3Rpby5pby9sYXRlc3QvZG9jcy9vcHMvYmVzdC1wcmFjdGljZXMvc2VjdXJpdHkvI2N1c3RvbWl6ZS15b3VyLXN5c3RlbS1vbi1wYXRoLW5vcm1hbGl6YXRpb25cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0ZvclBhdGhTZXBhcmF0b3IodmFsdWU6IHN0cmluZyk6IFZhbGlkYXRlUmVzdWx0IHtcbiAgY29uc3QgY29udGFpbnNQYXRoU2VwYXJhdG9yID0gdmFsdWUuaW5jbHVkZXMoJy8nKSB8fCB2YWx1ZS5pbmNsdWRlcygnXFxcXCcpO1xuICBpZiAoY29udGFpbnNQYXRoU2VwYXJhdG9yKSB7XG4gICAgcmV0dXJuICdDYW5ub3QgY29udGFpbiBcIi9cIiBvciBcIlxcXFxcIiBjaGFyYWN0ZXJzJztcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXJyb3JGcm9tU2VyaWVzKHNlcmllczogRGF0YUZyYW1lW10pOiBFcnJvciB8IHVuZGVmaW5lZCB7XG4gIGlmIChzZXJpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgaXNUaW1lU2VyaWVzUmVzdWx0cyA9IGlzVGltZVNlcmllc0ZyYW1lcyhzZXJpZXMpO1xuXG4gIGxldCBlcnJvcjtcbiAgaWYgKGlzVGltZVNlcmllc1Jlc3VsdHMpIHtcbiAgICBlcnJvciA9IG5ldyBFcnJvcignWW91IGNhbm5vdCB1c2UgdGltZSBzZXJpZXMgZGF0YSBhcyBhbiBhbGVydCBjb25kaXRpb24sIGNvbnNpZGVyIGFkZGluZyBhIHJlZHVjZSBleHByZXNzaW9uLicpO1xuICB9XG5cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2FybmluZ0Zyb21TZXJpZXMoc2VyaWVzOiBEYXRhRnJhbWVbXSk6IEVycm9yIHwgdW5kZWZpbmVkIHtcbiAgY29uc3Qgbm90aWNlcyA9IHNlcmllc1swXT8ubWV0YT8ubm90aWNlcyA/PyBbXTtcbiAgY29uc3Qgd2FybmluZyA9IG5vdGljZXMuZmluZCgobm90aWNlKSA9PiBub3RpY2Uuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJyk/LnRleHQ7XG5cbiAgcmV0dXJuIHdhcm5pbmcgPyBuZXcgRXJyb3Iod2FybmluZykgOiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCB0eXBlIFRocmVzaG9sZERlZmluaXRpb24gPSB7XG4gIGNvbmZpZzogVGhyZXNob2xkc0NvbmZpZztcbiAgbW9kZTogR3JhcGhUcmVzaG9sZHNTdHlsZU1vZGU7XG59O1xuXG5leHBvcnQgdHlwZSBUaHJlc2hvbGREZWZpbml0aW9ucyA9IFJlY29yZDxzdHJpbmcsIFRocmVzaG9sZERlZmluaXRpb24+O1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCByZXRyaWV2ZSB0aHJlc2hvbGQgZGVmaW5pdGlvbnMgZm9yIHRoZSBnaXZlbiBhcnJheSBvZiBkYXRhIGFuZCBleHByZXNzaW9uIHF1ZXJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaHJlc2hvbGRzRm9yUXVlcmllcyhxdWVyaWVzOiBBbGVydFF1ZXJ5W10pIHtcbiAgY29uc3QgdGhyZXNob2xkczogVGhyZXNob2xkRGVmaW5pdGlvbnMgPSB7fTtcbiAgY29uc3QgU1VQUE9SVEVEX0VYUFJFU1NJT05fVFlQRVMgPSBbRXhwcmVzc2lvblF1ZXJ5VHlwZS50aHJlc2hvbGQsIEV4cHJlc3Npb25RdWVyeVR5cGUuY2xhc3NpY107XG5cbiAgZm9yIChjb25zdCBxdWVyeSBvZiBxdWVyaWVzKSB7XG4gICAgaWYgKCFpc0V4cHJlc3Npb25RdWVyeShxdWVyeS5tb2RlbCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGN1cnJlbnRseSBvbmx5IHN1cHBvcnRpbmcgXCJ0aHJlc2hvbGRcIiAmIFwiY2xhc3NpY19jb25kaXRpb25cIiBleHByZXNzaW9uc1xuICAgIGlmICghU1VQUE9SVEVEX0VYUFJFU1NJT05fVFlQRVMuaW5jbHVkZXMocXVlcnkubW9kZWwudHlwZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmICghQXJyYXkuaXNBcnJheShxdWVyeS5tb2RlbC5jb25kaXRpb25zKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gaWYgYW55IG9mIHRoZSBjb25kaXRpb25zIGFyZSBhIFwicmFuZ2VcIiB3ZSBzd2l0Y2ggdG8gYW4gXCJhcmVhXCIgdGhyZXNob2xkIHZpZXcgYW5kIGlnbm9yZSBzaW5nbGUgdGhyZXNob2xkIHZhbHVlc1xuICAgIC8vIHRoZSB0aW1lIHNlcmllcyBwYW5lbCBkb2VzIG5vdCBzdXBwb3J0IGJvdGguXG4gICAgY29uc3QgaGFzUmFuZ2VUaHJlc2hvbGQgPSBxdWVyeS5tb2RlbC5jb25kaXRpb25zLnNvbWUoaXNSYW5nZUNvbmRpdGlvbik7XG5cbiAgICBxdWVyeS5tb2RlbC5jb25kaXRpb25zLmZvckVhY2goKGNvbmRpdGlvbikgPT4ge1xuICAgICAgY29uc3QgdGhyZXNob2xkID0gY29uZGl0aW9uLmV2YWx1YXRvci5wYXJhbXM7XG5cbiAgICAgIC8vIFwiY2xhc3NpY19jb25kaXRpb25zXCIgdXNlIGBjb25kaXRpb24ucXVlcnkucGFyYW1zW11gIGFuZCBcInRocmVzaG9sZFwiIHVzZXMgYHF1ZXJ5Lm1vZGVsLmV4cHJlc3Npb25gXG4gICAgICBjb25zdCByZWZJZCA9IGNvbmRpdGlvbi5xdWVyeT8ucGFyYW1zWzBdID8/IHF1ZXJ5Lm1vZGVsLmV4cHJlc3Npb247XG5cbiAgICAgIC8vIGlmIGFuIGV4cHJlc3Npb24gaGFzbid0IGJlZW4gbGlua2VkIHRvIGEgZGF0YSBxdWVyeSB5ZXQsIGl0IHdvbid0IGhhdmUgYSByZWZJZFxuICAgICAgaWYgKCFyZWZJZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzUmFuZ2VUaHJlc2hvbGQgPSBpc1JhbmdlQ29uZGl0aW9uKGNvbmRpdGlvbik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGNyZWF0ZSBhIERBRyBzbyB3ZSBjYW4gZmluZCB0aGUgb3JpZ2luIG9mIHRoZSBjdXJyZW50IGV4cHJlc3Npb25cbiAgICAgICAgY29uc3QgZ3JhcGggPSBjcmVhdGVEYWdGcm9tUXVlcmllcyhxdWVyaWVzKTtcblxuICAgICAgICBjb25zdCBvcmlnaW5SZWZJRHMgPSBnZXRPcmlnaW5PZlJlZklkKHJlZklkLCBncmFwaCk7XG4gICAgICAgIGNvbnN0IG9yaWdpblF1ZXJpZXMgPSBxdWVyaWVzLmZpbHRlcigocXVlcnkpID0+IG9yaWdpblJlZklEcy5pbmNsdWRlcyhxdWVyeS5yZWZJZCkpO1xuXG4gICAgICAgIG9yaWdpblF1ZXJpZXMuZm9yRWFjaCgob3JpZ2luUXVlcnkpID0+IHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5SZWZJRCA9IG9yaWdpblF1ZXJ5LnJlZklkO1xuXG4gICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIG9yaWdpbiBpcyBhIGRhdGEgcXVlcnlcbiAgICAgICAgICBjb25zdCBvcmlnaW5Jc0RhdGFRdWVyeSA9ICFpc0V4cHJlc3Npb25RdWVyeShvcmlnaW5RdWVyeT8ubW9kZWwpO1xuXG4gICAgICAgICAgLy8gaWYgeWVzLCBhZGQgdGhyZXNob2xkIGNvbmZpZyB0byB0aGUgcmVmSWQgb2YgdGhlIGRhdGEgUXVlcnlcbiAgICAgICAgICBjb25zdCBoYXNWYWxpZE9yaWdpbiA9IEJvb2xlYW4ob3JpZ2luSXNEYXRhUXVlcnkgJiYgb3JpZ2luUmVmSUQpO1xuXG4gICAgICAgICAgLy8gY3JlYXRlIHRoZSBpbml0aWFsIGRhdGEgc3RydWN0dXJlIGZvciB0aGlzIG9yaWdpbiByZWZJZFxuICAgICAgICAgIGlmIChvcmlnaW5SZWZJRCAmJiAhdGhyZXNob2xkc1tvcmlnaW5SZWZJRF0pIHtcbiAgICAgICAgICAgIHRocmVzaG9sZHNbb3JpZ2luUmVmSURdID0ge1xuICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICBtb2RlOiBUaHJlc2hvbGRzTW9kZS5BYnNvbHV0ZSxcbiAgICAgICAgICAgICAgICBzdGVwczogW10sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG1vZGU6IEdyYXBoVHJlc2hvbGRzU3R5bGVNb2RlLkxpbmUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcmlnaW5SZWZJRCAmJiBoYXNWYWxpZE9yaWdpbiAmJiAhaXNSYW5nZVRocmVzaG9sZCAmJiAhaGFzUmFuZ2VUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGFwcGVuZFNpbmdsZVRocmVzaG9sZChvcmlnaW5SZWZJRCwgdGhyZXNob2xkWzBdKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG9yaWdpblJlZklEICYmIGhhc1ZhbGlkT3JpZ2luICYmIGlzUmFuZ2VUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGFwcGVuZFJhbmdlVGhyZXNob2xkKG9yaWdpblJlZklELCB0aHJlc2hvbGQsIGNvbmRpdGlvbi5ldmFsdWF0b3IudHlwZSk7XG4gICAgICAgICAgICB0aHJlc2hvbGRzW29yaWdpblJlZklEXS5tb2RlID0gR3JhcGhUcmVzaG9sZHNTdHlsZU1vZGUuTGluZUFuZEFyZWE7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgdGhyZXNob2xkcycsIGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFwcGVuZFNpbmdsZVRocmVzaG9sZChyZWZJZDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhyZXNob2xkc1tyZWZJZF0uY29uZmlnLnN0ZXBzLnB1c2goXG4gICAgICAuLi5bXG4gICAgICAgIHtcbiAgICAgICAgICB2YWx1ZTogLUluZmluaXR5LFxuICAgICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgIGNvbG9yOiBjb25maWcudGhlbWUyLmNvbG9ycy5lcnJvci5tYWluLFxuICAgICAgICB9LFxuICAgICAgXVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBhcHBlbmRSYW5nZVRocmVzaG9sZChyZWZJZDogc3RyaW5nLCB2YWx1ZXM6IG51bWJlcltdLCB0eXBlOiBFdmFsRnVuY3Rpb24pOiB2b2lkIHtcbiAgICBpZiAodHlwZSA9PT0gRXZhbEZ1bmN0aW9uLklzV2l0aGluUmFuZ2UpIHtcbiAgICAgIHRocmVzaG9sZHNbcmVmSWRdLmNvbmZpZy5zdGVwcy5wdXNoKFxuICAgICAgICAuLi5bXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IC1JbmZpbml0eSxcbiAgICAgICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlc1swXSxcbiAgICAgICAgICAgIGNvbG9yOiBjb25maWcudGhlbWUyLmNvbG9ycy5lcnJvci5tYWluLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlc1sxXSxcbiAgICAgICAgICAgIGNvbG9yOiBjb25maWcudGhlbWUyLmNvbG9ycy5lcnJvci5tYWluLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlc1sxXSxcbiAgICAgICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09IEV2YWxGdW5jdGlvbi5Jc091dHNpZGVSYW5nZSkge1xuICAgICAgdGhyZXNob2xkc1tyZWZJZF0uY29uZmlnLnN0ZXBzLnB1c2goXG4gICAgICAgIC4uLltcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogLUluZmluaXR5LFxuICAgICAgICAgICAgY29sb3I6IGNvbmZpZy50aGVtZTIuY29sb3JzLmVycm9yLm1haW4sXG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyB3ZSBoYXZlIHRvIGR1cGxpY2F0ZSB0aGlzIHZhbHVlLCBvciB0aGUgZ3JhcGggd2lsbCBub3QgZGlzcGxheSB0aGUgaGFuZGxlIGluIHRoZSByaWdodCBjb2xvclxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNbMF0sXG4gICAgICAgICAgICBjb2xvcjogY29uZmlnLnRoZW1lMi5jb2xvcnMuZXJyb3IubWFpbixcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNbMF0sXG4gICAgICAgICAgICBjb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNbMV0sXG4gICAgICAgICAgICBjb2xvcjogY29uZmlnLnRoZW1lMi5jb2xvcnMuZXJyb3IubWFpbixcbiAgICAgICAgICB9LFxuICAgICAgICBdXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIG5vdyBhbHNvIHNvcnQgdGhlIHRocmVzaG9sZCB2YWx1ZXMsIGlmIHdlIGRvbid0IHRoZW4gdGhleSB3aWxsIGxvb2sgd2VpcmQgaW4gdGhlIHRpbWUgc2VyaWVzIHBhbmVsXG4gICAgLy8gVE9ETyB0aGlzIGRvZXNuJ3Qgd29yayBmb3IgbmVnYXRpdmUgdmFsdWVzIGZvciBub3csIHRob3NlIG5lZWQgdG8gYmUgc29ydGVkIGludmVyc2VcbiAgICB0aHJlc2hvbGRzW3JlZklkXS5jb25maWcuc3RlcHMuc29ydCgoYSwgYikgPT4gYS52YWx1ZSAtIGIudmFsdWUpO1xuXG4gICAgLy8gYWxzbyBtYWtlIHN1cmUgd2UgcmVtb3ZlIGFueSBcInVuZGVmaW5lZFwiIHZhbHVlcyBmcm9tIG91ciBzdGVwcyBpbiBjYXNlIHRoZSB0aHJlc2hvbGQgY29uZmlnIGlzIGluY29tcGxldGVcbiAgICB0aHJlc2hvbGRzW3JlZklkXS5jb25maWcuc3RlcHMgPSB0aHJlc2hvbGRzW3JlZklkXS5jb25maWcuc3RlcHMuZmlsdGVyKChzdGVwKSA9PiBzdGVwLnZhbHVlICE9PSB1bmRlZmluZWQpO1xuICB9XG5cbiAgcmV0dXJuIHRocmVzaG9sZHM7XG59XG5cbmZ1bmN0aW9uIGlzUmFuZ2VDb25kaXRpb24oY29uZGl0aW9uOiBDbGFzc2ljQ29uZGl0aW9uKSB7XG4gIHJldHVybiAoXG4gICAgY29uZGl0aW9uLmV2YWx1YXRvci50eXBlID09PSBFdmFsRnVuY3Rpb24uSXNXaXRoaW5SYW5nZSB8fCBjb25kaXRpb24uZXZhbHVhdG9yLnR5cGUgPT09IEV2YWxGdW5jdGlvbi5Jc091dHNpZGVSYW5nZVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhdHVzTWVzc2FnZShkYXRhOiBQYW5lbERhdGEpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCBnZW5lcmljRXJyb3JNZXNzYWdlID0gJ0ZhaWxlZCB0byBmZXRjaCBkYXRhJztcbiAgaWYgKGRhdGEuc3RhdGUgIT09IExvYWRpbmdTdGF0ZS5FcnJvcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGVycm9ycyA9IGRhdGEuZXJyb3JzO1xuICBpZiAoZXJyb3JzPy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZXJyb3JzLm1hcCgoZXJyb3IpID0+IGVycm9yLm1lc3NhZ2UgPz8gZ2VuZXJpY0Vycm9yTWVzc2FnZSkuam9pbignLCAnKTtcbiAgfVxuXG4gIHJldHVybiBkYXRhLmVycm9yPy5tZXNzYWdlID8/IGdlbmVyaWNFcnJvck1lc3NhZ2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGVSb3V0ZVBhcmFtVG9SdWxlVHlwZShwYXJhbSA9ICcnKTogUnVsZUZvcm1UeXBlIHtcbiAgaWYgKHBhcmFtID09PSAncmVjb3JkaW5nJykge1xuICAgIHJldHVybiBSdWxlRm9ybVR5cGUuY2xvdWRSZWNvcmRpbmc7XG4gIH1cblxuICByZXR1cm4gUnVsZUZvcm1UeXBlLmdyYWZhbmE7XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBmaW5kcyB3aGF0IHJlZklkcyBoYXZlIGJlZW4gdXBkYXRlZCBnaXZlbiB0aGUgcHJldmlvdXMgQXJyYXkgb2YgcXVlcmllcyBhbmQgYW4gQXJyYXkgb2YgdXBkYXRlZCBkYXRhIHF1ZXJpZXMuXG4gKiBBbGwgZXhwcmVzc2lvbiBxdWVyaWVzIGFyZSBkaXNjYXJkZWQgZnJvbSB0aGUgYXJyYXlzLCBzaW5jZSB3ZSBoYXZlIHNlcGFyYXRlIGhhbmRsZXJzIGZvciB0aG9zZSAoc2VlIFwib25VcGRhdGVSZWZJZFwiKSBvZiB0aGUgRXhwcmVzc2lvbkVkaXRvclxuICpcbiAqIFRoaXMgY29kZSBhc3N1bWVzIG5vdCBtb3JlIHRoYW4gMSBxdWVyeSByZWZJZCBoYXMgY2hhbmdlZCBwZXIgXCJvbkNoYW5nZVF1ZXJpZXNcIixcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRSZW5hbWVkRGF0YVF1ZXJ5UmVmZXJlbmNlcyhcbiAgcHJldmlvdXNRdWVyaWVzOiBBbGVydFF1ZXJ5W10sXG4gIHVwZGF0ZWRRdWVyaWVzOiBBbGVydFF1ZXJ5W11cbik6IFtzdHJpbmcsIHN0cmluZ10ge1xuICBjb25zdCB1cGRhdGVkRGF0YVF1ZXJpZXMgPSB1cGRhdGVkUXVlcmllc1xuICAgIC5maWx0ZXIoKHF1ZXJ5KSA9PiAhaXNFeHByZXNzaW9uUXVlcnkocXVlcnkubW9kZWwpKVxuICAgIC5tYXAoKHF1ZXJ5KSA9PiBxdWVyeS5yZWZJZCk7XG4gIGNvbnN0IHByZXZpb3VzRGF0YVF1ZXJpZXMgPSBwcmV2aW91c1F1ZXJpZXNcbiAgICAuZmlsdGVyKChxdWVyeSkgPT4gIWlzRXhwcmVzc2lvblF1ZXJ5KHF1ZXJ5Lm1vZGVsKSlcbiAgICAubWFwKChxdWVyeSkgPT4gcXVlcnkucmVmSWQpO1xuXG4gIC8vIGdpdmVuIHRoZSBmb2xsb3dpbmcgdHdvIGFycmF5c1xuICAvLyBbJ0EnLCAnQicsICdDJ10gYW5kIFsnRk9PJywgJ0InICdDJ11cbiAgLy8gdGhlIFwieG9yXCIgZnVuY3Rpb24gd2lsbCByZXR1cm4gWydBJywgJ0ZPTyddIGJlY2F1c2UgdGhvc2UgYXJlIG5vdCBpbiBib3RoIGFycmF5c1xuICBjb25zdCBbb2xkUmVmSWQsIG5ld1JlZklkXSA9IHhvcihwcmV2aW91c0RhdGFRdWVyaWVzLCB1cGRhdGVkRGF0YVF1ZXJpZXMpO1xuXG4gIHJldHVybiBbb2xkUmVmSWQsIG5ld1JlZklkXTtcbn1cbiJdLCJuYW1lcyI6WyJxdWVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rule-editor/util.ts\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rule-viewer/RuleViewer.v1.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RuleViewer: () => (/* binding */ RuleViewer),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(\"./.yarn/cache/immer-npm-10.0.2-c5dc19bd45-525a3b1421.zip/node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useToggle.js\");\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useObservable.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/data.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/backendSrv.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Alert/Alert.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/LoadingPlaceholder/LoadingPlaceholder.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Layout/Layout.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Collapse/Collapse.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/IconButton/IconButton.tsx\");\n/* harmony import */ var _core_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/constants.ts\");\n/* harmony import */ var _GrafanaRuleQueryViewer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/alerting/unified/GrafanaRuleQueryViewer.tsx\");\n/* harmony import */ var _hooks_useAlertQueriesStatus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/alerting/unified/hooks/useAlertQueriesStatus.ts\");\n/* harmony import */ var _hooks_useCombinedRule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/alerting/unified/hooks/useCombinedRule.ts\");\n/* harmony import */ var _state_AlertingQueryRunner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/features/alerting/unified/state/AlertingQueryRunner.ts\");\n/* harmony import */ var _utils_annotations__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/annotations.tsx\");\n/* harmony import */ var _utils_datasource__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/datasource.ts\");\n/* harmony import */ var _utils_query__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/query.ts\");\n/* harmony import */ var _utils_rule_id__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/rule-id.ts\");\n/* harmony import */ var _utils_rules__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/rules.ts\");\n/* harmony import */ var _AlertLabels__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./public/app/features/alerting/unified/components/AlertLabels.tsx\");\n/* harmony import */ var _DetailsField__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./public/app/features/alerting/unified/components/DetailsField.tsx\");\n/* harmony import */ var _Provisioning__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./public/app/features/alerting/unified/components/Provisioning.tsx\");\n/* harmony import */ var _rule_viewer_RuleViewerLayout__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rule-viewer/RuleViewerLayout.tsx\");\n/* harmony import */ var _rules_RuleDetailsActionButtons__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/RuleDetailsActionButtons.tsx\");\n/* harmony import */ var _rules_RuleDetailsAnnotations__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/RuleDetailsAnnotations.tsx\");\n/* harmony import */ var _rules_RuleDetailsDataSources__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/RuleDetailsDataSources.tsx\");\n/* harmony import */ var _rules_RuleDetailsExpression__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/RuleDetailsExpression.tsx\");\n/* harmony import */ var _rules_RuleDetailsFederatedSources__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/RuleDetailsFederatedSources.tsx\");\n/* harmony import */ var _rules_RuleDetailsMatchingInstances__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/RuleDetailsMatchingInstances.tsx\");\n/* harmony import */ var _rules_RuleHealth__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/RuleHealth.tsx\");\n/* harmony import */ var _rules_RuleState__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/RuleState.tsx\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst errorMessage = \"Could not find data source for rule\";\nconst errorTitle = \"Could not view rule\";\nconst pageTitle = \"View rule\";\nfunction RuleViewer({ match }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_24__.useStyles2)(getStyles);\n  const [expandQuery, setExpandQuery] = (0,react_use__WEBPACK_IMPORTED_MODULE_25__[\"default\"])(false);\n  const { id } = match.params;\n  const identifier = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (!id) {\n      throw new Error(\"Rule ID is required\");\n    }\n    return _utils_rule_id__WEBPACK_IMPORTED_MODULE_10__.parse(id, true);\n  }, [id]);\n  const { loading, error, result: rule } = (0,_hooks_useCombinedRule__WEBPACK_IMPORTED_MODULE_5__.useCombinedRule)({ ruleIdentifier: identifier });\n  const runner = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => new _state_AlertingQueryRunner__WEBPACK_IMPORTED_MODULE_6__.AlertingQueryRunner(), []);\n  const data = (0,react_use__WEBPACK_IMPORTED_MODULE_26__[\"default\"])(runner.get());\n  const queries = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (0,_utils_query__WEBPACK_IMPORTED_MODULE_9__.alertRuleToQueries)(rule), [rule]);\n  const annotations = (0,_utils_annotations__WEBPACK_IMPORTED_MODULE_7__.useCleanAnnotations)(rule?.annotations || {});\n  const [evaluationTimeRanges, setEvaluationTimeRanges] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n  const { allDataSourcesAvailable } = (0,_hooks_useAlertQueriesStatus__WEBPACK_IMPORTED_MODULE_4__.useAlertQueriesStatus)(queries);\n  const onRunQueries = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (queries.length > 0 && allDataSourcesAvailable) {\n      const evalCustomizedQueries = queries.map((q) => ({\n        ...q,\n        relativeTimeRange: evaluationTimeRanges[q.refId] ?? q.relativeTimeRange\n      }));\n      runner.run(evalCustomizedQueries);\n    }\n  }, [queries, evaluationTimeRanges, runner, allDataSourcesAvailable]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const alertQueries = (0,_utils_query__WEBPACK_IMPORTED_MODULE_9__.alertRuleToQueries)(rule);\n    const defaultEvalTimeRanges = Object.fromEntries(\n      alertQueries.map((q) => [q.refId, q.relativeTimeRange ?? { from: 0, to: 0 }])\n    );\n    setEvaluationTimeRanges(defaultEvalTimeRanges);\n  }, [rule]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (allDataSourcesAvailable && expandQuery) {\n      onRunQueries();\n    }\n  }, [onRunQueries, allDataSourcesAvailable, expandQuery]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    return () => runner.destroy();\n  }, [runner]);\n  const onQueryTimeRangeChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (refId, timeRange) => {\n      const newEvalTimeRanges = (0,immer__WEBPACK_IMPORTED_MODULE_27__.produce)(evaluationTimeRanges, (draft) => {\n        draft[refId] = timeRange;\n      });\n      setEvaluationTimeRanges(newEvalTimeRanges);\n    },\n    [evaluationTimeRanges, setEvaluationTimeRanges]\n  );\n  if (!identifier?.ruleSourceName) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rule_viewer_RuleViewerLayout__WEBPACK_IMPORTED_MODULE_15__.RuleViewerLayout, { title: pageTitle }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_28__.Alert, { title: errorTitle }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"details\", { className: styles.errorMessage }, errorMessage)));\n  }\n  const rulesSource = (0,_utils_datasource__WEBPACK_IMPORTED_MODULE_8__.getRulesSourceByName)(identifier.ruleSourceName);\n  if (loading) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rule_viewer_RuleViewerLayout__WEBPACK_IMPORTED_MODULE_15__.RuleViewerLayout, { title: pageTitle }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_29__.LoadingPlaceholder, { text: \"Loading rule...\" }));\n  }\n  if (error || !rulesSource) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_28__.Alert, { title: errorTitle }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"details\", { className: styles.errorMessage }, (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_30__.isFetchError)(error) ? error.message : errorMessage, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"br\", null)));\n  }\n  if (!rule) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rule_viewer_RuleViewerLayout__WEBPACK_IMPORTED_MODULE_15__.RuleViewerLayout, { title: pageTitle }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", null, \"Rule could not be found.\"));\n  }\n  const isFederatedRule = (0,_utils_rules__WEBPACK_IMPORTED_MODULE_11__.isFederatedRuleGroup)(rule.group);\n  const isProvisioned = (0,_utils_rules__WEBPACK_IMPORTED_MODULE_11__.isGrafanaRulerRule)(rule.rulerRule) && Boolean(rule.rulerRule.grafana_alert.provenance);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, isFederatedRule && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_28__.Alert, { severity: \"info\", title: \"This rule is part of a federated rule group.\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_31__.VerticalGroup, null, \"Federated rule groups are currently an experimental feature.\", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_32__.Button, { fill: \"text\", icon: \"book\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"a\", { href: \"https://grafana.com/docs/metrics-enterprise/latest/tenant-management/tenant-federation/#cross-tenant-alerting-and-recording-rule-federation\" }, \"Read documentation\")))), isProvisioned && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_Provisioning__WEBPACK_IMPORTED_MODULE_14__.ProvisioningAlert, { resource: _Provisioning__WEBPACK_IMPORTED_MODULE_14__.ProvisionedResource.AlertRule }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rule_viewer_RuleViewerLayout__WEBPACK_IMPORTED_MODULE_15__.RuleViewerLayoutContent, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_33__.Stack, { direction: \"row\", alignItems: \"center\", wrap: false, gap: 1 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_34__.Icon, { name: \"bell\", size: \"lg\" }), \" \", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { className: styles.title }, rule.name)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rules_RuleState__WEBPACK_IMPORTED_MODULE_23__.RuleState, { rule, isCreating: false, isDeleting: false }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rules_RuleDetailsActionButtons__WEBPACK_IMPORTED_MODULE_16__.RuleDetailsActionButtons, { rule, rulesSource, isViewMode: true })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.details }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.leftSide }, rule.promRule && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_DetailsField__WEBPACK_IMPORTED_MODULE_13__.DetailsField, { label: \"Health\", horizontal: true }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rules_RuleHealth__WEBPACK_IMPORTED_MODULE_22__.RuleHealth, { rule: rule.promRule })), !!rule.labels && !!Object.keys(rule.labels).length && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_DetailsField__WEBPACK_IMPORTED_MODULE_13__.DetailsField, { label: \"Labels\", horizontal: true }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_AlertLabels__WEBPACK_IMPORTED_MODULE_12__.AlertLabels, { labels: rule.labels })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rules_RuleDetailsExpression__WEBPACK_IMPORTED_MODULE_19__.RuleDetailsExpression, { rulesSource, rule, annotations }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rules_RuleDetailsAnnotations__WEBPACK_IMPORTED_MODULE_17__.RuleDetailsAnnotations, { annotations })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.rightSide }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rules_RuleDetailsDataSources__WEBPACK_IMPORTED_MODULE_18__.RuleDetailsDataSources, { rule, rulesSource }), isFederatedRule && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rules_RuleDetailsFederatedSources__WEBPACK_IMPORTED_MODULE_20__.RuleDetailsFederatedSources, { group: rule.group }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_DetailsField__WEBPACK_IMPORTED_MODULE_13__.DetailsField, { label: \"Namespace / Group\", className: styles.rightSideDetails }, rule.namespace.name, \" / \", rule.group.name), (0,_utils_rules__WEBPACK_IMPORTED_MODULE_11__.isGrafanaRulerRule)(rule.rulerRule) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(GrafanaRuleUID, { rule: rule.rulerRule.grafana_alert }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _rules_RuleDetailsMatchingInstances__WEBPACK_IMPORTED_MODULE_21__.RuleDetailsMatchingInstances,\n    {\n      rule,\n      pagination: { itemsPerPage: _core_constants__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_PER_PAGE_PAGINATION },\n      enableFiltering: true\n    }\n  ))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_35__.Collapse,\n    {\n      label: \"Query & Results\",\n      isOpen: expandQuery,\n      onToggle: setExpandQuery,\n      loading: data && isLoading(data),\n      collapsible: true,\n      className: styles.collapse\n    },\n    (0,_utils_rules__WEBPACK_IMPORTED_MODULE_11__.isGrafanaRulerRule)(rule.rulerRule) && !isFederatedRule && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n      _GrafanaRuleQueryViewer__WEBPACK_IMPORTED_MODULE_3__.GrafanaRuleQueryViewer,\n      {\n        condition: rule.rulerRule.grafana_alert.condition,\n        queries,\n        evalDataByQuery: data,\n        evalTimeRanges: evaluationTimeRanges,\n        onTimeRangeChange: onQueryTimeRangeChange\n      }\n    ),\n    !(0,_utils_rules__WEBPACK_IMPORTED_MODULE_11__.isGrafanaRulerRule)(rule.rulerRule) && !isFederatedRule && data && Object.keys(data).length > 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.queries }, queries.map((query) => {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n        _GrafanaRuleQueryViewer__WEBPACK_IMPORTED_MODULE_3__.QueryPreview,\n        {\n          key: query.refId,\n          refId: query.refId,\n          model: query.model,\n          dataSource: Object.values(_grafana_runtime__WEBPACK_IMPORTED_MODULE_36__.config.datasources).find((ds) => ds.uid === query.datasourceUid),\n          queryData: data[query.refId],\n          relativeTimeRange: query.relativeTimeRange,\n          evalTimeRange: evaluationTimeRanges[query.refId],\n          onEvalTimeRangeChange: (timeRange) => onQueryTimeRangeChange(query.refId, timeRange),\n          isAlertCondition: false\n        }\n      );\n    })),\n    !isFederatedRule && !allDataSourcesAvailable && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_28__.Alert, { title: \"Query not available\", severity: \"warning\", className: styles.queryWarning }, \"Cannot display the query preview. Some of the data sources used in the queries are not available.\")\n  ));\n}\nfunction GrafanaRuleUID({ rule }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_24__.useStyles2)(getStyles);\n  const copyUID = () => navigator.clipboard && navigator.clipboard.writeText(rule.uid);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_DetailsField__WEBPACK_IMPORTED_MODULE_13__.DetailsField, { label: \"Rule UID\", childrenWrapperClassName: styles.ruleUid }, rule.uid, \" \", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_37__.IconButton, { name: \"copy\", onClick: copyUID, tooltip: \"Copy rule\" }));\n}\nfunction isLoading(data) {\n  return !!Object.values(data).find((d) => d.state === _grafana_data__WEBPACK_IMPORTED_MODULE_38__.LoadingState.Loading);\n}\nconst getStyles = (theme) => {\n  return {\n    errorMessage: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      white-space: pre-wrap;\n    `,\n    queries: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      height: 100%;\n      width: 100%;\n    `,\n    collapse: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-top: ${theme.spacing(2)};\n      border-color: ${theme.colors.border.weak};\n      border-radius: ${theme.shape.borderRadius()};\n    `,\n    queriesTitle: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      padding: ${theme.spacing(2, 0.5)};\n      font-size: ${theme.typography.h5.fontSize};\n      font-weight: ${theme.typography.fontWeightBold};\n      font-family: ${theme.typography.h5.fontFamily};\n    `,\n    query: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      border-bottom: 1px solid ${theme.colors.border.medium};\n      padding: ${theme.spacing(2)};\n    `,\n    queryWarning: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin: ${theme.spacing(4, 0)};\n    `,\n    title: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      font-size: ${theme.typography.h4.fontSize};\n      font-weight: ${theme.typography.fontWeightBold};\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    `,\n    details: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      flex-direction: row;\n      gap: ${theme.spacing(4)};\n    `,\n    leftSide: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      flex: 1;\n      overflow: hidden;\n    `,\n    rightSide: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      padding-right: ${theme.spacing(3)};\n\n      max-width: 360px;\n      word-break: break-all;\n      overflow: hidden;\n    `,\n    rightSideDetails: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      & > div:first-child {\n        width: auto;\n      }\n    `,\n    labels: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      justify-content: flex-start;\n    `,\n    ruleUid: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      align-items: center;\n      gap: ${theme.spacing(1)};\n    `\n  };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RuleViewer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLXZpZXdlci9SdWxlVmlld2VyLnYxLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ0k7QUFDeUM7QUFDeEI7QUFFaUM7QUFDcEQ7QUFDZTtBQUNvRTtBQUc3RDtBQUVTO0FBQ2Y7QUFDTjtBQUNJO0FBQ0E7QUFDQztBQUNGO0FBQ1g7QUFDaUM7QUFDN0I7QUFDQztBQUMwQjtBQUNHO0FBQ2pCO0FBQ0Y7QUFDQTtBQUNEO0FBQ007QUFDQztBQUNsQjtBQUNEO0FBSTFCLE1BQU0sZUFBZTtBQUNyQixNQUFNLGFBQWE7QUFDbkIsTUFBTSxZQUFZO0FBRVgsU0FBUyxXQUFXLEVBQUUsTUFBTSxHQUFvQjtBQUNyRCxRQUFNLFNBQVMsd0RBQVUsQ0FBQyxTQUFTO0FBQ25DLFFBQU0sQ0FBQyxhQUFhLGNBQWMsSUFBSSxzREFBUyxDQUFDLEtBQUs7QUFFckQsUUFBTSxFQUFFLEdBQUcsSUFBSSxNQUFNO0FBQ3JCLFFBQU0sYUFBYSw4Q0FBTyxDQUFDLE1BQU07QUFDL0IsUUFBSSxDQUFDLElBQUk7QUFDUCxZQUFNLElBQUksTUFBTSxxQkFBcUI7QUFBQSxJQUN2QztBQUVBLFdBQU8sa0RBQVksQ0FBQyxJQUFJLElBQUk7QUFBQSxFQUM5QixHQUFHLENBQUMsRUFBRSxDQUFDO0FBRVAsUUFBTSxFQUFFLFNBQVMsT0FBTyxRQUFRLEtBQUssSUFBSSx1RUFBZSxDQUFDLEVBQUUsZ0JBQWdCLFdBQVcsQ0FBQztBQUV2RixRQUFNLFNBQVMsOENBQU8sQ0FBQyxNQUFNLElBQUksMkVBQW1CLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDMUQsUUFBTSxPQUFPLHNEQUFhLENBQUMsT0FBTyxJQUFJLENBQUM7QUFDdkMsUUFBTSxVQUFVLDhDQUFPLENBQUMsTUFBTSxnRUFBa0IsQ0FBQyxJQUFJLEdBQUcsQ0FB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QVEsR0FBRyxHQUFHO0FBQUEsbUJBQ2xCLE1BQU0sV0FBVyxHQUFHO0FBQUEscUJBQ2xCLE1BQU0sV0FBVztBQUFBLHFCQUNqQixNQUFNLFdBQVcsR0FBRztBQUFBO0FBQUEsSUFFckMsT0FBTyxpREFBRztBQUFILGlDQUNzQixNQUFNLE9BQU8sT0FBTztBQUFBLGlCQUNwQyxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUEsSUFFNUIsY0FBYyxpREFBRztBQUFILGdCQUNGLE1BQU0sUUFBUSxHQUFHLENBQUM7QUFBQTtBQUFBLElBRTlCLE9BQU8saURBQUc7QUFBSCxtQkFDUSxNQUFNLFdBQVcsR0FBRztBQUFBLHFCQUNsQixNQUFNLFdBQVc7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBS2xDLFNBQVMsaURBQUc7QUFBSDtBQUFBO0FBQUEsYUFHQSxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUEsSUFFeEIsVUFBVSxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBLElBSVYsV0FBVyxpREFBRztBQUFILHVCQUNRLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBTWxDLGtCQUFrQixpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFLbEIsUUFBUSxpREFBRztBQUFIO0FBQUE7QUFBQSxJQUdSLFNBQVMsaURBQUc7QUFBSDtBQUFBO0FBQUEsYUFHQSxNQUFNLFFBQVEsQ0FBQztBQUFBO0FBQUEsRUFFMUI7QUFDRjtBQUVBLGlFQUFlLFVBQVUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLXZpZXdlci9SdWxlVmlld2VyLnYxLnRzeD9mMzM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgeyBwcm9kdWNlIH0gZnJvbSAnaW1tZXInO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlT2JzZXJ2YWJsZSwgdXNlVG9nZ2xlIH0gZnJvbSAncmVhY3QtdXNlJztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiwgTG9hZGluZ1N0YXRlLCBQYW5lbERhdGEsIFJlbGF0aXZlVGltZVJhbmdlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBTdGFjayB9IGZyb20gJ0BncmFmYW5hL2V4cGVyaW1lbnRhbCc7XG5pbXBvcnQgeyBjb25maWcsIGlzRmV0Y2hFcnJvciB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHsgQWxlcnQsIEJ1dHRvbiwgQ29sbGFwc2UsIEljb24sIEljb25CdXR0b24sIExvYWRpbmdQbGFjZWhvbGRlciwgdXNlU3R5bGVzMiwgVmVydGljYWxHcm91cCB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IEdyYWZhbmFSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAnYXBwL2NvcmUvbmF2aWdhdGlvbi90eXBlcyc7XG5cbmltcG9ydCB7IERFRkFVTFRfUEVSX1BBR0VfUEFHSU5BVElPTiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2NvcmUvY29uc3RhbnRzJztcbmltcG9ydCB7IEFsZXJ0UXVlcnksIEdyYWZhbmFSdWxlRGVmaW5pdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3R5cGVzL3VuaWZpZWQtYWxlcnRpbmctZHRvJztcbmltcG9ydCB7IEdyYWZhbmFSdWxlUXVlcnlWaWV3ZXIsIFF1ZXJ5UHJldmlldyB9IGZyb20gJy4uLy4uL0dyYWZhbmFSdWxlUXVlcnlWaWV3ZXInO1xuaW1wb3J0IHsgdXNlQWxlcnRRdWVyaWVzU3RhdHVzIH0gZnJvbSAnLi4vLi4vaG9va3MvdXNlQWxlcnRRdWVyaWVzU3RhdHVzJztcbmltcG9ydCB7IHVzZUNvbWJpbmVkUnVsZSB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZUNvbWJpbmVkUnVsZSc7XG5pbXBvcnQgeyBBbGVydGluZ1F1ZXJ5UnVubmVyIH0gZnJvbSAnLi4vLi4vc3RhdGUvQWxlcnRpbmdRdWVyeVJ1bm5lcic7XG5pbXBvcnQgeyB1c2VDbGVhbkFubm90YXRpb25zIH0gZnJvbSAnLi4vLi4vdXRpbHMvYW5ub3RhdGlvbnMnO1xuaW1wb3J0IHsgZ2V0UnVsZXNTb3VyY2VCeU5hbWUgfSBmcm9tICcuLi8uLi91dGlscy9kYXRhc291cmNlJztcbmltcG9ydCB7IGFsZXJ0UnVsZVRvUXVlcmllcyB9IGZyb20gJy4uLy4uL3V0aWxzL3F1ZXJ5JztcbmltcG9ydCAqIGFzIHJ1bGVJZCBmcm9tICcuLi8uLi91dGlscy9ydWxlLWlkJztcbmltcG9ydCB7IGlzRmVkZXJhdGVkUnVsZUdyb3VwLCBpc0dyYWZhbmFSdWxlclJ1bGUgfSBmcm9tICcuLi8uLi91dGlscy9ydWxlcyc7XG5pbXBvcnQgeyBBbGVydExhYmVscyB9IGZyb20gJy4uL0FsZXJ0TGFiZWxzJztcbmltcG9ydCB7IERldGFpbHNGaWVsZCB9IGZyb20gJy4uL0RldGFpbHNGaWVsZCc7XG5pbXBvcnQgeyBQcm92aXNpb25lZFJlc291cmNlLCBQcm92aXNpb25pbmdBbGVydCB9IGZyb20gJy4uL1Byb3Zpc2lvbmluZyc7XG5pbXBvcnQgeyBSdWxlVmlld2VyTGF5b3V0LCBSdWxlVmlld2VyTGF5b3V0Q29udGVudCB9IGZyb20gJy4uL3J1bGUtdmlld2VyL1J1bGVWaWV3ZXJMYXlvdXQnO1xuaW1wb3J0IHsgUnVsZURldGFpbHNBY3Rpb25CdXR0b25zIH0gZnJvbSAnLi4vcnVsZXMvUnVsZURldGFpbHNBY3Rpb25CdXR0b25zJztcbmltcG9ydCB7IFJ1bGVEZXRhaWxzQW5ub3RhdGlvbnMgfSBmcm9tICcuLi9ydWxlcy9SdWxlRGV0YWlsc0Fubm90YXRpb25zJztcbmltcG9ydCB7IFJ1bGVEZXRhaWxzRGF0YVNvdXJjZXMgfSBmcm9tICcuLi9ydWxlcy9SdWxlRGV0YWlsc0RhdGFTb3VyY2VzJztcbmltcG9ydCB7IFJ1bGVEZXRhaWxzRXhwcmVzc2lvbiB9IGZyb20gJy4uL3J1bGVzL1J1bGVEZXRhaWxzRXhwcmVzc2lvbic7XG5pbXBvcnQgeyBSdWxlRGV0YWlsc0ZlZGVyYXRlZFNvdXJjZXMgfSBmcm9tICcuLi9ydWxlcy9SdWxlRGV0YWlsc0ZlZGVyYXRlZFNvdXJjZXMnO1xuaW1wb3J0IHsgUnVsZURldGFpbHNNYXRjaGluZ0luc3RhbmNlcyB9IGZyb20gJy4uL3J1bGVzL1J1bGVEZXRhaWxzTWF0Y2hpbmdJbnN0YW5jZXMnO1xuaW1wb3J0IHsgUnVsZUhlYWx0aCB9IGZyb20gJy4uL3J1bGVzL1J1bGVIZWFsdGgnO1xuaW1wb3J0IHsgUnVsZVN0YXRlIH0gZnJvbSAnLi4vcnVsZXMvUnVsZVN0YXRlJztcblxudHlwZSBSdWxlVmlld2VyUHJvcHMgPSBHcmFmYW5hUm91dGVDb21wb25lbnRQcm9wczx7IGlkPzogc3RyaW5nOyBzb3VyY2VOYW1lPzogc3RyaW5nIH0+O1xuXG5jb25zdCBlcnJvck1lc3NhZ2UgPSAnQ291bGQgbm90IGZpbmQgZGF0YSBzb3VyY2UgZm9yIHJ1bGUnO1xuY29uc3QgZXJyb3JUaXRsZSA9ICdDb3VsZCBub3QgdmlldyBydWxlJztcbmNvbnN0IHBhZ2VUaXRsZSA9ICdWaWV3IHJ1bGUnO1xuXG5leHBvcnQgZnVuY3Rpb24gUnVsZVZpZXdlcih7IG1hdGNoIH06IFJ1bGVWaWV3ZXJQcm9wcykge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG4gIGNvbnN0IFtleHBhbmRRdWVyeSwgc2V0RXhwYW5kUXVlcnldID0gdXNlVG9nZ2xlKGZhbHNlKTtcblxuICBjb25zdCB7IGlkIH0gPSBtYXRjaC5wYXJhbXM7XG4gIGNvbnN0IGlkZW50aWZpZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1J1bGUgSUQgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcnVsZUlkLnBhcnNlKGlkLCB0cnVlKTtcbiAgfSwgW2lkXSk7XG5cbiAgY29uc3QgeyBsb2FkaW5nLCBlcnJvciwgcmVzdWx0OiBydWxlIH0gPSB1c2VDb21iaW5lZFJ1bGUoeyBydWxlSWRlbnRpZmllcjogaWRlbnRpZmllciB9KTtcblxuICBjb25zdCBydW5uZXIgPSB1c2VNZW1vKCgpID0+IG5ldyBBbGVydGluZ1F1ZXJ5UnVubmVyKCksIFtdKTtcbiAgY29uc3QgZGF0YSA9IHVzZU9ic2VydmFibGUocnVubmVyLmdldCgpKTtcbiAgY29uc3QgcXVlcmllcyA9IHVzZU1lbW8oKCkgPT4gYWxlcnRSdWxlVG9RdWVyaWVzKHJ1bGUpLCBbcnVsZV0pO1xuICBjb25zdCBhbm5vdGF0aW9ucyA9IHVzZUNsZWFuQW5ub3RhdGlvbnMocnVsZT8uYW5ub3RhdGlvbnMgfHwge30pO1xuXG4gIGNvbnN0IFtldmFsdWF0aW9uVGltZVJhbmdlcywgc2V0RXZhbHVhdGlvblRpbWVSYW5nZXNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgUmVsYXRpdmVUaW1lUmFuZ2U+Pih7fSk7XG5cbiAgY29uc3QgeyBhbGxEYXRhU291cmNlc0F2YWlsYWJsZSB9ID0gdXNlQWxlcnRRdWVyaWVzU3RhdHVzKHF1ZXJpZXMpO1xuXG4gIGNvbnN0IG9uUnVuUXVlcmllcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAocXVlcmllcy5sZW5ndGggPiAwICYmIGFsbERhdGFTb3VyY2VzQXZhaWxhYmxlKSB7XG4gICAgICBjb25zdCBldmFsQ3VzdG9taXplZFF1ZXJpZXMgPSBxdWVyaWVzLm1hcDxBbGVydFF1ZXJ5PigocSkgPT4gKHtcbiAgICAgICAgLi4ucSxcbiAgICAgICAgcmVsYXRpdmVUaW1lUmFuZ2U6IGV2YWx1YXRpb25UaW1lUmFuZ2VzW3EucmVmSWRdID8/IHEucmVsYXRpdmVUaW1lUmFuZ2UsXG4gICAgICB9KSk7XG5cbiAgICAgIHJ1bm5lci5ydW4oZXZhbEN1c3RvbWl6ZWRRdWVyaWVzKTtcbiAgICB9XG4gIH0sIFtxdWVyaWVzLCBldmFsdWF0aW9uVGltZVJhbmdlcywgcnVubmVyLCBhbGxEYXRhU291cmNlc0F2YWlsYWJsZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgYWxlcnRRdWVyaWVzID0gYWxlcnRSdWxlVG9RdWVyaWVzKHJ1bGUpO1xuICAgIGNvbnN0IGRlZmF1bHRFdmFsVGltZVJhbmdlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIGFsZXJ0UXVlcmllcy5tYXAoKHEpID0+IFtxLnJlZklkLCBxLnJlbGF0aXZlVGltZVJhbmdlID8/IHsgZnJvbTogMCwgdG86IDAgfV0pXG4gICAgKTtcblxuICAgIHNldEV2YWx1YXRpb25UaW1lUmFuZ2VzKGRlZmF1bHRFdmFsVGltZVJhbmdlcyk7XG4gIH0sIFtydWxlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWxsRGF0YVNvdXJjZXNBdmFpbGFibGUgJiYgZXhwYW5kUXVlcnkpIHtcbiAgICAgIG9uUnVuUXVlcmllcygpO1xuICAgIH1cbiAgfSwgW29uUnVuUXVlcmllcywgYWxsRGF0YVNvdXJjZXNBdmFpbGFibGUsIGV4cGFuZFF1ZXJ5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4gcnVubmVyLmRlc3Ryb3koKTtcbiAgfSwgW3J1bm5lcl0pO1xuXG4gIGNvbnN0IG9uUXVlcnlUaW1lUmFuZ2VDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAocmVmSWQ6IHN0cmluZywgdGltZVJhbmdlOiBSZWxhdGl2ZVRpbWVSYW5nZSkgPT4ge1xuICAgICAgY29uc3QgbmV3RXZhbFRpbWVSYW5nZXMgPSBwcm9kdWNlKGV2YWx1YXRpb25UaW1lUmFuZ2VzLCAoZHJhZnQpID0+IHtcbiAgICAgICAgZHJhZnRbcmVmSWRdID0gdGltZVJhbmdlO1xuICAgICAgfSk7XG4gICAgICBzZXRFdmFsdWF0aW9uVGltZVJhbmdlcyhuZXdFdmFsVGltZVJhbmdlcyk7XG4gICAgfSxcbiAgICBbZXZhbHVhdGlvblRpbWVSYW5nZXMsIHNldEV2YWx1YXRpb25UaW1lUmFuZ2VzXVxuICApO1xuXG4gIGlmICghaWRlbnRpZmllcj8ucnVsZVNvdXJjZU5hbWUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFJ1bGVWaWV3ZXJMYXlvdXQgdGl0bGU9e3BhZ2VUaXRsZX0+XG4gICAgICAgIDxBbGVydCB0aXRsZT17ZXJyb3JUaXRsZX0+XG4gICAgICAgICAgPGRldGFpbHMgY2xhc3NOYW1lPXtzdHlsZXMuZXJyb3JNZXNzYWdlfT57ZXJyb3JNZXNzYWdlfTwvZGV0YWlscz5cbiAgICAgICAgPC9BbGVydD5cbiAgICAgIDwvUnVsZVZpZXdlckxheW91dD5cbiAgICApO1xuICB9XG5cbiAgY29uc3QgcnVsZXNTb3VyY2UgPSBnZXRSdWxlc1NvdXJjZUJ5TmFtZShpZGVudGlmaWVyLnJ1bGVTb3VyY2VOYW1lKTtcblxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8UnVsZVZpZXdlckxheW91dCB0aXRsZT17cGFnZVRpdGxlfT5cbiAgICAgICAgPExvYWRpbmdQbGFjZWhvbGRlciB0ZXh0PVwiTG9hZGluZyBydWxlLi4uXCIgLz5cbiAgICAgIDwvUnVsZVZpZXdlckxheW91dD5cbiAgICApO1xuICB9XG5cbiAgaWYgKGVycm9yIHx8ICFydWxlc1NvdXJjZSkge1xuICAgIHJldHVybiAoXG4gICAgICA8QWxlcnQgdGl0bGU9e2Vycm9yVGl0bGV9PlxuICAgICAgICA8ZGV0YWlscyBjbGFzc05hbWU9e3N0eWxlcy5lcnJvck1lc3NhZ2V9PlxuICAgICAgICAgIHtpc0ZldGNoRXJyb3IoZXJyb3IpID8gZXJyb3IubWVzc2FnZSA6IGVycm9yTWVzc2FnZX1cbiAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICB7LyogVE9ETyAgRml4IHR5cGVzY3JpcHQgKi99XG4gICAgICAgICAgey8qIHtlcnJvciAmJiBlcnJvcj8uc3RhY2t9ICovfVxuICAgICAgICA8L2RldGFpbHM+XG4gICAgICA8L0FsZXJ0PlxuICAgICk7XG4gIH1cblxuICBpZiAoIXJ1bGUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFJ1bGVWaWV3ZXJMYXlvdXQgdGl0bGU9e3BhZ2VUaXRsZX0+XG4gICAgICAgIDxzcGFuPlJ1bGUgY291bGQgbm90IGJlIGZvdW5kLjwvc3Bhbj5cbiAgICAgIDwvUnVsZVZpZXdlckxheW91dD5cbiAgICApO1xuICB9XG5cbiAgY29uc3QgaXNGZWRlcmF0ZWRSdWxlID0gaXNGZWRlcmF0ZWRSdWxlR3JvdXAocnVsZS5ncm91cCk7XG4gIGNvbnN0IGlzUHJvdmlzaW9uZWQgPSBpc0dyYWZhbmFSdWxlclJ1bGUocnVsZS5ydWxlclJ1bGUpICYmIEJvb2xlYW4ocnVsZS5ydWxlclJ1bGUuZ3JhZmFuYV9hbGVydC5wcm92ZW5hbmNlKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7aXNGZWRlcmF0ZWRSdWxlICYmIChcbiAgICAgICAgPEFsZXJ0IHNldmVyaXR5PVwiaW5mb1wiIHRpdGxlPVwiVGhpcyBydWxlIGlzIHBhcnQgb2YgYSBmZWRlcmF0ZWQgcnVsZSBncm91cC5cIj5cbiAgICAgICAgICA8VmVydGljYWxHcm91cD5cbiAgICAgICAgICAgIEZlZGVyYXRlZCBydWxlIGdyb3VwcyBhcmUgY3VycmVudGx5IGFuIGV4cGVyaW1lbnRhbCBmZWF0dXJlLlxuICAgICAgICAgICAgPEJ1dHRvbiBmaWxsPVwidGV4dFwiIGljb249XCJib29rXCI+XG4gICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dyYWZhbmEuY29tL2RvY3MvbWV0cmljcy1lbnRlcnByaXNlL2xhdGVzdC90ZW5hbnQtbWFuYWdlbWVudC90ZW5hbnQtZmVkZXJhdGlvbi8jY3Jvc3MtdGVuYW50LWFsZXJ0aW5nLWFuZC1yZWNvcmRpbmctcnVsZS1mZWRlcmF0aW9uXCI+XG4gICAgICAgICAgICAgICAgUmVhZCBkb2N1bWVudGF0aW9uXG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvVmVydGljYWxHcm91cD5cbiAgICAgICAgPC9BbGVydD5cbiAgICAgICl9XG4gICAgICB7aXNQcm92aXNpb25lZCAmJiA8UHJvdmlzaW9uaW5nQWxlcnQgcmVzb3VyY2U9e1Byb3Zpc2lvbmVkUmVzb3VyY2UuQWxlcnRSdWxlfSAvPn1cbiAgICAgIDxSdWxlVmlld2VyTGF5b3V0Q29udGVudD5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8U3RhY2sgZGlyZWN0aW9uPVwicm93XCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIHdyYXA9e2ZhbHNlfSBnYXA9ezF9PlxuICAgICAgICAgICAgPEljb24gbmFtZT1cImJlbGxcIiBzaXplPVwibGdcIiAvPiA8c3BhbiBjbGFzc05hbWU9e3N0eWxlcy50aXRsZX0+e3J1bGUubmFtZX08L3NwYW4+XG4gICAgICAgICAgPC9TdGFjaz5cbiAgICAgICAgICA8UnVsZVN0YXRlIHJ1bGU9e3J1bGV9IGlzQ3JlYXRpbmc9e2ZhbHNlfSBpc0RlbGV0aW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8UnVsZURldGFpbHNBY3Rpb25CdXR0b25zIHJ1bGU9e3J1bGV9IHJ1bGVzU291cmNlPXtydWxlc1NvdXJjZX0gaXNWaWV3TW9kZT17dHJ1ZX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZGV0YWlsc30+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sZWZ0U2lkZX0+XG4gICAgICAgICAgICB7cnVsZS5wcm9tUnVsZSAmJiAoXG4gICAgICAgICAgICAgIDxEZXRhaWxzRmllbGQgbGFiZWw9XCJIZWFsdGhcIiBob3Jpem9udGFsPXt0cnVlfT5cbiAgICAgICAgICAgICAgICA8UnVsZUhlYWx0aCBydWxlPXtydWxlLnByb21SdWxlfSAvPlxuICAgICAgICAgICAgICA8L0RldGFpbHNGaWVsZD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7ISFydWxlLmxhYmVscyAmJiAhIU9iamVjdC5rZXlzKHJ1bGUubGFiZWxzKS5sZW5ndGggJiYgKFxuICAgICAgICAgICAgICA8RGV0YWlsc0ZpZWxkIGxhYmVsPVwiTGFiZWxzXCIgaG9yaXpvbnRhbD17dHJ1ZX0+XG4gICAgICAgICAgICAgICAgPEFsZXJ0TGFiZWxzIGxhYmVscz17cnVsZS5sYWJlbHN9IC8+XG4gICAgICAgICAgICAgIDwvRGV0YWlsc0ZpZWxkPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxSdWxlRGV0YWlsc0V4cHJlc3Npb24gcnVsZXNTb3VyY2U9e3J1bGVzU291cmNlfSBydWxlPXtydWxlfSBhbm5vdGF0aW9ucz17YW5ub3RhdGlvbnN9IC8+XG4gICAgICAgICAgICA8UnVsZURldGFpbHNBbm5vdGF0aW9ucyBhbm5vdGF0aW9ucz17YW5ub3RhdGlvbnN9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5yaWdodFNpZGV9PlxuICAgICAgICAgICAgPFJ1bGVEZXRhaWxzRGF0YVNvdXJjZXMgcnVsZT17cnVsZX0gcnVsZXNTb3VyY2U9e3J1bGVzU291cmNlfSAvPlxuICAgICAgICAgICAge2lzRmVkZXJhdGVkUnVsZSAmJiA8UnVsZURldGFpbHNGZWRlcmF0ZWRTb3VyY2VzIGdyb3VwPXtydWxlLmdyb3VwfSAvPn1cbiAgICAgICAgICAgIDxEZXRhaWxzRmllbGQgbGFiZWw9XCJOYW1lc3BhY2UgLyBHcm91cFwiIGNsYXNzTmFtZT17c3R5bGVzLnJpZ2h0U2lkZURldGFpbHN9PlxuICAgICAgICAgICAgICB7cnVsZS5uYW1lc3BhY2UubmFtZX0gLyB7cnVsZS5ncm91cC5uYW1lfVxuICAgICAgICAgICAgPC9EZXRhaWxzRmllbGQ+XG4gICAgICAgICAgICB7aXNHcmFmYW5hUnVsZXJSdWxlKHJ1bGUucnVsZXJSdWxlKSAmJiA8R3JhZmFuYVJ1bGVVSUQgcnVsZT17cnVsZS5ydWxlclJ1bGUuZ3JhZmFuYV9hbGVydH0gLz59XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxSdWxlRGV0YWlsc01hdGNoaW5nSW5zdGFuY2VzXG4gICAgICAgICAgICBydWxlPXtydWxlfVxuICAgICAgICAgICAgcGFnaW5hdGlvbj17eyBpdGVtc1BlclBhZ2U6IERFRkFVTFRfUEVSX1BBR0VfUEFHSU5BVElPTiB9fVxuICAgICAgICAgICAgZW5hYmxlRmlsdGVyaW5nXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1J1bGVWaWV3ZXJMYXlvdXRDb250ZW50PlxuICAgICAgPENvbGxhcHNlXG4gICAgICAgIGxhYmVsPVwiUXVlcnkgJiBSZXN1bHRzXCJcbiAgICAgICAgaXNPcGVuPXtleHBhbmRRdWVyeX1cbiAgICAgICAgb25Ub2dnbGU9e3NldEV4cGFuZFF1ZXJ5fVxuICAgICAgICBsb2FkaW5nPXtkYXRhICYmIGlzTG9hZGluZyhkYXRhKX1cbiAgICAgICAgY29sbGFwc2libGU9e3RydWV9XG4gICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLmNvbGxhcHNlfVxuICAgICAgPlxuICAgICAgICB7aXNHcmFmYW5hUnVsZXJSdWxlKHJ1bGUucnVsZXJSdWxlKSAmJiAhaXNGZWRlcmF0ZWRSdWxlICYmIChcbiAgICAgICAgICA8R3JhZmFuYVJ1bGVRdWVyeVZpZXdlclxuICAgICAgICAgICAgY29uZGl0aW9uPXtydWxlLnJ1bGVyUnVsZS5ncmFmYW5hX2FsZXJ0LmNvbmRpdGlvbn1cbiAgICAgICAgICAgIHF1ZXJpZXM9e3F1ZXJpZXN9XG4gICAgICAgICAgICBldmFsRGF0YUJ5UXVlcnk9e2RhdGF9XG4gICAgICAgICAgICBldmFsVGltZVJhbmdlcz17ZXZhbHVhdGlvblRpbWVSYW5nZXN9XG4gICAgICAgICAgICBvblRpbWVSYW5nZUNoYW5nZT17b25RdWVyeVRpbWVSYW5nZUNoYW5nZX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuXG4gICAgICAgIHshaXNHcmFmYW5hUnVsZXJSdWxlKHJ1bGUucnVsZXJSdWxlKSAmJiAhaXNGZWRlcmF0ZWRSdWxlICYmIGRhdGEgJiYgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5xdWVyaWVzfT5cbiAgICAgICAgICAgIHtxdWVyaWVzLm1hcCgocXVlcnkpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8UXVlcnlQcmV2aWV3XG4gICAgICAgICAgICAgICAgICBrZXk9e3F1ZXJ5LnJlZklkfVxuICAgICAgICAgICAgICAgICAgcmVmSWQ9e3F1ZXJ5LnJlZklkfVxuICAgICAgICAgICAgICAgICAgbW9kZWw9e3F1ZXJ5Lm1vZGVsfVxuICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZT17T2JqZWN0LnZhbHVlcyhjb25maWcuZGF0YXNvdXJjZXMpLmZpbmQoKGRzKSA9PiBkcy51aWQgPT09IHF1ZXJ5LmRhdGFzb3VyY2VVaWQpfVxuICAgICAgICAgICAgICAgICAgcXVlcnlEYXRhPXtkYXRhW3F1ZXJ5LnJlZklkXX1cbiAgICAgICAgICAgICAgICAgIHJlbGF0aXZlVGltZVJhbmdlPXtxdWVyeS5yZWxhdGl2ZVRpbWVSYW5nZX1cbiAgICAgICAgICAgICAgICAgIGV2YWxUaW1lUmFuZ2U9e2V2YWx1YXRpb25UaW1lUmFuZ2VzW3F1ZXJ5LnJlZklkXX1cbiAgICAgICAgICAgICAgICAgIG9uRXZhbFRpbWVSYW5nZUNoYW5nZT17KHRpbWVSYW5nZSkgPT4gb25RdWVyeVRpbWVSYW5nZUNoYW5nZShxdWVyeS5yZWZJZCwgdGltZVJhbmdlKX1cbiAgICAgICAgICAgICAgICAgIGlzQWxlcnRDb25kaXRpb249e2ZhbHNlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgeyFpc0ZlZGVyYXRlZFJ1bGUgJiYgIWFsbERhdGFTb3VyY2VzQXZhaWxhYmxlICYmIChcbiAgICAgICAgICA8QWxlcnQgdGl0bGU9XCJRdWVyeSBub3QgYXZhaWxhYmxlXCIgc2V2ZXJpdHk9XCJ3YXJuaW5nXCIgY2xhc3NOYW1lPXtzdHlsZXMucXVlcnlXYXJuaW5nfT5cbiAgICAgICAgICAgIENhbm5vdCBkaXNwbGF5IHRoZSBxdWVyeSBwcmV2aWV3LiBTb21lIG9mIHRoZSBkYXRhIHNvdXJjZXMgdXNlZCBpbiB0aGUgcXVlcmllcyBhcmUgbm90IGF2YWlsYWJsZS5cbiAgICAgICAgICA8L0FsZXJ0PlxuICAgICAgICApfVxuICAgICAgPC9Db2xsYXBzZT5cbiAgICA8Lz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gR3JhZmFuYVJ1bGVVSUQoeyBydWxlIH06IHsgcnVsZTogR3JhZmFuYVJ1bGVEZWZpbml0aW9uIH0pIHtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRTdHlsZXMpO1xuICBjb25zdCBjb3B5VUlEID0gKCkgPT4gbmF2aWdhdG9yLmNsaXBib2FyZCAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChydWxlLnVpZCk7XG5cbiAgcmV0dXJuIChcbiAgICA8RGV0YWlsc0ZpZWxkIGxhYmVsPVwiUnVsZSBVSURcIiBjaGlsZHJlbldyYXBwZXJDbGFzc05hbWU9e3N0eWxlcy5ydWxlVWlkfT5cbiAgICAgIHtydWxlLnVpZH0gPEljb25CdXR0b24gbmFtZT1cImNvcHlcIiBvbkNsaWNrPXtjb3B5VUlEfSB0b29sdGlwPVwiQ29weSBydWxlXCIgLz5cbiAgICA8L0RldGFpbHNGaWVsZD5cbiAgKTtcbn1cblxuZnVuY3Rpb24gaXNMb2FkaW5nKGRhdGE6IFJlY29yZDxzdHJpbmcsIFBhbmVsRGF0YT4pOiBib29sZWFuIHtcbiAgcmV0dXJuICEhT2JqZWN0LnZhbHVlcyhkYXRhKS5maW5kKChkKSA9PiBkLnN0YXRlID09PSBMb2FkaW5nU3RhdGUuTG9hZGluZyk7XG59XG5cbmNvbnN0IGdldFN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIGVycm9yTWVzc2FnZTogY3NzYFxuICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgIGAsXG4gICAgcXVlcmllczogY3NzYFxuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgYCxcbiAgICBjb2xsYXBzZTogY3NzYFxuICAgICAgbWFyZ2luLXRvcDogJHt0aGVtZS5zcGFjaW5nKDIpfTtcbiAgICAgIGJvcmRlci1jb2xvcjogJHt0aGVtZS5jb2xvcnMuYm9yZGVyLndlYWt9O1xuICAgICAgYm9yZGVyLXJhZGl1czogJHt0aGVtZS5zaGFwZS5ib3JkZXJSYWRpdXMoKX07XG4gICAgYCxcbiAgICBxdWVyaWVzVGl0bGU6IGNzc2BcbiAgICAgIHBhZGRpbmc6ICR7dGhlbWUuc3BhY2luZygyLCAwLjUpfTtcbiAgICAgIGZvbnQtc2l6ZTogJHt0aGVtZS50eXBvZ3JhcGh5Lmg1LmZvbnRTaXplfTtcbiAgICAgIGZvbnQtd2VpZ2h0OiAke3RoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodEJvbGR9O1xuICAgICAgZm9udC1mYW1pbHk6ICR7dGhlbWUudHlwb2dyYXBoeS5oNS5mb250RmFtaWx5fTtcbiAgICBgLFxuICAgIHF1ZXJ5OiBjc3NgXG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMuYm9yZGVyLm1lZGl1bX07XG4gICAgICBwYWRkaW5nOiAke3RoZW1lLnNwYWNpbmcoMil9O1xuICAgIGAsXG4gICAgcXVlcnlXYXJuaW5nOiBjc3NgXG4gICAgICBtYXJnaW46ICR7dGhlbWUuc3BhY2luZyg0LCAwKX07XG4gICAgYCxcbiAgICB0aXRsZTogY3NzYFxuICAgICAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuaDQuZm9udFNpemV9O1xuICAgICAgZm9udC13ZWlnaHQ6ICR7dGhlbWUudHlwb2dyYXBoeS5mb250V2VpZ2h0Qm9sZH07XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIGAsXG4gICAgZGV0YWlsczogY3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICBnYXA6ICR7dGhlbWUuc3BhY2luZyg0KX07XG4gICAgYCxcbiAgICBsZWZ0U2lkZTogY3NzYFxuICAgICAgZmxleDogMTtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYCxcbiAgICByaWdodFNpZGU6IGNzc2BcbiAgICAgIHBhZGRpbmctcmlnaHQ6ICR7dGhlbWUuc3BhY2luZygzKX07XG5cbiAgICAgIG1heC13aWR0aDogMzYwcHg7XG4gICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGAsXG4gICAgcmlnaHRTaWRlRGV0YWlsczogY3NzYFxuICAgICAgJiA+IGRpdjpmaXJzdC1jaGlsZCB7XG4gICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgfVxuICAgIGAsXG4gICAgbGFiZWxzOiBjc3NgXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgYCxcbiAgICBydWxlVWlkOiBjc3NgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGdhcDogJHt0aGVtZS5zcGFjaW5nKDEpfTtcbiAgICBgLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUnVsZVZpZXdlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rule-viewer/RuleViewer.v1.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rule-viewer/RuleViewerLayout.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RuleViewerLayout: () => (/* binding */ RuleViewerLayout),\n/* harmony export */   RuleViewerLayoutContent: () => (/* binding */ RuleViewerLayoutContent)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var app_core_components_Page_Page__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/core/components/Page/Page.tsx\");\n\n\n\n\n\nconst defaultPageNav = {\n  icon: \"bell\",\n  id: \"alert-rule-view\"\n};\nfunction RuleViewerLayout(props) {\n  const { wrapInContent = true, children, title } = props;\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useStyles2)(getPageStyles);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(app_core_components_Page_Page__WEBPACK_IMPORTED_MODULE_2__.Page, { pageNav: { ...defaultPageNav, text: title }, navId: \"alert-list\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(app_core_components_Page_Page__WEBPACK_IMPORTED_MODULE_2__.Page.Contents, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.content }, wrapInContent ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(RuleViewerLayoutContent, { ...props }) : children)));\n}\nfunction RuleViewerLayoutContent({ children, padding = 2 }) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.useStyles2)(getContentStyles(padding));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.wrapper }, children);\n}\nconst getPageStyles = (theme) => {\n  return {\n    content: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      max-width: ${theme.breakpoints.values.xxl}px;\n    `\n  };\n};\nconst getContentStyles = (padding) => (theme) => {\n  return {\n    wrapper: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      background: ${theme.colors.background.primary};\n      border: 1px solid ${theme.colors.border.weak};\n      border-radius: ${theme.shape.borderRadius()};\n      padding: ${theme.spacing(padding)};\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLXZpZXdlci9SdWxlVmlld2VyTGF5b3V0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFvQjtBQUNGO0FBR1M7QUFDTjtBQVFyQixNQUFNLGlCQUF3QztBQUFBLEVBQzVDLE1BQU07QUFBQSxFQUNOLElBQUk7QUFDTjtBQUVPLFNBQVMsaUJBQWlCLE9BQWtDO0FBQ2pFLFFBQU0sRUFBRSxnQkFBZ0IsTUFBTSxVQUFVLE1BQU0sSUFBSTtBQUNsRCxRQUFNLFNBQVMsdURBQVUsQ0FBQyxhQUFhO0FBRXZDLFNBQ0UsMkVBQUMsK0RBQUksSUFBQyxTQUFTLEVBQUUsR0FBRyxnQkFBZ0IsTUFBTSxNQUFNLEdBQUcsT0FBTSxnQkFDdkQsMkVBQUMsK0RBQUksQ0FBQyxVQUFMLE1BQ0MsMkVBQUMsU0FBSSxXQUFXLE9BQU8sV0FBVSxnQkFBZ0IsMkVBQUMsMkJBQXlCLEdBQUcsT0FBTyxJQUFLLFFBQVMsQ0FDckcsQ0FDRjtBQUVKO0FBT08sU0FBUyx3QkFBd0IsRUFBRSxVQUFVLFVBQVUsRUFBRSxHQUFxQztBQUNuRyxRQUFNLFNBQVMsdURBQVUsQ0FBQyxpQkFBaUIsT0FBTyxDQUFDO0FBQ25ELFNBQU8sMkVBQUMsU0FBSSxXQUFXLE9BQU8sV0FBVSxRQUFTO0FBQ25EO0FBRUEsTUFBTSxnQkFBZ0IsQ0FBQyxVQUF5QjtBQUM5QyxTQUFPO0FBQUEsSUFDTCxTQUFTLGlEQUFHO0FBQUgsbUJBQ00sTUFBTSxZQUFZLE9BQU87QUFBQTtBQUFBLEVBRTFDO0FBQ0Y7QUFFQSxNQUFNLG1CQUFtQixDQUFDLFlBQW9CLENBQUMsVUFBeUI7QUFDdEUsU0FBTztBQUFBLElBQ0wsU0FBUyxpREFBRztBQUFILG9CQUNPLE1BQU0sT0FBTyxXQUFXO0FBQUEsMEJBQ2xCLE1BQU0sT0FBTyxPQUFPO0FBQUEsdUJBQ3ZCLE1BQU0sTUFBTSxhQUFhO0FBQUEsaUJBQy9CLE1BQU0sUUFBUSxPQUFPO0FBQUE7QUFBQSxFQUVwQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvZmVhdHVyZXMvYWxlcnRpbmcvdW5pZmllZC9jb21wb25lbnRzL3J1bGUtdmlld2VyL1J1bGVWaWV3ZXJMYXlvdXQudHN4P2FjMTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEdyYWZhbmFUaGVtZTIsIE5hdk1vZGVsSXRlbSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IFBhZ2UgfSBmcm9tICdhcHAvY29yZS9jb21wb25lbnRzL1BhZ2UvUGFnZSc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfCBSZWFjdC5SZWFjdE5vZGVbXTtcbiAgdGl0bGU6IHN0cmluZztcbiAgd3JhcEluQ29udGVudD86IGJvb2xlYW47XG59O1xuXG5jb25zdCBkZWZhdWx0UGFnZU5hdjogUGFydGlhbDxOYXZNb2RlbEl0ZW0+ID0ge1xuICBpY29uOiAnYmVsbCcsXG4gIGlkOiAnYWxlcnQtcnVsZS12aWV3Jyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBSdWxlVmlld2VyTGF5b3V0KHByb3BzOiBQcm9wcyk6IEpTWC5FbGVtZW50IHwgbnVsbCB7XG4gIGNvbnN0IHsgd3JhcEluQ29udGVudCA9IHRydWUsIGNoaWxkcmVuLCB0aXRsZSB9ID0gcHJvcHM7XG4gIGNvbnN0IHN0eWxlcyA9IHVzZVN0eWxlczIoZ2V0UGFnZVN0eWxlcyk7XG5cbiAgcmV0dXJuIChcbiAgICA8UGFnZSBwYWdlTmF2PXt7IC4uLmRlZmF1bHRQYWdlTmF2LCB0ZXh0OiB0aXRsZSB9fSBuYXZJZD1cImFsZXJ0LWxpc3RcIj5cbiAgICAgIDxQYWdlLkNvbnRlbnRzPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNvbnRlbnR9Pnt3cmFwSW5Db250ZW50ID8gPFJ1bGVWaWV3ZXJMYXlvdXRDb250ZW50IHsuLi5wcm9wc30gLz4gOiBjaGlsZHJlbn08L2Rpdj5cbiAgICAgIDwvUGFnZS5Db250ZW50cz5cbiAgICA8L1BhZ2U+XG4gICk7XG59XG5cbnR5cGUgQ29udGVudFByb3BzID0ge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIHwgUmVhY3QuUmVhY3ROb2RlW107XG4gIHBhZGRpbmc/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gUnVsZVZpZXdlckxheW91dENvbnRlbnQoeyBjaGlsZHJlbiwgcGFkZGluZyA9IDIgfTogQ29udGVudFByb3BzKTogSlNYLkVsZW1lbnQgfCBudWxsIHtcbiAgY29uc3Qgc3R5bGVzID0gdXNlU3R5bGVzMihnZXRDb250ZW50U3R5bGVzKHBhZGRpbmcpKTtcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMud3JhcHBlcn0+e2NoaWxkcmVufTwvZGl2Pjtcbn1cblxuY29uc3QgZ2V0UGFnZVN0eWxlcyA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4ge1xuICByZXR1cm4ge1xuICAgIGNvbnRlbnQ6IGNzc2BcbiAgICAgIG1heC13aWR0aDogJHt0aGVtZS5icmVha3BvaW50cy52YWx1ZXMueHhsfXB4O1xuICAgIGAsXG4gIH07XG59O1xuXG5jb25zdCBnZXRDb250ZW50U3R5bGVzID0gKHBhZGRpbmc6IG51bWJlcikgPT4gKHRoZW1lOiBHcmFmYW5hVGhlbWUyKSA9PiB7XG4gIHJldHVybiB7XG4gICAgd3JhcHBlcjogY3NzYFxuICAgICAgYmFja2dyb3VuZDogJHt0aGVtZS5jb2xvcnMuYmFja2dyb3VuZC5wcmltYXJ5fTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlci53ZWFrfTtcbiAgICAgIGJvcmRlci1yYWRpdXM6ICR7dGhlbWUuc2hhcGUuYm9yZGVyUmFkaXVzKCl9O1xuICAgICAgcGFkZGluZzogJHt0aGVtZS5zcGFjaW5nKHBhZGRpbmcpfTtcbiAgICBgLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rule-viewer/RuleViewerLayout.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rule-viewer/RuleViewerVisualization.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RuleViewerVisualization: () => (/* binding */ RuleViewerVisualization)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/url.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/config.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/DateTimePickers/DateTimePicker/DateTimePicker.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/expressions/guards.ts\");\n/* harmony import */ var app_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/types/index.ts\");\n/* harmony import */ var _Authorize__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/alerting/unified/components/Authorize.tsx\");\n/* harmony import */ var _rule_editor_VizWrapper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rule-editor/VizWrapper.tsx\");\n\n\n\n\n\n\n\n\n\n\nconst headerHeight = 4;\nfunction RuleViewerVisualization({\n  data,\n  model,\n  thresholds,\n  dsSettings,\n  relativeTimeRange,\n  onTimeRangeChange,\n  className\n}) {\n  const styles = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_6__.useStyles2)(getStyles);\n  const isExpression = (0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_2__.isExpressionQuery)(model);\n  const onTimeChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (newDateTime) => {\n      const now = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.dateTime)().unix() - newDateTime.unix();\n      if (relativeTimeRange) {\n        const interval = relativeTimeRange.from - relativeTimeRange.to;\n        onTimeRangeChange({ from: now + interval, to: now });\n      }\n    },\n    [onTimeRangeChange, relativeTimeRange]\n  );\n  const setDateTime = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((relativeTimeRangeTo) => {\n    return relativeTimeRangeTo === 0 ? (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.dateTime)() : (0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.dateTime)().subtract(relativeTimeRangeTo, \"seconds\");\n  }, []);\n  if (!data) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.header }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: styles.actions }, !isExpression && relativeTimeRange ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.DateTimePicker, { date: setDateTime(relativeTimeRange.to), onChange: onTimeChange, maxDate: /* @__PURE__ */ new Date() }) : null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_Authorize__WEBPACK_IMPORTED_MODULE_4__.Authorize, { actions: [app_types__WEBPACK_IMPORTED_MODULE_3__.AccessControlAction.DataSourcesExplore] }, !isExpression && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_9__.LinkButton,\n    {\n      size: \"md\",\n      variant: \"secondary\",\n      icon: \"compass\",\n      target: \"_blank\",\n      href: createExploreLink(dsSettings, model)\n    },\n    \"View in Explore\"\n  )))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_rule_editor_VizWrapper__WEBPACK_IMPORTED_MODULE_5__.VizWrapper, { data, thresholds: thresholds?.config, thresholdsType: thresholds?.mode }));\n}\nfunction createExploreLink(settings, model) {\n  const { uid, type } = settings;\n  const { refId, ...rest } = model;\n  return _grafana_data__WEBPACK_IMPORTED_MODULE_10__.urlUtil.renderUrl(`${_grafana_runtime__WEBPACK_IMPORTED_MODULE_11__.config.appSubUrl}/explore`, {\n    left: JSON.stringify({\n      datasource: settings.uid,\n      queries: [{ refId: \"A\", ...rest, datasource: { type, uid } }],\n      range: { from: \"now-1h\", to: \"now\" }\n    })\n  });\n}\nconst getStyles = (theme) => {\n  return {\n    header: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      height: ${theme.spacing(headerHeight)};\n      display: flex;\n      align-items: center;\n      justify-content: flex-end;\n      white-space: nowrap;\n      margin-bottom: ${theme.spacing(2)};\n    `,\n    refId: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      font-weight: ${theme.typography.fontWeightMedium};\n      color: ${theme.colors.text.link};\n      overflow: hidden;\n    `,\n    dataSource: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      margin-left: ${theme.spacing(1)};\n      font-style: italic;\n      color: ${theme.colors.text.secondary};\n    `,\n    actions: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      display: flex;\n      align-items: center;\n    `,\n    errorMessage: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n      white-space: pre-wrap;\n    `\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlLXZpZXdlci9SdWxlVmlld2VyVmlzdWFsaXphdGlvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ2U7QUFXNUI7QUFDZ0I7QUFFZ0M7QUFDckI7QUFDRTtBQUdWO0FBQ0M7QUFXM0IsTUFBTSxlQUFlO0FBRWQsU0FBUyx3QkFBd0I7QUFBQSxFQUN0QztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGLEdBQXFEO0FBQ25ELFFBQU0sU0FBUyx1REFBVSxDQUFDLFNBQVM7QUFDbkMsUUFBTSxlQUFlLGtGQUFpQixDQUFDLEtBQUs7QUFFNUMsUUFBTSxlQUFlLGtEQUFXO0FBQVgsSUFDbkIsQ0FBQyxnQkFBMEI7QUFDekIsWUFBTSxNQUFNLHVEQUFRLENBQUMsRUFBRSxLQUFLLElBQUksWUFBWSxLQUFLO0FBRWpELFVBQUksbUJBQW1CO0FBQ3JCLGNBQU0sV0FBVyxrQkFBa0IsT0FBTyxrQkFBa0I7QUFDNUQsMEJBQWtCLEVBQUUsTUFBTSxNQUFNLFVBQVUsSUFBSSxJQUFJLENBQUM7QUFBQSxNQUNyRDtBQUFBLElBQ0Y7QUFBQSxJQUNBLENBQUMsbUJBQW1CLGlCQUFpQjtBQUFBLEVBQ3ZDO0FBRUEsUUFBTSxjQUFjLGtEQUFXLENBQUMsQ0FBQyx3QkFBZ0M7QUFDL0QsV0FBTyx3QkFBd0IsSUFBSSx1REFBUSxDQUFDLElBQUksdURBQVEsQ0FBQyxFQUFFLFNBQVMscUJBQXFCLFNBQVM7QUFBQSxFQUNwRyxHQUFHLENBQUMsQ0FBQztBQUVMLE1BQUksQ0FBQyxNQUFNO0FBQ1QsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUNFLDJFQUFDLFNBQUksYUFDSCwyRUFBQyxTQUFJLFdBQVcsT0FBTyxVQUNyQiwyRUFBQyxTQUFJLFdBQVcsT0FBTyxXQUNwQixDQUFDLGdCQUFnQixvQkFDaEIsMkVBQUMsdURBQWMsSUFBQyxNQUFNLFlBQVksa0JBQWtCLEVBQUUsR0FBRyxVQUFVLGNBQWMsU0FBUyxvQkFBSSxLQUFLLEdBQUcsSUFDcEcsTUFDSiwyRUFBQyxpREFBUyxJQUFDLFNBQVMsQ0FBQywwREFBbUIsQ0FBQyxrQkFBa0IsS0FDeEQsQ0FBQyxnQkFDQTtBQUFBLElBQUMsbURBQVU7QUFBVjtBQUFBLE1BQ0MsTUFBSztBQUFBLE1BQ0wsU0FBUTtBQUFBLE1BQ1IsTUFBSztBQUFBLE1BQ0wsUUFBTztBQUFBLE1BQ1AsTUFBTSxrQkFBa0IsWUFBWSxLQUFLO0FBQUE7QUFBQSxJQUMxQztBQUFBLEVBRUQsQ0FFSixDQUNGLENBQ0YsR0FDQSwyRUFBQywrREFBVSxJQUFDLE1BQVksWUFBWSxZQUFZLFFBQVEsZ0JBQWdCLFlBQVksTUFBTSxDQUM1RjtBQUVKO0FBRUEsU0FBUyxrQkFBa0IsVUFBeUIsT0FBK0I7QUFDakYsUUFBTSxFQUFFLEtBQUssS0FBSyxJQUFJO0FBQ3RCLFFBQU0sRUFBRSxPQUFPLEdBQUcsS0FBSyxJQUFJO0FBUTNCLFNBQU8sbURBQU8sQ0FBQyxVQUFVLEdBQUcscURBQU0sQ0FBQyxxQkFBcUI7QUFBQSxJQUN0RCxNQUFNLEtBQUssVUFBVTtBQUFBLE1BQ25CLFlBQVksU0FBUztBQUFBLE1BQ3JCLFNBQVMsQ0FBQyxFQUFFLE9BQU8sS0FBSyxHQUFHLE1BQU0sWUFBWSxFQUFFLE1BQU0sSUFBSSxFQUFFLENBQUM7QUFBQSxNQUM1RCxPQUFPLEVBQUUsTUFBTSxVQUFVLElBQUksTUFBTTtBQUFBLElBQ3JDLENBQUM7QUFBQSxFQUNILENBQUM7QUFDSDtBQUVBLE1BQU0sWUFBWSxDQUFDLFVBQXlCO0FBQzFDLFNBQU87QUFBQSxJQUNMLFFBQVEsaURBQUc7QUFBSCxnQkFDSSxNQUFNLFFBQVEsWUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBS25CLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQSxJQUVsQyxPQUFPLGlEQUFHO0FBQUgscUJBQ1UsTUFBTSxXQUFXO0FBQUEsZUFDdkIsTUFBTSxPQUFPLEtBQUs7QUFBQTtBQUFBO0FBQUEsSUFHN0IsWUFBWSxpREFBRztBQUFILHFCQUNLLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQSxlQUVyQixNQUFNLE9BQU8sS0FBSztBQUFBO0FBQUEsSUFFN0IsU0FBUyxpREFBRztBQUFIO0FBQUE7QUFBQTtBQUFBLElBSVQsY0FBYyxpREFBRztBQUFIO0FBQUE7QUFBQSxFQUdoQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvZmVhdHVyZXMvYWxlcnRpbmcvdW5pZmllZC9jb21wb25lbnRzL3J1bGUtdmlld2VyL1J1bGVWaWV3ZXJWaXN1YWxpemF0aW9uLnRzeD84YTkzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7XG4gIERhdGFTb3VyY2VJbnN0YW5jZVNldHRpbmdzLFxuICBEYXRhU291cmNlSnNvbkRhdGEsXG4gIERhdGVUaW1lLFxuICBkYXRlVGltZSxcbiAgR3JhZmFuYVRoZW1lMixcbiAgUGFuZWxEYXRhLFxuICBSZWxhdGl2ZVRpbWVSYW5nZSxcbiAgdXJsVXRpbCxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lJztcbmltcG9ydCB7IERhdGFTb3VyY2VSZWYgfSBmcm9tICdAZ3JhZmFuYS9zY2hlbWEnO1xuaW1wb3J0IHsgRGF0ZVRpbWVQaWNrZXIsIExpbmtCdXR0b24sIHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBpc0V4cHJlc3Npb25RdWVyeSB9IGZyb20gJ2FwcC9mZWF0dXJlcy9leHByZXNzaW9ucy9ndWFyZHMnO1xuaW1wb3J0IHsgQWNjZXNzQ29udHJvbEFjdGlvbiB9IGZyb20gJ2FwcC90eXBlcyc7XG5pbXBvcnQgeyBBbGVydERhdGFRdWVyeSwgQWxlcnRRdWVyeSB9IGZyb20gJ2FwcC90eXBlcy91bmlmaWVkLWFsZXJ0aW5nLWR0byc7XG5cbmltcG9ydCB7IEF1dGhvcml6ZSB9IGZyb20gJy4uL0F1dGhvcml6ZSc7XG5pbXBvcnQgeyBWaXpXcmFwcGVyIH0gZnJvbSAnLi4vcnVsZS1lZGl0b3IvVml6V3JhcHBlcic7XG5pbXBvcnQgeyBUaHJlc2hvbGREZWZpbml0aW9uIH0gZnJvbSAnLi4vcnVsZS1lZGl0b3IvdXRpbCc7XG5cbmludGVyZmFjZSBSdWxlVmlld2VyVmlzdWFsaXphdGlvblByb3BzIGV4dGVuZHMgUGljazxBbGVydFF1ZXJ5LCAncmVmSWQnIHwgJ21vZGVsJyB8ICdyZWxhdGl2ZVRpbWVSYW5nZSc+IHtcbiAgZHNTZXR0aW5nczogRGF0YVNvdXJjZUluc3RhbmNlU2V0dGluZ3M8RGF0YVNvdXJjZUpzb25EYXRhPjtcbiAgZGF0YT86IFBhbmVsRGF0YTtcbiAgdGhyZXNob2xkcz86IFRocmVzaG9sZERlZmluaXRpb247XG4gIG9uVGltZVJhbmdlQ2hhbmdlOiAocmFuZ2U6IFJlbGF0aXZlVGltZVJhbmdlKSA9PiB2b2lkO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG59XG5cbmNvbnN0IGhlYWRlckhlaWdodCA9IDQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBSdWxlVmlld2VyVmlzdWFsaXphdGlvbih7XG4gIGRhdGEsXG4gIG1vZGVsLFxuICB0aHJlc2hvbGRzLFxuICBkc1NldHRpbmdzLFxuICByZWxhdGl2ZVRpbWVSYW5nZSxcbiAgb25UaW1lUmFuZ2VDaGFuZ2UsXG4gIGNsYXNzTmFtZSxcbn06IFJ1bGVWaWV3ZXJWaXN1YWxpemF0aW9uUHJvcHMpOiBKU1guRWxlbWVudCB8IG51bGwge1xuICBjb25zdCBzdHlsZXMgPSB1c2VTdHlsZXMyKGdldFN0eWxlcyk7XG4gIGNvbnN0IGlzRXhwcmVzc2lvbiA9IGlzRXhwcmVzc2lvblF1ZXJ5KG1vZGVsKTtcblxuICBjb25zdCBvblRpbWVDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAobmV3RGF0ZVRpbWU6IERhdGVUaW1lKSA9PiB7XG4gICAgICBjb25zdCBub3cgPSBkYXRlVGltZSgpLnVuaXgoKSAtIG5ld0RhdGVUaW1lLnVuaXgoKTtcblxuICAgICAgaWYgKHJlbGF0aXZlVGltZVJhbmdlKSB7XG4gICAgICAgIGNvbnN0IGludGVydmFsID0gcmVsYXRpdmVUaW1lUmFuZ2UuZnJvbSAtIHJlbGF0aXZlVGltZVJhbmdlLnRvO1xuICAgICAgICBvblRpbWVSYW5nZUNoYW5nZSh7IGZyb206IG5vdyArIGludGVydmFsLCB0bzogbm93IH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW29uVGltZVJhbmdlQ2hhbmdlLCByZWxhdGl2ZVRpbWVSYW5nZV1cbiAgKTtcblxuICBjb25zdCBzZXREYXRlVGltZSA9IHVzZUNhbGxiYWNrKChyZWxhdGl2ZVRpbWVSYW5nZVRvOiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4gcmVsYXRpdmVUaW1lUmFuZ2VUbyA9PT0gMCA/IGRhdGVUaW1lKCkgOiBkYXRlVGltZSgpLnN1YnRyYWN0KHJlbGF0aXZlVGltZVJhbmdlVG8sICdzZWNvbmRzJyk7XG4gIH0sIFtdKTtcblxuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmhlYWRlcn0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYWN0aW9uc30+XG4gICAgICAgICAgeyFpc0V4cHJlc3Npb24gJiYgcmVsYXRpdmVUaW1lUmFuZ2UgPyAoXG4gICAgICAgICAgICA8RGF0ZVRpbWVQaWNrZXIgZGF0ZT17c2V0RGF0ZVRpbWUocmVsYXRpdmVUaW1lUmFuZ2UudG8pfSBvbkNoYW5nZT17b25UaW1lQ2hhbmdlfSBtYXhEYXRlPXtuZXcgRGF0ZSgpfSAvPlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxBdXRob3JpemUgYWN0aW9ucz17W0FjY2Vzc0NvbnRyb2xBY3Rpb24uRGF0YVNvdXJjZXNFeHBsb3JlXX0+XG4gICAgICAgICAgICB7IWlzRXhwcmVzc2lvbiAmJiAoXG4gICAgICAgICAgICAgIDxMaW5rQnV0dG9uXG4gICAgICAgICAgICAgICAgc2l6ZT1cIm1kXCJcbiAgICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICBpY29uPVwiY29tcGFzc1wiXG4gICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgICAgICBocmVmPXtjcmVhdGVFeHBsb3JlTGluayhkc1NldHRpbmdzLCBtb2RlbCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBWaWV3IGluIEV4cGxvcmVcbiAgICAgICAgICAgICAgPC9MaW5rQnV0dG9uPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0F1dGhvcml6ZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxWaXpXcmFwcGVyIGRhdGE9e2RhdGF9IHRocmVzaG9sZHM9e3RocmVzaG9sZHM/LmNvbmZpZ30gdGhyZXNob2xkc1R5cGU9e3RocmVzaG9sZHM/Lm1vZGV9IC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUV4cGxvcmVMaW5rKHNldHRpbmdzOiBEYXRhU291cmNlUmVmLCBtb2RlbDogQWxlcnREYXRhUXVlcnkpOiBzdHJpbmcge1xuICBjb25zdCB7IHVpZCwgdHlwZSB9ID0gc2V0dGluZ3M7XG4gIGNvbnN0IHsgcmVmSWQsIC4uLnJlc3QgfSA9IG1vZGVsO1xuXG4gIC8qXG4gICAgSW4gbXkgdGVzdGluZyBJJ3ZlIGZvdW5kIHNvbWUgYWxlcnRzIHRoYXQgZG9uJ3QgaGF2ZSBhIGRhdGEgc291cmNlIGVtYmVkZGVkIGluc2lkZSB0aGUgbW9kZWwuXG4gICAgQXQgdGhpcyBtb21lbnQgaW4gdGltZSBpdCBpcyB1bmNsZWFyIHRvIG1lIHdoeSBzb21lIGFsZXJ0IGRlZmluaXRpb25zIG5vdCBoYXZlIGEgZGF0YSBzb3VyY2UgZW1iZWRkZWQgaW4gdGhlIG1vZGVsLlxuXG4gICAgSSBkb24ndCB0aGluayB0aGF0IHNob3VsZCBoYXBwZW4gaGVyZSwgdGhlIGZhY3QgdGhhdCB0aGUgZGF0YXNvdXJjZSByZWYgaXMgc29tZXRpbWVzIG1pc3NpbmcgaGVyZSBpcyBhIHN5bXB0b20gb2YgYW5vdGhlciBjYXVzZS4gKEdpbGxlcylcbiAgICovXG4gIHJldHVybiB1cmxVdGlsLnJlbmRlclVybChgJHtjb25maWcuYXBwU3ViVXJsfS9leHBsb3JlYCwge1xuICAgIGxlZnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGRhdGFzb3VyY2U6IHNldHRpbmdzLnVpZCxcbiAgICAgIHF1ZXJpZXM6IFt7IHJlZklkOiAnQScsIC4uLnJlc3QsIGRhdGFzb3VyY2U6IHsgdHlwZSwgdWlkIH0gfV0sXG4gICAgICByYW5nZTogeyBmcm9tOiAnbm93LTFoJywgdG86ICdub3cnIH0sXG4gICAgfSksXG4gIH0pO1xufVxuXG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBoZWFkZXI6IGNzc2BcbiAgICAgIGhlaWdodDogJHt0aGVtZS5zcGFjaW5nKGhlYWRlckhlaWdodCl9O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUuc3BhY2luZygyKX07XG4gICAgYCxcbiAgICByZWZJZDogY3NzYFxuICAgICAgZm9udC13ZWlnaHQ6ICR7dGhlbWUudHlwb2dyYXBoeS5mb250V2VpZ2h0TWVkaXVtfTtcbiAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy50ZXh0Lmxpbmt9O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBgLFxuICAgIGRhdGFTb3VyY2U6IGNzc2BcbiAgICAgIG1hcmdpbi1sZWZ0OiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnRleHQuc2Vjb25kYXJ5fTtcbiAgICBgLFxuICAgIGFjdGlvbnM6IGNzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGAsXG4gICAgZXJyb3JNZXNzYWdlOiBjc3NgXG4gICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgYCxcbiAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rule-viewer/RuleViewerVisualization.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rules/RuleDetailsFederatedSources.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RuleDetailsFederatedSources: () => (/* binding */ RuleDetailsFederatedSources)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _DetailsField__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/features/alerting/unified/components/DetailsField.tsx\");\n\n\n\nconst RuleDetailsFederatedSources = ({ group }) => {\n  const sourceTenants = group.source_tenants ?? [];\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_DetailsField__WEBPACK_IMPORTED_MODULE_1__.DetailsField, { label: \"Tenant sources\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, sourceTenants.map((tenant) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { key: tenant }, tenant))));\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlcy9SdWxlRGV0YWlsc0ZlZGVyYXRlZFNvdXJjZXMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWtCO0FBSVc7QUFNN0IsTUFBTSw4QkFBOEIsQ0FBQyxFQUFFLE1BQU0sTUFBYTtBQUN4RCxRQUFNLGdCQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBRS9DLFNBQ0UsMkVBQUMsdURBQVksSUFBQyxPQUFNLG9CQUNsQiwwSUFDRyxjQUFjLElBQUksQ0FBQyxXQUNsQiwyRUFBQyxTQUFJLEtBQUssVUFBUyxNQUFPLENBQzNCLENBQ0gsQ0FDRjtBQUVKO0FBRXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvZmVhdHVyZXMvYWxlcnRpbmcvdW5pZmllZC9jb21wb25lbnRzL3J1bGVzL1J1bGVEZXRhaWxzRmVkZXJhdGVkU291cmNlcy50c3g/NzA0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBDb21iaW5lZFJ1bGVHcm91cCB9IGZyb20gJ2FwcC90eXBlcy91bmlmaWVkLWFsZXJ0aW5nJztcblxuaW1wb3J0IHsgRGV0YWlsc0ZpZWxkIH0gZnJvbSAnLi4vRGV0YWlsc0ZpZWxkJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZ3JvdXA6IENvbWJpbmVkUnVsZUdyb3VwO1xufVxuXG5jb25zdCBSdWxlRGV0YWlsc0ZlZGVyYXRlZFNvdXJjZXMgPSAoeyBncm91cCB9OiBQcm9wcykgPT4ge1xuICBjb25zdCBzb3VyY2VUZW5hbnRzID0gZ3JvdXAuc291cmNlX3RlbmFudHMgPz8gW107XG5cbiAgcmV0dXJuIChcbiAgICA8RGV0YWlsc0ZpZWxkIGxhYmVsPVwiVGVuYW50IHNvdXJjZXNcIj5cbiAgICAgIDw+XG4gICAgICAgIHtzb3VyY2VUZW5hbnRzLm1hcCgodGVuYW50KSA9PiAoXG4gICAgICAgICAgPGRpdiBrZXk9e3RlbmFudH0+e3RlbmFudH08L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICA8Lz5cbiAgICA8L0RldGFpbHNGaWVsZD5cbiAgKTtcbn07XG5cbmV4cG9ydCB7IFJ1bGVEZXRhaWxzRmVkZXJhdGVkU291cmNlcyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rules/RuleDetailsFederatedSources.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rules/RuleHealth.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RuleHealth: () => (/* binding */ RuleHealth)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Tooltip/Tooltip.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n\n\n\n\nconst RuleHealth = ({ rule }) => {\n  const style = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.useStyles2)(getStyle);\n  if (rule.health === \"err\" || rule.health === \"error\") {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_3__.Tooltip, { theme: \"error\", content: rule.lastError || \"No error message provided.\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: style.warn }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_4__.Icon, { name: \"exclamation-triangle\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", null, \"error\")));\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, rule.health);\n};\nconst getStyle = (theme) => ({\n  warn: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    display: inline-flex;\n    flex-direction: row;\n    align-items: center;\n    gap: ${theme.spacing(1)};\n\n    color: ${theme.colors.warning.text};\n  `\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlcy9SdWxlSGVhbHRoLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFvQjtBQUNGO0FBR3dCO0FBT25DLE1BQU0sYUFBYSxDQUFDLEVBQUUsS0FBSyxNQUFZO0FBQzVDLFFBQU0sUUFBUSx1REFBVSxDQUFDLFFBQVE7QUFFakMsTUFBSSxLQUFLLFdBQVcsU0FBUyxLQUFLLFdBQVcsU0FBUztBQUNwRCxXQUNFLDJFQUFDLGdEQUFPLElBQUMsT0FBTSxTQUFRLFNBQVMsS0FBSyxhQUFhLGdDQUNoRCwyRUFBQyxTQUFJLFdBQVcsTUFBTSxRQUNwQiwyRUFBQyw2Q0FBSSxJQUFDLE1BQUssd0JBQXVCLEdBQ2xDLDJFQUFDLGNBQUssT0FBSyxDQUNiLENBQ0Y7QUFBQSxFQUVKO0FBRUEsU0FBTywwSUFBRyxLQUFLLE1BQU87QUFDeEI7QUFFQSxNQUFNLFdBQVcsQ0FBQyxXQUEwQjtBQUFBLEVBQzFDLE1BQU0saURBQUc7QUFBSDtBQUFBO0FBQUE7QUFBQSxXQUlHLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQSxhQUViLE1BQU0sT0FBTyxRQUFRO0FBQUE7QUFFbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9mZWF0dXJlcy9hbGVydGluZy91bmlmaWVkL2NvbXBvbmVudHMvcnVsZXMvUnVsZUhlYWx0aC50c3g/ZWM2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgSWNvbiwgVG9vbHRpcCwgdXNlU3R5bGVzMiB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IFJ1bGUgfSBmcm9tICdhcHAvdHlwZXMvdW5pZmllZC1hbGVydGluZyc7XG5cbmludGVyZmFjZSBQcm9tIHtcbiAgcnVsZTogUnVsZTtcbn1cblxuZXhwb3J0IGNvbnN0IFJ1bGVIZWFsdGggPSAoeyBydWxlIH06IFByb20pID0+IHtcbiAgY29uc3Qgc3R5bGUgPSB1c2VTdHlsZXMyKGdldFN0eWxlKTtcblxuICBpZiAocnVsZS5oZWFsdGggPT09ICdlcnInIHx8IHJ1bGUuaGVhbHRoID09PSAnZXJyb3InKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUb29sdGlwIHRoZW1lPVwiZXJyb3JcIiBjb250ZW50PXtydWxlLmxhc3RFcnJvciB8fCAnTm8gZXJyb3IgbWVzc2FnZSBwcm92aWRlZC4nfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlLndhcm59PlxuICAgICAgICAgIDxJY29uIG5hbWU9XCJleGNsYW1hdGlvbi10cmlhbmdsZVwiIC8+XG4gICAgICAgICAgPHNwYW4+ZXJyb3I8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Ub29sdGlwPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gPD57cnVsZS5oZWFsdGh9PC8+O1xufTtcblxuY29uc3QgZ2V0U3R5bGUgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+ICh7XG4gIHdhcm46IGNzc2BcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiAke3RoZW1lLnNwYWNpbmcoMSl9O1xuXG4gICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLndhcm5pbmcudGV4dH07XG4gIGAsXG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rules/RuleHealth.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/components/rules/RuleState.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RuleState: () => (/* binding */ RuleState)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/durationutil.ts\");\n/* harmony import */ var _grafana_experimental__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-experimental-virtual-ba767552fe/0/cache/@grafana-experimental-npm-1.6.1-f052d2ae51-64c32bc9e3.zip/node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Spinner/Spinner.tsx\");\n/* harmony import */ var app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/types/unified-alerting-dto.ts\");\n/* harmony import */ var _utils_rules__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/rules.ts\");\n/* harmony import */ var _AlertStateTag__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/alerting/unified/components/rules/AlertStateTag.tsx\");\n\n\n\n\n\n\n\n\n\nconst RuleState = ({ rule, isDeleting, isCreating, isPaused }) => {\n  const style = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_5__.useStyles2)(getStyle);\n  const { promRule } = rule;\n  const forTime = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (promRule && (0,_utils_rules__WEBPACK_IMPORTED_MODULE_3__.isAlertingRule)(promRule) && promRule.alerts?.length && promRule.state !== app_types_unified_alerting_dto__WEBPACK_IMPORTED_MODULE_2__.PromAlertingRuleState.Inactive) {\n      const firstActiveAt = promRule.activeAt ? new Date(promRule.activeAt) : (0,_utils_rules__WEBPACK_IMPORTED_MODULE_3__.getFirstActiveAt)(promRule);\n      if (firstActiveAt) {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { title: String(firstActiveAt), className: style.for }, \"for\", \" \", (0,_grafana_data__WEBPACK_IMPORTED_MODULE_6__.intervalToAbbreviatedDurationString)(\n          {\n            start: firstActiveAt,\n            end: /* @__PURE__ */ new Date()\n          },\n          false\n        ));\n      }\n    }\n    return null;\n  }, [promRule, style]);\n  if (isDeleting) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_7__.Stack, { gap: 1 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Spinner, null), \"Deleting\");\n  } else if (isCreating) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_7__.Stack, { gap: 1 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.Spinner, null), \"Creating\");\n  } else if (promRule && (0,_utils_rules__WEBPACK_IMPORTED_MODULE_3__.isAlertingRule)(promRule)) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_grafana_experimental__WEBPACK_IMPORTED_MODULE_7__.Stack, { gap: 1 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_AlertStateTag__WEBPACK_IMPORTED_MODULE_4__.AlertStateTag, { state: promRule.state, isPaused }), forTime);\n  } else if (promRule && (0,_utils_rules__WEBPACK_IMPORTED_MODULE_3__.isRecordingRule)(promRule)) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, \"Recording rule\");\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, \"n/a\");\n};\nconst getStyle = (theme) => ({\n  for: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    font-size: ${theme.typography.bodySmall.fontSize};\n    color: ${theme.colors.text.secondary};\n    white-space: nowrap;\n    padding-top: 2px;\n  `\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvY29tcG9uZW50cy9ydWxlcy9SdWxlU3RhdGUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNXO0FBRW9DO0FBQzdDO0FBQ2M7QUFFRTtBQUU0QjtBQUVwQztBQVN2QixNQUFNLFlBQVksQ0FBQyxFQUFFLE1BQU0sWUFBWSxZQUFZLFNBQVMsTUFBYTtBQUM5RSxRQUFNLFFBQVEsdURBQVUsQ0FBQyxRQUFRO0FBQ2pDLFFBQU0sRUFBRSxTQUFTLElBQUk7QUFHckIsUUFBTSxVQUFVLDhDQUFPLENBQUMsTUFBTTtBQUM1QixRQUNFLFlBQ0EsNERBQWMsQ0FBQyxRQUFRLEtBQ3ZCLFNBQVMsUUFBUSxVQUNqQixTQUFTLFVBQVUsaUZBQXFCLENBQUMsVUFDekM7QUFFQSxZQUFNLGdCQUFnQixTQUFTLFdBQVcsSUFBSSxLQUFLLFNBQVMsUUFBUSxJQUFJLDhEQUFnQixDQUFDLFFBQVE7QUFHakcsVUFBSSxlQUFlO0FBQ2pCLGVBQ0UsMkVBQUMsVUFBSyxPQUFPLE9BQU8sYUFBYSxHQUFHLFdBQVcsTUFBTSxPQUFLLE9BQ3BELEtBQ0gsa0ZBQW1DO0FBQW5DLFVBQ0M7QUFBQSxZQUNFLE9BQU87QUFBQSxZQUNQLEtBQUssb0JBQUksS0FBSztBQUFBLFVBQ2hCO0FBQUEsVUFDQTtBQUFBLFFBQ0YsQ0FDRjtBQUFBLE1BRUo7QUFBQSxJQUNGO0FBQ0EsV0FBTztBQUFBLEVBQ1QsR0FBRyxDQUFDLFVBQVUsS0FBSyxDQUFDO0FBRXBCLE1BQUksWUFBWTtBQUNkLFdBQ0UsMkVBQUMsd0RBQUssSUFBQyxLQUFLLEtBQ1YsMkVBQUMsZ0RBQU8sTUFBQyxHQUFFLFVBRWI7QUFBQSxFQUVKLFdBQVcsWUFBWTtBQUNyQixXQUNFLDJFQUFDLHdEQUFLLElBQUMsS0FBSyxLQUNWLDJFQUFDLGdEQUFPLE1BQUMsR0FBRSxVQUViO0FBQUEsRUFFSixXQUFXLFlBQVksNERBQWMsQ0FBQyxRQUFRLEdBQUc7QUFDL0MsV0FDRSwyRUFBQyx3REFBSyxJQUFDLEtBQUssS0FDViwyRUFBQyx5REFBYSxJQUFDLE9BQU8sU0FBUyxPQUFPLFVBQW9CLEdBQ3pELE9BQ0g7QUFBQSxFQUVKLFdBQVcsWUFBWSw2REFBZSxDQUFDLFFBQVEsR0FBRztBQUNoRCxXQUFPLDBJQUFFLGdCQUFjO0FBQUEsRUFDekI7QUFDQSxTQUFPLDBJQUFFLEtBQUc7QUFDZDtBQUVBLE1BQU0sV0FBVyxDQUFDLFdBQTBCO0FBQUEsRUFDMUMsS0FBSyxpREFBRztBQUFILGlCQUNVLE1BQU0sV0FBVyxVQUFVO0FBQUEsYUFDL0IsTUFBTSxPQUFPLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFJL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9mZWF0dXJlcy9hbGVydGluZy91bmlmaWVkL2NvbXBvbmVudHMvcnVsZXMvUnVsZVN0YXRlLnRzeD9jNTUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL2Nzcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhZmFuYVRoZW1lMiwgaW50ZXJ2YWxUb0FiYnJldmlhdGVkRHVyYXRpb25TdHJpbmcgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnQGdyYWZhbmEvZXhwZXJpbWVudGFsJztcbmltcG9ydCB7IFNwaW5uZXIsIHVzZVN0eWxlczIgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5pbXBvcnQgeyBDb21iaW5lZFJ1bGUgfSBmcm9tICdhcHAvdHlwZXMvdW5pZmllZC1hbGVydGluZyc7XG5pbXBvcnQgeyBQcm9tQWxlcnRpbmdSdWxlU3RhdGUgfSBmcm9tICdhcHAvdHlwZXMvdW5pZmllZC1hbGVydGluZy1kdG8nO1xuXG5pbXBvcnQgeyBpc0FsZXJ0aW5nUnVsZSwgaXNSZWNvcmRpbmdSdWxlLCBnZXRGaXJzdEFjdGl2ZUF0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcnVsZXMnO1xuXG5pbXBvcnQgeyBBbGVydFN0YXRlVGFnIH0gZnJvbSAnLi9BbGVydFN0YXRlVGFnJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcnVsZTogQ29tYmluZWRSdWxlO1xuICBpc0RlbGV0aW5nOiBib29sZWFuO1xuICBpc0NyZWF0aW5nOiBib29sZWFuO1xuICBpc1BhdXNlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBSdWxlU3RhdGUgPSAoeyBydWxlLCBpc0RlbGV0aW5nLCBpc0NyZWF0aW5nLCBpc1BhdXNlZCB9OiBQcm9wcykgPT4ge1xuICBjb25zdCBzdHlsZSA9IHVzZVN0eWxlczIoZ2V0U3R5bGUpO1xuICBjb25zdCB7IHByb21SdWxlIH0gPSBydWxlO1xuXG4gIC8vIHJldHVybiBob3cgbG9uZyB0aGUgcnVsZSBoYXMgYmVlbiBpbiBpdHMgZmlyaW5nIHN0YXRlLCBpZiBhbnlcbiAgY29uc3QgZm9yVGltZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChcbiAgICAgIHByb21SdWxlICYmXG4gICAgICBpc0FsZXJ0aW5nUnVsZShwcm9tUnVsZSkgJiZcbiAgICAgIHByb21SdWxlLmFsZXJ0cz8ubGVuZ3RoICYmXG4gICAgICBwcm9tUnVsZS5zdGF0ZSAhPT0gUHJvbUFsZXJ0aW5nUnVsZVN0YXRlLkluYWN0aXZlXG4gICAgKSB7XG4gICAgICAvLyBmaW5kIGVhcmxpZXN0IGFsZXJ0XG4gICAgICBjb25zdCBmaXJzdEFjdGl2ZUF0ID0gcHJvbVJ1bGUuYWN0aXZlQXQgPyBuZXcgRGF0ZShwcm9tUnVsZS5hY3RpdmVBdCkgOiBnZXRGaXJzdEFjdGl2ZUF0KHByb21SdWxlKTtcblxuICAgICAgLy8gY2FsY3VsYXRlIHRpbWUgZWxhcHNlZCBmcm9tIGVhcmxpZXN0IGFsZXJ0XG4gICAgICBpZiAoZmlyc3RBY3RpdmVBdCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxzcGFuIHRpdGxlPXtTdHJpbmcoZmlyc3RBY3RpdmVBdCl9IGNsYXNzTmFtZT17c3R5bGUuZm9yfT5cbiAgICAgICAgICAgIGZvcnsnICd9XG4gICAgICAgICAgICB7aW50ZXJ2YWxUb0FiYnJldmlhdGVkRHVyYXRpb25TdHJpbmcoXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzdGFydDogZmlyc3RBY3RpdmVBdCxcbiAgICAgICAgICAgICAgICBlbmQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sIFtwcm9tUnVsZSwgc3R5bGVdKTtcblxuICBpZiAoaXNEZWxldGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8U3RhY2sgZ2FwPXsxfT5cbiAgICAgICAgPFNwaW5uZXIgLz5cbiAgICAgICAgRGVsZXRpbmdcbiAgICAgIDwvU3RhY2s+XG4gICAgKTtcbiAgfSBlbHNlIGlmIChpc0NyZWF0aW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTdGFjayBnYXA9ezF9PlxuICAgICAgICA8U3Bpbm5lciAvPlxuICAgICAgICBDcmVhdGluZ1xuICAgICAgPC9TdGFjaz5cbiAgICApO1xuICB9IGVsc2UgaWYgKHByb21SdWxlICYmIGlzQWxlcnRpbmdSdWxlKHByb21SdWxlKSkge1xuICAgIHJldHVybiAoXG4gICAgICA8U3RhY2sgZ2FwPXsxfT5cbiAgICAgICAgPEFsZXJ0U3RhdGVUYWcgc3RhdGU9e3Byb21SdWxlLnN0YXRlfSBpc1BhdXNlZD17aXNQYXVzZWR9IC8+XG4gICAgICAgIHtmb3JUaW1lfVxuICAgICAgPC9TdGFjaz5cbiAgICApO1xuICB9IGVsc2UgaWYgKHByb21SdWxlICYmIGlzUmVjb3JkaW5nUnVsZShwcm9tUnVsZSkpIHtcbiAgICByZXR1cm4gPD5SZWNvcmRpbmcgcnVsZTwvPjtcbiAgfVxuICByZXR1cm4gPD5uL2E8Lz47XG59O1xuXG5jb25zdCBnZXRTdHlsZSA9ICh0aGVtZTogR3JhZmFuYVRoZW1lMikgPT4gKHtcbiAgZm9yOiBjc3NgXG4gICAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuYm9keVNtYWxsLmZvbnRTaXplfTtcbiAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMudGV4dC5zZWNvbmRhcnl9O1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgcGFkZGluZy10b3A6IDJweDtcbiAgYCxcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/components/rules/RuleState.tsx\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/hooks/useAlertQueriesStatus.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAlertQueriesStatus: () => (/* binding */ useAlertQueriesStatus)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/dataSourceSrv.ts\");\n/* harmony import */ var _grafana_runtime_src_utils_DataSourceWithBackend__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/utils/DataSourceWithBackend.ts\");\n\n\n\n\nfunction useAlertQueriesStatus(queries) {\n  const allDataSourcesAvailable = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => queries.filter((query) => !(0,_grafana_runtime_src_utils_DataSourceWithBackend__WEBPACK_IMPORTED_MODULE_1__.isExpressionReference)(query.datasourceUid)).every((query) => {\n      const instanceSettings = (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_2__.getDataSourceSrv)().getInstanceSettings(query.datasourceUid);\n      return Boolean(instanceSettings);\n    }),\n    [queries]\n  );\n  return { allDataSourcesAvailable };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvaG9va3MvdXNlQWxlcnRRdWVyaWVzU3RhdHVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3QjtBQUVTO0FBQ0s7QUFHL0IsU0FBUyxzQkFBc0IsU0FBdUI7QUFDM0QsUUFBTSwwQkFBMEIsOENBQU87QUFBUCxJQUM5QixNQUNFLFFBQ0csT0FBTyxDQUFDLFVBQVUsQ0FBQyx1R0FBcUIsQ0FBQyxNQUFNLGFBQWEsQ0FBQyxFQUM3RCxNQUFNLENBQUMsVUFBVTtBQUNoQixZQUFNLG1CQUFtQixrRUFBZ0IsQ0FBQyxFQUFFLG9CQUFvQixNQUFNLGFBQWE7QUFDbkYsYUFBTyxRQUFRLGdCQUFnQjtBQUFBLElBQ2pDLENBQUM7QUFBQSxJQUNMLENBQUMsT0FBTztBQUFBLEVBQ1Y7QUFFQSxTQUFPLEVBQUUsd0JBQXdCO0FBQ25DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvZmVhdHVyZXMvYWxlcnRpbmcvdW5pZmllZC9ob29rcy91c2VBbGVydFF1ZXJpZXNTdGF0dXMudHM/NmIxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBnZXREYXRhU291cmNlU3J2IH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyBpc0V4cHJlc3Npb25SZWZlcmVuY2UgfSBmcm9tICdAZ3JhZmFuYS9ydW50aW1lL3NyYy91dGlscy9EYXRhU291cmNlV2l0aEJhY2tlbmQnO1xuaW1wb3J0IHsgQWxlcnRRdWVyeSB9IGZyb20gJ2FwcC90eXBlcy91bmlmaWVkLWFsZXJ0aW5nLWR0byc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBbGVydFF1ZXJpZXNTdGF0dXMocXVlcmllczogQWxlcnRRdWVyeVtdKSB7XG4gIGNvbnN0IGFsbERhdGFTb3VyY2VzQXZhaWxhYmxlID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgcXVlcmllc1xuICAgICAgICAuZmlsdGVyKChxdWVyeSkgPT4gIWlzRXhwcmVzc2lvblJlZmVyZW5jZShxdWVyeS5kYXRhc291cmNlVWlkKSlcbiAgICAgICAgLmV2ZXJ5KChxdWVyeSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGluc3RhbmNlU2V0dGluZ3MgPSBnZXREYXRhU291cmNlU3J2KCkuZ2V0SW5zdGFuY2VTZXR0aW5ncyhxdWVyeS5kYXRhc291cmNlVWlkKTtcbiAgICAgICAgICByZXR1cm4gQm9vbGVhbihpbnN0YW5jZVNldHRpbmdzKTtcbiAgICAgICAgfSksXG4gICAgW3F1ZXJpZXNdXG4gICk7XG5cbiAgcmV0dXJuIHsgYWxsRGF0YVNvdXJjZXNBdmFpbGFibGUgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/hooks/useAlertQueriesStatus.ts\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/hooks/useCombinedRule.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCloudCombinedRulesMatching: () => (/* binding */ useCloudCombinedRulesMatching),\n/* harmony export */   useCombinedRule: () => (/* binding */ useCombinedRule),\n/* harmony export */   useCombinedRulesMatching: () => (/* binding */ useCombinedRulesMatching),\n/* harmony export */   useDataSourceFeatures: () => (/* binding */ useDataSourceFeatures)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useAsync.js\");\n/* harmony import */ var app_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/types/index.ts\");\n/* harmony import */ var _api_alertRuleApi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/alerting/unified/api/alertRuleApi.ts\");\n/* harmony import */ var _api_featureDiscoveryApi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/alerting/unified/api/featureDiscoveryApi.ts\");\n/* harmony import */ var _state_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/alerting/unified/state/actions.ts\");\n/* harmony import */ var _utils_datasource__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/datasource.ts\");\n/* harmony import */ var _utils_redux__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/redux.ts\");\n/* harmony import */ var _utils_rule_id__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/rule-id.ts\");\n/* harmony import */ var _utils_rules__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/rules.ts\");\n/* harmony import */ var _useCombinedRuleNamespaces__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./public/app/features/alerting/unified/hooks/useCombinedRuleNamespaces.ts\");\n/* harmony import */ var _useUnifiedAlertingSelector__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./public/app/features/alerting/unified/hooks/useUnifiedAlertingSelector.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction useCombinedRulesMatching(ruleName, ruleSourceName) {\n  const requestState = useCombinedRulesLoader(ruleSourceName);\n  const combinedRules = (0,_useCombinedRuleNamespaces__WEBPACK_IMPORTED_MODULE_9__.useCombinedRuleNamespaces)(ruleSourceName);\n  const rules = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (!ruleName || !ruleSourceName || combinedRules.length === 0) {\n      return [];\n    }\n    const rules2 = [];\n    for (const namespace of combinedRules) {\n      for (const group of namespace.groups) {\n        for (const rule of group.rules) {\n          if (rule.name === ruleName) {\n            rules2.push(rule);\n          }\n        }\n      }\n    }\n    return rules2;\n  }, [ruleName, ruleSourceName, combinedRules]);\n  return {\n    ...requestState,\n    result: rules\n  };\n}\nfunction useCloudCombinedRulesMatching(ruleName, ruleSourceName, filter) {\n  const dsSettings = (0,_utils_datasource__WEBPACK_IMPORTED_MODULE_5__.getDataSourceByName)(ruleSourceName);\n  const { dsFeatures, isLoadingDsFeatures } = useDataSourceFeatures(ruleSourceName);\n  const {\n    currentData: promRuleNs = [],\n    isLoading: isLoadingPromRules,\n    error: promRuleNsError\n  } = _api_alertRuleApi__WEBPACK_IMPORTED_MODULE_2__.alertRuleApi.endpoints.prometheusRuleNamespaces.useQuery({\n    ruleSourceName,\n    ruleName,\n    namespace: filter?.namespace,\n    groupName: filter?.groupName\n  });\n  const [fetchRulerRuleGroup] = _api_alertRuleApi__WEBPACK_IMPORTED_MODULE_2__.alertRuleApi.endpoints.rulerRuleGroup.useLazyQuery();\n  const { loading, error, value } = (0,react_use__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(async () => {\n    if (!dsSettings) {\n      throw new Error(\"Unable to obtain data source settings\");\n    }\n    if (promRuleNsError) {\n      throw new Error(\"Unable to obtain Prometheus rules\");\n    }\n    const rulerGroups = [];\n    if (dsFeatures?.rulerConfig) {\n      const rulerConfig = dsFeatures.rulerConfig;\n      const nsGroups = promRuleNs.map((namespace) => namespace.groups.map((group) => ({ namespace, group }))).flat();\n      await Promise.allSettled(\n        nsGroups.map(async (nsGroup) => {\n          const rulerGroup = await fetchRulerRuleGroup({\n            rulerConfig,\n            namespace: nsGroup.namespace.name,\n            group: nsGroup.group.name\n          }).unwrap();\n          rulerGroups.push(rulerGroup);\n        })\n      );\n    }\n    const namespaces = promRuleNs.map((ns) => (0,_useCombinedRuleNamespaces__WEBPACK_IMPORTED_MODULE_9__.attachRulerRulesToCombinedRules)(dsSettings, ns, rulerGroups));\n    const rules = namespaces.flatMap((ns) => ns.groups.flatMap((group) => group.rules));\n    return rules;\n  }, [dsSettings, dsFeatures, isLoadingPromRules, promRuleNsError, promRuleNs, fetchRulerRuleGroup]);\n  return { loading: isLoadingDsFeatures || loading, error, rules: value };\n}\nfunction useCombinedRulesLoader(rulesSourceName, identifier) {\n  const dispatch = (0,app_types__WEBPACK_IMPORTED_MODULE_1__.useDispatch)();\n  const promRuleRequests = (0,_useUnifiedAlertingSelector__WEBPACK_IMPORTED_MODULE_10__.useUnifiedAlertingSelector)((state) => state.promRules);\n  const promRuleRequest = getRequestState(rulesSourceName, promRuleRequests);\n  const rulerRuleRequests = (0,_useUnifiedAlertingSelector__WEBPACK_IMPORTED_MODULE_10__.useUnifiedAlertingSelector)((state) => state.rulerRules);\n  const rulerRuleRequest = getRequestState(rulesSourceName, rulerRuleRequests);\n  const { loading } = (0,react_use__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(async () => {\n    if (!rulesSourceName) {\n      return;\n    }\n    await dispatch((0,_state_actions__WEBPACK_IMPORTED_MODULE_4__.fetchPromAndRulerRulesAction)({ rulesSourceName, identifier }));\n  }, [dispatch, rulesSourceName]);\n  return {\n    loading,\n    error: promRuleRequest.error ?? (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isRulerNotSupportedResponse)(rulerRuleRequest) ? void 0 : rulerRuleRequest.error,\n    dispatched: promRuleRequest.dispatched && rulerRuleRequest.dispatched\n  };\n}\nfunction getRequestState(ruleSourceName, slice) {\n  if (!ruleSourceName) {\n    return _utils_redux__WEBPACK_IMPORTED_MODULE_6__.initialAsyncRequestState;\n  }\n  const state = slice[ruleSourceName];\n  if (!state) {\n    return _utils_redux__WEBPACK_IMPORTED_MODULE_6__.initialAsyncRequestState;\n  }\n  return state;\n}\nfunction useCombinedRule({ ruleIdentifier }) {\n  const { ruleSourceName } = ruleIdentifier;\n  const dsSettings = (0,_utils_datasource__WEBPACK_IMPORTED_MODULE_5__.getDataSourceByName)(ruleSourceName);\n  const { dsFeatures, isLoadingDsFeatures } = useDataSourceFeatures(ruleSourceName);\n  const {\n    currentData: promRuleNs,\n    isLoading: isLoadingPromRules,\n    error: promRuleNsError\n  } = _api_alertRuleApi__WEBPACK_IMPORTED_MODULE_2__.alertRuleApi.endpoints.prometheusRuleNamespaces.useQuery(\n    {\n      // TODO Refactor parameters\n      ruleSourceName: ruleIdentifier.ruleSourceName,\n      namespace: (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isPrometheusRuleIdentifier)(ruleIdentifier) || (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isCloudRuleIdentifier)(ruleIdentifier) ? ruleIdentifier.namespace : void 0,\n      groupName: (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isPrometheusRuleIdentifier)(ruleIdentifier) || (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isCloudRuleIdentifier)(ruleIdentifier) ? ruleIdentifier.groupName : void 0,\n      ruleName: (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isPrometheusRuleIdentifier)(ruleIdentifier) || (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isCloudRuleIdentifier)(ruleIdentifier) ? ruleIdentifier.ruleName : void 0\n    }\n    // TODO – experiment with enabling these now that we request a single alert rule more efficiently.\n    // Requires a recent version of Prometheus with support for query params on /api/v1/rules\n    // {\n    //   refetchOnFocus: true,\n    //   refetchOnReconnect: true,\n    // }\n  );\n  const [\n    fetchRulerRuleGroup,\n    { currentData: rulerRuleGroup, isLoading: isLoadingRulerGroup, error: rulerRuleGroupError }\n  ] = _api_alertRuleApi__WEBPACK_IMPORTED_MODULE_2__.alertRuleApi.endpoints.rulerRuleGroup.useLazyQuery();\n  const [fetchRulerRules, { currentData: rulerRules, isLoading: isLoadingRulerRules, error: rulerRulesError }] = _api_alertRuleApi__WEBPACK_IMPORTED_MODULE_2__.alertRuleApi.endpoints.rulerRules.useLazyQuery();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!dsFeatures?.rulerConfig) {\n      return;\n    }\n    if (dsFeatures.rulerConfig && (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isCloudRuleIdentifier)(ruleIdentifier)) {\n      fetchRulerRuleGroup({\n        rulerConfig: dsFeatures.rulerConfig,\n        namespace: ruleIdentifier.namespace,\n        group: ruleIdentifier.groupName\n      });\n    } else if ((0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isGrafanaRuleIdentifier)(ruleIdentifier)) {\n      fetchRulerRules({ rulerConfig: dsFeatures.rulerConfig });\n    }\n  }, [dsFeatures, fetchRulerRuleGroup, fetchRulerRules, ruleIdentifier]);\n  const rule = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (!promRuleNs) {\n      return;\n    }\n    if ((0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isGrafanaRuleIdentifier)(ruleIdentifier)) {\n      const combinedNamespaces = (0,_useCombinedRuleNamespaces__WEBPACK_IMPORTED_MODULE_9__.combineRulesNamespaces)(\"grafana\", promRuleNs, rulerRules);\n      for (const namespace of combinedNamespaces) {\n        for (const group of namespace.groups) {\n          for (const rule2 of group.rules) {\n            const id = _utils_rule_id__WEBPACK_IMPORTED_MODULE_7__.fromCombinedRule(ruleSourceName, rule2);\n            if (_utils_rule_id__WEBPACK_IMPORTED_MODULE_7__.equal(id, ruleIdentifier)) {\n              return rule2;\n            }\n          }\n        }\n      }\n    }\n    if (!dsSettings) {\n      return;\n    }\n    if (promRuleNs.length > 0 && ((0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isCloudRuleIdentifier)(ruleIdentifier) || (0,_utils_rules__WEBPACK_IMPORTED_MODULE_8__.isPrometheusRuleIdentifier)(ruleIdentifier))) {\n      const namespaces = promRuleNs.map(\n        (ns) => (0,_useCombinedRuleNamespaces__WEBPACK_IMPORTED_MODULE_9__.attachRulerRulesToCombinedRules)(dsSettings, ns, rulerRuleGroup ? [rulerRuleGroup] : [])\n      );\n      for (const namespace of namespaces) {\n        for (const group of namespace.groups) {\n          for (const rule2 of group.rules) {\n            const id = _utils_rule_id__WEBPACK_IMPORTED_MODULE_7__.fromCombinedRule(ruleSourceName, rule2);\n            if (_utils_rule_id__WEBPACK_IMPORTED_MODULE_7__.equal(id, ruleIdentifier)) {\n              return rule2;\n            }\n          }\n        }\n      }\n    }\n    return;\n  }, [ruleIdentifier, ruleSourceName, promRuleNs, rulerRuleGroup, rulerRules, dsSettings]);\n  return {\n    loading: isLoadingDsFeatures || isLoadingPromRules || isLoadingRulerGroup || isLoadingRulerRules,\n    error: promRuleNsError ?? rulerRuleGroupError ?? rulerRulesError,\n    result: rule\n  };\n}\nconst grafanaRulerConfig = {\n  dataSourceName: _utils_datasource__WEBPACK_IMPORTED_MODULE_5__.GRAFANA_RULES_SOURCE_NAME,\n  apiVersion: \"legacy\"\n};\nconst grafanaDsFeatures = {\n  rulerConfig: grafanaRulerConfig\n};\nfunction useDataSourceFeatures(dataSourceName) {\n  const isGrafanaDs = (0,_utils_datasource__WEBPACK_IMPORTED_MODULE_5__.isGrafanaRulesSource)(dataSourceName);\n  const { currentData: dsFeatures, isLoading: isLoadingDsFeatures } = _api_featureDiscoveryApi__WEBPACK_IMPORTED_MODULE_3__.featureDiscoveryApi.endpoints.discoverDsFeatures.useQuery(\n    {\n      rulesSourceName: dataSourceName\n    },\n    { skip: isGrafanaDs }\n  );\n  if (isGrafanaDs) {\n    return { isLoadingDsFeatures: false, dsFeatures: grafanaDsFeatures };\n  }\n  return { isLoadingDsFeatures, dsFeatures };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvaG9va3MvdXNlQ29tYmluZWRSdWxlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtQztBQUNWO0FBRUc7QUFJQztBQUNPO0FBQ1M7QUFDd0M7QUFDSDtBQUMxRDtBQU1qQjtBQU1BO0FBQ29DO0FBRXBDLFNBQVMseUJBQ2QsVUFDQSxnQkFDbUM7QUFDbkMsUUFBTSxlQUFlLHVCQUF1QixjQUFjO0FBQzFELFFBQU0sZ0JBQWdCLHFGQUF5QixDQUFDLGNBQWM7QUFFOUQsUUFBTSxRQUFRLDhDQUFPLENBQUMsTUFBTTtBQUMxQixRQUFJLENBQUMsWUFBWSxDQUFDLGtCQUFrQixjQUFjLFdBQVcsR0FBRztBQUM5RCxhQUFPLENBQUM7QUFBQSxJQUNWO0FBRUEsVUFBTUEsU0FBd0IsQ0FBQztBQUUvQixlQUFXLGFBQWEsZUFBZTtBQUNyQyxpQkFBVyxTQUFTLFVBQVUsUUFBUTtBQUNwQyxtQkFBVyxRQUFRLE1BQU0sT0FBTztBQUM5QixjQUFJLEtBQUssU0FBUyxVQUFVO0FBQzFCLFlBQUFBLE9BQU0sS0FBSyxJQUFJO0FBQUEsVUFDakI7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFFQSxXQUFPQTtBQUFBLEVBQ1QsR0FBRyxDQUFDLFVBQVUsZ0JBQWdCLGFBQWEsQ0FBQztBQUU1QyxTQUFPO0FBQUEsSUFDTCxHQUFHO0FBQUEsSUFDSCxRQUFRO0FBQUEsRUFDVjtBQUNGO0FBRU8sU0FBUyw4QkFDZCxVQUNBLGdCQUNBLFFBQytEO0FBQy9ELFFBQU0sYUFBYSxzRUFBbUIsQ0FBQyxjQUFjO0FBQ3JELFFBQU0sRUFBRSxZQUFZLG9CQUFvQixJQUFJLHNCQUFzQixjQUFjO0FBRWhGLFFBQU07QUFBQSxJQUNKLGFBQWEsYUFBYSxDQUFDO0FBQUEsSUFDM0IsV0FBVztBQUFBLElBQ1gsT0FBTztBQUFBLEVBQ1QsSUFBSSwyREFBWSxDQUFDLFVBQVUseUJBQXlCLFNB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LFNBQU87QUFBQSxJQUNMLFNBQVMsdUJBQXVCLHNCQUFzQix1QkFBdUI7QUFBQSxJQUM3RSxPQUFPLG1CQUFtQix1QkFBdUI7QUFBQSxJQUNqRCxRQUFRO0FBQUEsRUFDVjtBQUNGO0FBRUEsTUFBTSxxQkFBNEM7QUFBQSxFQUNoRCxnQkFBZ0Isd0VBQXlCO0FBQXpCLEVBQ2hCLFlBQVk7QUFDZDtBQUVBLE1BQU0sb0JBQW9CO0FBQUEsRUFDeEIsYUFBYTtBQUNmO0FBRU8sU0FBUyxzQkFBc0IsZ0JBQXdCO0FBQzVELFFBQU0sY0FBYyx1RUFBb0IsQ0FBQyxjQUFjO0FBRXZELFFBQU0sRUFBRSxhQUFhLFlBQVksV0FBVyxvQkFBb0IsSUFDOUQseUVBQW1CLENBQUMsVUFBVSxtQkFBbUI7QUFBQSxJQUMvQztBQUFBLE1BQ0UsaUJBQWlCO0FBQUEsSUFDbkI7QUFBQSxJQUNBLEVBQUUsTUFBTSxZQUFZO0FBQUEsRUFDdEI7QUFFRixNQUFJLGFBQWE7QUFDZixXQUFPLEVBQUUscUJBQXFCLE9BQU8sWUFBWSxrQkFBa0I7QUFBQSxFQUNyRTtBQUVBLFNBQU8sRUFBRSxxQkFBcUIsV0FBVztBQUMzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvaG9va3MvdXNlQ29tYmluZWRSdWxlLnRzPzgyMGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQXN5bmMgfSBmcm9tICdyZWFjdC11c2UnO1xuXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJ2FwcC90eXBlcyc7XG5pbXBvcnQgeyBDb21iaW5lZFJ1bGUsIFJ1bGVJZGVudGlmaWVyLCBSdWxlTmFtZXNwYWNlLCBSdWxlckRhdGFTb3VyY2VDb25maWcgfSBmcm9tICdhcHAvdHlwZXMvdW5pZmllZC1hbGVydGluZyc7XG5pbXBvcnQgeyBSdWxlclJ1bGVHcm91cERUTywgUnVsZXJSdWxlc0NvbmZpZ0RUTyB9IGZyb20gJ2FwcC90eXBlcy91bmlmaWVkLWFsZXJ0aW5nLWR0byc7XG5cbmltcG9ydCB7IGFsZXJ0UnVsZUFwaSB9IGZyb20gJy4uL2FwaS9hbGVydFJ1bGVBcGknO1xuaW1wb3J0IHsgZmVhdHVyZURpc2NvdmVyeUFwaSB9IGZyb20gJy4uL2FwaS9mZWF0dXJlRGlzY292ZXJ5QXBpJztcbmltcG9ydCB7IGZldGNoUHJvbUFuZFJ1bGVyUnVsZXNBY3Rpb24gfSBmcm9tICcuLi9zdGF0ZS9hY3Rpb25zJztcbmltcG9ydCB7IGdldERhdGFTb3VyY2VCeU5hbWUsIEdSQUZBTkFfUlVMRVNfU09VUkNFX05BTUUsIGlzR3JhZmFuYVJ1bGVzU291cmNlIH0gZnJvbSAnLi4vdXRpbHMvZGF0YXNvdXJjZSc7XG5pbXBvcnQgeyBBc3luY1JlcXVlc3RNYXBTbGljZSwgQXN5bmNSZXF1ZXN0U3RhdGUsIGluaXRpYWxBc3luY1JlcXVlc3RTdGF0ZSB9IGZyb20gJy4uL3V0aWxzL3JlZHV4JztcbmltcG9ydCAqIGFzIHJ1bGVJZCBmcm9tICcuLi91dGlscy9ydWxlLWlkJztcbmltcG9ydCB7XG4gIGlzQ2xvdWRSdWxlSWRlbnRpZmllcixcbiAgaXNHcmFmYW5hUnVsZUlkZW50aWZpZXIsXG4gIGlzUHJvbWV0aGV1c1J1bGVJZGVudGlmaWVyLFxuICBpc1J1bGVyTm90U3VwcG9ydGVkUmVzcG9uc2UsXG59IGZyb20gJy4uL3V0aWxzL3J1bGVzJztcblxuaW1wb3J0IHtcbiAgYXR0YWNoUnVsZXJSdWxlc1RvQ29tYmluZWRSdWxlcyxcbiAgY29tYmluZVJ1bGVzTmFtZXNwYWNlcyxcbiAgdXNlQ29tYmluZWRSdWxlTmFtZXNwYWNlcyxcbn0gZnJvbSAnLi91c2VDb21iaW5lZFJ1bGVOYW1lc3BhY2VzJztcbmltcG9ydCB7IHVzZVVuaWZpZWRBbGVydGluZ1NlbGVjdG9yIH0gZnJvbSAnLi91c2VVbmlmaWVkQWxlcnRpbmdTZWxlY3Rvcic7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb21iaW5lZFJ1bGVzTWF0Y2hpbmcoXG4gIHJ1bGVOYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIHJ1bGVTb3VyY2VOYW1lOiBzdHJpbmcgfCB1bmRlZmluZWRcbik6IEFzeW5jUmVxdWVzdFN0YXRlPENvbWJpbmVkUnVsZVtdPiB7XG4gIGNvbnN0IHJlcXVlc3RTdGF0ZSA9IHVzZUNvbWJpbmVkUnVsZXNMb2FkZXIocnVsZVNvdXJjZU5hbWUpO1xuICBjb25zdCBjb21iaW5lZFJ1bGVzID0gdXNlQ29tYmluZWRSdWxlTmFtZXNwYWNlcyhydWxlU291cmNlTmFtZSk7XG5cbiAgY29uc3QgcnVsZXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIXJ1bGVOYW1lIHx8ICFydWxlU291cmNlTmFtZSB8fCBjb21iaW5lZFJ1bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHJ1bGVzOiBDb21iaW5lZFJ1bGVbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBuYW1lc3BhY2Ugb2YgY29tYmluZWRSdWxlcykge1xuICAgICAgZm9yIChjb25zdCBncm91cCBvZiBuYW1lc3BhY2UuZ3JvdXBzKSB7XG4gICAgICAgIGZvciAoY29uc3QgcnVsZSBvZiBncm91cC5ydWxlcykge1xuICAgICAgICAgIGlmIChydWxlLm5hbWUgPT09IHJ1bGVOYW1lKSB7XG4gICAgICAgICAgICBydWxlcy5wdXNoKHJ1bGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBydWxlcztcbiAgfSwgW3J1bGVOYW1lLCBydWxlU291cmNlTmFtZSwgY29tYmluZWRSdWxlc10pO1xuXG4gIHJldHVybiB7XG4gICAgLi4ucmVxdWVzdFN0YXRlLFxuICAgIHJlc3VsdDogcnVsZXMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDbG91ZENvbWJpbmVkUnVsZXNNYXRjaGluZyhcbiAgcnVsZU5hbWU6IHN0cmluZyxcbiAgcnVsZVNvdXJjZU5hbWU6IHN0cmluZyxcbiAgZmlsdGVyPzogeyBuYW1lc3BhY2U/OiBzdHJpbmc7IGdyb3VwTmFtZT86IHN0cmluZyB9XG4pOiB7IGxvYWRpbmc6IGJvb2xlYW47IGVycm9yPzogdW5rbm93bjsgcnVsZXM/OiBDb21iaW5lZFJ1bGVbXSB9IHtcbiAgY29uc3QgZHNTZXR0aW5ncyA9IGdldERhdGFTb3VyY2VCeU5hbWUocnVsZVNvdXJjZU5hbWUpO1xuICBjb25zdCB7IGRzRmVhdHVyZXMsIGlzTG9hZGluZ0RzRmVhdHVyZXMgfSA9IHVzZURhdGFTb3VyY2VGZWF0dXJlcyhydWxlU291cmNlTmFtZSk7XG5cbiAgY29uc3Qge1xuICAgIGN1cnJlbnREYXRhOiBwcm9tUnVsZU5zID0gW10sXG4gICAgaXNMb2FkaW5nOiBpc0xvYWRpbmdQcm9tUnVsZXMsXG4gICAgZXJyb3I6IHByb21SdWxlTnNFcnJvcixcbiAgfSA9IGFsZXJ0UnVsZUFwaS5lbmRwb2ludHMucHJvbWV0aGV1c1J1bGVOYW1lc3BhY2VzLnVzZVF1ZXJ5KHtcbiAgICBydWxlU291cmNlTmFtZTogcnVsZVNvdXJjZU5hbWUsXG4gICAgcnVsZU5hbWU6IHJ1bGVOYW1lLFxuICAgIG5hbWVzcGFjZTogZmlsdGVyPy5uYW1lc3BhY2UsXG4gICAgZ3JvdXBOYW1lOiBmaWx0ZXI/Lmdyb3VwTmFtZSxcbiAgfSk7XG5cbiAgY29uc3QgW2ZldGNoUnVsZXJSdWxlR3JvdXBdID0gYWxlcnRSdWxlQXBpLmVuZHBvaW50cy5ydWxlclJ1bGVHcm91cC51c2VMYXp5UXVlcnkoKTtcblxuICBjb25zdCB7IGxvYWRpbmcsIGVycm9yLCB2YWx1ZSB9ID0gdXNlQXN5bmMoYXN5bmMgKCkgPT4ge1xuICAgIGlmICghZHNTZXR0aW5ncykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gb2J0YWluIGRhdGEgc291cmNlIHNldHRpbmdzJyk7XG4gICAgfVxuXG4gICAgaWYgKHByb21SdWxlTnNFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gb2J0YWluIFByb21ldGhldXMgcnVsZXMnKTtcbiAgICB9XG5cbiAgICBjb25zdCBydWxlckdyb3VwczogUnVsZXJSdWxlR3JvdXBEVE9bXSA9IFtdO1xuICAgIGlmIChkc0ZlYXR1cmVzPy5ydWxlckNvbmZpZykge1xuICAgICAgY29uc3QgcnVsZXJDb25maWcgPSBkc0ZlYXR1cmVzLnJ1bGVyQ29uZmlnO1xuXG4gICAgICBjb25zdCBuc0dyb3VwcyA9IHByb21SdWxlTnNcbiAgICAgICAgLm1hcCgobmFtZXNwYWNlKSA9PiBuYW1lc3BhY2UuZ3JvdXBzLm1hcCgoZ3JvdXApID0+ICh7IG5hbWVzcGFjZTogbmFtZXNwYWNlLCBncm91cDogZ3JvdXAgfSkpKVxuICAgICAgICAuZmxhdCgpO1xuXG4gICAgICAvLyBSVEsgcXVlcnkgdGFrZXMgY2FyZSBvZiBkZWR1cGxpY2F0aW9uXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoXG4gICAgICAgIG5zR3JvdXBzLm1hcChhc3luYyAobnNHcm91cCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJ1bGVyR3JvdXAgPSBhd2FpdCBmZXRjaFJ1bGVyUnVsZUdyb3VwKHtcbiAgICAgICAgICAgIHJ1bGVyQ29uZmlnOiBydWxlckNvbmZpZyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogbnNHcm91cC5uYW1lc3BhY2UubmFtZSxcbiAgICAgICAgICAgIGdyb3VwOiBuc0dyb3VwLmdyb3VwLm5hbWUsXG4gICAgICAgICAgfSkudW53cmFwKCk7XG4gICAgICAgICAgcnVsZXJHcm91cHMucHVzaChydWxlckdyb3VwKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVE9ETyBKb2luIHdpdGggcnVsZXIgcnVsZXNcbiAgICBjb25zdCBuYW1lc3BhY2VzID0gcHJvbVJ1bGVOcy5tYXAoKG5zKSA9PiBhdHRhY2hSdWxlclJ1bGVzVG9Db21iaW5lZFJ1bGVzKGRzU2V0dGluZ3MsIG5zLCBydWxlckdyb3VwcykpO1xuICAgIGNvbnN0IHJ1bGVzID0gbmFtZXNwYWNlcy5mbGF0TWFwKChucykgPT4gbnMuZ3JvdXBzLmZsYXRNYXAoKGdyb3VwKSA9PiBncm91cC5ydWxlcykpO1xuXG4gICAgcmV0dXJuIHJ1bGVzO1xuICB9LCBbZHNTZXR0aW5ncywgZHNGZWF0dXJlcywgaXNMb2FkaW5nUHJvbVJ1bGVzLCBwcm9tUnVsZU5zRXJyb3IsIHByb21SdWxlTnMsIGZldGNoUnVsZXJSdWxlR3JvdXBdKTtcblxuICByZXR1cm4geyBsb2FkaW5nOiBpc0xvYWRpbmdEc0ZlYXR1cmVzIHx8IGxvYWRpbmcsIGVycm9yOiBlcnJvciwgcnVsZXM6IHZhbHVlIH07XG59XG5cbmZ1bmN0aW9uIHVzZUNvbWJpbmVkUnVsZXNMb2FkZXIoXG4gIHJ1bGVzU291cmNlTmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBpZGVudGlmaWVyPzogUnVsZUlkZW50aWZpZXJcbik6IEFzeW5jUmVxdWVzdFN0YXRlPHZvaWQ+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCBwcm9tUnVsZVJlcXVlc3RzID0gdXNlVW5pZmllZEFsZXJ0aW5nU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5wcm9tUnVsZXMpO1xuICBjb25zdCBwcm9tUnVsZVJlcXVlc3QgPSBnZXRSZXF1ZXN0U3RhdGUocnVsZXNTb3VyY2VOYW1lLCBwcm9tUnVsZVJlcXVlc3RzKTtcbiAgY29uc3QgcnVsZXJSdWxlUmVxdWVzdHMgPSB1c2VVbmlmaWVkQWxlcnRpbmdTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLnJ1bGVyUnVsZXMpO1xuICBjb25zdCBydWxlclJ1bGVSZXF1ZXN0ID0gZ2V0UmVxdWVzdFN0YXRlKHJ1bGVzU291cmNlTmFtZSwgcnVsZXJSdWxlUmVxdWVzdHMpO1xuXG4gIGNvbnN0IHsgbG9hZGluZyB9ID0gdXNlQXN5bmMoYXN5bmMgKCkgPT4ge1xuICAgIGlmICghcnVsZXNTb3VyY2VOYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXdhaXQgZGlzcGF0Y2goZmV0Y2hQcm9tQW5kUnVsZXJSdWxlc0FjdGlvbih7IHJ1bGVzU291cmNlTmFtZSwgaWRlbnRpZmllciB9KSk7XG4gIH0sIFtkaXNwYXRjaCwgcnVsZXNTb3VyY2VOYW1lXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkaW5nLFxuICAgIGVycm9yOiBwcm9tUnVsZVJlcXVlc3QuZXJyb3IgPz8gaXNSdWxlck5vdFN1cHBvcnRlZFJlc3BvbnNlKHJ1bGVyUnVsZVJlcXVlc3QpID8gdW5kZWZpbmVkIDogcnVsZXJSdWxlUmVxdWVzdC5lcnJvcixcbiAgICBkaXNwYXRjaGVkOiBwcm9tUnVsZVJlcXVlc3QuZGlzcGF0Y2hlZCAmJiBydWxlclJ1bGVSZXF1ZXN0LmRpc3BhdGNoZWQsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFJlcXVlc3RTdGF0ZShcbiAgcnVsZVNvdXJjZU5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgc2xpY2U6IEFzeW5jUmVxdWVzdE1hcFNsaWNlPFJ1bGVyUnVsZXNDb25maWdEVE8gfCBSdWxlTmFtZXNwYWNlW10gfCBudWxsPlxuKTogQXN5bmNSZXF1ZXN0U3RhdGU8UnVsZXJSdWxlc0NvbmZpZ0RUTyB8IFJ1bGVOYW1lc3BhY2VbXSB8IG51bGw+IHtcbiAgaWYgKCFydWxlU291cmNlTmFtZSkge1xuICAgIHJldHVybiBpbml0aWFsQXN5bmNSZXF1ZXN0U3RhdGU7XG4gIH1cblxuICBjb25zdCBzdGF0ZSA9IHNsaWNlW3J1bGVTb3VyY2VOYW1lXTtcblxuICBpZiAoIXN0YXRlKSB7XG4gICAgcmV0dXJuIGluaXRpYWxBc3luY1JlcXVlc3RTdGF0ZTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbWJpbmVkUnVsZSh7IHJ1bGVJZGVudGlmaWVyIH06IHsgcnVsZUlkZW50aWZpZXI6IFJ1bGVJZGVudGlmaWVyIH0pOiB7XG4gIGxvYWRpbmc6IGJvb2xlYW47XG4gIHJlc3VsdD86IENvbWJpbmVkUnVsZTtcbiAgZXJyb3I/OiB1bmtub3duO1xufSB7XG4gIGNvbnN0IHsgcnVsZVNvdXJjZU5hbWUgfSA9IHJ1bGVJZGVudGlmaWVyO1xuICBjb25zdCBkc1NldHRpbmdzID0gZ2V0RGF0YVNvdXJjZUJ5TmFtZShydWxlU291cmNlTmFtZSk7XG5cbiAgY29uc3QgeyBkc0ZlYXR1cmVzLCBpc0xvYWRpbmdEc0ZlYXR1cmVzIH0gPSB1c2VEYXRhU291cmNlRmVhdHVyZXMocnVsZVNvdXJjZU5hbWUpO1xuXG4gIGNvbnN0IHtcbiAgICBjdXJyZW50RGF0YTogcHJvbVJ1bGVOcyxcbiAgICBpc0xvYWRpbmc6IGlzTG9hZGluZ1Byb21SdWxlcyxcbiAgICBlcnJvcjogcHJvbVJ1bGVOc0Vycm9yLFxuICB9ID0gYWxlcnRSdWxlQXBpLmVuZHBvaW50cy5wcm9tZXRoZXVzUnVsZU5hbWVzcGFjZXMudXNlUXVlcnkoXG4gICAge1xuICAgICAgLy8gVE9ETyBSZWZhY3RvciBwYXJhbWV0ZXJzXG4gICAgICBydWxlU291cmNlTmFtZTogcnVsZUlkZW50aWZpZXIucnVsZVNvdXJjZU5hbWUsXG4gICAgICBuYW1lc3BhY2U6XG4gICAgICAgIGlzUHJvbWV0aGV1c1J1bGVJZGVudGlmaWVyKHJ1bGVJZGVudGlmaWVyKSB8fCBpc0Nsb3VkUnVsZUlkZW50aWZpZXIocnVsZUlkZW50aWZpZXIpXG4gICAgICAgICAgPyBydWxlSWRlbnRpZmllci5uYW1lc3BhY2VcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIGdyb3VwTmFtZTpcbiAgICAgICAgaXNQcm9tZXRoZXVzUnVsZUlkZW50aWZpZXIocnVsZUlkZW50aWZpZXIpIHx8IGlzQ2xvdWRSdWxlSWRlbnRpZmllcihydWxlSWRlbnRpZmllcilcbiAgICAgICAgICA/IHJ1bGVJZGVudGlmaWVyLmdyb3VwTmFtZVxuICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgcnVsZU5hbWU6XG4gICAgICAgIGlzUHJvbWV0aGV1c1J1bGVJZGVudGlmaWVyKHJ1bGVJZGVudGlmaWVyKSB8fCBpc0Nsb3VkUnVsZUlkZW50aWZpZXIocnVsZUlkZW50aWZpZXIpXG4gICAgICAgICAgPyBydWxlSWRlbnRpZmllci5ydWxlTmFtZVxuICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH1cbiAgICAvLyBUT0RPIOKAkyBleHBlcmltZW50IHdpdGggZW5hYmxpbmcgdGhlc2Ugbm93IHRoYXQgd2UgcmVxdWVzdCBhIHNpbmdsZSBhbGVydCBydWxlIG1vcmUgZWZmaWNpZW50bHkuXG4gICAgLy8gUmVxdWlyZXMgYSByZWNlbnQgdmVyc2lvbiBvZiBQcm9tZXRoZXVzIHdpdGggc3VwcG9ydCBmb3IgcXVlcnkgcGFyYW1zIG9uIC9hcGkvdjEvcnVsZXNcbiAgICAvLyB7XG4gICAgLy8gICByZWZldGNoT25Gb2N1czogdHJ1ZSxcbiAgICAvLyAgIHJlZmV0Y2hPblJlY29ubmVjdDogdHJ1ZSxcbiAgICAvLyB9XG4gICk7XG5cbiAgY29uc3QgW1xuICAgIGZldGNoUnVsZXJSdWxlR3JvdXAsXG4gICAgeyBjdXJyZW50RGF0YTogcnVsZXJSdWxlR3JvdXAsIGlzTG9hZGluZzogaXNMb2FkaW5nUnVsZXJHcm91cCwgZXJyb3I6IHJ1bGVyUnVsZUdyb3VwRXJyb3IgfSxcbiAgXSA9IGFsZXJ0UnVsZUFwaS5lbmRwb2ludHMucnVsZXJSdWxlR3JvdXAudXNlTGF6eVF1ZXJ5KCk7XG5cbiAgY29uc3QgW2ZldGNoUnVsZXJSdWxlcywgeyBjdXJyZW50RGF0YTogcnVsZXJSdWxlcywgaXNMb2FkaW5nOiBpc0xvYWRpbmdSdWxlclJ1bGVzLCBlcnJvcjogcnVsZXJSdWxlc0Vycm9yIH1dID1cbiAgICBhbGVydFJ1bGVBcGkuZW5kcG9pbnRzLnJ1bGVyUnVsZXMudXNlTGF6eVF1ZXJ5KCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWRzRmVhdHVyZXM/LnJ1bGVyQ29uZmlnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRzRmVhdHVyZXMucnVsZXJDb25maWcgJiYgaXNDbG91ZFJ1bGVJZGVudGlmaWVyKHJ1bGVJZGVudGlmaWVyKSkge1xuICAgICAgZmV0Y2hSdWxlclJ1bGVHcm91cCh7XG4gICAgICAgIHJ1bGVyQ29uZmlnOiBkc0ZlYXR1cmVzLnJ1bGVyQ29uZmlnLFxuICAgICAgICBuYW1lc3BhY2U6IHJ1bGVJZGVudGlmaWVyLm5hbWVzcGFjZSxcbiAgICAgICAgZ3JvdXA6IHJ1bGVJZGVudGlmaWVyLmdyb3VwTmFtZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaXNHcmFmYW5hUnVsZUlkZW50aWZpZXIocnVsZUlkZW50aWZpZXIpKSB7XG4gICAgICAvLyBUT0RPIEZldGNoIGEgc2luZ2xlIGdyb3VwIGZvciBHcmFmYW5hIG1hbmFnZWQgcnVsZXMsIHdlJ3JlIGN1cnJlbnRseSBzdGlsbCBmZXRjaGluZyBhbGwgcnVsZXMgZm9yIEdyYWZhbmEgbWFuYWdlZFxuICAgICAgZmV0Y2hSdWxlclJ1bGVzKHsgcnVsZXJDb25maWc6IGRzRmVhdHVyZXMucnVsZXJDb25maWcgfSk7XG4gICAgfVxuICB9LCBbZHNGZWF0dXJlcywgZmV0Y2hSdWxlclJ1bGVHcm91cCwgZmV0Y2hSdWxlclJ1bGVzLCBydWxlSWRlbnRpZmllcl0pO1xuXG4gIGNvbnN0IHJ1bGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIXByb21SdWxlTnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNHcmFmYW5hUnVsZUlkZW50aWZpZXIocnVsZUlkZW50aWZpZXIpKSB7XG4gICAgICBjb25zdCBjb21iaW5lZE5hbWVzcGFjZXMgPSBjb21iaW5lUnVsZXNOYW1lc3BhY2VzKCdncmFmYW5hJywgcHJvbVJ1bGVOcywgcnVsZXJSdWxlcyk7XG5cbiAgICAgIGZvciAoY29uc3QgbmFtZXNwYWNlIG9mIGNvbWJpbmVkTmFtZXNwYWNlcykge1xuICAgICAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIG5hbWVzcGFjZS5ncm91cHMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgZ3JvdXAucnVsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcnVsZUlkLmZyb21Db21iaW5lZFJ1bGUocnVsZVNvdXJjZU5hbWUsIHJ1bGUpO1xuXG4gICAgICAgICAgICBpZiAocnVsZUlkLmVxdWFsKGlkLCBydWxlSWRlbnRpZmllcikpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFkc1NldHRpbmdzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgcHJvbVJ1bGVOcy5sZW5ndGggPiAwICYmXG4gICAgICAoaXNDbG91ZFJ1bGVJZGVudGlmaWVyKHJ1bGVJZGVudGlmaWVyKSB8fCBpc1Byb21ldGhldXNSdWxlSWRlbnRpZmllcihydWxlSWRlbnRpZmllcikpXG4gICAgKSB7XG4gICAgICBjb25zdCBuYW1lc3BhY2VzID0gcHJvbVJ1bGVOcy5tYXAoKG5zKSA9PlxuICAgICAgICBhdHRhY2hSdWxlclJ1bGVzVG9Db21iaW5lZFJ1bGVzKGRzU2V0dGluZ3MsIG5zLCBydWxlclJ1bGVHcm91cCA/IFtydWxlclJ1bGVHcm91cF0gOiBbXSlcbiAgICAgICk7XG5cbiAgICAgIGZvciAoY29uc3QgbmFtZXNwYWNlIG9mIG5hbWVzcGFjZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBncm91cCBvZiBuYW1lc3BhY2UuZ3JvdXBzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBydWxlIG9mIGdyb3VwLnJ1bGVzKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHJ1bGVJZC5mcm9tQ29tYmluZWRSdWxlKHJ1bGVTb3VyY2VOYW1lLCBydWxlKTtcblxuICAgICAgICAgICAgaWYgKHJ1bGVJZC5lcXVhbChpZCwgcnVsZUlkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBydWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybjtcbiAgfSwgW3J1bGVJZGVudGlmaWVyLCBydWxlU291cmNlTmFtZSwgcHJvbVJ1bGVOcywgcnVsZXJSdWxlR3JvdXAsIHJ1bGVyUnVsZXMsIGRzU2V0dGluZ3NdKTtcblxuICByZXR1cm4ge1xuICAgIGxvYWRpbmc6IGlzTG9hZGluZ0RzRmVhdHVyZXMgfHwgaXNMb2FkaW5nUHJvbVJ1bGVzIHx8IGlzTG9hZGluZ1J1bGVyR3JvdXAgfHwgaXNMb2FkaW5nUnVsZXJSdWxlcyxcbiAgICBlcnJvcjogcHJvbVJ1bGVOc0Vycm9yID8/IHJ1bGVyUnVsZUdyb3VwRXJyb3IgPz8gcnVsZXJSdWxlc0Vycm9yLFxuICAgIHJlc3VsdDogcnVsZSxcbiAgfTtcbn1cblxuY29uc3QgZ3JhZmFuYVJ1bGVyQ29uZmlnOiBSdWxlckRhdGFTb3VyY2VDb25maWcgPSB7XG4gIGRhdGFTb3VyY2VOYW1lOiBHUkFGQU5BX1JVTEVTX1NPVVJDRV9OQU1FLFxuICBhcGlWZXJzaW9uOiAnbGVnYWN5Jyxcbn07XG5cbmNvbnN0IGdyYWZhbmFEc0ZlYXR1cmVzID0ge1xuICBydWxlckNvbmZpZzogZ3JhZmFuYVJ1bGVyQ29uZmlnLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZURhdGFTb3VyY2VGZWF0dXJlcyhkYXRhU291cmNlTmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IGlzR3JhZmFuYURzID0gaXNHcmFmYW5hUnVsZXNTb3VyY2UoZGF0YVNvdXJjZU5hbWUpO1xuXG4gIGNvbnN0IHsgY3VycmVudERhdGE6IGRzRmVhdHVyZXMsIGlzTG9hZGluZzogaXNMb2FkaW5nRHNGZWF0dXJlcyB9ID1cbiAgICBmZWF0dXJlRGlzY292ZXJ5QXBpLmVuZHBvaW50cy5kaXNjb3ZlckRzRmVhdHVyZXMudXNlUXVlcnkoXG4gICAgICB7XG4gICAgICAgIHJ1bGVzU291cmNlTmFtZTogZGF0YVNvdXJjZU5hbWUsXG4gICAgICB9LFxuICAgICAgeyBza2lwOiBpc0dyYWZhbmFEcyB9XG4gICAgKTtcblxuICBpZiAoaXNHcmFmYW5hRHMpIHtcbiAgICByZXR1cm4geyBpc0xvYWRpbmdEc0ZlYXR1cmVzOiBmYWxzZSwgZHNGZWF0dXJlczogZ3JhZmFuYURzRmVhdHVyZXMgfTtcbiAgfVxuXG4gIHJldHVybiB7IGlzTG9hZGluZ0RzRmVhdHVyZXMsIGRzRmVhdHVyZXMgfTtcbn1cbiJdLCJuYW1lcyI6WyJydWxlcyIsInJ1bGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/hooks/useCombinedRule.ts\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/state/AlertingQueryRunner.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AlertingQueryRunner: () => (/* binding */ AlertingQueryRunner)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/share.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/cache/rxjs-npm-7.8.0-722f1c7172-61b4d4fd32.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/cache/uuid-npm-9.0.0-46c41e3e43-8dd2c83c43.zip/node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/data.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/withLoadingIndicator.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/rangeutil.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/time.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/DataFrameJSON.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/services/dataSourceSrv.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/utils/toDataQueryError.ts\");\n/* harmony import */ var app_core_services_backend_srv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/core/services/backend_srv.ts\");\n/* harmony import */ var app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/expressions/guards.ts\");\n/* harmony import */ var app_features_query_state_processing_canceler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/query/state/processing/canceler.ts\");\n/* harmony import */ var app_features_query_state_processing_revision__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/query/state/processing/revision.ts\");\n/* harmony import */ var _utils_timeRange__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/timeRange.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nclass AlertingQueryRunner {\n  constructor(backendSrv = (0,app_core_services_backend_srv__WEBPACK_IMPORTED_MODULE_1__.getBackendSrv)(), dataSourceSrv = (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_6__.getDataSourceSrv)()) {\n    this.backendSrv = backendSrv;\n    this.dataSourceSrv = dataSourceSrv;\n    this.subject = new rxjs__WEBPACK_IMPORTED_MODULE_7__.ReplaySubject(1);\n    this.lastResult = {};\n  }\n  get() {\n    return this.subject.asObservable();\n  }\n  async run(queries) {\n    const empty = initialState(queries, _grafana_data__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Done);\n    const queriesToExclude = [];\n    for (const query of queries) {\n      const refId = query.model.refId;\n      if ((0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_2__.isExpressionQuery)(query.model)) {\n        continue;\n      }\n      const dataSourceInstance = await this.dataSourceSrv.get(query.datasourceUid);\n      const skipRunningQuery = dataSourceInstance.filterQuery && !dataSourceInstance.filterQuery(query.model);\n      if (skipRunningQuery) {\n        queriesToExclude.push(refId);\n      }\n    }\n    const queriesToRun = (0,lodash__WEBPACK_IMPORTED_MODULE_0__.reject)(queries, (q) => queriesToExclude.includes(q.model.refId));\n    if (queriesToRun.length === 0) {\n      return this.subject.next(empty);\n    }\n    this.subscription = runRequest(this.backendSrv, queriesToRun).subscribe({\n      next: (dataPerQuery) => {\n        const nextResult = applyChange(dataPerQuery, (refId, data) => {\n          const previous = this.lastResult[refId];\n          const preProcessed = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.preProcessPanelData)(data, previous);\n          return (0,app_features_query_state_processing_revision__WEBPACK_IMPORTED_MODULE_4__.setStructureRevision)(preProcessed, previous);\n        });\n        this.lastResult = nextResult;\n        this.subject.next(this.lastResult);\n      },\n      error: (error) => {\n        this.lastResult = mapErrorToPanelData(this.lastResult, error);\n        this.subject.next(this.lastResult);\n      }\n    });\n  }\n  cancel() {\n    if (!this.subscription) {\n      return;\n    }\n    this.subscription.unsubscribe();\n    let requestIsRunning = false;\n    const nextResult = applyChange(this.lastResult, (refId, data) => {\n      if (data.state === _grafana_data__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Loading) {\n        requestIsRunning = true;\n      }\n      return {\n        ...data,\n        state: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Done\n      };\n    });\n    if (requestIsRunning) {\n      this.subject.next(nextResult);\n    }\n  }\n  destroy() {\n    if (this.subject) {\n      this.subject.complete();\n    }\n    this.cancel();\n  }\n}\nconst runRequest = (backendSrv, queries) => {\n  const initial = initialState(queries, _grafana_data__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Loading);\n  const request = {\n    data: { data: queries },\n    url: \"/api/v1/eval\",\n    method: \"POST\",\n    requestId: (0,uuid__WEBPACK_IMPORTED_MODULE_10__[\"default\"])()\n  };\n  return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_11__.withLoadingIndicator)({\n    whileLoading: initial,\n    source: backendSrv.fetch(request).pipe(\n      mapToPanelData(initial),\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.catchError)((error) => (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.of)(mapErrorToPanelData(initial, error))),\n      (0,app_features_query_state_processing_canceler__WEBPACK_IMPORTED_MODULE_3__.cancelNetworkRequestsOnUnsubscribe)(backendSrv, request.requestId),\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.share)()\n    )\n  });\n};\nconst initialState = (queries, state) => {\n  return queries.reduce((dataByQuery, query) => {\n    dataByQuery[query.refId] = {\n      state,\n      series: [],\n      timeRange: getTimeRange(query, queries)\n    };\n    return dataByQuery;\n  }, {});\n};\nconst getTimeRange = (query, queries) => {\n  if ((0,app_features_expressions_guards__WEBPACK_IMPORTED_MODULE_2__.isExpressionQuery)(query.model)) {\n    const relative = (0,_utils_timeRange__WEBPACK_IMPORTED_MODULE_5__.getTimeRangeForExpression)(query.model, queries);\n    return _grafana_data__WEBPACK_IMPORTED_MODULE_15__.relativeToTimeRange(relative);\n  }\n  if (!query.relativeTimeRange) {\n    console.warn(`Query with refId: ${query.refId} did not have any relative time range, using default.`);\n    return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_16__.getDefaultTimeRange)();\n  }\n  return _grafana_data__WEBPACK_IMPORTED_MODULE_15__.relativeToTimeRange(query.relativeTimeRange);\n};\nconst mapToPanelData = (dataByQuery) => {\n  return (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.map)((response) => {\n    const { data } = response;\n    const results = {};\n    for (const [refId, result] of Object.entries(data.results)) {\n      results[refId] = {\n        timeRange: dataByQuery[refId].timeRange,\n        state: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Done,\n        series: result.frames.map(_grafana_data__WEBPACK_IMPORTED_MODULE_18__.dataFrameFromJSON)\n      };\n    }\n    return results;\n  });\n};\nconst mapErrorToPanelData = (lastResult, error) => {\n  const queryError = (0,_grafana_runtime__WEBPACK_IMPORTED_MODULE_19__.toDataQueryError)(error);\n  return applyChange(lastResult, (refId, data) => {\n    return {\n      ...data,\n      state: _grafana_data__WEBPACK_IMPORTED_MODULE_8__.LoadingState.Error,\n      error: queryError\n    };\n  });\n};\nconst applyChange = (initial, change) => {\n  const nextResult = {};\n  for (const [refId, data] of Object.entries(initial)) {\n    nextResult[refId] = change(refId, data);\n  }\n  return nextResult;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvc3RhdGUvQWxlcnRpbmdRdWVyeVJ1bm5lci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1QjtBQUN5RDtBQUN6QztBQUNWO0FBWXRCO0FBQzJEO0FBQ3hCO0FBQ1I7QUFDaUI7QUFDZDtBQUdLO0FBU25DLE1BQU0sb0JBQW9CO0FBQUEsRUFLL0IsWUFDVSxhQUFhLDRFQUFhLENBQUMsR0FDM0IsZ0JBQWdCLGtFQUFnQixDQUFDLEdBQ3pDO0FBRlE7QUFDQTtBQUVSLFNBQUssVUFBVSxJQUFJLCtDQUFhLENBQUMsQ0FBQztBQUNsQyxTQUFLLGFBQWEsQ0FBQztBQUFBLEVBQ3JCO0FBQUEsRUFFQSxNQUE2QztBQUMzQyxXQUFPLEtBQUssUUFBUSxhQUFhO0FBQUEsRUFDbkM7QUFBQSxFQUVBLE1BQU0sSUFBSSxTQUF1QjtBQUMvQixVQUFNLFFBQVEsYUFBYSxTQUFTLHVEQUFZLENBQUMsSUFBSTtBQUNyRCxVQUFNLG1CQUE2QixDQUFDO0FBSXBDLGVBQVcsU0FBUyxTQUFTO0FBQzNCLFlBQU0sUUFBUSxNQUFNLE1BQU07QUFFMUIsVUFBSSxrRkFBaUIsQ0FBQyxNQUFNLEtBQUssR0FBRztBQUNsQztBQUFBLE1BQ0Y7QUFFQSxZQUFNLHFCQUFxQixNQUFNLEtBQUssY0FBYyxJQUFJLE1BQU0sYUFBYTtBQUMzRSxZQUFNLG1CQUFtQixtQkFBbUIsZUFBZSxDQUFDLG1CQUFtQixZQUFZLE1BQU0sS0FBSztBQUV0RyxVQUFJLGtCQUFrQjtBQUNwQix5QkFBaUIsS0FBSyxLQUFLO0FBQUEsTUFDN0I7QUFBQSxJQUNGO0FBRUEsVUFBTSxlQUFlLDhDQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0saUJBQWlCLFNBQVMsRUFBRSxNQUFNLEtBQUssQ0FBQztBQUVwRixRQUFJLGFBQWEsV0FBVyxHQUFHO0FBQzdCLGFBQU8sS0FBSyxRQUFRLEtBQUssS0FBSztBQUFBLElBQ2hD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RDtBQUVBLE1BQU0saUJBQWlCLENBQ3JCLGdCQUNzRjtBQUN0RixTQUFPLG9EQUFHLENBQUMsQ0FBQyxhQUFhO0FBQ3ZCLFVBQU0sRUFBRSxLQUFLLElBQUk7QUFDakIsVUFBTSxVQUFxQyxDQUFDO0FBRTVDLGVBQVcsQ0FBQyxPQUFPLE1BQU0sS0FBSyxPQUFPLFFBQVEsS0FBSyxPQUFPLEdBQUc7QUFDMUQsY0FBUSxLQUFLLElBQUk7QUFBQSxRQUNmLFdBQVcsWUFBWSxLQUFLLEVBQUU7QUFBQSxRQUM5QixPQUFPLHVEQUFZLENBQUM7QUFBQSxRQUNwQixRQUFRLE9BQU8sT0FBTyxJQUFJLDZEQUFpQjtBQUFBLE1BQzdDO0FBQUEsSUFDRjtBQUVBLFdBQU87QUFBQSxFQUNULENBQUM7QUFDSDtBQUVBLE1BQU0sc0JBQXNCLENBQUMsWUFBdUMsVUFBNEM7QUFDOUcsUUFBTSxhQUFhLG1FQUFnQixDQUFDLEtBQUs7QUFFekMsU0FBTyxZQUFZLFlBQVksQ0FBQyxPQUFPLFNBQVM7QUFDOUMsV0FBTztBQUFBLE1BQ0wsR0FBRztBQUFBLE1BQ0gsT0FBTyx1REFBWSxDQUFDO0FBQUEsTUFDcEIsT0FBTztBQUFBLElBQ1Q7QUFBQSxFQUNGLENBQUM7QUFDSDtBQUVBLE1BQU0sY0FBYyxDQUNsQixTQUNBLFdBQzhCO0FBQzlCLFFBQU0sYUFBd0MsQ0FBQztBQUUvQyxhQUFXLENBQUMsT0FBTyxJQUFJLEtBQUssT0FBTyxRQUFRLE9BQU8sR0FBRztBQUNuRCxlQUFXLEtBQUssSUFBSSxPQUFPLE9BQU8sSUFBSTtBQUFBLEVBQ3hDO0FBRUEsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvZmVhdHVyZXMvYWxlcnRpbmcvdW5pZmllZC9zdGF0ZS9BbGVydGluZ1F1ZXJ5UnVubmVyLnRzPzNmNDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVqZWN0IH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBPcGVyYXRvckZ1bmN0aW9uLCBSZXBsYXlTdWJqZWN0LCBVbnN1YnNjcmliYWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgbWFwLCBzaGFyZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG5pbXBvcnQge1xuICBkYXRhRnJhbWVGcm9tSlNPTixcbiAgRGF0YUZyYW1lSlNPTixcbiAgZ2V0RGVmYXVsdFRpbWVSYW5nZSxcbiAgTG9hZGluZ1N0YXRlLFxuICBQYW5lbERhdGEsXG4gIHJhbmdlVXRpbCxcbiAgVGltZVJhbmdlLFxuICB3aXRoTG9hZGluZ0luZGljYXRvcixcbiAgcHJlUHJvY2Vzc1BhbmVsRGF0YSxcbn0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBGZXRjaFJlc3BvbnNlLCBnZXREYXRhU291cmNlU3J2LCB0b0RhdGFRdWVyeUVycm9yIH0gZnJvbSAnQGdyYWZhbmEvcnVudGltZSc7XG5pbXBvcnQgeyBCYWNrZW5kU3J2LCBnZXRCYWNrZW5kU3J2IH0gZnJvbSAnYXBwL2NvcmUvc2VydmljZXMvYmFja2VuZF9zcnYnO1xuaW1wb3J0IHsgaXNFeHByZXNzaW9uUXVlcnkgfSBmcm9tICdhcHAvZmVhdHVyZXMvZXhwcmVzc2lvbnMvZ3VhcmRzJztcbmltcG9ydCB7IGNhbmNlbE5ldHdvcmtSZXF1ZXN0c09uVW5zdWJzY3JpYmUgfSBmcm9tICdhcHAvZmVhdHVyZXMvcXVlcnkvc3RhdGUvcHJvY2Vzc2luZy9jYW5jZWxlcic7XG5pbXBvcnQgeyBzZXRTdHJ1Y3R1cmVSZXZpc2lvbiB9IGZyb20gJ2FwcC9mZWF0dXJlcy9xdWVyeS9zdGF0ZS9wcm9jZXNzaW5nL3JldmlzaW9uJztcbmltcG9ydCB7IEFsZXJ0UXVlcnkgfSBmcm9tICdhcHAvdHlwZXMvdW5pZmllZC1hbGVydGluZy1kdG8nO1xuXG5pbXBvcnQgeyBnZXRUaW1lUmFuZ2VGb3JFeHByZXNzaW9uIH0gZnJvbSAnLi4vdXRpbHMvdGltZVJhbmdlJztcblxuZXhwb3J0IGludGVyZmFjZSBBbGVydGluZ1F1ZXJ5UmVzdWx0IHtcbiAgZnJhbWVzOiBEYXRhRnJhbWVKU09OW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnRpbmdRdWVyeVJlc3BvbnNlIHtcbiAgcmVzdWx0czogUmVjb3JkPHN0cmluZywgQWxlcnRpbmdRdWVyeVJlc3VsdD47XG59XG5leHBvcnQgY2xhc3MgQWxlcnRpbmdRdWVyeVJ1bm5lciB7XG4gIHByaXZhdGUgc3ViamVjdDogUmVwbGF5U3ViamVjdDxSZWNvcmQ8c3RyaW5nLCBQYW5lbERhdGE+PjtcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb24/OiBVbnN1YnNjcmliYWJsZTtcbiAgcHJpdmF0ZSBsYXN0UmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBQYW5lbERhdGE+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYmFja2VuZFNydiA9IGdldEJhY2tlbmRTcnYoKSxcbiAgICBwcml2YXRlIGRhdGFTb3VyY2VTcnYgPSBnZXREYXRhU291cmNlU3J2KClcbiAgKSB7XG4gICAgdGhpcy5zdWJqZWN0ID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG4gICAgdGhpcy5sYXN0UmVzdWx0ID0ge307XG4gIH1cblxuICBnZXQoKTogT2JzZXJ2YWJsZTxSZWNvcmQ8c3RyaW5nLCBQYW5lbERhdGE+PiB7XG4gICAgcmV0dXJuIHRoaXMuc3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgfVxuXG4gIGFzeW5jIHJ1bihxdWVyaWVzOiBBbGVydFF1ZXJ5W10pIHtcbiAgICBjb25zdCBlbXB0eSA9IGluaXRpYWxTdGF0ZShxdWVyaWVzLCBMb2FkaW5nU3RhdGUuRG9uZSk7XG4gICAgY29uc3QgcXVlcmllc1RvRXhjbHVkZTogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIGRvIG5vdCBleGVjdXRlIGlmIG9uZSBtb3JlIG9mIHRoZSBxdWVyaWVzIGFyZSBub3QgcnVubmFibGUsXG4gICAgLy8gZm9yIGV4YW1wbGUgbm90IGNvbXBsZXRlbHkgY29uZmlndXJlZFxuICAgIGZvciAoY29uc3QgcXVlcnkgb2YgcXVlcmllcykge1xuICAgICAgY29uc3QgcmVmSWQgPSBxdWVyeS5tb2RlbC5yZWZJZDtcblxuICAgICAgaWYgKGlzRXhwcmVzc2lvblF1ZXJ5KHF1ZXJ5Lm1vZGVsKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YVNvdXJjZUluc3RhbmNlID0gYXdhaXQgdGhpcy5kYXRhU291cmNlU3J2LmdldChxdWVyeS5kYXRhc291cmNlVWlkKTtcbiAgICAgIGNvbnN0IHNraXBSdW5uaW5nUXVlcnkgPSBkYXRhU291cmNlSW5zdGFuY2UuZmlsdGVyUXVlcnkgJiYgIWRhdGFTb3VyY2VJbnN0YW5jZS5maWx0ZXJRdWVyeShxdWVyeS5tb2RlbCk7XG5cbiAgICAgIGlmIChza2lwUnVubmluZ1F1ZXJ5KSB7XG4gICAgICAgIHF1ZXJpZXNUb0V4Y2x1ZGUucHVzaChyZWZJZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcXVlcmllc1RvUnVuID0gcmVqZWN0KHF1ZXJpZXMsIChxKSA9PiBxdWVyaWVzVG9FeGNsdWRlLmluY2x1ZGVzKHEubW9kZWwucmVmSWQpKTtcblxuICAgIGlmIChxdWVyaWVzVG9SdW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdWJqZWN0Lm5leHQoZW1wdHkpO1xuICAgIH1cblxuICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gcnVuUmVxdWVzdCh0aGlzLmJhY2tlbmRTcnYsIHF1ZXJpZXNUb1J1bikuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChkYXRhUGVyUXVlcnkpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dFJlc3VsdCA9IGFwcGx5Q2hhbmdlKGRhdGFQZXJRdWVyeSwgKHJlZklkLCBkYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3QgcHJldmlvdXMgPSB0aGlzLmxhc3RSZXN1bHRbcmVmSWRdO1xuICAgICAgICAgIGNvbnN0IHByZVByb2Nlc3NlZCA9IHByZVByb2Nlc3NQYW5lbERhdGEoZGF0YSwgcHJldmlvdXMpO1xuICAgICAgICAgIHJldHVybiBzZXRTdHJ1Y3R1cmVSZXZpc2lvbihwcmVQcm9jZXNzZWQsIHByZXZpb3VzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5sYXN0UmVzdWx0ID0gbmV4dFJlc3VsdDtcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQodGhpcy5sYXN0UmVzdWx0KTtcbiAgICAgIH0sXG5cbiAgICAgIGVycm9yOiAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICAgIHRoaXMubGFzdFJlc3VsdCA9IG1hcEVycm9yVG9QYW5lbERhdGEodGhpcy5sYXN0UmVzdWx0LCBlcnJvcik7XG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMubGFzdFJlc3VsdCk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIGlmICghdGhpcy5zdWJzY3JpcHRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblxuICAgIGxldCByZXF1ZXN0SXNSdW5uaW5nID0gZmFsc2U7XG5cbiAgICBjb25zdCBuZXh0UmVzdWx0ID0gYXBwbHlDaGFuZ2UodGhpcy5sYXN0UmVzdWx0LCAocmVmSWQsIGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLnN0YXRlID09PSBMb2FkaW5nU3RhdGUuTG9hZGluZykge1xuICAgICAgICByZXF1ZXN0SXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgc3RhdGU6IExvYWRpbmdTdGF0ZS5Eb25lLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGlmIChyZXF1ZXN0SXNSdW5uaW5nKSB7XG4gICAgICB0aGlzLnN1YmplY3QubmV4dChuZXh0UmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLnN1YmplY3QpIHtcbiAgICAgIHRoaXMuc3ViamVjdC5jb21wbGV0ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuY2FuY2VsKCk7XG4gIH1cbn1cblxuY29uc3QgcnVuUmVxdWVzdCA9IChiYWNrZW5kU3J2OiBCYWNrZW5kU3J2LCBxdWVyaWVzOiBBbGVydFF1ZXJ5W10pOiBPYnNlcnZhYmxlPFJlY29yZDxzdHJpbmcsIFBhbmVsRGF0YT4+ID0+IHtcbiAgY29uc3QgaW5pdGlhbCA9IGluaXRpYWxTdGF0ZShxdWVyaWVzLCBMb2FkaW5nU3RhdGUuTG9hZGluZyk7XG4gIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgZGF0YTogeyBkYXRhOiBxdWVyaWVzIH0sXG4gICAgdXJsOiAnL2FwaS92MS9ldmFsJyxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICByZXF1ZXN0SWQ6IHV1aWR2NCgpLFxuICB9O1xuXG4gIHJldHVybiB3aXRoTG9hZGluZ0luZGljYXRvcih7XG4gICAgd2hpbGVMb2FkaW5nOiBpbml0aWFsLFxuICAgIHNvdXJjZTogYmFja2VuZFNydi5mZXRjaDxBbGVydGluZ1F1ZXJ5UmVzcG9uc2U+KHJlcXVlc3QpLnBpcGUoXG4gICAgICBtYXBUb1BhbmVsRGF0YShpbml0aWFsKSxcbiAgICAgIGNhdGNoRXJyb3IoKGVycm9yKSA9PiBvZihtYXBFcnJvclRvUGFuZWxEYXRhKGluaXRpYWwsIGVycm9yKSkpLFxuICAgICAgY2FuY2VsTmV0d29ya1JlcXVlc3RzT25VbnN1YnNjcmliZShiYWNrZW5kU3J2LCByZXF1ZXN0LnJlcXVlc3RJZCksXG4gICAgICBzaGFyZSgpXG4gICAgKSxcbiAgfSk7XG59O1xuXG5jb25zdCBpbml0aWFsU3RhdGUgPSAocXVlcmllczogQWxlcnRRdWVyeVtdLCBzdGF0ZTogTG9hZGluZ1N0YXRlKTogUmVjb3JkPHN0cmluZywgUGFuZWxEYXRhPiA9PiB7XG4gIHJldHVybiBxdWVyaWVzLnJlZHVjZSgoZGF0YUJ5UXVlcnk6IFJlY29yZDxzdHJpbmcsIFBhbmVsRGF0YT4sIHF1ZXJ5KSA9PiB7XG4gICAgZGF0YUJ5UXVlcnlbcXVlcnkucmVmSWRdID0ge1xuICAgICAgc3RhdGUsXG4gICAgICBzZXJpZXM6IFtdLFxuICAgICAgdGltZVJhbmdlOiBnZXRUaW1lUmFuZ2UocXVlcnksIHF1ZXJpZXMpLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGF0YUJ5UXVlcnk7XG4gIH0sIHt9KTtcbn07XG5cbmNvbnN0IGdldFRpbWVSYW5nZSA9IChxdWVyeTogQWxlcnRRdWVyeSwgcXVlcmllczogQWxlcnRRdWVyeVtdKTogVGltZVJhbmdlID0+IHtcbiAgaWYgKGlzRXhwcmVzc2lvblF1ZXJ5KHF1ZXJ5Lm1vZGVsKSkge1xuICAgIGNvbnN0IHJlbGF0aXZlID0gZ2V0VGltZVJhbmdlRm9yRXhwcmVzc2lvbihxdWVyeS5tb2RlbCwgcXVlcmllcyk7XG4gICAgcmV0dXJuIHJhbmdlVXRpbC5yZWxhdGl2ZVRvVGltZVJhbmdlKHJlbGF0aXZlKTtcbiAgfVxuXG4gIGlmICghcXVlcnkucmVsYXRpdmVUaW1lUmFuZ2UpIHtcbiAgICBjb25zb2xlLndhcm4oYFF1ZXJ5IHdpdGggcmVmSWQ6ICR7cXVlcnkucmVmSWR9IGRpZCBub3QgaGF2ZSBhbnkgcmVsYXRpdmUgdGltZSByYW5nZSwgdXNpbmcgZGVmYXVsdC5gKTtcbiAgICByZXR1cm4gZ2V0RGVmYXVsdFRpbWVSYW5nZSgpO1xuICB9XG5cbiAgcmV0dXJuIHJhbmdlVXRpbC5yZWxhdGl2ZVRvVGltZVJhbmdlKHF1ZXJ5LnJlbGF0aXZlVGltZVJhbmdlKTtcbn07XG5cbmNvbnN0IG1hcFRvUGFuZWxEYXRhID0gKFxuICBkYXRhQnlRdWVyeTogUmVjb3JkPHN0cmluZywgUGFuZWxEYXRhPlxuKTogT3BlcmF0b3JGdW5jdGlvbjxGZXRjaFJlc3BvbnNlPEFsZXJ0aW5nUXVlcnlSZXNwb25zZT4sIFJlY29yZDxzdHJpbmcsIFBhbmVsRGF0YT4+ID0+IHtcbiAgcmV0dXJuIG1hcCgocmVzcG9uc2UpID0+IHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IHJlc3BvbnNlO1xuICAgIGNvbnN0IHJlc3VsdHM6IFJlY29yZDxzdHJpbmcsIFBhbmVsRGF0YT4gPSB7fTtcblxuICAgIGZvciAoY29uc3QgW3JlZklkLCByZXN1bHRdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEucmVzdWx0cykpIHtcbiAgICAgIHJlc3VsdHNbcmVmSWRdID0ge1xuICAgICAgICB0aW1lUmFuZ2U6IGRhdGFCeVF1ZXJ5W3JlZklkXS50aW1lUmFuZ2UsXG4gICAgICAgIHN0YXRlOiBMb2FkaW5nU3RhdGUuRG9uZSxcbiAgICAgICAgc2VyaWVzOiByZXN1bHQuZnJhbWVzLm1hcChkYXRhRnJhbWVGcm9tSlNPTiksXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9KTtcbn07XG5cbmNvbnN0IG1hcEVycm9yVG9QYW5lbERhdGEgPSAobGFzdFJlc3VsdDogUmVjb3JkPHN0cmluZywgUGFuZWxEYXRhPiwgZXJyb3I6IEVycm9yKTogUmVjb3JkPHN0cmluZywgUGFuZWxEYXRhPiA9PiB7XG4gIGNvbnN0IHF1ZXJ5RXJyb3IgPSB0b0RhdGFRdWVyeUVycm9yKGVycm9yKTtcblxuICByZXR1cm4gYXBwbHlDaGFuZ2UobGFzdFJlc3VsdCwgKHJlZklkLCBkYXRhKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRhdGEsXG4gICAgICBzdGF0ZTogTG9hZGluZ1N0YXRlLkVycm9yLFxuICAgICAgZXJyb3I6IHF1ZXJ5RXJyb3IsXG4gICAgfTtcbiAgfSk7XG59O1xuXG5jb25zdCBhcHBseUNoYW5nZSA9IChcbiAgaW5pdGlhbDogUmVjb3JkPHN0cmluZywgUGFuZWxEYXRhPixcbiAgY2hhbmdlOiAocmVmSWQ6IHN0cmluZywgZGF0YTogUGFuZWxEYXRhKSA9PiBQYW5lbERhdGFcbik6IFJlY29yZDxzdHJpbmcsIFBhbmVsRGF0YT4gPT4ge1xuICBjb25zdCBuZXh0UmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBQYW5lbERhdGE+ID0ge307XG5cbiAgZm9yIChjb25zdCBbcmVmSWQsIGRhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGluaXRpYWwpKSB7XG4gICAgbmV4dFJlc3VsdFtyZWZJZF0gPSBjaGFuZ2UocmVmSWQsIGRhdGEpO1xuICB9XG5cbiAgcmV0dXJuIG5leHRSZXN1bHQ7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/state/AlertingQueryRunner.ts\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/utils/query.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   alertRuleToQueries: () => (/* binding */ alertRuleToQueries),\n/* harmony export */   dataQueryToAlertQuery: () => (/* binding */ dataQueryToAlertQuery)\n/* harmony export */ });\n/* harmony import */ var _datasource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/datasource.ts\");\n/* harmony import */ var _rules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/features/alerting/unified/utils/rules.ts\");\n\n\n\nfunction alertRuleToQueries(combinedRule) {\n  if (!combinedRule) {\n    return [];\n  }\n  const { namespace, rulerRule } = combinedRule;\n  const { rulesSource } = namespace;\n  if ((0,_datasource__WEBPACK_IMPORTED_MODULE_0__.isGrafanaRulesSource)(rulesSource)) {\n    if ((0,_rules__WEBPACK_IMPORTED_MODULE_1__.isGrafanaRulerRule)(rulerRule)) {\n      return rulerRule.grafana_alert.data;\n    }\n  }\n  if ((0,_datasource__WEBPACK_IMPORTED_MODULE_0__.isCloudRulesSource)(rulesSource)) {\n    const model = cloudAlertRuleToModel(rulesSource, combinedRule);\n    return [dataQueryToAlertQuery(model, rulesSource.uid)];\n  }\n  return [];\n}\nfunction dataQueryToAlertQuery(dataQuery, dataSourceUid) {\n  return {\n    refId: dataQuery.refId,\n    datasourceUid: dataSourceUid,\n    queryType: \"\",\n    model: dataQuery,\n    relativeTimeRange: {\n      from: 360,\n      to: 0\n    }\n  };\n}\nfunction cloudAlertRuleToModel(dsSettings, rule) {\n  const refId = \"A\";\n  switch (dsSettings.type) {\n    case \"prometheus\": {\n      const query = {\n        refId,\n        expr: rule.query\n      };\n      return query;\n    }\n    case \"loki\": {\n      const query = {\n        refId,\n        expr: rule.query\n      };\n      return query;\n    }\n    default:\n      throw new Error(`Query for datasource type ${dsSettings.type} is currently not supported by cloud alert rules.`);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvdXRpbHMvcXVlcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFPeUQ7QUFDdEI7QUFFNUIsU0FBUyxtQkFBbUIsY0FBNkQ7QUFDOUYsTUFBSSxDQUFDLGNBQWM7QUFDakIsV0FBTyxDQUFDO0FBQUEsRUFDVjtBQUNBLFFBQU0sRUFBRSxXQUFXLFVBQVUsSUFBSTtBQUNqQyxRQUFNLEVBQUUsWUFBWSxJQUFJO0FBRXhCLE1BQUksaUVBQW9CLENBQUMsV0FBVyxHQUFHO0FBQ3JDLFFBQUksMERBQWtCLENBQUMsU0FBUyxHQUFHO0FBQ2pDLGFBQU8sVUFBVSxjQUFjO0FBQUEsSUFDakM7QUFBQSxFQUNGO0FBRUEsTUFBSSwrREFBa0IsQ0FBQyxXQUFXLEdBQUc7QUFDbkMsVUFBTSxRQUFRLHNCQUFzQixhQUFhLFlBQVk7QUFFN0QsV0FBTyxDQUFDLHNCQUFzQixPQUFPLFlBQVksR0FBRyxDQUFDO0FBQUEsRUFDdkQ7QUFFQSxTQUFPLENBQUM7QUFDVjtBQUVPLFNBQVMsc0JBQXNCLFdBQXNCLGVBQW1DO0FBQzdGLFNBQU87QUFBQSxJQUNMLE9BQU8sVUFBVTtBQUFBLElBQ2pCLGVBQWU7QUFBQSxJQUNmLFdBQVc7QUFBQSxJQUNYLE9BQU87QUFBQSxJQUNQLG1CQUFtQjtBQUFBLE1BQ2pCLE1BQU07QUFBQSxNQUNOLElBQUk7QUFBQSxJQUNOO0FBQUEsRUFDRjtBQUNGO0FBRUEsU0FBUyxzQkFBc0IsWUFBd0MsTUFBK0I7QUFDcEcsUUFBTSxRQUFRO0FBRWQsVUFBUSxXQUFXLE1BQU07QUFBQSxJQUN2QixLQUFLLGNBQWM7QUFDakIsWUFBTSxRQUFtQjtBQUFBLFFBQ3ZCO0FBQUEsUUFDQSxNQUFNLEtBQUs7QUFBQSxNQUNiO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFBQSxJQUVBLEtBQUssUUFBUTtBQUNYLFlBQU0sUUFBbUI7QUFBQSxRQUN2QjtBQUFBLFFBQ0EsTUFBTSxLQUFLO0FBQUEsTUFDYjtBQUVBLGFBQU87QUFBQSxJQUNUO0FBQUEsSUFFQTtBQUNFLFlBQU0sSUFBSSxNQUFNLDZCQUE2QixXQUFXLHVEQUF1RDtBQUFBLEVBQ25IO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vcHVibGljL2FwcC9mZWF0dXJlcy9hbGVydGluZy91bmlmaWVkL3V0aWxzL3F1ZXJ5LnRzPzMxYzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YVNvdXJjZUluc3RhbmNlU2V0dGluZ3MgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IERhdGFRdWVyeSB9IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5pbXBvcnQgeyBMb2tpUXVlcnkgfSBmcm9tICdhcHAvcGx1Z2lucy9kYXRhc291cmNlL2xva2kvdHlwZXMnO1xuaW1wb3J0IHsgUHJvbVF1ZXJ5IH0gZnJvbSAnYXBwL3BsdWdpbnMvZGF0YXNvdXJjZS9wcm9tZXRoZXVzL3R5cGVzJztcbmltcG9ydCB7IENvbWJpbmVkUnVsZSB9IGZyb20gJ2FwcC90eXBlcy91bmlmaWVkLWFsZXJ0aW5nJztcbmltcG9ydCB7IEFsZXJ0UXVlcnkgfSBmcm9tICdhcHAvdHlwZXMvdW5pZmllZC1hbGVydGluZy1kdG8nO1xuXG5pbXBvcnQgeyBpc0Nsb3VkUnVsZXNTb3VyY2UsIGlzR3JhZmFuYVJ1bGVzU291cmNlIH0gZnJvbSAnLi9kYXRhc291cmNlJztcbmltcG9ydCB7IGlzR3JhZmFuYVJ1bGVyUnVsZSB9IGZyb20gJy4vcnVsZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gYWxlcnRSdWxlVG9RdWVyaWVzKGNvbWJpbmVkUnVsZTogQ29tYmluZWRSdWxlIHwgdW5kZWZpbmVkIHwgbnVsbCk6IEFsZXJ0UXVlcnlbXSB7XG4gIGlmICghY29tYmluZWRSdWxlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IHsgbmFtZXNwYWNlLCBydWxlclJ1bGUgfSA9IGNvbWJpbmVkUnVsZTtcbiAgY29uc3QgeyBydWxlc1NvdXJjZSB9ID0gbmFtZXNwYWNlO1xuXG4gIGlmIChpc0dyYWZhbmFSdWxlc1NvdXJjZShydWxlc1NvdXJjZSkpIHtcbiAgICBpZiAoaXNHcmFmYW5hUnVsZXJSdWxlKHJ1bGVyUnVsZSkpIHtcbiAgICAgIHJldHVybiBydWxlclJ1bGUuZ3JhZmFuYV9hbGVydC5kYXRhO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc0Nsb3VkUnVsZXNTb3VyY2UocnVsZXNTb3VyY2UpKSB7XG4gICAgY29uc3QgbW9kZWwgPSBjbG91ZEFsZXJ0UnVsZVRvTW9kZWwocnVsZXNTb3VyY2UsIGNvbWJpbmVkUnVsZSk7XG5cbiAgICByZXR1cm4gW2RhdGFRdWVyeVRvQWxlcnRRdWVyeShtb2RlbCwgcnVsZXNTb3VyY2UudWlkKV07XG4gIH1cblxuICByZXR1cm4gW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhUXVlcnlUb0FsZXJ0UXVlcnkoZGF0YVF1ZXJ5OiBEYXRhUXVlcnksIGRhdGFTb3VyY2VVaWQ6IHN0cmluZyk6IEFsZXJ0UXVlcnkge1xuICByZXR1cm4ge1xuICAgIHJlZklkOiBkYXRhUXVlcnkucmVmSWQsXG4gICAgZGF0YXNvdXJjZVVpZDogZGF0YVNvdXJjZVVpZCxcbiAgICBxdWVyeVR5cGU6ICcnLFxuICAgIG1vZGVsOiBkYXRhUXVlcnksXG4gICAgcmVsYXRpdmVUaW1lUmFuZ2U6IHtcbiAgICAgIGZyb206IDM2MCxcbiAgICAgIHRvOiAwLFxuICAgIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsb3VkQWxlcnRSdWxlVG9Nb2RlbChkc1NldHRpbmdzOiBEYXRhU291cmNlSW5zdGFuY2VTZXR0aW5ncywgcnVsZTogQ29tYmluZWRSdWxlKTogRGF0YVF1ZXJ5IHtcbiAgY29uc3QgcmVmSWQgPSAnQSc7XG5cbiAgc3dpdGNoIChkc1NldHRpbmdzLnR5cGUpIHtcbiAgICBjYXNlICdwcm9tZXRoZXVzJzoge1xuICAgICAgY29uc3QgcXVlcnk6IFByb21RdWVyeSA9IHtcbiAgICAgICAgcmVmSWQsXG4gICAgICAgIGV4cHI6IHJ1bGUucXVlcnksXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcXVlcnk7XG4gICAgfVxuXG4gICAgY2FzZSAnbG9raSc6IHtcbiAgICAgIGNvbnN0IHF1ZXJ5OiBMb2tpUXVlcnkgPSB7XG4gICAgICAgIHJlZklkLFxuICAgICAgICBleHByOiBydWxlLnF1ZXJ5LFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgIH1cblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFF1ZXJ5IGZvciBkYXRhc291cmNlIHR5cGUgJHtkc1NldHRpbmdzLnR5cGV9IGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGJ5IGNsb3VkIGFsZXJ0IHJ1bGVzLmApO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/utils/query.ts\n");

/***/ }),

/***/ "./public/app/features/alerting/unified/utils/timeRange.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTimeRangeForExpression: () => (/* binding */ getTimeRangeForExpression)\n/* harmony export */ });\n/* harmony import */ var _expressions_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/features/expressions/types.ts\");\n\n\nconst FALL_BACK_TIME_RANGE = { from: 21600, to: 0 };\nconst getTimeRangeForExpression = (query, queries) => {\n  const referencedRefIds = getReferencedIds(query, queries);\n  if (!referencedRefIds) {\n    return FALL_BACK_TIME_RANGE;\n  }\n  const { from, to } = getTimeRanges(referencedRefIds, queries);\n  if (!from.length && !to.length) {\n    return FALL_BACK_TIME_RANGE;\n  }\n  return {\n    from: Math.max(...from),\n    to: Math.min(...to)\n  };\n};\nconst getReferencedIds = (model, queries) => {\n  switch (model.type) {\n    case _expressions_types__WEBPACK_IMPORTED_MODULE_0__.ExpressionQueryType.classic:\n      return getReferencedIdsForClassicCondition(model);\n    case _expressions_types__WEBPACK_IMPORTED_MODULE_0__.ExpressionQueryType.math:\n      return getReferencedIdsForMath(model, queries);\n    case _expressions_types__WEBPACK_IMPORTED_MODULE_0__.ExpressionQueryType.resample:\n    case _expressions_types__WEBPACK_IMPORTED_MODULE_0__.ExpressionQueryType.reduce:\n    case _expressions_types__WEBPACK_IMPORTED_MODULE_0__.ExpressionQueryType.threshold:\n      return getReferencedIdsForReduce(model);\n  }\n};\nconst getReferencedIdsForClassicCondition = (model) => {\n  return model.conditions?.map((condition) => {\n    return condition.query.params[0];\n  });\n};\nconst getTimeRanges = (referencedRefIds, queries) => {\n  let from = [];\n  let to = [FALL_BACK_TIME_RANGE.to];\n  for (const referencedRefIdsKey of referencedRefIds) {\n    const query = queries.find((query2) => query2.refId === referencedRefIdsKey);\n    if (!query || !query.relativeTimeRange) {\n      continue;\n    }\n    from.push(query.relativeTimeRange.from);\n    to.push(query.relativeTimeRange.to);\n  }\n  return {\n    from,\n    to\n  };\n};\nconst getReferencedIdsForMath = (model, queries) => {\n  return queries.filter((q) => q.queryType === \"query\" && model.expression?.includes(q.refId)).map((q) => {\n    return q.refId;\n  });\n};\nconst getReferencedIdsForReduce = (model) => {\n  return model.expression ? [model.expression] : void 0;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvdXRpbHMvdGltZVJhbmdlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUdxRDtBQUVyRCxNQUFNLHVCQUF1QixFQUFFLE1BQU0sT0FBTyxJQUFJLEVBQUU7QUFFM0MsTUFBTSw0QkFBNEIsQ0FBQyxPQUF3QixZQUE2QztBQUM3RyxRQUFNLG1CQUF5QyxpQkFBaUIsT0FBTyxPQUFPO0FBRTlFLE1BQUksQ0FBQyxrQkFBa0I7QUFDckIsV0FBTztBQUFBLEVBQ1Q7QUFFQSxRQUFNLEVBQUUsTUFBTSxHQUFHLElBQUksY0FBYyxrQkFBa0IsT0FBTztBQUU1RCxNQUFJLENBQUMsS0FBSyxVQUFVLENBQUMsR0FBRyxRQUFRO0FBQzlCLFdBQU87QUFBQSxFQUNUO0FBRUEsU0FBTztBQUFBLElBQ0wsTUFBTSxLQUFLLElBQUksR0FBRyxJQUFJO0FBQUEsSUFDdEIsSUFBSSxLQUFLLElBQUksR0FBRyxFQUFFO0FBQUEsRUFDcEI7QUFDRjtBQUVBLE1BQU0sbUJBQW1CLENBQUMsT0FBd0IsWUFBZ0Q7QUFDaEcsVUFBUSxNQUFNLE1BQU07QUFBQSxJQUNsQixLQUFLLG1FQUFtQixDQUFDO0FBQ3ZCLGFBQU8sb0NBQW9DLEtBQUs7QUFBQSxJQUNsRCxLQUFLLG1FQUFtQixDQUFDO0FBQ3ZCLGFBQU8sd0JBQXdCLE9BQU8sT0FBTztBQUFBLElBQy9DLEtBQUssbUVBQW1CLENBQUM7QUFBQSxJQUN6QixLQUFLLG1FQUFtQixDQUFDO0FBQUEsSUFDekIsS0FBSyxtRUFBbUIsQ0FBQztBQUN2QixhQUFPLDBCQUEwQixLQUFLO0FBQUEsRUFDMUM7QUFDRjtBQUVBLE1BQU0sc0NBQXNDLENBQUMsVUFBMkI7QUFDdEUsU0FBTyxNQUFNLFlBQVksSUFBSSxDQUFDLGNBQWM7QUFDMUMsV0FBTyxVQUFVLE1BQU0sT0FBTyxDQUFDO0FBQUEsRUFDakMsQ0FBQztBQUNIO0FBRUEsTUFBTSxnQkFBZ0IsQ0FBQyxrQkFBNEIsWUFBMEI7QUFDM0UsTUFBSSxPQUFpQixDQUFDO0FBQ3RCLE1BQUksS0FBSyxDQUFDLHFCQUFxQixFQUFFO0FBQ2pDLGFBQVcsdUJBQXVCLGtCQUFrQjtBQUNsRCxVQUFNLFFBQVEsUUFBUSxLQUFLLENBQUNBLFdBQVVBLE9BQU0sVUFBVSxtQkFBbUI7QUFFekUsUUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLG1CQUFtQjtBQUN0QztBQUFBLElBQ0Y7QUFDQSxTQUFLLEtBQUssTUFBTSxrQkFBa0IsSUFBSTtBQUN0QyxPQUFHLEtBQUssTUFBTSxrQkFBa0IsRUFBRTtBQUFBLEVBQ3BDO0FBRUEsU0FBTztBQUFBLElBQ0w7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNGO0FBRUEsTUFBTSwwQkFBMEIsQ0FBQyxPQUF3QixZQUEwQjtBQUNqRixTQUNFLFFBRUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxjQUFjLFdBQVcsTUFBTSxZQUFZLFNBQVMsRUFBRSxLQUFLLENBQUMsRUFDNUUsSUFBSSxDQUFDLE1BQU07QUFDVixXQUFPLEVBQUU7QUFBQSxFQUNYLENBQUM7QUFFUDtBQUVBLE1BQU0sNEJBQTRCLENBQUMsVUFBMkI7QUFDNUQsU0FBTyxNQUFNLGFBQWEsQ0FBQyxNQUFNLFVBQVUsSUFBSTtBQUNqRCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2FsZXJ0aW5nL3VuaWZpZWQvdXRpbHMvdGltZVJhbmdlLnRzPzhlOWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVsYXRpdmVUaW1lUmFuZ2UgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEFsZXJ0UXVlcnkgfSBmcm9tICdhcHAvdHlwZXMvdW5pZmllZC1hbGVydGluZy1kdG8nO1xuXG5pbXBvcnQgeyBFeHByZXNzaW9uUXVlcnksIEV4cHJlc3Npb25RdWVyeVR5cGUgfSBmcm9tICcuLi8uLi8uLi9leHByZXNzaW9ucy90eXBlcyc7XG5cbmNvbnN0IEZBTExfQkFDS19USU1FX1JBTkdFID0geyBmcm9tOiAyMTYwMCwgdG86IDAgfTtcblxuZXhwb3J0IGNvbnN0IGdldFRpbWVSYW5nZUZvckV4cHJlc3Npb24gPSAocXVlcnk6IEV4cHJlc3Npb25RdWVyeSwgcXVlcmllczogQWxlcnRRdWVyeVtdKTogUmVsYXRpdmVUaW1lUmFuZ2UgPT4ge1xuICBjb25zdCByZWZlcmVuY2VkUmVmSWRzOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCA9IGdldFJlZmVyZW5jZWRJZHMocXVlcnksIHF1ZXJpZXMpO1xuXG4gIGlmICghcmVmZXJlbmNlZFJlZklkcykge1xuICAgIHJldHVybiBGQUxMX0JBQ0tfVElNRV9SQU5HRTtcbiAgfVxuXG4gIGNvbnN0IHsgZnJvbSwgdG8gfSA9IGdldFRpbWVSYW5nZXMocmVmZXJlbmNlZFJlZklkcywgcXVlcmllcyk7XG5cbiAgaWYgKCFmcm9tLmxlbmd0aCAmJiAhdG8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIEZBTExfQkFDS19USU1FX1JBTkdFO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmcm9tOiBNYXRoLm1heCguLi5mcm9tKSxcbiAgICB0bzogTWF0aC5taW4oLi4udG8pLFxuICB9O1xufTtcblxuY29uc3QgZ2V0UmVmZXJlbmNlZElkcyA9IChtb2RlbDogRXhwcmVzc2lvblF1ZXJ5LCBxdWVyaWVzOiBBbGVydFF1ZXJ5W10pOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCA9PiB7XG4gIHN3aXRjaCAobW9kZWwudHlwZSkge1xuICAgIGNhc2UgRXhwcmVzc2lvblF1ZXJ5VHlwZS5jbGFzc2ljOlxuICAgICAgcmV0dXJuIGdldFJlZmVyZW5jZWRJZHNGb3JDbGFzc2ljQ29uZGl0aW9uKG1vZGVsKTtcbiAgICBjYXNlIEV4cHJlc3Npb25RdWVyeVR5cGUubWF0aDpcbiAgICAgIHJldHVybiBnZXRSZWZlcmVuY2VkSWRzRm9yTWF0aChtb2RlbCwgcXVlcmllcyk7XG4gICAgY2FzZSBFeHByZXNzaW9uUXVlcnlUeXBlLnJlc2FtcGxlOlxuICAgIGNhc2UgRXhwcmVzc2lvblF1ZXJ5VHlwZS5yZWR1Y2U6XG4gICAgY2FzZSBFeHByZXNzaW9uUXVlcnlUeXBlLnRocmVzaG9sZDpcbiAgICAgIHJldHVybiBnZXRSZWZlcmVuY2VkSWRzRm9yUmVkdWNlKG1vZGVsKTtcbiAgfVxufTtcblxuY29uc3QgZ2V0UmVmZXJlbmNlZElkc0ZvckNsYXNzaWNDb25kaXRpb24gPSAobW9kZWw6IEV4cHJlc3Npb25RdWVyeSkgPT4ge1xuICByZXR1cm4gbW9kZWwuY29uZGl0aW9ucz8ubWFwKChjb25kaXRpb24pID0+IHtcbiAgICByZXR1cm4gY29uZGl0aW9uLnF1ZXJ5LnBhcmFtc1swXTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRUaW1lUmFuZ2VzID0gKHJlZmVyZW5jZWRSZWZJZHM6IHN0cmluZ1tdLCBxdWVyaWVzOiBBbGVydFF1ZXJ5W10pID0+IHtcbiAgbGV0IGZyb206IG51bWJlcltdID0gW107XG4gIGxldCB0byA9IFtGQUxMX0JBQ0tfVElNRV9SQU5HRS50b107XG4gIGZvciAoY29uc3QgcmVmZXJlbmNlZFJlZklkc0tleSBvZiByZWZlcmVuY2VkUmVmSWRzKSB7XG4gICAgY29uc3QgcXVlcnkgPSBxdWVyaWVzLmZpbmQoKHF1ZXJ5KSA9PiBxdWVyeS5yZWZJZCA9PT0gcmVmZXJlbmNlZFJlZklkc0tleSk7XG5cbiAgICBpZiAoIXF1ZXJ5IHx8ICFxdWVyeS5yZWxhdGl2ZVRpbWVSYW5nZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGZyb20ucHVzaChxdWVyeS5yZWxhdGl2ZVRpbWVSYW5nZS5mcm9tKTtcbiAgICB0by5wdXNoKHF1ZXJ5LnJlbGF0aXZlVGltZVJhbmdlLnRvKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZnJvbSxcbiAgICB0byxcbiAgfTtcbn07XG5cbmNvbnN0IGdldFJlZmVyZW5jZWRJZHNGb3JNYXRoID0gKG1vZGVsOiBFeHByZXNzaW9uUXVlcnksIHF1ZXJpZXM6IEFsZXJ0UXVlcnlbXSkgPT4ge1xuICByZXR1cm4gKFxuICAgIHF1ZXJpZXNcbiAgICAgIC8vIGZpbHRlciBxdWVyaWVzIG9mIHR5cGUgcXVlcnkgYW5kIGZpbHRlciBleHByZXNzaW9uIG9uIGlmIGl0IGluY2x1ZGVzIGFueSByZWZJZHNcbiAgICAgIC5maWx0ZXIoKHEpID0+IHEucXVlcnlUeXBlID09PSAncXVlcnknICYmIG1vZGVsLmV4cHJlc3Npb24/LmluY2x1ZGVzKHEucmVmSWQpKVxuICAgICAgLm1hcCgocSkgPT4ge1xuICAgICAgICByZXR1cm4gcS5yZWZJZDtcbiAgICAgIH0pXG4gICk7XG59O1xuXG5jb25zdCBnZXRSZWZlcmVuY2VkSWRzRm9yUmVkdWNlID0gKG1vZGVsOiBFeHByZXNzaW9uUXVlcnkpID0+IHtcbiAgcmV0dXJuIG1vZGVsLmV4cHJlc3Npb24gPyBbbW9kZWwuZXhwcmVzc2lvbl0gOiB1bmRlZmluZWQ7XG59O1xuIl0sIm5hbWVzIjpbInF1ZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/alerting/unified/utils/timeRange.ts\n");

/***/ }),

/***/ "./public/app/features/dashboard/dashgrid/SeriesVisibilityConfigFactory.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   seriesVisibilityConfigFactory: () => (/* binding */ seriesVisibilityConfigFactory)\n/* harmony export */ });\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/fieldOverrides.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers/nameMatcher.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers/ids.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldState.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/PanelChrome/types.ts\");\n\n\n\nconst displayOverrideRef = \"hideSeriesFrom\";\nconst isHideSeriesOverride = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.isSystemOverrideWithRef)(displayOverrideRef);\nfunction seriesVisibilityConfigFactory(label, mode, fieldConfig, data) {\n  const { overrides } = fieldConfig;\n  const displayName = label;\n  const currentIndex = overrides.findIndex(isHideSeriesOverride);\n  if (currentIndex < 0) {\n    if (mode === _grafana_ui__WEBPACK_IMPORTED_MODULE_1__.SeriesVisibilityChangeMode.ToggleSelection) {\n      const override3 = createOverride([displayName, ...getNamesOfHiddenFields(overrides, data)]);\n      return {\n        ...fieldConfig,\n        overrides: [...fieldConfig.overrides, override3]\n      };\n    }\n    const displayNames = getDisplayNames(data, displayName);\n    const override2 = createOverride(displayNames);\n    return {\n      ...fieldConfig,\n      overrides: [...fieldConfig.overrides, override2]\n    };\n  }\n  const overridesCopy = Array.from(overrides);\n  const [current] = overridesCopy.splice(currentIndex, 1);\n  if (mode === _grafana_ui__WEBPACK_IMPORTED_MODULE_1__.SeriesVisibilityChangeMode.ToggleSelection) {\n    let existing = getExistingDisplayNames(current);\n    const nameOfHiddenFields = getNamesOfHiddenFields(overridesCopy, data);\n    if (nameOfHiddenFields.length > 0) {\n      existing = existing.filter((el) => nameOfHiddenFields.indexOf(el) < 0);\n    }\n    if (existing[0] === displayName && existing.length === 1) {\n      return {\n        ...fieldConfig,\n        overrides: overridesCopy\n      };\n    }\n    const override2 = createOverride([displayName, ...nameOfHiddenFields]);\n    return {\n      ...fieldConfig,\n      overrides: [...overridesCopy, override2]\n    };\n  }\n  const override = createExtendedOverride(current, displayName);\n  if (allFieldsAreExcluded(override, data)) {\n    return {\n      ...fieldConfig,\n      overrides: overridesCopy\n    };\n  }\n  return {\n    ...fieldConfig,\n    overrides: [...overridesCopy, override]\n  };\n}\nfunction createOverride(names, mode = _grafana_data__WEBPACK_IMPORTED_MODULE_2__.ByNamesMatcherMode.exclude, property) {\n  property = property ?? {\n    id: \"custom.hideFrom\",\n    value: {\n      viz: true,\n      legend: false,\n      tooltip: false\n    }\n  };\n  return {\n    __systemRef: displayOverrideRef,\n    matcher: {\n      id: _grafana_data__WEBPACK_IMPORTED_MODULE_3__.FieldMatcherID.byNames,\n      options: {\n        mode,\n        names,\n        prefix: mode === _grafana_data__WEBPACK_IMPORTED_MODULE_2__.ByNamesMatcherMode.exclude ? \"All except:\" : void 0,\n        readOnly: true\n      }\n    },\n    properties: [\n      {\n        ...property,\n        value: {\n          viz: true,\n          legend: false,\n          tooltip: false\n        }\n      }\n    ]\n  };\n}\nconst createExtendedOverride = (current, displayName, mode = _grafana_data__WEBPACK_IMPORTED_MODULE_2__.ByNamesMatcherMode.exclude) => {\n  const property = current.properties.find((p) => p.id === \"custom.hideFrom\");\n  const existing = getExistingDisplayNames(current);\n  const index = existing.findIndex((name) => name === displayName);\n  if (index < 0) {\n    existing.push(displayName);\n  } else {\n    existing.splice(index, 1);\n  }\n  return createOverride(existing, mode, property);\n};\nconst getExistingDisplayNames = (rule) => {\n  const names = rule.matcher.options?.names;\n  if (!Array.isArray(names)) {\n    return [];\n  }\n  return [...names];\n};\nconst allFieldsAreExcluded = (override, data) => {\n  return getExistingDisplayNames(override).length === getDisplayNames(data).length;\n};\nconst getDisplayNames = (data, excludeName) => {\n  const unique = /* @__PURE__ */ new Set();\n  for (const frame of data) {\n    for (const field of frame.fields) {\n      if (field.type !== _grafana_data__WEBPACK_IMPORTED_MODULE_4__.FieldType.number) {\n        continue;\n      }\n      const name = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_5__.getFieldDisplayName)(field, frame, data);\n      if (name === excludeName) {\n        continue;\n      }\n      unique.add(name);\n    }\n  }\n  return Array.from(unique);\n};\nconst getNamesOfHiddenFields = (overrides, data) => {\n  let names = [];\n  for (const override of overrides) {\n    const property = override.properties.find((p) => p.id === \"custom.hideFrom\");\n    if (property !== void 0 && property.value?.legend === true) {\n      const info = _grafana_data__WEBPACK_IMPORTED_MODULE_6__.fieldMatchers.get(override.matcher.id);\n      const matcher = info.get(override.matcher.options);\n      for (const frame of data) {\n        for (const field of frame.fields) {\n          if (field.type !== _grafana_data__WEBPACK_IMPORTED_MODULE_4__.FieldType.number) {\n            continue;\n          }\n          const name = (0,_grafana_data__WEBPACK_IMPORTED_MODULE_5__.getFieldDisplayName)(field, frame, data);\n          if (matcher(field, frame, data)) {\n            names.push(name);\n          }\n        }\n      }\n    }\n  }\n  return names;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2Rhc2hib2FyZC9kYXNoZ3JpZC9TZXJpZXNWaXNpYmlsaXR5Q29uZmlnRmFjdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFZTztBQUNvQztBQUUzQyxNQUFNLHFCQUFxQjtBQUMzQixNQUFNLHVCQUF1QixzRUFBdUIsQ0FBQyxrQkFBa0I7QUFFaEUsU0FBUyw4QkFDZCxPQUNBLE1BQ0EsYUFDQSxNQUNBO0FBQ0EsUUFBTSxFQUFFLFVBQVUsSUFBSTtBQUV0QixRQUFNLGNBQWM7QUFDcEIsUUFBTSxlQUFlLFVBQVUsVUFBVSxvQkFBb0I7QUFFN0QsTUFBSSxlQUFlLEdBQUc7QUFDcEIsUUFBSSxTQUFTLG1FQUEwQixDQUFDLGlCQUFpQjtBQUN2RCxZQUFNQSxZQUFXLGVBQWUsQ0FBQyxhQUFhLEdBQUcsdUJBQXVCLFdBQVcsSUFBSSxDQUFDLENBQUM7QUFFekYsYUFBTztBQUFBLFFBQ0wsR0FBRztBQUFBLFFBQ0gsV0FBVyxDQUFDLEdBQUcsWUFBWSxXQUFXQSxTQUFRO0FBQUEsTUFDaEQ7QUFBQSxJQUNGO0FBRUEsVUFBTSxlQUFlLGdCQUFnQixNQUFNLFdBQVc7QUFDdEQsVUFBTUEsWUFBVyxlQUFlLFlBQVk7QUFFNUMsV0FBTztBQUFBLE1BQ0wsR0FBRztBQUFBLE1BQ0gsV0FBVyxDQUFDLEdBQUcsWUFBWSxXQUFXQSxTQUFRO0FBQUEsSUFDaEQ7QUFBQSxFQUNGO0FBRUEsUUFBTSxnQkFBZ0IsTUFBTSxLQUFLLFNBQVM7QUFDMUMsUUFBTSxDQUFDLE9BQU8sSUFBSSxjQUFjLE9BQU8sY0FBYyxDQUFDO0FBRXRELE1BQUksU0FBUyxtRUFBMEIsQ0FBQyxpQkFBaUI7QUFDdkQsUUFBSSxXQUFXLHdCQUF3QixPQUFPO0FBQzlDLFVBQU0scUJBQXFCLHVCQUF1QixlQUFlLElBQUk7QUFFckUsUUFBSSxtQkFBbUIsU0FBUyxHQUFHO0FBQ2pDLGlCQUFXLFNBQVMsT0FBTyxDQUFDLE9BQU8sbUJBQW1CLFFBQVEs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QU8sTUFBTSxLQUFLLE1BQU07QUFDMUI7QUFFQSxNQUFNLHlCQUF5QixDQUFDLFdBQWlDLFNBQWdDO0FBQy9GLE1BQUksUUFBa0IsQ0FBQztBQUV2QixhQUFXLFlBQVksV0FBVztBQUNoQyxVQUFNLFdBQVcsU0FBUyxXQUFXLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxpQkFBaUI7QUFFM0UsUUFBSSxhQUFhLFVBQWEsU0FBUyxPQUFPLFdBQVcsTUFBTTtBQUM3RCxZQUFNLE9BQU8sd0RBQWEsQ0FBQyxJQUFJLFNBQVMsUUFBUSxFQUFFO0FBQ2xELFlBQU0sVUFBVSxLQUFLLElBQUksU0FBUyxRQUFRLE9BQU87QUFFakQsaUJBQVcsU0FBUyxNQUFNO0FBQ3hCLG1CQUFXLFNBQVMsTUFBTSxRQUFRO0FBQ2hDLGNBQUksTUFBTSxTQUFTLG9EQUFTLENBQUMsUUFBUTtBQUNuQztBQUFBLFVBQ0Y7QUFFQSxnQkFBTSxPQUFPLGtFQUFtQixDQUFDLE9BQU8sT0FBTyxJQUFJO0FBRW5ELGNBQUksUUFBUSxPQUFPLE9BQU8sSUFBSSxHQUFHO0FBQy9CLGtCQUFNLEtBQUssSUFBSTtBQUFBLFVBQ2pCO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2Rhc2hib2FyZC9kYXNoZ3JpZC9TZXJpZXNWaXNpYmlsaXR5Q29uZmlnRmFjdG9yeS50cz9kYzVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEJ5TmFtZXNNYXRjaGVyTW9kZSxcbiAgQ29uZmlnT3ZlcnJpZGVSdWxlLFxuICBEYXRhRnJhbWUsXG4gIER5bmFtaWNDb25maWdWYWx1ZSxcbiAgRmllbGRDb25maWdTb3VyY2UsXG4gIEZpZWxkTWF0Y2hlcklELFxuICBmaWVsZE1hdGNoZXJzLFxuICBGaWVsZFR5cGUsXG4gIGdldEZpZWxkRGlzcGxheU5hbWUsXG4gIGlzU3lzdGVtT3ZlcnJpZGVXaXRoUmVmLFxuICBTeXN0ZW1Db25maWdPdmVycmlkZVJ1bGUsXG59IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgU2VyaWVzVmlzaWJpbGl0eUNoYW5nZU1vZGUgfSBmcm9tICdAZ3JhZmFuYS91aSc7XG5cbmNvbnN0IGRpc3BsYXlPdmVycmlkZVJlZiA9ICdoaWRlU2VyaWVzRnJvbSc7XG5jb25zdCBpc0hpZGVTZXJpZXNPdmVycmlkZSA9IGlzU3lzdGVtT3ZlcnJpZGVXaXRoUmVmKGRpc3BsYXlPdmVycmlkZVJlZik7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpZXNWaXNpYmlsaXR5Q29uZmlnRmFjdG9yeShcbiAgbGFiZWw6IHN0cmluZyxcbiAgbW9kZTogU2VyaWVzVmlzaWJpbGl0eUNoYW5nZU1vZGUsXG4gIGZpZWxkQ29uZmlnOiBGaWVsZENvbmZpZ1NvdXJjZSxcbiAgZGF0YTogRGF0YUZyYW1lW11cbikge1xuICBjb25zdCB7IG92ZXJyaWRlcyB9ID0gZmllbGRDb25maWc7XG5cbiAgY29uc3QgZGlzcGxheU5hbWUgPSBsYWJlbDtcbiAgY29uc3QgY3VycmVudEluZGV4ID0gb3ZlcnJpZGVzLmZpbmRJbmRleChpc0hpZGVTZXJpZXNPdmVycmlkZSk7XG5cbiAgaWYgKGN1cnJlbnRJbmRleCA8IDApIHtcbiAgICBpZiAobW9kZSA9PT0gU2VyaWVzVmlzaWJpbGl0eUNoYW5nZU1vZGUuVG9nZ2xlU2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBvdmVycmlkZSA9IGNyZWF0ZU92ZXJyaWRlKFtkaXNwbGF5TmFtZSwgLi4uZ2V0TmFtZXNPZkhpZGRlbkZpZWxkcyhvdmVycmlkZXMsIGRhdGEpXSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmZpZWxkQ29uZmlnLFxuICAgICAgICBvdmVycmlkZXM6IFsuLi5maWVsZENvbmZpZy5vdmVycmlkZXMsIG92ZXJyaWRlXSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgZGlzcGxheU5hbWVzID0gZ2V0RGlzcGxheU5hbWVzKGRhdGEsIGRpc3BsYXlOYW1lKTtcbiAgICBjb25zdCBvdmVycmlkZSA9IGNyZWF0ZU92ZXJyaWRlKGRpc3BsYXlOYW1lcyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmllbGRDb25maWcsXG4gICAgICBvdmVycmlkZXM6IFsuLi5maWVsZENvbmZpZy5vdmVycmlkZXMsIG92ZXJyaWRlXSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3Qgb3ZlcnJpZGVzQ29weSA9IEFycmF5LmZyb20ob3ZlcnJpZGVzKTtcbiAgY29uc3QgW2N1cnJlbnRdID0gb3ZlcnJpZGVzQ29weS5zcGxpY2UoY3VycmVudEluZGV4LCAxKSBhcyBTeXN0ZW1Db25maWdPdmVycmlkZVJ1bGVbXTtcblxuICBpZiAobW9kZSA9PT0gU2VyaWVzVmlzaWJpbGl0eUNoYW5nZU1vZGUuVG9nZ2xlU2VsZWN0aW9uKSB7XG4gICAgbGV0IGV4aXN0aW5nID0gZ2V0RXhpc3RpbmdEaXNwbGF5TmFtZXMoY3VycmVudCk7XG4gICAgY29uc3QgbmFtZU9mSGlkZGVuRmllbGRzID0gZ2V0TmFtZXNPZkhpZGRlbkZpZWxkcyhvdmVycmlkZXNDb3B5LCBkYXRhKTtcblxuICAgIGlmIChuYW1lT2ZIaWRkZW5GaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgZXhpc3RpbmcgPSBleGlzdGluZy5maWx0ZXIoKGVsKSA9PiBuYW1lT2ZIaWRkZW5GaWVsZHMuaW5kZXhPZihlbCkgPCAwKTtcbiAgICB9XG5cbiAgICBpZiAoZXhpc3RpbmdbMF0gPT09IGRpc3BsYXlOYW1lICYmIGV4aXN0aW5nLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZmllbGRDb25maWcsXG4gICAgICAgIG92ZXJyaWRlczogb3ZlcnJpZGVzQ29weSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3Qgb3ZlcnJpZGUgPSBjcmVhdGVPdmVycmlkZShbZGlzcGxheU5hbWUsIC4uLm5hbWVPZkhpZGRlbkZpZWxkc10pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkQ29uZmlnLFxuICAgICAgb3ZlcnJpZGVzOiBbLi4ub3ZlcnJpZGVzQ29weSwgb3ZlcnJpZGVdLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBvdmVycmlkZSA9IGNyZWF0ZUV4dGVuZGVkT3ZlcnJpZGUoY3VycmVudCwgZGlzcGxheU5hbWUpO1xuXG4gIGlmIChhbGxGaWVsZHNBcmVFeGNsdWRlZChvdmVycmlkZSwgZGF0YSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmllbGRDb25maWcsXG4gICAgICBvdmVycmlkZXM6IG92ZXJyaWRlc0NvcHksXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgLi4uZmllbGRDb25maWcsXG4gICAgb3ZlcnJpZGVzOiBbLi4ub3ZlcnJpZGVzQ29weSwgb3ZlcnJpZGVdLFxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVPdmVycmlkZShcbiAgbmFtZXM6IHN0cmluZ1tdLFxuICBtb2RlID0gQnlOYW1lc01hdGNoZXJNb2RlLmV4Y2x1ZGUsXG4gIHByb3BlcnR5PzogRHluYW1pY0NvbmZpZ1ZhbHVlXG4pOiBTeXN0ZW1Db25maWdPdmVycmlkZVJ1bGUge1xuICBwcm9wZXJ0eSA9IHByb3BlcnR5ID8/IHtcbiAgICBpZDogJ2N1c3RvbS5oaWRlRnJvbScsXG4gICAgdmFsdWU6IHtcbiAgICAgIHZpejogdHJ1ZSxcbiAgICAgIGxlZ2VuZDogZmFsc2UsXG4gICAgICB0b29sdGlwOiBmYWxzZSxcbiAgICB9LFxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgX19zeXN0ZW1SZWY6IGRpc3BsYXlPdmVycmlkZVJlZixcbiAgICBtYXRjaGVyOiB7XG4gICAgICBpZDogRmllbGRNYXRjaGVySUQuYnlOYW1lcyxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgbW9kZTogbW9kZSxcbiAgICAgICAgbmFtZXM6IG5hbWVzLFxuICAgICAgICBwcmVmaXg6IG1vZGUgPT09IEJ5TmFtZXNNYXRjaGVyTW9kZS5leGNsdWRlID8gJ0FsbCBleGNlcHQ6JyA6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVhZE9ubHk6IHRydWUsXG4gICAgICB9LFxuICAgIH0sXG4gICAgcHJvcGVydGllczogW1xuICAgICAge1xuICAgICAgICAuLi5wcm9wZXJ0eSxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICB2aXo6IHRydWUsXG4gICAgICAgICAgbGVnZW5kOiBmYWxzZSxcbiAgICAgICAgICB0b29sdGlwOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfTtcbn1cblxuY29uc3QgY3JlYXRlRXh0ZW5kZWRPdmVycmlkZSA9IChcbiAgY3VycmVudDogU3lzdGVtQ29uZmlnT3ZlcnJpZGVSdWxlLFxuICBkaXNwbGF5TmFtZTogc3RyaW5nLFxuICBtb2RlID0gQnlOYW1lc01hdGNoZXJNb2RlLmV4Y2x1ZGVcbik6IFN5c3RlbUNvbmZpZ092ZXJyaWRlUnVsZSA9PiB7XG4gIGNvbnN0IHByb3BlcnR5ID0gY3VycmVudC5wcm9wZXJ0aWVzLmZpbmQoKHApID0+IHAuaWQgPT09ICdjdXN0b20uaGlkZUZyb20nKTtcbiAgY29uc3QgZXhpc3RpbmcgPSBnZXRFeGlzdGluZ0Rpc3BsYXlOYW1lcyhjdXJyZW50KTtcbiAgY29uc3QgaW5kZXggPSBleGlzdGluZy5maW5kSW5kZXgoKG5hbWUpID0+IG5hbWUgPT09IGRpc3BsYXlOYW1lKTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgZXhpc3RpbmcucHVzaChkaXNwbGF5TmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgZXhpc3Rpbmcuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVPdmVycmlkZShleGlzdGluZywgbW9kZSwgcHJvcGVydHkpO1xufTtcblxuY29uc3QgZ2V0RXhpc3RpbmdEaXNwbGF5TmFtZXMgPSAocnVsZTogU3lzdGVtQ29uZmlnT3ZlcnJpZGVSdWxlKTogc3RyaW5nW10gPT4ge1xuICBjb25zdCBuYW1lcyA9IHJ1bGUubWF0Y2hlci5vcHRpb25zPy5uYW1lcztcbiAgaWYgKCFBcnJheS5pc0FycmF5KG5hbWVzKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gWy4uLm5hbWVzXTtcbn07XG5cbmNvbnN0IGFsbEZpZWxkc0FyZUV4Y2x1ZGVkID0gKG92ZXJyaWRlOiBTeXN0ZW1Db25maWdPdmVycmlkZVJ1bGUsIGRhdGE6IERhdGFGcmFtZVtdKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBnZXRFeGlzdGluZ0Rpc3BsYXlOYW1lcyhvdmVycmlkZSkubGVuZ3RoID09PSBnZXREaXNwbGF5TmFtZXMoZGF0YSkubGVuZ3RoO1xufTtcblxuY29uc3QgZ2V0RGlzcGxheU5hbWVzID0gKGRhdGE6IERhdGFGcmFtZVtdLCBleGNsdWRlTmFtZT86IHN0cmluZyk6IHN0cmluZ1tdID0+IHtcbiAgY29uc3QgdW5pcXVlID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgZm9yIChjb25zdCBmcmFtZSBvZiBkYXRhKSB7XG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBmcmFtZS5maWVsZHMpIHtcbiAgICAgIGlmIChmaWVsZC50eXBlICE9PSBGaWVsZFR5cGUubnVtYmVyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuYW1lID0gZ2V0RmllbGREaXNwbGF5TmFtZShmaWVsZCwgZnJhbWUsIGRhdGEpO1xuXG4gICAgICBpZiAobmFtZSA9PT0gZXhjbHVkZU5hbWUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHVuaXF1ZS5hZGQobmFtZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIEFycmF5LmZyb20odW5pcXVlKTtcbn07XG5cbmNvbnN0IGdldE5hbWVzT2ZIaWRkZW5GaWVsZHMgPSAob3ZlcnJpZGVzOiBDb25maWdPdmVycmlkZVJ1bGVbXSwgZGF0YTogRGF0YUZyYW1lW10pOiBzdHJpbmdbXSA9PiB7XG4gIGxldCBuYW1lczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IG92ZXJyaWRlIG9mIG92ZXJyaWRlcykge1xuICAgIGNvbnN0IHByb3BlcnR5ID0gb3ZlcnJpZGUucHJvcGVydGllcy5maW5kKChwKSA9PiBwLmlkID09PSAnY3VzdG9tLmhpZGVGcm9tJyk7XG5cbiAgICBpZiAocHJvcGVydHkgIT09IHVuZGVmaW5lZCAmJiBwcm9wZXJ0eS52YWx1ZT8ubGVnZW5kID09PSB0cnVlKSB7XG4gICAgICBjb25zdCBpbmZvID0gZmllbGRNYXRjaGVycy5nZXQob3ZlcnJpZGUubWF0Y2hlci5pZCk7XG4gICAgICBjb25zdCBtYXRjaGVyID0gaW5mby5nZXQob3ZlcnJpZGUubWF0Y2hlci5vcHRpb25zKTtcblxuICAgICAgZm9yIChjb25zdCBmcmFtZSBvZiBkYXRhKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgZnJhbWUuZmllbGRzKSB7XG4gICAgICAgICAgaWYgKGZpZWxkLnR5cGUgIT09IEZpZWxkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IG5hbWUgPSBnZXRGaWVsZERpc3BsYXlOYW1lKGZpZWxkLCBmcmFtZSwgZGF0YSk7XG5cbiAgICAgICAgICBpZiAobWF0Y2hlcihmaWVsZCwgZnJhbWUsIGRhdGEpKSB7XG4gICAgICAgICAgICBuYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lcztcbn07XG4iXSwibmFtZXMiOlsib3ZlcnJpZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/features/dashboard/dashgrid/SeriesVisibilityConfigFactory.ts\n");

/***/ }),

/***/ "./public/app/features/explore/Graph/ExploreGraph.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExploreGraph: () => (/* binding */ ExploreGraph)\n/* harmony export */ });\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/panel/registryFactories.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/fieldColor.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldOverrides.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldState.ts\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dashboard.ts\");\n/* harmony import */ var _grafana_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/components/PanelRenderer.tsx\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/themes/ThemeContext.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/PanelChrome/PanelContext.ts\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Icon/Icon.tsx\");\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Button/Button.tsx\");\n/* harmony import */ var app_plugins_panel_timeseries_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/plugins/panel/timeseries/config.ts\");\n/* harmony import */ var _dashboard_dashgrid_SeriesVisibilityConfigFactory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/dashboard/dashgrid/SeriesVisibilityConfigFactory.ts\");\n/* harmony import */ var _exploreGraphStyleUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./public/app/features/explore/Graph/exploreGraphStyleUtils.ts\");\n/* harmony import */ var _useStructureRev__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./public/app/features/explore/Graph/useStructureRev.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst MAX_NUMBER_OF_TIME_SERIES = 20;\nfunction ExploreGraph({\n  data,\n  height,\n  width,\n  timeZone,\n  absoluteRange,\n  onChangeTime,\n  loadingState,\n  annotations,\n  onHiddenSeriesChanged,\n  splitOpenFn,\n  graphStyle,\n  tooltipDisplayMode = _grafana_schema__WEBPACK_IMPORTED_MODULE_7__.TooltipDisplayMode.Single,\n  anchorToZero = false,\n  yAxisMaximum,\n  thresholdsConfig,\n  thresholdsStyle,\n  eventBus\n}) {\n  const theme = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.useTheme2)();\n  const style = (0,_grafana_ui__WEBPACK_IMPORTED_MODULE_8__.useStyles2)(getStyles);\n  const [showAllTimeSeries, setShowAllTimeSeries] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const timeRange = {\n    from: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.dateTime)(absoluteRange.from),\n    to: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.dateTime)(absoluteRange.to),\n    raw: {\n      from: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.dateTime)(absoluteRange.from),\n      to: (0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.dateTime)(absoluteRange.to)\n    }\n  };\n  const fieldConfigRegistry = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_grafana_data__WEBPACK_IMPORTED_MODULE_10__.createFieldConfigRegistry)((0,app_plugins_panel_timeseries_config__WEBPACK_IMPORTED_MODULE_3__.getGraphFieldConfig)(app_plugins_panel_timeseries_config__WEBPACK_IMPORTED_MODULE_3__.defaultGraphConfig), \"Explore\"),\n    []\n  );\n  const [fieldConfig, setFieldConfig] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n    defaults: {\n      min: anchorToZero ? 0 : void 0,\n      max: yAxisMaximum || void 0,\n      color: {\n        mode: _grafana_data__WEBPACK_IMPORTED_MODULE_11__.FieldColorModeId.PaletteClassic\n      },\n      custom: {\n        drawStyle: _grafana_schema__WEBPACK_IMPORTED_MODULE_7__.GraphDrawStyle.Line,\n        fillOpacity: 0,\n        pointSize: 5\n      }\n    },\n    overrides: []\n  });\n  const styledFieldConfig = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const withGraphStyle = (0,_exploreGraphStyleUtils__WEBPACK_IMPORTED_MODULE_5__.applyGraphStyle)(fieldConfig, graphStyle, yAxisMaximum);\n    return (0,_exploreGraphStyleUtils__WEBPACK_IMPORTED_MODULE_5__.applyThresholdsConfig)(withGraphStyle, thresholdsStyle, thresholdsConfig);\n  }, [fieldConfig, graphStyle, yAxisMaximum, thresholdsConfig, thresholdsStyle]);\n  const dataWithConfig = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return (0,_grafana_data__WEBPACK_IMPORTED_MODULE_12__.applyFieldOverrides)({\n      fieldConfig: styledFieldConfig,\n      data: showAllTimeSeries ? data : data.slice(0, MAX_NUMBER_OF_TIME_SERIES),\n      timeZone,\n      replaceVariables: (value) => value,\n      // We don't need proper replace here as it is only used in getLinks and we use getFieldLinks\n      theme,\n      fieldConfigRegistry\n    });\n  }, [fieldConfigRegistry, data, timeZone, theme, styledFieldConfig, showAllTimeSeries]);\n  const structureRev = (0,_useStructureRev__WEBPACK_IMPORTED_MODULE_6__.useStructureRev)(dataWithConfig);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (onHiddenSeriesChanged) {\n      const hiddenFrames = [];\n      dataWithConfig.forEach((frame) => {\n        const allFieldsHidden = frame.fields.map((field) => field.config?.custom?.hideFrom?.viz).every(lodash__WEBPACK_IMPORTED_MODULE_1__.identity);\n        if (allFieldsHidden) {\n          hiddenFrames.push((0,_grafana_data__WEBPACK_IMPORTED_MODULE_13__.getFrameDisplayName)(frame));\n        }\n      });\n      onHiddenSeriesChanged(hiddenFrames);\n    }\n  }, [dataWithConfig, onHiddenSeriesChanged]);\n  const panelContext = {\n    eventsScope: \"explore\",\n    eventBus,\n    sync: () => _grafana_data__WEBPACK_IMPORTED_MODULE_14__.DashboardCursorSync.Crosshair,\n    onSplitOpen: splitOpenFn,\n    onToggleSeriesVisibility(label, mode) {\n      setFieldConfig((0,_dashboard_dashgrid_SeriesVisibilityConfigFactory__WEBPACK_IMPORTED_MODULE_4__.seriesVisibilityConfigFactory)(label, mode, fieldConfig, data));\n    }\n  };\n  const panelOptions = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => ({\n      tooltip: { mode: tooltipDisplayMode, sort: _grafana_schema__WEBPACK_IMPORTED_MODULE_7__.SortOrder.None },\n      legend: {\n        displayMode: _grafana_schema__WEBPACK_IMPORTED_MODULE_7__.LegendDisplayMode.List,\n        showLegend: true,\n        placement: \"bottom\",\n        calcs: []\n      }\n    }),\n    [tooltipDisplayMode]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_15__.PanelContextProvider, { value: panelContext }, data.length > MAX_NUMBER_OF_TIME_SERIES && !showAllTimeSeries && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", { className: style.timeSeriesDisclaimer }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_16__.Icon, { className: style.disclaimerIcon, name: \"exclamation-triangle\" }), \"Showing only \", MAX_NUMBER_OF_TIME_SERIES, \" time series.\", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_17__.Button,\n    {\n      variant: \"primary\",\n      fill: \"text\",\n      onClick: () => setShowAllTimeSeries(true),\n      className: style.showAllButton\n    },\n    \"Show all \",\n    data.length\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\n    _grafana_runtime__WEBPACK_IMPORTED_MODULE_18__.PanelRenderer,\n    {\n      data: { series: dataWithConfig, timeRange, state: loadingState, annotations, structureRev },\n      pluginId: \"timeseries\",\n      title: \"\",\n      width,\n      height,\n      onChangeTimeRange: onChangeTime,\n      timeZone,\n      options: panelOptions\n    }\n  ));\n}\nconst getStyles = (theme) => ({\n  timeSeriesDisclaimer: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    label: time-series-disclaimer;\n    margin: ${theme.spacing(1)} auto;\n    padding: 10px 0;\n    text-align: center;\n  `,\n  disclaimerIcon: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    label: disclaimer-icon;\n    color: ${theme.colors.warning.main};\n    margin-right: ${theme.spacing(0.5)};\n  `,\n  showAllButton: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_0__.css)`\n    margin-left: ${theme.spacing(0.5)};\n  `\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvRXhwbG9yZUdyYXBoLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNLO0FBQzJCO0FBa0I3QztBQUN1QjtBQU92QjtBQVNBO0FBRWlEO0FBSVY7QUFFUztBQUN2QjtBQUVoQyxNQUFNLDRCQUE0QjtBQXNCM0IsU0FBUyxhQUFhO0FBQUEsRUFDM0I7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQSxxQkFBcUIsK0RBQWtCLENBQUM7QUFBQSxFQUN4QyxlQUFlO0FBQUEsRUFDZjtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGLEdBQVU7QUFDUixRQUFNLFFBQVEsc0RBQVMsQ0FBQztBQUN4QixRQUFNLFFBQVEsdURBQVUsQ0FBQyxTQUFTO0FBQ2xDLFFBQU0sQ0FBQyxtQkFBbUIsb0JBQW9CLElBQUksK0NBQVEsQ0FBQyxLQUFLO0FBRWhFLFFBQU0sWUFBWTtBQUFBLElBQ2hCLE1BQU0sdURBQVEsQ0FBQyxjQUFjLElBQUk7QUFBQSxJQUNqQyxJQUFJLHVEQUFRLENBQUMsY0FBYyxFQUFFO0FBQUEsSUFDN0IsS0FBSztBQUFBLE1BQ0gsTUFBTSx1REFBUSxDQUFDLGNBQWMsSUFBSTtBQUFBLE1BQ2pDLElBQUksdURBQVEsQ0FBQyxjQUFjLEVBQUU7QUFBQSxJQUMvQjtBQUFBLEVBQ0Y7QUFFQSxRQUFNLHNCQUFzQiw4Q0FBTztBQUFQLElBQzFCLE1BQU0seUVBQXlCLENBQUMsd0ZBQW1CLENBQUMsbUZBQWtCLEdBQUcsU0FBUztBQUFBLElBQ2xGLENBQUM7QUFBQSxFQUNIO0FBRUEsUUFBTSxDQUFDLGFBQWEsY0FBYyxJQUFJLCtDQUFRLENBQXNDO0FBQUEsSUFDbEYsVUFBVTtBQUFBLE1BQ1Is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RSxRQUFRLGdCQUFnQixXQUFXLE9BQU8sY0FBYyxhQUFhLGFBQWE7QUFBQSxNQUMxRixVQUFTO0FBQUEsTUFDVCxPQUFNO0FBQUEsTUFDTjtBQUFBLE1BQ0E7QUFBQSxNQUNBLG1CQUFtQjtBQUFBLE1BQ25CO0FBQUEsTUFDQSxTQUFTO0FBQUE7QUFBQSxFQUNYLENBQ0Y7QUFFSjtBQUVBLE1BQU0sWUFBWSxDQUFDLFdBQTBCO0FBQUEsRUFDM0Msc0JBQXNCLGlEQUFHO0FBQUg7QUFBQSxjQUVWLE1BQU0sUUFBUSxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJM0IsZ0JBQWdCLGlEQUFHO0FBQUg7QUFBQSxhQUVMLE1BQU0sT0FBTyxRQUFRO0FBQUEsb0JBQ2QsTUFBTSxRQUFRLEdBQUc7QUFBQTtBQUFBLEVBRW5DLGVBQWUsaURBQUc7QUFBSCxtQkFDRSxNQUFNLFFBQVEsR0FBRztBQUFBO0FBRXBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvZmVhdHVyZXMvZXhwbG9yZS9HcmFwaC9FeHBsb3JlR3JhcGgudHN4P2MzYjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY3NzJztcbmltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICBBYnNvbHV0ZVRpbWVSYW5nZSxcbiAgYXBwbHlGaWVsZE92ZXJyaWRlcyxcbiAgY3JlYXRlRmllbGRDb25maWdSZWdpc3RyeSxcbiAgRGF0YUZyYW1lLFxuICBkYXRlVGltZSxcbiAgRmllbGRDb2xvck1vZGVJZCxcbiAgRmllbGRDb25maWdTb3VyY2UsXG4gIGdldEZyYW1lRGlzcGxheU5hbWUsXG4gIEdyYWZhbmFUaGVtZTIsXG4gIExvYWRpbmdTdGF0ZSxcbiAgU3BsaXRPcGVuLFxuICBUaW1lWm9uZSxcbiAgVGhyZXNob2xkc0NvbmZpZyxcbiAgRGFzaGJvYXJkQ3Vyc29yU3luYyxcbiAgRXZlbnRCdXMsXG59IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgUGFuZWxSZW5kZXJlciB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUnO1xuaW1wb3J0IHtcbiAgR3JhcGhEcmF3U3R5bGUsXG4gIExlZ2VuZERpc3BsYXlNb2RlLFxuICBUb29sdGlwRGlzcGxheU1vZGUsXG4gIFNvcnRPcmRlcixcbiAgR3JhcGhUaHJlc2hvbGRzU3R5bGVDb25maWcsXG59IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEljb24sXG4gIFBhbmVsQ29udGV4dCxcbiAgUGFuZWxDb250ZXh0UHJvdmlkZXIsXG4gIFNlcmllc1Zpc2liaWxpdHlDaGFuZ2VNb2RlLFxuICB1c2VTdHlsZXMyLFxuICB1c2VUaGVtZTIsXG59IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IEdyYXBoRmllbGRDb25maWcgfSBmcm9tICdhcHAvcGx1Z2lucy9wYW5lbC9ncmFwaC90eXBlcyc7XG5pbXBvcnQgeyBkZWZhdWx0R3JhcGhDb25maWcsIGdldEdyYXBoRmllbGRDb25maWcgfSBmcm9tICdhcHAvcGx1Z2lucy9wYW5lbC90aW1lc2VyaWVzL2NvbmZpZyc7XG5pbXBvcnQgeyBPcHRpb25zIGFzIFRpbWVTZXJpZXNPcHRpb25zIH0gZnJvbSAnYXBwL3BsdWdpbnMvcGFuZWwvdGltZXNlcmllcy9wYW5lbGNmZy5nZW4nO1xuaW1wb3J0IHsgRXhwbG9yZUdyYXBoU3R5bGUgfSBmcm9tICdhcHAvdHlwZXMnO1xuXG5pbXBvcnQgeyBzZXJpZXNWaXNpYmlsaXR5Q29uZmlnRmFjdG9yeSB9IGZyb20gJy4uLy4uL2Rhc2hib2FyZC9kYXNoZ3JpZC9TZXJpZXNWaXNpYmlsaXR5Q29uZmlnRmFjdG9yeSc7XG5cbmltcG9ydCB7IGFwcGx5R3JhcGhTdHlsZSwgYXBwbHlUaHJlc2hvbGRzQ29uZmlnIH0gZnJvbSAnLi9leHBsb3JlR3JhcGhTdHlsZVV0aWxzJztcbmltcG9ydCB7IHVzZVN0cnVjdHVyZVJldiB9IGZyb20gJy4vdXNlU3RydWN0dXJlUmV2JztcblxuY29uc3QgTUFYX05VTUJFUl9PRl9USU1FX1NFUklFUyA9IDIwO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkYXRhOiBEYXRhRnJhbWVbXTtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGFic29sdXRlUmFuZ2U6IEFic29sdXRlVGltZVJhbmdlO1xuICB0aW1lWm9uZTogVGltZVpvbmU7XG4gIGxvYWRpbmdTdGF0ZTogTG9hZGluZ1N0YXRlO1xuICBhbm5vdGF0aW9ucz86IERhdGFGcmFtZVtdO1xuICBvbkhpZGRlblNlcmllc0NoYW5nZWQ/OiAoaGlkZGVuU2VyaWVzOiBzdHJpbmdbXSkgPT4gdm9pZDtcbiAgdG9vbHRpcERpc3BsYXlNb2RlPzogVG9vbHRpcERpc3BsYXlNb2RlO1xuICBzcGxpdE9wZW5GbjogU3BsaXRPcGVuO1xuICBvbkNoYW5nZVRpbWU6ICh0aW1lUmFuZ2U6IEFic29sdXRlVGltZVJhbmdlKSA9PiB2b2lkO1xuICBncmFwaFN0eWxlOiBFeHBsb3JlR3JhcGhTdHlsZTtcbiAgYW5jaG9yVG9aZXJvPzogYm9vbGVhbjtcbiAgeUF4aXNNYXhpbXVtPzogbnVtYmVyO1xuICB0aHJlc2hvbGRzQ29uZmlnPzogVGhyZXNob2xkc0NvbmZpZztcbiAgdGhyZXNob2xkc1N0eWxlPzogR3JhcGhUaHJlc2hvbGRzU3R5bGVDb25maWc7XG4gIGV2ZW50QnVzOiBFdmVudEJ1cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEV4cGxvcmVHcmFwaCh7XG4gIGRhdGEsXG4gIGhlaWdodCxcbiAgd2lkdGgsXG4gIHRpbWVab25lLFxuICBhYnNvbHV0ZVJhbmdlLFxuICBvbkNoYW5nZVRpbWUsXG4gIGxvYWRpbmdTdGF0ZSxcbiAgYW5ub3RhdGlvbnMsXG4gIG9uSGlkZGVuU2VyaWVzQ2hhbmdlZCxcbiAgc3BsaXRPcGVuRm4sXG4gIGdyYXBoU3R5bGUsXG4gIHRvb2x0aXBEaXNwbGF5TW9kZSA9IFRvb2x0aXBEaXNwbGF5TW9kZS5TaW5nbGUsXG4gIGFuY2hvclRvWmVybyA9IGZhbHNlLFxuICB5QXhpc01heGltdW0sXG4gIHRocmVzaG9sZHNDb25maWcsXG4gIHRocmVzaG9sZHNTdHlsZSxcbiAgZXZlbnRCdXMsXG59OiBQcm9wcykge1xuICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lMigpO1xuICBjb25zdCBzdHlsZSA9IHVzZVN0eWxlczIoZ2V0U3R5bGVzKTtcbiAgY29uc3QgW3Nob3dBbGxUaW1lU2VyaWVzLCBzZXRTaG93QWxsVGltZVNlcmllc10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgdGltZVJhbmdlID0ge1xuICAgIGZyb206IGRhdGVUaW1lKGFic29sdXRlUmFuZ2UuZnJvbSksXG4gICAgdG86IGRhdGVUaW1lKGFic29sdXRlUmFuZ2UudG8pLFxuICAgIHJhdzoge1xuICAgICAgZnJvbTogZGF0ZVRpbWUoYWJzb2x1dGVSYW5nZS5mcm9tKSxcbiAgICAgIHRvOiBkYXRlVGltZShhYnNvbHV0ZVJhbmdlLnRvKSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IGZpZWxkQ29uZmlnUmVnaXN0cnkgPSB1c2VNZW1vKFxuICAgICgpID0+IGNyZWF0ZUZpZWxkQ29uZmlnUmVnaXN0cnkoZ2V0R3JhcGhGaWVsZENvbmZpZyhkZWZhdWx0R3JhcGhDb25maWcpLCAnRXhwbG9yZScpLFxuICAgIFtdXG4gICk7XG5cbiAgY29uc3QgW2ZpZWxkQ29uZmlnLCBzZXRGaWVsZENvbmZpZ10gPSB1c2VTdGF0ZTxGaWVsZENvbmZpZ1NvdXJjZTxHcmFwaEZpZWxkQ29uZmlnPj4oe1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICBtaW46IGFuY2hvclRvWmVybyA/IDAgOiB1bmRlZmluZWQsXG4gICAgICBtYXg6IHlBeGlzTWF4aW11bSB8fCB1bmRlZmluZWQsXG4gICAgICBjb2xvcjoge1xuICAgICAgICBtb2RlOiBGaWVsZENvbG9yTW9kZUlkLlBhbGV0dGVDbGFzc2ljLFxuICAgICAgfSxcbiAgICAgIGN1c3RvbToge1xuICAgICAgICBkcmF3U3R5bGU6IEdyYXBoRHJhd1N0eWxlLkxpbmUsXG4gICAgICAgIGZpbGxPcGFjaXR5OiAwLFxuICAgICAgICBwb2ludFNpemU6IDUsXG4gICAgICB9LFxuICAgIH0sXG4gICAgb3ZlcnJpZGVzOiBbXSxcbiAgfSk7XG5cbiAgY29uc3Qgc3R5bGVkRmllbGRDb25maWcgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB3aXRoR3JhcGhTdHlsZSA9IGFwcGx5R3JhcGhTdHlsZShmaWVsZENvbmZpZywgZ3JhcGhTdHlsZSwgeUF4aXNNYXhpbXVtKTtcbiAgICByZXR1cm4gYXBwbHlUaHJlc2hvbGRzQ29uZmlnKHdpdGhHcmFwaFN0eWxlLCB0aHJlc2hvbGRzU3R5bGUsIHRocmVzaG9sZHNDb25maWcpO1xuICB9LCBbZmllbGRDb25maWcsIGdyYXBoU3R5bGUsIHlBeGlzTWF4aW11bSwgdGhyZXNob2xkc0NvbmZpZywgdGhyZXNob2xkc1N0eWxlXSk7XG5cbiAgY29uc3QgZGF0YVdpdGhDb25maWcgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gYXBwbHlGaWVsZE92ZXJyaWRlcyh7XG4gICAgICBmaWVsZENvbmZpZzogc3R5bGVkRmllbGRDb25maWcsXG4gICAgICBkYXRhOiBzaG93QWxsVGltZVNlcmllcyA/IGRhdGEgOiBkYXRhLnNsaWNlKDAsIE1BWF9OVU1CRVJfT0ZfVElNRV9TRVJJRVMpLFxuICAgICAgdGltZVpvbmUsXG4gICAgICByZXBsYWNlVmFyaWFibGVzOiAodmFsdWUpID0+IHZhbHVlLCAvLyBXZSBkb24ndCBuZWVkIHByb3BlciByZXBsYWNlIGhlcmUgYXMgaXQgaXMgb25seSB1c2VkIGluIGdldExpbmtzIGFuZCB3ZSB1c2UgZ2V0RmllbGRMaW5rc1xuICAgICAgdGhlbWUsXG4gICAgICBmaWVsZENvbmZpZ1JlZ2lzdHJ5LFxuICAgIH0pO1xuICB9LCBbZmllbGRDb25maWdSZWdpc3RyeSwgZGF0YSwgdGltZVpvbmUsIHRoZW1lLCBzdHlsZWRGaWVsZENvbmZpZywgc2hvd0FsbFRpbWVTZXJpZXNdKTtcblxuICBjb25zdCBzdHJ1Y3R1cmVSZXYgPSB1c2VTdHJ1Y3R1cmVSZXYoZGF0YVdpdGhDb25maWcpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9uSGlkZGVuU2VyaWVzQ2hhbmdlZCkge1xuICAgICAgY29uc3QgaGlkZGVuRnJhbWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZGF0YVdpdGhDb25maWcuZm9yRWFjaCgoZnJhbWUpID0+IHtcbiAgICAgICAgY29uc3QgYWxsRmllbGRzSGlkZGVuID0gZnJhbWUuZmllbGRzLm1hcCgoZmllbGQpID0+IGZpZWxkLmNvbmZpZz8uY3VzdG9tPy5oaWRlRnJvbT8udml6KS5ldmVyeShpZGVudGl0eSk7XG4gICAgICAgIGlmIChhbGxGaWVsZHNIaWRkZW4pIHtcbiAgICAgICAgICBoaWRkZW5GcmFtZXMucHVzaChnZXRGcmFtZURpc3BsYXlOYW1lKGZyYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgb25IaWRkZW5TZXJpZXNDaGFuZ2VkKGhpZGRlbkZyYW1lcyk7XG4gICAgfVxuICB9LCBbZGF0YVdpdGhDb25maWcsIG9uSGlkZGVuU2VyaWVzQ2hhbmdlZF0pO1xuXG4gIGNvbnN0IHBhbmVsQ29udGV4dDogUGFuZWxDb250ZXh0ID0ge1xuICAgIGV2ZW50c1Njb3BlOiAnZXhwbG9yZScsXG4gICAgZXZlbnRCdXMsXG4gICAgc3luYzogKCkgPT4gRGFzaGJvYXJkQ3Vyc29yU3luYy5Dcm9zc2hhaXIsXG4gICAgb25TcGxpdE9wZW46IHNwbGl0T3BlbkZuLFxuICAgIG9uVG9nZ2xlU2VyaWVzVmlzaWJpbGl0eShsYWJlbDogc3RyaW5nLCBtb2RlOiBTZXJpZXNWaXNpYmlsaXR5Q2hhbmdlTW9kZSkge1xuICAgICAgc2V0RmllbGRDb25maWcoc2VyaWVzVmlzaWJpbGl0eUNvbmZpZ0ZhY3RvcnkobGFiZWwsIG1vZGUsIGZpZWxkQ29uZmlnLCBkYXRhKSk7XG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBwYW5lbE9wdGlvbnM6IFRpbWVTZXJpZXNPcHRpb25zID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgdG9vbHRpcDogeyBtb2RlOiB0b29sdGlwRGlzcGxheU1vZGUsIHNvcnQ6IFNvcnRPcmRlci5Ob25lIH0sXG4gICAgICBsZWdlbmQ6IHtcbiAgICAgICAgZGlzcGxheU1vZGU6IExlZ2VuZERpc3BsYXlNb2RlLkxpc3QsXG4gICAgICAgIHNob3dMZWdlbmQ6IHRydWUsXG4gICAgICAgIHBsYWNlbWVudDogJ2JvdHRvbScsXG4gICAgICAgIGNhbGNzOiBbXSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgW3Rvb2x0aXBEaXNwbGF5TW9kZV1cbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxQYW5lbENvbnRleHRQcm92aWRlciB2YWx1ZT17cGFuZWxDb250ZXh0fT5cbiAgICAgIHtkYXRhLmxlbmd0aCA+IE1BWF9OVU1CRVJfT0ZfVElNRV9TRVJJRVMgJiYgIXNob3dBbGxUaW1lU2VyaWVzICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlLnRpbWVTZXJpZXNEaXNjbGFpbWVyfT5cbiAgICAgICAgICA8SWNvbiBjbGFzc05hbWU9e3N0eWxlLmRpc2NsYWltZXJJY29ufSBuYW1lPVwiZXhjbGFtYXRpb24tdHJpYW5nbGVcIiAvPlxuICAgICAgICAgIFNob3dpbmcgb25seSB7TUFYX05VTUJFUl9PRl9USU1FX1NFUklFU30gdGltZSBzZXJpZXMuXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD1cInByaW1hcnlcIlxuICAgICAgICAgICAgZmlsbD1cInRleHRcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0FsbFRpbWVTZXJpZXModHJ1ZSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlLnNob3dBbGxCdXR0b259XG4gICAgICAgICAgPlxuICAgICAgICAgICAgU2hvdyBhbGwge2RhdGEubGVuZ3RofVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICA8UGFuZWxSZW5kZXJlclxuICAgICAgICBkYXRhPXt7IHNlcmllczogZGF0YVdpdGhDb25maWcsIHRpbWVSYW5nZSwgc3RhdGU6IGxvYWRpbmdTdGF0ZSwgYW5ub3RhdGlvbnMsIHN0cnVjdHVyZVJldiB9fVxuICAgICAgICBwbHVnaW5JZD1cInRpbWVzZXJpZXNcIlxuICAgICAgICB0aXRsZT1cIlwiXG4gICAgICAgIHdpZHRoPXt3aWR0aH1cbiAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgIG9uQ2hhbmdlVGltZVJhbmdlPXtvbkNoYW5nZVRpbWV9XG4gICAgICAgIHRpbWVab25lPXt0aW1lWm9uZX1cbiAgICAgICAgb3B0aW9ucz17cGFuZWxPcHRpb25zfVxuICAgICAgLz5cbiAgICA8L1BhbmVsQ29udGV4dFByb3ZpZGVyPlxuICApO1xufVxuXG5jb25zdCBnZXRTdHlsZXMgPSAodGhlbWU6IEdyYWZhbmFUaGVtZTIpID0+ICh7XG4gIHRpbWVTZXJpZXNEaXNjbGFpbWVyOiBjc3NgXG4gICAgbGFiZWw6IHRpbWUtc2VyaWVzLWRpc2NsYWltZXI7XG4gICAgbWFyZ2luOiAke3RoZW1lLnNwYWNpbmcoMSl9IGF1dG87XG4gICAgcGFkZGluZzogMTBweCAwO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgYCxcbiAgZGlzY2xhaW1lckljb246IGNzc2BcbiAgICBsYWJlbDogZGlzY2xhaW1lci1pY29uO1xuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy53YXJuaW5nLm1haW59O1xuICAgIG1hcmdpbi1yaWdodDogJHt0aGVtZS5zcGFjaW5nKDAuNSl9O1xuICBgLFxuICBzaG93QWxsQnV0dG9uOiBjc3NgXG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuc3BhY2luZygwLjUpfTtcbiAgYCxcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/app/features/explore/Graph/ExploreGraph.tsx\n");

/***/ }),

/***/ "./public/app/features/explore/Graph/ExploreGraphLabel.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExploreGraphLabel: () => (/* binding */ ExploreGraphLabel)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx\");\n/* harmony import */ var app_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/types/index.ts\");\n\n\n\n\nconst ALL_GRAPH_STYLE_OPTIONS = app_types__WEBPACK_IMPORTED_MODULE_1__.EXPLORE_GRAPH_STYLES.map((style) => ({\n  value: style,\n  // capital-case it and switch `_` to ` `\n  label: style[0].toUpperCase() + style.slice(1).replace(/_/, \" \")\n}));\nfunction ExploreGraphLabel(props) {\n  const { graphStyle, onChangeGraphStyle } = props;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grafana_ui__WEBPACK_IMPORTED_MODULE_2__.RadioButtonGroup, { size: \"sm\", options: ALL_GRAPH_STYLE_OPTIONS, value: graphStyle, onChange: onChangeGraphStyle });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvRXhwbG9yZUdyYXBoTGFiZWwudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrQjtBQUdlO0FBQ3VCO0FBRXhELE1BQU0sMEJBQXFFLDJEQUFvQixDQUFDLElBQUksQ0FBQyxXQUFXO0FBQUEsRUFDOUcsT0FBTztBQUFBO0FBQUEsRUFFUCxPQUFPLE1BQU0sQ0FBQyxFQUFFLFlBQVksSUFBSSxNQUFNLE1BQU0sQ0FBQyxFQUFFLFFBQVEsS0FBSyxHQUFHO0FBQ2pFLEVBQUU7QUFPSyxTQUFTLGtCQUFrQixPQUFjO0FBQzlDLFFBQU0sRUFBRSxZQUFZLG1CQUFtQixJQUFJO0FBQzNDLFNBQ0UsMkVBQUMseURBQWdCLElBQUMsTUFBSyxNQUFLLFNBQVMseUJBQXlCLE9BQU8sWUFBWSxVQUFVLG9CQUFvQjtBQUVuSCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvRXhwbG9yZUdyYXBoTGFiZWwudHN4P2RmODciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgU2VsZWN0YWJsZVZhbHVlIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBSYWRpb0J1dHRvbkdyb3VwIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuaW1wb3J0IHsgRVhQTE9SRV9HUkFQSF9TVFlMRVMsIEV4cGxvcmVHcmFwaFN0eWxlIH0gZnJvbSAnYXBwL3R5cGVzJztcblxuY29uc3QgQUxMX0dSQVBIX1NUWUxFX09QVElPTlM6IEFycmF5PFNlbGVjdGFibGVWYWx1ZTxFeHBsb3JlR3JhcGhTdHlsZT4+ID0gRVhQTE9SRV9HUkFQSF9TVFlMRVMubWFwKChzdHlsZSkgPT4gKHtcbiAgdmFsdWU6IHN0eWxlLFxuICAvLyBjYXBpdGFsLWNhc2UgaXQgYW5kIHN3aXRjaCBgX2AgdG8gYCBgXG4gIGxhYmVsOiBzdHlsZVswXS50b1VwcGVyQ2FzZSgpICsgc3R5bGUuc2xpY2UoMSkucmVwbGFjZSgvXy8sICcgJyksXG59KSk7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGdyYXBoU3R5bGU6IEV4cGxvcmVHcmFwaFN0eWxlO1xuICBvbkNoYW5nZUdyYXBoU3R5bGU6IChzdHlsZTogRXhwbG9yZUdyYXBoU3R5bGUpID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gRXhwbG9yZUdyYXBoTGFiZWwocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgZ3JhcGhTdHlsZSwgb25DaGFuZ2VHcmFwaFN0eWxlIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8UmFkaW9CdXR0b25Hcm91cCBzaXplPVwic21cIiBvcHRpb25zPXtBTExfR1JBUEhfU1RZTEVfT1BUSU9OU30gdmFsdWU9e2dyYXBoU3R5bGV9IG9uQ2hhbmdlPXtvbkNoYW5nZUdyYXBoU3R5bGV9IC8+XG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/features/explore/Graph/ExploreGraphLabel.tsx\n");

/***/ }),

/***/ "./public/app/features/explore/Graph/GraphContainer.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GraphContainer: () => (/* binding */ GraphContainer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _grafana_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-ui-virtual-d722efae30/1/packages/grafana-ui/src/components/PanelChrome/index.ts\");\n/* harmony import */ var _state_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/features/explore/state/utils.ts\");\n/* harmony import */ var _ExploreGraph__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./public/app/features/explore/Graph/ExploreGraph.tsx\");\n/* harmony import */ var _ExploreGraphLabel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./public/app/features/explore/Graph/ExploreGraphLabel.tsx\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./public/app/features/explore/Graph/utils.ts\");\n\n\n\n\n\n\n\nconst GraphContainer = ({\n  data,\n  eventBus,\n  height,\n  width,\n  absoluteRange,\n  timeZone,\n  annotations,\n  onChangeTime,\n  splitOpenFn,\n  thresholdsConfig,\n  thresholdsStyle,\n  loadingState,\n  statusMessage\n}) => {\n  const [graphStyle, setGraphStyle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(_utils__WEBPACK_IMPORTED_MODULE_4__.loadGraphStyle);\n  const onGraphStyleChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((graphStyle2) => {\n    (0,_state_utils__WEBPACK_IMPORTED_MODULE_1__.storeGraphStyle)(graphStyle2);\n    setGraphStyle(graphStyle2);\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    _grafana_ui__WEBPACK_IMPORTED_MODULE_5__.PanelChrome,\n    {\n      title: \"Graph\",\n      width,\n      height,\n      loadingState,\n      statusMessage,\n      actions: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ExploreGraphLabel__WEBPACK_IMPORTED_MODULE_3__.ExploreGraphLabel, { graphStyle, onChangeGraphStyle: onGraphStyleChange })\n    },\n    (innerWidth, innerHeight) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      _ExploreGraph__WEBPACK_IMPORTED_MODULE_2__.ExploreGraph,\n      {\n        graphStyle,\n        data,\n        height: innerHeight,\n        width: innerWidth,\n        absoluteRange,\n        onChangeTime,\n        timeZone,\n        annotations,\n        splitOpenFn,\n        loadingState,\n        thresholdsConfig,\n        thresholdsStyle,\n        eventBus\n      }\n    )\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvR3JhcGhDb250YWluZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE2QztBQVc2QjtBQUcxQztBQUVIO0FBQ0s7QUFDSDtBQWlCeEIsTUFBTSxpQkFBaUIsQ0FBQztBQUFBLEVBQzdCO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0YsTUFBYTtBQUNYLFFBQU0sQ0FBQyxZQUFZLGFBQWEsSUFBSSwrQ0FBUSxDQUFDLGtEQUFjO0FBRTNELFFBQU0scUJBQXFCLGtEQUFXLENBQUMsQ0FBQ0EsZ0JBQWtDO0FBQ3hFLGlFQUFlLENBQUNBLFdBQVU7QUFDMUIsa0JBQWNBLFdBQVU7QUFBQSxFQUMxQixHQUFHLENBQUMsQ0FBQztBQUVMLFNBQ0U7QUFBQSxJQUFDLG9EQUFXO0FBQVg7QUFBQSxNQUNDLE9BQU07QUFBQSxNQUNOO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQSxTQUFTLDJFQUFDLGlFQUFpQixJQUFDLFlBQXdCLG9CQUFvQixvQkFBb0I7QUFBQTtBQUFBLElBRTNGLENBQUMsWUFBWSxnQkFDWjtBQUFBLE1BQUMsdURBQVk7QUFBWjtBQUFBLFFBQ0M7QUFBQSxRQUNBO0FBQUEsUUFDQSxRQUFRO0FBQUEsUUFDUixPQUFPO0FBQUEsUUFDUDtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUE7QUFBQSxJQUNGO0FBQUEsRUFFSjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvZmVhdHVyZXMvZXhwbG9yZS9HcmFwaC9HcmFwaENvbnRhaW5lci50c3g/ZmFiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICBEYXRhRnJhbWUsXG4gIEV2ZW50QnVzLFxuICBBYnNvbHV0ZVRpbWVSYW5nZSxcbiAgVGltZVpvbmUsXG4gIFNwbGl0T3BlbixcbiAgTG9hZGluZ1N0YXRlLFxuICBUaHJlc2hvbGRzQ29uZmlnLFxufSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IEdyYXBoVGhyZXNob2xkc1N0eWxlQ29uZmlnLCBQYW5lbENocm9tZSwgUGFuZWxDaHJvbWVQcm9wcyB9IGZyb20gJ0BncmFmYW5hL3VpJztcbmltcG9ydCB7IEV4cGxvcmVHcmFwaFN0eWxlIH0gZnJvbSAnYXBwL3R5cGVzJztcblxuaW1wb3J0IHsgc3RvcmVHcmFwaFN0eWxlIH0gZnJvbSAnLi4vc3RhdGUvdXRpbHMnO1xuXG5pbXBvcnQgeyBFeHBsb3JlR3JhcGggfSBmcm9tICcuL0V4cGxvcmVHcmFwaCc7XG5pbXBvcnQgeyBFeHBsb3JlR3JhcGhMYWJlbCB9IGZyb20gJy4vRXhwbG9yZUdyYXBoTGFiZWwnO1xuaW1wb3J0IHsgbG9hZEdyYXBoU3R5bGUgfSBmcm9tICcuL3V0aWxzJztcblxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgUGljazxQYW5lbENocm9tZVByb3BzLCAnc3RhdHVzTWVzc2FnZSc+IHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIGRhdGE6IERhdGFGcmFtZVtdO1xuICBhbm5vdGF0aW9ucz86IERhdGFGcmFtZVtdO1xuICBldmVudEJ1czogRXZlbnRCdXM7XG4gIGFic29sdXRlUmFuZ2U6IEFic29sdXRlVGltZVJhbmdlO1xuICB0aW1lWm9uZTogVGltZVpvbmU7XG4gIG9uQ2hhbmdlVGltZTogKGFic29sdXRlUmFuZ2U6IEFic29sdXRlVGltZVJhbmdlKSA9PiB2b2lkO1xuICBzcGxpdE9wZW5GbjogU3BsaXRPcGVuO1xuICBsb2FkaW5nU3RhdGU6IExvYWRpbmdTdGF0ZTtcbiAgdGhyZXNob2xkc0NvbmZpZz86IFRocmVzaG9sZHNDb25maWc7XG4gIHRocmVzaG9sZHNTdHlsZT86IEdyYXBoVGhyZXNob2xkc1N0eWxlQ29uZmlnO1xufVxuXG5leHBvcnQgY29uc3QgR3JhcGhDb250YWluZXIgPSAoe1xuICBkYXRhLFxuICBldmVudEJ1cyxcbiAgaGVpZ2h0LFxuICB3aWR0aCxcbiAgYWJzb2x1dGVSYW5nZSxcbiAgdGltZVpvbmUsXG4gIGFubm90YXRpb25zLFxuICBvbkNoYW5nZVRpbWUsXG4gIHNwbGl0T3BlbkZuLFxuICB0aHJlc2hvbGRzQ29uZmlnLFxuICB0aHJlc2hvbGRzU3R5bGUsXG4gIGxvYWRpbmdTdGF0ZSxcbiAgc3RhdHVzTWVzc2FnZSxcbn06IFByb3BzKSA9PiB7XG4gIGNvbnN0IFtncmFwaFN0eWxlLCBzZXRHcmFwaFN0eWxlXSA9IHVzZVN0YXRlKGxvYWRHcmFwaFN0eWxlKTtcblxuICBjb25zdCBvbkdyYXBoU3R5bGVDaGFuZ2UgPSB1c2VDYWxsYmFjaygoZ3JhcGhTdHlsZTogRXhwbG9yZUdyYXBoU3R5bGUpID0+IHtcbiAgICBzdG9yZUdyYXBoU3R5bGUoZ3JhcGhTdHlsZSk7XG4gICAgc2V0R3JhcGhTdHlsZShncmFwaFN0eWxlKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiAoXG4gICAgPFBhbmVsQ2hyb21lXG4gICAgICB0aXRsZT1cIkdyYXBoXCJcbiAgICAgIHdpZHRoPXt3aWR0aH1cbiAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgbG9hZGluZ1N0YXRlPXtsb2FkaW5nU3RhdGV9XG4gICAgICBzdGF0dXNNZXNzYWdlPXtzdGF0dXNNZXNzYWdlfVxuICAgICAgYWN0aW9ucz17PEV4cGxvcmVHcmFwaExhYmVsIGdyYXBoU3R5bGU9e2dyYXBoU3R5bGV9IG9uQ2hhbmdlR3JhcGhTdHlsZT17b25HcmFwaFN0eWxlQ2hhbmdlfSAvPn1cbiAgICA+XG4gICAgICB7KGlubmVyV2lkdGgsIGlubmVySGVpZ2h0KSA9PiAoXG4gICAgICAgIDxFeHBsb3JlR3JhcGhcbiAgICAgICAgICBncmFwaFN0eWxlPXtncmFwaFN0eWxlfVxuICAgICAgICAgIGRhdGE9e2RhdGF9XG4gICAgICAgICAgaGVpZ2h0PXtpbm5lckhlaWdodH1cbiAgICAgICAgICB3aWR0aD17aW5uZXJXaWR0aH1cbiAgICAgICAgICBhYnNvbHV0ZVJhbmdlPXthYnNvbHV0ZVJhbmdlfVxuICAgICAgICAgIG9uQ2hhbmdlVGltZT17b25DaGFuZ2VUaW1lfVxuICAgICAgICAgIHRpbWVab25lPXt0aW1lWm9uZX1cbiAgICAgICAgICBhbm5vdGF0aW9ucz17YW5ub3RhdGlvbnN9XG4gICAgICAgICAgc3BsaXRPcGVuRm49e3NwbGl0T3BlbkZufVxuICAgICAgICAgIGxvYWRpbmdTdGF0ZT17bG9hZGluZ1N0YXRlfVxuICAgICAgICAgIHRocmVzaG9sZHNDb25maWc9e3RocmVzaG9sZHNDb25maWd9XG4gICAgICAgICAgdGhyZXNob2xkc1N0eWxlPXt0aHJlc2hvbGRzU3R5bGV9XG4gICAgICAgICAgZXZlbnRCdXM9e2V2ZW50QnVzfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICA8L1BhbmVsQ2hyb21lPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJncmFwaFN0eWxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/explore/Graph/GraphContainer.tsx\n");

/***/ }),

/***/ "./public/app/features/explore/Graph/exploreGraphStyleUtils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyGraphStyle: () => (/* binding */ applyGraphStyle),\n/* harmony export */   applyThresholdsConfig: () => (/* binding */ applyThresholdsConfig)\n/* harmony export */ });\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/immer-npm-10.0.2-c5dc19bd45-525a3b1421.zip/node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var _grafana_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./packages/grafana-schema/src/common/common.gen.ts\");\n\n\n\nfunction applyGraphStyle(config, style, maximum) {\n  return (0,immer__WEBPACK_IMPORTED_MODULE_0__.produce)(config, (draft) => {\n    if (draft.defaults.custom === void 0) {\n      draft.defaults.custom = {};\n    }\n    draft.defaults.max = maximum;\n    const { custom } = draft.defaults;\n    if (custom.stacking === void 0) {\n      custom.stacking = { group: \"A\" };\n    }\n    switch (style) {\n      case \"lines\":\n        custom.drawStyle = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.GraphDrawStyle.Line;\n        custom.stacking.mode = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.StackingMode.None;\n        custom.fillOpacity = 0;\n        break;\n      case \"bars\":\n        custom.drawStyle = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.GraphDrawStyle.Bars;\n        custom.stacking.mode = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.StackingMode.None;\n        custom.fillOpacity = 100;\n        break;\n      case \"points\":\n        custom.drawStyle = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.GraphDrawStyle.Points;\n        custom.stacking.mode = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.StackingMode.None;\n        custom.fillOpacity = 0;\n        break;\n      case \"stacked_lines\":\n        custom.drawStyle = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.GraphDrawStyle.Line;\n        custom.stacking.mode = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.StackingMode.Normal;\n        custom.fillOpacity = 100;\n        break;\n      case \"stacked_bars\":\n        custom.drawStyle = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.GraphDrawStyle.Bars;\n        custom.stacking.mode = _grafana_schema__WEBPACK_IMPORTED_MODULE_1__.StackingMode.Normal;\n        custom.fillOpacity = 100;\n        break;\n      default: {\n        const invalidValue = style;\n        throw new Error(`Invalid graph-style: ${invalidValue}`);\n      }\n    }\n  });\n}\nfunction applyThresholdsConfig(config, thresholdsStyle, thresholdsConfig) {\n  return (0,immer__WEBPACK_IMPORTED_MODULE_0__.produce)(config, (draft) => {\n    draft.defaults.thresholds = thresholdsConfig;\n    draft.defaults.custom = draft.defaults.custom ?? {};\n    draft.defaults.custom.thresholdsStyle = thresholdsStyle;\n  });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvZXhwbG9yZUdyYXBoU3R5bGVVdGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QjtBQUdtRTtBQUtwRixTQUFTLGdCQUFnQixRQUFxQixPQUEwQixTQUErQjtBQUM1RyxTQUFPLDhDQUFPLENBQUMsUUFBUSxDQUFDLFVBQVU7QUFDaEMsUUFBSSxNQUFNLFNBQVMsV0FBVyxRQUFXO0FBQ3ZDLFlBQU0sU0FBUyxTQUFTLENBQUM7QUFBQSxJQUMzQjtBQUVBLFVBQU0sU0FBUyxNQUFNO0FBRXJCLFVBQU0sRUFBRSxPQUFPLElBQUksTUFBTTtBQUV6QixRQUFJLE9BQU8sYUFBYSxRQUFXO0FBQ2pDLGFBQU8sV0FBVyxFQUFFLE9BQU8sSUFBSTtBQUFBLElBQ2pDO0FBRUEsWUFBUSxPQUFPO0FBQUEsTUFDYixLQUFLO0FBQ0gsZUFBTyxZQUFZLDJEQUFjLENBQUM7QUFDbEMsZUFBTyxTQUFTLE9BQU8seURBQVksQ0FBQztBQUNwQyxlQUFPLGNBQWM7QUFDckI7QUFBQSxNQUNGLEtBQUs7QUFDSCxlQUFPLFlBQVksMkRBQWMsQ0FBQztBQUNsQyxlQUFPLFNBQVMsT0FBTyx5REFBWSxDQUFDO0FBQ3BDLGVBQU8sY0FBYztBQUNyQjtBQUFBLE1BQ0YsS0FBSztBQUNILGVBQU8sWUFBWSwyREFBYyxDQUFDO0FBQ2xDLGVBQU8sU0FBUyxPQUFPLHlEQUFZLENBQUM7QUFDcEMsZUFBTyxjQUFjO0FBQ3JCO0FBQUEsTUFDRixLQUFLO0FBQ0gsZUFBTyxZQUFZLDJEQUFjLENBQUM7QUFDbEMsZUFBTyxTQUFTLE9BQU8seURBQVksQ0FBQztBQUNwQyxlQUFPLGNBQWM7QUFDckI7QUFBQSxNQUNGLEtBQUs7QUFDSCxlQUFPLFlBQVksMkRBQWMsQ0FBQztBQUNsQyxlQUFPLFNBQVMsT0FBTyx5REFBWSxDQUFDO0FBQ3BDLGVBQU8sY0FBYztBQUNyQjtBQUFBLE1BQ0YsU0FBUztBQUtQLGNBQU0sZUFBc0I7QUFDNUIsY0FBTSxJQUFJLE1BQU0sd0JBQXdCLGNBQWM7QUFBQSxNQUN4RDtBQUFBLElBQ0Y7QUFBQSxFQUNGLENBQUM7QUFDSDtBQUVPLFNBQVMsc0JBQ2QsUUFDQSxpQkFDQSxrQkFDYTtBQUNiLFNBQU8sOENBQU8sQ0FBQyxRQUFRLENBQUMsVUFBVTtBQUNoQyxVQUFNLFNBQVMsYUFBYTtBQUM1QixVQUFNLFNBQVMsU0FBUyxNQUFNLFNBQVMsVUFBVSxDQUFDO0FBQ2xELFVBQU0sU0FBUyxPQUFPLGtCQUFrQjtBQUFBLEVBQzFDLENBQUM7QUFDSCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvZXhwbG9yZUdyYXBoU3R5bGVVdGlscy50cz85YjI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb2R1Y2UgfSBmcm9tICdpbW1lcic7XG5cbmltcG9ydCB7IEZpZWxkQ29uZmlnU291cmNlLCBUaHJlc2hvbGRzQ29uZmlnIH0gZnJvbSAnQGdyYWZhbmEvZGF0YSc7XG5pbXBvcnQgeyBHcmFwaERyYXdTdHlsZSwgR3JhcGhGaWVsZENvbmZpZywgR3JhcGhUaHJlc2hvbGRzU3R5bGVDb25maWcsIFN0YWNraW5nTW9kZSB9IGZyb20gJ0BncmFmYW5hL3NjaGVtYSc7XG5pbXBvcnQgeyBFeHBsb3JlR3JhcGhTdHlsZSB9IGZyb20gJ2FwcC90eXBlcyc7XG5cbmV4cG9ydCB0eXBlIEZpZWxkQ29uZmlnID0gRmllbGRDb25maWdTb3VyY2U8R3JhcGhGaWVsZENvbmZpZz47XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUdyYXBoU3R5bGUoY29uZmlnOiBGaWVsZENvbmZpZywgc3R5bGU6IEV4cGxvcmVHcmFwaFN0eWxlLCBtYXhpbXVtPzogbnVtYmVyKTogRmllbGRDb25maWcge1xuICByZXR1cm4gcHJvZHVjZShjb25maWcsIChkcmFmdCkgPT4ge1xuICAgIGlmIChkcmFmdC5kZWZhdWx0cy5jdXN0b20gPT09IHVuZGVmaW5lZCkge1xuICAgICAgZHJhZnQuZGVmYXVsdHMuY3VzdG9tID0ge307XG4gICAgfVxuXG4gICAgZHJhZnQuZGVmYXVsdHMubWF4ID0gbWF4aW11bTtcblxuICAgIGNvbnN0IHsgY3VzdG9tIH0gPSBkcmFmdC5kZWZhdWx0cztcblxuICAgIGlmIChjdXN0b20uc3RhY2tpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3VzdG9tLnN0YWNraW5nID0geyBncm91cDogJ0EnIH07XG4gICAgfVxuXG4gICAgc3dpdGNoIChzdHlsZSkge1xuICAgICAgY2FzZSAnbGluZXMnOlxuICAgICAgICBjdXN0b20uZHJhd1N0eWxlID0gR3JhcGhEcmF3U3R5bGUuTGluZTtcbiAgICAgICAgY3VzdG9tLnN0YWNraW5nLm1vZGUgPSBTdGFja2luZ01vZGUuTm9uZTtcbiAgICAgICAgY3VzdG9tLmZpbGxPcGFjaXR5ID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdiYXJzJzpcbiAgICAgICAgY3VzdG9tLmRyYXdTdHlsZSA9IEdyYXBoRHJhd1N0eWxlLkJhcnM7XG4gICAgICAgIGN1c3RvbS5zdGFja2luZy5tb2RlID0gU3RhY2tpbmdNb2RlLk5vbmU7XG4gICAgICAgIGN1c3RvbS5maWxsT3BhY2l0eSA9IDEwMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwb2ludHMnOlxuICAgICAgICBjdXN0b20uZHJhd1N0eWxlID0gR3JhcGhEcmF3U3R5bGUuUG9pbnRzO1xuICAgICAgICBjdXN0b20uc3RhY2tpbmcubW9kZSA9IFN0YWNraW5nTW9kZS5Ob25lO1xuICAgICAgICBjdXN0b20uZmlsbE9wYWNpdHkgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0YWNrZWRfbGluZXMnOlxuICAgICAgICBjdXN0b20uZHJhd1N0eWxlID0gR3JhcGhEcmF3U3R5bGUuTGluZTtcbiAgICAgICAgY3VzdG9tLnN0YWNraW5nLm1vZGUgPSBTdGFja2luZ01vZGUuTm9ybWFsO1xuICAgICAgICBjdXN0b20uZmlsbE9wYWNpdHkgPSAxMDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3RhY2tlZF9iYXJzJzpcbiAgICAgICAgY3VzdG9tLmRyYXdTdHlsZSA9IEdyYXBoRHJhd1N0eWxlLkJhcnM7XG4gICAgICAgIGN1c3RvbS5zdGFja2luZy5tb2RlID0gU3RhY2tpbmdNb2RlLk5vcm1hbDtcbiAgICAgICAgY3VzdG9tLmZpbGxPcGFjaXR5ID0gMTAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gc2hvdWxkIG5ldmVyIGhhcHBlblxuICAgICAgICAvLyBOT1RFOiBjYXN0aW5nIHRvIGBuZXZlcmAgd2lsbCBjYXVzZSB0eXBlc2NyaXB0XG4gICAgICAgIC8vIHRvIHZlcmlmeSB0aGF0IHRoZSBzd2l0Y2ggc3RhdGVtZW50IGNoZWNrcyBldmVyeSBwb3NzaWJsZVxuICAgICAgICAvLyBlbnVtLXZhbHVlXG4gICAgICAgIGNvbnN0IGludmFsaWRWYWx1ZTogbmV2ZXIgPSBzdHlsZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGdyYXBoLXN0eWxlOiAke2ludmFsaWRWYWx1ZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUaHJlc2hvbGRzQ29uZmlnKFxuICBjb25maWc6IEZpZWxkQ29uZmlnLFxuICB0aHJlc2hvbGRzU3R5bGU/OiBHcmFwaFRocmVzaG9sZHNTdHlsZUNvbmZpZyxcbiAgdGhyZXNob2xkc0NvbmZpZz86IFRocmVzaG9sZHNDb25maWdcbik6IEZpZWxkQ29uZmlnIHtcbiAgcmV0dXJuIHByb2R1Y2UoY29uZmlnLCAoZHJhZnQpID0+IHtcbiAgICBkcmFmdC5kZWZhdWx0cy50aHJlc2hvbGRzID0gdGhyZXNob2xkc0NvbmZpZztcbiAgICBkcmFmdC5kZWZhdWx0cy5jdXN0b20gPSBkcmFmdC5kZWZhdWx0cy5jdXN0b20gPz8ge307XG4gICAgZHJhZnQuZGVmYXVsdHMuY3VzdG9tLnRocmVzaG9sZHNTdHlsZSA9IHRocmVzaG9sZHNTdHlsZTtcbiAgfSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/features/explore/Graph/exploreGraphStyleUtils.ts\n");

/***/ }),

/***/ "./public/app/features/explore/Graph/useStructureRev.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStructureRev: () => (/* binding */ useStructureRev)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useCounter.js\");\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/usePrevious.js\");\n/* harmony import */ var _grafana_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/frameComparisons.ts\");\n\n\n\n\nfunction useStructureRev(frames) {\n  const [structureRev, { inc }] = (0,react_use__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(0);\n  const previousFrames = (0,react_use__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(frames);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (previousFrames && !(0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.compareArrayValues)(frames, previousFrames, _grafana_data__WEBPACK_IMPORTED_MODULE_3__.compareDataFrameStructures)) {\n      inc();\n    }\n  }, [frames, previousFrames, inc]);\n  return structureRev;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvdXNlU3RydWN0dXJlUmV2LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0I7QUFDZ0I7QUFFa0M7QUFFbkUsU0FBUyxnQkFBZ0IsUUFBcUI7QUFDbkQsUUFBTSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsSUFBSSxxREFBVSxDQUFDLENBQUM7QUFDNUMsUUFBTSxpQkFBaUIscURBQVcsQ0FBQyxNQUFNO0FBS3pDLGdEQUFPLENBQUMsTUFBTTtBQUNaLFFBQUksa0JBQWtCLENBQUMsaUVBQWtCLENBQUMsUUFBUSxnQkFBZ0IscUVBQTBCLEdBQUc7QUFDN0YsVUFBSTtBQUFBLElBQ047QUFBQSxFQUNGLEdBQUcsQ0FBQyxRQUFRLGdCQUFnQixHQUFHLENBQUM7QUFFaEMsU0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uL3B1YmxpYy9hcHAvZmVhdHVyZXMvZXhwbG9yZS9HcmFwaC91c2VTdHJ1Y3R1cmVSZXYudHM/ODlmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQ291bnRlciwgdXNlUHJldmlvdXMgfSBmcm9tICdyZWFjdC11c2UnO1xuXG5pbXBvcnQgeyBEYXRhRnJhbWUsIGNvbXBhcmVBcnJheVZhbHVlcywgY29tcGFyZURhdGFGcmFtZVN0cnVjdHVyZXMgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVN0cnVjdHVyZVJldihmcmFtZXM6IERhdGFGcmFtZVtdKSB7XG4gIGNvbnN0IFtzdHJ1Y3R1cmVSZXYsIHsgaW5jIH1dID0gdXNlQ291bnRlcigwKTtcbiAgY29uc3QgcHJldmlvdXNGcmFtZXMgPSB1c2VQcmV2aW91cyhmcmFtZXMpO1xuXG4gIC8vIFdlIG5lZWQgdG8gaW5jcmVtZW50IHN0cnVjdHVyZVJldiB3aGVuIHRoZSBudW1iZXIgb2Ygc2VyaWVzIGNoYW5nZXMuXG4gIC8vIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gdXNlTWVtbyBydW5zIGR1cmluZyByZW5kZXJpbmcsIHNvIHdoZW4gd2UgZ2V0IGEgZGlmZmVyZW50XG4gIC8vIGFtb3VudCBvZiBkYXRhLCBzdHJ1Y3R1cmVSZXYgaXMgaW5jcmVtZW50ZWQgYmVmb3JlIHdlIHJlbmRlciBpdFxuICB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAocHJldmlvdXNGcmFtZXMgJiYgIWNvbXBhcmVBcnJheVZhbHVlcyhmcmFtZXMsIHByZXZpb3VzRnJhbWVzLCBjb21wYXJlRGF0YUZyYW1lU3RydWN0dXJlcykpIHtcbiAgICAgIGluYygpO1xuICAgIH1cbiAgfSwgW2ZyYW1lcywgcHJldmlvdXNGcmFtZXMsIGluY10pO1xuXG4gIHJldHVybiBzdHJ1Y3R1cmVSZXY7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/features/explore/Graph/useStructureRev.ts\n");

/***/ }),

/***/ "./public/app/features/explore/Graph/utils.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadGraphStyle: () => (/* binding */ loadGraphStyle),\n/* harmony export */   storeGraphStyle: () => (/* binding */ storeGraphStyle),\n/* harmony export */   toGraphStyle: () => (/* binding */ toGraphStyle)\n/* harmony export */ });\n/* harmony import */ var app_core_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/core/store.ts\");\n/* harmony import */ var app_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./public/app/types/index.ts\");\n\n\n\nconst GRAPH_STYLE_KEY = \"grafana.explore.style.graph\";\nconst storeGraphStyle = (graphStyle) => {\n  app_core_store__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(GRAPH_STYLE_KEY, graphStyle);\n};\nconst loadGraphStyle = () => {\n  return toGraphStyle(app_core_store__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(GRAPH_STYLE_KEY));\n};\nconst DEFAULT_GRAPH_STYLE = \"lines\";\nconst toGraphStyle = (data) => {\n  const found = app_types__WEBPACK_IMPORTED_MODULE_1__.EXPLORE_GRAPH_STYLES.find((v) => v === data);\n  return found ?? DEFAULT_GRAPH_STYLE;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWtCO0FBQ3NDO0FBRXhELE1BQU0sa0JBQWtCO0FBQ2pCLE1BQU0sa0JBQWtCLENBQUMsZUFBNkI7QUFDM0Qsd0RBQUssQ0FBQyxJQUFJLGlCQUFpQixVQUFVO0FBQ3ZDO0FBRU8sTUFBTSxpQkFBaUIsTUFBeUI7QUFDckQsU0FBTyxhQUFhLHNEQUFLLENBQUMsSUFBSSxlQUFlLENBQUM7QUFDaEQ7QUFFQSxNQUFNLHNCQUF5QztBQVV4QyxNQUFNLGVBQWUsQ0FBQyxTQUFxQztBQUNoRSxRQUFNLFFBQVEsMkRBQW9CLENBQUMsS0FBSyxDQUFDLE1BQU0sTUFBTSxJQUFJO0FBQ3pELFNBQU8sU0FBUztBQUNsQiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cGxvcmUvR3JhcGgvdXRpbHMudHM/MDMyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3RvcmUgZnJvbSAnYXBwL2NvcmUvc3RvcmUnO1xuaW1wb3J0IHsgRXhwbG9yZUdyYXBoU3R5bGUsIEVYUExPUkVfR1JBUEhfU1RZTEVTIH0gZnJvbSAnYXBwL3R5cGVzJztcblxuY29uc3QgR1JBUEhfU1RZTEVfS0VZID0gJ2dyYWZhbmEuZXhwbG9yZS5zdHlsZS5ncmFwaCc7XG5leHBvcnQgY29uc3Qgc3RvcmVHcmFwaFN0eWxlID0gKGdyYXBoU3R5bGU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBzdG9yZS5zZXQoR1JBUEhfU1RZTEVfS0VZLCBncmFwaFN0eWxlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2FkR3JhcGhTdHlsZSA9ICgpOiBFeHBsb3JlR3JhcGhTdHlsZSA9PiB7XG4gIHJldHVybiB0b0dyYXBoU3R5bGUoc3RvcmUuZ2V0KEdSQVBIX1NUWUxFX0tFWSkpO1xufTtcblxuY29uc3QgREVGQVVMVF9HUkFQSF9TVFlMRTogRXhwbG9yZUdyYXBoU3R5bGUgPSAnbGluZXMnO1xuLy8gd2UgdXNlIHRoaXMgZnVuY3Rpb24gdG8gdGFrZSBhbnkga2luZCBvZiBkYXRhIHdlIGxvYWRlZFxuLy8gZnJvbSBhbiBleHRlcm5hbCBzb3VyY2UgKFVSTCwgbG9jYWxTdG9yYWdlLCB3aGF0ZXZlciksXG4vLyBhbmQgZXh0cmFjdCB0aGUgZ3JhcGgtc3R5bGUgZnJvbSBpdCwgb3IgcmV0dXJuIHRoZSBkZWZhdWx0XG4vLyBncmFwaC1zdHlsZSBpZiB3ZSBhcmUgbm90IGFibGUgdG8gZG8gdGhhdC5cbi8vIGl0IGlzIGltcG9ydGFudCB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgYWJsZSB0byB0YWtlIGFueSBmb3JtIG9mIGRhdGEsXG4vLyAoYmUgaXQgb2JqZWN0cywgb3IgYXJyYXlzLCBvciBib29sZWFucyBvciB3aGF0ZXZlciksXG4vLyBhbmQgcHJvZHVjZSBhIGJlc3QtZWZmb3J0IGdyYXBoU3R5bGUuXG4vLyBub3RlIHRoYXQgdHlwZXNjcmlwdCBtYWtlcyBzdXJlIHdlIG1ha2Ugbm8gbWlzdGFrZSBpbiB0aGlzIGZ1bmN0aW9uLlxuLy8gd2UgZG8gbm90IHJlbHkgb24gYCBhcyBgIG9yIGAgYW55IGAuXG5leHBvcnQgY29uc3QgdG9HcmFwaFN0eWxlID0gKGRhdGE6IHVua25vd24pOiBFeHBsb3JlR3JhcGhTdHlsZSA9PiB7XG4gIGNvbnN0IGZvdW5kID0gRVhQTE9SRV9HUkFQSF9TVFlMRVMuZmluZCgodikgPT4gdiA9PT0gZGF0YSk7XG4gIHJldHVybiBmb3VuZCA/PyBERUZBVUxUX0dSQVBIX1NUWUxFO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/app/features/explore/Graph/utils.ts\n");

/***/ }),

/***/ "./public/app/features/expressions/guards.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isExpressionQuery: () => (/* binding */ isExpressionQuery)\n/* harmony export */ });\n/* harmony import */ var _grafana_runtime_src_utils_DataSourceWithBackend__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/@grafana-runtime-virtual-68c57d4c0c/1/packages/grafana-runtime/src/utils/DataSourceWithBackend.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./public/app/features/expressions/types.ts\");\n\n\n\nconst isExpressionQuery = (dataQuery) => {\n  if (!dataQuery) {\n    return false;\n  }\n  if ((0,_grafana_runtime_src_utils_DataSourceWithBackend__WEBPACK_IMPORTED_MODULE_1__.isExpressionReference)(dataQuery.datasource)) {\n    return true;\n  }\n  const expression = dataQuery;\n  if (typeof expression.type !== \"string\") {\n    return false;\n  }\n  return Object.values(_types__WEBPACK_IMPORTED_MODULE_0__.ExpressionQueryType).includes(expression.type);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cHJlc3Npb25zL2d1YXJkcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNDO0FBR2U7QUFFOUMsTUFBTSxvQkFBb0IsQ0FBQyxjQUF3RDtBQUN4RixNQUFJLENBQUMsV0FBVztBQUNkLFdBQU87QUFBQSxFQUNUO0FBRUEsTUFBSSx1R0FBcUIsQ0FBQyxVQUFVLFVBQVUsR0FBRztBQUMvQyxXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sYUFBYTtBQUVuQixNQUFJLE9BQU8sV0FBVyxTQUFTLFVBQVU7QUFDdkMsV0FBTztBQUFBLEVBQ1Q7QUFDQSxTQUFPLE9BQU8sT0FBTyx1REFBbUIsRUFBRSxTQUFTLFdBQVcsSUFBSTtBQUNwRSIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi9wdWJsaWMvYXBwL2ZlYXR1cmVzL2V4cHJlc3Npb25zL2d1YXJkcy50cz9hN2M3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRXhwcmVzc2lvblJlZmVyZW5jZSB9IGZyb20gJ0BncmFmYW5hL3J1bnRpbWUvc3JjL3V0aWxzL0RhdGFTb3VyY2VXaXRoQmFja2VuZCc7XG5pbXBvcnQgeyBEYXRhUXVlcnkgfSBmcm9tICdAZ3JhZmFuYS9zY2hlbWEnO1xuXG5pbXBvcnQgeyBFeHByZXNzaW9uUXVlcnksIEV4cHJlc3Npb25RdWVyeVR5cGUgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGlzRXhwcmVzc2lvblF1ZXJ5ID0gKGRhdGFRdWVyeT86IERhdGFRdWVyeSk6IGRhdGFRdWVyeSBpcyBFeHByZXNzaW9uUXVlcnkgPT4ge1xuICBpZiAoIWRhdGFRdWVyeSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChpc0V4cHJlc3Npb25SZWZlcmVuY2UoZGF0YVF1ZXJ5LmRhdGFzb3VyY2UpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCBleHByZXNzaW9uID0gZGF0YVF1ZXJ5IGFzIEV4cHJlc3Npb25RdWVyeTtcblxuICBpZiAodHlwZW9mIGV4cHJlc3Npb24udHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoRXhwcmVzc2lvblF1ZXJ5VHlwZSkuaW5jbHVkZXMoZXhwcmVzc2lvbi50eXBlKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/app/features/expressions/guards.ts\n");

/***/ }),

/***/ "./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/misc/hookState.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resolveHookState: () => (/* binding */ resolveHookState)\n/* harmony export */ });\nfunction resolveHookState(nextState, currentState) {\n    if (typeof nextState === 'function') {\n        return nextState.length ? nextState(currentState) : nextState();\n    }\n    return nextState;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9fX3ZpcnR1YWxfXy9yZWFjdC11c2UtdmlydHVhbC1kZDc5MjZmNDU4LzAvY2FjaGUvcmVhY3QtdXNlLW5wbS0xNy40LjAtMGVmNDUyMTU0NC0wODg5ZGE5MTliLnppcC9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS9taXNjL2hvb2tTdGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JhZmFuYS8uLy55YXJuL19fdmlydHVhbF9fL3JlYWN0LXVzZS12aXJ0dWFsLWRkNzkyNmY0NTgvMC9jYWNoZS9yZWFjdC11c2UtbnBtLTE3LjQuMC0wZWY0NTIxNTQ0LTA4ODlkYTkxOWIuemlwL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL21pc2MvaG9va1N0YXRlLmpzPzNiMzciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVIb29rU3RhdGUobmV4dFN0YXRlLCBjdXJyZW50U3RhdGUpIHtcbiAgICBpZiAodHlwZW9mIG5leHRTdGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV4dFN0YXRlLmxlbmd0aCA/IG5leHRTdGF0ZShjdXJyZW50U3RhdGUpIDogbmV4dFN0YXRlKCk7XG4gICAgfVxuICAgIHJldHVybiBuZXh0U3RhdGU7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/misc/hookState.js\n");

/***/ }),

/***/ "./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useCounter.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useCounter)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useGetSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useGetSet.js\");\n/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/misc/hookState.js\");\n\n\n\nfunction useCounter(initialValue, max, min) {\n    if (initialValue === void 0) { initialValue = 0; }\n    if (max === void 0) { max = null; }\n    if (min === void 0) { min = null; }\n    var init = (0,_misc_hookState__WEBPACK_IMPORTED_MODULE_1__.resolveHookState)(initialValue);\n    typeof init !== 'number' &&\n        console.error('initialValue has to be a number, got ' + typeof initialValue);\n    if (typeof min === 'number') {\n        init = Math.max(init, min);\n    }\n    else if (min !== null) {\n        console.error('min has to be a number, got ' + typeof min);\n    }\n    if (typeof max === 'number') {\n        init = Math.min(init, max);\n    }\n    else if (max !== null) {\n        console.error('max has to be a number, got ' + typeof max);\n    }\n    var _a = (0,_useGetSet__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(init), get = _a[0], setInternal = _a[1];\n    return [\n        get(),\n        (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n            var set = function (newState) {\n                var prevState = get();\n                var rState = (0,_misc_hookState__WEBPACK_IMPORTED_MODULE_1__.resolveHookState)(newState, prevState);\n                if (prevState !== rState) {\n                    if (typeof min === 'number') {\n                        rState = Math.max(rState, min);\n                    }\n                    if (typeof max === 'number') {\n                        rState = Math.min(rState, max);\n                    }\n                    prevState !== rState && setInternal(rState);\n                }\n            };\n            return {\n                get: get,\n                set: set,\n                inc: function (delta) {\n                    if (delta === void 0) { delta = 1; }\n                    var rDelta = (0,_misc_hookState__WEBPACK_IMPORTED_MODULE_1__.resolveHookState)(delta, get());\n                    if (typeof rDelta !== 'number') {\n                        console.error('delta has to be a number or function returning a number, got ' + typeof rDelta);\n                    }\n                    set(function (num) { return num + rDelta; });\n                },\n                dec: function (delta) {\n                    if (delta === void 0) { delta = 1; }\n                    var rDelta = (0,_misc_hookState__WEBPACK_IMPORTED_MODULE_1__.resolveHookState)(delta, get());\n                    if (typeof rDelta !== 'number') {\n                        console.error('delta has to be a number or function returning a number, got ' + typeof rDelta);\n                    }\n                    set(function (num) { return num - rDelta; });\n                },\n                reset: function (value) {\n                    if (value === void 0) { value = init; }\n                    var rValue = (0,_misc_hookState__WEBPACK_IMPORTED_MODULE_1__.resolveHookState)(value, get());\n                    if (typeof rValue !== 'number') {\n                        console.error('value has to be a number or function returning a number, got ' + typeof rValue);\n                    }\n                    // eslint-disable-next-line react-hooks/exhaustive-deps\n                    init = rValue;\n                    set(rValue);\n                },\n            };\n        }, [init, min, max]),\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9fX3ZpcnR1YWxfXy9yZWFjdC11c2UtdmlydHVhbC1kZDc5MjZmNDU4LzAvY2FjaGUvcmVhY3QtdXNlLW5wbS0xNy40LjAtMGVmNDUyMTU0NC0wODg5ZGE5MTliLnppcC9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VDb3VudGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWdDO0FBQ0k7QUFDZ0I7QUFDckM7QUFDZixtQ0FBbUM7QUFDbkMsMEJBQTBCO0FBQzFCLDBCQUEwQjtBQUMxQixlQUFlLGlFQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzREFBUztBQUN0QjtBQUNBO0FBQ0EsUUFBUSw4Q0FBTztBQUNmO0FBQ0E7QUFDQSw2QkFBNkIsaUVBQWdCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUMsaUNBQWlDLGlFQUFnQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsc0JBQXNCO0FBQy9ELGlCQUFpQjtBQUNqQjtBQUNBLDRDQUE0QztBQUM1QyxpQ0FBaUMsaUVBQWdCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzQkFBc0I7QUFDL0QsaUJBQWlCO0FBQ2pCO0FBQ0EsNENBQTRDO0FBQzVDLGlDQUFpQyxpRUFBZ0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFmYW5hLy4vLnlhcm4vX192aXJ0dWFsX18vcmVhY3QtdXNlLXZpcnR1YWwtZGQ3OTI2ZjQ1OC8wL2NhY2hlL3JlYWN0LXVzZS1ucG0tMTcuNC4wLTBlZjQ1MjE1NDQtMDg4OWRhOTE5Yi56aXAvbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlQ291bnRlci5qcz82MTM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlR2V0U2V0IGZyb20gJy4vdXNlR2V0U2V0JztcbmltcG9ydCB7IHJlc29sdmVIb29rU3RhdGUgfSBmcm9tICcuL21pc2MvaG9va1N0YXRlJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUNvdW50ZXIoaW5pdGlhbFZhbHVlLCBtYXgsIG1pbikge1xuICAgIGlmIChpbml0aWFsVmFsdWUgPT09IHZvaWQgMCkgeyBpbml0aWFsVmFsdWUgPSAwOyB9XG4gICAgaWYgKG1heCA9PT0gdm9pZCAwKSB7IG1heCA9IG51bGw7IH1cbiAgICBpZiAobWluID09PSB2b2lkIDApIHsgbWluID0gbnVsbDsgfVxuICAgIHZhciBpbml0ID0gcmVzb2x2ZUhvb2tTdGF0ZShpbml0aWFsVmFsdWUpO1xuICAgIHR5cGVvZiBpbml0ICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKCdpbml0aWFsVmFsdWUgaGFzIHRvIGJlIGEgbnVtYmVyLCBnb3QgJyArIHR5cGVvZiBpbml0aWFsVmFsdWUpO1xuICAgIGlmICh0eXBlb2YgbWluID09PSAnbnVtYmVyJykge1xuICAgICAgICBpbml0ID0gTWF0aC5tYXgoaW5pdCwgbWluKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWluICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ21pbiBoYXMgdG8gYmUgYSBudW1iZXIsIGdvdCAnICsgdHlwZW9mIG1pbik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbWF4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBpbml0ID0gTWF0aC5taW4oaW5pdCwgbWF4KTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWF4ICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ21heCBoYXMgdG8gYmUgYSBudW1iZXIsIGdvdCAnICsgdHlwZW9mIG1heCk7XG4gICAgfVxuICAgIHZhciBfYSA9IHVzZUdldFNldChpbml0KSwgZ2V0ID0gX2FbMF0sIHNldEludGVybmFsID0gX2FbMV07XG4gICAgcmV0dXJuIFtcbiAgICAgICAgZ2V0KCksXG4gICAgICAgIHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIChuZXdTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2U3RhdGUgPSBnZXQoKTtcbiAgICAgICAgICAgICAgICB2YXIgclN0YXRlID0gcmVzb2x2ZUhvb2tTdGF0ZShuZXdTdGF0ZSwgcHJldlN0YXRlKTtcbiAgICAgICAgICAgICAgICBpZiAocHJldlN0YXRlICE9PSByU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByU3RhdGUgPSBNYXRoLm1heChyU3RhdGUsIG1pbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByU3RhdGUgPSBNYXRoLm1pbihyU3RhdGUsIG1heCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJldlN0YXRlICE9PSByU3RhdGUgJiYgc2V0SW50ZXJuYWwoclN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgICAgICBzZXQ6IHNldCxcbiAgICAgICAgICAgICAgICBpbmM6IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEgPT09IHZvaWQgMCkgeyBkZWx0YSA9IDE7IH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJEZWx0YSA9IHJlc29sdmVIb29rU3RhdGUoZGVsdGEsIGdldCgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByRGVsdGEgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdkZWx0YSBoYXMgdG8gYmUgYSBudW1iZXIgb3IgZnVuY3Rpb24gcmV0dXJuaW5nIGEgbnVtYmVyLCBnb3QgJyArIHR5cGVvZiByRGVsdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldChmdW5jdGlvbiAobnVtKSB7IHJldHVybiBudW0gKyByRGVsdGE7IH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVjOiBmdW5jdGlvbiAoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhID09PSB2b2lkIDApIHsgZGVsdGEgPSAxOyB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByRGVsdGEgPSByZXNvbHZlSG9va1N0YXRlKGRlbHRhLCBnZXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgckRlbHRhICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZGVsdGEgaGFzIHRvIGJlIGEgbnVtYmVyIG9yIGZ1bmN0aW9uIHJldHVybmluZyBhIG51bWJlciwgZ290ICcgKyB0eXBlb2YgckRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXQoZnVuY3Rpb24gKG51bSkgeyByZXR1cm4gbnVtIC0gckRlbHRhOyB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHsgdmFsdWUgPSBpbml0OyB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByVmFsdWUgPSByZXNvbHZlSG9va1N0YXRlKHZhbHVlLCBnZXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgclZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigndmFsdWUgaGFzIHRvIGJlIGEgbnVtYmVyIG9yIGZ1bmN0aW9uIHJldHVybmluZyBhIG51bWJlciwgZ290ICcgKyB0eXBlb2YgclZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgICAgICAgICAgICAgICAgIGluaXQgPSByVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHNldChyVmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCBbaW5pdCwgbWluLCBtYXhdKSxcbiAgICBdO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useCounter.js\n");

/***/ }),

/***/ "./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useGetSet.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useGetSet)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useUpdate.js\");\n/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/misc/hookState.js\");\n\n\n\nfunction useGetSet(initialState) {\n    var state = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)((0,_misc_hookState__WEBPACK_IMPORTED_MODULE_1__.resolveHookState)(initialState));\n    var update = (0,_useUpdate__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () { return [\n        function () { return state.current; },\n        function (newState) {\n            state.current = (0,_misc_hookState__WEBPACK_IMPORTED_MODULE_1__.resolveHookState)(newState, state.current);\n            update();\n        },\n    ]; }, []);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9fX3ZpcnR1YWxfXy9yZWFjdC11c2UtdmlydHVhbC1kZDc5MjZmNDU4LzAvY2FjaGUvcmVhY3QtdXNlLW5wbS0xNy40LjAtMGVmNDUyMTU0NC0wODg5ZGE5MTliLnppcC9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VHZXRTZXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDSjtBQUNnQjtBQUNyQztBQUNmLGdCQUFnQiw2Q0FBTSxDQUFDLGlFQUFnQjtBQUN2QyxpQkFBaUIsc0RBQVM7QUFDMUIsV0FBVyw4Q0FBTyxlQUFlO0FBQ2pDLHNCQUFzQix1QkFBdUI7QUFDN0M7QUFDQSw0QkFBNEIsaUVBQWdCO0FBQzVDO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi8ueWFybi9fX3ZpcnR1YWxfXy9yZWFjdC11c2UtdmlydHVhbC1kZDc5MjZmNDU4LzAvY2FjaGUvcmVhY3QtdXNlLW5wbS0xNy40LjAtMGVmNDUyMTU0NC0wODg5ZGE5MTliLnppcC9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VHZXRTZXQuanM/Y2Q1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlVXBkYXRlIGZyb20gJy4vdXNlVXBkYXRlJztcbmltcG9ydCB7IHJlc29sdmVIb29rU3RhdGUgfSBmcm9tICcuL21pc2MvaG9va1N0YXRlJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUdldFNldChpbml0aWFsU3RhdGUpIHtcbiAgICB2YXIgc3RhdGUgPSB1c2VSZWYocmVzb2x2ZUhvb2tTdGF0ZShpbml0aWFsU3RhdGUpKTtcbiAgICB2YXIgdXBkYXRlID0gdXNlVXBkYXRlKCk7XG4gICAgcmV0dXJuIHVzZU1lbW8oZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBzdGF0ZS5jdXJyZW50OyB9LFxuICAgICAgICBmdW5jdGlvbiAobmV3U3RhdGUpIHtcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnQgPSByZXNvbHZlSG9va1N0YXRlKG5ld1N0YXRlLCBzdGF0ZS5jdXJyZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgIF07IH0sIFtdKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useGetSet.js\n");

/***/ }),

/***/ "./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useUpdate.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useUpdate)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nvar updateReducer = function (num) { return (num + 1) % 1000000; };\nfunction useUpdate() {\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(updateReducer, 0), update = _a[1];\n    return update;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9fX3ZpcnR1YWxfXy9yZWFjdC11c2UtdmlydHVhbC1kZDc5MjZmNDU4LzAvY2FjaGUvcmVhY3QtdXNlLW5wbS0xNy40LjAtMGVmNDUyMTU0NC0wODg5ZGE5MTliLnppcC9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VVcGRhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBQ25DLHFDQUFxQztBQUN0QjtBQUNmLGFBQWEsaURBQVU7QUFDdkI7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi8ueWFybi9fX3ZpcnR1YWxfXy9yZWFjdC11c2UtdmlydHVhbC1kZDc5MjZmNDU4LzAvY2FjaGUvcmVhY3QtdXNlLW5wbS0xNy40LjAtMGVmNDUyMTU0NC0wODg5ZGE5MTliLnppcC9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VVcGRhdGUuanM/ZjQzNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSZWR1Y2VyIH0gZnJvbSAncmVhY3QnO1xudmFyIHVwZGF0ZVJlZHVjZXIgPSBmdW5jdGlvbiAobnVtKSB7IHJldHVybiAobnVtICsgMSkgJSAxMDAwMDAwOyB9O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVXBkYXRlKCkge1xuICAgIHZhciBfYSA9IHVzZVJlZHVjZXIodXBkYXRlUmVkdWNlciwgMCksIHVwZGF0ZSA9IF9hWzFdO1xuICAgIHJldHVybiB1cGRhdGU7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./.yarn/__virtual__/react-use-virtual-dd7926f458/0/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useUpdate.js\n");

/***/ }),

/***/ "./.yarn/cache/immer-npm-10.0.2-c5dc19bd45-525a3b1421.zip/node_modules/immer/dist/immer.mjs":
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Immer: () => (/* binding */ Immer2),\n/* harmony export */   applyPatches: () => (/* binding */ applyPatches),\n/* harmony export */   castDraft: () => (/* binding */ castDraft),\n/* harmony export */   castImmutable: () => (/* binding */ castImmutable),\n/* harmony export */   createDraft: () => (/* binding */ createDraft),\n/* harmony export */   current: () => (/* binding */ current),\n/* harmony export */   enableMapSet: () => (/* binding */ enableMapSet),\n/* harmony export */   enablePatches: () => (/* binding */ enablePatches),\n/* harmony export */   finishDraft: () => (/* binding */ finishDraft),\n/* harmony export */   freeze: () => (/* binding */ freeze),\n/* harmony export */   immerable: () => (/* binding */ DRAFTABLE),\n/* harmony export */   isDraft: () => (/* binding */ isDraft),\n/* harmony export */   isDraftable: () => (/* binding */ isDraftable),\n/* harmony export */   nothing: () => (/* binding */ NOTHING),\n/* harmony export */   original: () => (/* binding */ original),\n/* harmony export */   produce: () => (/* binding */ produce),\n/* harmony export */   produceWithPatches: () => (/* binding */ produceWithPatches),\n/* harmony export */   setAutoFreeze: () => (/* binding */ setAutoFreeze),\n/* harmony export */   setUseStrictShallowCopy: () => (/* binding */ setUseStrictShallowCopy)\n/* harmony export */ });\n// src/utils/env.ts\nvar NOTHING = Symbol.for(\"immer-nothing\");\nvar DRAFTABLE = Symbol.for(\"immer-draftable\");\nvar DRAFT_STATE = Symbol.for(\"immer-state\");\n\n// src/utils/errors.ts\nvar errors =  true ? [\n  // All error codes, starting by 0:\n  function(plugin) {\n    return `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`;\n  },\n  function(thing) {\n    return `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`;\n  },\n  \"This object has been frozen and should not be mutated\",\n  function(data) {\n    return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + data;\n  },\n  \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n  \"Immer forbids circular references\",\n  \"The first or second argument to `produce` must be a function\",\n  \"The third argument to `produce` must be a function or undefined\",\n  \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n  \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n  function(thing) {\n    return `'current' expects a draft, got: ${thing}`;\n  },\n  \"Object.defineProperty() cannot be used on an Immer draft\",\n  \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n  \"Immer only supports deleting array indices\",\n  \"Immer only supports setting array indices and the 'length' property\",\n  function(thing) {\n    return `'original' expects a draft, got: ${thing}`;\n  }\n  // Note: if more errors are added, the errorOffset in Patches.ts should be increased\n  // See Patches.ts for additional errors\n] : 0;\nfunction die(error, ...args) {\n  if (true) {\n    const e = errors[error];\n    const msg = typeof e === \"function\" ? e.apply(null, args) : e;\n    throw new Error(`[Immer] ${msg}`);\n  }\n  throw new Error(\n    `[Immer] minified error nr: ${error}. Full error at: https://bit.ly/3cXEKWf`\n  );\n}\n\n// src/utils/common.ts\nvar getPrototypeOf = Object.getPrototypeOf;\nfunction isDraft(value) {\n  return !!value && !!value[DRAFT_STATE];\n}\nfunction isDraftable(value) {\n  if (!value)\n    return false;\n  return isPlainObject(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!value.constructor?.[DRAFTABLE] || isMap(value) || isSet(value);\n}\nvar objectCtorString = Object.prototype.constructor.toString();\nfunction isPlainObject(value) {\n  if (!value || typeof value !== \"object\")\n    return false;\n  const proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  const Ctor = Object.hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n  if (Ctor === Object)\n    return true;\n  return typeof Ctor == \"function\" && Function.toString.call(Ctor) === objectCtorString;\n}\nfunction original(value) {\n  if (!isDraft(value))\n    die(15, value);\n  return value[DRAFT_STATE].base_;\n}\nfunction each(obj, iter) {\n  if (getArchtype(obj) === 0 /* Object */) {\n    Object.entries(obj).forEach(([key, value]) => {\n      iter(key, value, obj);\n    });\n  } else {\n    obj.forEach((entry, index) => iter(index, entry, obj));\n  }\n}\nfunction getArchtype(thing) {\n  const state = thing[DRAFT_STATE];\n  return state ? state.type_ : Array.isArray(thing) ? 1 /* Array */ : isMap(thing) ? 2 /* Map */ : isSet(thing) ? 3 /* Set */ : 0 /* Object */;\n}\nfunction has(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);\n}\nfunction get(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.get(prop) : thing[prop];\n}\nfunction set(thing, propOrOldValue, value) {\n  const t = getArchtype(thing);\n  if (t === 2 /* Map */)\n    thing.set(propOrOldValue, value);\n  else if (t === 3 /* Set */) {\n    thing.add(value);\n  } else\n    thing[propOrOldValue] = value;\n}\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction isMap(target) {\n  return target instanceof Map;\n}\nfunction isSet(target) {\n  return target instanceof Set;\n}\nfunction latest(state) {\n  return state.copy_ || state.base_;\n}\nfunction shallowCopy(base, strict) {\n  if (isMap(base)) {\n    return new Map(base);\n  }\n  if (isSet(base)) {\n    return new Set(base);\n  }\n  if (Array.isArray(base))\n    return Array.prototype.slice.call(base);\n  if (!strict && isPlainObject(base)) {\n    if (!getPrototypeOf(base)) {\n      const obj = /* @__PURE__ */ Object.create(null);\n      return Object.assign(obj, base);\n    }\n    return { ...base };\n  }\n  const descriptors = Object.getOwnPropertyDescriptors(base);\n  delete descriptors[DRAFT_STATE];\n  let keys = Reflect.ownKeys(descriptors);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const desc = descriptors[key];\n    if (desc.writable === false) {\n      desc.writable = true;\n      desc.configurable = true;\n    }\n    if (desc.get || desc.set)\n      descriptors[key] = {\n        configurable: true,\n        writable: true,\n        // could live with !!desc.set as well here...\n        enumerable: desc.enumerable,\n        value: base[key]\n      };\n  }\n  return Object.create(getPrototypeOf(base), descriptors);\n}\nfunction freeze(obj, deep = false) {\n  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))\n    return obj;\n  if (getArchtype(obj) > 1) {\n    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;\n  }\n  Object.freeze(obj);\n  if (deep)\n    each(obj, (_key, value) => freeze(value, true), true);\n  return obj;\n}\nfunction dontMutateFrozenCollections() {\n  die(2);\n}\nfunction isFrozen(obj) {\n  return Object.isFrozen(obj);\n}\n\n// src/utils/plugins.ts\nvar plugins = {};\nfunction getPlugin(pluginKey) {\n  const plugin = plugins[pluginKey];\n  if (!plugin) {\n    die(0, pluginKey);\n  }\n  return plugin;\n}\nfunction loadPlugin(pluginKey, implementation) {\n  if (!plugins[pluginKey])\n    plugins[pluginKey] = implementation;\n}\n\n// src/core/scope.ts\nvar currentScope;\nfunction getCurrentScope() {\n  return currentScope;\n}\nfunction createScope(parent_, immer_) {\n  return {\n    drafts_: [],\n    parent_,\n    immer_,\n    // Whenever the modified draft contains a draft from another scope, we\n    // need to prevent auto-freezing so the unowned draft can be finalized.\n    canAutoFreeze_: true,\n    unfinalizedDrafts_: 0\n  };\n}\nfunction usePatchesInScope(scope, patchListener) {\n  if (patchListener) {\n    getPlugin(\"Patches\");\n    scope.patches_ = [];\n    scope.inversePatches_ = [];\n    scope.patchListener_ = patchListener;\n  }\n}\nfunction revokeScope(scope) {\n  leaveScope(scope);\n  scope.drafts_.forEach(revokeDraft);\n  scope.drafts_ = null;\n}\nfunction leaveScope(scope) {\n  if (scope === currentScope) {\n    currentScope = scope.parent_;\n  }\n}\nfunction enterScope(immer2) {\n  return currentScope = createScope(currentScope, immer2);\n}\nfunction revokeDraft(draft) {\n  const state = draft[DRAFT_STATE];\n  if (state.type_ === 0 /* Object */ || state.type_ === 1 /* Array */)\n    state.revoke_();\n  else\n    state.revoked_ = true;\n}\n\n// src/core/finalize.ts\nfunction processResult(result, scope) {\n  scope.unfinalizedDrafts_ = scope.drafts_.length;\n  const baseDraft = scope.drafts_[0];\n  const isReplaced = result !== void 0 && result !== baseDraft;\n  if (isReplaced) {\n    if (baseDraft[DRAFT_STATE].modified_) {\n      revokeScope(scope);\n      die(4);\n    }\n    if (isDraftable(result)) {\n      result = finalize(scope, result);\n      if (!scope.parent_)\n        maybeFreeze(scope, result);\n    }\n    if (scope.patches_) {\n      getPlugin(\"Patches\").generateReplacementPatches_(\n        baseDraft[DRAFT_STATE].base_,\n        result,\n        scope.patches_,\n        scope.inversePatches_\n      );\n    }\n  } else {\n    result = finalize(scope, baseDraft, []);\n  }\n  revokeScope(scope);\n  if (scope.patches_) {\n    scope.patchListener_(scope.patches_, scope.inversePatches_);\n  }\n  return result !== NOTHING ? result : void 0;\n}\nfunction finalize(rootScope, value, path) {\n  if (isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  if (!state) {\n    each(\n      value,\n      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path),\n      true\n      // See #590, don't recurse into non-enumerable of non drafted objects\n    );\n    return value;\n  }\n  if (state.scope_ !== rootScope)\n    return value;\n  if (!state.modified_) {\n    maybeFreeze(rootScope, state.base_, true);\n    return state.base_;\n  }\n  if (!state.finalized_) {\n    state.finalized_ = true;\n    state.scope_.unfinalizedDrafts_--;\n    const result = state.copy_;\n    let resultEach = result;\n    let isSet2 = false;\n    if (state.type_ === 3 /* Set */) {\n      resultEach = new Set(result);\n      result.clear();\n      isSet2 = true;\n    }\n    each(\n      resultEach,\n      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path, isSet2)\n    );\n    maybeFreeze(rootScope, result, false);\n    if (path && rootScope.patches_) {\n      getPlugin(\"Patches\").generatePatches_(\n        state,\n        path,\n        rootScope.patches_,\n        rootScope.inversePatches_\n      );\n    }\n  }\n  return state.copy_;\n}\nfunction finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {\n  if ( true && childValue === targetObject)\n    die(5);\n  if (isDraft(childValue)) {\n    const path = rootPath && parentState && parentState.type_ !== 3 /* Set */ && // Set objects are atomic since they have no keys.\n    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;\n    const res = finalize(rootScope, childValue, path);\n    set(targetObject, prop, res);\n    if (isDraft(res)) {\n      rootScope.canAutoFreeze_ = false;\n    } else\n      return;\n  } else if (targetIsSet) {\n    targetObject.add(childValue);\n  }\n  if (isDraftable(childValue) && !isFrozen(childValue)) {\n    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n      return;\n    }\n    finalize(rootScope, childValue);\n    if (!parentState || !parentState.scope_.parent_)\n      maybeFreeze(rootScope, childValue);\n  }\n}\nfunction maybeFreeze(scope, value, deep = false) {\n  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n    freeze(value, deep);\n  }\n}\n\n// src/core/proxy.ts\nfunction createProxyProxy(base, parent) {\n  const isArray = Array.isArray(base);\n  const state = {\n    type_: isArray ? 1 /* Array */ : 0 /* Object */,\n    // Track which produce call this is associated with.\n    scope_: parent ? parent.scope_ : getCurrentScope(),\n    // True for both shallow and deep changes.\n    modified_: false,\n    // Used during finalization.\n    finalized_: false,\n    // Track which properties have been assigned (true) or deleted (false).\n    assigned_: {},\n    // The parent draft state.\n    parent_: parent,\n    // The base state.\n    base_: base,\n    // The base proxy.\n    draft_: null,\n    // set below\n    // The base copy with any updated values.\n    copy_: null,\n    // Called by the `produce` function.\n    revoke_: null,\n    isManual_: false\n  };\n  let target = state;\n  let traps = objectTraps;\n  if (isArray) {\n    target = [state];\n    traps = arrayTraps;\n  }\n  const { revoke, proxy } = Proxy.revocable(target, traps);\n  state.draft_ = proxy;\n  state.revoke_ = revoke;\n  return proxy;\n}\nvar objectTraps = {\n  get(state, prop) {\n    if (prop === DRAFT_STATE)\n      return state;\n    const source = latest(state);\n    if (!has(source, prop)) {\n      return readPropFromProto(state, source, prop);\n    }\n    const value = source[prop];\n    if (state.finalized_ || !isDraftable(value)) {\n      return value;\n    }\n    if (value === peek(state.base_, prop)) {\n      prepareCopy(state);\n      return state.copy_[prop] = createProxy(value, state);\n    }\n    return value;\n  },\n  has(state, prop) {\n    return prop in latest(state);\n  },\n  ownKeys(state) {\n    return Reflect.ownKeys(latest(state));\n  },\n  set(state, prop, value) {\n    const desc = getDescriptorFromProto(latest(state), prop);\n    if (desc?.set) {\n      desc.set.call(state.draft_, value);\n      return true;\n    }\n    if (!state.modified_) {\n      const current2 = peek(latest(state), prop);\n      const currentState = current2?.[DRAFT_STATE];\n      if (currentState && currentState.base_ === value) {\n        state.copy_[prop] = value;\n        state.assigned_[prop] = false;\n        return true;\n      }\n      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))\n        return true;\n      prepareCopy(state);\n      markChanged(state);\n    }\n    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'\n    (value !== void 0 || prop in state.copy_) || // special case: NaN\n    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))\n      return true;\n    state.copy_[prop] = value;\n    state.assigned_[prop] = true;\n    return true;\n  },\n  deleteProperty(state, prop) {\n    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {\n      state.assigned_[prop] = false;\n      prepareCopy(state);\n      markChanged(state);\n    } else {\n      delete state.assigned_[prop];\n    }\n    if (state.copy_) {\n      delete state.copy_[prop];\n    }\n    return true;\n  },\n  // Note: We never coerce `desc.value` into an Immer draft, because we can't make\n  // the same guarantee in ES5 mode.\n  getOwnPropertyDescriptor(state, prop) {\n    const owner = latest(state);\n    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);\n    if (!desc)\n      return desc;\n    return {\n      writable: true,\n      configurable: state.type_ !== 1 /* Array */ || prop !== \"length\",\n      enumerable: desc.enumerable,\n      value: owner[prop]\n    };\n  },\n  defineProperty() {\n    die(11);\n  },\n  getPrototypeOf(state) {\n    return getPrototypeOf(state.base_);\n  },\n  setPrototypeOf() {\n    die(12);\n  }\n};\nvar arrayTraps = {};\neach(objectTraps, (key, fn) => {\n  arrayTraps[key] = function() {\n    arguments[0] = arguments[0][0];\n    return fn.apply(this, arguments);\n  };\n});\narrayTraps.deleteProperty = function(state, prop) {\n  if ( true && isNaN(parseInt(prop)))\n    die(13);\n  return arrayTraps.set.call(this, state, prop, void 0);\n};\narrayTraps.set = function(state, prop, value) {\n  if ( true && prop !== \"length\" && isNaN(parseInt(prop)))\n    die(14);\n  return objectTraps.set.call(this, state[0], prop, value, state[0]);\n};\nfunction peek(draft, prop) {\n  const state = draft[DRAFT_STATE];\n  const source = state ? latest(state) : draft;\n  return source[prop];\n}\nfunction readPropFromProto(state, source, prop) {\n  const desc = getDescriptorFromProto(source, prop);\n  return desc ? `value` in desc ? desc.value : (\n    // This is a very special case, if the prop is a getter defined by the\n    // prototype, we should invoke it with the draft as context!\n    desc.get?.call(state.draft_)\n  ) : void 0;\n}\nfunction getDescriptorFromProto(source, prop) {\n  if (!(prop in source))\n    return void 0;\n  let proto = getPrototypeOf(source);\n  while (proto) {\n    const desc = Object.getOwnPropertyDescriptor(proto, prop);\n    if (desc)\n      return desc;\n    proto = getPrototypeOf(proto);\n  }\n  return void 0;\n}\nfunction markChanged(state) {\n  if (!state.modified_) {\n    state.modified_ = true;\n    if (state.parent_) {\n      markChanged(state.parent_);\n    }\n  }\n}\nfunction prepareCopy(state) {\n  if (!state.copy_) {\n    state.copy_ = shallowCopy(\n      state.base_,\n      state.scope_.immer_.useStrictShallowCopy_\n    );\n  }\n}\n\n// src/core/immerClass.ts\nvar Immer2 = class {\n  constructor(config) {\n    this.autoFreeze_ = true;\n    this.useStrictShallowCopy_ = false;\n    /**\n     * The `produce` function takes a value and a \"recipe function\" (whose\n     * return value often depends on the base state). The recipe function is\n     * free to mutate its first argument however it wants. All mutations are\n     * only ever applied to a __copy__ of the base state.\n     *\n     * Pass only a function to create a \"curried producer\" which relieves you\n     * from passing the recipe function every time.\n     *\n     * Only plain objects and arrays are made mutable. All other objects are\n     * considered uncopyable.\n     *\n     * Note: This function is __bound__ to its `Immer` instance.\n     *\n     * @param {any} base - the initial state\n     * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified\n     * @param {Function} patchListener - optional function that will be called with all the patches produced here\n     * @returns {any} a new state, or the initial state if nothing was modified\n     */\n    this.produce = (base, recipe, patchListener) => {\n      if (typeof base === \"function\" && typeof recipe !== \"function\") {\n        const defaultBase = recipe;\n        recipe = base;\n        const self = this;\n        return function curriedProduce(base2 = defaultBase, ...args) {\n          return self.produce(base2, (draft) => recipe.call(this, draft, ...args));\n        };\n      }\n      if (typeof recipe !== \"function\")\n        die(6);\n      if (patchListener !== void 0 && typeof patchListener !== \"function\")\n        die(7);\n      let result;\n      if (isDraftable(base)) {\n        const scope = enterScope(this);\n        const proxy = createProxy(base, void 0);\n        let hasError = true;\n        try {\n          result = recipe(proxy);\n          hasError = false;\n        } finally {\n          if (hasError)\n            revokeScope(scope);\n          else\n            leaveScope(scope);\n        }\n        usePatchesInScope(scope, patchListener);\n        return processResult(result, scope);\n      } else if (!base || typeof base !== \"object\") {\n        result = recipe(base);\n        if (result === void 0)\n          result = base;\n        if (result === NOTHING)\n          result = void 0;\n        if (this.autoFreeze_)\n          freeze(result, true);\n        if (patchListener) {\n          const p = [];\n          const ip = [];\n          getPlugin(\"Patches\").generateReplacementPatches_(base, result, p, ip);\n          patchListener(p, ip);\n        }\n        return result;\n      } else\n        die(1, base);\n    };\n    this.produceWithPatches = (base, recipe) => {\n      if (typeof base === \"function\") {\n        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));\n      }\n      let patches, inversePatches;\n      const result = this.produce(base, recipe, (p, ip) => {\n        patches = p;\n        inversePatches = ip;\n      });\n      return [result, patches, inversePatches];\n    };\n    if (typeof config?.autoFreeze === \"boolean\")\n      this.setAutoFreeze(config.autoFreeze);\n    if (typeof config?.useStrictShallowCopy === \"boolean\")\n      this.setUseStrictShallowCopy(config.useStrictShallowCopy);\n  }\n  createDraft(base) {\n    if (!isDraftable(base))\n      die(8);\n    if (isDraft(base))\n      base = current(base);\n    const scope = enterScope(this);\n    const proxy = createProxy(base, void 0);\n    proxy[DRAFT_STATE].isManual_ = true;\n    leaveScope(scope);\n    return proxy;\n  }\n  finishDraft(draft, patchListener) {\n    const state = draft && draft[DRAFT_STATE];\n    if (!state || !state.isManual_)\n      die(9);\n    const { scope_: scope } = state;\n    usePatchesInScope(scope, patchListener);\n    return processResult(void 0, scope);\n  }\n  /**\n   * Pass true to automatically freeze all copies created by Immer.\n   *\n   * By default, auto-freezing is enabled.\n   */\n  setAutoFreeze(value) {\n    this.autoFreeze_ = value;\n  }\n  /**\n   * Pass true to enable strict shallow copy.\n   *\n   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.\n   */\n  setUseStrictShallowCopy(value) {\n    this.useStrictShallowCopy_ = value;\n  }\n  applyPatches(base, patches) {\n    let i;\n    for (i = patches.length - 1; i >= 0; i--) {\n      const patch = patches[i];\n      if (patch.path.length === 0 && patch.op === \"replace\") {\n        base = patch.value;\n        break;\n      }\n    }\n    if (i > -1) {\n      patches = patches.slice(i + 1);\n    }\n    const applyPatchesImpl = getPlugin(\"Patches\").applyPatches_;\n    if (isDraft(base)) {\n      return applyPatchesImpl(base, patches);\n    }\n    return this.produce(\n      base,\n      (draft) => applyPatchesImpl(draft, patches)\n    );\n  }\n};\nfunction createProxy(value, parent) {\n  const draft = isMap(value) ? getPlugin(\"MapSet\").proxyMap_(value, parent) : isSet(value) ? getPlugin(\"MapSet\").proxySet_(value, parent) : createProxyProxy(value, parent);\n  const scope = parent ? parent.scope_ : getCurrentScope();\n  scope.drafts_.push(draft);\n  return draft;\n}\n\n// src/core/current.ts\nfunction current(value) {\n  if (!isDraft(value))\n    die(10, value);\n  return currentImpl(value);\n}\nfunction currentImpl(value) {\n  if (!isDraftable(value) || isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  let copy;\n  if (state) {\n    if (!state.modified_)\n      return state.base_;\n    state.finalized_ = true;\n    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);\n  } else {\n    copy = shallowCopy(value, true);\n  }\n  each(copy, (key, childValue) => {\n    set(copy, key, currentImpl(childValue));\n  });\n  if (state) {\n    state.finalized_ = false;\n  }\n  return copy;\n}\n\n// src/plugins/patches.ts\nfunction enablePatches() {\n  const errorOffset = 16;\n  if (true) {\n    errors.push(\n      'Sets cannot have \"replace\" patches.',\n      function(op) {\n        return \"Unsupported patch operation: \" + op;\n      },\n      function(path) {\n        return \"Cannot apply patch, path doesn't resolve: \" + path;\n      },\n      \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n    );\n  }\n  const REPLACE = \"replace\";\n  const ADD = \"add\";\n  const REMOVE = \"remove\";\n  function generatePatches_(state, basePath, patches, inversePatches) {\n    switch (state.type_) {\n      case 0 /* Object */:\n      case 2 /* Map */:\n        return generatePatchesFromAssigned(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n      case 1 /* Array */:\n        return generateArrayPatches(state, basePath, patches, inversePatches);\n      case 3 /* Set */:\n        return generateSetPatches(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n    }\n  }\n  function generateArrayPatches(state, basePath, patches, inversePatches) {\n    let { base_, assigned_ } = state;\n    let copy_ = state.copy_;\n    if (copy_.length < base_.length) {\n      ;\n      [base_, copy_] = [copy_, base_];\n      [patches, inversePatches] = [inversePatches, patches];\n    }\n    for (let i = 0; i < base_.length; i++) {\n      if (assigned_[i] && copy_[i] !== base_[i]) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REPLACE,\n          path,\n          // Need to maybe clone it, as it can in fact be the original value\n          // due to the base/copy inversion at the start of this function\n          value: clonePatchValueIfNeeded(copy_[i])\n        });\n        inversePatches.push({\n          op: REPLACE,\n          path,\n          value: clonePatchValueIfNeeded(base_[i])\n        });\n      }\n    }\n    for (let i = base_.length; i < copy_.length; i++) {\n      const path = basePath.concat([i]);\n      patches.push({\n        op: ADD,\n        path,\n        // Need to maybe clone it, as it can in fact be the original value\n        // due to the base/copy inversion at the start of this function\n        value: clonePatchValueIfNeeded(copy_[i])\n      });\n    }\n    for (let i = copy_.length - 1; base_.length <= i; --i) {\n      const path = basePath.concat([i]);\n      inversePatches.push({\n        op: REMOVE,\n        path\n      });\n    }\n  }\n  function generatePatchesFromAssigned(state, basePath, patches, inversePatches) {\n    const { base_, copy_ } = state;\n    each(state.assigned_, (key, assignedValue) => {\n      const origValue = get(base_, key);\n      const value = get(copy_, key);\n      const op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD;\n      if (origValue === value && op === REPLACE)\n        return;\n      const path = basePath.concat(key);\n      patches.push(op === REMOVE ? { op, path } : { op, path, value });\n      inversePatches.push(\n        op === ADD ? { op: REMOVE, path } : op === REMOVE ? { op: ADD, path, value: clonePatchValueIfNeeded(origValue) } : { op: REPLACE, path, value: clonePatchValueIfNeeded(origValue) }\n      );\n    });\n  }\n  function generateSetPatches(state, basePath, patches, inversePatches) {\n    let { base_, copy_ } = state;\n    let i = 0;\n    base_.forEach((value) => {\n      if (!copy_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REMOVE,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: ADD,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n    i = 0;\n    copy_.forEach((value) => {\n      if (!base_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: ADD,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: REMOVE,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n  }\n  function generateReplacementPatches_(baseValue, replacement, patches, inversePatches) {\n    patches.push({\n      op: REPLACE,\n      path: [],\n      value: replacement === NOTHING ? void 0 : replacement\n    });\n    inversePatches.push({\n      op: REPLACE,\n      path: [],\n      value: baseValue\n    });\n  }\n  function applyPatches_(draft, patches) {\n    patches.forEach((patch) => {\n      const { path, op } = patch;\n      let base = draft;\n      for (let i = 0; i < path.length - 1; i++) {\n        const parentType = getArchtype(base);\n        let p = path[i];\n        if (typeof p !== \"string\" && typeof p !== \"number\") {\n          p = \"\" + p;\n        }\n        if ((parentType === 0 /* Object */ || parentType === 1 /* Array */) && (p === \"__proto__\" || p === \"constructor\"))\n          die(errorOffset + 3);\n        if (typeof base === \"function\" && p === \"prototype\")\n          die(errorOffset + 3);\n        base = get(base, p);\n        if (typeof base !== \"object\")\n          die(errorOffset + 2, path.join(\"/\"));\n      }\n      const type = getArchtype(base);\n      const value = deepClonePatchValue(patch.value);\n      const key = path[path.length - 1];\n      switch (op) {\n        case REPLACE:\n          switch (type) {\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              die(errorOffset);\n            default:\n              return base[key] = value;\n          }\n        case ADD:\n          switch (type) {\n            case 1 /* Array */:\n              return key === \"-\" ? base.push(value) : base.splice(key, 0, value);\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              return base.add(value);\n            default:\n              return base[key] = value;\n          }\n        case REMOVE:\n          switch (type) {\n            case 1 /* Array */:\n              return base.splice(key, 1);\n            case 2 /* Map */:\n              return base.delete(key);\n            case 3 /* Set */:\n              return base.delete(patch.value);\n            default:\n              return delete base[key];\n          }\n        default:\n          die(errorOffset + 1, op);\n      }\n    });\n    return draft;\n  }\n  function deepClonePatchValue(obj) {\n    if (!isDraftable(obj))\n      return obj;\n    if (Array.isArray(obj))\n      return obj.map(deepClonePatchValue);\n    if (isMap(obj))\n      return new Map(\n        Array.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n      );\n    if (isSet(obj))\n      return new Set(Array.from(obj).map(deepClonePatchValue));\n    const cloned = Object.create(getPrototypeOf(obj));\n    for (const key in obj)\n      cloned[key] = deepClonePatchValue(obj[key]);\n    if (has(obj, DRAFTABLE))\n      cloned[DRAFTABLE] = obj[DRAFTABLE];\n    return cloned;\n  }\n  function clonePatchValueIfNeeded(obj) {\n    if (isDraft(obj)) {\n      return deepClonePatchValue(obj);\n    } else\n      return obj;\n  }\n  loadPlugin(\"Patches\", {\n    applyPatches_,\n    generatePatches_,\n    generateReplacementPatches_\n  });\n}\n\n// src/plugins/mapset.ts\nfunction enableMapSet() {\n  class DraftMap extends Map {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 2 /* Map */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        assigned_: void 0,\n        base_: target,\n        draft_: this,\n        isManual_: false,\n        revoked_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(key) {\n      return latest(this[DRAFT_STATE]).has(key);\n    }\n    set(key, value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!latest(state).has(key) || latest(state).get(key) !== value) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_.set(key, true);\n        state.copy_.set(key, value);\n        state.assigned_.set(key, true);\n      }\n      return this;\n    }\n    delete(key) {\n      if (!this.has(key)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareMapCopy(state);\n      markChanged(state);\n      if (state.base_.has(key)) {\n        state.assigned_.set(key, false);\n      } else {\n        state.assigned_.delete(key);\n      }\n      state.copy_.delete(key);\n      return true;\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_ = /* @__PURE__ */ new Map();\n        each(state.base_, (key) => {\n          state.assigned_.set(key, false);\n        });\n        state.copy_.clear();\n      }\n    }\n    forEach(cb, thisArg) {\n      const state = this[DRAFT_STATE];\n      latest(state).forEach((_value, key, _map) => {\n        cb.call(thisArg, this.get(key), key, this);\n      });\n    }\n    get(key) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      const value = latest(state).get(key);\n      if (state.finalized_ || !isDraftable(value)) {\n        return value;\n      }\n      if (value !== state.base_.get(key)) {\n        return value;\n      }\n      const draft = createProxy(value, state);\n      prepareMapCopy(state);\n      state.copy_.set(key, draft);\n      return draft;\n    }\n    keys() {\n      return latest(this[DRAFT_STATE]).keys();\n    }\n    values() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.values(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value\n          };\n        }\n      };\n    }\n    entries() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.entries(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value: [r.value, value]\n          };\n        }\n      };\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.entries();\n    }\n  }\n  function proxyMap_(target, parent) {\n    return new DraftMap(target, parent);\n  }\n  function prepareMapCopy(state) {\n    if (!state.copy_) {\n      state.assigned_ = /* @__PURE__ */ new Map();\n      state.copy_ = new Map(state.base_);\n    }\n  }\n  class DraftSet extends Set {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 3 /* Set */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        base_: target,\n        draft_: this,\n        drafts_: /* @__PURE__ */ new Map(),\n        revoked_: false,\n        isManual_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!state.copy_) {\n        return state.base_.has(value);\n      }\n      if (state.copy_.has(value))\n        return true;\n      if (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))\n        return true;\n      return false;\n    }\n    add(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!this.has(value)) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.add(value);\n      }\n      return this;\n    }\n    delete(value) {\n      if (!this.has(value)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      markChanged(state);\n      return state.copy_.delete(value) || (state.drafts_.has(value) ? state.copy_.delete(state.drafts_.get(value)) : (\n        /* istanbul ignore next */\n        false\n      ));\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.clear();\n      }\n    }\n    values() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.values();\n    }\n    entries() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.entries();\n    }\n    keys() {\n      return this.values();\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.values();\n    }\n    forEach(cb, thisArg) {\n      const iterator = this.values();\n      let result = iterator.next();\n      while (!result.done) {\n        cb.call(thisArg, result.value, result.value, this);\n        result = iterator.next();\n      }\n    }\n  }\n  function proxySet_(target, parent) {\n    return new DraftSet(target, parent);\n  }\n  function prepareSetCopy(state) {\n    if (!state.copy_) {\n      state.copy_ = /* @__PURE__ */ new Set();\n      state.base_.forEach((value) => {\n        if (isDraftable(value)) {\n          const draft = createProxy(value, state);\n          state.drafts_.set(value, draft);\n          state.copy_.add(draft);\n        } else {\n          state.copy_.add(value);\n        }\n      });\n    }\n  }\n  function assertUnrevoked(state) {\n    if (state.revoked_)\n      die(3, JSON.stringify(latest(state)));\n  }\n  loadPlugin(\"MapSet\", { proxyMap_, proxySet_ });\n}\n\n// src/immer.ts\nvar immer = new Immer2();\nvar produce = immer.produce;\nvar produceWithPatches = immer.produceWithPatches.bind(\n  immer\n);\nvar setAutoFreeze = immer.setAutoFreeze.bind(immer);\nvar setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);\nvar applyPatches = immer.applyPatches.bind(immer);\nvar createDraft = immer.createDraft.bind(immer);\nvar finishDraft = immer.finishDraft.bind(immer);\nfunction castDraft(value) {\n  return value;\n}\nfunction castImmutable(value) {\n  return value;\n}\n\n//# sourceMappingURL=immer.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi8ueWFybi9jYWNoZS9pbW1lci1ucG0tMTAuMC4yLWM1ZGMxOWJkNDUtNTI1YTNiMTQyMS56aXAvbm9kZV9tb2R1bGVzL2ltbWVyL2Rpc3QvaW1tZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsS0FBcUM7QUFDbEQ7QUFDQTtBQUNBLDhCQUE4QixPQUFPLGtGQUFrRixPQUFPO0FBQzlILEdBQUc7QUFDSDtBQUNBLGlLQUFpSyxNQUFNO0FBQ3ZLLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsTUFBTTtBQUNwRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxNQUFNO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLElBQUksQ0FBRTtBQUNOO0FBQ0EsTUFBTSxJQUFxQztBQUMzQztBQUNBO0FBQ0EsK0JBQStCLElBQUk7QUFDbkM7QUFDQTtBQUNBLGtDQUFrQyxNQUFNO0FBQ3hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlCQUFpQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLEtBQXFDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLE1BQU0sS0FBcUM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLEtBQXFDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEIsZUFBZSxVQUFVO0FBQ3pCLGVBQWUsVUFBVTtBQUN6QixpQkFBaUIsS0FBSztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0JBQXNCO0FBQy9DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxQkU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyYWZhbmEvLi8ueWFybi9jYWNoZS9pbW1lci1ucG0tMTAuMC4yLWM1ZGMxOWJkNDUtNTI1YTNiMTQyMS56aXAvbm9kZV9tb2R1bGVzL2ltbWVyL2Rpc3QvaW1tZXIubWpzPzE5MTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2Vudi50c1xudmFyIE5PVEhJTkcgPSBTeW1ib2wuZm9yKFwiaW1tZXItbm90aGluZ1wiKTtcbnZhciBEUkFGVEFCTEUgPSBTeW1ib2wuZm9yKFwiaW1tZXItZHJhZnRhYmxlXCIpO1xudmFyIERSQUZUX1NUQVRFID0gU3ltYm9sLmZvcihcImltbWVyLXN0YXRlXCIpO1xuXG4vLyBzcmMvdXRpbHMvZXJyb3JzLnRzXG52YXIgZXJyb3JzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gW1xuICAvLyBBbGwgZXJyb3IgY29kZXMsIHN0YXJ0aW5nIGJ5IDA6XG4gIGZ1bmN0aW9uKHBsdWdpbikge1xuICAgIHJldHVybiBgVGhlIHBsdWdpbiBmb3IgJyR7cGx1Z2lufScgaGFzIG5vdCBiZWVuIGxvYWRlZCBpbnRvIEltbWVyLiBUbyBlbmFibGUgdGhlIHBsdWdpbiwgaW1wb3J0IGFuZCBjYWxsIFxcYGVuYWJsZSR7cGx1Z2lufSgpXFxgIHdoZW4gaW5pdGlhbGl6aW5nIHlvdXIgYXBwbGljYXRpb24uYDtcbiAgfSxcbiAgZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gYHByb2R1Y2UgY2FuIG9ubHkgYmUgY2FsbGVkIG9uIHRoaW5ncyB0aGF0IGFyZSBkcmFmdGFibGU6IHBsYWluIG9iamVjdHMsIGFycmF5cywgTWFwLCBTZXQgb3IgY2xhc3NlcyB0aGF0IGFyZSBtYXJrZWQgd2l0aCAnW2ltbWVyYWJsZV06IHRydWUnLiBHb3QgJyR7dGhpbmd9J2A7XG4gIH0sXG4gIFwiVGhpcyBvYmplY3QgaGFzIGJlZW4gZnJvemVuIGFuZCBzaG91bGQgbm90IGJlIG11dGF0ZWRcIixcbiAgZnVuY3Rpb24oZGF0YSkge1xuICAgIHJldHVybiBcIkNhbm5vdCB1c2UgYSBwcm94eSB0aGF0IGhhcyBiZWVuIHJldm9rZWQuIERpZCB5b3UgcGFzcyBhbiBvYmplY3QgZnJvbSBpbnNpZGUgYW4gaW1tZXIgZnVuY3Rpb24gdG8gYW4gYXN5bmMgcHJvY2Vzcz8gXCIgKyBkYXRhO1xuICB9LFxuICBcIkFuIGltbWVyIHByb2R1Y2VyIHJldHVybmVkIGEgbmV3IHZhbHVlICphbmQqIG1vZGlmaWVkIGl0cyBkcmFmdC4gRWl0aGVyIHJldHVybiBhIG5ldyB2YWx1ZSAqb3IqIG1vZGlmeSB0aGUgZHJhZnQuXCIsXG4gIFwiSW1tZXIgZm9yYmlkcyBjaXJjdWxhciByZWZlcmVuY2VzXCIsXG4gIFwiVGhlIGZpcnN0IG9yIHNlY29uZCBhcmd1bWVudCB0byBgcHJvZHVjZWAgbXVzdCBiZSBhIGZ1bmN0aW9uXCIsXG4gIFwiVGhlIHRoaXJkIGFyZ3VtZW50IHRvIGBwcm9kdWNlYCBtdXN0IGJlIGEgZnVuY3Rpb24gb3IgdW5kZWZpbmVkXCIsXG4gIFwiRmlyc3QgYXJndW1lbnQgdG8gYGNyZWF0ZURyYWZ0YCBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LCBhbiBhcnJheSwgb3IgYW4gaW1tZXJhYmxlIG9iamVjdFwiLFxuICBcIkZpcnN0IGFyZ3VtZW50IHRvIGBmaW5pc2hEcmFmdGAgbXVzdCBiZSBhIGRyYWZ0IHJldHVybmVkIGJ5IGBjcmVhdGVEcmFmdGBcIixcbiAgZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gYCdjdXJyZW50JyBleHBlY3RzIGEgZHJhZnQsIGdvdDogJHt0aGluZ31gO1xuICB9LFxuICBcIk9iamVjdC5kZWZpbmVQcm9wZXJ0eSgpIGNhbm5vdCBiZSB1c2VkIG9uIGFuIEltbWVyIGRyYWZ0XCIsXG4gIFwiT2JqZWN0LnNldFByb3RvdHlwZU9mKCkgY2Fubm90IGJlIHVzZWQgb24gYW4gSW1tZXIgZHJhZnRcIixcbiAgXCJJbW1lciBvbmx5IHN1cHBvcnRzIGRlbGV0aW5nIGFycmF5IGluZGljZXNcIixcbiAgXCJJbW1lciBvbmx5IHN1cHBvcnRzIHNldHRpbmcgYXJyYXkgaW5kaWNlcyBhbmQgdGhlICdsZW5ndGgnIHByb3BlcnR5XCIsXG4gIGZ1bmN0aW9uKHRoaW5nKSB7XG4gICAgcmV0dXJuIGAnb3JpZ2luYWwnIGV4cGVjdHMgYSBkcmFmdCwgZ290OiAke3RoaW5nfWA7XG4gIH1cbiAgLy8gTm90ZTogaWYgbW9yZSBlcnJvcnMgYXJlIGFkZGVkLCB0aGUgZXJyb3JPZmZzZXQgaW4gUGF0Y2hlcy50cyBzaG91bGQgYmUgaW5jcmVhc2VkXG4gIC8vIFNlZSBQYXRjaGVzLnRzIGZvciBhZGRpdGlvbmFsIGVycm9yc1xuXSA6IFtdO1xuZnVuY3Rpb24gZGllKGVycm9yLCAuLi5hcmdzKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zdCBlID0gZXJyb3JzW2Vycm9yXTtcbiAgICBjb25zdCBtc2cgPSB0eXBlb2YgZSA9PT0gXCJmdW5jdGlvblwiID8gZS5hcHBseShudWxsLCBhcmdzKSA6IGU7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBbSW1tZXJdICR7bXNnfWApO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgW0ltbWVyXSBtaW5pZmllZCBlcnJvciBucjogJHtlcnJvcn0uIEZ1bGwgZXJyb3IgYXQ6IGh0dHBzOi8vYml0Lmx5LzNjWEVLV2ZgXG4gICk7XG59XG5cbi8vIHNyYy91dGlscy9jb21tb24udHNcbnZhciBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbmZ1bmN0aW9uIGlzRHJhZnQodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgISF2YWx1ZVtEUkFGVF9TVEFURV07XG59XG5mdW5jdGlvbiBpc0RyYWZ0YWJsZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlKVxuICAgIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGlzUGxhaW5PYmplY3QodmFsdWUpIHx8IEFycmF5LmlzQXJyYXkodmFsdWUpIHx8ICEhdmFsdWVbRFJBRlRBQkxFXSB8fCAhIXZhbHVlLmNvbnN0cnVjdG9yPy5bRFJBRlRBQkxFXSB8fCBpc01hcCh2YWx1ZSkgfHwgaXNTZXQodmFsdWUpO1xufVxudmFyIG9iamVjdEN0b3JTdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCk7XG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKVxuICAgIHJldHVybiBmYWxzZTtcbiAgY29uc3QgcHJvdG8gPSBnZXRQcm90b3R5cGVPZih2YWx1ZSk7XG4gIGlmIChwcm90byA9PT0gbnVsbCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IEN0b3IgPSBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChwcm90bywgXCJjb25zdHJ1Y3RvclwiKSAmJiBwcm90by5jb25zdHJ1Y3RvcjtcbiAgaWYgKEN0b3IgPT09IE9iamVjdClcbiAgICByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIHR5cGVvZiBDdG9yID09IFwiZnVuY3Rpb25cIiAmJiBGdW5jdGlvbi50b1N0cmluZy5jYWxsKEN0b3IpID09PSBvYmplY3RDdG9yU3RyaW5nO1xufVxuZnVuY3Rpb24gb3JpZ2luYWwodmFsdWUpIHtcbiAgaWYgKCFpc0RyYWZ0KHZhbHVlKSlcbiAgICBkaWUoMTUsIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlW0RSQUZUX1NUQVRFXS5iYXNlXztcbn1cbmZ1bmN0aW9uIGVhY2gob2JqLCBpdGVyKSB7XG4gIGlmIChnZXRBcmNodHlwZShvYmopID09PSAwIC8qIE9iamVjdCAqLykge1xuICAgIE9iamVjdC5lbnRyaWVzKG9iaikuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpdGVyKGtleSwgdmFsdWUsIG9iaik7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqLmZvckVhY2goKGVudHJ5LCBpbmRleCkgPT4gaXRlcihpbmRleCwgZW50cnksIG9iaikpO1xuICB9XG59XG5mdW5jdGlvbiBnZXRBcmNodHlwZSh0aGluZykge1xuICBjb25zdCBzdGF0ZSA9IHRoaW5nW0RSQUZUX1NUQVRFXTtcbiAgcmV0dXJuIHN0YXRlID8gc3RhdGUudHlwZV8gOiBBcnJheS5pc0FycmF5KHRoaW5nKSA/IDEgLyogQXJyYXkgKi8gOiBpc01hcCh0aGluZykgPyAyIC8qIE1hcCAqLyA6IGlzU2V0KHRoaW5nKSA/IDMgLyogU2V0ICovIDogMCAvKiBPYmplY3QgKi87XG59XG5mdW5jdGlvbiBoYXModGhpbmcsIHByb3ApIHtcbiAgcmV0dXJuIGdldEFyY2h0eXBlKHRoaW5nKSA9PT0gMiAvKiBNYXAgKi8gPyB0aGluZy5oYXMocHJvcCkgOiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpbmcsIHByb3ApO1xufVxuZnVuY3Rpb24gZ2V0KHRoaW5nLCBwcm9wKSB7XG4gIHJldHVybiBnZXRBcmNodHlwZSh0aGluZykgPT09IDIgLyogTWFwICovID8gdGhpbmcuZ2V0KHByb3ApIDogdGhpbmdbcHJvcF07XG59XG5mdW5jdGlvbiBzZXQodGhpbmcsIHByb3BPck9sZFZhbHVlLCB2YWx1ZSkge1xuICBjb25zdCB0ID0gZ2V0QXJjaHR5cGUodGhpbmcpO1xuICBpZiAodCA9PT0gMiAvKiBNYXAgKi8pXG4gICAgdGhpbmcuc2V0KHByb3BPck9sZFZhbHVlLCB2YWx1ZSk7XG4gIGVsc2UgaWYgKHQgPT09IDMgLyogU2V0ICovKSB7XG4gICAgdGhpbmcuYWRkKHZhbHVlKTtcbiAgfSBlbHNlXG4gICAgdGhpbmdbcHJvcE9yT2xkVmFsdWVdID0gdmFsdWU7XG59XG5mdW5jdGlvbiBpcyh4LCB5KSB7XG4gIGlmICh4ID09PSB5KSB7XG4gICAgcmV0dXJuIHggIT09IDAgfHwgMSAvIHggPT09IDEgLyB5O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzTWFwKHRhcmdldCkge1xuICByZXR1cm4gdGFyZ2V0IGluc3RhbmNlb2YgTWFwO1xufVxuZnVuY3Rpb24gaXNTZXQodGFyZ2V0KSB7XG4gIHJldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBTZXQ7XG59XG5mdW5jdGlvbiBsYXRlc3Qoc3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlLmNvcHlfIHx8IHN0YXRlLmJhc2VfO1xufVxuZnVuY3Rpb24gc2hhbGxvd0NvcHkoYmFzZSwgc3RyaWN0KSB7XG4gIGlmIChpc01hcChiYXNlKSkge1xuICAgIHJldHVybiBuZXcgTWFwKGJhc2UpO1xuICB9XG4gIGlmIChpc1NldChiYXNlKSkge1xuICAgIHJldHVybiBuZXcgU2V0KGJhc2UpO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGJhc2UpKVxuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChiYXNlKTtcbiAgaWYgKCFzdHJpY3QgJiYgaXNQbGFpbk9iamVjdChiYXNlKSkge1xuICAgIGlmICghZ2V0UHJvdG90eXBlT2YoYmFzZSkpIHtcbiAgICAgIGNvbnN0IG9iaiA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCBiYXNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgLi4uYmFzZSB9O1xuICB9XG4gIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoYmFzZSk7XG4gIGRlbGV0ZSBkZXNjcmlwdG9yc1tEUkFGVF9TVEFURV07XG4gIGxldCBrZXlzID0gUmVmbGVjdC5vd25LZXlzKGRlc2NyaXB0b3JzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICBjb25zdCBkZXNjID0gZGVzY3JpcHRvcnNba2V5XTtcbiAgICBpZiAoZGVzYy53cml0YWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgIGRlc2Mud3JpdGFibGUgPSB0cnVlO1xuICAgICAgZGVzYy5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpXG4gICAgICBkZXNjcmlwdG9yc1trZXldID0ge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAvLyBjb3VsZCBsaXZlIHdpdGggISFkZXNjLnNldCBhcyB3ZWxsIGhlcmUuLi5cbiAgICAgICAgZW51bWVyYWJsZTogZGVzYy5lbnVtZXJhYmxlLFxuICAgICAgICB2YWx1ZTogYmFzZVtrZXldXG4gICAgICB9O1xuICB9XG4gIHJldHVybiBPYmplY3QuY3JlYXRlKGdldFByb3RvdHlwZU9mKGJhc2UpLCBkZXNjcmlwdG9ycyk7XG59XG5mdW5jdGlvbiBmcmVlemUob2JqLCBkZWVwID0gZmFsc2UpIHtcbiAgaWYgKGlzRnJvemVuKG9iaikgfHwgaXNEcmFmdChvYmopIHx8ICFpc0RyYWZ0YWJsZShvYmopKVxuICAgIHJldHVybiBvYmo7XG4gIGlmIChnZXRBcmNodHlwZShvYmopID4gMSkge1xuICAgIG9iai5zZXQgPSBvYmouYWRkID0gb2JqLmNsZWFyID0gb2JqLmRlbGV0ZSA9IGRvbnRNdXRhdGVGcm96ZW5Db2xsZWN0aW9ucztcbiAgfVxuICBPYmplY3QuZnJlZXplKG9iaik7XG4gIGlmIChkZWVwKVxuICAgIGVhY2gob2JqLCAoX2tleSwgdmFsdWUpID0+IGZyZWV6ZSh2YWx1ZSwgdHJ1ZSksIHRydWUpO1xuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gZG9udE11dGF0ZUZyb3plbkNvbGxlY3Rpb25zKCkge1xuICBkaWUoMik7XG59XG5mdW5jdGlvbiBpc0Zyb3plbihvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5pc0Zyb3plbihvYmopO1xufVxuXG4vLyBzcmMvdXRpbHMvcGx1Z2lucy50c1xudmFyIHBsdWdpbnMgPSB7fTtcbmZ1bmN0aW9uIGdldFBsdWdpbihwbHVnaW5LZXkpIHtcbiAgY29uc3QgcGx1Z2luID0gcGx1Z2luc1twbHVnaW5LZXldO1xuICBpZiAoIXBsdWdpbikge1xuICAgIGRpZSgwLCBwbHVnaW5LZXkpO1xuICB9XG4gIHJldHVybiBwbHVnaW47XG59XG5mdW5jdGlvbiBsb2FkUGx1Z2luKHBsdWdpbktleSwgaW1wbGVtZW50YXRpb24pIHtcbiAgaWYgKCFwbHVnaW5zW3BsdWdpbktleV0pXG4gICAgcGx1Z2luc1twbHVnaW5LZXldID0gaW1wbGVtZW50YXRpb247XG59XG5cbi8vIHNyYy9jb3JlL3Njb3BlLnRzXG52YXIgY3VycmVudFNjb3BlO1xuZnVuY3Rpb24gZ2V0Q3VycmVudFNjb3BlKCkge1xuICByZXR1cm4gY3VycmVudFNjb3BlO1xufVxuZnVuY3Rpb24gY3JlYXRlU2NvcGUocGFyZW50XywgaW1tZXJfKSB7XG4gIHJldHVybiB7XG4gICAgZHJhZnRzXzogW10sXG4gICAgcGFyZW50XyxcbiAgICBpbW1lcl8sXG4gICAgLy8gV2hlbmV2ZXIgdGhlIG1vZGlmaWVkIGRyYWZ0IGNvbnRhaW5zIGEgZHJhZnQgZnJvbSBhbm90aGVyIHNjb3BlLCB3ZVxuICAgIC8vIG5lZWQgdG8gcHJldmVudCBhdXRvLWZyZWV6aW5nIHNvIHRoZSB1bm93bmVkIGRyYWZ0IGNhbiBiZSBmaW5hbGl6ZWQuXG4gICAgY2FuQXV0b0ZyZWV6ZV86IHRydWUsXG4gICAgdW5maW5hbGl6ZWREcmFmdHNfOiAwXG4gIH07XG59XG5mdW5jdGlvbiB1c2VQYXRjaGVzSW5TY29wZShzY29wZSwgcGF0Y2hMaXN0ZW5lcikge1xuICBpZiAocGF0Y2hMaXN0ZW5lcikge1xuICAgIGdldFBsdWdpbihcIlBhdGNoZXNcIik7XG4gICAgc2NvcGUucGF0Y2hlc18gPSBbXTtcbiAgICBzY29wZS5pbnZlcnNlUGF0Y2hlc18gPSBbXTtcbiAgICBzY29wZS5wYXRjaExpc3RlbmVyXyA9IHBhdGNoTGlzdGVuZXI7XG4gIH1cbn1cbmZ1bmN0aW9uIHJldm9rZVNjb3BlKHNjb3BlKSB7XG4gIGxlYXZlU2NvcGUoc2NvcGUpO1xuICBzY29wZS5kcmFmdHNfLmZvckVhY2gocmV2b2tlRHJhZnQpO1xuICBzY29wZS5kcmFmdHNfID0gbnVsbDtcbn1cbmZ1bmN0aW9uIGxlYXZlU2NvcGUoc2NvcGUpIHtcbiAgaWYgKHNjb3BlID09PSBjdXJyZW50U2NvcGUpIHtcbiAgICBjdXJyZW50U2NvcGUgPSBzY29wZS5wYXJlbnRfO1xuICB9XG59XG5mdW5jdGlvbiBlbnRlclNjb3BlKGltbWVyMikge1xuICByZXR1cm4gY3VycmVudFNjb3BlID0gY3JlYXRlU2NvcGUoY3VycmVudFNjb3BlLCBpbW1lcjIpO1xufVxuZnVuY3Rpb24gcmV2b2tlRHJhZnQoZHJhZnQpIHtcbiAgY29uc3Qgc3RhdGUgPSBkcmFmdFtEUkFGVF9TVEFURV07XG4gIGlmIChzdGF0ZS50eXBlXyA9PT0gMCAvKiBPYmplY3QgKi8gfHwgc3RhdGUudHlwZV8gPT09IDEgLyogQXJyYXkgKi8pXG4gICAgc3RhdGUucmV2b2tlXygpO1xuICBlbHNlXG4gICAgc3RhdGUucmV2b2tlZF8gPSB0cnVlO1xufVxuXG4vLyBzcmMvY29yZS9maW5hbGl6ZS50c1xuZnVuY3Rpb24gcHJvY2Vzc1Jlc3VsdChyZXN1bHQsIHNjb3BlKSB7XG4gIHNjb3BlLnVuZmluYWxpemVkRHJhZnRzXyA9IHNjb3BlLmRyYWZ0c18ubGVuZ3RoO1xuICBjb25zdCBiYXNlRHJhZnQgPSBzY29wZS5kcmFmdHNfWzBdO1xuICBjb25zdCBpc1JlcGxhY2VkID0gcmVzdWx0ICE9PSB2b2lkIDAgJiYgcmVzdWx0ICE9PSBiYXNlRHJhZnQ7XG4gIGlmIChpc1JlcGxhY2VkKSB7XG4gICAgaWYgKGJhc2VEcmFmdFtEUkFGVF9TVEFURV0ubW9kaWZpZWRfKSB7XG4gICAgICByZXZva2VTY29wZShzY29wZSk7XG4gICAgICBkaWUoNCk7XG4gICAgfVxuICAgIGlmIChpc0RyYWZ0YWJsZShyZXN1bHQpKSB7XG4gICAgICByZXN1bHQgPSBmaW5hbGl6ZShzY29wZSwgcmVzdWx0KTtcbiAgICAgIGlmICghc2NvcGUucGFyZW50XylcbiAgICAgICAgbWF5YmVGcmVlemUoc2NvcGUsIHJlc3VsdCk7XG4gICAgfVxuICAgIGlmIChzY29wZS5wYXRjaGVzXykge1xuICAgICAgZ2V0UGx1Z2luKFwiUGF0Y2hlc1wiKS5nZW5lcmF0ZVJlcGxhY2VtZW50UGF0Y2hlc18oXG4gICAgICAgIGJhc2VEcmFmdFtEUkFGVF9TVEFURV0uYmFzZV8sXG4gICAgICAgIHJlc3VsdCxcbiAgICAgICAgc2NvcGUucGF0Y2hlc18sXG4gICAgICAgIHNjb3BlLmludmVyc2VQYXRjaGVzX1xuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gZmluYWxpemUoc2NvcGUsIGJhc2VEcmFmdCwgW10pO1xuICB9XG4gIHJldm9rZVNjb3BlKHNjb3BlKTtcbiAgaWYgKHNjb3BlLnBhdGNoZXNfKSB7XG4gICAgc2NvcGUucGF0Y2hMaXN0ZW5lcl8oc2NvcGUucGF0Y2hlc18sIHNjb3BlLmludmVyc2VQYXRjaGVzXyk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdCAhPT0gTk9USElORyA/IHJlc3VsdCA6IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIGZpbmFsaXplKHJvb3RTY29wZSwgdmFsdWUsIHBhdGgpIHtcbiAgaWYgKGlzRnJvemVuKHZhbHVlKSlcbiAgICByZXR1cm4gdmFsdWU7XG4gIGNvbnN0IHN0YXRlID0gdmFsdWVbRFJBRlRfU1RBVEVdO1xuICBpZiAoIXN0YXRlKSB7XG4gICAgZWFjaChcbiAgICAgIHZhbHVlLFxuICAgICAgKGtleSwgY2hpbGRWYWx1ZSkgPT4gZmluYWxpemVQcm9wZXJ0eShyb290U2NvcGUsIHN0YXRlLCB2YWx1ZSwga2V5LCBjaGlsZFZhbHVlLCBwYXRoKSxcbiAgICAgIHRydWVcbiAgICAgIC8vIFNlZSAjNTkwLCBkb24ndCByZWN1cnNlIGludG8gbm9uLWVudW1lcmFibGUgb2Ygbm9uIGRyYWZ0ZWQgb2JqZWN0c1xuICAgICk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChzdGF0ZS5zY29wZV8gIT09IHJvb3RTY29wZSlcbiAgICByZXR1cm4gdmFsdWU7XG4gIGlmICghc3RhdGUubW9kaWZpZWRfKSB7XG4gICAgbWF5YmVGcmVlemUocm9vdFNjb3BlLCBzdGF0ZS5iYXNlXywgdHJ1ZSk7XG4gICAgcmV0dXJuIHN0YXRlLmJhc2VfO1xuICB9XG4gIGlmICghc3RhdGUuZmluYWxpemVkXykge1xuICAgIHN0YXRlLmZpbmFsaXplZF8gPSB0cnVlO1xuICAgIHN0YXRlLnNjb3BlXy51bmZpbmFsaXplZERyYWZ0c18tLTtcbiAgICBjb25zdCByZXN1bHQgPSBzdGF0ZS5jb3B5XztcbiAgICBsZXQgcmVzdWx0RWFjaCA9IHJlc3VsdDtcbiAgICBsZXQgaXNTZXQyID0gZmFsc2U7XG4gICAgaWYgKHN0YXRlLnR5cGVfID09PSAzIC8qIFNldCAqLykge1xuICAgICAgcmVzdWx0RWFjaCA9IG5ldyBTZXQocmVzdWx0KTtcbiAgICAgIHJlc3VsdC5jbGVhcigpO1xuICAgICAgaXNTZXQyID0gdHJ1ZTtcbiAgICB9XG4gICAgZWFjaChcbiAgICAgIHJlc3VsdEVhY2gsXG4gICAgICAoa2V5LCBjaGlsZFZhbHVlKSA9PiBmaW5hbGl6ZVByb3BlcnR5KHJvb3RTY29wZSwgc3RhdGUsIHJlc3VsdCwga2V5LCBjaGlsZFZhbHVlLCBwYXRoLCBpc1NldDIpXG4gICAgKTtcbiAgICBtYXliZUZyZWV6ZShyb290U2NvcGUsIHJlc3VsdCwgZmFsc2UpO1xuICAgIGlmIChwYXRoICYmIHJvb3RTY29wZS5wYXRjaGVzXykge1xuICAgICAgZ2V0UGx1Z2luKFwiUGF0Y2hlc1wiKS5nZW5lcmF0ZVBhdGNoZXNfKFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgcm9vdFNjb3BlLnBhdGNoZXNfLFxuICAgICAgICByb290U2NvcGUuaW52ZXJzZVBhdGNoZXNfXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RhdGUuY29weV87XG59XG5mdW5jdGlvbiBmaW5hbGl6ZVByb3BlcnR5KHJvb3RTY29wZSwgcGFyZW50U3RhdGUsIHRhcmdldE9iamVjdCwgcHJvcCwgY2hpbGRWYWx1ZSwgcm9vdFBhdGgsIHRhcmdldElzU2V0KSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgY2hpbGRWYWx1ZSA9PT0gdGFyZ2V0T2JqZWN0KVxuICAgIGRpZSg1KTtcbiAgaWYgKGlzRHJhZnQoY2hpbGRWYWx1ZSkpIHtcbiAgICBjb25zdCBwYXRoID0gcm9vdFBhdGggJiYgcGFyZW50U3RhdGUgJiYgcGFyZW50U3RhdGUudHlwZV8gIT09IDMgLyogU2V0ICovICYmIC8vIFNldCBvYmplY3RzIGFyZSBhdG9taWMgc2luY2UgdGhleSBoYXZlIG5vIGtleXMuXG4gICAgIWhhcyhwYXJlbnRTdGF0ZS5hc3NpZ25lZF8sIHByb3ApID8gcm9vdFBhdGguY29uY2F0KHByb3ApIDogdm9pZCAwO1xuICAgIGNvbnN0IHJlcyA9IGZpbmFsaXplKHJvb3RTY29wZSwgY2hpbGRWYWx1ZSwgcGF0aCk7XG4gICAgc2V0KHRhcmdldE9iamVjdCwgcHJvcCwgcmVzKTtcbiAgICBpZiAoaXNEcmFmdChyZXMpKSB7XG4gICAgICByb290U2NvcGUuY2FuQXV0b0ZyZWV6ZV8gPSBmYWxzZTtcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybjtcbiAgfSBlbHNlIGlmICh0YXJnZXRJc1NldCkge1xuICAgIHRhcmdldE9iamVjdC5hZGQoY2hpbGRWYWx1ZSk7XG4gIH1cbiAgaWYgKGlzRHJhZnRhYmxlKGNoaWxkVmFsdWUpICYmICFpc0Zyb3plbihjaGlsZFZhbHVlKSkge1xuICAgIGlmICghcm9vdFNjb3BlLmltbWVyXy5hdXRvRnJlZXplXyAmJiByb290U2NvcGUudW5maW5hbGl6ZWREcmFmdHNfIDwgMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmaW5hbGl6ZShyb290U2NvcGUsIGNoaWxkVmFsdWUpO1xuICAgIGlmICghcGFyZW50U3RhdGUgfHwgIXBhcmVudFN0YXRlLnNjb3BlXy5wYXJlbnRfKVxuICAgICAgbWF5YmVGcmVlemUocm9vdFNjb3BlLCBjaGlsZFZhbHVlKTtcbiAgfVxufVxuZnVuY3Rpb24gbWF5YmVGcmVlemUoc2NvcGUsIHZhbHVlLCBkZWVwID0gZmFsc2UpIHtcbiAgaWYgKCFzY29wZS5wYXJlbnRfICYmIHNjb3BlLmltbWVyXy5hdXRvRnJlZXplXyAmJiBzY29wZS5jYW5BdXRvRnJlZXplXykge1xuICAgIGZyZWV6ZSh2YWx1ZSwgZGVlcCk7XG4gIH1cbn1cblxuLy8gc3JjL2NvcmUvcHJveHkudHNcbmZ1bmN0aW9uIGNyZWF0ZVByb3h5UHJveHkoYmFzZSwgcGFyZW50KSB7XG4gIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KGJhc2UpO1xuICBjb25zdCBzdGF0ZSA9IHtcbiAgICB0eXBlXzogaXNBcnJheSA/IDEgLyogQXJyYXkgKi8gOiAwIC8qIE9iamVjdCAqLyxcbiAgICAvLyBUcmFjayB3aGljaCBwcm9kdWNlIGNhbGwgdGhpcyBpcyBhc3NvY2lhdGVkIHdpdGguXG4gICAgc2NvcGVfOiBwYXJlbnQgPyBwYXJlbnQuc2NvcGVfIDogZ2V0Q3VycmVudFNjb3BlKCksXG4gICAgLy8gVHJ1ZSBmb3IgYm90aCBzaGFsbG93IGFuZCBkZWVwIGNoYW5nZXMuXG4gICAgbW9kaWZpZWRfOiBmYWxzZSxcbiAgICAvLyBVc2VkIGR1cmluZyBmaW5hbGl6YXRpb24uXG4gICAgZmluYWxpemVkXzogZmFsc2UsXG4gICAgLy8gVHJhY2sgd2hpY2ggcHJvcGVydGllcyBoYXZlIGJlZW4gYXNzaWduZWQgKHRydWUpIG9yIGRlbGV0ZWQgKGZhbHNlKS5cbiAgICBhc3NpZ25lZF86IHt9LFxuICAgIC8vIFRoZSBwYXJlbnQgZHJhZnQgc3RhdGUuXG4gICAgcGFyZW50XzogcGFyZW50LFxuICAgIC8vIFRoZSBiYXNlIHN0YXRlLlxuICAgIGJhc2VfOiBiYXNlLFxuICAgIC8vIFRoZSBiYXNlIHByb3h5LlxuICAgIGRyYWZ0XzogbnVsbCxcbiAgICAvLyBzZXQgYmVsb3dcbiAgICAvLyBUaGUgYmFzZSBjb3B5IHdpdGggYW55IHVwZGF0ZWQgdmFsdWVzLlxuICAgIGNvcHlfOiBudWxsLFxuICAgIC8vIENhbGxlZCBieSB0aGUgYHByb2R1Y2VgIGZ1bmN0aW9uLlxuICAgIHJldm9rZV86IG51bGwsXG4gICAgaXNNYW51YWxfOiBmYWxzZVxuICB9O1xuICBsZXQgdGFyZ2V0ID0gc3RhdGU7XG4gIGxldCB0cmFwcyA9IG9iamVjdFRyYXBzO1xuICBpZiAoaXNBcnJheSkge1xuICAgIHRhcmdldCA9IFtzdGF0ZV07XG4gICAgdHJhcHMgPSBhcnJheVRyYXBzO1xuICB9XG4gIGNvbnN0IHsgcmV2b2tlLCBwcm94eSB9ID0gUHJveHkucmV2b2NhYmxlKHRhcmdldCwgdHJhcHMpO1xuICBzdGF0ZS5kcmFmdF8gPSBwcm94eTtcbiAgc3RhdGUucmV2b2tlXyA9IHJldm9rZTtcbiAgcmV0dXJuIHByb3h5O1xufVxudmFyIG9iamVjdFRyYXBzID0ge1xuICBnZXQoc3RhdGUsIHByb3ApIHtcbiAgICBpZiAocHJvcCA9PT0gRFJBRlRfU1RBVEUpXG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgY29uc3Qgc291cmNlID0gbGF0ZXN0KHN0YXRlKTtcbiAgICBpZiAoIWhhcyhzb3VyY2UsIHByb3ApKSB7XG4gICAgICByZXR1cm4gcmVhZFByb3BGcm9tUHJvdG8oc3RhdGUsIHNvdXJjZSwgcHJvcCk7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlID0gc291cmNlW3Byb3BdO1xuICAgIGlmIChzdGF0ZS5maW5hbGl6ZWRfIHx8ICFpc0RyYWZ0YWJsZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHZhbHVlID09PSBwZWVrKHN0YXRlLmJhc2VfLCBwcm9wKSkge1xuICAgICAgcHJlcGFyZUNvcHkoc3RhdGUpO1xuICAgICAgcmV0dXJuIHN0YXRlLmNvcHlfW3Byb3BdID0gY3JlYXRlUHJveHkodmFsdWUsIHN0YXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBoYXMoc3RhdGUsIHByb3ApIHtcbiAgICByZXR1cm4gcHJvcCBpbiBsYXRlc3Qoc3RhdGUpO1xuICB9LFxuICBvd25LZXlzKHN0YXRlKSB7XG4gICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyhsYXRlc3Qoc3RhdGUpKTtcbiAgfSxcbiAgc2V0KHN0YXRlLCBwcm9wLCB2YWx1ZSkge1xuICAgIGNvbnN0IGRlc2MgPSBnZXREZXNjcmlwdG9yRnJvbVByb3RvKGxhdGVzdChzdGF0ZSksIHByb3ApO1xuICAgIGlmIChkZXNjPy5zZXQpIHtcbiAgICAgIGRlc2Muc2V0LmNhbGwoc3RhdGUuZHJhZnRfLCB2YWx1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFzdGF0ZS5tb2RpZmllZF8pIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQyID0gcGVlayhsYXRlc3Qoc3RhdGUpLCBwcm9wKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnQyPy5bRFJBRlRfU1RBVEVdO1xuICAgICAgaWYgKGN1cnJlbnRTdGF0ZSAmJiBjdXJyZW50U3RhdGUuYmFzZV8gPT09IHZhbHVlKSB7XG4gICAgICAgIHN0YXRlLmNvcHlfW3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHN0YXRlLmFzc2lnbmVkX1twcm9wXSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpcyh2YWx1ZSwgY3VycmVudDIpICYmICh2YWx1ZSAhPT0gdm9pZCAwIHx8IGhhcyhzdGF0ZS5iYXNlXywgcHJvcCkpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIHByZXBhcmVDb3B5KHN0YXRlKTtcbiAgICAgIG1hcmtDaGFuZ2VkKHN0YXRlKTtcbiAgICB9XG4gICAgaWYgKHN0YXRlLmNvcHlfW3Byb3BdID09PSB2YWx1ZSAmJiAvLyBzcGVjaWFsIGNhc2U6IGhhbmRsZSBuZXcgcHJvcHMgd2l0aCB2YWx1ZSAndW5kZWZpbmVkJ1xuICAgICh2YWx1ZSAhPT0gdm9pZCAwIHx8IHByb3AgaW4gc3RhdGUuY29weV8pIHx8IC8vIHNwZWNpYWwgY2FzZTogTmFOXG4gICAgTnVtYmVyLmlzTmFOKHZhbHVlKSAmJiBOdW1iZXIuaXNOYU4oc3RhdGUuY29weV9bcHJvcF0pKVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgc3RhdGUuY29weV9bcHJvcF0gPSB2YWx1ZTtcbiAgICBzdGF0ZS5hc3NpZ25lZF9bcHJvcF0gPSB0cnVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBkZWxldGVQcm9wZXJ0eShzdGF0ZSwgcHJvcCkge1xuICAgIGlmIChwZWVrKHN0YXRlLmJhc2VfLCBwcm9wKSAhPT0gdm9pZCAwIHx8IHByb3AgaW4gc3RhdGUuYmFzZV8pIHtcbiAgICAgIHN0YXRlLmFzc2lnbmVkX1twcm9wXSA9IGZhbHNlO1xuICAgICAgcHJlcGFyZUNvcHkoc3RhdGUpO1xuICAgICAgbWFya0NoYW5nZWQoc3RhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgc3RhdGUuYXNzaWduZWRfW3Byb3BdO1xuICAgIH1cbiAgICBpZiAoc3RhdGUuY29weV8pIHtcbiAgICAgIGRlbGV0ZSBzdGF0ZS5jb3B5X1twcm9wXTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIC8vIE5vdGU6IFdlIG5ldmVyIGNvZXJjZSBgZGVzYy52YWx1ZWAgaW50byBhbiBJbW1lciBkcmFmdCwgYmVjYXVzZSB3ZSBjYW4ndCBtYWtlXG4gIC8vIHRoZSBzYW1lIGd1YXJhbnRlZSBpbiBFUzUgbW9kZS5cbiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHN0YXRlLCBwcm9wKSB7XG4gICAgY29uc3Qgb3duZXIgPSBsYXRlc3Qoc3RhdGUpO1xuICAgIGNvbnN0IGRlc2MgPSBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvd25lciwgcHJvcCk7XG4gICAgaWYgKCFkZXNjKVxuICAgICAgcmV0dXJuIGRlc2M7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiBzdGF0ZS50eXBlXyAhPT0gMSAvKiBBcnJheSAqLyB8fCBwcm9wICE9PSBcImxlbmd0aFwiLFxuICAgICAgZW51bWVyYWJsZTogZGVzYy5lbnVtZXJhYmxlLFxuICAgICAgdmFsdWU6IG93bmVyW3Byb3BdXG4gICAgfTtcbiAgfSxcbiAgZGVmaW5lUHJvcGVydHkoKSB7XG4gICAgZGllKDExKTtcbiAgfSxcbiAgZ2V0UHJvdG90eXBlT2Yoc3RhdGUpIHtcbiAgICByZXR1cm4gZ2V0UHJvdG90eXBlT2Yoc3RhdGUuYmFzZV8pO1xuICB9LFxuICBzZXRQcm90b3R5cGVPZigpIHtcbiAgICBkaWUoMTIpO1xuICB9XG59O1xudmFyIGFycmF5VHJhcHMgPSB7fTtcbmVhY2gob2JqZWN0VHJhcHMsIChrZXksIGZuKSA9PiB7XG4gIGFycmF5VHJhcHNba2V5XSA9IGZ1bmN0aW9uKCkge1xuICAgIGFyZ3VtZW50c1swXSA9IGFyZ3VtZW50c1swXVswXTtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn0pO1xuYXJyYXlUcmFwcy5kZWxldGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHN0YXRlLCBwcm9wKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgaXNOYU4ocGFyc2VJbnQocHJvcCkpKVxuICAgIGRpZSgxMyk7XG4gIHJldHVybiBhcnJheVRyYXBzLnNldC5jYWxsKHRoaXMsIHN0YXRlLCBwcm9wLCB2b2lkIDApO1xufTtcbmFycmF5VHJhcHMuc2V0ID0gZnVuY3Rpb24oc3RhdGUsIHByb3AsIHZhbHVlKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgcHJvcCAhPT0gXCJsZW5ndGhcIiAmJiBpc05hTihwYXJzZUludChwcm9wKSkpXG4gICAgZGllKDE0KTtcbiAgcmV0dXJuIG9iamVjdFRyYXBzLnNldC5jYWxsKHRoaXMsIHN0YXRlWzBdLCBwcm9wLCB2YWx1ZSwgc3RhdGVbMF0pO1xufTtcbmZ1bmN0aW9uIHBlZWsoZHJhZnQsIHByb3ApIHtcbiAgY29uc3Qgc3RhdGUgPSBkcmFmdFtEUkFGVF9TVEFURV07XG4gIGNvbnN0IHNvdXJjZSA9IHN0YXRlID8gbGF0ZXN0KHN0YXRlKSA6IGRyYWZ0O1xuICByZXR1cm4gc291cmNlW3Byb3BdO1xufVxuZnVuY3Rpb24gcmVhZFByb3BGcm9tUHJvdG8oc3RhdGUsIHNvdXJjZSwgcHJvcCkge1xuICBjb25zdCBkZXNjID0gZ2V0RGVzY3JpcHRvckZyb21Qcm90byhzb3VyY2UsIHByb3ApO1xuICByZXR1cm4gZGVzYyA/IGB2YWx1ZWAgaW4gZGVzYyA/IGRlc2MudmFsdWUgOiAoXG4gICAgLy8gVGhpcyBpcyBhIHZlcnkgc3BlY2lhbCBjYXNlLCBpZiB0aGUgcHJvcCBpcyBhIGdldHRlciBkZWZpbmVkIGJ5IHRoZVxuICAgIC8vIHByb3RvdHlwZSwgd2Ugc2hvdWxkIGludm9rZSBpdCB3aXRoIHRoZSBkcmFmdCBhcyBjb250ZXh0IVxuICAgIGRlc2MuZ2V0Py5jYWxsKHN0YXRlLmRyYWZ0XylcbiAgKSA6IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIGdldERlc2NyaXB0b3JGcm9tUHJvdG8oc291cmNlLCBwcm9wKSB7XG4gIGlmICghKHByb3AgaW4gc291cmNlKSlcbiAgICByZXR1cm4gdm9pZCAwO1xuICBsZXQgcHJvdG8gPSBnZXRQcm90b3R5cGVPZihzb3VyY2UpO1xuICB3aGlsZSAocHJvdG8pIHtcbiAgICBjb25zdCBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywgcHJvcCk7XG4gICAgaWYgKGRlc2MpXG4gICAgICByZXR1cm4gZGVzYztcbiAgICBwcm90byA9IGdldFByb3RvdHlwZU9mKHByb3RvKTtcbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufVxuZnVuY3Rpb24gbWFya0NoYW5nZWQoc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5tb2RpZmllZF8pIHtcbiAgICBzdGF0ZS5tb2RpZmllZF8gPSB0cnVlO1xuICAgIGlmIChzdGF0ZS5wYXJlbnRfKSB7XG4gICAgICBtYXJrQ2hhbmdlZChzdGF0ZS5wYXJlbnRfKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHByZXBhcmVDb3B5KHN0YXRlKSB7XG4gIGlmICghc3RhdGUuY29weV8pIHtcbiAgICBzdGF0ZS5jb3B5XyA9IHNoYWxsb3dDb3B5KFxuICAgICAgc3RhdGUuYmFzZV8sXG4gICAgICBzdGF0ZS5zY29wZV8uaW1tZXJfLnVzZVN0cmljdFNoYWxsb3dDb3B5X1xuICAgICk7XG4gIH1cbn1cblxuLy8gc3JjL2NvcmUvaW1tZXJDbGFzcy50c1xudmFyIEltbWVyMiA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5hdXRvRnJlZXplXyA9IHRydWU7XG4gICAgdGhpcy51c2VTdHJpY3RTaGFsbG93Q29weV8gPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBUaGUgYHByb2R1Y2VgIGZ1bmN0aW9uIHRha2VzIGEgdmFsdWUgYW5kIGEgXCJyZWNpcGUgZnVuY3Rpb25cIiAod2hvc2VcbiAgICAgKiByZXR1cm4gdmFsdWUgb2Z0ZW4gZGVwZW5kcyBvbiB0aGUgYmFzZSBzdGF0ZSkuIFRoZSByZWNpcGUgZnVuY3Rpb24gaXNcbiAgICAgKiBmcmVlIHRvIG11dGF0ZSBpdHMgZmlyc3QgYXJndW1lbnQgaG93ZXZlciBpdCB3YW50cy4gQWxsIG11dGF0aW9ucyBhcmVcbiAgICAgKiBvbmx5IGV2ZXIgYXBwbGllZCB0byBhIF9fY29weV9fIG9mIHRoZSBiYXNlIHN0YXRlLlxuICAgICAqXG4gICAgICogUGFzcyBvbmx5IGEgZnVuY3Rpb24gdG8gY3JlYXRlIGEgXCJjdXJyaWVkIHByb2R1Y2VyXCIgd2hpY2ggcmVsaWV2ZXMgeW91XG4gICAgICogZnJvbSBwYXNzaW5nIHRoZSByZWNpcGUgZnVuY3Rpb24gZXZlcnkgdGltZS5cbiAgICAgKlxuICAgICAqIE9ubHkgcGxhaW4gb2JqZWN0cyBhbmQgYXJyYXlzIGFyZSBtYWRlIG11dGFibGUuIEFsbCBvdGhlciBvYmplY3RzIGFyZVxuICAgICAqIGNvbnNpZGVyZWQgdW5jb3B5YWJsZS5cbiAgICAgKlxuICAgICAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgX19ib3VuZF9fIHRvIGl0cyBgSW1tZXJgIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IGJhc2UgLSB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlY2lwZSAtIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSBwcm94eSBvZiB0aGUgYmFzZSBzdGF0ZSBhcyBmaXJzdCBhcmd1bWVudCBhbmQgd2hpY2ggY2FuIGJlIGZyZWVseSBtb2RpZmllZFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHBhdGNoTGlzdGVuZXIgLSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggYWxsIHRoZSBwYXRjaGVzIHByb2R1Y2VkIGhlcmVcbiAgICAgKiBAcmV0dXJucyB7YW55fSBhIG5ldyBzdGF0ZSwgb3IgdGhlIGluaXRpYWwgc3RhdGUgaWYgbm90aGluZyB3YXMgbW9kaWZpZWRcbiAgICAgKi9cbiAgICB0aGlzLnByb2R1Y2UgPSAoYmFzZSwgcmVjaXBlLCBwYXRjaExpc3RlbmVyKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGJhc2UgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgcmVjaXBlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdEJhc2UgPSByZWNpcGU7XG4gICAgICAgIHJlY2lwZSA9IGJhc2U7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gY3VycmllZFByb2R1Y2UoYmFzZTIgPSBkZWZhdWx0QmFzZSwgLi4uYXJncykge1xuICAgICAgICAgIHJldHVybiBzZWxmLnByb2R1Y2UoYmFzZTIsIChkcmFmdCkgPT4gcmVjaXBlLmNhbGwodGhpcywgZHJhZnQsIC4uLmFyZ3MpKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcmVjaXBlICE9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIGRpZSg2KTtcbiAgICAgIGlmIChwYXRjaExpc3RlbmVyICE9PSB2b2lkIDAgJiYgdHlwZW9mIHBhdGNoTGlzdGVuZXIgIT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgZGllKDcpO1xuICAgICAgbGV0IHJlc3VsdDtcbiAgICAgIGlmIChpc0RyYWZ0YWJsZShiYXNlKSkge1xuICAgICAgICBjb25zdCBzY29wZSA9IGVudGVyU2NvcGUodGhpcyk7XG4gICAgICAgIGNvbnN0IHByb3h5ID0gY3JlYXRlUHJveHkoYmFzZSwgdm9pZCAwKTtcbiAgICAgICAgbGV0IGhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXN1bHQgPSByZWNpcGUocHJveHkpO1xuICAgICAgICAgIGhhc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKGhhc0Vycm9yKVxuICAgICAgICAgICAgcmV2b2tlU2NvcGUoc2NvcGUpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxlYXZlU2NvcGUoc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIHVzZVBhdGNoZXNJblNjb3BlKHNjb3BlLCBwYXRjaExpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NSZXN1bHQocmVzdWx0LCBzY29wZSk7XG4gICAgICB9IGVsc2UgaWYgKCFiYXNlIHx8IHR5cGVvZiBiYXNlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlY2lwZShiYXNlKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKVxuICAgICAgICAgIHJlc3VsdCA9IGJhc2U7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IE5PVEhJTkcpXG4gICAgICAgICAgcmVzdWx0ID0gdm9pZCAwO1xuICAgICAgICBpZiAodGhpcy5hdXRvRnJlZXplXylcbiAgICAgICAgICBmcmVlemUocmVzdWx0LCB0cnVlKTtcbiAgICAgICAgaWYgKHBhdGNoTGlzdGVuZXIpIHtcbiAgICAgICAgICBjb25zdCBwID0gW107XG4gICAgICAgICAgY29uc3QgaXAgPSBbXTtcbiAgICAgICAgICBnZXRQbHVnaW4oXCJQYXRjaGVzXCIpLmdlbmVyYXRlUmVwbGFjZW1lbnRQYXRjaGVzXyhiYXNlLCByZXN1bHQsIHAsIGlwKTtcbiAgICAgICAgICBwYXRjaExpc3RlbmVyKHAsIGlwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBlbHNlXG4gICAgICAgIGRpZSgxLCBiYXNlKTtcbiAgICB9O1xuICAgIHRoaXMucHJvZHVjZVdpdGhQYXRjaGVzID0gKGJhc2UsIHJlY2lwZSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBiYXNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIChzdGF0ZSwgLi4uYXJncykgPT4gdGhpcy5wcm9kdWNlV2l0aFBhdGNoZXMoc3RhdGUsIChkcmFmdCkgPT4gYmFzZShkcmFmdCwgLi4uYXJncykpO1xuICAgICAgfVxuICAgICAgbGV0IHBhdGNoZXMsIGludmVyc2VQYXRjaGVzO1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wcm9kdWNlKGJhc2UsIHJlY2lwZSwgKHAsIGlwKSA9PiB7XG4gICAgICAgIHBhdGNoZXMgPSBwO1xuICAgICAgICBpbnZlcnNlUGF0Y2hlcyA9IGlwO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gW3Jlc3VsdCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXNdO1xuICAgIH07XG4gICAgaWYgKHR5cGVvZiBjb25maWc/LmF1dG9GcmVlemUgPT09IFwiYm9vbGVhblwiKVxuICAgICAgdGhpcy5zZXRBdXRvRnJlZXplKGNvbmZpZy5hdXRvRnJlZXplKTtcbiAgICBpZiAodHlwZW9mIGNvbmZpZz8udXNlU3RyaWN0U2hhbGxvd0NvcHkgPT09IFwiYm9vbGVhblwiKVxuICAgICAgdGhpcy5zZXRVc2VTdHJpY3RTaGFsbG93Q29weShjb25maWcudXNlU3RyaWN0U2hhbGxvd0NvcHkpO1xuICB9XG4gIGNyZWF0ZURyYWZ0KGJhc2UpIHtcbiAgICBpZiAoIWlzRHJhZnRhYmxlKGJhc2UpKVxuICAgICAgZGllKDgpO1xuICAgIGlmIChpc0RyYWZ0KGJhc2UpKVxuICAgICAgYmFzZSA9IGN1cnJlbnQoYmFzZSk7XG4gICAgY29uc3Qgc2NvcGUgPSBlbnRlclNjb3BlKHRoaXMpO1xuICAgIGNvbnN0IHByb3h5ID0gY3JlYXRlUHJveHkoYmFzZSwgdm9pZCAwKTtcbiAgICBwcm94eVtEUkFGVF9TVEFURV0uaXNNYW51YWxfID0gdHJ1ZTtcbiAgICBsZWF2ZVNjb3BlKHNjb3BlKTtcbiAgICByZXR1cm4gcHJveHk7XG4gIH1cbiAgZmluaXNoRHJhZnQoZHJhZnQsIHBhdGNoTGlzdGVuZXIpIHtcbiAgICBjb25zdCBzdGF0ZSA9IGRyYWZ0ICYmIGRyYWZ0W0RSQUZUX1NUQVRFXTtcbiAgICBpZiAoIXN0YXRlIHx8ICFzdGF0ZS5pc01hbnVhbF8pXG4gICAgICBkaWUoOSk7XG4gICAgY29uc3QgeyBzY29wZV86IHNjb3BlIH0gPSBzdGF0ZTtcbiAgICB1c2VQYXRjaGVzSW5TY29wZShzY29wZSwgcGF0Y2hMaXN0ZW5lcik7XG4gICAgcmV0dXJuIHByb2Nlc3NSZXN1bHQodm9pZCAwLCBzY29wZSk7XG4gIH1cbiAgLyoqXG4gICAqIFBhc3MgdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IGZyZWV6ZSBhbGwgY29waWVzIGNyZWF0ZWQgYnkgSW1tZXIuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIGF1dG8tZnJlZXppbmcgaXMgZW5hYmxlZC5cbiAgICovXG4gIHNldEF1dG9GcmVlemUodmFsdWUpIHtcbiAgICB0aGlzLmF1dG9GcmVlemVfID0gdmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIFBhc3MgdHJ1ZSB0byBlbmFibGUgc3RyaWN0IHNoYWxsb3cgY29weS5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgaW1tZXIgZG9lcyBub3QgY29weSB0aGUgb2JqZWN0IGRlc2NyaXB0b3JzIHN1Y2ggYXMgZ2V0dGVyLCBzZXR0ZXIgYW5kIG5vbi1lbnVtcmFibGUgcHJvcGVydGllcy5cbiAgICovXG4gIHNldFVzZVN0cmljdFNoYWxsb3dDb3B5KHZhbHVlKSB7XG4gICAgdGhpcy51c2VTdHJpY3RTaGFsbG93Q29weV8gPSB2YWx1ZTtcbiAgfVxuICBhcHBseVBhdGNoZXMoYmFzZSwgcGF0Y2hlcykge1xuICAgIGxldCBpO1xuICAgIGZvciAoaSA9IHBhdGNoZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHBhdGNoID0gcGF0Y2hlc1tpXTtcbiAgICAgIGlmIChwYXRjaC5wYXRoLmxlbmd0aCA9PT0gMCAmJiBwYXRjaC5vcCA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgYmFzZSA9IHBhdGNoLnZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGkgPiAtMSkge1xuICAgICAgcGF0Y2hlcyA9IHBhdGNoZXMuc2xpY2UoaSArIDEpO1xuICAgIH1cbiAgICBjb25zdCBhcHBseVBhdGNoZXNJbXBsID0gZ2V0UGx1Z2luKFwiUGF0Y2hlc1wiKS5hcHBseVBhdGNoZXNfO1xuICAgIGlmIChpc0RyYWZ0KGJhc2UpKSB7XG4gICAgICByZXR1cm4gYXBwbHlQYXRjaGVzSW1wbChiYXNlLCBwYXRjaGVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHJvZHVjZShcbiAgICAgIGJhc2UsXG4gICAgICAoZHJhZnQpID0+IGFwcGx5UGF0Y2hlc0ltcGwoZHJhZnQsIHBhdGNoZXMpXG4gICAgKTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZVByb3h5KHZhbHVlLCBwYXJlbnQpIHtcbiAgY29uc3QgZHJhZnQgPSBpc01hcCh2YWx1ZSkgPyBnZXRQbHVnaW4oXCJNYXBTZXRcIikucHJveHlNYXBfKHZhbHVlLCBwYXJlbnQpIDogaXNTZXQodmFsdWUpID8gZ2V0UGx1Z2luKFwiTWFwU2V0XCIpLnByb3h5U2V0Xyh2YWx1ZSwgcGFyZW50KSA6IGNyZWF0ZVByb3h5UHJveHkodmFsdWUsIHBhcmVudCk7XG4gIGNvbnN0IHNjb3BlID0gcGFyZW50ID8gcGFyZW50LnNjb3BlXyA6IGdldEN1cnJlbnRTY29wZSgpO1xuICBzY29wZS5kcmFmdHNfLnB1c2goZHJhZnQpO1xuICByZXR1cm4gZHJhZnQ7XG59XG5cbi8vIHNyYy9jb3JlL2N1cnJlbnQudHNcbmZ1bmN0aW9uIGN1cnJlbnQodmFsdWUpIHtcbiAgaWYgKCFpc0RyYWZ0KHZhbHVlKSlcbiAgICBkaWUoMTAsIHZhbHVlKTtcbiAgcmV0dXJuIGN1cnJlbnRJbXBsKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGN1cnJlbnRJbXBsKHZhbHVlKSB7XG4gIGlmICghaXNEcmFmdGFibGUodmFsdWUpIHx8IGlzRnJvemVuKHZhbHVlKSlcbiAgICByZXR1cm4gdmFsdWU7XG4gIGNvbnN0IHN0YXRlID0gdmFsdWVbRFJBRlRfU1RBVEVdO1xuICBsZXQgY29weTtcbiAgaWYgKHN0YXRlKSB7XG4gICAgaWYgKCFzdGF0ZS5tb2RpZmllZF8pXG4gICAgICByZXR1cm4gc3RhdGUuYmFzZV87XG4gICAgc3RhdGUuZmluYWxpemVkXyA9IHRydWU7XG4gICAgY29weSA9IHNoYWxsb3dDb3B5KHZhbHVlLCBzdGF0ZS5zY29wZV8uaW1tZXJfLnVzZVN0cmljdFNoYWxsb3dDb3B5Xyk7XG4gIH0gZWxzZSB7XG4gICAgY29weSA9IHNoYWxsb3dDb3B5KHZhbHVlLCB0cnVlKTtcbiAgfVxuICBlYWNoKGNvcHksIChrZXksIGNoaWxkVmFsdWUpID0+IHtcbiAgICBzZXQoY29weSwga2V5LCBjdXJyZW50SW1wbChjaGlsZFZhbHVlKSk7XG4gIH0pO1xuICBpZiAoc3RhdGUpIHtcbiAgICBzdGF0ZS5maW5hbGl6ZWRfID0gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGNvcHk7XG59XG5cbi8vIHNyYy9wbHVnaW5zL3BhdGNoZXMudHNcbmZ1bmN0aW9uIGVuYWJsZVBhdGNoZXMoKSB7XG4gIGNvbnN0IGVycm9yT2Zmc2V0ID0gMTY7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBlcnJvcnMucHVzaChcbiAgICAgICdTZXRzIGNhbm5vdCBoYXZlIFwicmVwbGFjZVwiIHBhdGNoZXMuJyxcbiAgICAgIGZ1bmN0aW9uKG9wKSB7XG4gICAgICAgIHJldHVybiBcIlVuc3VwcG9ydGVkIHBhdGNoIG9wZXJhdGlvbjogXCIgKyBvcDtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihwYXRoKSB7XG4gICAgICAgIHJldHVybiBcIkNhbm5vdCBhcHBseSBwYXRjaCwgcGF0aCBkb2Vzbid0IHJlc29sdmU6IFwiICsgcGF0aDtcbiAgICAgIH0sXG4gICAgICBcIlBhdGNoaW5nIHJlc2VydmVkIGF0dHJpYnV0ZXMgbGlrZSBfX3Byb3RvX18sIHByb3RvdHlwZSBhbmQgY29uc3RydWN0b3IgaXMgbm90IGFsbG93ZWRcIlxuICAgICk7XG4gIH1cbiAgY29uc3QgUkVQTEFDRSA9IFwicmVwbGFjZVwiO1xuICBjb25zdCBBREQgPSBcImFkZFwiO1xuICBjb25zdCBSRU1PVkUgPSBcInJlbW92ZVwiO1xuICBmdW5jdGlvbiBnZW5lcmF0ZVBhdGNoZXNfKHN0YXRlLCBiYXNlUGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpIHtcbiAgICBzd2l0Y2ggKHN0YXRlLnR5cGVfKSB7XG4gICAgICBjYXNlIDAgLyogT2JqZWN0ICovOlxuICAgICAgY2FzZSAyIC8qIE1hcCAqLzpcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlUGF0Y2hlc0Zyb21Bc3NpZ25lZChcbiAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICBiYXNlUGF0aCxcbiAgICAgICAgICBwYXRjaGVzLFxuICAgICAgICAgIGludmVyc2VQYXRjaGVzXG4gICAgICAgICk7XG4gICAgICBjYXNlIDEgLyogQXJyYXkgKi86XG4gICAgICAgIHJldHVybiBnZW5lcmF0ZUFycmF5UGF0Y2hlcyhzdGF0ZSwgYmFzZVBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKTtcbiAgICAgIGNhc2UgMyAvKiBTZXQgKi86XG4gICAgICAgIHJldHVybiBnZW5lcmF0ZVNldFBhdGNoZXMoXG4gICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgYmFzZVBhdGgsXG4gICAgICAgICAgcGF0Y2hlcyxcbiAgICAgICAgICBpbnZlcnNlUGF0Y2hlc1xuICAgICAgICApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBnZW5lcmF0ZUFycmF5UGF0Y2hlcyhzdGF0ZSwgYmFzZVBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKSB7XG4gICAgbGV0IHsgYmFzZV8sIGFzc2lnbmVkXyB9ID0gc3RhdGU7XG4gICAgbGV0IGNvcHlfID0gc3RhdGUuY29weV87XG4gICAgaWYgKGNvcHlfLmxlbmd0aCA8IGJhc2VfLmxlbmd0aCkge1xuICAgICAgO1xuICAgICAgW2Jhc2VfLCBjb3B5X10gPSBbY29weV8sIGJhc2VfXTtcbiAgICAgIFtwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlc10gPSBbaW52ZXJzZVBhdGNoZXMsIHBhdGNoZXNdO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhc2VfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYXNzaWduZWRfW2ldICYmIGNvcHlfW2ldICE9PSBiYXNlX1tpXSkge1xuICAgICAgICBjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KFtpXSk7XG4gICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgb3A6IFJFUExBQ0UsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgICAvLyBOZWVkIHRvIG1heWJlIGNsb25lIGl0LCBhcyBpdCBjYW4gaW4gZmFjdCBiZSB0aGUgb3JpZ2luYWwgdmFsdWVcbiAgICAgICAgICAvLyBkdWUgdG8gdGhlIGJhc2UvY29weSBpbnZlcnNpb24gYXQgdGhlIHN0YXJ0IG9mIHRoaXMgZnVuY3Rpb25cbiAgICAgICAgICB2YWx1ZTogY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQoY29weV9baV0pXG4gICAgICAgIH0pO1xuICAgICAgICBpbnZlcnNlUGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICBvcDogUkVQTEFDRSxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIHZhbHVlOiBjbG9uZVBhdGNoVmFsdWVJZk5lZWRlZChiYXNlX1tpXSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSBiYXNlXy5sZW5ndGg7IGkgPCBjb3B5Xy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChbaV0pO1xuICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgb3A6IEFERCxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgLy8gTmVlZCB0byBtYXliZSBjbG9uZSBpdCwgYXMgaXQgY2FuIGluIGZhY3QgYmUgdGhlIG9yaWdpbmFsIHZhbHVlXG4gICAgICAgIC8vIGR1ZSB0byB0aGUgYmFzZS9jb3B5IGludmVyc2lvbiBhdCB0aGUgc3RhcnQgb2YgdGhpcyBmdW5jdGlvblxuICAgICAgICB2YWx1ZTogY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQoY29weV9baV0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IGNvcHlfLmxlbmd0aCAtIDE7IGJhc2VfLmxlbmd0aCA8PSBpOyAtLWkpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBiYXNlUGF0aC5jb25jYXQoW2ldKTtcbiAgICAgIGludmVyc2VQYXRjaGVzLnB1c2goe1xuICAgICAgICBvcDogUkVNT1ZFLFxuICAgICAgICBwYXRoXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZ2VuZXJhdGVQYXRjaGVzRnJvbUFzc2lnbmVkKHN0YXRlLCBiYXNlUGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpIHtcbiAgICBjb25zdCB7IGJhc2VfLCBjb3B5XyB9ID0gc3RhdGU7XG4gICAgZWFjaChzdGF0ZS5hc3NpZ25lZF8sIChrZXksIGFzc2lnbmVkVmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdWYWx1ZSA9IGdldChiYXNlXywga2V5KTtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0KGNvcHlfLCBrZXkpO1xuICAgICAgY29uc3Qgb3AgPSAhYXNzaWduZWRWYWx1ZSA/IFJFTU9WRSA6IGhhcyhiYXNlXywga2V5KSA/IFJFUExBQ0UgOiBBREQ7XG4gICAgICBpZiAob3JpZ1ZhbHVlID09PSB2YWx1ZSAmJiBvcCA9PT0gUkVQTEFDRSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChrZXkpO1xuICAgICAgcGF0Y2hlcy5wdXNoKG9wID09PSBSRU1PVkUgPyB7IG9wLCBwYXRoIH0gOiB7IG9wLCBwYXRoLCB2YWx1ZSB9KTtcbiAgICAgIGludmVyc2VQYXRjaGVzLnB1c2goXG4gICAgICAgIG9wID09PSBBREQgPyB7IG9wOiBSRU1PVkUsIHBhdGggfSA6IG9wID09PSBSRU1PVkUgPyB7IG9wOiBBREQsIHBhdGgsIHZhbHVlOiBjbG9uZVBhdGNoVmFsdWVJZk5lZWRlZChvcmlnVmFsdWUpIH0gOiB7IG9wOiBSRVBMQUNFLCBwYXRoLCB2YWx1ZTogY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQob3JpZ1ZhbHVlKSB9XG4gICAgICApO1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGdlbmVyYXRlU2V0UGF0Y2hlcyhzdGF0ZSwgYmFzZVBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKSB7XG4gICAgbGV0IHsgYmFzZV8sIGNvcHlfIH0gPSBzdGF0ZTtcbiAgICBsZXQgaSA9IDA7XG4gICAgYmFzZV8uZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgIGlmICghY29weV8uaGFzKHZhbHVlKSkge1xuICAgICAgICBjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KFtpXSk7XG4gICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgb3A6IFJFTU9WRSxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICBpbnZlcnNlUGF0Y2hlcy51bnNoaWZ0KHtcbiAgICAgICAgICBvcDogQURELFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfSk7XG4gICAgaSA9IDA7XG4gICAgY29weV8uZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgIGlmICghYmFzZV8uaGFzKHZhbHVlKSkge1xuICAgICAgICBjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KFtpXSk7XG4gICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgb3A6IEFERCxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICBpbnZlcnNlUGF0Y2hlcy51bnNoaWZ0KHtcbiAgICAgICAgICBvcDogUkVNT1ZFLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gZ2VuZXJhdGVSZXBsYWNlbWVudFBhdGNoZXNfKGJhc2VWYWx1ZSwgcmVwbGFjZW1lbnQsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKSB7XG4gICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgIG9wOiBSRVBMQUNFLFxuICAgICAgcGF0aDogW10sXG4gICAgICB2YWx1ZTogcmVwbGFjZW1lbnQgPT09IE5PVEhJTkcgPyB2b2lkIDAgOiByZXBsYWNlbWVudFxuICAgIH0pO1xuICAgIGludmVyc2VQYXRjaGVzLnB1c2goe1xuICAgICAgb3A6IFJFUExBQ0UsXG4gICAgICBwYXRoOiBbXSxcbiAgICAgIHZhbHVlOiBiYXNlVmFsdWVcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBhcHBseVBhdGNoZXNfKGRyYWZ0LCBwYXRjaGVzKSB7XG4gICAgcGF0Y2hlcy5mb3JFYWNoKChwYXRjaCkgPT4ge1xuICAgICAgY29uc3QgeyBwYXRoLCBvcCB9ID0gcGF0Y2g7XG4gICAgICBsZXQgYmFzZSA9IGRyYWZ0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBwYXJlbnRUeXBlID0gZ2V0QXJjaHR5cGUoYmFzZSk7XG4gICAgICAgIGxldCBwID0gcGF0aFtpXTtcbiAgICAgICAgaWYgKHR5cGVvZiBwICE9PSBcInN0cmluZ1wiICYmIHR5cGVvZiBwICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgcCA9IFwiXCIgKyBwO1xuICAgICAgICB9XG4gICAgICAgIGlmICgocGFyZW50VHlwZSA9PT0gMCAvKiBPYmplY3QgKi8gfHwgcGFyZW50VHlwZSA9PT0gMSAvKiBBcnJheSAqLykgJiYgKHAgPT09IFwiX19wcm90b19fXCIgfHwgcCA9PT0gXCJjb25zdHJ1Y3RvclwiKSlcbiAgICAgICAgICBkaWUoZXJyb3JPZmZzZXQgKyAzKTtcbiAgICAgICAgaWYgKHR5cGVvZiBiYXNlID09PSBcImZ1bmN0aW9uXCIgJiYgcCA9PT0gXCJwcm90b3R5cGVcIilcbiAgICAgICAgICBkaWUoZXJyb3JPZmZzZXQgKyAzKTtcbiAgICAgICAgYmFzZSA9IGdldChiYXNlLCBwKTtcbiAgICAgICAgaWYgKHR5cGVvZiBiYXNlICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgIGRpZShlcnJvck9mZnNldCArIDIsIHBhdGguam9pbihcIi9cIikpO1xuICAgICAgfVxuICAgICAgY29uc3QgdHlwZSA9IGdldEFyY2h0eXBlKGJhc2UpO1xuICAgICAgY29uc3QgdmFsdWUgPSBkZWVwQ2xvbmVQYXRjaFZhbHVlKHBhdGNoLnZhbHVlKTtcbiAgICAgIGNvbnN0IGtleSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICAgIHN3aXRjaCAob3ApIHtcbiAgICAgICAgY2FzZSBSRVBMQUNFOlxuICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAyIC8qIE1hcCAqLzpcbiAgICAgICAgICAgICAgcmV0dXJuIGJhc2Uuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgY2FzZSAzIC8qIFNldCAqLzpcbiAgICAgICAgICAgICAgZGllKGVycm9yT2Zmc2V0KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHJldHVybiBiYXNlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgQUREOlxuICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAxIC8qIEFycmF5ICovOlxuICAgICAgICAgICAgICByZXR1cm4ga2V5ID09PSBcIi1cIiA/IGJhc2UucHVzaCh2YWx1ZSkgOiBiYXNlLnNwbGljZShrZXksIDAsIHZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgMiAvKiBNYXAgKi86XG4gICAgICAgICAgICAgIHJldHVybiBiYXNlLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgMyAvKiBTZXQgKi86XG4gICAgICAgICAgICAgIHJldHVybiBiYXNlLmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gYmFzZVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICBjYXNlIFJFTU9WRTpcbiAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgMSAvKiBBcnJheSAqLzpcbiAgICAgICAgICAgICAgcmV0dXJuIGJhc2Uuc3BsaWNlKGtleSwgMSk7XG4gICAgICAgICAgICBjYXNlIDIgLyogTWFwICovOlxuICAgICAgICAgICAgICByZXR1cm4gYmFzZS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIGNhc2UgMyAvKiBTZXQgKi86XG4gICAgICAgICAgICAgIHJldHVybiBiYXNlLmRlbGV0ZShwYXRjaC52YWx1ZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlIGJhc2Vba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZGllKGVycm9yT2Zmc2V0ICsgMSwgb3ApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkcmFmdDtcbiAgfVxuICBmdW5jdGlvbiBkZWVwQ2xvbmVQYXRjaFZhbHVlKG9iaikge1xuICAgIGlmICghaXNEcmFmdGFibGUob2JqKSlcbiAgICAgIHJldHVybiBvYmo7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSlcbiAgICAgIHJldHVybiBvYmoubWFwKGRlZXBDbG9uZVBhdGNoVmFsdWUpO1xuICAgIGlmIChpc01hcChvYmopKVxuICAgICAgcmV0dXJuIG5ldyBNYXAoXG4gICAgICAgIEFycmF5LmZyb20ob2JqLmVudHJpZXMoKSkubWFwKChbaywgdl0pID0+IFtrLCBkZWVwQ2xvbmVQYXRjaFZhbHVlKHYpXSlcbiAgICAgICk7XG4gICAgaWYgKGlzU2V0KG9iaikpXG4gICAgICByZXR1cm4gbmV3IFNldChBcnJheS5mcm9tKG9iaikubWFwKGRlZXBDbG9uZVBhdGNoVmFsdWUpKTtcbiAgICBjb25zdCBjbG9uZWQgPSBPYmplY3QuY3JlYXRlKGdldFByb3RvdHlwZU9mKG9iaikpO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iailcbiAgICAgIGNsb25lZFtrZXldID0gZGVlcENsb25lUGF0Y2hWYWx1ZShvYmpba2V5XSk7XG4gICAgaWYgKGhhcyhvYmosIERSQUZUQUJMRSkpXG4gICAgICBjbG9uZWRbRFJBRlRBQkxFXSA9IG9ialtEUkFGVEFCTEVdO1xuICAgIHJldHVybiBjbG9uZWQ7XG4gIH1cbiAgZnVuY3Rpb24gY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQob2JqKSB7XG4gICAgaWYgKGlzRHJhZnQob2JqKSkge1xuICAgICAgcmV0dXJuIGRlZXBDbG9uZVBhdGNoVmFsdWUob2JqKTtcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybiBvYmo7XG4gIH1cbiAgbG9hZFBsdWdpbihcIlBhdGNoZXNcIiwge1xuICAgIGFwcGx5UGF0Y2hlc18sXG4gICAgZ2VuZXJhdGVQYXRjaGVzXyxcbiAgICBnZW5lcmF0ZVJlcGxhY2VtZW50UGF0Y2hlc19cbiAgfSk7XG59XG5cbi8vIHNyYy9wbHVnaW5zL21hcHNldC50c1xuZnVuY3Rpb24gZW5hYmxlTWFwU2V0KCkge1xuICBjbGFzcyBEcmFmdE1hcCBleHRlbmRzIE1hcCB7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0LCBwYXJlbnQpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgICB0aGlzW0RSQUZUX1NUQVRFXSA9IHtcbiAgICAgICAgdHlwZV86IDIgLyogTWFwICovLFxuICAgICAgICBwYXJlbnRfOiBwYXJlbnQsXG4gICAgICAgIHNjb3BlXzogcGFyZW50ID8gcGFyZW50LnNjb3BlXyA6IGdldEN1cnJlbnRTY29wZSgpLFxuICAgICAgICBtb2RpZmllZF86IGZhbHNlLFxuICAgICAgICBmaW5hbGl6ZWRfOiBmYWxzZSxcbiAgICAgICAgY29weV86IHZvaWQgMCxcbiAgICAgICAgYXNzaWduZWRfOiB2b2lkIDAsXG4gICAgICAgIGJhc2VfOiB0YXJnZXQsXG4gICAgICAgIGRyYWZ0XzogdGhpcyxcbiAgICAgICAgaXNNYW51YWxfOiBmYWxzZSxcbiAgICAgICAgcmV2b2tlZF86IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgIHJldHVybiBsYXRlc3QodGhpc1tEUkFGVF9TVEFURV0pLnNpemU7XG4gICAgfVxuICAgIGhhcyhrZXkpIHtcbiAgICAgIHJldHVybiBsYXRlc3QodGhpc1tEUkFGVF9TVEFURV0pLmhhcyhrZXkpO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXTtcbiAgICAgIGFzc2VydFVucmV2b2tlZChzdGF0ZSk7XG4gICAgICBpZiAoIWxhdGVzdChzdGF0ZSkuaGFzKGtleSkgfHwgbGF0ZXN0KHN0YXRlKS5nZXQoa2V5KSAhPT0gdmFsdWUpIHtcbiAgICAgICAgcHJlcGFyZU1hcENvcHkoc3RhdGUpO1xuICAgICAgICBtYXJrQ2hhbmdlZChzdGF0ZSk7XG4gICAgICAgIHN0YXRlLmFzc2lnbmVkXy5zZXQoa2V5LCB0cnVlKTtcbiAgICAgICAgc3RhdGUuY29weV8uc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICBzdGF0ZS5hc3NpZ25lZF8uc2V0KGtleSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGVsZXRlKGtleSkge1xuICAgICAgaWYgKCF0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV07XG4gICAgICBhc3NlcnRVbnJldm9rZWQoc3RhdGUpO1xuICAgICAgcHJlcGFyZU1hcENvcHkoc3RhdGUpO1xuICAgICAgbWFya0NoYW5nZWQoc3RhdGUpO1xuICAgICAgaWYgKHN0YXRlLmJhc2VfLmhhcyhrZXkpKSB7XG4gICAgICAgIHN0YXRlLmFzc2lnbmVkXy5zZXQoa2V5LCBmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5hc3NpZ25lZF8uZGVsZXRlKGtleSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5jb3B5Xy5kZWxldGUoa2V5KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV07XG4gICAgICBhc3NlcnRVbnJldm9rZWQoc3RhdGUpO1xuICAgICAgaWYgKGxhdGVzdChzdGF0ZSkuc2l6ZSkge1xuICAgICAgICBwcmVwYXJlTWFwQ29weShzdGF0ZSk7XG4gICAgICAgIG1hcmtDaGFuZ2VkKHN0YXRlKTtcbiAgICAgICAgc3RhdGUuYXNzaWduZWRfID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgZWFjaChzdGF0ZS5iYXNlXywgKGtleSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmFzc2lnbmVkXy5zZXQoa2V5LCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdGF0ZS5jb3B5Xy5jbGVhcigpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3JFYWNoKGNiLCB0aGlzQXJnKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdO1xuICAgICAgbGF0ZXN0KHN0YXRlKS5mb3JFYWNoKChfdmFsdWUsIGtleSwgX21hcCkgPT4ge1xuICAgICAgICBjYi5jYWxsKHRoaXNBcmcsIHRoaXMuZ2V0KGtleSksIGtleSwgdGhpcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXTtcbiAgICAgIGFzc2VydFVucmV2b2tlZChzdGF0ZSk7XG4gICAgICBjb25zdCB2YWx1ZSA9IGxhdGVzdChzdGF0ZSkuZ2V0KGtleSk7XG4gICAgICBpZiAoc3RhdGUuZmluYWxpemVkXyB8fCAhaXNEcmFmdGFibGUodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSAhPT0gc3RhdGUuYmFzZV8uZ2V0KGtleSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZHJhZnQgPSBjcmVhdGVQcm94eSh2YWx1ZSwgc3RhdGUpO1xuICAgICAgcHJlcGFyZU1hcENvcHkoc3RhdGUpO1xuICAgICAgc3RhdGUuY29weV8uc2V0KGtleSwgZHJhZnQpO1xuICAgICAgcmV0dXJuIGRyYWZ0O1xuICAgIH1cbiAgICBrZXlzKCkge1xuICAgICAgcmV0dXJuIGxhdGVzdCh0aGlzW0RSQUZUX1NUQVRFXSkua2V5cygpO1xuICAgIH1cbiAgICB2YWx1ZXMoKSB7XG4gICAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMua2V5cygpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgW1N5bWJvbC5pdGVyYXRvcl06ICgpID0+IHRoaXMudmFsdWVzKCksXG4gICAgICAgIG5leHQ6ICgpID0+IHtcbiAgICAgICAgICBjb25zdCByID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgIGlmIChyLmRvbmUpXG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0KHIudmFsdWUpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgZW50cmllcygpIHtcbiAgICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5rZXlzKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXTogKCkgPT4gdGhpcy5lbnRyaWVzKCksXG4gICAgICAgIG5leHQ6ICgpID0+IHtcbiAgICAgICAgICBjb25zdCByID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgIGlmIChyLmRvbmUpXG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0KHIudmFsdWUpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiBbci52YWx1ZSwgdmFsdWVdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgWyhEUkFGVF9TVEFURSwgU3ltYm9sLml0ZXJhdG9yKV0oKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbnRyaWVzKCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHByb3h5TWFwXyh0YXJnZXQsIHBhcmVudCkge1xuICAgIHJldHVybiBuZXcgRHJhZnRNYXAodGFyZ2V0LCBwYXJlbnQpO1xuICB9XG4gIGZ1bmN0aW9uIHByZXBhcmVNYXBDb3B5KHN0YXRlKSB7XG4gICAgaWYgKCFzdGF0ZS5jb3B5Xykge1xuICAgICAgc3RhdGUuYXNzaWduZWRfID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgIHN0YXRlLmNvcHlfID0gbmV3IE1hcChzdGF0ZS5iYXNlXyk7XG4gICAgfVxuICB9XG4gIGNsYXNzIERyYWZ0U2V0IGV4dGVuZHMgU2V0IHtcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXQsIHBhcmVudCkge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIHRoaXNbRFJBRlRfU1RBVEVdID0ge1xuICAgICAgICB0eXBlXzogMyAvKiBTZXQgKi8sXG4gICAgICAgIHBhcmVudF86IHBhcmVudCxcbiAgICAgICAgc2NvcGVfOiBwYXJlbnQgPyBwYXJlbnQuc2NvcGVfIDogZ2V0Q3VycmVudFNjb3BlKCksXG4gICAgICAgIG1vZGlmaWVkXzogZmFsc2UsXG4gICAgICAgIGZpbmFsaXplZF86IGZhbHNlLFxuICAgICAgICBjb3B5Xzogdm9pZCAwLFxuICAgICAgICBiYXNlXzogdGFyZ2V0LFxuICAgICAgICBkcmFmdF86IHRoaXMsXG4gICAgICAgIGRyYWZ0c186IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgICAgIHJldm9rZWRfOiBmYWxzZSxcbiAgICAgICAgaXNNYW51YWxfOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICByZXR1cm4gbGF0ZXN0KHRoaXNbRFJBRlRfU1RBVEVdKS5zaXplO1xuICAgIH1cbiAgICBoYXModmFsdWUpIHtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV07XG4gICAgICBhc3NlcnRVbnJldm9rZWQoc3RhdGUpO1xuICAgICAgaWYgKCFzdGF0ZS5jb3B5Xykge1xuICAgICAgICByZXR1cm4gc3RhdGUuYmFzZV8uaGFzKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5jb3B5Xy5oYXModmFsdWUpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChzdGF0ZS5kcmFmdHNfLmhhcyh2YWx1ZSkgJiYgc3RhdGUuY29weV8uaGFzKHN0YXRlLmRyYWZ0c18uZ2V0KHZhbHVlKSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBhZGQodmFsdWUpIHtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV07XG4gICAgICBhc3NlcnRVbnJldm9rZWQoc3RhdGUpO1xuICAgICAgaWYgKCF0aGlzLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgcHJlcGFyZVNldENvcHkoc3RhdGUpO1xuICAgICAgICBtYXJrQ2hhbmdlZChzdGF0ZSk7XG4gICAgICAgIHN0YXRlLmNvcHlfLmFkZCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGVsZXRlKHZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuaGFzKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBzdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdO1xuICAgICAgYXNzZXJ0VW5yZXZva2VkKHN0YXRlKTtcbiAgICAgIHByZXBhcmVTZXRDb3B5KHN0YXRlKTtcbiAgICAgIG1hcmtDaGFuZ2VkKHN0YXRlKTtcbiAgICAgIHJldHVybiBzdGF0ZS5jb3B5Xy5kZWxldGUodmFsdWUpIHx8IChzdGF0ZS5kcmFmdHNfLmhhcyh2YWx1ZSkgPyBzdGF0ZS5jb3B5Xy5kZWxldGUoc3RhdGUuZHJhZnRzXy5nZXQodmFsdWUpKSA6IChcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgZmFsc2VcbiAgICAgICkpO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV07XG4gICAgICBhc3NlcnRVbnJldm9rZWQoc3RhdGUpO1xuICAgICAgaWYgKGxhdGVzdChzdGF0ZSkuc2l6ZSkge1xuICAgICAgICBwcmVwYXJlU2V0Q29weShzdGF0ZSk7XG4gICAgICAgIG1hcmtDaGFuZ2VkKHN0YXRlKTtcbiAgICAgICAgc3RhdGUuY29weV8uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFsdWVzKCkge1xuICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXTtcbiAgICAgIGFzc2VydFVucmV2b2tlZChzdGF0ZSk7XG4gICAgICBwcmVwYXJlU2V0Q29weShzdGF0ZSk7XG4gICAgICByZXR1cm4gc3RhdGUuY29weV8udmFsdWVzKCk7XG4gICAgfVxuICAgIGVudHJpZXMoKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdO1xuICAgICAgYXNzZXJ0VW5yZXZva2VkKHN0YXRlKTtcbiAgICAgIHByZXBhcmVTZXRDb3B5KHN0YXRlKTtcbiAgICAgIHJldHVybiBzdGF0ZS5jb3B5Xy5lbnRyaWVzKCk7XG4gICAgfVxuICAgIGtleXMoKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXMoKTtcbiAgICB9XG4gICAgWyhEUkFGVF9TVEFURSwgU3ltYm9sLml0ZXJhdG9yKV0oKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXMoKTtcbiAgICB9XG4gICAgZm9yRWFjaChjYiwgdGhpc0FyZykge1xuICAgICAgY29uc3QgaXRlcmF0b3IgPSB0aGlzLnZhbHVlcygpO1xuICAgICAgbGV0IHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgIHdoaWxlICghcmVzdWx0LmRvbmUpIHtcbiAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCByZXN1bHQudmFsdWUsIHJlc3VsdC52YWx1ZSwgdGhpcyk7XG4gICAgICAgIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcHJveHlTZXRfKHRhcmdldCwgcGFyZW50KSB7XG4gICAgcmV0dXJuIG5ldyBEcmFmdFNldCh0YXJnZXQsIHBhcmVudCk7XG4gIH1cbiAgZnVuY3Rpb24gcHJlcGFyZVNldENvcHkoc3RhdGUpIHtcbiAgICBpZiAoIXN0YXRlLmNvcHlfKSB7XG4gICAgICBzdGF0ZS5jb3B5XyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBzdGF0ZS5iYXNlXy5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoaXNEcmFmdGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgY29uc3QgZHJhZnQgPSBjcmVhdGVQcm94eSh2YWx1ZSwgc3RhdGUpO1xuICAgICAgICAgIHN0YXRlLmRyYWZ0c18uc2V0KHZhbHVlLCBkcmFmdCk7XG4gICAgICAgICAgc3RhdGUuY29weV8uYWRkKGRyYWZ0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0ZS5jb3B5Xy5hZGQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0VW5yZXZva2VkKHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlLnJldm9rZWRfKVxuICAgICAgZGllKDMsIEpTT04uc3RyaW5naWZ5KGxhdGVzdChzdGF0ZSkpKTtcbiAgfVxuICBsb2FkUGx1Z2luKFwiTWFwU2V0XCIsIHsgcHJveHlNYXBfLCBwcm94eVNldF8gfSk7XG59XG5cbi8vIHNyYy9pbW1lci50c1xudmFyIGltbWVyID0gbmV3IEltbWVyMigpO1xudmFyIHByb2R1Y2UgPSBpbW1lci5wcm9kdWNlO1xudmFyIHByb2R1Y2VXaXRoUGF0Y2hlcyA9IGltbWVyLnByb2R1Y2VXaXRoUGF0Y2hlcy5iaW5kKFxuICBpbW1lclxuKTtcbnZhciBzZXRBdXRvRnJlZXplID0gaW1tZXIuc2V0QXV0b0ZyZWV6ZS5iaW5kKGltbWVyKTtcbnZhciBzZXRVc2VTdHJpY3RTaGFsbG93Q29weSA9IGltbWVyLnNldFVzZVN0cmljdFNoYWxsb3dDb3B5LmJpbmQoaW1tZXIpO1xudmFyIGFwcGx5UGF0Y2hlcyA9IGltbWVyLmFwcGx5UGF0Y2hlcy5iaW5kKGltbWVyKTtcbnZhciBjcmVhdGVEcmFmdCA9IGltbWVyLmNyZWF0ZURyYWZ0LmJpbmQoaW1tZXIpO1xudmFyIGZpbmlzaERyYWZ0ID0gaW1tZXIuZmluaXNoRHJhZnQuYmluZChpbW1lcik7XG5mdW5jdGlvbiBjYXN0RHJhZnQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gY2FzdEltbXV0YWJsZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnQge1xuICBJbW1lcjIgYXMgSW1tZXIsXG4gIGFwcGx5UGF0Y2hlcyxcbiAgY2FzdERyYWZ0LFxuICBjYXN0SW1tdXRhYmxlLFxuICBjcmVhdGVEcmFmdCxcbiAgY3VycmVudCxcbiAgZW5hYmxlTWFwU2V0LFxuICBlbmFibGVQYXRjaGVzLFxuICBmaW5pc2hEcmFmdCxcbiAgZnJlZXplLFxuICBEUkFGVEFCTEUgYXMgaW1tZXJhYmxlLFxuICBpc0RyYWZ0LFxuICBpc0RyYWZ0YWJsZSxcbiAgTk9USElORyBhcyBub3RoaW5nLFxuICBvcmlnaW5hbCxcbiAgcHJvZHVjZSxcbiAgcHJvZHVjZVdpdGhQYXRjaGVzLFxuICBzZXRBdXRvRnJlZXplLFxuICBzZXRVc2VTdHJpY3RTaGFsbG93Q29weVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWltbWVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./.yarn/cache/immer-npm-10.0.2-c5dc19bd45-525a3b1421.zip/node_modules/immer/dist/immer.mjs\n");

/***/ })

}]);